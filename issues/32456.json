{
  "type": "issue",
  "issue": {
    "id": 3051321638,
    "node_id": "I_kwDOABII586133km",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/32456",
    "number": 32456,
    "state": "closed",
    "state_reason": "completed",
    "title": "qa: Failure in wallet_basic.py spendzeroconfchange test",
    "body": "CI failure (job: \"macOS 14 native, arm64, no depends, sqlite only, gui\") upon merge of my PR (ad5cd129f3cc72f2d2b140e182781bf3bb5dbacc): https://github.com/bitcoin/bitcoin/actions/runs/14916001314/job/41901630172\n\nRelevant high-level log:\n```\n22/267 - wallet_basic.py failed, Duration: 23 s\n\nstdout:\n2025-05-08T21:04:47.763000Z TestFramework (INFO): PRNG seed is: 1820560705145373934\n2025-05-08T21:04:47.764000Z TestFramework (INFO): Initializing test directory /Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250508_210317/wallet_basic_241\n2025-05-08T21:04:49.006000Z TestFramework (INFO): Mining blocks...\n2025-05-08T21:04:50.323000Z TestFramework (INFO): Test gettxout\n2025-05-08T21:04:50.342000Z TestFramework (INFO): Test gettxout (second part)\n2025-05-08T21:04:56.786000Z TestFramework (INFO): Test sendmany\n2025-05-08T21:04:56.833000Z TestFramework (INFO): Test sendmany with fee_rate param (explicit fee rate in sat/vB)\n2025-05-08T21:04:56.873000Z TestFramework (INFO): Test sendmany raises 'fee rate too low' if fee_rate of 0.99999999 is passed\n2025-05-08T21:04:56.876000Z TestFramework (INFO): Test sendmany raises if an invalid fee_rate is passed\n2025-05-08T21:04:56.894000Z TestFramework (INFO): Test sendmany raises if an invalid conf_target or estimate_mode is passed\n2025-05-08T21:04:59.702000Z TestFramework (INFO): Test -walletbroadcast\n2025-05-08T21:05:06.265000Z TestFramework (INFO): Test -reindex\n2025-05-08T21:05:08.464000Z TestFramework (INFO): Testing gettransaction response with different arguments...\n2025-05-08T21:05:08.468000Z TestFramework (INFO): Test send* RPCs with verbose=True\n2025-05-08T21:05:08.475000Z TestFramework (INFO): Test send* RPCs with verbose=False\n2025-05-08T21:05:08.480000Z TestFramework (INFO): Testing 'listunspent' outputs the parent descriptor(s) of coins\n2025-05-08T21:05:08.499000Z TestFramework (INFO): Test -spendzeroconfchange\n2025-05-08T21:05:09.800000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 183, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/wallet_basic.py\", line 659, in run_test\n    assert_equal(len(utxos), 1)\n    ~~~~~~~~~~~~^^^^^^^^^^^^^^^\n  File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/util.py\", line 77, in assert_equal\n    raise AssertionError(\"not(%s)\" % \" == \".join(str(arg) for arg in (thing1, thing2) + args))\nAssertionError: not(0 == 1)\n```\n\nSo far unable to reproduce on NixOS. Among other things tested:\n```\nbuild/test/functional/wallet_basic.py --random=1820560705145373934\nbuild/test/functional/test_runner.py --ci -j25 --tmpdirprefix /tmp/test_runner/ --ansi --combinedlogslen=99999999 --timeout-factor=40 --quiet --failfast\n```\n\nEdit: Next push to master succeeded as l0rinc noted, so this seems possibly timing dependent/racy.",
    "user": {
      "login": "hodlinator",
      "id": 172445034,
      "node_id": "U_kgDOCkdNag",
      "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hodlinator",
      "html_url": "https://github.com/hodlinator",
      "followers_url": "https://api.github.com/users/hodlinator/followers",
      "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
      "organizations_url": "https://api.github.com/users/hodlinator/orgs",
      "repos_url": "https://api.github.com/users/hodlinator/repos",
      "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hodlinator/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 3,
    "closed_at": "2025-05-14T12:24:02Z",
    "closed_by": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "created_at": "2025-05-09T07:48:08Z",
    "updated_at": "2025-05-14T13:42:06Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2865716098,
      "node_id": "IC_kwDOABII586qz1uC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2865716098",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-09T08:50:12Z",
      "updated_at": "2025-05-09T08:50:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "I can't reproduce it either on my Mac - but it does seem to be passing with latest push at least.\n\n<img width=\"549\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/30b441f9-a8d0-44ff-b23c-2529a7de424a\" />",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32456#issuecomment-2865716098",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456"
    },
    {
      "event": "commented",
      "id": 2877311830,
      "node_id": "IC_kwDOABII586rgEtW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877311830",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T17:03:05Z",
      "updated_at": "2025-05-13T17:03:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "See [#32483](https://github.com/bitcoin/bitcoin/pull/32483) for a fix / way to reproduce.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32456#issuecomment-2877311830",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456"
    },
    {
      "event": "closed",
      "id": 17652670432,
      "node_id": "CE_lADOABII586133kmzwAAAAQcLl_g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17652670432",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "33dfbbdff69dee2f1a27f69f5f7a123d0d47ef42",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/33dfbbdff69dee2f1a27f69f5f7a123d0d47ef42",
      "created_at": "2025-05-14T12:24:02Z"
    },
    {
      "event": "referenced",
      "id": 17652674815,
      "node_id": "REFE_lADOABII586133kmzwAAAAQcLnD_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17652674815",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "33dfbbdff69dee2f1a27f69f5f7a123d0d47ef42",
      "commit_url": "https://api.github.com/repos/fanquake/bitcoin/commits/33dfbbdff69dee2f1a27f69f5f7a123d0d47ef42",
      "created_at": "2025-05-14T12:24:18Z"
    },
    {
      "event": "commented",
      "id": 2880297237,
      "node_id": "IC_kwDOABII586rrdkV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2880297237",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T13:42:05Z",
      "updated_at": "2025-05-14T13:42:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "@mzumsande thanks for fixing this! Sorry I didn't have the time to fully understand how the wallet syncs before the fix was merged.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32456#issuecomment-2880297237",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32456"
    },
    {
      "event": "mentioned",
      "id": 17654068131,
      "node_id": "MEE_lADOABII586133kmzwAAAAQcQ7Oj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17654068131",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T13:42:06Z"
    },
    {
      "event": "subscribed",
      "id": 17654068162,
      "node_id": "SE_lADOABII586133kmzwAAAAQcQ7PC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17654068162",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T13:42:06Z"
    }
  ]
}