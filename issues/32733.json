{
  "type": "issue",
  "issue": {
    "id": 3138626120,
    "node_id": "I_kwDOABII5867E6JI",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32733",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32733/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32733/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32733/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/32733",
    "number": 32733,
    "state": "open",
    "state_reason": null,
    "title": "getbestblockhash is sometimes taking a very long time",
    "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nI'm running Bitcoin Core v29 on a RPi v4 with 4GB RAM and 2TB SSD. Sometimes when I run \"getbestblockhash\" it takes a very long time.\n\n```\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n0000000000000000000208fcdfe388b464d7a7ef9c05b2ad2701488f1eedbe70\n\nreal    10m21.332s\nuser    0m0.000s\nsys     0m0.026s\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n000000000000000000002f0d8fcab1392628ed73aa18848aa44cb53de6dff349\n\nreal    11m34.199s\nuser    0m0.002s\nsys     0m0.044s\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n0000000000000000000083ac9f1bc7ae399cd89f84c3058e5e7905a66da66394\n\nreal    4m40.592s\nuser    0m0.008s\nsys     0m0.019s\nadmin@raspibolt2:~ $ time bitcoin-cli getbestblockhash\n0000000000000000000083ac9f1bc7ae399cd89f84c3058e5e7905a66da66394\n\nreal    0m0.144s\nuser    0m0.007s\nsys     0m0.009s\n```\nThe last entry I ran immediately after the previous call and it returns the same hash which I guess is cached or easier to read on a subsequent call. I don't see anything in the logs but I am running the default log settings.\n\nIs there something that I need to tweak to get this to be more performant? Is there any other information needed to debug this?\n\n### Expected behaviour\n\ngetbestblockhash should return in seconds instead of minutes\n\n### Steps to reproduce\n\nbitcoin-cli getbestblockhash ....I'm not certain what data or environmental issues would cause it to take minutes to return.\n\n### Relevant log output\n\n_No response_\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nv29\n\n### Operating system and version\n\nDebian Bullseye Lite\n\n### Machine specifications\n\nRPI 4\n4GB RAM\n2TB SSD connected via USB",
    "user": {
      "login": "martinatime",
      "id": 258678,
      "node_id": "MDQ6VXNlcjI1ODY3OA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/258678?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/martinatime",
      "html_url": "https://github.com/martinatime",
      "followers_url": "https://api.github.com/users/martinatime/followers",
      "following_url": "https://api.github.com/users/martinatime/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/martinatime/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/martinatime/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/martinatime/subscriptions",
      "organizations_url": "https://api.github.com/users/martinatime/orgs",
      "repos_url": "https://api.github.com/users/martinatime/repos",
      "events_url": "https://api.github.com/users/martinatime/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/martinatime/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 326918230,
        "node_id": "MDU6TGFiZWwzMjY5MTgyMzA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Resource%20usage",
        "name": "Resource usage",
        "color": "981023",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 2,
    "created_at": "2025-06-12T02:52:17Z",
    "updated_at": "2025-06-12T21:39:36Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2965228225,
      "node_id": "IC_kwDOABII586wvcrB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2965228225",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-12T06:03:41Z",
      "updated_at": "2025-06-12T06:03:41Z",
      "author_association": "MEMBER",
      "body": "* Did you upgrade from 28.x? (https://github.com/bitcoin/bitcoin/issues/32455)\n* Other than that, I'd check the debug log via the  debug categories `bench, blockstorage, lock, prune, validation`, and possibly `rpc`, if there is a background caller?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32733#issuecomment-2965228225",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32733"
    },
    {
      "event": "labeled",
      "id": 18107980480,
      "node_id": "LE_lADOABII5867E6JIzwAAAAQ3UdrA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18107980480",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-12T06:03:56Z",
      "label": {
        "name": "Resource usage",
        "color": "981023"
      }
    },
    {
      "event": "commented",
      "id": 2968231303,
      "node_id": "IC_kwDOABII586w652H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2968231303",
      "actor": {
        "login": "martinatime",
        "id": 258678,
        "node_id": "MDQ6VXNlcjI1ODY3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/258678?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinatime",
        "html_url": "https://github.com/martinatime",
        "followers_url": "https://api.github.com/users/martinatime/followers",
        "following_url": "https://api.github.com/users/martinatime/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinatime/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinatime/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinatime/subscriptions",
        "organizations_url": "https://api.github.com/users/martinatime/orgs",
        "repos_url": "https://api.github.com/users/martinatime/repos",
        "events_url": "https://api.github.com/users/martinatime/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinatime/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-12T21:39:36Z",
      "updated_at": "2025-06-12T21:39:36Z",
      "author_association": "NONE",
      "body": "> * Did you upgrade from 28.x? ([bitcoind 29.0 much slower than 28.0 on my system: cause found #32455](https://github.com/bitcoin/bitcoin/issues/32455))\n\nI upgraded from v27.x I believe.\n\n> \n>     * Other than that, I'd check the debug log via the  debug categories `bench, blockstorage, lock, prune, validation`, and possibly `rpc`, if there is a background caller?\nI'll add these into the log and see what comes of it.\n",
      "user": {
        "login": "martinatime",
        "id": 258678,
        "node_id": "MDQ6VXNlcjI1ODY3OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/258678?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinatime",
        "html_url": "https://github.com/martinatime",
        "followers_url": "https://api.github.com/users/martinatime/followers",
        "following_url": "https://api.github.com/users/martinatime/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinatime/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinatime/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinatime/subscriptions",
        "organizations_url": "https://api.github.com/users/martinatime/orgs",
        "repos_url": "https://api.github.com/users/martinatime/repos",
        "events_url": "https://api.github.com/users/martinatime/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinatime/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32733#issuecomment-2968231303",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32733"
    }
  ]
}