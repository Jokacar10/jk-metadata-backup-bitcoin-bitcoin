{
  "type": "issue",
  "issue": {
    "id": 2516922209,
    "node_id": "I_kwDOABII586WBS9h",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30862",
    "number": 30862,
    "state": "closed",
    "state_reason": "not_planned",
    "title": "Race condition between ZMQ UpdateTip and getblocktemplate",
    "body": "### Is there an existing issue for this?\n\n- [X] I have searched the existing issues\n\n### Current behaviour\n\nWhen ZMQ announces a new chain tip via \"sequence\" \"C\" message, if `getblocktemplate` is called immediately, it can return a block template that does not reflect the new chain tip.\r\n\r\nThis is important for Braidpool, which needs to switch to a new chain tip as quickly as possible when a new block comes in.\n\n### Expected behaviour\n\n`getblocktemplate` should return a result consistent with the information announced via ZMQ and correctly reflect the current chain tip.\n\n### Steps to reproduce\n\nThis was seen on the `cpunet` testnet fork (which does not touch any of the consensus or ZMQ code). The bug report there is: https://github.com/braidpool/bitcoin/issues/1#issuecomment-2341397203\r\n\r\nThis occurs infrequently and it may be necessary to run the miner script for a day or more to see it.\r\n\r\nThe script that receives the ZMQ messages and calls `getblocktemplate` is here: https://github.com/braidpool/bitcoin/blob/cpunet/contrib/cpunet/miner\n\n### Relevant log output\n\nPlease see https://github.com/braidpool/bitcoin/issues/1#issuecomment-2341397203 for log output.\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nBitcoin Core version v27.99.0-e8b157f687eb-dirty\n\n### Operating system and version\n\nArch Linux 6.10.5-zen1-1-zen #1 ZEN SMP PREEMPT_DYNAMIC\n\n### Machine specifications\n\n8 core Ryzen, SSD.",
    "user": {
      "login": "mcelrath",
      "id": 1746780,
      "node_id": "MDQ6VXNlcjE3NDY3ODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcelrath",
      "html_url": "https://github.com/mcelrath",
      "followers_url": "https://api.github.com/users/mcelrath/followers",
      "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
      "organizations_url": "https://api.github.com/users/mcelrath/orgs",
      "repos_url": "https://api.github.com/users/mcelrath/repos",
      "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/mcelrath/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": true,
    "comments": 13,
    "closed_at": "2024-09-19T15:20:34Z",
    "closed_by": {
      "login": "mcelrath",
      "id": 1746780,
      "node_id": "MDQ6VXNlcjE3NDY3ODA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mcelrath",
      "html_url": "https://github.com/mcelrath",
      "followers_url": "https://api.github.com/users/mcelrath/followers",
      "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
      "organizations_url": "https://api.github.com/users/mcelrath/orgs",
      "repos_url": "https://api.github.com/users/mcelrath/repos",
      "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/mcelrath/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "created_at": "2024-09-10T16:28:38Z",
    "updated_at": "2025-09-19T11:43:51Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 14214060468,
      "node_id": "LE_lADOABII586WBS9hzwAAAANPOVm0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14214060468",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-11T10:57:31Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 2347161468,
      "node_id": "IC_kwDOABII586L5td8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2347161468",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T20:17:52Z",
      "updated_at": "2024-09-12T20:17:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "can you rule out that someone else on the network just mined a block, and the inconclusive `getblocktemplate` result belongs to a previous call that was sent off before that new block was connected?",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2347161468",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2347235405,
      "node_id": "IC_kwDOABII586L5_hN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2347235405",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T21:02:16Z",
      "updated_at": "2024-09-12T21:02:16Z",
      "author_association": "NONE",
      "body": "I believe that's answered positively by the timestamps and structure of the\r\ncalling code.\r\n\r\nA better test would be to reproduce this with regtest which I'll create a\r\nscript to demonstrate soon.\r\n\r\nBut at the same time it seems there should be a mutex around the chain tip.\r\nIf there isn't this is basically guaranteed to happen. I haven't looked yet.\r\n\r\nOn Thu, Sep 12, 2024, 4:18 PM Martin Zumsande ***@***.***>\r\nwrote:\r\n\r\n> can you rule out that someone else on the network just mined a block, and\r\n> the inconclusive getblocktemplate result belongs to a previous call that\r\n> was sent off before that new block was connected?\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2347161468>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AANKOXC46L4DZOZRMYSCJSLZWHZIRAVCNFSM6AAAAABN7EPF2CVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDGNBXGE3DCNBWHA>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>\r\n",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2347235405",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2347297919,
      "node_id": "IC_kwDOABII586L6Ox_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2347297919",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-12T21:41:36Z",
      "updated_at": "2024-09-12T21:41:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I believe that's answered positively by the timestamps and structure of the calling code.\r\n\r\nnot really. I don't see a `\"Calling bitcoin-cli: getblocktemplate\"` entry in the [log](https://github.com/braidpool/bitcoin/issues/1#issuecomment-2341397203) excerpt, but I do see a `DEBUG     result =` log entry. \r\n\r\nBoth logs are part of `async def bitcoin_cli(self, *args, input=b\"\"):` in your script. That's why I thought the rpc call may have happened before the block was connected by bitcoind.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2347297919",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2358889569,
      "node_id": "IC_kwDOABII586Mmcxh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2358889569",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-18T16:14:19Z",
      "updated_at": "2024-09-18T16:14:19Z",
      "author_association": "MEMBER",
      "body": "> A better test would be to reproduce this with regtest which I'll create a script to demonstrate soon.\r\n\r\nDid you get a chance to write the reproducer?\r\n\r\n> But at the same time it seems there should be a mutex around the chain tip. If there isn't this is basically guaranteed to happen. I haven't looked yet.\r\n\r\nYes, the mutex is called `cs_main` or `ChainstateManager::GetMutex()` . The mutex is held while enqueueing the event. And `getblocktemplate` takes the mutex at the start.\r\n\r\nSo there may be (for example) two `BlockConnected` events, but the tip that `getblocktemplate` later sees obviously can only be one of the two (not both at the same time), or even none of the two.\r\n\r\n\r\n\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2358889569",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2358912616,
      "node_id": "IC_kwDOABII586MmiZo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2358912616",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-18T16:25:27Z",
      "updated_at": "2024-09-18T16:25:27Z",
      "author_association": "NONE",
      "body": "Not yet. I've been running my morning script all week and haven't seen it\r\nhappen again.\r\n\r\nOn Wed, Sep 18, 2024, 12:14 PM maflcko ***@***.***> wrote:\r\n\r\n> A better test would be to reproduce this with regtest which I'll create a\r\n> script to demonstrate soon.\r\n>\r\n> Did you get a chance to write the reproducer?\r\n>\r\n> But at the same time it seems there should be a mutex around the chain\r\n> tip. If there isn't this is basically guaranteed to happen. I haven't\r\n> looked yet.\r\n>\r\n> Yes, the mutex is called cs_main or ChainstateManager::GetMutex() . The\r\n> mutex is held while enqueueing the event. And getblocktemplate takes the\r\n> mutex at the start.\r\n>\r\n> So there may be (for example) two BlockConnected events, but the tip that\r\n> getblocktemplate later sees obviously can only be one of the two (not\r\n> both at the same time), or even none of the two.\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2358889569>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AANKOXHI3RSJCGFNMVOSFYLZXGRHHAVCNFSM6AAAAABN7EPF2CVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDGNJYHA4DSNJWHE>\r\n> .\r\n> You are receiving this because you authored the thread.Message ID:\r\n> ***@***.***>\r\n>\r\n",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2358912616",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2360121854,
      "node_id": "IC_kwDOABII586MrJn-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2360121854",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T06:43:36Z",
      "updated_at": "2024-09-19T06:43:36Z",
      "author_association": "MEMBER",
      "body": "> ### Expected behaviour\r\n> \r\n> `getblocktemplate` should return a result consistent with the information announced via ZMQ and correctly reflect the current chain tip.\r\n\r\nSo to clarify my previous reply. What you describe as \"expected behavior\" is impossible to achieve. A `C` message just contains the block hash of a previous `BlockConnected` event. While often this will be equal to the result of an RPC `getbestblockhash` or `getblocktemplate` done after receiving the `C` message, there isn't (and obviously can't) be a guarantee for it. The tip can (and should) advance at any point in time, when there is a better tip.\r\n\r\nMaybe I am missing something, but given the information so far, I don't think there is a bug here, or otherwise that there is something that can be fixed.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2360121854",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2360944838,
      "node_id": "IC_kwDOABII586MuSjG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2360944838",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T13:09:38Z",
      "updated_at": "2024-09-19T13:09:38Z",
      "author_association": "NONE",
      "body": "Why cannot these results be consistent? Isn't that the purpose of a mutex on the Chainstate? It's not clear to me why there \"obviously can't\" be multi-threaded consistency on the chain state. The (apparent) order of operations here is:\r\n1. Chain tip received\r\n2. ZMQ broadcast\r\n3. RPC call getblocktemplate\r\n\r\nIf 3 were reversed with 1 or 2 I would agree with the \"can't\" statement, but that doesn't seem to be what's happening.\r\n\r\nIt seems to me that the ZMQ message is being sent while that mutex is not being held, and the fix should be simple -- make sure that mutex is held until the ZMQ alert is finished. A new RPC call that comes in should block until the Chainstate update (including announcement over ZMQ) is complete.",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2360944838",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2361181143,
      "node_id": "IC_kwDOABII586MvMPX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2361181143",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T14:35:53Z",
      "updated_at": "2024-09-19T14:35:53Z",
      "author_association": "MEMBER",
      "body": "> fix should be simple -- make sure that mutex is held until the ZMQ alert is finished. A new RPC call that comes in should block until the Chainstate update (including announcement over ZMQ) is complete.\r\n\r\nThat'd block Bitcoin Core from making any progress in the meantime. When it comes to connecting new blocks to the tip, announcing/relaying, and starting to mine on them, no additional delay is acceptable, because for miners any delay means that they'd work on a stale block.\r\n\r\n\r\n\r\n> Why cannot these results be consistent?\r\n\r\nBecause a block can appear and be connected at any time.\r\n\r\nFor example:\r\n\r\n* Block `A` is connected, ZMQ `C:A` is enqueued \r\n* Block `B` is connected, ZMQ `C:B` is enqueued\r\n* `getbestblockhash` is called in response to `C:A`\r\n\r\n`getbestblockhash` must return the best block hash (aka tip). It must *not* and can not return `A`, because it is not the tip. It will return the tip, which may or may not be `B`.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2361181143",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2361213571,
      "node_id": "IC_kwDOABII586MvUKD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2361213571",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T14:45:38Z",
      "updated_at": "2024-09-19T14:45:38Z",
      "author_association": "MEMBER",
      "body": "My advice would be to never ever look at the contents of ZMQ notifications, but just see them as notifications that new information may be available, so you should go check and see for yourself. Given the fact that ZMQ notifications can be delayed (see this example) or even dropped entirely (if the queue grows too large, ZMQ has no guarantees AFAIK), you:\r\n* need to check for updated information anyway whenever a notification comes in\r\n* need a mechanism to check occasionally even without notifications (and especially after restarts)\r\n\r\nIn fact, I consider it a historic mistake that ZMQ notifications include block/transaction hashes/data at all.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2361213571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2361214383,
      "node_id": "IC_kwDOABII586MvUWv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2361214383",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T14:45:58Z",
      "updated_at": "2024-09-19T14:45:58Z",
      "author_association": "NONE",
      "body": "Working on a stale block is exactly the problem here, because of inconsistent responses. I think we have a miscommunication here... It sound like you're saying there's no way to avoid working on a stale block...",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2361214383",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2361224527,
      "node_id": "IC_kwDOABII586MvW1P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2361224527",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T14:49:05Z",
      "updated_at": "2024-09-19T14:49:05Z",
      "author_association": "NONE",
      "body": "@sipa we're planning on switching to the new IPC mechanism anyway, that StratumV2 is also using. Do you have any comments about synchronicity in that context?\r\n\r\nFWIW I think I'm the only person ever to have used ZMQ. My `contrib/zmq/zmq_sub.py`  file no longer works due to python async changes. I'm also planning on submitting a PR to update it. But maybe I agree ZMQ might be a mistake. OTOH I think polling in the 21st century is also a mistake.",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2361224527",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "mentioned",
      "id": 14325639620,
      "node_id": "MEE_lADOABII586WBS9hzwAAAANV3-nE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14325639620",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T14:49:07Z"
    },
    {
      "event": "subscribed",
      "id": 14325639642,
      "node_id": "SE_lADOABII586WBS9hzwAAAANV3-na",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14325639642",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T14:49:07Z"
    },
    {
      "event": "commented",
      "id": 2361266204,
      "node_id": "IC_kwDOABII586MvhAc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2361266204",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T15:01:27Z",
      "updated_at": "2024-09-19T15:01:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Would be nice to respond to my prior message: Why doesn't your [Miner log](https://github.com/braidpool/bitcoin/issues/1#issuecomment-2341397203) show a timestamped \"[Calling bitcoin-cli](https://github.com/braidpool/bitcoin/blob/29c38babfb83f8520a882bad6b25d1851b7b4a41/contrib/cpunet/miner#L108) (...) getblocktemplate\" entry, if, supposedly, the relevant call to `getblocktemplate` call was sent off after the zmq notification for the new tip was received?\r\n\r\nWithout an explanation for that, it just looks to me that you get the delayed result of an older `getblocktemplate` invocation, and there is no issue at all.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2361266204",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "commented",
      "id": 2361325732,
      "node_id": "IC_kwDOABII586Mvvik",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2361325732",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T15:20:34Z",
      "updated_at": "2024-09-19T15:20:34Z",
      "author_association": "NONE",
      "body": "@mzumsande you are right. Apparently I failed to scroll up in the log. There was several tips announced simultaneously and this is absolutely due to a previous invocation of `getblocktemplate`. I'm going to close issue this now, as I've also failed to reproduce it since.\r\n\r\nLog with more context attached.\r\n\r\n[miner.log](https://github.com/user-attachments/files/17061890/miner.log)\r\n",
      "user": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30862#issuecomment-2361325732",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30862"
    },
    {
      "event": "closed",
      "id": 14326164375,
      "node_id": "CE_lADOABII586WBS9hzwAAAANV5-uX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14326164375",
      "actor": {
        "login": "mcelrath",
        "id": 1746780,
        "node_id": "MDQ6VXNlcjE3NDY3ODA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1746780?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mcelrath",
        "html_url": "https://github.com/mcelrath",
        "followers_url": "https://api.github.com/users/mcelrath/followers",
        "following_url": "https://api.github.com/users/mcelrath/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mcelrath/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mcelrath/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mcelrath/subscriptions",
        "organizations_url": "https://api.github.com/users/mcelrath/orgs",
        "repos_url": "https://api.github.com/users/mcelrath/repos",
        "events_url": "https://api.github.com/users/mcelrath/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mcelrath/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T15:20:34Z"
    },
    {
      "event": "mentioned",
      "id": 14326164685,
      "node_id": "MEE_lADOABII586WBS9hzwAAAANV5-zN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14326164685",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T15:20:35Z"
    },
    {
      "event": "subscribed",
      "id": 14326164702,
      "node_id": "SE_lADOABII586WBS9hzwAAAANV5-ze",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14326164702",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-19T15:20:35Z"
    },
    {
      "event": "locked",
      "id": 19797740965,
      "node_id": "LOE_lADOABII586WBS9hzwAAAAScCY2l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19797740965",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-19T11:43:51Z"
    }
  ]
}