{
  "type": "issue",
  "issue": {
    "id": 2303845045,
    "node_id": "I_kwDOABII586JUeK1",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/30138",
    "number": 30138,
    "state": "open",
    "state_reason": null,
    "title": "LevelDB error: Corruption: block checksum mismatch didn't trigger reindex.",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nFor the past 29 hours, it's been stuck trying to sync:\r\n>**Number of blocks left** Unknown. Syncing Headers (843771, 100.0%)…\r\n\r\nand\r\n\r\n>Connecting to peers…\r\n\r\nI'm also pruning (`prune=550`).\r\n\r\n### Expected behaviour\r\n\r\nIt should sync the full chain and reindex if needed, not try to sync what it can't (due to possibly corrupt chainstate DB).\r\n\r\n### Steps to reproduce\r\n\r\nOpen up `bitcoin-qt`. It doesn't say I need to reindex, but everything else works. It connects to many peers, but very little date (<25 KB) is transferred between each of them.\r\n\r\n### Relevant log output\r\n\r\n```\r\n2024-05-16T22:38:54Z Writing 0 unbroadcast transactions to disk.\r\n2024-05-16T22:38:54Z Dumped mempool: 0.055s to copy, 2.286s to dump\r\n2024-05-16T22:38:54Z Flushed fee estimates to fee_estimates.dat.\r\n2024-05-16T22:38:54Z Fatal LevelDB error: Corruption: block checksum mismatch: /home/geremia/.bitcoin/chainstate/5753777.ldb\r\n2024-05-16T22:38:54Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2024-05-16T22:38:54Z *** System error while flushing: Fatal LevelDB error: Corruption: block checksum mismatch: /home/geremia/.bitcoin/chainstate/5753777.ldb\r\n2024-05-16T22:38:54Z Error: A fatal internal error occurred, see debug.log for details\r\n2024-05-16T22:38:54Z ForceFlushStateToDisk: failed to flush state (System error while flushing: Fatal LevelDB error: Corruption: block checksum mismatch: /home/geremia/.bitcoin/chainstate/5753777.ldb)\r\n2024-05-16T22:38:54Z Fatal LevelDB error: Corruption: block checksum mismatch: /home/geremia/.bitcoin/chainstate/5753777.ldb\r\n2024-05-16T22:38:54Z You can use -debug=leveldb to get more complete diagnostic messages\r\n2024-05-16T22:38:54Z *** System error while flushing: Fatal LevelDB error: Corruption: block checksum mismatch: /home/geremia/.bitcoin/chainstate/5753777.ldb\r\n2024-05-16T22:38:54Z Error: A fatal internal error occurred, see debug.log for details\r\n2024-05-16T22:38:54Z ForceFlushStateToDisk: failed to flush state (System error while flushing: Fatal LevelDB error: Corruption: block checksum mismatch: /home/geremia/.bitcoin/chainstate/5753777.ldb)\r\n2024-05-16T22:38:54Z [default wallet] Releasing wallet\r\n2024-05-16T22:38:54Z Shutdown: done\r\n```\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv27.0\r\n\r\n### Operating system and version\r\n\r\nslackware64-current\r\n\r\n### Machine specifications\r\n\r\n_No response_",
    "user": {
      "login": "Geremia",
      "id": 4298614,
      "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Geremia",
      "html_url": "https://github.com/Geremia",
      "followers_url": "https://api.github.com/users/Geremia/followers",
      "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
      "organizations_url": "https://api.github.com/users/Geremia/orgs",
      "repos_url": "https://api.github.com/users/Geremia/repos",
      "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Geremia/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 64585,
        "node_id": "MDU6TGFiZWw2NDU4NQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Bug",
        "name": "Bug",
        "color": "FBBAAB",
        "default": false
      },
      {
        "id": 323697996,
        "node_id": "MDU6TGFiZWwzMjM2OTc5OTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Data%20corruption",
        "name": "Data corruption",
        "color": "f7c6c7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 11,
    "created_at": "2024-05-18T04:34:07Z",
    "updated_at": "2025-05-16T08:57:46Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 2118691502,
      "node_id": "IC_kwDOABII585-SKqu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118691502",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T08:22:50Z",
      "updated_at": "2024-05-18T08:22:50Z",
      "author_association": "MEMBER",
      "body": "Can you clarify this? The debug log says \"Shutdown: done\", but you claim that \"It connects to many peers\", indicating that the program is still running?\r\n\r\nIf this is the case, it would be a bug, because the program should abort and shutdown when file corruption is detected in the leveldb database.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2118691502",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "labeled",
      "id": 12855061484,
      "node_id": "LE_lADOABII586JUeK1zwAAAAL-OKvs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12855061484",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T08:23:00Z",
      "label": {
        "name": "Bug",
        "color": "FBBAAB"
      }
    },
    {
      "event": "labeled",
      "id": 12855061486,
      "node_id": "LE_lADOABII586JUeK1zwAAAAL-OKvu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12855061486",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T08:23:00Z",
      "label": {
        "name": "Data corruption",
        "color": "f7c6c7"
      }
    },
    {
      "event": "labeled",
      "id": 12855061488,
      "node_id": "LE_lADOABII586JUeK1zwAAAAL-OKvw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12855061488",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T08:23:00Z",
      "label": {
        "name": "Questions and Help",
        "color": "006688"
      }
    },
    {
      "event": "commented",
      "id": 2118963106,
      "node_id": "IC_kwDOABII585-TM-i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118963106",
      "actor": {
        "login": "Geremia",
        "id": 4298614,
        "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Geremia",
        "html_url": "https://github.com/Geremia",
        "followers_url": "https://api.github.com/users/Geremia/followers",
        "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
        "organizations_url": "https://api.github.com/users/Geremia/orgs",
        "repos_url": "https://api.github.com/users/Geremia/repos",
        "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Geremia/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T18:56:13Z",
      "updated_at": "2024-05-18T20:03:23Z",
      "author_association": "NONE",
      "body": "@maflcko \r\n\r\n> The debug log says \"Shutdown: done\", but you claim that \"It connects to many peers\", indicating that the program is still running?\r\n\r\nWhen I restart bitcoin-qt, it should have asked to reindex, but instead it connects to peers and tries to sync (but stalls):\r\n\r\n![screenshot](https://github.com/bitcoin/bitcoin/assets/4298614/370701ba-7c68-4a0c-9c07-03424dd4e74a)\r\n\r\nThe debug log doesn't show any more corrupt DB errors than the one I pasted above.",
      "user": {
        "login": "Geremia",
        "id": 4298614,
        "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Geremia",
        "html_url": "https://github.com/Geremia",
        "followers_url": "https://api.github.com/users/Geremia/followers",
        "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
        "organizations_url": "https://api.github.com/users/Geremia/orgs",
        "repos_url": "https://api.github.com/users/Geremia/repos",
        "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Geremia/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2118963106",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "mentioned",
      "id": 12856707190,
      "node_id": "MEE_lADOABII586JUeK1zwAAAAL-Uch2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12856707190",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T18:56:14Z"
    },
    {
      "event": "subscribed",
      "id": 12856707196,
      "node_id": "SE_lADOABII586JUeK1zwAAAAL-Uch8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12856707196",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T18:56:15Z"
    },
    {
      "event": "commented",
      "id": 2118987509,
      "node_id": "IC_kwDOABII585-TS71",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2118987509",
      "actor": {
        "login": "Geremia",
        "id": 4298614,
        "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Geremia",
        "html_url": "https://github.com/Geremia",
        "followers_url": "https://api.github.com/users/Geremia/followers",
        "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
        "organizations_url": "https://api.github.com/users/Geremia/orgs",
        "repos_url": "https://api.github.com/users/Geremia/repos",
        "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Geremia/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-18T19:46:30Z",
      "updated_at": "2024-05-21T19:40:04Z",
      "author_association": "NONE",
      "body": "Later, I tried Knots, but the issue occurs with that fork, too. I also noticed that from `2024-05-18T04:48:21Z` to `2024-05-18T04:48:35Z` (14 second duration) I got 30 messages in `debug.log` that say:\r\n```\r\n2024-05-18T04:48:21Z UpdateTip: new best=00000000000000000003483012d42cbcd1ebe486364e46a56b8800fadfd43b74 height=843741 version=0x20f12000 log2_work=94.927416 tx=1005741855 date='2024-05-16T18:51:28Z' progress=0.999244 cache=1.4MiB(11882txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:22Z UpdateTip: new best=0000000000000000000014c2b943de6983dc19f4f0ea6b63d57448bfc8de5038 height=843742 version=0x2035a000 log2_work=94.927430 tx=1005747486 date='2024-05-16T18:53:35Z' progress=0.999245 cache=2.0MiB(16673txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:22Z UpdateTip: new best=00000000000000000002eff303c89bd3e5b47a9c7272f9ee900526e0b228b8c0 height=843743 version=0x34ecc000 log2_work=94.927444 tx=1005754059 date='2024-05-16T18:58:02Z' progress=0.999247 cache=2.7MiB(21142txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:23Z UpdateTip: new best=0000000000000000000353a62ed7e20746378acc3bc6dc0b6a4a7a45e1e17bc8 height=843744 version=0x201a6000 log2_work=94.927457 tx=1005756478 date='2024-05-16T19:10:14Z' progress=0.999251 cache=4.0MiB(33339txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:23Z UpdateTip: new best=000000000000000000033dfde7f3bb2f2685697bd90e19b32a1a77646ffd52e8 height=843745 version=0x20600000 log2_work=94.927471 tx=1005764229 date='2024-05-16T19:10:49Z' progress=0.999251 cache=4.0MiB(34655txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:23Z UpdateTip: new best=00000000000000000001b12bfcf09ce2b914ef27f3c006356964f28ace662f1f height=843746 version=0x215ce000 log2_work=94.927485 tx=1005771799 date='2024-05-16T19:11:19Z' progress=0.999251 cache=4.3MiB(36062txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:24Z UpdateTip: new best=00000000000000000002c363be6f60c920b06716cee9e59ce4e2d92422401d80 height=843747 version=0x25dd4000 log2_work=94.927499 tx=1005774696 date='2024-05-16T19:28:35Z' progress=0.999258 cache=5.9MiB(50090txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:25Z UpdateTip: new best=000000000000000000016e0c9f15c0cbc29d08d27e65a89e44ebf8fb474792d6 height=843748 version=0x20560000 log2_work=94.927512 tx=1005777130 date='2024-05-16T19:35:55Z' progress=0.999261 cache=7.0MiB(60180txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:26Z UpdateTip: new best=000000000000000000011274fd7cb748fa1fc056f29ec7e9b9e2d6f6e3166681 height=843749 version=0x2f71c000 log2_work=94.927526 tx=1005781435 date='2024-05-16T19:43:35Z' progress=0.999263 cache=8.1MiB(69522txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:26Z UpdateTip: new best=0000000000000000000230bf5ecccfd4a279fd960dd73215916adb6b58d606d7 height=843750 version=0x2000c000 log2_work=94.927540 tx=1005786143 date='2024-05-16T19:45:25Z' progress=0.999264 cache=8.6MiB(73485txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:26Z UpdateTip: new best=0000000000000000000157f74546dba8178edf0183204270f780c8a881a2b171 height=843751 version=0x228cc004 log2_work=94.927553 tx=1005790255 date='2024-05-16T19:53:07Z' progress=0.999267 cache=9.4MiB(81218txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:27Z UpdateTip: new best=0000000000000000000267aeea2f1f1c584a4cd7f4d8236f964ef38bf01f6326 height=843752 version=0x2fa6e000 log2_work=94.927567 tx=1005793244 date='2024-05-16T20:16:20Z' progress=0.999276 cache=11.3MiB(95581txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:28Z UpdateTip: new best=000000000000000000028daedf7e7c2b711c606dd939f056cdc2d4e65c4e2c3f height=843753 version=0x3e9a8000 log2_work=94.927581 tx=1005795518 date='2024-05-16T20:29:29Z' progress=0.999280 cache=12.9MiB(108600txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:28Z UpdateTip: new best=00000000000000000001955fef1cbb90e9be2f3032ffc0771b048687fbed50e7 height=843754 version=0x22834000 log2_work=94.927594 tx=1005797687 date='2024-05-16T20:44:31Z' progress=0.999286 cache=13.7MiB(117722txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:29Z UpdateTip: new best=00000000000000000000201c6fe53184f0317751669f14f6358ab3987a91ecdf height=843755 version=0x2000e000 log2_work=94.927608 tx=1005801582 date='2024-05-16T20:45:04Z' progress=0.999286 cache=14.5MiB(125347txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:29Z UpdateTip: new best=0000000000000000000049055669f7d22f90eb2961f89879f4469c0e4db1cc6d height=843756 version=0x221da000 log2_work=94.927622 tx=1005805028 date='2024-05-16T21:01:52Z' progress=0.999292 cache=15.5MiB(134238txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:30Z UpdateTip: new best=000000000000000000006ac9f2ab61d6826a7c856d712774f8450e6399380dee height=843757 version=0x20090000 log2_work=94.927635 tx=1005810055 date='2024-05-16T21:08:09Z' progress=0.999295 cache=16.0MiB(139911txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:30Z UpdateTip: new best=00000000000000000002af779a9d511ca85d5b332ee287a00c3c2c1aab084755 height=843758 version=0x2000c000 log2_work=94.927649 tx=1005816645 date='2024-05-16T21:08:58Z' progress=0.999295 cache=16.3MiB(142353txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:31Z UpdateTip: new best=00000000000000000000421e0d2c5c2439789e0b23002207318da65851b5fb2c height=843759 version=0x24938000 log2_work=94.927663 tx=1005817052 date='2024-05-16T21:09:12Z' progress=0.999295 cache=17.1MiB(149587txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:31Z UpdateTip: new best=00000000000000000001bf6d7c4c88a24d7a3f9459f00610a4fbcfc8e05af00f height=843760 version=0x27058000 log2_work=94.927676 tx=1005821260 date='2024-05-16T21:18:54Z' progress=0.999299 cache=17.8MiB(156907txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:32Z UpdateTip: new best=00000000000000000001a013f69917a80afa6d8c4639ac3996db8e4052b720ca height=843762 version=0x2205e000 log2_work=94.927704 tx=1005831678 date='2024-05-16T21:36:27Z' progress=0.999305 cache=19.1MiB(169799txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:32Z UpdateTip: new best=0000000000000000000221c6b3e69a3e998e0e991e86ee8bd91c0eda57cde9cf height=843763 version=0x22790000 log2_work=94.927717 tx=1005835262 date='2024-05-16T21:58:59Z' progress=0.999314 cache=21.5MiB(180764txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:32Z UpdateTip: new best=000000000000000000015ff1104042ddd32519423132ec46839d44f7e6e89634 height=843764 version=0x29536000 log2_work=94.927731 tx=1005835267 date='2024-05-16T22:12:33Z' progress=0.999319 cache=21.5MiB(180770txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:33Z UpdateTip: new best=000000000000000000019b717b4fdff8a0a116deef0990245de104e7563baf85 height=843765 version=0x20198000 log2_work=94.927745 tx=1005841149 date='2024-05-16T22:24:17Z' progress=0.999323 cache=22.4MiB(187212txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:33Z UpdateTip: new best=000000000000000000024ac4c0678d90b5c7ca958388a485631df6e9ddc66734 height=843766 version=0x27baa000 log2_work=94.927758 tx=1005846943 date='2024-05-16T22:25:44Z' progress=0.999324 cache=22.9MiB(191721txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:34Z UpdateTip: new best=00000000000000000000d9e6e86f1ba6a0d17087eca395f706cb4159a67db084 height=843767 version=0x27148000 log2_work=94.927772 tx=1005850674 date='2024-05-16T22:29:33Z' progress=0.999325 cache=23.7MiB(201280txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:34Z UpdateTip: new best=00000000000000000000579be079f1c9b9a46f240c35f01d316e9fc157cfdc5e height=843768 version=0x2a000000 log2_work=94.927786 tx=1005856488 date='2024-05-16T22:34:40Z' progress=0.999327 cache=24.3MiB(206192txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:34Z UpdateTip: new best=00000000000000000003282d343fcaa8352f7bcf69db83e34202bac40e2b0348 height=843769 version=0x3fff0000 log2_work=94.927799 tx=1005862416 date='2024-05-16T22:46:33Z' progress=0.999331 cache=24.9MiB(211489txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:34Z UpdateTip: new best=000000000000000000010d70b30e8fd47a4c52f02e2d88a383512841c1d18d24 height=843770 version=0x2c000000 log2_work=94.927813 tx=1005864462 date='2024-05-16T22:51:59Z' progress=0.999333 cache=25.2MiB(213302txo) warning='Miner violated version bit protocol'\r\n2024-05-18T04:48:35Z UpdateTip: new best=00000000000000000000b02efe5ada29a5aa034fe48423fb621f89a2f9fc335a height=843771 version=0x2d3f8004 log2_work=94.927827 tx=1005865111 date='2024-05-16T22:52:35Z' progress=0.999334 cache=26.2MiB(223592txo) warning='Miner violated version bit protocol'\r\n```",
      "user": {
        "login": "Geremia",
        "id": 4298614,
        "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Geremia",
        "html_url": "https://github.com/Geremia",
        "followers_url": "https://api.github.com/users/Geremia/followers",
        "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
        "organizations_url": "https://api.github.com/users/Geremia/orgs",
        "repos_url": "https://api.github.com/users/Geremia/repos",
        "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Geremia/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2118987509",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2123313968,
      "node_id": "IC_kwDOABII585-jzMw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2123313968",
      "actor": {
        "login": "Geremia",
        "id": 4298614,
        "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Geremia",
        "html_url": "https://github.com/Geremia",
        "followers_url": "https://api.github.com/users/Geremia/followers",
        "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
        "organizations_url": "https://api.github.com/users/Geremia/orgs",
        "repos_url": "https://api.github.com/users/Geremia/repos",
        "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Geremia/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T19:37:01Z",
      "updated_at": "2024-05-21T19:37:35Z",
      "author_association": "NONE",
      "body": "If I delete the blocks, it triggers a reindex when I restart the app. Perhaps some of the (pruned) blocks were corrupted?\r\n\r\n<sup>Also, I have a backup of the chainstate from May 11. [I wish I could re-download only the blocks since then, not have to re-download the entire chain again.](https://bitcoin.stackexchange.com/q/123059/4334)</sup>",
      "user": {
        "login": "Geremia",
        "id": 4298614,
        "node_id": "MDQ6VXNlcjQyOTg2MTQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4298614?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Geremia",
        "html_url": "https://github.com/Geremia",
        "followers_url": "https://api.github.com/users/Geremia/followers",
        "following_url": "https://api.github.com/users/Geremia/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Geremia/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Geremia/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Geremia/subscriptions",
        "organizations_url": "https://api.github.com/users/Geremia/orgs",
        "repos_url": "https://api.github.com/users/Geremia/repos",
        "events_url": "https://api.github.com/users/Geremia/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Geremia/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2123313968",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2123345373,
      "node_id": "IC_kwDOABII585-j63d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2123345373",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-21T19:58:38Z",
      "updated_at": "2024-05-21T19:58:38Z",
      "author_association": "MEMBER",
      "body": "I guess we should save a \"reindex needed\" flag somewhere when LevelDB corruption causes the node to shutdown?\r\n\r\n> [I wish I could re-download only the blocks since then, not have to re-download the entire chain again.](https://bitcoin.stackexchange.com/q/123059/4334)\r\n\r\nLevelDB corruption means you have a bad chainstate. It's not really possible to rebuild it without a full reindex from genesis, short of us doing something like utreexo commitments (even without a softfork, we could set a flag in the block index db to indicate when the commitment is valid)",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2123345373",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "unlabeled",
      "id": 13316673461,
      "node_id": "UNLE_lADOABII586JUeK1zwAAAAMZvE-1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13316673461",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-27T12:31:29Z",
      "label": {
        "name": "Questions and Help",
        "color": "006688"
      }
    },
    {
      "event": "commented",
      "id": 2555984586,
      "node_id": "IC_kwDOABII586YWTrK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2555984586",
      "actor": {
        "login": "jstefanop",
        "id": 4368851,
        "node_id": "MDQ6VXNlcjQzNjg4NTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4368851?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jstefanop",
        "html_url": "https://github.com/jstefanop",
        "followers_url": "https://api.github.com/users/jstefanop/followers",
        "following_url": "https://api.github.com/users/jstefanop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jstefanop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jstefanop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jstefanop/subscriptions",
        "organizations_url": "https://api.github.com/users/jstefanop/orgs",
        "repos_url": "https://api.github.com/users/jstefanop/repos",
        "events_url": "https://api.github.com/users/jstefanop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jstefanop/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-20T00:04:01Z",
      "updated_at": "2024-12-20T00:04:01Z",
      "author_association": "NONE",
      "body": "> I guess we should save a \"reindex needed\" flag somewhere when LevelDB corruption causes the node to shutdown?\r\n> \r\n> > [I wish I could re-download only the blocks since then, not have to re-download the entire chain again.](https://bitcoin.stackexchange.com/q/123059/4334)\r\n> \r\n> LevelDB corruption means you have a bad chainstate. It's not really possible to rebuild it without a full reindex from genesis, short of us doing something like utreexo commitments (even without a softfork, we could set a flag in the block index db to indicate when the commitment is valid)\r\n\r\nThis should really be looked into, seeing this a lot more with our hardware now that blocks are full and re-indexing entire blockchain for a corrupt chainstate a few hundred blocks from tip is horrible UX. Should only require reindex from last good block db. \r\n\r\nThis should also be handled internally than require user intervention to recover. ",
      "user": {
        "login": "jstefanop",
        "id": 4368851,
        "node_id": "MDQ6VXNlcjQzNjg4NTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4368851?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jstefanop",
        "html_url": "https://github.com/jstefanop",
        "followers_url": "https://api.github.com/users/jstefanop/followers",
        "following_url": "https://api.github.com/users/jstefanop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jstefanop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jstefanop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jstefanop/subscriptions",
        "organizations_url": "https://api.github.com/users/jstefanop/orgs",
        "repos_url": "https://api.github.com/users/jstefanop/repos",
        "events_url": "https://api.github.com/users/jstefanop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jstefanop/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2555984586",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2727002702,
      "node_id": "IC_kwDOABII586iisJO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2727002702",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-15T21:13:57Z",
      "updated_at": "2025-03-15T21:13:57Z",
      "author_association": "MEMBER",
      "body": ">This should really be looked into, seeing this a lot more with our hardware now that blocks are full\n\nIf the chainstate is getting corrupt, that points to a hardware problem, and that is where it should be fixed.\n\n> re-indexing entire blockchain for a corrupt chainstate a few hundred blocks from tip is horrible UX.\n\nThe issue here is that it *isn't* reindexing.\n\n>Should only require reindex from last good block db.\n\nBitcoin Core does not store old block dbs. It has a single chainstate as of the latest block. If that's corrupt, there's nothing anyone can do but reindex from scratch.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2727002702",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2731062047,
      "node_id": "IC_kwDOABII586iyLMf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2731062047",
      "actor": {
        "login": "jstefanop",
        "id": 4368851,
        "node_id": "MDQ6VXNlcjQzNjg4NTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4368851?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jstefanop",
        "html_url": "https://github.com/jstefanop",
        "followers_url": "https://api.github.com/users/jstefanop/followers",
        "following_url": "https://api.github.com/users/jstefanop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jstefanop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jstefanop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jstefanop/subscriptions",
        "organizations_url": "https://api.github.com/users/jstefanop/orgs",
        "repos_url": "https://api.github.com/users/jstefanop/repos",
        "events_url": "https://api.github.com/users/jstefanop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jstefanop/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-17T22:18:54Z",
      "updated_at": "2025-03-17T22:18:54Z",
      "author_association": "NONE",
      "body": "> > This should really be looked into, seeing this a lot more with our hardware now that blocks are full\n> \n> If the chainstate is getting corrupt, that points to a hardware problem, and that is where it should be fixed.\n> \n> > re-indexing entire blockchain for a corrupt chainstate a few hundred blocks from tip is horrible UX.\n> \n> The issue here is that it _isn't_ reindexing.\n> \n> > Should only require reindex from last good block db.\n> \n> Bitcoin Core does not store old block dbs. It has a single chainstate as of the latest block. If that's corrupt, there's nothing anyone can do but reindex from scratch.\n\nWith current bitcoin block bloat and most low power SBCs taking a week to sync this has to be re-evaluated if we want low powered hardware to keep running bitcoin nodes in the future. \n\nHave to think about a good way to implement, but a single chain state corruption should not bring down the whole node after a week of syncing. Simple chainstate \"check\" every x blocks could be added and at least have the sync revert back last known good checkpoint instead of failing the node completely and needing to restart from scratch. ",
      "user": {
        "login": "jstefanop",
        "id": 4368851,
        "node_id": "MDQ6VXNlcjQzNjg4NTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4368851?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jstefanop",
        "html_url": "https://github.com/jstefanop",
        "followers_url": "https://api.github.com/users/jstefanop/followers",
        "following_url": "https://api.github.com/users/jstefanop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jstefanop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jstefanop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jstefanop/subscriptions",
        "organizations_url": "https://api.github.com/users/jstefanop/orgs",
        "repos_url": "https://api.github.com/users/jstefanop/repos",
        "events_url": "https://api.github.com/users/jstefanop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jstefanop/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2731062047",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2731075013,
      "node_id": "IC_kwDOABII586iyOXF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2731075013",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-17T22:23:49Z",
      "updated_at": "2025-03-17T22:23:49Z",
      "author_association": "MEMBER",
      "body": "If your hardware regularly corrupts the database, the system is just too unreliable, and there is little that can be done long term. Even with a regular snapshot feature, it might even corrupt while taking a snapshot.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2731075013",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2731123565,
      "node_id": "IC_kwDOABII586iyaNt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2731123565",
      "actor": {
        "login": "jstefanop",
        "id": 4368851,
        "node_id": "MDQ6VXNlcjQzNjg4NTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4368851?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jstefanop",
        "html_url": "https://github.com/jstefanop",
        "followers_url": "https://api.github.com/users/jstefanop/followers",
        "following_url": "https://api.github.com/users/jstefanop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jstefanop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jstefanop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jstefanop/subscriptions",
        "organizations_url": "https://api.github.com/users/jstefanop/orgs",
        "repos_url": "https://api.github.com/users/jstefanop/repos",
        "events_url": "https://api.github.com/users/jstefanop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jstefanop/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-17T22:47:55Z",
      "updated_at": "2025-03-17T22:47:55Z",
      "author_association": "NONE",
      "body": "> If your hardware regularly corrupts the database, the system is just too unreliable, and there is little that can be done long term. Even with a regular snapshot feature, it might even corrupt while taking a snapshot.\n\nAll non ECC hardware will corrupt eventually, so just a matter of where the line is drawn. We just see it more in real world because of the large number of nodes deployed on the network, and large timeframes for IBD (~ 1 week) (ie 2-4% of all nodes across thousands have a corruption failure during IBD). This will become more prominent even on higher end hardware as IBD times increase...\n\nThis error rate we see across our network is actually pretty close to typical expected non ECC RAM error rates for the RAM size our system uses and expected R/W to RAM over IBD...we just have a large enough pool to see this instead of the random people that come here and complain about corruption issues and is blamed on unreliable systems.\n\nNo one might care when IBD is 1-2 days on high end systems, but when it takes everyone a week to sync in not so distant future this will become a larger issue since the chainstate is now growing at a faster rate than typical system RAM increases.",
      "user": {
        "login": "jstefanop",
        "id": 4368851,
        "node_id": "MDQ6VXNlcjQzNjg4NTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4368851?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jstefanop",
        "html_url": "https://github.com/jstefanop",
        "followers_url": "https://api.github.com/users/jstefanop/followers",
        "following_url": "https://api.github.com/users/jstefanop/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jstefanop/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jstefanop/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jstefanop/subscriptions",
        "organizations_url": "https://api.github.com/users/jstefanop/orgs",
        "repos_url": "https://api.github.com/users/jstefanop/repos",
        "events_url": "https://api.github.com/users/jstefanop/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jstefanop/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2731123565",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    },
    {
      "event": "commented",
      "id": 2885200231,
      "node_id": "IC_kwDOABII586r-Kln",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2885200231",
      "actor": {
        "login": "Drew72-ita",
        "id": 165649613,
        "node_id": "U_kgDOCd-czQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/165649613?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Drew72-ita",
        "html_url": "https://github.com/Drew72-ita",
        "followers_url": "https://api.github.com/users/Drew72-ita/followers",
        "following_url": "https://api.github.com/users/Drew72-ita/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Drew72-ita/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Drew72-ita/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Drew72-ita/subscriptions",
        "organizations_url": "https://api.github.com/users/Drew72-ita/orgs",
        "repos_url": "https://api.github.com/users/Drew72-ita/repos",
        "events_url": "https://api.github.com/users/Drew72-ita/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Drew72-ita/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-15T22:35:48Z",
      "updated_at": "2025-05-16T08:57:45Z",
      "author_association": "NONE",
      "body": "I recently encountered this exact issue on a production Raspibolt node. Bitcoin Core was stuck in a restart loop due to a sudden corrupted txindex file (*.ldb) (cosmic ray XD?) . It wasn’t immediately obvious what was going on—the logs showed a LevelDB error, but there was no clear indication that I needed to delete the index manually or restart with -reindex.\n\nIt took me quite some time to understand that a manual cleanup was required. At the very least, the log message should clearly explain the nature of the problem and suggest a recovery path, such as running with -reindex or deleting the index directory.\n\nAutomatic reindexing may be controversial, but the current error handling feels too opaque for non-developers running full nodes.\n\nI can provide logs if it's useful, for my future memory this the first instance of core entering the restart loop:\n\n```\n2025-05-15T14:03:38Z Saw new header hash=000000000000000000009bf6d425669f87bf00aedecbccb1cead4c17ae8\naea44 height=896835\n2025-05-15T14:03:39Z UpdateTip: new best=000000000000000000009bf6d425669f87bf00aedecbccb1cead4c17ae8\naea44 height=896835 version=0x25f2a000 log2_work=95.609817 tx=1190624817 date='2025-05-15T14:03:07Z'\n progress=1.000000 cache=102.9MiB(851250txo)\n2025-05-15T14:03:39Z Fatal LevelDB error: Corruption: block checksum mismatch: /home/bitcoin/.bitcoi\nn/indexes/txindex/283881.ldb\n2025-05-15T14:03:39Z You can use -debug=leveldb to get more complete diagnostic messages\n2025-05-15T14:03:39Z \n\n----> restarts here <------\n\n2025-05-15T14:04:11Z Bitcoin Core version v27.2.0 (release build)\n...\n```\n\nEdit: I did not run with -debug=leveldb as suggested. That might have given me more information. My fault if this is the case.",
      "user": {
        "login": "Drew72-ita",
        "id": 165649613,
        "node_id": "U_kgDOCd-czQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/165649613?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Drew72-ita",
        "html_url": "https://github.com/Drew72-ita",
        "followers_url": "https://api.github.com/users/Drew72-ita/followers",
        "following_url": "https://api.github.com/users/Drew72-ita/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Drew72-ita/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Drew72-ita/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Drew72-ita/subscriptions",
        "organizations_url": "https://api.github.com/users/Drew72-ita/orgs",
        "repos_url": "https://api.github.com/users/Drew72-ita/repos",
        "events_url": "https://api.github.com/users/Drew72-ita/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Drew72-ita/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/30138#issuecomment-2885200231",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30138"
    }
  ]
}