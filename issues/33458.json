{
  "type": "issue",
  "issue": {
    "id": 3441918983,
    "node_id": "I_kwDOABII587NJ4QH",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33458",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33458/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33458/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33458/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33458",
    "number": 33458,
    "state": "open",
    "state_reason": null,
    "title": "Documentation trap when using -bind in conjunction with (automatically configured) Tor hidden services",
    "body": "To start with the conclusion: everything appears to work as _intended_, so this should probably not be considered a bug as such, but some logging and telemetry output could be improved to make things clearer.\n\nIf you use -bind to manually specify which (public) IPs to listen to, Bitcoin Core will also no longer create the (local) default socket for incoming Tor connections at 127.0.01:8334 unless you specify it manually in your list - this is probably working as intended. When automatically creating a Tor hidden service, it will instead be routed to the public IPv4 port, and incoming Tor connections still work just fine.\n\nHowever, without the dedicated Tor socket, Bitcoin Core is unable to distinguish between regular IPv4 connections and Tor connections, so all of the latter will be counted as the former.\n\nThe specific case that had me scratching my head for a bit: -netinfo reported zero incoming Tor connections\n\n```\n         ipv4    ipv6   onion   total   block\nin        291      28       0     319\nout         5       3       2      10       2\ntotal     296      31       2     329\n```\n\nwhile the true number of incoming Tor connections was 29.\n\n```\nss -tupan | grep tor | grep 8333 | wc -l\n29\n```\n\nAs expected, removing the -bind statements from the config and restarting fixed it.\n\n```\n         ipv4    ipv6   onion   total   block\nin         25       4       5      34\nout         4       1       5      10       2\ntotal      29       5      10      44\n```\n\nWhile the documentation for -bind hints towards why this is the case, Bitcoin Core gives no indication in the logs or the -netinfo output that the configuration is suboptimal, and I feel like maybe it should do that just to save people (like me) from getting confused.\n\nMaybe during startup, if no Tor socket is created and a Tor hidden service is created, it should add something like \"Warning: -bind was specified but lacks a dedicated Tor socket; incoming Tor connections will be counted as regular connections\", and when using -netinfo it should show a \"?\" or \"-\" instead of \"0\".",
    "user": {
      "login": "ArmchairCryptologist",
      "id": 73581993,
      "node_id": "MDQ6VXNlcjczNTgxOTkz",
      "avatar_url": "https://avatars.githubusercontent.com/u/73581993?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ArmchairCryptologist",
      "html_url": "https://github.com/ArmchairCryptologist",
      "followers_url": "https://api.github.com/users/ArmchairCryptologist/followers",
      "following_url": "https://api.github.com/users/ArmchairCryptologist/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ArmchairCryptologist/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ArmchairCryptologist/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ArmchairCryptologist/subscriptions",
      "organizations_url": "https://api.github.com/users/ArmchairCryptologist/orgs",
      "repos_url": "https://api.github.com/users/ArmchairCryptologist/repos",
      "events_url": "https://api.github.com/users/ArmchairCryptologist/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ArmchairCryptologist/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 148216,
        "node_id": "MDU6TGFiZWwxNDgyMTY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Docs",
        "name": "Docs",
        "color": "02d7e1",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 0,
    "created_at": "2025-09-22T17:08:17Z",
    "updated_at": "2025-09-25T15:41:11Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 19923412794,
      "node_id": "LE_lADOABII587NJ4QHzwAAAASjhyc6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19923412794",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-25T15:41:10Z",
      "label": {
        "name": "Docs",
        "color": "02d7e1"
      }
    }
  ]
}