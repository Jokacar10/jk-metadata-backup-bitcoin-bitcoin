{
  "type": "issue",
  "issue": {
    "id": 2947965588,
    "node_id": "I_kwDOABII586vtmKU",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32142",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32142/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32142/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32142/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/32142",
    "number": 32142,
    "state": "open",
    "state_reason": null,
    "title": "Feature Request: testmempoolaccept with an argument to ignore nLocktime/nSequence time-locking",
    "body": "### Please describe the feature you'd like to see added.\n\nExecute `testmempoolaccept` in a way that will ignore the time/block-height validations of the transactions' `nSequence` and `nLocktime`.\n\n### Is your feature related to a problem, if so please describe it.\n\n`testmempoolaccept` is a very useful tool to verify transactions that aren't supposed to be broadcasted immediately - for example, for emergency recovery in case the seed is lost.\n`nLocktime` is also useful in such case, to prevent the recovery transaction from being broadcasted too early. However, after signing a transaction with a future `nLocktime`, I couldn't be sure that it is indeed valid: `testmempoolaccept` considers this transaction as `non-final` because of its future `nLocktime`, without explaining whether it has other problems (i.e. invalid signatures etc.).\n\n### Describe the solution you'd like\n\nA third optional parameter to `testmempoolaccept` (after `rawtxs` and `maxfeerate`) called `ignoretimelocks`, that will be a boolean.\n\n### Describe any alternatives you've considered\n\nI've tried writing code that would parse the transaction and, given the current mempool utxos, verify its scripts. This becomes complicated to implement in multisig and segwit transactions, and doesn't give me the guarantees that I want for such long-term transaction.\n\nAnother suggestion is that `testmempoolaccept` will accumulate all the reasons a transaction is unacceptable, and not exit after the first reason.\n\n### Please leave any additional context\n\n`nSequence` is a bitfield with multiple purposes, like RBF, and possibly other features in the future. My suggestion only regards BIP-68 validations of `nSequence` and not other features.",
    "user": {
      "login": "oren-z0",
      "id": 115847146,
      "node_id": "U_kgDOBuev6g",
      "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/oren-z0",
      "html_url": "https://github.com/oren-z0",
      "followers_url": "https://api.github.com/users/oren-z0/followers",
      "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
      "organizations_url": "https://api.github.com/users/oren-z0/orgs",
      "repos_url": "https://api.github.com/users/oren-z0/repos",
      "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/oren-z0/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      },
      {
        "id": 98279177,
        "node_id": "MDU6TGFiZWw5ODI3OTE3Nw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/RPC/REST/ZMQ",
        "name": "RPC/REST/ZMQ",
        "color": "0052cc",
        "default": false
      },
      {
        "id": 164208572,
        "node_id": "MDU6TGFiZWwxNjQyMDg1NzI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mempool",
        "name": "Mempool",
        "color": "fef2c0",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 2,
    "created_at": "2025-03-25T23:07:46Z",
    "updated_at": "2025-03-27T10:15:35Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 16983072999,
      "node_id": "LE_lADOABII586vtmKUzwAAAAP0RSDn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16983072999",
      "actor": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-25T23:07:46Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "labeled",
      "id": 16988518379,
      "node_id": "LE_lADOABII586vtmKUzwAAAAP0mDfr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16988518379",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T09:06:58Z",
      "label": {
        "name": "RPC/REST/ZMQ",
        "color": "0052cc"
      }
    },
    {
      "event": "labeled",
      "id": 16988519969,
      "node_id": "LE_lADOABII586vtmKUzwAAAAP0mD4h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16988519969",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T09:07:02Z",
      "label": {
        "name": "Mempool",
        "color": "fef2c0"
      }
    },
    {
      "event": "subscribed",
      "id": 16994425006,
      "node_id": "SE_lADOABII586vtmKUzwAAAAP08liu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16994425006",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T14:44:53Z"
    },
    {
      "event": "commented",
      "id": 2755623574,
      "node_id": "IC_kwDOABII586kP3qW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2755623574",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-26T20:02:13Z",
      "updated_at": "2025-03-26T20:02:13Z",
      "author_association": "MEMBER",
      "body": "Have you seen the discussion about this at https://github.com/bitcoin/bitcoin/pull/25434?",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32142#issuecomment-2755623574",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32142"
    },
    {
      "event": "commented",
      "id": 2757493641,
      "node_id": "IC_kwDOABII586kXAOJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2757493641",
      "actor": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T10:15:34Z",
      "updated_at": "2025-03-27T10:15:34Z",
      "author_association": "NONE",
      "body": "Thanks @darosior , no I did not see that discussion before (only searched for related issues, not related PRs).\nIn the other discussion, the main use case for the feature  is to simplify the development of L2 layers - which use scripts with pre-known structure.\nIn my use case, I'm building a service that could broadcast future recovery-transactions uploaded by customers, and I want to verify in advance that these transactions could indeed be broadcasted when the time comes (unless, of course, the customer has spent the UTXOs after uploading the recovery-transactions). In this case the transaction could theoretically use any script that the customer wants.\n\nI understand the worry that the code of `testmempoolaccept` will diverge from the code of `sendrawtransaction` and some bug will cause an invalid transaction to appear as accepted by `testmempoolaccept`. A more generic alternative could be that `testmempoolaccept` will collect all the reasons a transaction appears to be invalid, without breaking on the first reason (unless this is a very basic failure like invalid transaction structure, that make the other verifications irrelevant).\n\nTherefore I would like to keep this issue open for debate.",
      "user": {
        "login": "oren-z0",
        "id": 115847146,
        "node_id": "U_kgDOBuev6g",
        "avatar_url": "https://avatars.githubusercontent.com/u/115847146?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/oren-z0",
        "html_url": "https://github.com/oren-z0",
        "followers_url": "https://api.github.com/users/oren-z0/followers",
        "following_url": "https://api.github.com/users/oren-z0/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/oren-z0/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/oren-z0/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/oren-z0/subscriptions",
        "organizations_url": "https://api.github.com/users/oren-z0/orgs",
        "repos_url": "https://api.github.com/users/oren-z0/repos",
        "events_url": "https://api.github.com/users/oren-z0/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/oren-z0/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32142#issuecomment-2757493641",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32142"
    },
    {
      "event": "mentioned",
      "id": 17009928649,
      "node_id": "MEE_lADOABII586vtmKUzwAAAAP13unJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17009928649",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T10:15:35Z"
    },
    {
      "event": "subscribed",
      "id": 17009928666,
      "node_id": "SE_lADOABII586vtmKUzwAAAAP13una",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17009928666",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T10:15:35Z"
    }
  ]
}