{
  "type": "issue",
  "issue": {
    "id": 3313221631,
    "node_id": "I_kwDOABII587Fe7__",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/33176",
    "number": 33176,
    "state": "open",
    "state_reason": null,
    "title": "build: indefinite mpgen hang on Ubuntu 22.04",
    "body": "Noticed this while looking at #31802, but the same happens on master (273e600e65c2e31a6e9a0bd72b40672aaa503b08).\n\n```bash\n# podman run -it ubuntu:22.04 /bin/bash\n\napt update && apt upgrade -y && apt install build-essential cmake pkgconf python3 git libevent-dev libboost-dev libsqlite3-dev libcapnp-dev capnproto -y\n\ngit clone https://github.com/bitcoin/bitcoin\n\ncd bitcoin\ncmake -B build -DENABLE_IPC=ON\ncmake --build build \n```\nThe build never completes. It hangs indefinitely doing capnp generation:\n```bash\ncmake --build build -j10\n[  1%] Built target crc32c\n[  1%] Generating bitcoin-build-info.h\n[  1%] Built target secp256k1_precomputed\n[  1%] Built target mputil\n[  2%] Built target univalue\n[  4%] Built target bitcoin_consensus\n[  7%] Built target bitcoin_crypto\n[ 10%] Built target minisketch\n[ 10%] Built target bitcoin_cli\n[ 10%] Built target exhaustive_tests\n[ 16%] Built target leveldb\n[ 26%] Built target unitester\n[ 26%] Built target mpgen\n[ 26%] Built target object\n[ 27%] Built target multiprocess\n[ 28%] Built target secp256k1\n[ 28%] Built target noverify_tests\n[ 28%] Generating capnp/mining.capnp.c++, capnp/mining.capnp.h, capnp/mining.capnp.proxy-client.c++, capnp/mining.capnp.proxy-types.h, capnp/mining.capnp.proxy-server.c++, capnp/mining.capnp.proxy-types.c++, capnp/mining.capnp.proxy.h\n[ 28%] Generating capnp/init.capnp.c++, capnp/init.capnp.h, capnp/init.capnp.proxy-client.c++, capnp/init.capnp.proxy-types.h, capnp/init.capnp.proxy-server.c++, capnp/init.capnp.proxy-types.c++, capnp/init.capnp.proxy.h\n[ 28%] Generating capnp/echo.capnp.c++, capnp/echo.capnp.h, capnp/echo.capnp.proxy-client.c++, capnp/echo.capnp.proxy-types.h, capnp/echo.capnp.proxy-server.c++, capnp/echo.capnp.proxy-types.c++, capnp/echo.capnp.proxy.h\n[ 28%] Generating capnp/common.capnp.c++, capnp/common.capnp.h, capnp/common.capnp.proxy-client.c++, capnp/common.capnp.proxy-types.h, capnp/common.capnp.proxy-server.c++, capnp/common.capnp.proxy-types.c++, capnp/common.capnp.proxy.h\n[ 28%] Generating mp/test/foo.capnp.c++, mp/test/foo.capnp.h, mp/test/foo.capnp.proxy-client.c++, mp/test/foo.capnp.proxy-types.h, mp/test/foo.capnp.proxy-server.c++, mp/test/foo.capnp.proxy-types.c++, mp/test/foo.capnp.proxy.h\n[ 28%] Built target tests\n[ 28%] Generating capnp/echo.capnp.c++, capnp/echo.capnp.h, capnp/echo.capnp.proxy-client.c++, capnp/echo.capnp.proxy-types.h, capnp/echo.capnp.proxy-server.c++, capnp/echo.capnp.proxy-types.c++, capnp/echo.capnp.proxy.h\n[ 28%] Generating capnp/common.capnp.c++, capnp/common.capnp.h, capnp/common.capnp.proxy-client.c++, capnp/common.capnp.proxy-types.h, capnp/common.capnp.proxy-server.c++, capnp/common.capnp.proxy-types.c++, capnp/common.capnp.proxy.h\n[ 32%] Built target test_util\n[ 32%] Generating capnp/init.capnp.c++, capnp/init.capnp.h, capnp/init.capnp.proxy-client.c++, capnp/init.capnp.proxy-types.h, capnp/init.capnp.proxy-server.c++, capnp/init.capnp.proxy-types.c++, capnp/init.capnp.proxy.h\n[ 32%] Generating capnp/mining.capnp.c++, capnp/mining.capnp.h, capnp/mining.capnp.proxy-client.c++, capnp/mining.capnp.proxy-types.h, capnp/mining.capnp.proxy-server.c++, capnp/mining.capnp.proxy-types.c++, capnp/mining.capnp.proxy.h\n[ 32%] Built target generate_build_info\n[ 37%] Built target bitcoin_wallet\n[ 37%] Built target bitcoin_clientversion\n[ 46%] Built target bitcoin_common\n[ 52%] Built target bitcoin_util\n[ 67%] Built target bitcoin_node\n[ 67%] Built target bitcoin-cli\n[ 67%] Built target bitcoin-tx\n[ 67%] Built target bitcoin-util\n[ 68%] Built target bitcoin-wallet\n[ 68%] Built target bitcoin\n[ 68%] Built target bitcoind\n```",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 10,
    "created_at": "2025-08-12T08:52:12Z",
    "updated_at": "2025-08-13T09:13:56Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 19106928071,
      "node_id": "LE_lADOABII587Fe7__zwAAAARy3JXH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19106928071",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T08:52:13Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 3178692456,
      "node_id": "IC_kwDOABII5869dv9o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3178692456",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T10:11:50Z",
      "updated_at": "2025-08-12T10:11:50Z",
      "author_association": "MEMBER",
      "body": "I also see the sameinfinite hang:\n\n```log\n[ 33%] Generating mp/test/foo.capnp.c++, mp/test/foo.capnp.h, mp/test/foo.capnp.proxy-client.c++, mp/test/foo.capnp.proxy-types.h, mp/test/foo.capnp.proxy-server.c++, mp/test/foo.capnp.proxy-types.c++, mp/test/foo.capnp.proxy.h\n[ 33%] Generating capnp/mining.capnp.c++, capnp/mining.capnp.h, capnp/mining.capnp.proxy-client.c++, capnp/mining.capnp.proxy-types.h, capnp/mining.capnp.proxy-server.c++, capnp/mining.capnp.proxy-types.c++, capnp/mining.capnp.proxy.h\n[ 33%] Generating capnp/echo.capnp.c++, capnp/echo.capnp.h, capnp/echo.capnp.proxy-client.c++, capnp/echo.capnp.proxy-types.h, capnp/echo.capnp.proxy-server.c++, capnp/echo.capnp.proxy-types.c++, capnp/echo.capnp.proxy.h\n[ 33%] Generating capnp/common.capnp.c++, capnp/common.capnp.h, capnp/common.capnp.proxy-client.c++, capnp/common.capnp.proxy-types.h, capnp/common.capnp.proxy-server.c++, capnp/common.capnp.proxy-types.c++, capnp/common.capnp.proxy.h\n[ 33%] Generating capnp/init.capnp.c++, capnp/init.capnp.h, capnp/init.capnp.proxy-client.c++, capnp/init.capnp.proxy-types.h, capnp/init.capnp.proxy-server.c++, capnp/init.capnp.proxy-types.c++, capnp/init.capnp.proxy.h\n[ 33%] Generating capnp/mining.capnp.c++, capnp/mining.capnp.h, capnp/mining.capnp.proxy-client.c++, capnp/mining.capnp.proxy-types.h, capnp/mining.capnp.proxy-server.c++, capnp/mining.capnp.proxy-types.c++, capnp/mining.capnp.proxy.h\n[ 33%] Built target generate_build_info\nConsolidate compiler generated dependencies of target bitcoin_clientversion\nConsolidate compiler generated dependencies of target bitcoin_util\n[ 33%] Built target bitcoin_clientversion\nConsolidate compiler generated dependencies of target bitcoin_common\nConsolidate compiler generated dependencies of target bitcoin_wallet\n[ 38%] Built target bitcoin_util\nConsolidate compiler generated dependencies of target bitcoin_node\nConsolidate compiler generated dependencies of target bitcoin\n[ 38%] Built target bitcoin\n[ 47%] Built target bitcoin_common\n[ 47%] Building CXX object src/CMakeFiles/bitcoin-cli.dir/bitcoin-cli.cpp.o\n[ 47%] Building CXX object src/CMakeFiles/bitcoin-util.dir/bitcoin-util.cpp.o\n[ 47%] Building CXX object src/CMakeFiles/bitcoin-tx.dir/bitcoin-tx.cpp.o\n[ 52%] Built target bitcoin_wallet\n[ 52%] Building CXX object src/CMakeFiles/bitcoin-wallet.dir/bitcoin-wallet.cpp.o\n[ 67%] Built target bitcoin_node\n[ 67%] Building CXX object src/CMakeFiles/bitcoin-wallet.dir/init/bitcoin-wallet.cpp.o\n[ 67%] Linking CXX executable ../bin/bitcoin-util\n[ 67%] Building CXX object src/CMakeFiles/bitcoind.dir/bitcoind.cpp.o\n[ 67%] Built target bitcoin-util\n[ 68%] Building CXX object src/CMakeFiles/bitcoin-wallet.dir/wallet/wallettool.cpp.o\n[ 70%] Building CXX object src/CMakeFiles/bitcoind.dir/init/bitcoind.cpp.o\n[ 70%] Linking CXX executable ../bin/bitcoin-cli\n[ 70%] Linking CXX executable ../bin/bitcoin-tx\n[ 70%] Built target bitcoin-cli\n[ 70%] Linking CXX executable ../bin/bitcoind\n[ 70%] Built target bitcoin-tx\n[ 70%] Linking CXX executable ../bin/bitcoin-wallet\n[ 70%] Built target bitcoind\n[ 70%] Built target bitcoin-wallet\n^Cgmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc.dir/build.make:96: src/ipc/capnp/echo.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc_headers.dir/build.make:98: src/ipc/capnp/echo.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc_headers.dir/build.make:120: src/ipc/capnp/init.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc.dir/build.make:74: src/ipc/capnp/common.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc_headers.dir/build.make:76: src/ipc/capnp/common.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc.dir/build.make:140: src/ipc/capnp/mining.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc_headers.dir/build.make:142: src/ipc/capnp/mining.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/libmultiprocess/test/CMakeFiles/mptest.dir/build.make:74: src/ipc/libmultiprocess/test/mp/test/foo.capnp.c++] Interrupt\ngmake[2]: *** [src/ipc/CMakeFiles/bitcoin_ipc.dir/build.make:118: src/ipc/capnp/init.capnp.c++] Interrupt\ngmake[1]: *** [CMakeFiles/Makefile2:1502: src/ipc/libmultiprocess/test/CMakeFiles/mptest.dir/all] Interrupt\ngmake[1]: *** [CMakeFiles/Makefile2:1737: src/ipc/CMakeFiles/bitcoin_ipc.dir/all] Interrupt\ngmake[1]: *** [CMakeFiles/Makefile2:1764: src/ipc/CMakeFiles/bitcoin_ipc_headers.dir/all] Interrupt\ngmake: *** [Makefile:146: all] Interrupt\n```",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3178692456",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3179493430,
      "node_id": "IC_kwDOABII5869gzg2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3179493430",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T14:04:42Z",
      "updated_at": "2025-08-12T14:04:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks, instructions make this very easy to reproduce. Error is strange. If I attach with gdb it shows program is hung in a self-loop instruction:\n\n```\n=> 0x0000563e5f583f7f <+1103>:\tjmp    0x563e5f583f7f <main(int, char**)+1103>\n```\n\nSome more context is:\n\n```\n   0x0000563e5f583f6b <+1083>:\tcall   0x563e5f584450 <_ZN2kj3OwnIKNS_17ReadableDirectoryEE7disposeEv>\n   0x0000563e5f583f70 <+1088>:\tadd    $0x8,%r13\n   0x0000563e5f583f74 <+1092>:\tcmp    %r13,0x8(%rsp)\n   0x0000563e5f583f79 <+1097>:\tjne    0x563e5f583e6d <main(int, char**)+829>\n=> 0x0000563e5f583f7f <+1103>:\tjmp    0x563e5f583f7f <main(int, char**)+1103>\n   0x0000563e5f583f81 <+1105>:\tnopl   0x0(%rax)\n   0x0000563e5f583f88 <+1112>:\tlea    0x70(%rsp),%r15\n   0x0000563e5f583f8d <+1117>:\tlea    0xd0(%rsp),%rdi\n   0x0000563e5f583f95 <+1125>:\tmov    %r15,%rdx\n   0x0000563e5f583f98 <+1128>:\tcall   0x563e5f584690 <_ZNSt6vectorIN2kj3OwnIKNS0_17ReadableDirectoryEEESaIS4_EE17_M_realloc_insertIJS4_EEEvN9__gnu_cxx17__normal_iteratorIPS4_S6_EEDpOT_>\n```\n\nGDB says corresponding source code is\n\n```\n(gdb) info line *$pc\nLine 669 of \"./ipc/libmultiprocess/src/mp/gen.cpp\" starts at address 0x563e5f583f74 <main(int, char**)+1092> and ends at 0x563e5f583f88 <main(int, char**)+1112>.\n(gdb) info line *$pc\nLine 669 of \"./ipc/libmultiprocess/src/mp/gen.cpp\" starts at address 0x563e5f583f74 <main(int, char**)+1092> and ends at 0x563e5f583f88 <main(int, char**)+1112>.\n(gdb) list\n664\t            import_dirs.emplace_back(kj::mv(*dir));\n665\t        } else {\n666\t            throw std::runtime_error(std::string(\"Failed to open import directory: \") + argv[i]);\n667\t        }\n668\t    }\n669\t    for (const char* path : {CMAKE_INSTALL_PREFIX \"/include\", capnp_PREFIX \"/include\"}) {\n670\t        KJ_IF_MAYBE(dir, fs->getRoot().tryOpenSubdir(cwd.evalNative(path))) {\n671\t            import_paths.emplace_back(path);\n672\t            import_dirs.emplace_back(kj::mv(*dir));\n673\t        }\n```\n\nBut I'm not sure I trust assembly to source mapping because if I add std::cerr prints, program seems to be hanging at a later point (`   146      if (src_prefix == \".\") {` in `Generate()`\n\nThis is very confusing and I'm not sure what is causing it. I haven't encountered a jmp instruction just looping to itself before but I guess a compiler might output one as a trap for unreachable code or something like that. Looking at the code, I don't think I can identify any bugs, so I wonder if cause might be that program is being compiled with bad flags or something like that. Will look into this more.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3179493430",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3179669613,
      "node_id": "IC_kwDOABII5869heht",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3179669613",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T14:46:17Z",
      "updated_at": "2025-08-12T14:50:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "Found the problem, and a workaround below. The bug is kind of crazy. Ubuntu 22.04 installs capnproto 0.8.0 which defines\n\n```c++\ninline bool operator==(const char* a, const StringPtr& b) { return b == a; }\n```\n\nWhich seems to call itself recursively when compiled with c++20. This doesn't happen with newer versions of capnproto because they include a change https://github.com/capnproto/capnproto/pull/1170 https://github.com/capnproto/capnproto/pull/1235/commits/4db91df614be91db82833ec1b7cef18ef97711cb dropping it when a newer c++ version is used.\n\nFollowing change seems to successfully work around the problem though need to test more.\n\n<details><summary>diff</summary>\n<p>\n\n```diff\n--- a/src/ipc/libmultiprocess/src/mp/gen.cpp\n+++ b/src/ipc/libmultiprocess/src/mp/gen.cpp\n@@ -143,7 +143,7 @@ static void Generate(kj::StringPtr src_prefix,\n     const std::vector<kj::Own<const kj::ReadableDirectory>>& import_dirs)\n {\n     std::string output_path;\n-    if (src_prefix == \".\") {\n+    if (src_prefix == kj::StringPtr{\".\"}) {\n         output_path = src_file;\n     } else if (!src_file.startsWith(src_prefix) || src_file.size() <= src_prefix.size() ||\n                src_file[src_prefix.size()] != '/') {\n@@ -153,7 +153,7 @@ static void Generate(kj::StringPtr src_prefix,\n     }\n \n     std::string include_path;\n-    if (include_prefix == \".\") {\n+    if (include_prefix == kj::StringPtr{\".\"}) {\n         include_path = src_file;\n     } else if (!src_file.startsWith(include_prefix) || src_file.size() <= include_prefix.size() ||\n                src_file[include_prefix.size()] != '/') {\n@@ -394,8 +394,8 @@ static void Generate(kj::StringPtr src_prefix,\n \n                 const std::string method_prefix = Format() << message_namespace << \"::\" << method_interface.getShortDisplayName()\n                                                            << \"::\" << Cap(method_name);\n-                const bool is_construct = method_name == \"construct\";\n-                const bool is_destroy = method_name == \"destroy\";\n+                const bool is_construct = method_name == kj::StringPtr{\"construct\"};\n+                const bool is_destroy = method_name == kj::StringPtr{\"destroy\"};\n \n                 struct Field\n                 {\n@@ -434,7 +434,7 @@ static void Generate(kj::StringPtr src_prefix,\n                         field.result_is_set = true;\n                     }\n \n-                    if (!param && field_name == \"result\") {\n+                    if (!param && field_name == kj::StringPtr{\"result\"}) {\n                         field.retval = true;\n                         has_result = true;\n                     }\n```\n</p>\n</details>",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3179669613",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3180162395,
      "node_id": "IC_kwDOABII5869jW1b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3180162395",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T16:37:42Z",
      "updated_at": "2025-08-12T16:37:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "IPC functionality seems to work fine on ubuntu 22.04 apart from this bug, so I guess I will create a PR with the workaround from https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3179669613.\n\nI posted a comment about this upstream https://github.com/capnproto/capnproto/pull/1170#discussion_r2270385770.\n\nThis issue does not occur with Cap'n Proto 0.9.0 and later due to the changes in that PR which added c++20 support. In theory a fix could be backported, but ubuntu 22.04 is still using 0.8.0, not even 0.8.1 which fixes a [CVE](https://github.com/capnproto/capnproto/security/advisories/GHSA-qqff-4vw4-f6hx), so it seems best not to rely on ubuntu packaging.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3180162395",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3180365932,
      "node_id": "IC_kwDOABII5869kIhs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3180365932",
      "actor": {
        "login": "1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "id": 219042429,
        "node_id": "U_kgDODQ5SfQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/219042429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "html_url": "https://github.com/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "followers_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/followers",
        "following_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/subscriptions",
        "organizations_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/orgs",
        "repos_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/repos",
        "events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T17:41:16Z",
      "updated_at": "2025-08-12T17:41:16Z",
      "author_association": "NONE",
      "body": "@ryanofsky \n> This issue does not occur with Cap'n Proto 0.9.0 and later\n\nI oppose merging any workaround for this issue since:\n\n- The root cause has been resolved upstream (no need for Bitcoin-specific fixes)\n- We should instead implement a targeted warning advising users to upgrade their Ubuntu distribution\n\nAny additional workaround would:\n- Unnecessarily complicate the codebase\n- Provide no benefit for modern Ubuntu versions\n- Introduce maintenance burden without solving core issues\n\nLet's keep Bitcoin Core clean by only merging changes that:\n- Address actual problems (not upstream-fixed issues)\n- Provide clear benefits across environments\n- Avoid version-specific pollution\n",
      "user": {
        "login": "1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "id": 219042429,
        "node_id": "U_kgDODQ5SfQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/219042429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "html_url": "https://github.com/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "followers_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/followers",
        "following_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/subscriptions",
        "organizations_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/orgs",
        "repos_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/repos",
        "events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3180365932",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "mentioned",
      "id": 19118341652,
      "node_id": "MEE_lADOABII587Fe7__zwAAAARzir4U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19118341652",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T17:41:17Z"
    },
    {
      "event": "subscribed",
      "id": 19118341673,
      "node_id": "SE_lADOABII587Fe7__zwAAAARzir4p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19118341673",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T17:41:17Z"
    },
    {
      "event": "commented",
      "id": 3180492773,
      "node_id": "IC_kwDOABII5869knfl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3180492773",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T18:22:17Z",
      "updated_at": "2025-08-12T18:22:17Z",
      "author_association": "MEMBER",
      "body": "I'm not sure if we should bother with a workaround for a version that also has a CVE. The compiler failure might be a \"feature\" here.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3180492773",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3180958652,
      "node_id": "IC_kwDOABII5869mZO8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3180958652",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T20:40:45Z",
      "updated_at": "2025-08-12T20:40:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "I guess it seems ok to drop support for old versions, but this also seems like an easy problem to fix so I went ahead and implemented a fix in https://github.com/bitcoin-core/libmultiprocess/pull/194 along with a CI job that tests for compatibility.\n\n> I'm not sure if we should bother with a workaround for a version that also has a CVE. The compiler failure might be a \"feature\" here.\n\nTo be sure, the fact that the stable ubuntu package might have a CVE is eyebrow raising, but I'm not it actually does. I don't know very much about ubuntu and debian packaging and I just looked at the tarballs and patches at the bottom of https://packages.ubuntu.com/source/jammy/capnproto and noticed they seemed to be using an unpatched 0.8.0. The fix in https://github.com/bitcoin-core/libmultiprocess/pull/194 also lets mpgen work with 0.8.1 and 0.7.1 and is not specifically targeted at 0.8.0.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3180958652",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3181024612,
      "node_id": "IC_kwDOABII5869mpVk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3181024612",
      "actor": {
        "login": "1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "id": 219042429,
        "node_id": "U_kgDODQ5SfQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/219042429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "html_url": "https://github.com/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "followers_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/followers",
        "following_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/subscriptions",
        "organizations_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/orgs",
        "repos_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/repos",
        "events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T21:05:56Z",
      "updated_at": "2025-08-12T21:12:57Z",
      "author_association": "NONE",
      "body": "@ryanofsky,\n\nRegarding the Cap'n Proto dependency, the correct source link is:  \nhttps://launchpad.net/ubuntu/+source/capnproto\n\nAfter reviewing PR #194 (https://github.com/bitcoin-core/libmultiprocess/pull/194), I have some concerns:\n\n1. **Maintenance Policy**:  \n   We generally shouldn't maintain patches for older OS versions unless there's a compelling security reason. Supporting outdated systems creates long-term maintenance burden.\n\n2. **Code Origin**:  \n   Some changes appear to be copied directly from upstream.\n\n3. **Better Alternatives**:  \n   Users running older systems should either:\n   - Upgrade their OS to supported versions\n   - Build dependencies from source\n\n**Or, download and install binaries directly from https://launchpad.net/ubuntu/+source/capnproto:**\n\n<img width=\"1920\" height=\"1285\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/622e0e73-6c27-4754-bf1b-06c25e6570e7\" />",
      "user": {
        "login": "1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "id": 219042429,
        "node_id": "U_kgDODQ5SfQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/219042429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "html_url": "https://github.com/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "followers_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/followers",
        "following_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/subscriptions",
        "organizations_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/orgs",
        "repos_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/repos",
        "events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3181024612",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "mentioned",
      "id": 19122584886,
      "node_id": "MEE_lADOABII587Fe7__zwAAAARzy302",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19122584886",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T21:05:58Z"
    },
    {
      "event": "subscribed",
      "id": 19122584904,
      "node_id": "SE_lADOABII587Fe7__zwAAAARzy31I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19122584904",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T21:05:58Z"
    },
    {
      "event": "commented",
      "id": 3181175720,
      "node_id": "IC_kwDOABII5869nOOo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3181175720",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T22:06:07Z",
      "updated_at": "2025-08-12T22:06:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Regarding the Cap'n Proto dependency, the correct source link is: https://launchpad.net/ubuntu/+source/capnproto\n\nThanks! If I follow that link to https://launchpad.net/ubuntu/+source/capnproto/0.8.0-2ubuntu2 I see same tarballs that I checked previously at https://packages.ubuntu.com/source/jammy/capnproto, so this may be additional confirmation.\n\nRe your concerns:\n\n>     1. **Maintenance Policy**:\n\nTo be sure https://github.com/bitcoin-core/libmultiprocess/pull/194 isn't adding a patch that needs to be maintained, it's just comparing strings in a different way that's more verbose but more backwards compatible. I don't think the changes there will create a maintenance burden. I actually think to the contrary, the CI improvements there will help with long term maintenance, by making it easier to swap capnproto versions for testing and by catching any changes that are unintentionally backwards compatible.\n\n>     2. **Code Origin**:\n>        Some changes appear to be copied directly from upstream.\n\nI don't think this is true, but I'd welcome you to review the PR and point out any problems there that I might be missing.\n\n>     3. **Better Alternatives**:\n\nI do agree updating the OS or building cap'nproto from source could be good alternatives if anyone runs across this bug. Setting -DENABLE_IPC=off could be another good alternative in many cases. I still think fixing the bug has merits though so would welcome review in the PR.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3181175720",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "commented",
      "id": 3182898885,
      "node_id": "IC_kwDOABII5869ty7F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3182898885",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-13T09:13:56Z",
      "updated_at": "2025-08-13T09:13:56Z",
      "author_association": "MEMBER",
      "body": "> The fix in https://github.com/bitcoin-core/libmultiprocess/pull/194 also lets mpgen work with 0.8.1 and 0.7.1 and is not specifically targeted at 0.8.0.\n\nOk, that seems a good enough reason, because we might want to support those versions (even if not immediately).\n\n@1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw wrote:\n\n> We generally shouldn't maintain patches for older OS versions unless there's a compelling security reason.\n\nBitcoin Core generally supports fairly old OS versions. There's pros and cons to that (and it's certainly a pain), but that's a more general discussion.\n\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/33176#issuecomment-3182898885",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33176"
    },
    {
      "event": "mentioned",
      "id": 19132196321,
      "node_id": "MEE_lADOABII587Fe7__zwAAAAR0XiXh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19132196321",
      "actor": {
        "login": "1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "id": 219042429,
        "node_id": "U_kgDODQ5SfQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/219042429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "html_url": "https://github.com/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "followers_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/followers",
        "following_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/subscriptions",
        "organizations_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/orgs",
        "repos_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/repos",
        "events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-13T09:13:57Z"
    },
    {
      "event": "subscribed",
      "id": 19132196343,
      "node_id": "SE_lADOABII587Fe7__zwAAAAR0XiX3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19132196343",
      "actor": {
        "login": "1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "id": 219042429,
        "node_id": "U_kgDODQ5SfQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/219042429?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "html_url": "https://github.com/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw",
        "followers_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/followers",
        "following_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/subscriptions",
        "organizations_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/orgs",
        "repos_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/repos",
        "events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1BitcoinBoWP1FZ4xwTNkq6XksKidmgYYw/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-13T09:13:57Z"
    }
  ]
}