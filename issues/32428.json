{
  "type": "issue",
  "issue": {
    "id": 3043229696,
    "node_id": "I_kwDOABII5861ZAAA",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/32428",
    "number": 32428,
    "state": "open",
    "state_reason": null,
    "title": "Depends toolchain doesn't contain enough info to build from depends on a fresh NixOS install",
    "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\nOn a fresh NixOS install when building using depends, the generated toolchain does not pass along enough info for the depends packages to be found by `cmake`:\n\n- Following the reproduction steps below will cause `cmake -B build --toolchain <toolchain>` to error with:\n\n```log\n-- The CXX compiler identification is Clang 19.1.3\n-- Detecting CXX compiler ABI info\n-- Detecting CXX compiler ABI info - done\n-- Check for working CXX compiler: /nix/store/l4bagvaywzkq3cbjd98rjkqwc0vkpxxw-clang-wrapper-19.1.3/bin/clang++ - skipped\n-- Detecting CXX compile features\n-- Detecting CXX compile features - done\n-- Setting build type to \"RelWithDebInfo\" as none was specified\n-- Performing Test CXX_SUPPORTS__WERROR\n-- Performing Test CXX_SUPPORTS__WERROR - Success\n-- Performing Test CXX_SUPPORTS__G3\n-- Performing Test CXX_SUPPORTS__G3 - Success\n-- Performing Test LINKER_SUPPORTS__G3\n-- Performing Test LINKER_SUPPORTS__G3 - Success\n-- Performing Test CXX_SUPPORTS__FTRAPV\n-- Performing Test CXX_SUPPORTS__FTRAPV - Success\n-- Performing Test LINKER_SUPPORTS__FTRAPV\n-- Performing Test LINKER_SUPPORTS__FTRAPV - Success\nCMake Error at /nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/share/cmake-3.30/Modules/FindPackageHandleStandardArgs.cmake:233 (message):\n  Could NOT find SQLite3 (missing: SQLite3_INCLUDE_DIR SQLite3_LIBRARY)\n  (Required is at least version \"3.7.17\")\nCall Stack (most recent call first):\n  /nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/share/cmake-3.30/Modules/FindPackageHandleStandardArgs.cmake:603 (_FPHSA_FAILURE_MESSAGE)\n  /nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/share/cmake-3.30/Modules/FindSQLite3.cmake:66 (find_package_handle_standard_args)\n  CMakeLists.txt:110 (find_package)\n\n\n-- Configuring incomplete, errors occurred!\n```\n\nI have started some basic investigation of this and found that with [this patch](https://github.com/bitcoin/bitcoin/commit/437a4da93f437f9588ff32d19ac59fea3802c676) we can detect the depends libraries correctly and build successfully, but I am unsure if this is the correct approach for a fix.\n\n### Expected behaviour\n\nThe toolchain should pass along enough information so that packages can be located on a fresh system install.\n\n### Steps to reproduce\n\n```\ndocker run --pull=always -it nixos/nix\ngit clone --depth=1 https://github.com/bitcoin/bitcoin && cd bitcoin\nnix-shell -p binutils cmake curl gcc gitMinimal gnumake patch pkg-config python3\nmake -C depends -j10 NO_QT=1\ncmake -B build --toolchain /bitcoin/depends/<host-platform-triplet>/toolchain.cmake\n```\n\n### Relevant log output\n\n<details><summary>Example of a generated toolchain</summary>\n<p>\n\n```cmake\n# Copyright (c) 2023-present The Bitcoin Core developers\n# Distributed under the MIT software license, see the accompanying\n# file COPYING or https://opensource.org/license/mit/.\n\n# This file is expected to be highly volatile and may still change substantially.\n\n# If CMAKE_SYSTEM_NAME is set within a toolchain file, CMake will also\n# set CMAKE_CROSSCOMPILING to TRUE, even if CMAKE_SYSTEM_NAME matches\n# CMAKE_HOST_SYSTEM_NAME. To avoid potential misconfiguration of CMake,\n# it is best not to touch CMAKE_SYSTEM_NAME unless cross-compiling is\n# intended.\nif(FALSE)\n  set(CMAKE_SYSTEM_NAME Linux)\n  set(CMAKE_SYSTEM_VERSION 3.17.0)\n  set(CMAKE_SYSTEM_PROCESSOR x86_64)\n\n  set(CMAKE_C_COMPILER_TARGET x86_64-pc-linux-gnu)\n  set(CMAKE_CXX_COMPILER_TARGET x86_64-pc-linux-gnu)\n  set(CMAKE_OBJCXX_COMPILER_TARGET x86_64-pc-linux-gnu)\nendif()\n\nif(NOT DEFINED CMAKE_C_FLAGS_INIT)\n  set(CMAKE_C_FLAGS_INIT \"-pipe -std=c11\")\nendif()\nif(NOT DEFINED CMAKE_C_FLAGS_RELWITHDEBINFO_INIT)\n  set(CMAKE_C_FLAGS_RELWITHDEBINFO_INIT \"-O2\")\nendif()\nif(NOT DEFINED CMAKE_C_FLAGS_DEBUG_INIT)\n  set(CMAKE_C_FLAGS_DEBUG_INIT \"\")\nendif()\n\nif(NOT DEFINED CMAKE_C_COMPILER)\n  set(CMAKE_C_COMPILER clang)\nendif()\n\nif(NOT DEFINED CMAKE_CXX_FLAGS_INIT)\n  set(CMAKE_CXX_FLAGS_INIT \"-pipe -std=c++20\")\n  set(CMAKE_OBJCXX_FLAGS_INIT \"-pipe -std=c++20\")\nendif()\nif(NOT DEFINED CMAKE_CXX_FLAGS_RELWITHDEBINFO_INIT)\n  set(CMAKE_CXX_FLAGS_RELWITHDEBINFO_INIT \"-O2\")\n  set(CMAKE_OBJCXX_FLAGS_RELWITHDEBINFO_INIT \"-O2\")\nendif()\nif(NOT DEFINED CMAKE_CXX_FLAGS_DEBUG_INIT)\n  set(CMAKE_CXX_FLAGS_DEBUG_INIT \"\")\n  set(CMAKE_OBJCXX_FLAGS_DEBUG_INIT \"\")\nendif()\n\nif(NOT DEFINED CMAKE_CXX_COMPILER)\n  set(CMAKE_CXX_COMPILER clang++)\n  set(CMAKE_OBJCXX_COMPILER ${CMAKE_CXX_COMPILER})\nendif()\n\n# The DEPENDS_COMPILE_DEFINITIONS* variables are to be treated as lists.\nset(DEPENDS_COMPILE_DEFINITIONS )\nset(DEPENDS_COMPILE_DEFINITIONS_RELWITHDEBINFO )\nset(DEPENDS_COMPILE_DEFINITIONS_DEBUG )\n\nif(NOT DEFINED CMAKE_EXE_LINKER_FLAGS_INIT)\n  set(CMAKE_EXE_LINKER_FLAGS_INIT \"-fuse-ld=mold\")\nendif()\nif(NOT DEFINED CMAKE_SHARED_LINKER_FLAGS_INIT)\n  set(CMAKE_SHARED_LINKER_FLAGS_INIT \"-fuse-ld=mold\")\nendif()\nif(NOT DEFINED CMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO_INIT)\n  set(CMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO_INIT \"\")\nendif()\nif(NOT DEFINED CMAKE_SHARED_LINKER_FLAGS_RELWITHDEBINFO_INIT)\n  set(CMAKE_SHARED_LINKER_FLAGS_RELWITHDEBINFO_INIT \"\")\nendif()\nif(NOT DEFINED CMAKE_EXE_LINKER_FLAGS_DEBUG_INIT)\n  set(CMAKE_EXE_LINKER_FLAGS_DEBUG_INIT \"\")\nendif()\nif(NOT DEFINED CMAKE_SHARED_LINKER_FLAGS_DEBUG_INIT)\n  set(CMAKE_SHARED_LINKER_FLAGS_DEBUG_INIT \"\")\nendif()\n\nset(CMAKE_AR \"ar\")\nset(CMAKE_RANLIB \"ranlib\")\nset(CMAKE_STRIP \"strip\")\nset(CMAKE_OBJCOPY \"objcopy\")\nset(CMAKE_OBJDUMP \"objdump\")\n\n# Using our own built dependencies should not be\n# affected by a potentially random environment.\nset(CMAKE_FIND_USE_CMAKE_ENVIRONMENT_PATH OFF)\n\nset(CMAKE_FIND_ROOT_PATH \"${CMAKE_CURRENT_LIST_DIR}\")\nset(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)\nset(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\nset(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)\nset(QT_TRANSLATIONS_DIR \"${CMAKE_CURRENT_LIST_DIR}/translations\")\n\nif(CMAKE_SYSTEM_NAME STREQUAL \"Darwin\" AND NOT CMAKE_HOST_APPLE)\n  # The find_package(Qt ...) function internally uses find_library()\n  # calls for all dependencies to ensure their availability.\n  # In turn, the find_library() inspects the well-known locations\n  # on the file system; therefore, a hint is required.\n  set(CMAKE_FRAMEWORK_PATH \"/System/Library/Frameworks\")\nendif()\n\n\nif(CMAKE_SYSTEM_NAME STREQUAL \"Linux\")\n  # Customize pkg-config behavior for finding dependencies\n  # of the xcb QPA platform plugin:\n  # 1. Restrict search paths to the depends.\n  # 2. Make output suitable for static linking.\n  cmake_path(APPEND CMAKE_CURRENT_LIST_DIR \"lib\" \"pkgconfig\" OUTPUT_VARIABLE pkg_config_path)\n  set(ENV{PKG_CONFIG_PATH} ${pkg_config_path})\n  set(ENV{PKG_CONFIG_LIBDIR} ${pkg_config_path})\n  unset(pkg_config_path)\n  set(PKG_CONFIG_ARGN --static)\nendif()\n\n\n# Set configuration options for the main build system.\nset(qt_packages  qt expat libxcb xcb_proto libXau xproto freetype fontconfig libxkbcommon libxcb_util libxcb_util_cursor libxcb_util_render libxcb_util_keysyms libxcb_util_image libxcb_util_wm  qrencode)\nif(\"${qt_packages}\" STREQUAL \"\")\n  set(BUILD_GUI OFF CACHE BOOL \"\")\nelse()\n  set(BUILD_GUI ON CACHE BOOL \"\")\n  set(Qt6_ROOT \"${CMAKE_CURRENT_LIST_DIR}\" CACHE PATH \"\")\nendif()\n\nset(qrencode_packages qrencode)\nif(\"${qrencode_packages}\" STREQUAL \"\")\n  set(WITH_QRENCODE OFF CACHE BOOL \"\")\nelse()\n  set(WITH_QRENCODE ON CACHE BOOL \"\")\nendif()\n\nset(zmq_packages zeromq)\nif(\"${zmq_packages}\" STREQUAL \"\")\n  set(WITH_ZMQ OFF CACHE BOOL \"\")\nelse()\n  set(WITH_ZMQ ON CACHE BOOL \"\")\nendif()\n\nset(wallet_packages bdb sqlite)\nif(\"${wallet_packages}\" STREQUAL \"\")\n  set(ENABLE_WALLET OFF CACHE BOOL \"\")\nelse()\n  set(ENABLE_WALLET ON CACHE BOOL \"\")\nendif()\n\nset(bdb_packages bdb)\nif(\"${wallet_packages}\" STREQUAL \"\" OR \"${bdb_packages}\" STREQUAL \"\")\n  set(WITH_BDB OFF CACHE BOOL \"\")\nelse()\n  set(WITH_BDB ON CACHE BOOL \"\")\nendif()\n\nset(usdt_packages systemtap)\nif(\"${usdt_packages}\" STREQUAL \"\")\n  set(WITH_USDT OFF CACHE BOOL \"\")\nelse()\n  set(WITH_USDT ON CACHE BOOL \"\")\nendif()\n\nif(\"\" STREQUAL \"1\")\n  set(ENABLE_IPC ON CACHE BOOL \"\")\n  set(MPGEN_EXECUTABLE \"${CMAKE_CURRENT_LIST_DIR}/native/bin/mpgen\" CACHE FILEPATH \"\")\n  set(CAPNP_EXECUTABLE \"${CMAKE_CURRENT_LIST_DIR}/native/bin/capnp\" CACHE FILEPATH \"\")\n  set(CAPNPC_CXX_EXECUTABLE \"${CMAKE_CURRENT_LIST_DIR}/native/bin/capnpc-c++\" CACHE FILEPATH \"\")\nelse()\n  set(ENABLE_IPC OFF CACHE BOOL \"\")\nendif()\n```\n\n</p>\n</details> \n\n\n<details><summary>Example cmake cache</summary>\n<p>\n\n```log\n# This is the CMakeCache file.\n# For build in directory: /home/will/src/core/bitcoin/build\n# It was generated by CMake: /nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/bin/cmake\n# You can edit this file to change values found and used by cmake.\n# If you do not want to change any of the values, simply exit the editor.\n# If you do want to change a value, simply edit, save, and exit the editor.\n# The syntax for the file is as follows:\n# KEY:TYPE=VALUE\n# KEY is the name of a variable in the cache.\n# TYPE is a hint to GUIs for the type of VALUE, DO NOT EDIT TYPE!.\n# VALUE is the current value for the KEY.\n\n########################\n# EXTERNAL cache entries\n########################\n\n//Build bitcoin-cli executable.\nBUILD_CLI:BOOL=ON\n\n//Build bitcoind executable.\nBUILD_DAEMON:BOOL=ON\n\n//Build bitcoin-qt executable.\nBUILD_GUI:BOOL=ON\n\n//Build experimental bitcoinkernel library.\nBUILD_KERNEL_LIB:BOOL=OFF\n\n//Build test_bitcoin and other unit test executables.\nBUILD_TESTS:BOOL=ON\n\n//Build bitcoin-tx executable.\nBUILD_TX:BOOL=ON\n\n//Build bitcoin-util executable.\nBUILD_UTIL:BOOL=ON\n\n//Build experimental bitcoin-chainstate executable.\nBUILD_UTIL_CHAINSTATE:BOOL=OFF\n\n//Value Computed by CMake\nBitcoinCore_BINARY_DIR:STATIC=/home/will/src/core/bitcoin/build\n\n//Value Computed by CMake\nBitcoinCore_IS_TOP_LEVEL:STATIC=ON\n\n//Value Computed by CMake\nBitcoinCore_SOURCE_DIR:STATIC=/home/will/src/core/bitcoin\n\n//Path to a program.\nCMAKE_ADDR2LINE:FILEPATH=/nix/store/l4bagvaywzkq3cbjd98rjkqwc0vkpxxw-clang-wrapper-19.1.3/bin/addr2line\n\n//Choose the type of build, options are: None Debug Release RelWithDebInfo\n// MinSizeRel ...\nCMAKE_BUILD_TYPE:STRING=RelWithDebInfo\n\n//LLVM archiver\nCMAKE_CXX_COMPILER_AR:FILEPATH=CMAKE_CXX_COMPILER_AR-NOTFOUND\n\n//`clang-scan-deps` dependency scanner\nCMAKE_CXX_COMPILER_CLANG_SCAN_DEPS:FILEPATH=/nix/store/zld513b4myr3yhs4yyjrcaxag5fcgd57-clang-tools-19.1.3/bin/clang-scan-deps\n\n//Generate index for LLVM archive\nCMAKE_CXX_COMPILER_RANLIB:FILEPATH=CMAKE_CXX_COMPILER_RANLIB-NOTFOUND\n\n//Flags used by the CXX compiler during all build types.\nCMAKE_CXX_FLAGS:STRING=-pipe -std=c++20\n\n//Flags used by the CXX compiler during DEBUG builds.\nCMAKE_CXX_FLAGS_DEBUG:STRING=-O0 -ftrapv -g3\n\n//Flags used by the CXX compiler during MINSIZEREL builds.\nCMAKE_CXX_FLAGS_MINSIZEREL:STRING=-Os\n\n//Flags used by the CXX compiler during RELEASE builds.\nCMAKE_CXX_FLAGS_RELEASE:STRING=-O2\n\n//Flags used by the CXX compiler during RELWITHDEBINFO builds.\nCMAKE_CXX_FLAGS_RELWITHDEBINFO:STRING=-O2 -O2 -g\n\n//Path to a program.\nCMAKE_DLLTOOL:FILEPATH=CMAKE_DLLTOOL-NOTFOUND\n\n//Flags used by the linker during all build types.\nCMAKE_EXE_LINKER_FLAGS:STRING=-fuse-ld=mold -fuse-ld=mold\n\n//Flags used by the linker during DEBUG builds.\nCMAKE_EXE_LINKER_FLAGS_DEBUG:STRING=\n\n//Flags used by the linker during MINSIZEREL builds.\nCMAKE_EXE_LINKER_FLAGS_MINSIZEREL:STRING=\n\n//Flags used by the linker during RELEASE builds.\nCMAKE_EXE_LINKER_FLAGS_RELEASE:STRING=\n\n//Flags used by the linker during RELWITHDEBINFO builds.\nCMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO:STRING=\n\n//Enable/Disable output of compile commands during generation.\nCMAKE_EXPORT_COMPILE_COMMANDS:BOOL=1\n\n//Value Computed by CMake.\nCMAKE_FIND_PACKAGE_REDIRECTS_DIR:STATIC=/home/will/src/core/bitcoin/build/CMakeFiles/pkgRedirects\n\n//Install path prefix, prepended onto install directories.\nCMAKE_INSTALL_PREFIX:PATH=/var/empty/local\n\n//Path to a program.\nCMAKE_LINKER:FILEPATH=/nix/store/l4bagvaywzkq3cbjd98rjkqwc0vkpxxw-clang-wrapper-19.1.3/bin/ld\n\n//Program used to build from build.ninja files.\nCMAKE_MAKE_PROGRAM:FILEPATH=/nix/store/nwsn9hg84pf9rpy3bgdpssa2b6qc7w3p-ninja-1.12.1/bin/ninja\n\n//Flags used by the linker during the creation of modules during\n// all build types.\nCMAKE_MODULE_LINKER_FLAGS:STRING=-fuse-ld=mold\n\n//Flags used by the linker during the creation of modules during\n// DEBUG builds.\nCMAKE_MODULE_LINKER_FLAGS_DEBUG:STRING=\n\n//Flags used by the linker during the creation of modules during\n// MINSIZEREL builds.\nCMAKE_MODULE_LINKER_FLAGS_MINSIZEREL:STRING=\n\n//Flags used by the linker during the creation of modules during\n// RELEASE builds.\nCMAKE_MODULE_LINKER_FLAGS_RELEASE:STRING=\n\n//Flags used by the linker during the creation of modules during\n// RELWITHDEBINFO builds.\nCMAKE_MODULE_LINKER_FLAGS_RELWITHDEBINFO:STRING=\n\n//Path to a program.\nCMAKE_NM:FILEPATH=/nix/store/l4bagvaywzkq3cbjd98rjkqwc0vkpxxw-clang-wrapper-19.1.3/bin/nm\n\n//Value Computed by CMake\nCMAKE_PROJECT_DESCRIPTION:STATIC=Bitcoin client software\n\n//Value Computed by CMake\nCMAKE_PROJECT_HOMEPAGE_URL:STATIC=https://bitcoincore.org/\n\n//Value Computed by CMake\nCMAKE_PROJECT_NAME:STATIC=BitcoinCore\n\n//Value Computed by CMake\nCMAKE_PROJECT_VERSION:STATIC=29.99.0\n\n//Value Computed by CMake\nCMAKE_PROJECT_VERSION_MAJOR:STATIC=29\n\n//Value Computed by CMake\nCMAKE_PROJECT_VERSION_MINOR:STATIC=99\n\n//Value Computed by CMake\nCMAKE_PROJECT_VERSION_PATCH:STATIC=0\n\n//Value Computed by CMake\nCMAKE_PROJECT_VERSION_TWEAK:STATIC=\n\n//Path to a program.\nCMAKE_READELF:FILEPATH=/nix/store/l4bagvaywzkq3cbjd98rjkqwc0vkpxxw-clang-wrapper-19.1.3/bin/readelf\n\n//Flags used by the linker during the creation of shared libraries\n// during all build types.\nCMAKE_SHARED_LINKER_FLAGS:STRING=-fuse-ld=mold -fuse-ld=mold\n\n//Flags used by the linker during the creation of shared libraries\n// during DEBUG builds.\nCMAKE_SHARED_LINKER_FLAGS_DEBUG:STRING=\n\n//Flags used by the linker during the creation of shared libraries\n// during MINSIZEREL builds.\nCMAKE_SHARED_LINKER_FLAGS_MINSIZEREL:STRING=\n\n//Flags used by the linker during the creation of shared libraries\n// during RELEASE builds.\nCMAKE_SHARED_LINKER_FLAGS_RELEASE:STRING=\n\n//Flags used by the linker during the creation of shared libraries\n// during RELWITHDEBINFO builds.\nCMAKE_SHARED_LINKER_FLAGS_RELWITHDEBINFO:STRING=\n\n//If set, runtime paths are not added when installing shared libraries,\n// but are added when building.\nCMAKE_SKIP_INSTALL_RPATH:BOOL=NO\n\n//If set, runtime paths are not added when using shared libraries.\nCMAKE_SKIP_RPATH:BOOL=NO\n\n//Flags used by the linker during the creation of static libraries\n// during all build types.\nCMAKE_STATIC_LINKER_FLAGS:STRING=\n\n//Flags used by the linker during the creation of static libraries\n// during DEBUG builds.\nCMAKE_STATIC_LINKER_FLAGS_DEBUG:STRING=\n\n//Flags used by the linker during the creation of static libraries\n// during MINSIZEREL builds.\nCMAKE_STATIC_LINKER_FLAGS_MINSIZEREL:STRING=\n\n//Flags used by the linker during the creation of static libraries\n// during RELEASE builds.\nCMAKE_STATIC_LINKER_FLAGS_RELEASE:STRING=\n\n//Flags used by the linker during the creation of static libraries\n// during RELWITHDEBINFO builds.\nCMAKE_STATIC_LINKER_FLAGS_RELWITHDEBINFO:STRING=\n\n//Path to a program.\nCMAKE_TAPI:FILEPATH=CMAKE_TAPI-NOTFOUND\n\n//The CMake toolchain file\nCMAKE_TOOLCHAIN_FILE:FILEPATH=/home/will/src/core/bitcoin/depends/x86_64-pc-linux-gnu/toolchain.cmake\n\n//If this value is on, makefiles will be generated without the\n// .SILENT directive, and all commands will be echoed to the console\n// during the make.  This is useful for debugging only. With Visual\n// Studio IDE projects all commands are done without /nologo.\nCMAKE_VERBOSE_MAKEFILE:BOOL=FALSE\n\nENABLE_IPC:BOOL=OFF\n\n//Enable wallet.\nENABLE_WALLET:BOOL=ON\n\n//Arguments to supply to pkg-config\nPKG_CONFIG_ARGN:STRING=--static\n\n//pkg-config executable\nPKG_CONFIG_EXECUTABLE:FILEPATH=/nix/store/f1gamyykr0f8n4afy910ass2jx2g9zkv-pkg-config-wrapper-0.29.2/bin/pkg-config\n\nQt6_ROOT:PATH=/home/will/src/core/bitcoin/depends/x86_64-pc-linux-gnu\n\n//Path to a file.\nSQLite3_INCLUDE_DIR:PATH=SQLite3_INCLUDE_DIR-NOTFOUND\n\n//Path to a library.\nSQLite3_LIBRARY:FILEPATH=SQLite3_LIBRARY-NOTFOUND\n\nWITH_BDB:BOOL=ON\n\nWITH_QRENCODE:BOOL=ON\n\nWITH_USDT:BOOL=ON\n\nWITH_ZMQ:BOOL=ON\n\n\n########################\n# INTERNAL cache entries\n########################\n\n//ADVANCED property for variable: CMAKE_ADDR2LINE\nCMAKE_ADDR2LINE-ADVANCED:INTERNAL=1\n//STRINGS property for variable: CMAKE_BUILD_TYPE\nCMAKE_BUILD_TYPE-STRINGS:INTERNAL=RelWithDebInfo;Debug;Release;MinSizeRel\n//This is the directory where this CMakeCache.txt was created\nCMAKE_CACHEFILE_DIR:INTERNAL=/home/will/src/core/bitcoin/build\n//Major version of cmake used to create the current loaded cache\nCMAKE_CACHE_MAJOR_VERSION:INTERNAL=3\n//Minor version of cmake used to create the current loaded cache\nCMAKE_CACHE_MINOR_VERSION:INTERNAL=30\n//Patch version of cmake used to create the current loaded cache\nCMAKE_CACHE_PATCH_VERSION:INTERNAL=5\n//Path to CMake executable.\nCMAKE_COMMAND:INTERNAL=/nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/bin/cmake\n//Path to cpack program executable.\nCMAKE_CPACK_COMMAND:INTERNAL=/nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/bin/cpack\n//Path to ctest program executable.\nCMAKE_CTEST_COMMAND:INTERNAL=/nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/bin/ctest\n//ADVANCED property for variable: CMAKE_CXX_COMPILER_AR\nCMAKE_CXX_COMPILER_AR-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_COMPILER_CLANG_SCAN_DEPS\nCMAKE_CXX_COMPILER_CLANG_SCAN_DEPS-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_COMPILER_RANLIB\nCMAKE_CXX_COMPILER_RANLIB-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_FLAGS\nCMAKE_CXX_FLAGS-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_FLAGS_DEBUG\nCMAKE_CXX_FLAGS_DEBUG-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_FLAGS_MINSIZEREL\nCMAKE_CXX_FLAGS_MINSIZEREL-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_FLAGS_RELEASE\nCMAKE_CXX_FLAGS_RELEASE-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_CXX_FLAGS_RELWITHDEBINFO\nCMAKE_CXX_FLAGS_RELWITHDEBINFO-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_DLLTOOL\nCMAKE_DLLTOOL-ADVANCED:INTERNAL=1\n//Executable file format\nCMAKE_EXECUTABLE_FORMAT:INTERNAL=ELF\n//ADVANCED property for variable: CMAKE_EXE_LINKER_FLAGS\nCMAKE_EXE_LINKER_FLAGS-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_EXE_LINKER_FLAGS_DEBUG\nCMAKE_EXE_LINKER_FLAGS_DEBUG-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_EXE_LINKER_FLAGS_MINSIZEREL\nCMAKE_EXE_LINKER_FLAGS_MINSIZEREL-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_EXE_LINKER_FLAGS_RELEASE\nCMAKE_EXE_LINKER_FLAGS_RELEASE-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO\nCMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_EXPORT_COMPILE_COMMANDS\nCMAKE_EXPORT_COMPILE_COMMANDS-ADVANCED:INTERNAL=1\n//Name of external makefile project generator.\nCMAKE_EXTRA_GENERATOR:INTERNAL=\n//Name of generator.\nCMAKE_GENERATOR:INTERNAL=Ninja\n//Generator instance identifier.\nCMAKE_GENERATOR_INSTANCE:INTERNAL=\n//Name of generator platform.\nCMAKE_GENERATOR_PLATFORM:INTERNAL=\n//Name of generator toolset.\nCMAKE_GENERATOR_TOOLSET:INTERNAL=\n//Source directory with the top level CMakeLists.txt file for this\n// project\nCMAKE_HOME_DIRECTORY:INTERNAL=/home/will/src/core/bitcoin\n//Install .so files without execute permission.\nCMAKE_INSTALL_SO_NO_EXE:INTERNAL=0\n//ADVANCED property for variable: CMAKE_LINKER\nCMAKE_LINKER-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_MAKE_PROGRAM\nCMAKE_MAKE_PROGRAM-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_MODULE_LINKER_FLAGS\nCMAKE_MODULE_LINKER_FLAGS-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_MODULE_LINKER_FLAGS_DEBUG\nCMAKE_MODULE_LINKER_FLAGS_DEBUG-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_MODULE_LINKER_FLAGS_MINSIZEREL\nCMAKE_MODULE_LINKER_FLAGS_MINSIZEREL-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_MODULE_LINKER_FLAGS_RELEASE\nCMAKE_MODULE_LINKER_FLAGS_RELEASE-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_MODULE_LINKER_FLAGS_RELWITHDEBINFO\nCMAKE_MODULE_LINKER_FLAGS_RELWITHDEBINFO-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_NM\nCMAKE_NM-ADVANCED:INTERNAL=1\n//number of local generators\nCMAKE_NUMBER_OF_MAKEFILES:INTERNAL=1\n//Platform information initialized\nCMAKE_PLATFORM_INFO_INITIALIZED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_READELF\nCMAKE_READELF-ADVANCED:INTERNAL=1\n//Path to CMake installation.\nCMAKE_ROOT:INTERNAL=/nix/store/4kb60dy0dg80ww8gh2av4by4vwn8l48k-cmake-3.30.5/share/cmake-3.30\n//ADVANCED property for variable: CMAKE_SHARED_LINKER_FLAGS\nCMAKE_SHARED_LINKER_FLAGS-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_SHARED_LINKER_FLAGS_DEBUG\nCMAKE_SHARED_LINKER_FLAGS_DEBUG-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_SHARED_LINKER_FLAGS_MINSIZEREL\nCMAKE_SHARED_LINKER_FLAGS_MINSIZEREL-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_SHARED_LINKER_FLAGS_RELEASE\nCMAKE_SHARED_LINKER_FLAGS_RELEASE-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_SHARED_LINKER_FLAGS_RELWITHDEBINFO\nCMAKE_SHARED_LINKER_FLAGS_RELWITHDEBINFO-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_SKIP_INSTALL_RPATH\nCMAKE_SKIP_INSTALL_RPATH-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_SKIP_RPATH\nCMAKE_SKIP_RPATH-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_STATIC_LINKER_FLAGS\nCMAKE_STATIC_LINKER_FLAGS-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_STATIC_LINKER_FLAGS_DEBUG\nCMAKE_STATIC_LINKER_FLAGS_DEBUG-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_STATIC_LINKER_FLAGS_MINSIZEREL\nCMAKE_STATIC_LINKER_FLAGS_MINSIZEREL-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_STATIC_LINKER_FLAGS_RELEASE\nCMAKE_STATIC_LINKER_FLAGS_RELEASE-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_STATIC_LINKER_FLAGS_RELWITHDEBINFO\nCMAKE_STATIC_LINKER_FLAGS_RELWITHDEBINFO-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: CMAKE_TAPI\nCMAKE_TAPI-ADVANCED:INTERNAL=1\n//uname command\nCMAKE_UNAME:INTERNAL=/nix/store/k48bha2fjqzarg52picsdfwlqx75aqbb-coreutils-9.5/bin/uname\n//ADVANCED property for variable: CMAKE_VERBOSE_MAKEFILE\nCMAKE_VERBOSE_MAKEFILE-ADVANCED:INTERNAL=1\n//Test CXX_SUPPORTS__FTRAPV\nCXX_SUPPORTS__FTRAPV:INTERNAL=1\n//Test CXX_SUPPORTS__G3\nCXX_SUPPORTS__G3:INTERNAL=1\n//Test CXX_SUPPORTS__WERROR\nCXX_SUPPORTS__WERROR:INTERNAL=1\n//Test LINKER_SUPPORTS__FTRAPV\nLINKER_SUPPORTS__FTRAPV:INTERNAL=1\n//Test LINKER_SUPPORTS__G3\nLINKER_SUPPORTS__G3:INTERNAL=1\nPC_SQLite3_CFLAGS:INTERNAL=\nPC_SQLite3_CFLAGS_I:INTERNAL=\nPC_SQLite3_CFLAGS_OTHER:INTERNAL=\nPC_SQLite3_FOUND:INTERNAL=\nPC_SQLite3_INCLUDEDIR:INTERNAL=\nPC_SQLite3_LIBDIR:INTERNAL=\nPC_SQLite3_LIBS:INTERNAL=\nPC_SQLite3_LIBS_L:INTERNAL=\nPC_SQLite3_LIBS_OTHER:INTERNAL=\nPC_SQLite3_LIBS_PATHS:INTERNAL=\nPC_SQLite3_MODULE_NAME:INTERNAL=\nPC_SQLite3_PREFIX:INTERNAL=\nPC_SQLite3_STATIC_CFLAGS:INTERNAL=\nPC_SQLite3_STATIC_CFLAGS_I:INTERNAL=\nPC_SQLite3_STATIC_CFLAGS_OTHER:INTERNAL=\nPC_SQLite3_STATIC_LIBDIR:INTERNAL=\nPC_SQLite3_STATIC_LIBS:INTERNAL=\nPC_SQLite3_STATIC_LIBS_L:INTERNAL=\nPC_SQLite3_STATIC_LIBS_OTHER:INTERNAL=\nPC_SQLite3_STATIC_LIBS_PATHS:INTERNAL=\nPC_SQLite3_VERSION:INTERNAL=\nPC_SQLite3_sqlite3_INCLUDEDIR:INTERNAL=\nPC_SQLite3_sqlite3_LIBDIR:INTERNAL=\nPC_SQLite3_sqlite3_PREFIX:INTERNAL=\nPC_SQLite3_sqlite3_VERSION:INTERNAL=\n//ADVANCED property for variable: PKG_CONFIG_ARGN\nPKG_CONFIG_ARGN-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: PKG_CONFIG_EXECUTABLE\nPKG_CONFIG_EXECUTABLE-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: SQLite3_INCLUDE_DIR\nSQLite3_INCLUDE_DIR-ADVANCED:INTERNAL=1\n//ADVANCED property for variable: SQLite3_LIBRARY\nSQLite3_LIBRARY-ADVANCED:INTERNAL=1\n//linker supports push/pop state\n_CMAKE_LINKER_PUSHPOP_STATE_SUPPORTED:INTERNAL=FALSE\n__pkg_config_checked_PC_SQLite3:INTERNAL=1\n```\n\n\n</p>\n</details> \n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@885b4bc8b59d1cbbaea519207f715eab447cc0ff\n\n### Operating system and version\n\nNixOS 25.05 (Warbler) x86_64\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "willcl-ark",
      "id": 6606587,
      "node_id": "MDQ6VXNlcjY2MDY1ODc=",
      "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/willcl-ark",
      "html_url": "https://github.com/willcl-ark",
      "followers_url": "https://api.github.com/users/willcl-ark/followers",
      "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
      "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
      "repos_url": "https://api.github.com/users/willcl-ark/repos",
      "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 9,
    "created_at": "2025-05-06T15:31:32Z",
    "updated_at": "2025-05-06T21:22:26Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 17539962601,
      "node_id": "LE_lADOABII5861ZAAAzwAAAAQVdpbp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17539962601",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T15:38:21Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 2855091032,
      "node_id": "IC_kwDOABII586qLTtY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855091032",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T15:49:29Z",
      "updated_at": "2025-05-06T17:20:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "I debugged this issue at some point before and have been working around it since by setting the PATH variable when using depends like:\n\n```bash\nexport PATH=$PATH:$PWD/depends/x86_64-pc-linux-gnu/include\nexport PATH=$PATH:$PWD/depends/x86_64-pc-linux-gnu/lib\ncmake -B build -DCMAKE_TOOLCHAIN_FILE=depends/x86_64-pc-linux-gnu/toolchain.cmake\n```\n\nMore ideally, we would be able to do:\n\n```bash\nexport CMAKE_PREFIX_PATH=$PWD/depends/x86_64-pc-linux-gnu\ncmake -B build -DCMAKE_TOOLCHAIN_FILE=depends/x86_64-pc-linux-gnu/toolchain.cmake\n```\n\nbut this only works if you delete `set(CMAKE_FIND_USE_CMAKE_ENVIRONMENT_PATH OFF)` from the toolchain file:\n\nhttps://github.com/bitcoin/bitcoin/blob/baa848b8d38187ce6b24a57cfadf1ea180209711/depends/toolchain.cmake.in#L86\n\nI commented on this previously in https://github.com/bitcoin/bitcoin/pull/30940#pullrequestreview-2322355196\n\n---\n\nEDIT: Just noticed suggested fix 437a4da93f437f9588ff32d19ac59fea3802c676. That is probably better than either of two workarounds I suggested above.\n\nEDIT 2: I guess my PATH hack above worked because we are only turning off the [CMAKE_FIND_USE_CMAKE_ENVIRONMENT_PATH](https://cmake.org/cmake/help/latest/variable/CMAKE_FIND_USE_CMAKE_ENVIRONMENT_PATH.html) option but not the \n[CMAKE_FIND_USE_SYSTEM_ENVIRONMENT_PATH](https://cmake.org/cmake/help/latest/variable/CMAKE_FIND_USE_SYSTEM_ENVIRONMENT_PATH.html) option",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855091032",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "commented",
      "id": 2855198133,
      "node_id": "IC_kwDOABII586qLt21",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855198133",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T16:23:13Z",
      "updated_at": "2025-05-06T16:23:13Z",
      "author_association": "MEMBER",
      "body": "Also @0xB10C's https://github.com/hebasto/bitcoin/issues/121.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855198133",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "mentioned",
      "id": 17540686441,
      "node_id": "MEE_lADOABII5861ZAAAzwAAAAQVgaJp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17540686441",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T16:23:14Z"
    },
    {
      "event": "subscribed",
      "id": 17540686459,
      "node_id": "SE_lADOABII5861ZAAAzwAAAAQVgaJ7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17540686459",
      "actor": {
        "login": "0xB10C",
        "id": 19157360,
        "node_id": "MDQ6VXNlcjE5MTU3MzYw",
        "avatar_url": "https://avatars.githubusercontent.com/u/19157360?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xB10C",
        "html_url": "https://github.com/0xB10C",
        "followers_url": "https://api.github.com/users/0xB10C/followers",
        "following_url": "https://api.github.com/users/0xB10C/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xB10C/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xB10C/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xB10C/subscriptions",
        "organizations_url": "https://api.github.com/users/0xB10C/orgs",
        "repos_url": "https://api.github.com/users/0xB10C/repos",
        "events_url": "https://api.github.com/users/0xB10C/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xB10C/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T16:23:14Z"
    },
    {
      "event": "commented",
      "id": 2855218089,
      "node_id": "IC_kwDOABII586qLyup",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855218089",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T16:30:09Z",
      "updated_at": "2025-05-06T16:30:09Z",
      "author_association": "MEMBER",
      "body": "> The problem is caused by `set(CMAKE_FIND_USE_CMAKE_ENVIRONMENT_PATH OFF)` in the toolchain file:\n> \n> https://github.com/bitcoin/bitcoin/blob/baa848b8d38187ce6b24a57cfadf1ea180209711/depends/toolchain.cmake.in#L86\n> \n> and I believe it goes away if you remove that line. I commented on this previously in [#30940 (review)](https://github.com/bitcoin/bitcoin/pull/30940#pullrequestreview-2322355196)\n\nHere is some additional context on how this code was introduced: https://github.com/hebasto/bitcoin/pull/88#discussion_r1471043621.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855218089",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "referenced",
      "id": 17541036754,
      "node_id": "REFE_lADOABII5861ZAAAzwAAAAQVhvrS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17541036754",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "546adfdfc68be14c4086d811654f2b42d487c79c",
      "commit_url": "https://api.github.com/repos/hebasto/bitcoin/commits/546adfdfc68be14c4086d811654f2b42d487c79c",
      "created_at": "2025-05-06T16:47:09Z"
    },
    {
      "event": "commented",
      "id": 2855454246,
      "node_id": "IC_kwDOABII586qMsYm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855454246",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T17:58:32Z",
      "updated_at": "2025-05-06T17:58:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "I can confirm Will's commit in 437a4da93f437f9588ff32d19ac59fea3802c676 fixes the problem for me and seems like a good solution. But I think it can be simplified to only just `list(APPEND CMAKE_PREFIX_PATH \"${CMAKE_CURRENT_LIST_DIR}\")` and the if() guard should be unnecessary.\n\nI also confirmed the other fix appending `-DCMAKE_PREFIX_PATH=/` to the command line from https://github.com/hebasto/bitcoin/issues/121#issuecomment-2015274066 works. I guess this works because cmake appends CMAKE_FIND_ROOT_PATH to CMAKE_PREFIX_PATH when searching.\n\nI also confirmed adding `-DCMAKE_PREFIX_PATH=$PWD/depends/x86_64-pc-linux-gnu` to the command line works.\n\nAnd I confirmed adding `list(APPEND CMAKE_PREFIX_PATH \"/\")` to the toolchain file works as well.\n\nI also tried my PATH workaround again and it works for sqlite but then it fails to find zmq and libevent packages unless also adding\n`-DCMAKE_PREFIX_PATH=$PWD/depends/x86_64-pc-linux-gnu/lib/cmake` with unnecessary lib/cmake suffix (which I guess was my original approach which led finding that workaround).\n\nIn any case, it seems like a good fix could just be to add `list(APPEND CMAKE_PREFIX_PATH \"${CMAKE_CURRENT_LIST_DIR}\")` to the toolchain file and be done. \n\nThe thing I don't understand is why setting CMAKE_PREFIX_PATH as well as CMAKE_FIND_ROOT_PATH seems to be necessary on nix while setting CMAKE_FIND_ROOT_PATH alone seems to work on other platforms.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855454246",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "commented",
      "id": 2855636472,
      "node_id": "IC_kwDOABII586qNY34",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855636472",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:08:51Z",
      "updated_at": "2025-05-06T19:08:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The thing I don't understand is why setting CMAKE_PREFIX_PATH as well as CMAKE_FIND_ROOT_PATH seems to be necessary on nix while setting CMAKE_FIND_ROOT_PATH alone seems to work on other platforms.\n\nReason for this is that nix is patching cmake to remove the root path `/` from `CMAKE_SYSTEM_PREFIX_PATH` in https://github.com/NixOS/nixpkgs/blob/df545660856d8252b4856bede70d424ef4b47c64/pkgs/by-name/cm/cmake/001-search-path.diff\n\nBecause of this `CMAKE_FIND_ROOT_PATH` is not searched directly for dependencies and setting `CMAKE_PREFIX_PATH` just compensates by telling it where else too look.\n\n(Found answer to this question by asking chatgpt O3 which was able to point directly at the patch. Otherwise I would have no idea.)\n\nSo I think the following might be the most direct fix. \n\n```diff\n--- a/depends/toolchain.cmake.in\n+++ b/depends/toolchain.cmake.in\n@@ -92,6 +92,14 @@ set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)\n set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)\n set(QT_TRANSLATIONS_DIR \"${CMAKE_CURRENT_LIST_DIR}/translations\")\n \n+# Following is only necessary when using cmake from Nix or NixOS, because Nix\n+# patches cmake to remove the root directory `/` from CMAKE_SYSTEM_PREFIX_PATH.\n+# Adding it back is harmless on other platforms and necessary on Nix because\n+# without it cmake find_path, find_package, etc functions do not know where to\n+# look in CMAKE_FIND_ROOT_PATH for dependencies\n+# (https://github.com/bitcoin/bitcoin/issues/32428).\n+list(APPEND CMAKE_SYSTEM_PREFIX_PATH \"/\")\n+\n if(CMAKE_SYSTEM_NAME STREQUAL \"Darwin\" AND NOT CMAKE_HOST_APPLE)\n   # The find_package(Qt ...) function internally uses find_library()\n   # calls for all dependencies to ensure their availability.\n```",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855636472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "commented",
      "id": 2855642758,
      "node_id": "IC_kwDOABII586qNaaG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855642758",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:11:51Z",
      "updated_at": "2025-05-06T19:19:03Z",
      "author_association": "MEMBER",
      "body": "Yes I agree @ryanofsky, thanks for double-checking!\n\nI added the `if()` guard because I heard [from @hebasto](https://gnusha.org/bitcoin-builds/2025-04-22.log) that we call the toolchain multiple times, and the `if` guard therefore avoids adding the path repeatedly.",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855642758",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "mentioned",
      "id": 17542969053,
      "node_id": "MEE_lADOABII5861ZAAAzwAAAAQVpHbd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17542969053",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:11:52Z"
    },
    {
      "event": "subscribed",
      "id": 17542969065,
      "node_id": "SE_lADOABII5861ZAAAzwAAAAQVpHbp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17542969065",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:11:52Z"
    },
    {
      "event": "mentioned",
      "id": 17542969079,
      "node_id": "MEE_lADOABII5861ZAAAzwAAAAQVpHb3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17542969079",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:11:53Z"
    },
    {
      "event": "subscribed",
      "id": 17542969093,
      "node_id": "SE_lADOABII5861ZAAAzwAAAAQVpHcF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17542969093",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:11:53Z"
    },
    {
      "event": "commented",
      "id": 2855669606,
      "node_id": "IC_kwDOABII586qNg9m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855669606",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:23:56Z",
      "updated_at": "2025-05-06T19:23:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I added the `if()` guard because I heard from [@hebasto](https://github.com/hebasto) that we call the toolchain multiple times, and the `if` guard therefore avoids adding the path repeatedly.\n\nI think this is half-true. I noticed by adding prints to the cmake file that it was called multiple times, but each time CMAKE_PREFIX_PATH was always set back to the original value, so I don't think the `if` guard did anything.\n\nAlso just to be sure another difference isn't glossed over: I think it probably is better to set CMAKE_SYSTEM_PREFIX_PATH instead of CMAKE_PREFIX_PATH since former seems to fix the original problem, while latter is more of a workaround.\n\nAlso really appreciate you reporting this issue and finding a good workaround. This has been causing me headaches for a long time, and I've only had crappy workarounds and couldn't figure out how this was working at all on other systems.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855669606",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "commented",
      "id": 2855759003,
      "node_id": "IC_kwDOABII586qN2yb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2855759003",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T19:46:06Z",
      "updated_at": "2025-05-06T19:46:06Z",
      "author_association": "MEMBER",
      "body": "> Also just to be sure another difference isn't glossed over: I think it probably is better to set CMAKE_SYSTEM_PREFIX_PATH instead of CMAKE_PREFIX_PATH since former seems to fix the original problem, while latter is more of a workaround.\n\nThat sounds reasonable.\n\n> Also really appreciate you reporting this issue and finding a good workaround. This has been causing me headaches for a long time, and I've only had crappy workarounds and couldn't figure out how this was working at all on other systems.\n\nI'm glad I did! I only recently switched to NixOS and was about to go around start bugging other known Nix users about \"how they got depends working\" as it's been driving me a bit mad too :D\n\nI've got another half-baked patch which I also appear to need to actually make a depends-built `bitcoin-qt` work under NixOS: https://github.com/bitcoin/bitcoin/commit/3700c49e57faf2e0eb9bdae0526004ebf4ee343e I'd like to investigate if I can fix it up using `LDPRELOAD` rather than requiring a custom `RPATH` toggle (just for NixOS!), but I think I'm gunna leave that for another day... 😄",
      "user": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2855759003",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    },
    {
      "event": "referenced",
      "id": 17543729138,
      "node_id": "REFE_lADOABII5861ZAAAzwAAAAQVsA_y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17543729138",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "12966ca13aab8901a388cd9443042f55cb4bace7",
      "commit_url": "https://api.github.com/repos/willcl-ark/bitcoin/commits/12966ca13aab8901a388cd9443042f55cb4bace7",
      "created_at": "2025-05-06T20:10:00Z"
    },
    {
      "event": "referenced",
      "id": 17543774236,
      "node_id": "REFE_lADOABII5861ZAAAzwAAAAQVsMAc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17543774236",
      "actor": {
        "login": "willcl-ark",
        "id": 6606587,
        "node_id": "MDQ6VXNlcjY2MDY1ODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6606587?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/willcl-ark",
        "html_url": "https://github.com/willcl-ark",
        "followers_url": "https://api.github.com/users/willcl-ark/followers",
        "following_url": "https://api.github.com/users/willcl-ark/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/willcl-ark/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/willcl-ark/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/willcl-ark/subscriptions",
        "organizations_url": "https://api.github.com/users/willcl-ark/orgs",
        "repos_url": "https://api.github.com/users/willcl-ark/repos",
        "events_url": "https://api.github.com/users/willcl-ark/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/willcl-ark/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fa4b7f4cd51b831c3baf1b75d1513953fed0aa5e",
      "commit_url": "https://api.github.com/repos/willcl-ark/bitcoin/commits/fa4b7f4cd51b831c3baf1b75d1513953fed0aa5e",
      "created_at": "2025-05-06T20:12:40Z"
    },
    {
      "event": "referenced",
      "id": 17544115835,
      "node_id": "REFE_lADOABII5861ZAAAzwAAAAQVtfZ7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17544115835",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ea799dece3cd19cc47eb7ea2ec330c1efb842c9c",
      "commit_url": "https://api.github.com/repos/hebasto/bitcoin/commits/ea799dece3cd19cc47eb7ea2ec330c1efb842c9c",
      "created_at": "2025-05-06T20:39:54Z"
    },
    {
      "event": "commented",
      "id": 2856025715,
      "node_id": "IC_kwDOABII586qO35z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2856025715",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-06T21:22:24Z",
      "updated_at": "2025-05-06T21:22:24Z",
      "author_association": "MEMBER",
      "body": "> > I added the `if()` guard because I heard from [@hebasto](https://github.com/hebasto) that we call the toolchain multiple times, and the `if` guard therefore avoids adding the path repeatedly.\n> \n> I think this is half-true. I noticed by adding prints to the cmake file that it was called multiple times, but each time CMAKE_PREFIX_PATH was always set back to the original value, so I don't think the `if` guard did anything.\n\nI'd avoid making assumptions about undocumented `CMAKE_PREFIX_PATH`-related behaviour. Let's preserve the idempotence of the toolchain file.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32428#issuecomment-2856025715",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32428"
    }
  ]
}