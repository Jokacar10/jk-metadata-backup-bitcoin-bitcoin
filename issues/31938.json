{
  "type": "issue",
  "issue": {
    "id": 2873242759,
    "node_id": "I_kwDOABII586rQjSH",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31938",
    "number": 31938,
    "state": "open",
    "state_reason": null,
    "title": "Ephemeral Dust 0-Fee Requirement Complexifies Downstream Protocols",
    "body": "In lightning, we often want to deal with HTLCs which are below the dust threshold and thus must be burned to fees (absent something better to do with them). When doing ephemeral anchors, we want to retain that property. Ephemeral dust currently, however, requires that we burn them into the anchor (as we aren't allowed to have a non-0 fee when dealing with ephemeral dust).\n\nIf we burn the entire dust HTLC sum (which may be nontrivial, though it should never be huge) into the anchor (and fees are low), either channel counterparty might see that dust HTLC sum as nice free money. If they're a miner, of course, the entire dust HTLC sum is always free money, but in most cases that isn't true, so they'd be incentivized to go use a private mempool service (eg MEVPool) which is bad for everyone.\n\nInstead, lightning would need to burn up to the dust limit in HTLC dust into the anchor output and then burn the remainder into the commitment transaction fee (as we can skip using the ephemeral dust rules once the anchor is no longer dust). Dealing with this is somewhat annoying (okay, its not *that* bad, but I'd really rather not have to), and its not clear to me that the 0-fee requirement accomplishes all that much:\n\nIn a world where blocks aren't full and there isn't sustained mempool pressure (today), anyone-can-spend dust isn't all that bad - cleaning it up is free for miners so there's not a lot of reason to worry about it.\nIn a world where blocks are sustainably full and feerates rise above the minimum relay fees (hopefully the future), the dust thresholds we have don't make sense anyway, so enforcing them doesn't really accomplish much.",
    "user": {
      "login": "TheBlueMatt",
      "id": 649246,
      "node_id": "MDQ6VXNlcjY0OTI0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheBlueMatt",
      "html_url": "https://github.com/TheBlueMatt",
      "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
      "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
      "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
      "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
      "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 5,
    "created_at": "2025-02-23T14:47:16Z",
    "updated_at": "2025-02-24T19:47:59Z"
  },
  "events": [
    {
      "event": "subscribed",
      "id": 16434468221,
      "node_id": "SE_lADOABII586rQjSHzwAAAAPTkhV9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16434468221",
      "actor": {
        "login": "morehouse",
        "id": 19176026,
        "node_id": "MDQ6VXNlcjE5MTc2MDI2",
        "avatar_url": "https://avatars.githubusercontent.com/u/19176026?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/morehouse",
        "html_url": "https://github.com/morehouse",
        "followers_url": "https://api.github.com/users/morehouse/followers",
        "following_url": "https://api.github.com/users/morehouse/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/morehouse/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/morehouse/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/morehouse/subscriptions",
        "organizations_url": "https://api.github.com/users/morehouse/orgs",
        "repos_url": "https://api.github.com/users/morehouse/repos",
        "events_url": "https://api.github.com/users/morehouse/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/morehouse/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T16:40:18Z"
    },
    {
      "event": "labeled",
      "id": 16434559742,
      "node_id": "LE_lADOABII586rQjSHzwAAAAPTk3r-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16434559742",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T16:46:34Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 2679414095,
      "node_id": "IC_kwDOABII586ftJ1P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2679414095",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T19:12:15Z",
      "updated_at": "2025-02-24T19:12:15Z",
      "author_association": "MEMBER",
      "body": "So to summarize. Given you have `amt` amount of trimmed htlcs to burn, this is the \"annoying\" option you'd need to do now:\n- `amt > 0 and <= dust`: put it in the anchor\n- `amt > dust`: anchor has `dust`, fees have `amt - dust`\n\nAnd the option you want: just put 0 in the anchor, everything else into fees. So this is kind of like removing the dust limit (apart from the rule that you can only have 1).\n\n> they'd be incentivized to go use a private mempool service (eg MEVPool) which is bad for everyone.\n\nYou're saying they're incentivized to do this so that nobody else is able to see the tx prior to confirmation (and thus can't snipe if from them)?\n\n> In a world where blocks aren't full and there isn't sustained mempool pressure (today), anyone-can-spend dust isn't all that bad - cleaning it up is free for miners so there's not a lot of reason to worry about it.\n\nI have to ask: why would miners clean up 0-value outputs ever, other than to be nice?",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31938#issuecomment-2679414095",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938"
    },
    {
      "event": "commented",
      "id": 2679432783,
      "node_id": "IC_kwDOABII586ftOZP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2679432783",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T19:20:44Z",
      "updated_at": "2025-02-24T19:20:44Z",
      "author_association": "MEMBER",
      "body": "Do we have stats on how many current-day anchors are hanging out in the UTXO set? I know they're effectively anyone-can-spend and theoretically can be cleaned up, but does that happen in practice?",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31938#issuecomment-2679432783",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938"
    },
    {
      "event": "commented",
      "id": 2679442360,
      "node_id": "IC_kwDOABII586ftQu4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2679442360",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T19:24:59Z",
      "updated_at": "2025-02-24T19:24:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "> So to summarize.\n\nYep!\n\n> So this is kind of like removing the dust limit (apart from the rule that you can only have 1).\n\nAnd that its only for anyone-can-spend/P2A.\n\n> You're saying they're incentivized to do this so that nobody else is able to see the tx prior to confirmation (and thus can't snipe if from them)?\n\nCorrect, though that just is why we have to do the pay-to-fee in the `amt > dust` case.\n\n> I have to ask: why would miners clean up 0-value outputs ever, other than to be nice?\n> Do we have stats on how many current-day anchors are hanging out in the UTXO set? I know they're effectively anyone-can-spend and theoretically can be cleaned up, but does that happen in practice?\n\nJust to be nice. Indeed, today they are cleaned up, but they also can be claimed at 1sat/vB without (I think without? maybe with minimal) additional value so its not just miners doing it.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31938#issuecomment-2679442360",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938"
    },
    {
      "event": "commented",
      "id": 2679465093,
      "node_id": "IC_kwDOABII586ftWSF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2679465093",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T19:35:31Z",
      "updated_at": "2025-02-24T19:35:31Z",
      "author_association": "MEMBER",
      "body": "> > So to summarize.\n> \n> Yep!\n> \n> > So this is kind of like removing the dust limit (apart from the rule that you can only have 1).\n> \n> And that its only for anyone-can-spend/P2A.\n\nOhhh, that is different! So the request is to waive the 0-fee requirement specifically for p2a. This is a bit better, but I'm still not convinced that we can expect the outputs to be cleaned up. It's not like the anchors are going to be in \"the dust range.\" They're always going to be exactly 0.",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31938#issuecomment-2679465093",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938"
    },
    {
      "event": "commented",
      "id": 2679490142,
      "node_id": "IC_kwDOABII586ftcZe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2679490142",
      "actor": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T19:47:57Z",
      "updated_at": "2025-02-24T19:47:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think it comes down to if block space is going to be free or not - in my view its kinda binary - if block space is never-free the dust concept kinda goes out the window because fees are material and tons of UTXOs are worthless, if block space is sometimes-free (bad news for bitcoin, but hey) then you just have to find one miner who wants to clean up crap and you're good.",
      "user": {
        "login": "TheBlueMatt",
        "id": 649246,
        "node_id": "MDQ6VXNlcjY0OTI0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/649246?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheBlueMatt",
        "html_url": "https://github.com/TheBlueMatt",
        "followers_url": "https://api.github.com/users/TheBlueMatt/followers",
        "following_url": "https://api.github.com/users/TheBlueMatt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheBlueMatt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheBlueMatt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheBlueMatt/subscriptions",
        "organizations_url": "https://api.github.com/users/TheBlueMatt/orgs",
        "repos_url": "https://api.github.com/users/TheBlueMatt/repos",
        "events_url": "https://api.github.com/users/TheBlueMatt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheBlueMatt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31938#issuecomment-2679490142",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31938"
    }
  ]
}