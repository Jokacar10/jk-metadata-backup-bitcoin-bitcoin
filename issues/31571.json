{
  "type": "issue",
  "issue": {
    "id": 2760780774,
    "node_id": "I_kwDOABII586kjivm",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31571",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31571/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31571/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31571/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31571",
    "number": 31571,
    "state": "open",
    "state_reason": null,
    "title": "failure in wallet_sendall.py --descriptors",
    "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nWhen I try to run functional tests using `build/test/functional/test_runner.py`, only 1 test gets failed:\r\n\r\n![Screenshot from 2024-12-27 10-45-53](https://github.com/user-attachments/assets/dd54a5a5-e214-4a2d-9359-145f314eddfd)\r\n\r\nerror : \r\n`Temporary test directory at /tmp/test_runner_‚Çø_üèÉ_20241227_142837\r\nusage: create_cache.py [options]\r\ncreate_cache.py: error: unrecognized arguments: --descriptors\r\nTraceback (most recent call last):\r\n  File \"/path/to/bitcoin/build/test/functional/test_runner.py\", line 954, in <module>\r\n    main()\r\n  File \"/path/to/bitcoin/build/test/functional/test_runner.py\", line 576, in main\r\n    run_tests(\r\n  File \"/path/to/bitcoin/build/test/functional/test_runner.py\", line 629, in run_tests\r\n    subprocess.check_output([sys.executable, tests_dir + 'create_cache.py'] + flags + [\"--tmpdir=%s/cache\" % tmpdir])\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 421, in check_output\r\n    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,\r\n  File \"/usr/lib/python3.10/subprocess.py\", line 526, in run\r\n    raise CalledProcessError(retcode, process.args,\r\nsubprocess.CalledProcessError: Command '['/usr/bin/python3', '/path/to/bitcoin/build/test/functional/create_cache.py', '--cachedir=/path/to/bitcoin/build/test/cache', '--descriptors', '--configfile=/path/to/bitcoin/build/test/functional/../config.ini', '--tmpdir=/tmp/test_runner_‚Çø_üèÉ_20241227_142837/cache']' returned non-zero exit status 2.\r\n`\r\n\r\nBut when i run that very test using `build/test/functional/test_runner.py wallet_sendall.py`, it gets passed:\r\n\r\n![Screenshot from 2024-12-27 10-50-39](https://github.com/user-attachments/assets/37d1a1da-7708-4813-8adf-6f573e1a4495)\r\n\r\n\r\n### Expected behaviour\r\n\r\nI expect that 1 test to get passed when I run all the tests in parallel.\r\n\r\n### Steps to reproduce\r\n\r\nI just built using:\r\n\r\n`\r\ncmake -B build \\\r\n    -DBUILD_GUI=OFF \\\r\n    -DWITH_BDB=OFF  \\\r\n    -DBUILD_BENCH=OFF  \\\r\n    -DBUILD_FOR_FUZZING=OFF \\\r\n    -DBUILD_KERNEL_LIB=OFF \\\r\n    -DBUILD_SHARED_LIBS=OFF \\\r\n    -DBUILD_TESTS=OFF \\\r\n    -DBUILD_TX=OFF \\\r\n    -DBUILD_UTIL=OFF \\\r\n    -DBUILD_WALLET_TOOL=OFF\r\n\r\ncmake --build build -j$(nproc)\r\n`\r\n\r\nAnd then ran the functional tests using `build/test/functional/test_runner.py`\r\n\r\n### Relevant log output\r\n\r\n_No response_\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nCompiled from source\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv28.0\r\n\r\n### Operating system and version\r\n\r\nUbuntu 22.04.5 LTS\r\n\r\n### Machine specifications\r\n\r\n_No response_",
    "user": {
      "login": "SwimmingRieux",
      "id": 141845753,
      "node_id": "U_kgDOCHRk-Q",
      "avatar_url": "https://avatars.githubusercontent.com/u/141845753?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SwimmingRieux",
      "html_url": "https://github.com/SwimmingRieux",
      "followers_url": "https://api.github.com/users/SwimmingRieux/followers",
      "following_url": "https://api.github.com/users/SwimmingRieux/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/SwimmingRieux/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/SwimmingRieux/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/SwimmingRieux/subscriptions",
      "organizations_url": "https://api.github.com/users/SwimmingRieux/orgs",
      "repos_url": "https://api.github.com/users/SwimmingRieux/repos",
      "events_url": "https://api.github.com/users/SwimmingRieux/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/SwimmingRieux/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 2,
    "created_at": "2024-12-27T11:42:47Z",
    "updated_at": "2025-01-06T23:30:57Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 15801402586,
      "node_id": "LE_lADOABII586kjivmzwAAAAOt1kTa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15801402586",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T18:48:48Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 2568254664,
      "node_id": "IC_kwDOABII586ZFHTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2568254664",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T19:18:41Z",
      "updated_at": "2025-01-02T19:18:41Z",
      "author_association": "MEMBER",
      "body": "Did you run any other command while running the tests?\r\n\r\nDoes it reproduce?\r\n\r\nI can't reproduce with your steps on Ubuntu 22.04: `cmake -B ./bld-cmake -DBUILD_GUI=OFF -DWITH_BDB=OFF -DBUILD_BENCH=OFF -DBUILD_FOR_FUZZING=OFF -DBUILD_KERNEL_LIB=OFF -DBUILD_SHARED_LIBS=OFF -DBUILD_TESTS=OFF -DBUILD_TX=OFF -DBUILD_UTIL=OFF -DBUILD_WALLET_TOOL=OFF && cmake --build ./bld-cmake --parallel  $(nproc) && ./bld-cmake/test/functional/test_runner.py`",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31571#issuecomment-2568254664",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31571"
    },
    {
      "event": "commented",
      "id": 2574106418,
      "node_id": "IC_kwDOABII586Zbb8y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2574106418",
      "actor": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-06T23:30:56Z",
      "updated_at": "2025-01-06T23:30:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "I can't reproduce with the provided steps on Ubuntu 22.04 as well. Just tried it on MacOS 14.3 and worked.\r\n\r\n```sh\r\n...\r\nwallet_resendwallettransactions.py --descriptors         | ‚úì Passed  | 3 s\r\nwallet_send.py --descriptors                             | ‚úì Passed  | 16 s\r\nwallet_sendall.py --descriptors                          | ‚úì Passed  | 2 s\r\nwallet_sendmany.py --descriptors                         | ‚úì Passed  | 1 s\r\nwallet_signer.py --descriptors                           | ‚úì Passed  | 3 s\r\nwallet_signmessagewithaddress.py                         | ‚úì Passed  | 1 s\r\nwallet_signrawtransactionwithwallet.py --descriptors     | ‚úì Passed  | 2 s\r\nwallet_simulaterawtx.py --descriptors                    | ‚úì Passed  | 1 s\r\nwallet_spend_unconfirmed.py                              | ‚úì Passed  | 1 s\r\nwallet_startup.py                                        | ‚úì Passed  | 2 s\r\nwallet_taproot.py --descriptors                          | ‚úì Passed  | 14 s\r\nwallet_timelock.py                                       | ‚úì Passed  | 1 s\r\nwallet_transactiontime_rescan.py --descriptors           | ‚úì Passed  | 5 s\r\nwallet_txn_clone.py                                      | ‚úì Passed  | 1 s\r\nwallet_txn_clone.py --mineblock                          | ‚úì Passed  | 4 s\r\nwallet_txn_clone.py --segwit                             | ‚úì Passed  | 1 s\r\nwallet_txn_doublespend.py --descriptors                  | ‚úì Passed  | 1 s\r\nwallet_txn_doublespend.py --mineblock                    | ‚úì Passed  | 3 s\r\n...\r\n```",
      "user": {
        "login": "brunoerg",
        "id": 19480819,
        "node_id": "MDQ6VXNlcjE5NDgwODE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/19480819?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/brunoerg",
        "html_url": "https://github.com/brunoerg",
        "followers_url": "https://api.github.com/users/brunoerg/followers",
        "following_url": "https://api.github.com/users/brunoerg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/brunoerg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/brunoerg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/brunoerg/subscriptions",
        "organizations_url": "https://api.github.com/users/brunoerg/orgs",
        "repos_url": "https://api.github.com/users/brunoerg/repos",
        "events_url": "https://api.github.com/users/brunoerg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/brunoerg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31571#issuecomment-2574106418",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31571"
    }
  ]
}