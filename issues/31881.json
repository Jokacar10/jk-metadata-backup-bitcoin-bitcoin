{
  "type": "issue",
  "issue": {
    "id": 2856107179,
    "node_id": "I_kwDOABII586qPLyr",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31881",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31881/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31881/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31881/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31881",
    "number": 31881,
    "state": "open",
    "state_reason": null,
    "title": "qa: `wallet_importdescriptors` failure \"TypeError: 'bool' object is not subscriptable\"",
    "body": "From https://github.com/bitcoin/bitcoin/actions/runs/13355177559/job/37296904714:\n```\n244/317 - wallet_importdescriptors.py --descriptors failed, Duration: 13 s\n\nstdout:\n2025-02-16T12:59:56.602000Z TestFramework (INFO): PRNG seed is: 3316204795374696824\n2025-02-16T12:59:56.602000Z TestFramework (INFO): Initializing test directory /Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250216_125556/wallet_importdescriptors_99\n2025-02-16T12:59:57.273000Z TestFramework (INFO): Setting up wallets\n2025-02-16T12:59:57.317000Z TestFramework (INFO): Mining coins\n2025-02-16T12:59:58.510000Z TestFramework (INFO): Import should fail if a descriptor is not provided\n2025-02-16T12:59:58.519000Z TestFramework (INFO): Should import a p2pkh descriptor\n2025-02-16T12:59:58.537000Z TestFramework (INFO): Test can import same descriptor with public key twice\n2025-02-16T12:59:58.543000Z TestFramework (INFO): Test can update descriptor label\n2025-02-16T12:59:58.550000Z TestFramework (INFO): Internal addresses cannot have labels\n2025-02-16T12:59:58.552000Z TestFramework (INFO): Internal addresses should be detected as such\n2025-02-16T12:59:58.564000Z TestFramework (INFO): Should not import a p2sh-p2wpkh descriptor without checksum\n2025-02-16T12:59:58.564000Z TestFramework (INFO): Should not import a p2sh-p2wpkh descriptor that has range specified\n2025-02-16T12:59:58.565000Z TestFramework (INFO): Should not import a p2sh-p2wpkh descriptor and have it set to active\n2025-02-16T12:59:58.566000Z TestFramework (INFO): Should import a (non-active) p2sh-p2wpkh descriptor\n2025-02-16T12:59:58.582000Z TestFramework (INFO): Should import a 1-of-2 bare multisig from descriptor\n2025-02-16T12:59:58.584000Z TestFramework (INFO): Should not treat individual keys from the imported bare multisig as watchonly\n2025-02-16T12:59:58.585000Z TestFramework (INFO): Ranged descriptors cannot have labels\n2025-02-16T12:59:58.586000Z TestFramework (INFO): Private keys required for private keys enabled wallet\n2025-02-16T12:59:58.586000Z TestFramework (INFO): Ranged descriptor import should warn without a specified range\n2025-02-16T12:59:58.590000Z TestFramework (INFO): Should not import a ranged descriptor that includes xpriv into a watch-only wallet\n2025-02-16T12:59:58.590000Z TestFramework (INFO): Should not import a descriptor with hardened derivations when private keys are disabled\n2025-02-16T12:59:58.595000Z TestFramework (INFO): Verify we can only extend descriptor's range\n2025-02-16T12:59:58.619000Z TestFramework (INFO): Check we can change descriptor internal flag\n2025-02-16T12:59:58.633000Z TestFramework (INFO): Key ranges should be imported in order\n2025-02-16T12:59:58.665000Z TestFramework (INFO): Check we can change next_index\n2025-02-16T12:59:58.678000Z TestFramework (INFO): Check imported descriptors are not active by default\n2025-02-16T12:59:58.680000Z TestFramework (INFO): Check can activate inactive descriptor\n2025-02-16T12:59:58.683000Z TestFramework (INFO): Check can deactivate active descriptor\n2025-02-16T12:59:58.687000Z TestFramework (INFO): Verify activation state is persistent\n2025-02-16T12:59:58.693000Z TestFramework (INFO): Should import a descriptor with a WIF private key as spendable\n2025-02-16T12:59:58.696000Z TestFramework (INFO): Test can import same descriptor with private key twice\n2025-02-16T12:59:58.713000Z TestFramework (INFO): Test that multisigs can be imported, signed for, and getnewaddress'd\n2025-02-16T13:00:02.944000Z TestFramework (INFO): Multisig with distributed keys\n2025-02-16T13:00:03.441000Z TestFramework (INFO): We can create and use a huge multisig under P2WSH\n2025-02-16T13:00:04.656000Z TestFramework (INFO): Under P2SH, multisig are standard with up to 15 compressed keys\n2025-02-16T13:00:05.714000Z TestFramework (INFO): Amending multisig with new private keys\n2025-02-16T13:00:05.897000Z TestFramework (INFO): Combo descriptors cannot be active\n2025-02-16T13:00:05.897000Z TestFramework (INFO): Descriptors with no type cannot be active\n2025-02-16T13:00:05.900000Z TestFramework (INFO): Test importing a descriptor to an encrypted wallet\n2025-02-16T13:00:09.233000Z TestFramework (ERROR): Assertion failed\nTraceback (most recent call last):\n  File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/wallet_importdescriptors.py\", line 711, in run_test\n    duration = wallet_info[\"scanning\"][\"duration\"]\n               ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^\nTypeError: 'bool' object is not subscriptable\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/Users/runner/work/bitcoin/bitcoin/test/functional/test_framework/test_framework.py\", line 135, in main\n    self.run_test()\n    ~~~~~~~~~~~~~^^\n  File \"/Users/runner/work/bitcoin/bitcoin/ci/scratch/build-aarch64-apple-darwin23.6.0/test/functional/wallet_importdescriptors.py\", line 714, in run_test\n    assert \"scanning\" not in wallet_info\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nAssertionError\n2025-02-16T13:00:09.381000Z TestFramework (INFO): Not stopping nodes as test failed. The dangling processes will be cleaned up later.\n2025-02-16T13:00:09.381000Z TestFramework (WARNING): Not cleaning up dir /Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250216_125556/wallet_importdescriptors_99\n2025-02-16T13:00:09.381000Z TestFramework (ERROR): Test failed. Test logging available at /Users/runner/work/bitcoin/bitcoin/ci/scratch/test_runner/test_runner_‚Çø_üèÉ_20250216_125556/wallet_importdescriptors_99/test_framework.log\n```",
    "user": {
      "login": "hebasto",
      "id": 32963518,
      "node_id": "MDQ6VXNlcjMyOTYzNTE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hebasto",
      "html_url": "https://github.com/hebasto",
      "followers_url": "https://api.github.com/users/hebasto/followers",
      "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
      "organizations_url": "https://api.github.com/users/hebasto/orgs",
      "repos_url": "https://api.github.com/users/hebasto/repos",
      "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hebasto/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      },
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 0,
    "created_at": "2025-02-16T13:36:40Z",
    "updated_at": "2025-02-16T13:36:58Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 16324258492,
      "node_id": "LE_lADOABII586qPLyrzwAAAAPNAGq8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16324258492",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-16T13:36:58Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "labeled",
      "id": 16324258493,
      "node_id": "LE_lADOABII586qPLyrzwAAAAPNAGq9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16324258493",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-16T13:36:58Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    }
  ]
}