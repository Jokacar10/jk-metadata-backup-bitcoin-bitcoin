{
  "type": "issue",
  "issue": {
    "id": 3218140007,
    "node_id": "I_kwDOABII586_0Otn",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32931",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32931/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32931/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32931/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/32931",
    "number": 32931,
    "state": "open",
    "state_reason": null,
    "title": "guix: Zip file non-determinism when building in WSL",
    "body": "In debugging #32923, I found that while it is possible to do a guix build in WSL on a aarch64 machine, the resulting zip files did not match the build on x86_64. The binaries within the zip files matched, and it appears the non-determinism comes from zip including the file permissions. This is presumably because the WSL build occurs on a NTFS drive which handles file permissions differently from other unix file systems.\n\nDiffoscope output:\n```diff\n--- x86_64-zipinfo\t2025-07-09 23:52:39.650231781 -0700\n+++ aarch64-zipinfo\t2025-07-09 23:52:45.010145329 -0700\n@@ -1,27 +1,27 @@\n-Archive:  ../../../guix-build-ea5d2bb98598/output/x86_64-w64-mingw32/bitcoin-ea5d2bb98598-win64-unsigned.zip\n+Archive:  bitcoin-ea5d2bb98598-win64-unsigned.zip\n Zip file size: 45922845 bytes, number of entries: 24\n-drwxr-xr-x  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/\n-drwxr-xr-x  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/\n--rwxr-xr-x  3.0 unx  2235411 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-cli.exe\n--rwxr-xr-x  3.0 unx 40257059 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-qt.exe\n--rwxr-xr-x  3.0 unx  4107283 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-tx.exe\n--rwxr-xr-x  3.0 unx  1935891 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-util.exe\n--rwxr-xr-x  3.0 unx  8202259 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-wallet.exe\n--rwxr-xr-x  3.0 unx  1216019 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin.exe\n--rwxr-xr-x  3.0 unx 14261779 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoind.exe\n--rwxr-xr-x  3.0 unx 25802259 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/test_bitcoin.exe\n--rw-r--r--  3.0 unx      126 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bitcoin.conf\n--rw-r--r--  3.0 unx      846 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/readme.txt\n-drwxr-xr-x  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/\n-drwxr-xr-x  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/\n-drwxr-xr-x  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/\n--rw-r--r--  3.0 unx      214 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-cli.1\n--rw-r--r--  3.0 unx      211 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-qt.1\n--rw-r--r--  3.0 unx      211 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-tx.1\n--rw-r--r--  3.0 unx      217 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-util.1\n--rw-r--r--  3.0 unx      223 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-wallet.1\n--rw-r--r--  3.0 unx      205 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoind.1\n-drwxr-xr-x  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/rpcauth/\n--rw-r--r--  3.0 unx      453 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/rpcauth/README.md\n--rwxr-xr-x  3.0 unx     1764 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/rpcauth/rpcauth.py\n+drwxrwxrwx  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/\n+drwxrwxrwx  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/\n+-rwxrwxrwx  3.0 unx  2235411 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-cli.exe\n+-rwxrwxrwx  3.0 unx 40257059 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-qt.exe\n+-rwxrwxrwx  3.0 unx  4107283 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-tx.exe\n+-rwxrwxrwx  3.0 unx  1935891 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-util.exe\n+-rwxrwxrwx  3.0 unx  8202259 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin-wallet.exe\n+-rwxrwxrwx  3.0 unx  1216019 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoin.exe\n+-rwxrwxrwx  3.0 unx 14261779 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/bitcoind.exe\n+-rwxrwxrwx  3.0 unx 25802259 b- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bin/test_bitcoin.exe\n+-rwxrwxrwx  3.0 unx      126 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/bitcoin.conf\n+-rwxrwxrwx  3.0 unx      846 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/readme.txt\n+drwxrwxrwx  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/\n+drwxrwxrwx  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/\n+drwxrwxrwx  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/\n+-rwxrwxrwx  3.0 unx      214 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-cli.1\n+-rwxrwxrwx  3.0 unx      211 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-qt.1\n+-rwxrwxrwx  3.0 unx      211 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-tx.1\n+-rwxrwxrwx  3.0 unx      217 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-util.1\n+-rwxrwxrwx  3.0 unx      223 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoin-wallet.1\n+-rwxrwxrwx  3.0 unx      205 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/man/man1/bitcoind.1\n+drwxrwxrwx  3.0 unx        0 b- stor 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/rpcauth/\n+-rwxrwxrwx  3.0 unx      453 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/rpcauth/README.md\n+-rwxrwxrwx  3.0 unx     1764 t- defN 25-Jul-10 05:44 bitcoin-ea5d2bb98598/share/rpcauth/rpcauth.py\n```",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 61889416,
        "node_id": "MDU6TGFiZWw2MTg4OTQxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Build%20system",
        "name": "Build system",
        "color": "5319e7",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 0,
    "created_at": "2025-07-10T06:53:43Z",
    "updated_at": "2025-07-10T10:20:59Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 18562719784,
      "node_id": "LE_lADOABII586_0OtnzwAAAARSbKAo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18562719784",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-10T10:20:49Z",
      "label": {
        "name": "Build system",
        "color": "5319e7"
      }
    },
    {
      "event": "labeled",
      "id": 18562721691,
      "node_id": "LE_lADOABII586_0OtnzwAAAARSbKeb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18562721691",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-10T10:20:55Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    },
    {
      "event": "unlabeled",
      "id": 18562723296,
      "node_id": "UNLE_lADOABII586_0OtnzwAAAARSbK3g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18562723296",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-10T10:20:59Z",
      "label": {
        "name": "Windows",
        "color": "884400"
      }
    }
  ]
}