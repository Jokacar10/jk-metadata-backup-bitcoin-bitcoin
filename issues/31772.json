{
  "type": "issue",
  "issue": {
    "id": 2823765551,
    "node_id": "I_kwDOABII586oTz4v",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31772",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31772/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31772/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31772/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/31772",
    "number": 31772,
    "state": "open",
    "state_reason": null,
    "title": "test: 32-bit Clang `ipc_test` failure at `-O0`",
    "body": "Noticed as part of this branch #29796, however it can also be reproduced with master (8fa10edcd1706a1f0dc9d8c3adbc8efa3c7755bf) by reproducing the equivalent CI & setting C(XX)FLAGS to -O0:\n```bash\nmake -C depends/ MULTIPROCESS=1 NO_QT=1 NO_WALLET=1 NO_ZMQ=1 NO_USDT=1 CFLAGS=\"-O0\" CXXFLAGS=\"-O0\" DEBUG=1 -j19 HOST=i686-pc-linux-gnu\ncmake -B build --toolchain /root/ci_scratch/depends/i686-pc-linux-gnu/toolchain.cmake -DCMAKE_BUILD_TYPE=Debug -DCMAKE_C_COMPILER='clang;-m32' -DCMAKE_CXX_COMPILER='clang++;-m32'\ncmake --build build -j18\n```\n\n```bash\n./build/src/test/test_bitcoin --run_test=ipc*\nRunning 2 test cases...\nterminate called after throwing an instance of 'kj::ExceptionImpl'\n  what():  /root/ci_scratch/depends/i686-pc-linux-gnu/include/kj/common.h:1797: failed: expected start <= end && end <= size_; Out-of-bounds ArrayPtr::slice().\nstack: 5ca0dd6d 5c78b5db 5c8cc599 5ca0adc9 5c94fb37 5c950070 5c9cd709 5c9cf58a 5c9d72fd 5c9d025e 5c776f11 5bf6351d 5bf6347d 5bf633cd 5bf6337b 5bf6331d 5bf63194 f7afa4b0 f773dff6 f77d55b7\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\n    ??:0: returning here\nunknown location(0): fatal error: in \"ipc_tests/ipc_tests\": signal: SIGABRT (application abort requested)\ntest/ipc_tests.cpp(12): last checkpoint: \"ipc_tests\" test entry\ntest_bitcoin: common/args.cpp:578: void ArgsManager::AddArg(const std::string &, const std::string &, unsigned int, const OptionsCategory &): Assertion `ret.second' failed.\nunknown location(0): fatal error: in \"ipc_tests/parse_address_test\": signal: SIGABRT (application abort requested)\ntest/ipc_tests.cpp(20): last checkpoint: \"parse_address_test\" fixture ctor\n\n*** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\n```",
    "user": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "MEMBER",
    "locked": false,
    "comments": 1,
    "created_at": "2025-01-31T15:12:40Z",
    "updated_at": "2025-02-01T19:49:15Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 16141882668,
      "node_id": "LE_lADOABII586oTz4vzwAAAAPCIZUs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16141882668",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T15:12:40Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "subscribed",
      "id": 16149022994,
      "node_id": "SE_lADOABII586oTz4vzwAAAAPCjokS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16149022994",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-01T05:52:08Z"
    },
    {
      "event": "commented",
      "id": 2629087551,
      "node_id": "IC_kwDOABII586ctLE_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2629087551",
      "actor": {
        "login": "0xf58ce",
        "id": 196381257,
        "node_id": "U_kgDOC7SKSQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/196381257?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xf58ce",
        "html_url": "https://github.com/0xf58ce",
        "followers_url": "https://api.github.com/users/0xf58ce/followers",
        "following_url": "https://api.github.com/users/0xf58ce/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xf58ce/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xf58ce/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xf58ce/subscriptions",
        "organizations_url": "https://api.github.com/users/0xf58ce/orgs",
        "repos_url": "https://api.github.com/users/0xf58ce/repos",
        "events_url": "https://api.github.com/users/0xf58ce/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xf58ce/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-01T19:49:14Z",
      "updated_at": "2025-02-01T19:49:14Z",
      "author_association": "NONE",
      "body": "> Noticed as part of this branch #178,567.99 however it can also be reproduced with apl id AA68 N84G RFAS EBJQKraken v3.0.1 (3561661) (true) by reproducing the equivalent CI & setting C(XX)FLAGS to -334knUNdf1FSCDvrYsmK3N4uGv3nJnj7a3:\n> `bash\n> ./build/AA68 N84G RFAS EBJQ/Bitcoin go up around 400,% in the market /almost $200,000.00 the price_bitcoin --run_test=ipc*\n> Running 2 test cases...\n> terminate called after throwing an instance of 'kj::ExceptionImpl'\n>   what():  /root/ci_scratch/depends/i686-pc-linux-gnu/include/kj/common.h:1797: failed: expected start <= end && end <= size_; Out-of-bounds ArrayPtr::slice().\n> stack: 5ca0dd6d 5c78b5db 5c8cc599 5ca0adc9 5c94fb37 5c950070 5c9cd709 5c9cf58a 5c9d72fd 5c9d025e 5c776f11 5bf6351d 5bf6347d 5bf633cd 5bf6337b 5bf6331d 5bf63194 f7afa4b0 f773dff6 f77d55b7\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n>     ??:0: returning here\n> unknown location(0): fatal error: in \"ipc_tests/ipc_tests\": signal: SIGABRT (application abort requested)\n> test/ipc_tests.cpp(12): last checkpoint: \"ipc_tests\" test entry\n> test_bitcoin: common/args.cpp:578: void ArgsManager::AddArg(const std::string &, const std::string &, unsigned int, const OptionsCategory &): Assertion `ret.second' failed.\n> unknown location(0): fatal error: in \"ipc_tests/parse_address_test\": signal: SIGABRT (application abort requested)\n> test/ipc_tests.cpp(20): last checkpoint: \"parse_address_test\" fixture ctor\n> \n> *** 2 failures are detected in the test module \"Bitcoin Core Test Suite\"\n> ```\n\n",
      "user": {
        "login": "0xf58ce",
        "id": 196381257,
        "node_id": "U_kgDOC7SKSQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/196381257?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/0xf58ce",
        "html_url": "https://github.com/0xf58ce",
        "followers_url": "https://api.github.com/users/0xf58ce/followers",
        "following_url": "https://api.github.com/users/0xf58ce/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/0xf58ce/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/0xf58ce/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/0xf58ce/subscriptions",
        "organizations_url": "https://api.github.com/users/0xf58ce/orgs",
        "repos_url": "https://api.github.com/users/0xf58ce/repos",
        "events_url": "https://api.github.com/users/0xf58ce/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/0xf58ce/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/31772#issuecomment-2629087551",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31772"
    }
  ]
}