{
  "type": "issue",
  "issue": {
    "id": 2941564583,
    "node_id": "I_kwDOABII586vVLan",
    "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126",
    "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
    "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126/comments",
    "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126/events",
    "html_url": "https://github.com/bitcoin/bitcoin/issues/32126",
    "number": 32126,
    "state": "closed",
    "state_reason": "completed",
    "title": "Restarting Development on BIP-199",
    "body": "### Please describe the feature you'd like to see added.\n\nHi, I'd like to restart development on BIP-199: https://en.bitcoin.it/wiki/BIP_0199\n\nIt was previously started as [PR #7601](https://github.com/bitcoin/bitcoin/pull/7601) which was then abandoned. \n\nIs there any interest in getting this implemented? If so, I can start a PR and begin contributing. \n\n### Is your feature related to a problem, if so please describe it.\n\nBIP-199 was never fully implemented in Bitcoin Core. \n\n### Describe the solution you'd like\n\nI'd like to use pay-to-public key addresses to implement the feature so that the full script is on-chain. Otherwise, we would run into the problem of how to store the script, which contains refund and redeem addresses + a hash that would need to be stored on disk somewhere.  \n\n### Describe any alternatives you've considered\n\nUsing Segwit witness scripts to generate the HTLC. I believe this would be the an inferior implementation because the full script would then have to be stored on disk. Loss of this data would lead to loss of ability for the refunder to claim a refund of the contract. \n\n### Please leave any additional context\n\nI am the author of the NPM library for BIP-199: ( https://www.npmjs.com/package/bip-199 ), so I have some experience with this feature. \n",
    "user": {
      "login": "k26dr",
      "id": 7109698,
      "node_id": "MDQ6VXNlcjcxMDk2OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k26dr",
      "html_url": "https://github.com/k26dr",
      "followers_url": "https://api.github.com/users/k26dr/followers",
      "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
      "organizations_url": "https://api.github.com/users/k26dr/orgs",
      "repos_url": "https://api.github.com/users/k26dr/repos",
      "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/k26dr/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "labels": [
      {
        "id": 64583,
        "node_id": "MDU6TGFiZWw2NDU4Mw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Feature",
        "name": "Feature",
        "color": "7cf575",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "NONE",
    "locked": false,
    "comments": 8,
    "closed_at": "2025-03-23T22:40:17Z",
    "closed_by": {
      "login": "k26dr",
      "id": 7109698,
      "node_id": "MDQ6VXNlcjcxMDk2OTg=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/k26dr",
      "html_url": "https://github.com/k26dr",
      "followers_url": "https://api.github.com/users/k26dr/followers",
      "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
      "organizations_url": "https://api.github.com/users/k26dr/orgs",
      "repos_url": "https://api.github.com/users/k26dr/repos",
      "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/k26dr/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "created_at": "2025-03-23T22:04:21Z",
    "updated_at": "2025-03-23T22:40:18Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 16946143656,
      "node_id": "LE_lADOABII586vVLanzwAAAAPyEaGo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16946143656",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:04:21Z",
      "label": {
        "name": "Feature",
        "color": "7cf575"
      }
    },
    {
      "event": "commented",
      "id": 2746507262,
      "node_id": "IC_kwDOABII586jtF_-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746507262",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:10:55Z",
      "updated_at": "2025-03-23T22:14:17Z",
      "author_association": "MEMBER",
      "body": "> I'd like to use pay-to-public key addresses to implement the feature so that the full script is on-chain.\n\nIf it's a pay-to-pubkey address, it's not an HTLC policy.\n\n>  Otherwise, we would run into the problem of how to store the script, which contains refund and redeem addresses + a hash that would need to be stored on disk somewhere.\n\nThis is inevitable for any realistic protocol. Even BIP199 and #7601 used P2SH, which prevented the script from being on-chain before spending.\n\n\n",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746507262",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "commented",
      "id": 2746510169,
      "node_id": "IC_kwDOABII586jtGtZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746510169",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:18:16Z",
      "updated_at": "2025-03-23T22:18:25Z",
      "author_association": "NONE",
      "body": "Pay-to-public key would just stick the script on-chain, no? @sipa ",
      "user": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746510169",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "mentioned",
      "id": 16946216400,
      "node_id": "MEE_lADOABII586vVLanzwAAAAPyEr3Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16946216400",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:18:18Z"
    },
    {
      "event": "subscribed",
      "id": 16946216401,
      "node_id": "SE_lADOABII586vVLanzwAAAAPyEr3R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16946216401",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:18:18Z"
    },
    {
      "event": "commented",
      "id": 2746510364,
      "node_id": "IC_kwDOABII586jtGwc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746510364",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:18:49Z",
      "updated_at": "2025-03-23T22:18:49Z",
      "author_association": "MEMBER",
      "body": "Well, yes, but it would be a pay-to-pubkey script, not an HTLC script?",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746510364",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "commented",
      "id": 2746511168,
      "node_id": "IC_kwDOABII586jtG9A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746511168",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:21:06Z",
      "updated_at": "2025-03-23T22:21:45Z",
      "author_association": "NONE",
      "body": "As I understand it, this is an HTLC script: \n\n```\n OP_IF\n     [HASHOP] <digest> OP_EQUALVERIFY OP_DUP OP_HASH160 <seller pubkey hash>            \n OP_ELSE\n     <num> [TIMEOUTOP] OP_DROP OP_DUP OP_HASH160 <buyer pubkey hash>\n OP_ENDIF\n OP_EQUALVERIFY\n OP_CHECKSIG\n```\n\nand if this was put on-chain as a pay-to-pubkey script it would still work without breaking consensus. \n\nIf this is true, I'm cool with that. @sipa ",
      "user": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746511168",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "mentioned",
      "id": 16946226300,
      "node_id": "MEE_lADOABII586vVLanzwAAAAPyEuR8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16946226300",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:22:05Z"
    },
    {
      "event": "subscribed",
      "id": 16946226308,
      "node_id": "SE_lADOABII586vVLanzwAAAAPyEuSE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16946226308",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:22:05Z"
    },
    {
      "event": "commented",
      "id": 2746512093,
      "node_id": "IC_kwDOABII586jtHLd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746512093",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:23:31Z",
      "updated_at": "2025-03-23T22:23:31Z",
      "author_association": "NONE",
      "body": "If P2WSH is the preferred implementation, I'm cool with that too. I'm just trying to understand why pay-to-pubkey script would be an issue. ",
      "user": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746512093",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "commented",
      "id": 2746513255,
      "node_id": "IC_kwDOABII586jtHdn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746513255",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:26:17Z",
      "updated_at": "2025-03-23T22:26:17Z",
      "author_association": "NONE",
      "body": "The NPM implementation uses P2WSH, so I'm not unfamiliar with that methodology. I just ran into the issue that if you lose the witness script, you lose the ability to claim the HTLC.  ",
      "user": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746513255",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "commented",
      "id": 2746517066,
      "node_id": "IC_kwDOABII586jtIZK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746517066",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:35:46Z",
      "updated_at": "2025-03-23T22:39:24Z",
      "author_association": "MEMBER",
      "body": "\"Pay to pubkey\" (P2PK) means a `<pubkey> OP_CHECKSIG` script, nothing else. I think what you mean is what I'd call a \"bare HTLC script\", i.e., putting the script you give above directly in the `scriptPubKey`?\n\nTerminology aside, this is problematic for several reasons:\n* There exist no addresses for HTLC scripts (BIP199 or otherwise), you'd need to introduce a new address format for this to work or nobody can send to it. Previous experience shows that this is a multi-year process, at least (even the BIP350 address format introduced in 2020, for taproot which activated in 2021, is not universally [accepted](https://whentaproot.org/)). FWIW, there is no address for P2PK either.\n* An address for such scripts would need to be enormous (storing at least 3 hashes, plus a timeout value). My rough guess is ~166 characters for a base32-style address like BIP173/BIP350?\n* Using such scripts is non-standard. Even ignoring that senders cannot use them, transactions paying to them just won't relay across the network. This can be changed of course, but that again is a slow process.\n* It's expensive for senders. Since they need to put the full script in the crediting transaction, they need to pay for the on-chain bytes that consumes. For this reason, basically nothing non-trivial has used bare scripts (besides P2PK and P2PKH), moving to P2SH, P2WSH, or P2TR instead, which move this cost to the receiver - the one who cares about the properties of complex script in the first place - by revealing it at spending time. With P2TR, the script can even be broken up into multiple branches, so that only the used one needs to be revealed and paid for.\n\nIn real applications where HTLCs are used (like Lightning), I believe the problem with data storage is (partially) addressed by deriving the keys/preimages deterministically, though I'm not an expert on this.\n\nIn any case, for P2WSH or P2TR, there is no need for any of this. With the introduction of miniscript descriptors ([BIP 387](https://github.com/bitcoin/bips/blob/master/bip-0387.mediawiki)), Bitcoin Core should be able to sign for any of these scripts already.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746517066",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "commented",
      "id": 2746518848,
      "node_id": "IC_kwDOABII586jtI1A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2746518848",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:40:16Z",
      "updated_at": "2025-03-23T22:40:16Z",
      "author_association": "NONE",
      "body": "Ok fair enough. If a future BIP takes care of this, I'll close the issue. Thanks for the explanation. ",
      "user": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/issues/32126#issuecomment-2746518848",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32126"
    },
    {
      "event": "closed",
      "id": 16946274489,
      "node_id": "CE_lADOABII586vVLanzwAAAAPyE6C5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16946274489",
      "actor": {
        "login": "k26dr",
        "id": 7109698,
        "node_id": "MDQ6VXNlcjcxMDk2OTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7109698?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/k26dr",
        "html_url": "https://github.com/k26dr",
        "followers_url": "https://api.github.com/users/k26dr/followers",
        "following_url": "https://api.github.com/users/k26dr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/k26dr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/k26dr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/k26dr/subscriptions",
        "organizations_url": "https://api.github.com/users/k26dr/orgs",
        "repos_url": "https://api.github.com/users/k26dr/repos",
        "events_url": "https://api.github.com/users/k26dr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/k26dr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-23T22:40:17Z"
    }
  ]
}