{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423",
    "id": 2839326033,
    "node_id": "PR_kwDOABII586pPK1R",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33423",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33423.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33423.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/93511bdca5566a0de282790daacc901af105ddf3",
    "number": 33423,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "qa: Improvements to debug_assert_log + busy_wait_for_debug_log",
    "user": {
      "login": "hodlinator",
      "id": 172445034,
      "node_id": "U_kgDOCkdNag",
      "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hodlinator",
      "html_url": "https://github.com/hodlinator",
      "followers_url": "https://api.github.com/users/hodlinator/followers",
      "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
      "organizations_url": "https://api.github.com/users/hodlinator/orgs",
      "repos_url": "https://api.github.com/users/hodlinator/repos",
      "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/hodlinator/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "* Only compute the log string to be printed on failure *when we actually fail* instead of every 0.05s.\r\n* As we find each needle (expected message) in the haystack (log output), stop searching for it. If we fail and time out, we will only complain about the needles (expected messages) we didn't find.\r\n\r\nFound while developing a new test case in https://github.com/bitcoin/bitcoin/pull/33336#discussion_r2351892330",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-09-18T08:39:52Z",
    "updated_at": "2025-09-19T14:09:15Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "feccc9dca8cf51f70448d246384c19b92af24181",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "hodlinator:2025/09/assert_debug_log",
      "ref": "2025/09/assert_debug_log",
      "sha": "93511bdca5566a0de282790daacc901af105ddf3",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 813856282,
        "node_id": "R_kgDOMIJ2Gg",
        "name": "bitcoin",
        "full_name": "hodlinator/bitcoin",
        "owner": {
          "login": "hodlinator",
          "id": 172445034,
          "node_id": "U_kgDOCkdNag",
          "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/hodlinator",
          "html_url": "https://github.com/hodlinator",
          "followers_url": "https://api.github.com/users/hodlinator/followers",
          "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
          "organizations_url": "https://api.github.com/users/hodlinator/orgs",
          "repos_url": "https://api.github.com/users/hodlinator/repos",
          "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/hodlinator/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/hodlinator/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/hodlinator/bitcoin",
        "archive_url": "https://api.github.com/repos/hodlinator/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/hodlinator/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/hodlinator/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/hodlinator/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/hodlinator/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/hodlinator/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/hodlinator/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/hodlinator/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/hodlinator/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/hodlinator/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/hodlinator/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/hodlinator/bitcoin/events",
        "forks_url": "https://api.github.com/repos/hodlinator/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/hodlinator/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/hodlinator/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/hodlinator/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/hodlinator/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/hodlinator/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/hodlinator/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/hodlinator/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/hodlinator/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/hodlinator/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/hodlinator/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/hodlinator/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/hodlinator/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/hodlinator/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/hodlinator/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:hodlinator/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/hodlinator/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/hodlinator/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/hodlinator/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/hodlinator/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/hodlinator/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/hodlinator/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/hodlinator/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/hodlinator/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/hodlinator/bitcoin/hooks",
        "svn_url": "https://github.com/hodlinator/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 251543,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-19T14:42:21Z",
        "created_at": "2024-06-11T22:00:51Z",
        "updated_at": "2025-09-09T13:03:15Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "1444ed855f438f1270104fca259ce61b99ed5cdb",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37808,
        "stargazers_count": 85573,
        "watchers_count": 85573,
        "size": 293788,
        "default_branch": "master",
        "open_issues_count": 802,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-09-19T09:54:05Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-09-19T14:52:36Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 23,
    "deletions": 15,
    "changed_files": 1,
    "commits": 2,
    "review_comments": 9,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjYjNlOWE2NjBjNjA0YzliMzU1OWIxZGFhMDAyMzU4ZDY2YzczYzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "tree": {
        "sha": "b4fb2220ebe7c44bc03868a8500220dfab187899",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b4fb2220ebe7c44bc03868a8500220dfab187899"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b4fb2220ebe7c44bc03868a8500220dfab187899\nparent 947bed28fe62cd6c27baace5ae7c2b6955ee6379\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758184107 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758184107 +0200\n\nrefactor(qa): Avoid unnecessary string operations\n\nprint_log was recalculated every 0.05s, even during successful circumstances - changed to only be computed when needed.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQGwWZpOrMR+LCQ/rDcIVHTTphCe9+kGoXp2jecdVDrnvyfKJ5iLSgN5KnsboApTwPu\nThzD7p24sZqfz5ZVcNmAw=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/947bed28fe62cd6c27baace5ae7c2b6955ee6379",
          "sha": "947bed28fe62cd6c27baace5ae7c2b6955ee6379",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/947bed28fe62cd6c27baace5ae7c2b6955ee6379"
        }
      ],
      "message": "refactor(qa): Avoid unnecessary string operations\n\nprint_log was recalculated every 0.05s, even during successful circumstances - changed to only be computed when needed.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-18T08:28:27Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-18T08:28:27Z"
      },
      "sha": "acb3e9a660c604c9b3559b1daa002358d66c73c2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkzNTExYmRjYTU1NjZhMGRlMjgyNzkwZGFhY2M5MDFhZjEwNWRkZjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/93511bdca5566a0de282790daacc901af105ddf3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/93511bdca5566a0de282790daacc901af105ddf3",
      "tree": {
        "sha": "77a395c209329e0c870da83e38994734c85d019c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/77a395c209329e0c870da83e38994734c85d019c"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 77a395c209329e0c870da83e38994734c85d019c\nparent acb3e9a660c604c9b3559b1daa002358d66c73c2\nauthor Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758184193 +0200\ncommitter Hodlinator <172445034+hodlinator@users.noreply.github.com> 1758184193 +0200\n\nqa: Only complain about expected messages that were not found\n\nAvoids repeatedly searching for messages we have already found. Also only leaves messages we never found in the final assert message of the functions, which is more helpful.\n",
        "signature": "-----BEGIN SSH SIGNATURE-----\nU1NIU0lHAAAAAQAAADMAAAALc3NoLWVkMjU1MTkAAAAg39Hzirivn9mM3G8qwAOGOKsmHT\ny2f/O2iDRQI8UxEyoAAAADZ2l0AAAAAAAAAAZzaGE1MTIAAABTAAAAC3NzaC1lZDI1NTE5\nAAAAQD3W/+55Xedb16fafH7bghzCZkMJNiKXiD8Ld/ZglS1qrtz9Rm1wfwNnSlAuEqw0zo\nwxN6BkK23CtTlFic7OiwM=\n-----END SSH SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/acb3e9a660c604c9b3559b1daa002358d66c73c2",
          "sha": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/acb3e9a660c604c9b3559b1daa002358d66c73c2"
        }
      ],
      "message": "qa: Only complain about expected messages that were not found\n\nAvoids repeatedly searching for messages we have already found. Also only leaves messages we never found in the final assert message of the functions, which is more helpful.",
      "committer": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-18T08:29:53Z"
      },
      "author": {
        "name": "Hodlinator",
        "email": "172445034+hodlinator@users.noreply.github.com",
        "date": "2025-09-18T08:29:53Z"
      },
      "sha": "93511bdca5566a0de282790daacc901af105ddf3"
    },
    {
      "event": "labeled",
      "id": 19769237137,
      "node_id": "LE_lADOABII587MZ2uEzwAAAASaVp6R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19769237137",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-18T08:39:55Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "commented",
      "id": 3306273916,
      "node_id": "IC_kwDOABII587FEbx8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3306273916",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-09-18T08:39:57Z",
      "updated_at": "2025-09-18T08:40:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33423.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#issuecomment-3306273916",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33423"
    },
    {
      "event": "reviewed",
      "id": 3241292554,
      "node_id": "PRR_kwDOABII587BMjMK",
      "url": null,
      "actor": null,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-09-19T00:39:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for reducing useless work - did you measure any speedup?\r\nI think we could make the result simpler and more pythonic - it's a test, I find visibly simpler code better here than theoretically faster one that we can't even measure, so I suggested a few changes.\r\nHere's the end-result containing most of my suggestions:\r\n```patch\r\ndiff --git a/test/functional/test_framework/test_node.py b/test/functional/test_framework/test_node.py\r\nindex e28140c17b..ccbde4702c 100755\r\n--- a/test/functional/test_framework/test_node.py\r\n+++ b/test/functional/test_framework/test_node.py\r\n@@ -550,32 +550,31 @@ class TestNode():\r\n         time_end = time.time() + timeout * self.timeout_factor\r\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\r\n \r\n-        def print_log(log):\r\n-            return \" - \" + \"\\n - \".join(log.splitlines())\r\n-\r\n         yield\r\n \r\n+        def join_lines(logs):\r\n+            return \" - \" + \"\\n - \".join(logs.splitlines())\r\n+\r\n+        remaining = list(expected_msgs)\r\n         while True:\r\n-            found = []\r\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\r\n                 dl.seek(prev_size)\r\n                 log = dl.read()\r\n+\r\n             for unexpected_msg in unexpected_msgs:\r\n-                if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\r\n-                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\r\n-            for i, expected_msg in enumerate(expected_msgs):\r\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\r\n-                    found.append(i)\r\n+                if unexpected_msg in log:\r\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{join_lines(log)}\\n\\n')\r\n+\r\n+            found = {i for i, m in enumerate(remaining) if m in log}\r\n             # We found remaining expected messages before encountering unexpected messages.\r\n-            if len(found) == len(expected_msgs):\r\n+            if len(found) == len(remaining):\r\n                 return\r\n             # Remove the ones we found so far, so we only complain about remaining ones when timing out.\r\n-            for f in reversed(found):\r\n-                expected_msgs.pop(f)\r\n+            remaining = [m for m in remaining if m not in found]\r\n             if time.time() >= time_end:\r\n                 break\r\n             time.sleep(0.05)\r\n-        self._raise_assertion_error(f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log(log)}\\n\\n')\r\n+        self._raise_assertion_error(f'Expected message(s) {remaining!r} not found in log:\\n\\n{join_lines(log)}\\n\\n')\r\n \r\n     @contextlib.contextmanager\r\n     def busy_wait_for_debug_log(self, expected_msgs, timeout=60):\r\n@@ -589,21 +588,16 @@ class TestNode():\r\n \r\n         yield\r\n \r\n+        remaining = list(expected_msgs)\r\n         while True:\r\n-            found = []\r\n             with open(self.debug_log_path, \"rb\") as dl:\r\n                 dl.seek(prev_size)\r\n                 log = dl.read()\r\n \r\n-            for i, expected_msg in enumerate(expected_msgs):\r\n-                if expected_msg in log:\r\n-                    found.append(i)\r\n-\r\n-            if len(found) == len(expected_msgs):\r\n+            found = {i for i, m in enumerate(remaining) if m in log}\r\n+            if len(found) == len(remaining):\r\n                 return\r\n-\r\n-            for f in reversed(found):\r\n-                expected_msgs.pop(f)\r\n+            remaining = [m for m in remaining if m not in found]\r\n \r\n             if time.time() >= time_end:\r\n                 print_log = \" - \" + \"\\n - \".join(log.decode(\"utf8\", errors=\"replace\").splitlines())\r\n@@ -612,8 +606,7 @@ class TestNode():\r\n             # No sleep here because we want to detect the message fragment as fast as\r\n             # possible.\r\n \r\n-        self._raise_assertion_error(\r\n-            f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log}\\n\\n')\r\n+        self._raise_assertion_error(f'Expected message(s) {remaining!r} not found in log:\\n\\n{print_log}\\n\\n')\r\n \r\n     @contextlib.contextmanager\r\n     def wait_for_new_peer(self, timeout=5):\r\n```",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#pullrequestreview-3241292554",
      "submitted_at": "2025-09-19T00:39:55Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360549564",
      "pull_request_review_id": 3241292554,
      "id": 2360549564,
      "node_id": "PRRC_kwDOABII586MsyC8",
      "diff_hunk": "@@ -569,7 +571,7 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n             if time.time() >= time_end:\n                 break\n             time.sleep(0.05)\n-        self._raise_assertion_error('Expected messages \"{}\" does not partially match log:\\n\\n{}\\n\\n'.format(str(expected_msgs), print_log))\n+        self._raise_assertion_error(f'Expected message(s) {expected_msgs!s} not found in log:\\n\\n{print_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 37,
      "original_position": 27,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "this was weird before, it logged `print_log` which was created in different scope. Having `log` here is still weird, but I guess Python is weird.\r\n\r\nnit: based on the docs, [`!r`](https://docs.python.org/3/library/functions.html#repr) might be more appropriate here:\r\n```suggestion\r\n        self._raise_assertion_error(f'Expected message(s) {expected_msgs!r} not found in log:\\n\\n{print_log(log)}\\n\\n')\r\n```",
      "created_at": "2025-09-18T17:59:51Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2360549564",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360549564"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 578,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360551867",
      "pull_request_review_id": 3241292554,
      "id": 2360551867,
      "node_id": "PRRC_kwDOABII586Msym7",
      "diff_hunk": "@@ -550,17 +550,19 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def print_log(log):\n+            return \" - \" + \"\\n - \".join(log.splitlines())\n+\n         yield\n \n         while True:\n             found = True\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n-            print_log = \" - \" + \"\\n - \".join(log.splitlines())\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n-                    self._raise_assertion_error('Unexpected message \"{}\" partially matches log:\\n\\n{}\\n\\n'.format(unexpected_msg, print_log))\n+                    self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')",
      "path": "test/functional/test_framework/test_node.py",
      "position": 23,
      "original_position": 18,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: you could mention the reason for changing the texts as well in the commit message",
      "created_at": "2025-09-18T18:00:28Z",
      "updated_at": "2025-09-19T00:40:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2360551867",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2360551867"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 565,
      "original_line": 565,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361373085",
      "pull_request_review_id": 3241292554,
      "id": 2361373085,
      "node_id": "PRRC_kwDOABII586Mv7Gd",
      "diff_hunk": "@@ -550,17 +550,19 @@ def assert_debug_log(self, expected_msgs, unexpected_msgs=None, timeout=2):\n         time_end = time.time() + timeout * self.timeout_factor\n         prev_size = self.debug_log_size(encoding=\"utf-8\")  # Must use same encoding that is used to read() below\n \n+        def print_log(log):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "acb3e9a660c604c9b3559b1daa002358d66c73c2",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: `print_log` and `log` are both used in the vicinity, if you retouch again, consider different names\r\nnit2: any reason for putting this before the yield?",
      "created_at": "2025-09-18T23:26:02Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361373085",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361373085"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 553,
      "original_line": 553,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361375488",
      "pull_request_review_id": 3241292554,
      "id": 2361375488,
      "node_id": "PRRC_kwDOABII586Mv7sA",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n                     self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\n+                    found.append(i)\n+            # We found remaining expected messages before encountering unexpected messages.\n+            if len(found) == len(expected_msgs):\n                 return\n+            # Remove the ones we found so far, so we only complain about remaining ones when timing out.\n+            for f in reversed(found):\n+                expected_msgs.pop(f)",
      "path": "test/functional/test_framework/test_node.py",
      "position": 24,
      "original_position": 24,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "can we do this without mutating the input arg?\r\n```python\r\nremaining = list(expected_msgs)\r\n...\r\nremaining = [m for m in remaining if m not in found]\r\n```",
      "created_at": "2025-09-18T23:28:43Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361375488",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361375488"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 574,
      "original_line": 574,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380779",
      "pull_request_review_id": 3241292554,
      "id": 2361380779,
      "node_id": "PRRC_kwDOABII586Mv8-r",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, encoding=\"utf-8\", errors=\"replace\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n             for unexpected_msg in unexpected_msgs:\n                 if re.search(re.escape(unexpected_msg), log, flags=re.MULTILINE):\n                     self._raise_assertion_error(f'Unexpected message \"{unexpected_msg}\" found in log:\\n\\n{print_log(log)}\\n\\n')\n-            for expected_msg in expected_msgs:\n-                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE) is None:\n-                    found = False\n-            if found:\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 17,
      "original_position": 17,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "what's the reason for regex iteration above and here if we're just escaping it anyway? We're not doing it in `busy_wait_for_debug_log`\r\nI have added\r\n```python\r\n            found = []\r\n            for i, expected_msg in enumerate(expected_msgs):\r\n                if re.search(re.escape(expected_msg), log, flags=re.MULTILINE):\r\n                    found.append(i)\r\n            found2 = [i for i, m in enumerate(expected_msgs) if m in log]\r\n            assert found == found2, f\"Mismatch: {found} != {found2}\"\r\n```\r\nand ran the whole suite and it seems to be the same, maybe we can simplify it.\r\nNote that `found2` should likely be a `set` instead of a list, otherwise comparing the sizes may not make sense. It also helps with the `in` condition for the remaining values.",
      "created_at": "2025-09-18T23:34:19Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361380779",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380779"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 567,
      "original_line": 567,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380997",
      "pull_request_review_id": 3241292554,
      "id": 2361380997,
      "node_id": "PRRC_kwDOABII586Mv9CF",
      "diff_hunk": "@@ -556,18 +556,22 @@ def print_log(log):\n         yield\n \n         while True:\n-            found = True\n+            found = []",
      "path": "test/functional/test_framework/test_node.py",
      "position": 5,
      "original_position": 5,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "we don't actually need this here, can we move it closer to it actual usage? Or if we use a list/set comprehension we don't even need this line",
      "created_at": "2025-09-18T23:34:33Z",
      "updated_at": "2025-09-19T00:39:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361380997",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361380997"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 559,
      "original_line": 559,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361431692",
      "pull_request_review_id": 3241292554,
      "id": 2361431692,
      "node_id": "PRRC_kwDOABII586MwJaM",
      "diff_hunk": "@@ -586,18 +590,21 @@ def busy_wait_for_debug_log(self, expected_msgs, timeout=60):\n         yield\n \n         while True:\n-            found = True\n+            found = []\n             with open(self.debug_log_path, \"rb\") as dl:\n                 dl.seek(prev_size)\n                 log = dl.read()\n \n-            for expected_msg in expected_msgs:\n-                if expected_msg not in log:\n-                    found = False\n+            for i, expected_msg in enumerate(expected_msgs):\n+                if expected_msg in log:\n+                    found.append(i)\n \n-            if found:\n+            if len(found) == len(expected_msgs):",
      "path": "test/functional/test_framework/test_node.py",
      "position": 46,
      "original_position": 46,
      "commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "original_commit_id": "93511bdca5566a0de282790daacc901af105ddf3",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Wouldn't this return if the same expected message appears multiple times in the log? I think we should collect the indexes into a set instead. Not sure that will keep the expected order (which we likely should), I haven't checked or thought about extensively.\r\n",
      "created_at": "2025-09-19T00:31:04Z",
      "updated_at": "2025-09-19T01:03:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33423#discussion_r2361431692",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2361431692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33423"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 602,
      "original_line": 602,
      "side": "RIGHT"
    }
  ]
}