{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622",
    "id": 2267361769,
    "node_id": "PR_kwDOABII586HJTHp",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31622",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31622.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31622.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31622",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31622/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6df3857fa7fddc7d7b216dca254be17401c28ba7",
    "number": 31622,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "psbt: add non-default sighash types to PSBTs and unify sighash type match checking",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Currently, we do not add the sighash field to PSBTs at all, even when we have signed with a non-default sighash. This PR changes the behavior such that when we (attempt to) sign with a sighash other than DEFAULT or ALL, the sighash type field will be added to the PSBT to inform the later signers that a different sighash type was used by a signer. Notably, this is necessary for MuSig2 support as all signers must sign using the same sighash type, but the sighash is not provided in partial signatures.\r\n\r\nFurthermore, because the sighash type can also be provided on the command line, we require that if both a command line sighash type and the sighash field is present, they must specify the same sighash type. However, this was being checked by the wallet, rather than the signing code, so the `descriptorprocesspsbt` RPC was not enforcing this restriction at all, and in fact ignored the sighash field entirely. This PR refactors the checking code so that the underlying PSBT signing function `SignPSBTInput` does the check.",
    "labels": [
      {
        "id": 1618202877,
        "node_id": "MDU6TGFiZWwxNjE4MjAyODc3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/PSBT",
        "name": "PSBT",
        "description": "",
        "color": "39c6b4",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-01-09T02:09:00Z",
    "updated_at": "2025-01-21T03:14:00Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "1ff744de3fdf8396332e1971d4aa2af9a4b8661c",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "achow101:psbt-sighashes",
      "ref": "psbt-sighashes",
      "sha": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 8,
        "stargazers_count": 39,
        "watchers_count": 39,
        "size": 288460,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-21T00:03:24Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2024-10-04T23:43:44Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "4601b7ca6111fc17a1fea1bff228afd17e237276",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36579,
        "stargazers_count": 81532,
        "watchers_count": 81532,
        "size": 274415,
        "default_branch": "master",
        "open_issues_count": 694,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-20T16:25:42Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-21T03:52:19Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 209,
    "deletions": 65,
    "changed_files": 27,
    "commits": 8,
    "review_comments": 11,
    "comments": 4
  },
  "events": [
    {
      "event": "commented",
      "id": 2579030476,
      "node_id": "IC_kwDOABII586ZuOHM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2579030476",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-09T02:09:03Z",
      "updated_at": "2025-01-21T03:14:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31622.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [1440000bytes](https://github.com/bitcoin/bitcoin/pull/31622#issuecomment-2584992376), [Sjors](https://github.com/bitcoin/bitcoin/pull/31622#pullrequestreview-2555658830) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#bitcoin-core/gui/850](https://github.com/bitcoin-core/gui/pull/850) (gui, psbt: Use SIGHASH_DEFAULT when signing PSBTs by achow101)\n* [#bitcoin-core/gui/832](https://github.com/bitcoin-core/gui/pull/832) (Improve user dialog when signing multisig psbts by mjdietzx)\n* [#31247](https://github.com/bitcoin/bitcoin/pull/31247) (psbt: MuSig2 Fields by achow101)\n* [#30886](https://github.com/bitcoin/bitcoin/pull/30886) (rpc: Add support to populate PSBT input utxos via rpc by instagibbs)\n* [#29675](https://github.com/bitcoin/bitcoin/pull/29675) (wallet: Be able to receive and spend inputs involving MuSig2 aggregate keys by achow101)\n* [#28710](https://github.com/bitcoin/bitcoin/pull/28710) (Remove the legacy wallet and BDB dependency by achow101)\n* [#24963](https://github.com/bitcoin/bitcoin/pull/24963) (RPC/Wallet: Convert walletprocesspsbt to use options parameter by luke-jr)\n* [#21283](https://github.com/bitcoin/bitcoin/pull/21283) (Implement BIP 370 PSBTv2 by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#issuecomment-2579030476",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31622"
    },
    {
      "event": "labeled",
      "id": 15861901912,
      "node_id": "LE_lADOABII586lgMVnzwAAAAOxcWpY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15861901912",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-09T02:09:06Z",
      "label": {
        "name": "PSBT",
        "color": "39c6b4"
      }
    },
    {
      "event": "labeled",
      "id": 15862317025,
      "node_id": "LE_lADOABII586lgMVnzwAAAAOxd7_h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15862317025",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-09T03:25:54Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2579108910,
      "node_id": "IC_kwDOABII586ZuhQu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2579108910",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-09T03:25:55Z",
      "updated_at": "2025-01-09T03:25:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35347529485</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#issuecomment-2579108910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31622"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNjODcwYWMzNDI3ODNlYjBiMDg2NTBhYWI0YTk0ZTY3YWEzMmIzYmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc870ac342783eb0b08650aab4a94e67aa32b3bf",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cc870ac342783eb0b08650aab4a94e67aa32b3bf",
      "tree": {
        "sha": "b67d5db74ae639526393a55644ea7772affb71d3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b67d5db74ae639526393a55644ea7772affb71d3"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/66aa6a47bd8efd7e0448319c74be3ee62caa777a",
          "sha": "66aa6a47bd8efd7e0448319c74be3ee62caa777a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/66aa6a47bd8efd7e0448319c74be3ee62caa777a"
        }
      ],
      "message": "tests: Test PSBT sighash type mismatch",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-09T20:47:27Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-08T20:49:15Z"
      },
      "sha": "cc870ac342783eb0b08650aab4a94e67aa32b3bf"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15874397821,
      "node_id": "HRFPE_lADOABII586lgMVnzwAAAAOyMBZ9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15874397821",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "350bacb6a89c43f29d3e3bc6b54728a01cedaf76",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/350bacb6a89c43f29d3e3bc6b54728a01cedaf76",
      "created_at": "2025-01-09T22:34:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15874942822,
      "node_id": "HRFPE_lADOABII586lgMVnzwAAAAOyOGdm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15874942822",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/b70e83da4210e8098cbf3fc3b2289fc710828455",
      "created_at": "2025-01-09T23:53:40Z"
    },
    {
      "event": "commented",
      "id": 2583006911,
      "node_id": "IC_kwDOABII586Z9Y6_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2583006911",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-10T15:47:03Z",
      "updated_at": "2025-01-10T15:47:03Z",
      "author_association": "MEMBER",
      "body": "https://github.com/bitcoin/bitcoin/actions/runs/12700499877/job/35403281996?pr=31622#step:12:8987:\r\n```bash\r\n  test  2025-01-10T00:28:24.738000Z TestFramework (ERROR): Assertion failed \r\n                                   Traceback (most recent call last):\r\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\test_framework\\test_framework.py\", line 135, in main\r\n                                       self.run_test()\r\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\wallet_taproot.py\", line 411, in run_test\r\n                                       self.do_test(\r\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\wallet_taproot.py\", line 395, in do_test\r\n                                       self.do_test_psbt(comment, pattern, privmap, treefn, keys[2*nkeys:3*nkeys], keys[3*nkeys:4*nkeys])\r\n                                     File \"D:\\a\\bitcoin\\bitcoin\\build\\test\\functional\\wallet_taproot.py\", line 363, in do_test_psbt\r\n                                       assert \"non_witness_utxo\" not in psbtin\r\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n                                   AssertionError\r\n test  2025-01-10T00:28:24.738000Z TestFramework (DEBUG): Closing down network thread \r\n```",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#issuecomment-2583006911",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31622"
    },
    {
      "event": "commented",
      "id": 2584992376,
      "node_id": "IC_kwDOABII586aE9p4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2584992376",
      "actor": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-11T01:47:06Z",
      "updated_at": "2025-01-11T01:47:06Z",
      "author_association": "NONE",
      "body": "> Currently, we do not add the sighash field to PSBTs at all, even when we have signed with a non-default sighash. **This PR changes the behavior such that when we (attempt to) sign with a sighash other than DEFAULT or ALL, the sighash type field will be added to the PSBT to inform the later signers that a different sighash type was used by a signer.** Notably, this is necessary for MuSig2 support as all signers must sign using the same sighash type, but the sighash is not provided in partial signatures.\r\n\r\nConcept ACK ",
      "user": {
        "login": "1440000bytes",
        "id": 147166694,
        "node_id": "U_kgDOCMWV5g",
        "avatar_url": "https://avatars.githubusercontent.com/u/147166694?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/1440000bytes",
        "html_url": "https://github.com/1440000bytes",
        "followers_url": "https://api.github.com/users/1440000bytes/followers",
        "following_url": "https://api.github.com/users/1440000bytes/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/1440000bytes/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/1440000bytes/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/1440000bytes/subscriptions",
        "organizations_url": "https://api.github.com/users/1440000bytes/orgs",
        "repos_url": "https://api.github.com/users/1440000bytes/repos",
        "events_url": "https://api.github.com/users/1440000bytes/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/1440000bytes/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#issuecomment-2584992376",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31622"
    },
    {
      "event": "reviewed",
      "id": 2544522566,
      "node_id": "PRR_kwDOABII586XqlVG",
      "url": null,
      "actor": null,
      "commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "scgbckbone",
        "id": 25349625,
        "node_id": "MDQ6VXNlcjI1MzQ5NjI1",
        "avatar_url": "https://avatars.githubusercontent.com/u/25349625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scgbckbone",
        "html_url": "https://github.com/scgbckbone",
        "followers_url": "https://api.github.com/users/scgbckbone/followers",
        "following_url": "https://api.github.com/users/scgbckbone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/scgbckbone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/scgbckbone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/scgbckbone/subscriptions",
        "organizations_url": "https://api.github.com/users/scgbckbone/orgs",
        "repos_url": "https://api.github.com/users/scgbckbone/repos",
        "events_url": "https://api.github.com/users/scgbckbone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/scgbckbone/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#pullrequestreview-2544522566",
      "submitted_at": "2025-01-11T03:27:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
    },
    {
      "event": "reviewed",
      "id": 2555658830,
      "node_id": "PRR_kwDOABII586YVEJO",
      "url": null,
      "actor": null,
      "commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nThe `descriptorprocesspsbt` documentation for `sighashtype` currently says:\r\n\r\n> The signature hash type to sign with if not specified by the PSBT.\r\n\r\nLet's change that to:\r\n\r\n> The signature hash type to sign with. If the PSBT already specifies a hash type, it must match. Otherwise it is added to the PSBT.\r\n\r\nSome comments based on partial code review.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#pullrequestreview-2555658830",
      "submitted_at": "2025-01-16T12:25:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZmNWFhZWYwN2UxYmM1NDI0YTQ4YTlhYjk5ODkwZWFhYTEyNGQzZjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff5aaef07e1bc5424a48a9ab99890eaaa124d3f8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ff5aaef07e1bc5424a48a9ab99890eaaa124d3f8",
      "tree": {
        "sha": "a7f8f55c11ec9e0f8c0d22737a2ff6c9c8b0452e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a7f8f55c11ec9e0f8c0d22737a2ff6c9c8b0452e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cc870ac342783eb0b08650aab4a94e67aa32b3bf",
          "sha": "cc870ac342783eb0b08650aab4a94e67aa32b3bf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cc870ac342783eb0b08650aab4a94e67aa32b3bf"
        }
      ],
      "message": "psbt: Return PSBTError from SignPSBTInput",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:42:24Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-08T19:37:38Z"
      },
      "sha": "ff5aaef07e1bc5424a48a9ab99890eaaa124d3f8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFjOTgwYzQyMDdhMDY4YmE2M2NhOGMzMzA2YzkzMWIyMzg5MGYzNTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c980c4207a068ba63ca8c3306c931b23890f352",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1c980c4207a068ba63ca8c3306c931b23890f352",
      "tree": {
        "sha": "9bf57665959c7e547176e5a95a34e688730ab0c5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9bf57665959c7e547176e5a95a34e688730ab0c5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ff5aaef07e1bc5424a48a9ab99890eaaa124d3f8",
          "sha": "ff5aaef07e1bc5424a48a9ab99890eaaa124d3f8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ff5aaef07e1bc5424a48a9ab99890eaaa124d3f8"
        }
      ],
      "message": "wallet: change FillPSBT to take sighash as optional\n\nInstead of having the caller have to figure out the correct sane default\nto provide to FillPSBT, have FillPSBT do that by having it take the\nsighash type as an optional. This further allows it to distinguish\nbetween an explicit sighash type being provided and expecting the\ndefault value to be used.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:42:25Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-08T22:48:41Z"
      },
      "sha": "1c980c4207a068ba63ca8c3306c931b23890f352"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI5MzYxZDY5YzgwMGYxZjZjYWZjMGE2ZmVjOTM2YmVlZDZkYTIzMTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29361d69c800f1f6cafc0a6fec936beed6da2313",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/29361d69c800f1f6cafc0a6fec936beed6da2313",
      "tree": {
        "sha": "c5a7368e383e48e499e9666fca0ab22e53e358e2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c5a7368e383e48e499e9666fca0ab22e53e358e2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c980c4207a068ba63ca8c3306c931b23890f352",
          "sha": "1c980c4207a068ba63ca8c3306c931b23890f352",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1c980c4207a068ba63ca8c3306c931b23890f352"
        }
      ],
      "message": "script: Add IsPayToTaproot()",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:43:59Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-08T22:33:32Z"
      },
      "sha": "29361d69c800f1f6cafc0a6fec936beed6da2313"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFhNmQyOTIxMmU1MzNiMjRkMDlhOWRlZWE3NmUwMTlhNTU4M2U4NzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a6d29212e533b24d09a9deea76e019a5583e875",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1a6d29212e533b24d09a9deea76e019a5583e875",
      "tree": {
        "sha": "afe1df23ebb67056f62db1415d2f718d4ef5ba67",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/afe1df23ebb67056f62db1415d2f718d4ef5ba67"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/29361d69c800f1f6cafc0a6fec936beed6da2313",
          "sha": "29361d69c800f1f6cafc0a6fec936beed6da2313",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/29361d69c800f1f6cafc0a6fec936beed6da2313"
        }
      ],
      "message": "psbt: Check sighash types in SignPSBTInput and take sighash as optional",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:44:27Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-08T20:33:42Z"
      },
      "sha": "1a6d29212e533b24d09a9deea76e019a5583e875"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA4M2RhYWNiN2IyYzk0NDkzYjZkNjk4NzM4M2U4YjQ1Yzg5ODk1YTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/083daacb7b2c94493b6d6987383e8b45c89895a0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/083daacb7b2c94493b6d6987383e8b45c89895a0",
      "tree": {
        "sha": "7049ec43f6593b6fd0d3c51713eca363096afe59",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7049ec43f6593b6fd0d3c51713eca363096afe59"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a6d29212e533b24d09a9deea76e019a5583e875",
          "sha": "1a6d29212e533b24d09a9deea76e019a5583e875",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1a6d29212e533b24d09a9deea76e019a5583e875"
        }
      ],
      "message": "wallet: Remove sighash type enforcement from FillPSBT",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:44:27Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-09T00:56:13Z"
      },
      "sha": "083daacb7b2c94493b6d6987383e8b45c89895a0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0YzMzYTc0NzEyOGUxYzI2YjE5MzFhYzNmYTBjNGVkNmI2YTdiYjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34c33a747128e1c26b1931ac3fa0c4ed6b6a7bb7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/34c33a747128e1c26b1931ac3fa0c4ed6b6a7bb7",
      "tree": {
        "sha": "28a499843f69fd7f2ae9eb6aa36078f177365925",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28a499843f69fd7f2ae9eb6aa36078f177365925"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/083daacb7b2c94493b6d6987383e8b45c89895a0",
          "sha": "083daacb7b2c94493b6d6987383e8b45c89895a0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/083daacb7b2c94493b6d6987383e8b45c89895a0"
        }
      ],
      "message": "psbt: Add sighash types to PSBT when not DEFAULT or ALL\n\nWhen an atypical sighash type is specified by the user, add it to the\nPSBT so that further signing can enforce sighash type matching.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:44:27Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-09T00:58:08Z"
      },
      "sha": "34c33a747128e1c26b1931ac3fa0c4ed6b6a7bb7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkZjM4NTdmYTdmZGRjN2Q3YjIxNmRjYTI1NGJlMTc0MDFjMjhiYTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "tree": {
        "sha": "da14b0c7b2f1933e27b3c62523b2ad7bceaf66ae",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/da14b0c7b2f1933e27b3c62523b2ad7bceaf66ae"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/34c33a747128e1c26b1931ac3fa0c4ed6b6a7bb7",
          "sha": "34c33a747128e1c26b1931ac3fa0c4ed6b6a7bb7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/34c33a747128e1c26b1931ac3fa0c4ed6b6a7bb7"
        }
      ],
      "message": "rpc, psbt: Require sighashes match for descriptorprocesspsbt",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-20T23:44:42Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-01-08T21:47:55Z"
      },
      "sha": "6df3857fa7fddc7d7b216dca254be17401c28ba7"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16005354965,
      "node_id": "HRFPE_lADOABII586lgMVnzwAAAAO5_lXV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16005354965",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "created_at": "2025-01-20T23:44:49Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1911868423",
      "pull_request_review_id": 2544522566,
      "id": 1911868423,
      "node_id": "PRRC_kwDOABII585x9MwH",
      "diff_hunk": "@@ -407,19 +410,38 @@ bool SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction&\n         // a witness signature in this situation.\n         require_witness_sig = true;\n     } else {\n-        return false;\n+        return PSBTError::MISSING_INPUTS;\n+    }\n+\n+    // Get the sighash type\n+    // If both the field and the paramter are provided, they must match\n+    // If only the psbt field is provided, refuse to sign. For user safety, the desired sighash must\n+    // be provided if the PSBT wants something other than DEFAULT\n+    // If only the paramter is provider, use it and add it to the PSBT if it is other than SIGHASH_DEFAULT\n+    // for all input types, and not SIGHASH_ALL for non-taproot input types.\n+    // If neither are provided, use SIGHASH_DEFAULT\n+    if (!sighash) sighash = utxo.scriptPubKey.IsPayToTaproot() ? SIGHASH_DEFAULT : SIGHASH_ALL;\n+    if (input.sighash_type && input.sighash_type != sighash) {\n+        return PSBTError::SIGHASH_MISMATCH;\n+    } else {\n+        if ((!utxo.scriptPubKey.IsPayToTaproot() && (sighash != SIGHASH_ALL && sighash != SIGHASH_DEFAULT)) ||",
      "path": "src/psbt.cpp",
      "position": 64,
      "original_position": 64,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "in_reply_to_id": null,
      "user": {
        "login": "scgbckbone",
        "id": 25349625,
        "node_id": "MDQ6VXNlcjI1MzQ5NjI1",
        "avatar_url": "https://avatars.githubusercontent.com/u/25349625?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/scgbckbone",
        "html_url": "https://github.com/scgbckbone",
        "followers_url": "https://api.github.com/users/scgbckbone/followers",
        "following_url": "https://api.github.com/users/scgbckbone/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/scgbckbone/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/scgbckbone/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/scgbckbone/subscriptions",
        "organizations_url": "https://api.github.com/users/scgbckbone/orgs",
        "repos_url": "https://api.github.com/users/scgbckbone/repos",
        "events_url": "https://api.github.com/users/scgbckbone/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/scgbckbone/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "is there any specific reason to allow SIGHASH_DEFAULT on non-taproot utxo? Shouldn't it be error instead of rewriting sighash in `sign.cpp`\r\n\r\n```\r\n    // BASE/WITNESS_V0 signatures don't support explicit SIGHASH_DEFAULT, use SIGHASH_ALL instead.\r\n    const int hashtype = nHashType == SIGHASH_DEFAULT ? SIGHASH_ALL : nHashType;\r\n``` ",
      "created_at": "2025-01-11T03:27:05Z",
      "updated_at": "2025-01-11T03:27:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1911868423",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1911868423"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 427,
      "original_line": 427,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918284288",
      "pull_request_review_id": 2555658830,
      "id": 1918284288,
      "node_id": "PRRC_kwDOABII585yVrIA",
      "diff_hunk": "@@ -235,6 +241,22 @@ def test_sighash_mismatch(self):\n         proc = wallet.walletprocesspsbt(psbt, True, \"ALL|ANYONECANPAY\")\n         assert_equal(proc[\"complete\"], True)\n \n+        # Repeat with descriptorprocesspsbt\n+        # Mismatching sighash type fails\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"DEFAULT\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"ALL\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"NONE\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"SINGLE\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"NONE|ANYONECANPAY\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"SINGLE|ANYONECANPAY\")\n+\n+        # No sighash type specified fails\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs)",
      "path": "test/functional/rpc_psbt.py",
      "position": 69,
      "original_position": 27,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b70e83da4210e8098cbf3fc3b2289fc710828455: let's echo the specified sighash  value, otherwise the error is confusing in this default case.\r\n\r\nWe should probably also echo what's in the PSBT.\r\n\r\nI think it's a good safety feature that the default behaviour is _not_ to just mimic what's in the PSBT but to insist on `DEFAULT` / `ALL`. The error message could warn against the temptation to call the RPC again with the \"right\" value.",
      "created_at": "2025-01-16T11:23:24Z",
      "updated_at": "2025-01-16T12:25:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1918284288",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918284288"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918339465",
      "pull_request_review_id": 2555658830,
      "id": 1918339465,
      "node_id": "PRRC_kwDOABII585yV4mJ",
      "diff_hunk": "@@ -235,8 +235,10 @@ PartiallySignedTransaction ProcessPSBT(const std::string& psbt_string, const std\n         // Note that SignPSBTInput does a lot more than just constructing ECDSA signatures.\n         // We only actually care about those if our signing provider doesn't hide private\n         // information, as is the case with `descriptorprocesspsbt`\n-        // As such, we ignore the return value as any errors just mean that we do not have enough information.\n-        SignPSBTInput(provider, psbtx, /*index=*/i, &txdata, sighash_type, /*out_sigdata=*/nullptr, finalize);\n+        // Only error for mismatching sighash types as it is critical that the sighash to sign with matches the PSBT's\n+        if (SignPSBTInput(provider, psbtx, /*index=*/i, &txdata, sighash_type, /*out_sigdata=*/nullptr, finalize) == common::PSBTError::SIGHASH_MISMATCH) {",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b70e83da4210e8098cbf3fc3b2289fc710828455: in case of a hardware wallet (external signer) I would want this to fail before any call to the device is made.\r\n\r\nIt's a bit hard to tell if that's the case, maybe this specific check can be refactored into its own function? That would make things easier to follow in general.",
      "created_at": "2025-01-16T12:07:47Z",
      "updated_at": "2025-01-16T12:25:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1918339465",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918339465"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 239,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918345572",
      "pull_request_review_id": 2555658830,
      "id": 1918345572,
      "node_id": "PRRC_kwDOABII585yV6Fk",
      "diff_hunk": "@@ -372,13 +375,13 @@ PrecomputedTransactionData PrecomputePSBTData(const PartiallySignedTransaction&\n     return txdata;\n }\n \n-bool SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction& psbt, int index, const PrecomputedTransactionData* txdata, int sighash,  SignatureData* out_sigdata, bool finalize)\n+PSBTError SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction& psbt, int index, const PrecomputedTransactionData* txdata, int sighash,  SignatureData* out_sigdata, bool finalize)",
      "path": "src/psbt.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "0970178f620acd695c49526d2b375eae489072c1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "0970178f620acd695c49526d2b375eae489072c1: can we make this `nodiscard` and then explicitly ignore the result in `rpc/rawtransaction.cpp`?",
      "created_at": "2025-01-16T12:11:54Z",
      "updated_at": "2025-01-16T12:25:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1918345572",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918345572"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 378,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918368175",
      "pull_request_review_id": 2555658830,
      "id": 1918368175,
      "node_id": "PRRC_kwDOABII585yV_mv",
      "diff_hunk": "@@ -632,11 +632,12 @@ SigningResult LegacyScriptPubKeyMan::SignMessage(const std::string& message, con\n     return SigningResult::SIGNING_FAILED;\n }\n \n-std::optional<PSBTError> LegacyScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, int sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n+std::optional<PSBTError> LegacyScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, std::optional<int> sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n {\n     if (n_signed) {\n         *n_signed = 0;\n     }\n+    if (!sighash_type) sighash_type = SIGHASH_DEFAULT;",
      "path": "src/wallet/scriptpubkeyman.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "e94bb4e5fc6dea67844a8495b948b679649b7b65",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "e94bb4e5fc6dea67844a8495b948b679649b7b65: maybe use `SIGHASH_ALL` here, since the legacy wallet doesn't support Taproot.",
      "created_at": "2025-01-16T12:19:40Z",
      "updated_at": "2025-01-16T12:25:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1918368175",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918368175"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 640,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918377236",
      "pull_request_review_id": 2555658830,
      "id": 1918377236,
      "node_id": "PRRC_kwDOABII585yWB0U",
      "diff_hunk": "@@ -2532,11 +2533,12 @@ SigningResult DescriptorScriptPubKeyMan::SignMessage(const std::string& message,\n     return SigningResult::OK;\n }\n \n-std::optional<PSBTError> DescriptorScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, int sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n+std::optional<PSBTError> DescriptorScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, std::optional<int> sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n {\n     if (n_signed) {\n         *n_signed = 0;\n     }\n+    if (!sighash_type) sighash_type = SIGHASH_DEFAULT;",
      "path": "src/wallet/scriptpubkeyman.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "e94bb4e5fc6dea67844a8495b948b679649b7b65",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "e94bb4e5fc6dea67844a8495b948b679649b7b65: maybe do this inside the `psbtx.tx->vin` loop below and set `SIGHASH_ALL` or `SIGHASH_DEFAULT` depending on whether it's taproot.\r\n\r\nAnd then replace the magic buried in `MutableTransactionSignatureCreator::CreateSig` with an `assert`.",
      "created_at": "2025-01-16T12:22:54Z",
      "updated_at": "2025-01-16T12:25:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1918377236",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1918377236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2541,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922909905",
      "pull_request_review_id": 2563234724,
      "id": 1922909905,
      "node_id": "PRRC_kwDOABII585ynUbR",
      "diff_hunk": "@@ -235,6 +241,22 @@ def test_sighash_mismatch(self):\n         proc = wallet.walletprocesspsbt(psbt, True, \"ALL|ANYONECANPAY\")\n         assert_equal(proc[\"complete\"], True)\n \n+        # Repeat with descriptorprocesspsbt\n+        # Mismatching sighash type fails\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"DEFAULT\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"ALL\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"NONE\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"SINGLE\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"NONE|ANYONECANPAY\")\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs, \"SINGLE|ANYONECANPAY\")\n+\n+        # No sighash type specified fails\n+        assert_raises_rpc_error(-22, \"Specified sighash value does not match value stored in PSBT\", self.nodes[0].descriptorprocesspsbt, psbt, descs)",
      "path": "test/functional/rpc_psbt.py",
      "position": 69,
      "original_position": 27,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "in_reply_to_id": 1918284288,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The function that produces this specific error message does not have access to the arguments nor the PSBT to produce a specific message in each instance. Rewiring everything to allow that is a significant amount of work that I don't want to do in this PR.",
      "created_at": "2025-01-20T23:30:28Z",
      "updated_at": "2025-01-20T23:30:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1922909905",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922909905"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 254,
      "original_line": 254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922910476",
      "pull_request_review_id": 2563235465,
      "id": 1922910476,
      "node_id": "PRRC_kwDOABII585ynUkM",
      "diff_hunk": "@@ -235,8 +235,10 @@ PartiallySignedTransaction ProcessPSBT(const std::string& psbt_string, const std\n         // Note that SignPSBTInput does a lot more than just constructing ECDSA signatures.\n         // We only actually care about those if our signing provider doesn't hide private\n         // information, as is the case with `descriptorprocesspsbt`\n-        // As such, we ignore the return value as any errors just mean that we do not have enough information.\n-        SignPSBTInput(provider, psbtx, /*index=*/i, &txdata, sighash_type, /*out_sigdata=*/nullptr, finalize);\n+        // Only error for mismatching sighash types as it is critical that the sighash to sign with matches the PSBT's\n+        if (SignPSBTInput(provider, psbtx, /*index=*/i, &txdata, sighash_type, /*out_sigdata=*/nullptr, finalize) == common::PSBTError::SIGHASH_MISMATCH) {",
      "path": "src/rpc/rawtransaction.cpp",
      "position": 15,
      "original_position": 7,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "b70e83da4210e8098cbf3fc3b2289fc710828455",
      "in_reply_to_id": 1918339465,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nothing in this file has access to hardware signers. Those are wallet only.",
      "created_at": "2025-01-20T23:32:00Z",
      "updated_at": "2025-01-20T23:32:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1922910476",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922910476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 239,
      "original_line": 239,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922914671",
      "pull_request_review_id": 2563241238,
      "id": 1922914671,
      "node_id": "PRRC_kwDOABII585ynVlv",
      "diff_hunk": "@@ -632,11 +632,12 @@ SigningResult LegacyScriptPubKeyMan::SignMessage(const std::string& message, con\n     return SigningResult::SIGNING_FAILED;\n }\n \n-std::optional<PSBTError> LegacyScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, int sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n+std::optional<PSBTError> LegacyScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, std::optional<int> sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n {\n     if (n_signed) {\n         *n_signed = 0;\n     }\n+    if (!sighash_type) sighash_type = SIGHASH_DEFAULT;",
      "path": "src/wallet/scriptpubkeyman.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "e94bb4e5fc6dea67844a8495b948b679649b7b65",
      "in_reply_to_id": 1918368175,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is temporary anyways and is removed in a later commit.",
      "created_at": "2025-01-20T23:43:25Z",
      "updated_at": "2025-01-20T23:43:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1922914671",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922914671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 640,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922914860",
      "pull_request_review_id": 2563241492,
      "id": 1922914860,
      "node_id": "PRRC_kwDOABII585ynVos",
      "diff_hunk": "@@ -2532,11 +2533,12 @@ SigningResult DescriptorScriptPubKeyMan::SignMessage(const std::string& message,\n     return SigningResult::OK;\n }\n \n-std::optional<PSBTError> DescriptorScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, int sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n+std::optional<PSBTError> DescriptorScriptPubKeyMan::FillPSBT(PartiallySignedTransaction& psbtx, const PrecomputedTransactionData& txdata, std::optional<int> sighash_type, bool sign, bool bip32derivs, int* n_signed, bool finalize) const\n {\n     if (n_signed) {\n         *n_signed = 0;\n     }\n+    if (!sighash_type) sighash_type = SIGHASH_DEFAULT;",
      "path": "src/wallet/scriptpubkeyman.cpp",
      "position": null,
      "original_position": 33,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "e94bb4e5fc6dea67844a8495b948b679649b7b65",
      "in_reply_to_id": 1918377236,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is temporary and will be done inside of `SignPSBTInput` in a later commit.",
      "created_at": "2025-01-20T23:43:56Z",
      "updated_at": "2025-01-20T23:43:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1922914860",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922914860"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2541,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922915170",
      "pull_request_review_id": 2563241902,
      "id": 1922915170,
      "node_id": "PRRC_kwDOABII585ynVti",
      "diff_hunk": "@@ -372,13 +375,13 @@ PrecomputedTransactionData PrecomputePSBTData(const PartiallySignedTransaction&\n     return txdata;\n }\n \n-bool SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction& psbt, int index, const PrecomputedTransactionData* txdata, int sighash,  SignatureData* out_sigdata, bool finalize)\n+PSBTError SignPSBTInput(const SigningProvider& provider, PartiallySignedTransaction& psbt, int index, const PrecomputedTransactionData* txdata, int sighash,  SignatureData* out_sigdata, bool finalize)",
      "path": "src/psbt.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "6df3857fa7fddc7d7b216dca254be17401c28ba7",
      "original_commit_id": "0970178f620acd695c49526d2b375eae489072c1",
      "in_reply_to_id": 1918345572,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-01-20T23:44:52Z",
      "updated_at": "2025-01-20T23:44:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31622#discussion_r1922915170",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922915170"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31622"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 378,
      "side": "RIGHT"
    }
  ]
}