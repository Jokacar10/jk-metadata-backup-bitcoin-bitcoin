{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966",
    "id": 1216590444,
    "node_id": "PR_kwDOABII585Ig7Js",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/26966",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/26966.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/26966.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/69792b6d3ee4b7320c608d5b23056d3e8b998247",
    "number": 26966,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "index: initial sync speedup, parallelize process",
    "user": {
      "login": "furszy",
      "id": 5377650,
      "node_id": "MDQ6VXNlcjUzNzc2NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/furszy",
      "html_url": "https://github.com/furszy",
      "followers_url": "https://api.github.com/users/furszy/followers",
      "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
      "organizations_url": "https://api.github.com/users/furszy/orgs",
      "repos_url": "https://api.github.com/users/furszy/repos",
      "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/furszy/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The current procedure for building the block filter index involves processing filters one at a time;\r\nReading blocks, undo data, and previous headers from disk sequentially.\r\n\r\nThis PR introduces a new mechanism to perform the work concurrently. Dividing the filters\r\ngeneration workload among a pool of workers that can be configured by the user,\r\nsignificantly increasing the speed of the index construction process.\r\n\r\nThe same concurrent processing model has been applied to the transactions index as well.\r\n\r\nThe newly introduced init flag `-indexworkers=<n>` enables the concurrent sync\r\nbehavior.\r\nWhere \"n\" is the number of worker threads that will be spawned at startup to create ranges\r\nof block filters during the initial sync process. Destroying the workers pool once the\r\ninitial sync completes.\r\nNote: by default, the parallelized sync process is not enabled.\r\n\r\nNow the juicy part:\r\nIn my computer, with the node in debug mode and on IBD, with `-indexworkers=4`, the\r\nblock filter index generation took less than an hour. While, in master, the sync took more than 7 hours.\r\n\r\nImportant Note:\r\nAs the access to the block data on disk is protected by `cs_main`, this new feature runs substantially\r\nfaster when the node is not in IBD.\r\n\r\n#### Testing Notes:\r\n\r\n1. Sync your node without any index.\r\n2. Restart the node with one of the indexes (`-blockfilterindex` or `-txindex`) and `-connect=0` (to sync only the index, without running the net/validation threads. Since threads won't be competing for `cs_main`, this will give you a more accurate result).\r\n\r\n   You’ll see a \"[index name] is enabled at height [height]\" log entry once it finishes. Then it’s just a matter of subtracting the index startup time from the \"index synced\" log time.\r\n\r\n  Keep in mind that threads are shared among all indexes you start. So if you run both indexes at the same time, your benchmark results cannot be compared against single-index runs.",
    "labels": [
      {
        "id": 97470796,
        "node_id": "MDU6TGFiZWw5NzQ3MDc5Ng==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/UTXO%20Db%20and%20Indexes",
        "name": "UTXO Db and Indexes",
        "color": "fbca04",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-01-25T13:36:23Z",
    "updated_at": "2025-08-21T07:44:12Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "588362f872e07ba5ba287c057e1d9d7d48eb1cd9",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "furszy:2022_parallelize_blockfilter_index_2",
      "ref": "2022_parallelize_blockfilter_index_2",
      "sha": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 143624913,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNDM2MjQ5MTM=",
        "name": "bitcoin-core",
        "full_name": "furszy/bitcoin-core",
        "owner": {
          "login": "furszy",
          "id": 5377650,
          "node_id": "MDQ6VXNlcjUzNzc2NTA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/furszy",
          "html_url": "https://github.com/furszy",
          "followers_url": "https://api.github.com/users/furszy/followers",
          "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
          "organizations_url": "https://api.github.com/users/furszy/orgs",
          "repos_url": "https://api.github.com/users/furszy/repos",
          "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/furszy/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/furszy/bitcoin-core",
        "description": "Bitcoin-Core",
        "fork": true,
        "url": "https://api.github.com/repos/furszy/bitcoin-core",
        "archive_url": "https://api.github.com/repos/furszy/bitcoin-core/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/furszy/bitcoin-core/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/furszy/bitcoin-core/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/furszy/bitcoin-core/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/furszy/bitcoin-core/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/furszy/bitcoin-core/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/furszy/bitcoin-core/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/furszy/bitcoin-core/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/furszy/bitcoin-core/contributors",
        "deployments_url": "https://api.github.com/repos/furszy/bitcoin-core/deployments",
        "downloads_url": "https://api.github.com/repos/furszy/bitcoin-core/downloads",
        "events_url": "https://api.github.com/repos/furszy/bitcoin-core/events",
        "forks_url": "https://api.github.com/repos/furszy/bitcoin-core/forks",
        "git_commits_url": "https://api.github.com/repos/furszy/bitcoin-core/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/furszy/bitcoin-core/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/furszy/bitcoin-core/git/tags%7B/sha%7D",
        "git_url": "git://github.com/furszy/bitcoin-core.git",
        "issue_comment_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/furszy/bitcoin-core/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/furszy/bitcoin-core/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/furszy/bitcoin-core/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/furszy/bitcoin-core/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/furszy/bitcoin-core/languages",
        "merges_url": "https://api.github.com/repos/furszy/bitcoin-core/merges",
        "milestones_url": "https://api.github.com/repos/furszy/bitcoin-core/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/furszy/bitcoin-core/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/furszy/bitcoin-core/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/furszy/bitcoin-core/releases%7B/id%7D",
        "ssh_url": "git@github.com:furszy/bitcoin-core.git",
        "stargazers_url": "https://api.github.com/repos/furszy/bitcoin-core/stargazers",
        "statuses_url": "https://api.github.com/repos/furszy/bitcoin-core/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/furszy/bitcoin-core/subscribers",
        "subscription_url": "https://api.github.com/repos/furszy/bitcoin-core/subscription",
        "tags_url": "https://api.github.com/repos/furszy/bitcoin-core/tags",
        "teams_url": "https://api.github.com/repos/furszy/bitcoin-core/teams",
        "trees_url": "https://api.github.com/repos/furszy/bitcoin-core/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/furszy/bitcoin-core.git",
        "hooks_url": "https://api.github.com/repos/furszy/bitcoin-core/hooks",
        "svn_url": "https://github.com/furszy/bitcoin-core",
        "homepage": "",
        "language": "C++",
        "forks_count": 3,
        "stargazers_count": 6,
        "watchers_count": 6,
        "size": 435429,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-08-20T09:26:17Z",
        "created_at": "2018-08-05T15:28:43Z",
        "updated_at": "2025-08-15T20:06:49Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "f5f853d952542ebd45339a270a98362696877657",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37648,
        "stargazers_count": 85121,
        "watchers_count": 85121,
        "size": 291637,
        "default_branch": "master",
        "open_issues_count": 753,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-08-20T21:29:21Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-08-21T07:57:06Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 787,
    "deletions": 63,
    "changed_files": 12,
    "commits": 5,
    "review_comments": 104,
    "comments": 35
  },
  "events": [
    {
      "event": "commented",
      "id": 1403631860,
      "node_id": "IC_kwDOABII585Tqbj0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1403631860",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-25T13:36:26Z",
      "updated_at": "2025-08-21T07:44:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/26966.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1275543891), [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1749211886), [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3039751954) |\n| Approach ACK | [ryanofsky](https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2754283048) |\n| Stale ACK | [pinheadmz](https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3067959910) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32997](https://github.com/bitcoin/bitcoin/pull/32997) (index: Deduplicate HashKey / HeightKey handling by mzumsande)\n* [#32541](https://github.com/bitcoin/bitcoin/pull/32541) (index: store per-block transaction locations for efficient lookups by romanz)\n* [#31308](https://github.com/bitcoin/bitcoin/pull/31308) (ci, iwyu: Treat warnings as errors for specific directories by hebasto)\n* [#29770](https://github.com/bitcoin/bitcoin/pull/29770) (index: Check all necessary block data is available before starting to sync by fjahr)\n* [#17783](https://github.com/bitcoin/bitcoin/pull/17783) (common: Disallow calling IsArgSet() on ALLOW_LIST options by ryanofsky)\n* [#17581](https://github.com/bitcoin/bitcoin/pull/17581) (refactor: Remove settings merge reverse precedence code by ryanofsky)\n* [#17580](https://github.com/bitcoin/bitcoin/pull/17580) (refactor: Add ALLOW_LIST flags and enforce usage in CheckArgFlags by ryanofsky)\n* [#17493](https://github.com/bitcoin/bitcoin/pull/17493) (util: Forbid ambiguous multiple assignments in config file by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\nPossible typos and grammar issues:\n\n- “the error will be already be” → “the error will already be” [duplicate “be” makes the sentence invalid]\n\n<sup>drahtbot_id_4_m</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1403631860",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 8354839933,
      "node_id": "LE_lADOABII585cyOzezwAAAAHx_L19",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8354839933",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-25T13:36:28Z",
      "label": {
        "name": "UTXO Db and Indexes",
        "color": "fbca04"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8355412291,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAHyBXlD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8355412291",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ee71639af38ed0ca21ea09e0cda9818088f8a53c",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/ee71639af38ed0ca21ea09e0cda9818088f8a53c",
      "created_at": "2023-01-25T14:36:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8355861677,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAHyDFSt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8355861677",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "deb2e6ea4b7ccca18ec3254f356e4f5f722e7c92",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/deb2e6ea4b7ccca18ec3254f356e4f5f722e7c92",
      "created_at": "2023-01-25T15:20:39Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8356547944,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAHyFs1o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8356547944",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d8b0f5e246ca4600388a7375575423145f9fe3e8",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/d8b0f5e246ca4600388a7375575423145f9fe3e8",
      "created_at": "2023-01-25T16:29:14Z"
    },
    {
      "event": "commented",
      "id": 1405102999,
      "node_id": "IC_kwDOABII585TwCuX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1405102999",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-26T14:38:27Z",
      "updated_at": "2023-01-26T14:38:27Z",
      "author_association": "MEMBER",
      "body": "Cool, will take it for a spin...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1405102999",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8379907425,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAHzez1h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8379907425",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "65dc850806ad35cb7778e9b82f03521981279376",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/65dc850806ad35cb7778e9b82f03521981279376",
      "created_at": "2023-01-28T15:04:28Z"
    },
    {
      "event": "commented",
      "id": 1407420783,
      "node_id": "IC_kwDOABII585T44lv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1407420783",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-28T15:18:54Z",
      "updated_at": "2023-01-28T15:18:54Z",
      "author_association": "MEMBER",
      "body": "Cool @Sjors, just pushed a small update. Found a little bug.\r\n\r\nGoing to add an important note to the PR description (because otherwise testing results will vary a lot):\r\n\r\nAs the access to the block data on disk is protected by `cs_main`, this new feature runs substantially\r\nfaster when the node is not in IBD.\r\n(where \"substantially\" here means full index sync, with 5 workers, in less than 20 minutes in my computer).",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1407420783",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "mentioned",
      "id": 8379935929,
      "node_id": "MEE_lADOABII585cyOzezwAAAAHze6y5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8379935929",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-28T15:18:54Z"
    },
    {
      "event": "subscribed",
      "id": 8379935930,
      "node_id": "SE_lADOABII585cyOzezwAAAAHze6y6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8379935930",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-28T15:18:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8379965169,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAHzfB7x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8379965169",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "09cc56aca0fe9231d5beaa4bef2948c25359a8a5",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/09cc56aca0fe9231d5beaa4bef2948c25359a8a5",
      "created_at": "2023-01-28T15:40:27Z"
    },
    {
      "event": "reviewed",
      "id": 1274319556,
      "node_id": "PRR_kwDOABII585L9JLE",
      "url": null,
      "actor": null,
      "commit_id": "09cc56aca0fe9231d5beaa4bef2948c25359a8a5",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-01-29T22:49:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "It's probably much easier suggested than done, but did you attempt to implement parallelization in a more general way so that other indices could benefit from it as well? On first glance, `txindex`, and the indices suggested in PRs  (#24539, #26951) seem to be parallelizable as well (not `coinstatsindex` though). \r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1274319556",
      "submitted_at": "2023-01-29T22:49:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "commented",
      "id": 1408645764,
      "node_id": "IC_kwDOABII585T9jqE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1408645764",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-01-30T13:37:06Z",
      "updated_at": "2023-01-30T13:37:06Z",
      "author_association": "MEMBER",
      "body": "> It's probably much easier suggested than done, but did you attempt to implement parallelization in a more general way so that other indices could benefit from it as well?\r\n\r\nYeah, that is part of the plan. I started with the block filter index because it requires an special treatment that `txindex` parallelization does not require (block/undo data reading and block filters creation can be parallelized but writing must be done sequentially due the need to link filter headers to their predecessors to create the filters-chain on disk).\r\n\r\nMy idea was to start reviewing this one, so the process gets as clean as possible, and then move forward with the generalization step. It's usually more natural to abstract processes when the specific cases are well-defined.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1408645764",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8389982140,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAH0FPe8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8389982140",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "43e6237cd58be888a867dc7a4a7f2d35615ae640",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/43e6237cd58be888a867dc7a4a7f2d35615ae640",
      "created_at": "2023-01-30T16:15:03Z"
    },
    {
      "event": "reviewed",
      "id": 1275543891,
      "node_id": "PRR_kwDOABII585MB0FT",
      "url": null,
      "actor": null,
      "commit_id": "43e6237cd58be888a867dc7a4a7f2d35615ae640",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-01-30T16:42:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nPerhaps it could have separate parallelization and index logic. So it could be reused in other indexes.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1275543891",
      "submitted_at": "2023-01-30T16:42:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8392250159,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAH0N5Mv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8392250159",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b2b62f513a401dda1d60412189193840fb57aa3a",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/b2b62f513a401dda1d60412189193840fb57aa3a",
      "created_at": "2023-01-30T20:30:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8392410487,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAH0OgV3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8392410487",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4e1fba191fe532b2b43ce18964579482fda2eddd",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/4e1fba191fe532b2b43ce18964579482fda2eddd",
      "created_at": "2023-01-30T20:55:07Z"
    },
    {
      "event": "commented",
      "id": 1420800151,
      "node_id": "IC_kwDOABII585Ur7CX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1420800151",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-07T13:47:32Z",
      "updated_at": "2023-02-07T18:47:14Z",
      "author_association": "MEMBER",
      "body": "Building the index on (AMD Ryzen 7950X, blocks stored on SSD):\r\n* master @ fe86616bb4ad0c4296d34299bc2e2f0fca1fe936: 35'15\" (mostly 1 alternating CPU thread)\r\n* this PR (rebased)\r\n  * n=8: 5'20\" (uses about 8 of 32 CPU threads as expected)\r\n  * n=32: 4'26\" (pleasantly close to 100% CPU usage with a dip every 10 seconds, but it drops to only 1 CPU in the last minute or two)\r\n  \r\nI made sure to not load any wallets and disabled other indexes.\r\n\r\nI didn't test if the index was correct.\r\n\r\nI wonder if, for users without this index, it would be faster to generate the index, rescan the wallet and then delete it again. Combined with #26951 you would only have to generate filters up to the age of the wallet (IIUC, cc @pstratem).\r\n\r\nNote to self for future benchmarks: `-txindex` takes 1:07'14\", `-coinstatsindex` takes 3.5 hours.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1420800151",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "mentioned",
      "id": 8458405404,
      "node_id": "MEE_lADOABII585cyOzezwAAAAH4KQYc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8458405404",
      "actor": {
        "login": "pstratem",
        "id": 620611,
        "node_id": "MDQ6VXNlcjYyMDYxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pstratem",
        "html_url": "https://github.com/pstratem",
        "followers_url": "https://api.github.com/users/pstratem/followers",
        "following_url": "https://api.github.com/users/pstratem/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pstratem/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pstratem/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
        "organizations_url": "https://api.github.com/users/pstratem/orgs",
        "repos_url": "https://api.github.com/users/pstratem/repos",
        "events_url": "https://api.github.com/users/pstratem/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pstratem/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-07T14:03:17Z"
    },
    {
      "event": "subscribed",
      "id": 8458405422,
      "node_id": "SE_lADOABII585cyOzezwAAAAH4KQYu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8458405422",
      "actor": {
        "login": "pstratem",
        "id": 620611,
        "node_id": "MDQ6VXNlcjYyMDYxMQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/620611?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pstratem",
        "html_url": "https://github.com/pstratem",
        "followers_url": "https://api.github.com/users/pstratem/followers",
        "following_url": "https://api.github.com/users/pstratem/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pstratem/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pstratem/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pstratem/subscriptions",
        "organizations_url": "https://api.github.com/users/pstratem/orgs",
        "repos_url": "https://api.github.com/users/pstratem/repos",
        "events_url": "https://api.github.com/users/pstratem/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pstratem/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-07T14:03:17Z"
    },
    {
      "event": "commented",
      "id": 1420850865,
      "node_id": "IC_kwDOABII585UsHax",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1420850865",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-07T14:18:36Z",
      "updated_at": "2023-02-07T14:27:45Z",
      "author_association": "MEMBER",
      "body": "Great results @Sjors!.\r\n\r\nCould also give it a run rebased on top #27006.\r\nOn master, the index initial sync is slower when the node is in IBD because the index thread has to compete for access to block data on disk through `cs_main` acquisition.\r\n\r\n> I didn't test if the index was correct.\r\n\r\nThe PR contain a test verifying it.\r\n\r\n----------------------------------------------\r\n\r\nSide note:\r\nI'm working on generalizing the parallelization flow so other indexes, like the txindex and #26951 can make use of it too.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1420850865",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "mentioned",
      "id": 8458571498,
      "node_id": "MEE_lADOABII585cyOzezwAAAAH4K47q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8458571498",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-07T14:18:36Z"
    },
    {
      "event": "subscribed",
      "id": 8458571516,
      "node_id": "SE_lADOABII585cyOzezwAAAAH4K478",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8458571516",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-07T14:18:36Z"
    },
    {
      "event": "labeled",
      "id": 8551773620,
      "node_id": "LE_lADOABII585cyOzezwAAAAH9ubW0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8551773620",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-17T23:32:40Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8571310272,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAH-49DA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8571310272",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1da78b2a4e0fe8d5d0d290c8453dabc22b04c8a6",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/1da78b2a4e0fe8d5d0d290c8453dabc22b04c8a6",
      "created_at": "2023-02-21T13:56:43Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8571364585,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAH-5KTp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8571364585",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f264ed562e786abbf8636d57bdd933915d70826c",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/f264ed562e786abbf8636d57bdd933915d70826c",
      "created_at": "2023-02-21T14:01:44Z"
    },
    {
      "event": "unlabeled",
      "id": 8572043596,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAH-7wFM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8572043596",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-21T15:07:08Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8586116429,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAH_xb1N",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8586116429",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e57e27ab2e62c9d758bef374f1250c5f7b1d5195",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/e57e27ab2e62c9d758bef374f1250c5f7b1d5195",
      "created_at": "2023-02-22T22:45:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8620994733,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAIB2fCt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8620994733",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b18df4d0e826d1a3c1d08dd1addeecc39ff13afa",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/b18df4d0e826d1a3c1d08dd1addeecc39ff13afa",
      "created_at": "2023-02-27T22:37:47Z"
    },
    {
      "event": "renamed",
      "id": 8620995625,
      "node_id": "RTE_lADOABII585cyOzezwAAAAIB2fQp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8620995625",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-27T22:37:56Z",
      "rename": {
        "from": "index: blockfilter initial sync speedup, parallelize process",
        "to": "index: blockfilter and txindex initial sync speedup, parallelize process"
      }
    },
    {
      "event": "renamed",
      "id": 8621172012,
      "node_id": "RTE_lADOABII585cyOzezwAAAAIB3KUs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8621172012",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-27T23:07:13Z",
      "rename": {
        "from": "index: blockfilter and txindex initial sync speedup, parallelize process",
        "to": "index: blockfilter initial sync speedup, parallelize process"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 8621436399,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAIB4K3v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/8621436399",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "876afc27e4bd69940587790fb66d51d949284004",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/876afc27e4bd69940587790fb66d51d949284004",
      "created_at": "2023-02-27T23:57:02Z"
    },
    {
      "event": "commented",
      "id": 1448113513,
      "node_id": "IC_kwDOABII585WUHVp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1448113513",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-02-28T12:40:55Z",
      "updated_at": "2023-02-28T12:40:55Z",
      "author_association": "MEMBER",
      "body": "PR updated, most of it implementation has changed.\r\n\r\nThe news are:\r\n1) Decreased ThreadSync `cs_main` lock contention.\r\n2) Removed `CBlockIndex` access from the child indexes internals.\r\n3) Implemented generic workers pool.\r\n4) Introduced a last header cache for the Block Filter index. Avoiding disk reads on every new processed block.\r\n5) Enabled parallel sync on the tx index.\r\n\r\nImportant Note:\r\nThe introduced workers pool spawned by the `-indexworkers` init arg is shared among all the enabled indexes that support parallel sync.\r\n\r\nThe implementation uses `std::any` mainly to simplify the patch-set, the base class template form of it requires a larger set of changes.\r\n\r\nSide note: in a first glance and without going too far over the coinstats index implementation, I would say that it could also be parallelized. But will leave it for a follow-up to not continue expanding the PR size.\r\n\r\nFuture (doesn't need to be included here, just mentioning so the path is clear):\r\nI'm working on decoupling the initial sync logic into a separate structure, so indexes subscribe to events instead of reading blocks from disk by themselves.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1448113513",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 9220750641,
      "node_id": "LE_lADOABII585cyOzezwAAAAIlmX0x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9220750641",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T10:29:56Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9225798029,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAIl5oGN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9225798029",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-05-11T18:57:37Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9226698287,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAIl9D4v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9226698287",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7b0fda74e28a4c2eb96373617431b5b136ac5fb7",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/7b0fda74e28a4c2eb96373617431b5b136ac5fb7",
      "created_at": "2023-05-11T20:50:10Z"
    },
    {
      "event": "labeled",
      "id": 9505256638,
      "node_id": "LE_lADOABII585cyOzezwAAAAI2jrS-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9505256638",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-12T17:03:55Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9595606228,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAI78VTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9595606228",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a6602df24936b108da6911edc27db647dc69a6ec",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/a6602df24936b108da6911edc27db647dc69a6ec",
      "created_at": "2023-06-21T15:48:53Z"
    },
    {
      "event": "unlabeled",
      "id": 9596608210,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAI8AJ7S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9596608210",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-21T17:13:39Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9686873816,
      "node_id": "LE_lADOABII585cyOzezwAAAAJBYfbY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9686873816",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T11:24:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unsubscribed",
      "id": 9688743953,
      "node_id": "UE_lADOABII585cyOzezwAAAAJBfoAR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9688743953",
      "actor": {
        "login": "joostjager",
        "id": 4638168,
        "node_id": "MDQ6VXNlcjQ2MzgxNjg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4638168?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/joostjager",
        "html_url": "https://github.com/joostjager",
        "followers_url": "https://api.github.com/users/joostjager/followers",
        "following_url": "https://api.github.com/users/joostjager/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/joostjager/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/joostjager/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/joostjager/subscriptions",
        "organizations_url": "https://api.github.com/users/joostjager/orgs",
        "repos_url": "https://api.github.com/users/joostjager/repos",
        "events_url": "https://api.github.com/users/joostjager/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/joostjager/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T14:51:03Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 9689787027,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAJBjmqT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9689787027",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "608ba0a5fc7adbc44173ce42b0ad42f71a6006ef",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/608ba0a5fc7adbc44173ce42b0ad42f71a6006ef",
      "created_at": "2023-06-30T16:39:54Z"
    },
    {
      "event": "unlabeled",
      "id": 9690407604,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAJBl-K0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9690407604",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T18:03:36Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9690916871,
      "node_id": "LE_lADOABII585cyOzezwAAAAJBn6gH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9690916871",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-06-30T18:52:30Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 9724188917,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAJDm1j1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9724188917",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-04T18:17:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 9748574133,
      "node_id": "LE_lADOABII585cyOzezwAAAAJFD2-1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/9748574133",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-07-06T22:10:00Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10047778887,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAJW5PBH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10047778887",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "642050d9eafc917e9d4468f94d696c7fdb7c660f",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/642050d9eafc917e9d4468f94d696c7fdb7c660f",
      "created_at": "2023-08-09T14:23:49Z"
    },
    {
      "event": "unlabeled",
      "id": 10049812185,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAJXA_bZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10049812185",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-09T16:24:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 10219277022,
      "node_id": "LE_lADOABII585cyOzezwAAAAJhHcre",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10219277022",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T10:28:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10221183332,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAJhOuFk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10221183332",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9bffd743d1d08c8e16a86214aabf5ecb92e4c1b3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/9bffd743d1d08c8e16a86214aabf5ecb92e4c1b3",
      "created_at": "2023-08-29T13:19:44Z"
    },
    {
      "event": "commented",
      "id": 1705682424,
      "node_id": "IC_kwDOABII585lqqX4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1705682424",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-04T20:34:56Z",
      "updated_at": "2023-09-04T20:34:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Could mark as draft while CI is red?",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1705682424",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10277147606,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAJkkNPW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10277147606",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fce1e63d3bcb13500afb4988b6b64e789a1704b6",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/fce1e63d3bcb13500afb4988b6b64e789a1704b6",
      "created_at": "2023-09-04T21:30:51Z"
    },
    {
      "event": "commented",
      "id": 1707706393,
      "node_id": "IC_kwDOABII585lyYgZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1707706393",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-06T05:47:05Z",
      "updated_at": "2023-09-06T05:47:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "It looks like tsan failed, but there is no log, when there should be a log. Maybe it was accidentally removed by https://github.com/bitcoin/bitcoin/pull/27667 ?",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1707706393",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 10345007297,
      "node_id": "LE_lADOABII585cyOzezwAAAAJonEjB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10345007297",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-12T10:33:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10346720201,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAJotmvJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10346720201",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "80cb63b28c38646468ab498198b2af6074d97da3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/80cb63b28c38646468ab498198b2af6074d97da3",
      "created_at": "2023-09-12T13:10:11Z"
    },
    {
      "event": "unlabeled",
      "id": 10347943188,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAJoyRUU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10347943188",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-12T14:46:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10347952900,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAJoyTsE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10347952900",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-12T14:47:33Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 10531004528,
      "node_id": "LE_lADOABII585cyOzezwAAAAJzsmBw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10531004528",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-02T21:55:48Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10693881822,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAJ9Z6_e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10693881822",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "937c89670d96faa393dbad2f3226189b8154b91d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/937c89670d96faa393dbad2f3226189b8154b91d",
      "created_at": "2023-10-18T14:23:41Z"
    },
    {
      "event": "unlabeled",
      "id": 10693992264,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAJ9aV9I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10693992264",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T14:31:16Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 10697000836,
      "node_id": "LE_lADOABII585cyOzezwAAAAJ9l0eE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10697000836",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-18T17:35:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1778849023,
      "node_id": "IC_kwDOABII585qBxT_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1778849023",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-25T09:16:14Z",
      "updated_at": "2023-10-25T09:16:14Z",
      "author_association": "MEMBER",
      "body": "CI is still red. Also, how would this work with AU?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1778849023",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10792842678,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAKDTbW2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10792842678",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4027f6e6020cb1ab9ab4edf778841a82d1769a87",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/4027f6e6020cb1ab9ab4edf778841a82d1769a87",
      "created_at": "2023-10-27T14:59:54Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10793295142,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAKDVJ0m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10793295142",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "created_at": "2023-10-27T15:44:32Z"
    },
    {
      "event": "unlabeled",
      "id": 10793692886,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAKDWq7W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10793692886",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-27T16:29:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1798294413,
      "node_id": "IC_kwDOABII585rL8uN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1798294413",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-07T11:09:23Z",
      "updated_at": "2023-11-07T12:18:19Z",
      "author_association": "MEMBER",
      "body": "> Could also give it a run rebased on top #27006.\r\n\r\nThat PR currently does not cleanly cherry-pick on top of this PR, not can I (trivially) rebase this PR on top top of it. Happy to try if you can make a branch.\r\n\r\nI just tried it again, deleting the blockfilterindex and rebuilding it. My impression is that it's going slower than before and I'm not seeing much CPU activity.\r\n\r\nI also noticed the shutdown takes a very long time, with the indexer (?) threads sticking around for many minutes:\r\n\r\n<img width=\"760\" alt=\"Scherm­afbeelding 2023-11-07 om 21 16 24\" src=\"https://github.com/bitcoin/bitcoin/assets/10217/909e8257-44e9-4c9c-8744-1876a9c41a9b\">\r\n",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1798294413",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "reviewed",
      "id": 1747911419,
      "node_id": "PRR_kwDOABII585oLwL7",
      "url": null,
      "actor": null,
      "commit_id": "373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-25T12:53:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1747911419",
      "submitted_at": "2023-11-25T12:53:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "commented",
      "id": 1826301507,
      "node_id": "IC_kwDOABII585s2yZD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1826301507",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-25T12:54:33Z",
      "updated_at": "2023-11-25T12:54:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "This all looks pretty promising. I left some feedback before continuing with the latter half of the PR.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1826301507",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "reviewed",
      "id": 1749211886,
      "node_id": "PRR_kwDOABII585oQtru",
      "url": null,
      "actor": null,
      "commit_id": "373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-25T23:01:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK.\r\n\r\nDone with my first pass, still want to think some of the approaches here over a bit.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1749211886",
      "submitted_at": "2023-11-25T23:01:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "reviewed",
      "id": 1749369732,
      "node_id": "PRR_kwDOABII585oRUOE",
      "url": null,
      "actor": null,
      "commit_id": "373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2023-11-26T16:08:46Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1749369732",
      "submitted_at": "2023-11-26T16:08:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "labeled",
      "id": 11253296861,
      "node_id": "LE_lADOABII585cyOzezwAAAAKev67d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11253296861",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-14T21:54:46Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1863088709,
      "node_id": "PRR_kwDOABII585vDHpF",
      "url": null,
      "actor": null,
      "commit_id": "373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-02-05T15:22:24Z",
      "author_association": "MEMBER",
      "body": "Focus is on #28955, which contains a good number of commits decoupled from this PR.\r\nWill come back here after it.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1863088709",
      "submitted_at": "2024-02-05T15:22:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "referenced",
      "id": 12187782474,
      "node_id": "REFE_lADOABII585cyOzezwAAAALWcs1K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12187782474",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0b96a1925e21b7d79506cc652f4d29781e9f949c",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/0b96a1925e21b7d79506cc652f4d29781e9f949c",
      "created_at": "2024-03-20T16:30:52Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12191981340,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAALWst8c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191981340",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "aa0da5a82a8e9910cad6c8e5e861bea0f4d5941d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/aa0da5a82a8e9910cad6c8e5e861bea0f4d5941d",
      "created_at": "2024-03-20T22:07:21Z"
    },
    {
      "event": "unlabeled",
      "id": 12192870117,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALWwG7l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12192870117",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T23:53:12Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12193519646,
      "node_id": "LE_lADOABII585cyOzezwAAAALWylge",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12193519646",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T01:36:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2011026298,
      "node_id": "IC_kwDOABII58533dN6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2011026298",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T01:36:40Z",
      "updated_at": "2024-03-21T01:36:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/22906894781</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2011026298",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12204386011,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAALXcCbb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12204386011",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fd79112a1cec4cf993200bd89e6fd19957bb608e",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/fd79112a1cec4cf993200bd89e6fd19957bb608e",
      "created_at": "2024-03-21T17:22:34Z"
    },
    {
      "event": "commented",
      "id": 2013158583,
      "node_id": "IC_kwDOABII5853_ly3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2013158583",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T17:44:10Z",
      "updated_at": "2024-03-21T22:13:56Z",
      "author_association": "MEMBER",
      "body": "Running it again, let's see how quick it is...\r\n\r\nSince I might set `indexworkers=32` in my config file, which is great for the initial sync and if it needs to do a big catchup. But does it cause much overhead when it's up to date? Maybe the threads should spin down if there's not much work.\r\n\r\nWhat happens when there are multiple `readBlockFromDisk` calls around the same time? I don't see any (obvious) thread locking happening in `CAutoFile`. Since I keep block files on a spinning disk (`-blocksdir`), I wonder if that potentially slows things down - compared to fetching one file in a single uninterrupted operation.\r\n\r\nSo far (block 200K) my spinning disk is making a ton of noise and CPU activity is negligible.\r\n\r\n---\r\n\r\nIt took 4 hours and 23 minutes. That's an improvement over the 5 hours 46 minutes without: https://github.com/bitcoin/bitcoin/pull/28955#issuecomment-1961511162\r\n\r\nNote that last year I tested with SSD - which resulted in a 16x improvement https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-1420800151. This time I used a spinning disk. CPU activity was negligible all the way.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2013158583",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "commented",
      "id": 2013176407,
      "node_id": "IC_kwDOABII5853_qJX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2013176407",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T17:54:05Z",
      "updated_at": "2024-03-21T17:54:37Z",
      "author_association": "MEMBER",
      "body": "> Running it again, let's see how quick it is...\r\n> \r\n> Since I might set `indexworkers=32` in my config file, which is great for the initial sync and if it needs to do a big catchup. But does it cause much overhead when it's up to date? Maybe the threads should spin down if there's not much work.\r\n\r\nYeah sure. The thread pool can be destructed once all indexes initial sync finish (once the index is synced, it starts receiving blocks through the validation signals and does not use the initial sync workers anymore). \r\nI'm currently tackling theCharlatan's feedback, and thinking about some improvements. Will add this change too on the next push.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2013176407",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "unlabeled",
      "id": 12205915373,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALXh3zt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12205915373",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-21T19:29:31Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12224388900,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAALYoV8k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12224388900",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eff91c8656cd49b5b626925f5ec281b06f4eba28",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/eff91c8656cd49b5b626925f5ec281b06f4eba28",
      "created_at": "2024-03-23T13:08:13Z"
    },
    {
      "event": "commented",
      "id": 2016496882,
      "node_id": "IC_kwDOABII5854MUzy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2016496882",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-23T13:34:19Z",
      "updated_at": "2024-03-23T16:39:26Z",
      "author_association": "MEMBER",
      "body": "Thanks for the in-depth review theCharlatan! Most comments were tackled. And thanks for testing Sjors!\r\n\r\nNow that we've reached this point (after #28955 merge), I'm rethinking and polishing the design. I'm not totally convinced about the current implementation anymore. We've grown a lot since this was implemented two years ago.\r\nOther than that, Sjors had a nice idea that I want to try out (or at least design this in a way so that the idea can be implemented in isolation in the future) --> Instead of dividing the work based on block ranges, it can be divided based on block file ranges. This would minimize the needle movement on spinning disks.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2016496882",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 12224496985,
      "node_id": "LE_lADOABII585cyOzezwAAAALYowVZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12224496985",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-23T14:10:34Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2016505858,
      "node_id": "IC_kwDOABII5854MXAC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2016505858",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-23T14:10:35Z",
      "updated_at": "2024-03-23T14:10:35Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/23011013574</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2016505858",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "commented",
      "id": 2017518691,
      "node_id": "IC_kwDOABII5854QORj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2017518691",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-25T09:06:58Z",
      "updated_at": "2024-03-25T09:08:07Z",
      "author_association": "MEMBER",
      "body": ">  Instead of dividing the work based on block ranges, it can be divided based on block file ranges. This would minimize the needle movement on spinning disks.\r\n\r\nIt's possible that this can be achieved with block ranges too. But you have to make sure only one block range is read at any given time. I.e. the other threads should wait while a disk read is in progress. I suspect the problem lies in having 32 threads trying to read different things at the same time, and then operating system goes and fetches a few kilobytes, a few kilobytes there, etc. Though I haven't measured this.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2017518691",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "unlabeled",
      "id": 12361051331,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALgxqzD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12361051331",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-04T16:08:44Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2039182163,
      "node_id": "IC_kwDOABII5855i3NT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2039182163",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T07:54:33Z",
      "updated_at": "2024-04-05T07:54:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/23011013574</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2039182163",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 12369611035,
      "node_id": "LE_lADOABII585cyOzezwAAAALhSUkb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12369611035",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T07:54:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2039191008,
      "node_id": "IC_kwDOABII5855i5Xg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2039191008",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T07:59:13Z",
      "updated_at": "2024-04-05T07:59:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "```\r\ntest/threadpool_tests.cpp(9): Entering test suite \"threadpool_tests\"\r\ntest/threadpool_tests.cpp(11): Entering test case \"threadpool_basic\"\r\n==================\r\nWARNING: ThreadSanitizer: data race (pid=26928)\r\n  Write of size 8 at 0x721000012718 by thread T13 (mutexes: write M0):\r\n    #0 free <null> (test_bitcoin+0x156ae3) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #1 std::range_error::~range_error() <null> (libc++abi.so.1+0x28b74) (BuildId: 40d8c515ee7a3c2d826acc730982f279ffe00146)\r\n    #2 std::__1::__shared_count::__release_shared[abi:ne180100]() /usr/lib/llvm-18/bin/../include/c++/v1/__memory/shared_ptr.h:157:7 (test_bitcoin+0xb2e070) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #3 std::__1::__shared_weak_count::__release_shared[abi:ne180100]() /usr/lib/llvm-18/bin/../include/c++/v1/__memory/shared_ptr.h:186:25 (test_bitcoin+0xb2e070)\r\n    #4 std::__1::shared_ptr<std::__1::packaged_task<void ()>>::~shared_ptr[abi:ne180100]() /usr/lib/llvm-18/bin/../include/c++/v1/__memory/shared_ptr.h:648:17 (test_bitcoin+0xb2e070)\r\n    #5 std::__1::future<decltype(fp())> ThreadPool::Submit<threadpool_tests::threadpool_basic::test_method()::$_6>(threadpool_tests::threadpool_basic::test_method()::$_6)::'lambda'()::~() src/./util/threadpool.h:96:34 (test_bitcoin+0xb2e070)\r\n    #6 std::__1::__compressed_pair_elem<std::__1::future<decltype(fp())> ThreadPool::Submit<threadpool_tests::threadpool_basic::test_method()::$_6>(threadpool_tests::threadpool_basic::test_method()::$_6)::'lambda'(), 0, false>::~__compressed_pair_elem() /usr/lib/llvm-18/bin/../include/c++/v1/__memory/compressed_pair.h:44:8 (test_bitcoin+0xb2e070)\r\n    #7 std::__1::__function::__alloc_func<std::__1::future<decltype(fp())> ThreadPool::Submit<threadpool_tests::threadpool_basic::test_method()::$_6>(threadpool_tests::threadpool_basic::test_method()::$_6)::'lambda'(), std::__1::allocator<std::__1::future<decltype(fp())> ThreadPool::Submit<threadpool_tests::threadpool_basic::test_method()::$_6>(threadpool_tests::threadpool_basic::test_method()::$_6)::'lambda'()>, void ()>::destroy[abi:ne180100]() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:182:58 (test_bitcoin+0xb2e070)\r\n    #8 std::__1::__function::__func<std::__1::future<decltype(fp())> ThreadPool::Submit<threadpool_tests::threadpool_basic::test_method()::$_6>(threadpool_tests::threadpool_basic::test_method()::$_6)::'lambda'(), std::__1::allocator<std::__1::future<decltype(fp())> ThreadPool::Submit<threadpool_tests::threadpool_basic::test_method()::$_6>(threadpool_tests::threadpool_basic::test_method()::$_6)::'lambda'()>, void ()>::destroy() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:297:8 (test_bitcoin+0xb2e070)\r\n    #9 std::__1::__function::__value_func<void ()>::~__value_func[abi:ne180100]() src/./sync.h (test_bitcoin+0x442c8b) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #10 std::__1::function<void ()>::~function() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:972:43 (test_bitcoin+0x442c8b)\r\n    #11 ThreadPool::WorkerThread() src/./util/threadpool.h:56:9 (test_bitcoin+0x442c8b)\r\n    #12 ThreadPool::Start(int)::'lambda'()::operator()() const src/./util/threadpool.h:73:101 (test_bitcoin+0x442ae5) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #13 decltype(std::declval<ThreadPool::Start(int)::'lambda'()&>()()) std::__1::__invoke[abi:ne180100]<ThreadPool::Start(int)::'lambda'()&>(ThreadPool::Start(int)::'lambda'()&) /usr/lib/llvm-18/bin/../include/c++/v1/__type_traits/invoke.h:344:25 (test_bitcoin+0x442ae5)\r\n    #14 void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne180100]<ThreadPool::Start(int)::'lambda'()&>(ThreadPool::Start(int)::'lambda'()&) /usr/lib/llvm-18/bin/../include/c++/v1/__type_traits/invoke.h:419:5 (test_bitcoin+0x442ae5)\r\n    #15 std::__1::__function::__alloc_func<ThreadPool::Start(int)::'lambda'(), std::__1::allocator<ThreadPool::Start(int)::'lambda'()>, void ()>::operator()[abi:ne180100]() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:169:12 (test_bitcoin+0x442ae5)\r\n    #16 std::__1::__function::__func<ThreadPool::Start(int)::'lambda'(), std::__1::allocator<ThreadPool::Start(int)::'lambda'()>, void ()>::operator()() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:311:10 (test_bitcoin+0x442ae5)\r\n    #17 std::__1::__function::__value_func<void ()>::operator()[abi:ne180100]() const /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:428:12 (test_bitcoin+0x1815b98) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #18 std::__1::function<void ()>::operator()() const /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:981:10 (test_bitcoin+0x1815b98)\r\n    #19 util::TraceThread(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>) src/util/thread.cpp:21:9 (test_bitcoin+0x1815b98)\r\n    #20 decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>(), std::declval<ThreadPool::Start(int)::'lambda'()>())) std::__1::__invoke[abi:ne180100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/__type_traits/invoke.h:344:25 (test_bitcoin+0x44261e) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #21 void std::__1::__thread_execute[abi:ne180100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'(), 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-18/bin/../include/c++/v1/__thread/thread.h:193:3 (test_bitcoin+0x44261e)\r\n    #22 void* std::__1::__thread_proxy[abi:ne180100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>>(void*) /usr/lib/llvm-18/bin/../include/c++/v1/__thread/thread.h:202:3 (test_bitcoin+0x44261e)\r\n  Previous read of size 8 at 0x721000012718 by main thread:\r\n    #0 strcmp <null> (test_bitcoin+0x161718) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #1 boost::test_tools::tt_detail::equal_impl(char const*, char const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/test_tools.ipp:463:30 (test_bitcoin+0x1fca6f) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #2 boost::test_tools::assertion_result boost::test_tools::tt_detail::equal_impl_frwd::call_impl<char const*, char [25]>(char const* const&, char const (&) [25], mpl_::bool_<false>) const /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/tools/old/impl.hpp:130:16 (test_bitcoin+0xb2f88f) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #3 boost::test_tools::assertion_result boost::test_tools::tt_detail::equal_impl_frwd::operator()<char const*, char [25]>(char const* const&, char const (&) [25]) const /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/tools/old/impl.hpp:145:16 (test_bitcoin+0xb2f88f)\r\n    #4 bool boost::test_tools::tt_detail::check_frwd<boost::test_tools::tt_detail::equal_impl_frwd, char const*, char [25]>(boost::test_tools::tt_detail::equal_impl_frwd, boost::unit_test::lazy_ostream const&, boost::unit_test::basic_cstring<char const>, unsigned long, boost::test_tools::tt_detail::tool_level, boost::test_tools::tt_detail::check_type, char const* const&, char const*, char const (&) [25], char const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/tools/old/impl.hpp:92:1 (test_bitcoin+0xb2f88f)\r\n    #5 threadpool_tests::threadpool_basic::test_method() src/test/threadpool_tests.cpp:117:13 (test_bitcoin+0xb2855b) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #6 threadpool_tests::threadpool_basic_invoker() src/test/threadpool_tests.cpp:11:1 (test_bitcoin+0xb26256) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #7 boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:117:11 (test_bitcoin+0x31b9dd) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #8 boost::function0<void>::operator()() const /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:763:14 (test_bitcoin+0x26f5f8) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #9 boost::detail::forward::operator()() /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:1388:32 (test_bitcoin+0x26f5f8)\r\n    #10 boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:137:18 (test_bitcoin+0x26f5f8)\r\n    #11 boost::function0<int>::operator()() const /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:763:14 (test_bitcoin+0x1f49f3) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #12 int boost::detail::do_invoke<boost::shared_ptr<boost::detail::translator_holder_base>, boost::function<int ()>>(boost::shared_ptr<boost::detail::translator_holder_base> const&, boost::function<int ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:301:30 (test_bitcoin+0x1f49f3)\r\n    #13 boost::execution_monitor::catch_signals(boost::function<int ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:903:16 (test_bitcoin+0x1f49f3)\r\n    #14 boost::execution_monitor::execute(boost::function<int ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:1301:16 (test_bitcoin+0x1f4d6a) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #15 boost::execution_monitor::vexecute(boost::function<void ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:1397:5 (test_bitcoin+0x1f04d8) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #16 boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/unit_test_monitor.ipp:49:9 (test_bitcoin+0x1f04d8)\r\n    #17 boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:815:44 (test_bitcoin+0x227215) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #18 boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:784:58 (test_bitcoin+0x227aa1) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #19 boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:784:58 (test_bitcoin+0x227aa1) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #20 boost::unit_test::framework::run(unsigned long, bool) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:1722:29 (test_bitcoin+0x1ef05f) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #21 boost::unit_test::unit_test_main(boost::unit_test::test_suite* (*)(int, char**), int, char**) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/unit_test_main.ipp:250:9 (test_bitcoin+0x209e26) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #22 main /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/unit_test_main.ipp:306:12 (test_bitcoin+0x20a753) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n  Mutex M0 (0x7fff25c67fe0) created at:\r\n    #0 pthread_mutex_trylock <null> (test_bitcoin+0x159aae) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #1 std::__1::mutex::try_lock() <null> (libc++.so.1+0x5f63c) (BuildId: b52c260d7d8ecb73699f2407c0a9b193fc4761fc)\r\n    #2 UniqueLock<AnnotatedMixin<std::__1::mutex>>::UniqueLock(AnnotatedMixin<std::__1::mutex>&, char const*, char const*, int, bool) src/./sync.h:182:13 (test_bitcoin+0x442c37) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #3 ThreadPool::WorkerThread() src/./util/threadpool.h:37:9 (test_bitcoin+0x442c37)\r\n    #4 ThreadPool::Start(int)::'lambda'()::operator()() const src/./util/threadpool.h:73:101 (test_bitcoin+0x442ae5) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #5 decltype(std::declval<ThreadPool::Start(int)::'lambda'()&>()()) std::__1::__invoke[abi:ne180100]<ThreadPool::Start(int)::'lambda'()&>(ThreadPool::Start(int)::'lambda'()&) /usr/lib/llvm-18/bin/../include/c++/v1/__type_traits/invoke.h:344:25 (test_bitcoin+0x442ae5)\r\n    #6 void std::__1::__invoke_void_return_wrapper<void, true>::__call[abi:ne180100]<ThreadPool::Start(int)::'lambda'()&>(ThreadPool::Start(int)::'lambda'()&) /usr/lib/llvm-18/bin/../include/c++/v1/__type_traits/invoke.h:419:5 (test_bitcoin+0x442ae5)\r\n    #7 std::__1::__function::__alloc_func<ThreadPool::Start(int)::'lambda'(), std::__1::allocator<ThreadPool::Start(int)::'lambda'()>, void ()>::operator()[abi:ne180100]() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:169:12 (test_bitcoin+0x442ae5)\r\n    #8 std::__1::__function::__func<ThreadPool::Start(int)::'lambda'(), std::__1::allocator<ThreadPool::Start(int)::'lambda'()>, void ()>::operator()() /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:311:10 (test_bitcoin+0x442ae5)\r\n    #9 std::__1::__function::__value_func<void ()>::operator()[abi:ne180100]() const /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:428:12 (test_bitcoin+0x1815b98) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #10 std::__1::function<void ()>::operator()() const /usr/lib/llvm-18/bin/../include/c++/v1/__functional/function.h:981:10 (test_bitcoin+0x1815b98)\r\n    #11 util::TraceThread(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>) src/util/thread.cpp:21:9 (test_bitcoin+0x1815b98)\r\n    #12 decltype(std::declval<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>)>()(std::declval<std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>>(), std::declval<ThreadPool::Start(int)::'lambda'()>())) std::__1::__invoke[abi:ne180100]<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/__type_traits/invoke.h:344:25 (test_bitcoin+0x44261e) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #13 void std::__1::__thread_execute[abi:ne180100]<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'(), 2ul, 3ul>(std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>&, std::__1::__tuple_indices<2ul, 3ul>) /usr/lib/llvm-18/bin/../include/c++/v1/__thread/thread.h:193:3 (test_bitcoin+0x44261e)\r\n    #14 void* std::__1::__thread_proxy[abi:ne180100]<std::__1::tuple<std::__1::unique_ptr<std::__1::__thread_struct, std::__1::default_delete<std::__1::__thread_struct>>, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>>(void*) /usr/lib/llvm-18/bin/../include/c++/v1/__thread/thread.h:202:3 (test_bitcoin+0x44261e)\r\n  Thread T13 'b-threadpool_wo' (tid=26954, running) created by main thread at:\r\n    #0 pthread_create <null> (test_bitcoin+0x157daf) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #1 std::__1::__libcpp_thread_create[abi:ne180100](unsigned long*, void* (*)(void*), void*) /usr/lib/llvm-18/bin/../include/c++/v1/__threading_support:317:10 (test_bitcoin+0x442473) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #2 std::__1::thread::thread<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'(), void>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/__thread/thread.h:212:14 (test_bitcoin+0x442473)\r\n    #3 std::__1::thread* std::__1::construct_at[abi:ne180100]<std::__1::thread, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'(), std::__1::thread*>(std::__1::thread*, void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/__memory/construct_at.h:41:46 (test_bitcoin+0x4421c5) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #4 std::__1::thread* std::__1::__construct_at[abi:ne180100]<std::__1::thread, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'(), std::__1::thread*>(std::__1::thread*, void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/__memory/construct_at.h:49:10 (test_bitcoin+0x4421c5)\r\n    #5 void std::__1::allocator_traits<std::__1::allocator<std::__1::thread>>::construct[abi:ne180100]<std::__1::thread, void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'(), void, void>(std::__1::allocator<std::__1::thread>&, std::__1::thread*, void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/__memory/allocator_traits.h:305:5 (test_bitcoin+0x4421c5)\r\n    #6 std::__1::thread* std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::__emplace_back_slow_path<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/vector:1491:3 (test_bitcoin+0x4421c5)\r\n    #7 std::__1::thread& std::__1::vector<std::__1::thread, std::__1::allocator<std::__1::thread>>::emplace_back<void (*)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>, ThreadPool::Start(int)::'lambda'()>(void (*&&)(std::__1::basic_string_view<char, std::__1::char_traits<char>>, std::__1::function<void ()>), std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char>>&&, ThreadPool::Start(int)::'lambda'()&&) /usr/lib/llvm-18/bin/../include/c++/v1/vector:1511:13 (test_bitcoin+0x43efb4) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #8 ThreadPool::Start(int) src/./util/threadpool.h:73:23 (test_bitcoin+0x43efb4)\r\n    #9 threadpool_tests::threadpool_basic::test_method() src/test/threadpool_tests.cpp:109:20 (test_bitcoin+0xb283a6) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #10 threadpool_tests::threadpool_basic_invoker() src/test/threadpool_tests.cpp:11:1 (test_bitcoin+0xb26256) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #11 boost::detail::function::void_function_invoker0<void (*)(), void>::invoke(boost::detail::function::function_buffer&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:117:11 (test_bitcoin+0x31b9dd) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #12 boost::function0<void>::operator()() const /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:763:14 (test_bitcoin+0x26f5f8) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #13 boost::detail::forward::operator()() /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:1388:32 (test_bitcoin+0x26f5f8)\r\n    #14 boost::detail::function::function_obj_invoker0<boost::detail::forward, int>::invoke(boost::detail::function::function_buffer&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:137:18 (test_bitcoin+0x26f5f8)\r\n    #15 boost::function0<int>::operator()() const /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/function/function_template.hpp:763:14 (test_bitcoin+0x1f49f3) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #16 int boost::detail::do_invoke<boost::shared_ptr<boost::detail::translator_holder_base>, boost::function<int ()>>(boost::shared_ptr<boost::detail::translator_holder_base> const&, boost::function<int ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:301:30 (test_bitcoin+0x1f49f3)\r\n    #17 boost::execution_monitor::catch_signals(boost::function<int ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:903:16 (test_bitcoin+0x1f49f3)\r\n    #18 boost::execution_monitor::execute(boost::function<int ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:1301:16 (test_bitcoin+0x1f4d6a) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #19 boost::execution_monitor::vexecute(boost::function<void ()> const&) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/execution_monitor.ipp:1397:5 (test_bitcoin+0x1f04d8) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #20 boost::unit_test::unit_test_monitor_t::execute_and_translate(boost::function<void ()> const&, unsigned long) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/unit_test_monitor.ipp:49:9 (test_bitcoin+0x1f04d8)\r\n    #21 boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:815:44 (test_bitcoin+0x227215) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #22 boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:784:58 (test_bitcoin+0x227aa1) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #23 boost::unit_test::framework::state::execute_test_tree(unsigned long, unsigned long, boost::unit_test::framework::state::random_generator_helper const*) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:784:58 (test_bitcoin+0x227aa1) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #24 boost::unit_test::framework::run(unsigned long, bool) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/framework.ipp:1722:29 (test_bitcoin+0x1ef05f) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #25 boost::unit_test::unit_test_main(boost::unit_test::test_suite* (*)(int, char**), int, char**) /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/unit_test_main.ipp:250:9 (test_bitcoin+0x209e26) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\n    #26 main /ci_container_base/depends/x86_64-pc-linux-gnu/include/boost/test/impl/unit_test_main.ipp:306:12 (test_bitcoin+0x20a753) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d)\r\nSUMMARY: ThreadSanitizer: data race (/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src/test/test_bitcoin+0x156ae3) (BuildId: 5ce48731414b473abd5838c79ce7029f5872bd2d) in free\r\n==================\r\nRunning tests: translation_tests from test/translation_tests.cpp\r\nmake[3]: *** [Makefile:22558: test/threadpool_tests.cpp.test] Error 1\r\nmake[3]: *** Waiting for unfinished jobs....\r\nmake[3]: Leaving directory '/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src'\r\nmake[2]: *** [Makefile:20520: check-am] Error 2\r\nmake[2]: Leaving directory '/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src'\r\nmake[1]: *** [Makefile:20185: check-recursive] Error 1\r\nmake[1]: Leaving directory '/ci_container_base/ci/scratch/build/bitcoin-x86_64-pc-linux-gnu/src'\r\nmake: *** [Makefile:756: check-recursive] Error 1\r\nExit status: 2",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2039191008",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "unlabeled",
      "id": 12369963399,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALhTqmH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12369963399",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T08:19:24Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2039247719,
      "node_id": "IC_kwDOABII5855jHNn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2039247719",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T08:37:46Z",
      "updated_at": "2024-04-05T08:37:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/23011013574</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2039247719",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 12370127953,
      "node_id": "LE_lADOABII585cyOzezwAAAALhUSxR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12370127953",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T08:37:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 12370138966,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALhUVdW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12370138966",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T08:38:56Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 12370784317,
      "node_id": "LE_lADOABII585cyOzezwAAAALhWzA9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12370784317",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T09:34:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12384627023,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAALiLmlP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12384627023",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "57e37aecfdacb6f911dd57c4c1fb680a7660633d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/57e37aecfdacb6f911dd57c4c1fb680a7660633d",
      "created_at": "2024-04-07T17:30:09Z"
    },
    {
      "event": "commented",
      "id": 2061806007,
      "node_id": "IC_kwDOABII58565Km3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2061806007",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-17T17:19:10Z",
      "updated_at": "2024-04-17T17:19:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "Are you still working on this? If not, this could be moved to draft for as long as the tsan CI is failing.",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2061806007",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "convert_to_draft",
      "id": 12522218342,
      "node_id": "CTDE_lADOABII585cyOzezwAAAALqYeNm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12522218342",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-18T11:50:54Z"
    },
    {
      "event": "labeled",
      "id": 12664867407,
      "node_id": "LE_lADOABII585cyOzezwAAAALy4opP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12664867407",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-30T22:53:44Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12671271372,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAALzREHM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12671271372",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4ceaf6253eada351a20a82ba69a3aee636726527",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/4ceaf6253eada351a20a82ba69a3aee636726527",
      "created_at": "2024-05-01T14:44:51Z"
    },
    {
      "event": "unlabeled",
      "id": 12671771631,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALzS-Pv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12671771631",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T15:30:03Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 12673326435,
      "node_id": "UNLE_lADOABII585cyOzezwAAAALzY51j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12673326435",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-01T18:18:13Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13161649192,
      "node_id": "LE_lADOABII585cyOzezwAAAAMQftQo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13161649192",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T14:16:28Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2168146153,
      "node_id": "IC_kwDOABII586BO0jp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2168146153",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-14T14:16:29Z",
      "updated_at": "2024-06-14T14:16:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/24470829129</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2168146153",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13300039090,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAMYvn2y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13300039090",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bfc8dce122474ddf6e5814731fa816cbdf1f7c7b",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/bfc8dce122474ddf6e5814731fa816cbdf1f7c7b",
      "created_at": "2024-06-26T14:57:36Z"
    },
    {
      "event": "labeled",
      "id": 13770574628,
      "node_id": "LE_lADOABII585cyOzezwAAAAM0yksk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13770574628",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-05T23:03:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "renamed",
      "id": 13793644708,
      "node_id": "RTE_lADOABII585cyOzezwAAAAM2KlCk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13793644708",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-07T14:41:29Z",
      "rename": {
        "from": "index: blockfilter initial sync speedup, parallelize process",
        "to": "index: initial sync speedup, parallelize process"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13886355441,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAM7sPfx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13886355441",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e798711ab0f3dd973ab359f54c6f79581d79e2c3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/e798711ab0f3dd973ab359f54c6f79581d79e2c3",
      "created_at": "2024-08-14T19:32:24Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 13886362048,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAM7sRHA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13886362048",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "513fbc6b1fae951ea292bb3c8a32d104773995f0",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/513fbc6b1fae951ea292bb3c8a32d104773995f0",
      "created_at": "2024-08-14T19:33:02Z"
    },
    {
      "event": "unlabeled",
      "id": 13887507846,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAM7wo2G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13887507846",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-14T21:15:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 13909123869,
      "node_id": "LE_lADOABII585cyOzezwAAAAM9DGMd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13909123869",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-16T10:24:22Z",
      "label": {
        "name": "Needs CMake port",
        "color": "0e8a16"
      }
    },
    {
      "event": "unlabeled",
      "id": 14055891328,
      "node_id": "UNLE_lADOABII585cyOzezwAAAANFy-GA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14055891328",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-08-29T05:21:37Z",
      "label": {
        "name": "Needs CMake port",
        "color": "0e8a16"
      }
    },
    {
      "event": "labeled",
      "id": 14107551985,
      "node_id": "LE_lADOABII585cyOzezwAAAANI4Cjx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14107551985",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-09-02T22:46:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 14477997865,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAANe9Lcp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14477997865",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "created_at": "2024-10-01T19:12:52Z"
    },
    {
      "event": "unlabeled",
      "id": 14478816742,
      "node_id": "UNLE_lADOABII585cyOzezwAAAANfATXm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/14478816742",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-10-01T20:04:01Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1592642598,
      "node_id": "PRR_kwDOABII585e7cwm",
      "url": null,
      "actor": null,
      "commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-10-23T15:02:45Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-1592642598",
      "submitted_at": "2024-10-23T15:02:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "reviewed",
      "id": 2442986452,
      "node_id": "PRR_kwDOABII586RnQPU",
      "url": null,
      "actor": null,
      "commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2024-11-18T15:37:35Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2442986452",
      "submitted_at": "2024-11-18T15:37:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "commented",
      "id": 2483780319,
      "node_id": "IC_kwDOABII586UC3rf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2483780319",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-18T18:11:52Z",
      "updated_at": "2024-11-18T18:11:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "I'm using the ThreadPool here in https://github.com/bitcoin/bitcoin/pull/31132 as a cherry-picked commit, modulo changing `ThreadPool() {}` to `ThreadPool() = default;`. Perhaps we could pull this out to a separate PR since it would be useful for both changes.\r\n\r\nOne request for the ThreadPool would be to track in flight tasks being executed. That way we could write tests that ensure that all tasks have been completed before continuing, even if we don't have access to the futures.",
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2483780319",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "labeled",
      "id": 16033249670,
      "node_id": "LE_lADOABII585cyOzezwAAAAO7p_mG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16033249670",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T18:28:11Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16466543846,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAPVe4Tm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16466543846",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "349b09983d994cb46faeed12b123ae2269c6c516",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/349b09983d994cb46faeed12b123ae2269c6c516",
      "created_at": "2025-02-25T18:57:49Z"
    },
    {
      "event": "unlabeled",
      "id": 16468554442,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAPVmjLK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16468554442",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-25T20:54:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 16468670135,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAPVm_a3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16468670135",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-25T21:03:30Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2646111093,
      "node_id": "PRR_kwDOABII586duHN1",
      "url": null,
      "actor": null,
      "commit_id": "349b09983d994cb46faeed12b123ae2269c6c516",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-02-26T22:37:20Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "yancyribbens",
        "id": 817736,
        "node_id": "MDQ6VXNlcjgxNzczNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/817736?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yancyribbens",
        "html_url": "https://github.com/yancyribbens",
        "followers_url": "https://api.github.com/users/yancyribbens/followers",
        "following_url": "https://api.github.com/users/yancyribbens/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yancyribbens/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yancyribbens/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yancyribbens/subscriptions",
        "organizations_url": "https://api.github.com/users/yancyribbens/orgs",
        "repos_url": "https://api.github.com/users/yancyribbens/repos",
        "events_url": "https://api.github.com/users/yancyribbens/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yancyribbens/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2646111093",
      "submitted_at": "2025-02-26T22:37:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "labeled",
      "id": 16720936080,
      "node_id": "LE_lADOABII585cyOzezwAAAAPkpTyQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16720936080",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T20:45:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2754283048,
      "node_id": "PRR_kwDOABII586kKwYo",
      "url": null,
      "actor": null,
      "commit_id": "349b09983d994cb46faeed12b123ae2269c6c516",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-04-09T21:50:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 349b09983d994cb46faeed12b123ae2269c6c516 and I reviewed most of the code. Seems like a nice design and good approach. Plan to finish reviewing later.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2754283048",
      "submitted_at": "2025-04-09T21:50:38Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18008998560,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAQxa4Kg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18008998560",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "55f23cddc345a818191b86479a6328001d32dc26",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/55f23cddc345a818191b86479a6328001d32dc26",
      "created_at": "2025-06-05T20:00:39Z"
    },
    {
      "event": "reviewed",
      "id": 2901371695,
      "node_id": "PRR_kwDOABII586s72sv",
      "url": null,
      "actor": null,
      "commit_id": "55f23cddc345a818191b86479a6328001d32dc26",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-05T20:02:58Z",
      "author_association": "MEMBER",
      "body": "Thanks for the review, andrewtoth and ryanofsky!\r\nAddressed most of the suggestions, but not all yet. Will finish the rest soon.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2901371695",
      "submitted_at": "2025-06-05T20:02:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "unlabeled",
      "id": 18010086099,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAQxfBrT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18010086099",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-05T21:00:35Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18011200575,
      "node_id": "LE_lADOABII585cyOzezwAAAAQxjRw_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18011200575",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-05T22:09:57Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2946515339,
      "node_id": "IC_kwDOABII586voEGL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2946515339",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-05T22:09:58Z",
      "updated_at": "2025-06-05T22:09:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `TSan, depends, gui`: https://github.com/bitcoin/bitcoin/runs/43571812170</sub>\n<sub>LLM reason (✨ experimental): The CI failure is caused by a segmentation fault occurring in CBlockIndex::GetBlockPos().</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2946515339",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18012374658,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAQxnwaC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18012374658",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1ccb9f6959e28aabd06e891cdf0b30ee99add2f3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/1ccb9f6959e28aabd06e891cdf0b30ee99add2f3",
      "created_at": "2025-06-05T23:16:12Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18014622934,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAQxwVTW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18014622934",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f3f5e4cb071497f7c9fccf5e81edc5c476333098",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/f3f5e4cb071497f7c9fccf5e81edc5c476333098",
      "created_at": "2025-06-06T01:34:08Z"
    },
    {
      "event": "unlabeled",
      "id": 18015205542,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAQxyjim",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18015205542",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-06T02:24:00Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2950793651,
      "node_id": "IC_kwDOABII586v4Ymz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2950793651",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-06T21:04:37Z",
      "updated_at": "2025-06-06T21:04:37Z",
      "author_association": "MEMBER",
      "body": "Decoupled part of this work inside #32694 - combining it with part of #24230.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2950793651",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "referenced",
      "id": 18123908173,
      "node_id": "REFE_lADOABII585cyOzezwAAAAQ4RORN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18123908173",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "19765dca197a6334e5ad3985a30c7836374d5c26",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/19765dca197a6334e5ad3985a30c7836374d5c26",
      "created_at": "2025-06-12T23:01:26Z"
    },
    {
      "event": "labeled",
      "id": 18124249758,
      "node_id": "LE_lADOABII585cyOzezwAAAAQ4Shqe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18124249758",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-12T23:51:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18124619958,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAQ4T8C2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18124619958",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "53bc8b9663fd51fa43eb568aee8a38936cc7c6e8",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/53bc8b9663fd51fa43eb568aee8a38936cc7c6e8",
      "created_at": "2025-06-13T00:20:55Z"
    },
    {
      "event": "unlabeled",
      "id": 18125540099,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAQ4XcsD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18125540099",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-13T01:58:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2924075732,
      "node_id": "PRR_kwDOABII586uSdrU",
      "url": null,
      "actor": null,
      "commit_id": "53bc8b9663fd51fa43eb568aee8a38936cc7c6e8",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-13T09:38:15Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2924075732",
      "submitted_at": "2025-06-13T09:38:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "labeled",
      "id": 18180226501,
      "node_id": "LE_lADOABII585cyOzezwAAAAQ7oD3F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18180226501",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-17T00:05:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 18186434605,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAQ7_vgt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18186434605",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-17T09:06:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18237550711,
      "node_id": "LE_lADOABII585cyOzezwAAAAQ_CvB3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18237550711",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-20T00:34:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2989481208,
      "node_id": "IC_kwDOABII586yL9z4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2989481208",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-20T00:34:42Z",
      "updated_at": "2025-06-20T00:34:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/44013275482</sub>\n<sub>LLM reason (✨ experimental): The CI failed due to compilation errors caused by an incorrect macro invocation in the source code.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2989481208",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18250815190,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAQ_1VbW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18250815190",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "69ac2c05e04ff66428426d00fb2db4672d85726c",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/69ac2c05e04ff66428426d00fb2db4672d85726c",
      "created_at": "2025-06-20T16:42:23Z"
    },
    {
      "event": "unlabeled",
      "id": 18251585120,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAQ_4RZg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18251585120",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-20T17:43:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18279625241,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARBjPIZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18279625241",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d14fa644acf03919a74909b52916fd4dff4aa88e",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/d14fa644acf03919a74909b52916fd4dff4aa88e",
      "created_at": "2025-06-23T19:08:20Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18279708510,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARBjjde",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18279708510",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f4041cb91ff965fa08ac36ddb130f67e2d1671b0",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/f4041cb91ff965fa08ac36ddb130f67e2d1671b0",
      "created_at": "2025-06-23T19:14:01Z"
    },
    {
      "event": "reviewed",
      "id": 2951262244,
      "node_id": "PRR_kwDOABII586v6LAk",
      "url": null,
      "actor": null,
      "commit_id": "d14fa644acf03919a74909b52916fd4dff4aa88e",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-23T19:15:17Z",
      "author_association": "MEMBER",
      "body": "Updated based on the feedback. Thanks!\r\nI believe I’ve addressed all the comments, but let me know if I missed anything.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2951262244",
      "submitted_at": "2025-06-23T19:15:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "ready_for_review",
      "id": 18279926496,
      "node_id": "RFRE_lADOABII585cyOzezwAAAARBkYrg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18279926496",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T19:28:28Z"
    },
    {
      "event": "labeled",
      "id": 18280828942,
      "node_id": "LE_lADOABII585cyOzezwAAAARBn1AO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18280828942",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T20:34:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2997865936,
      "node_id": "IC_kwDOABII586yr83Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2997865936",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T20:34:26Z",
      "updated_at": "2025-06-23T20:34:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `TSan, depends, gui`: https://github.com/bitcoin/bitcoin/runs/44630110161</sub>\n<sub>LLM reason (✨ experimental): Data race detected in operator delete caused the failure of threadpool_tests.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-2997865936",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18281865605,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARBryGF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18281865605",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a13b48d67622659529fabdec6e2c96e31aa86263",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/a13b48d67622659529fabdec6e2c96e31aa86263",
      "created_at": "2025-06-23T21:59:44Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18284539357,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARB1-3d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18284539357",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6acaa7919d2fdfdecb8c626e6f9fe3447f5fd11b",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/6acaa7919d2fdfdecb8c626e6f9fe3447f5fd11b",
      "created_at": "2025-06-24T02:54:14Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18295669567,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARCgcM_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18295669567",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5fea91eae012a062b540b02fffb872e81b584eaa",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/5fea91eae012a062b540b02fffb872e81b584eaa",
      "created_at": "2025-06-24T13:58:02Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18302731712,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARC7YXA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18302731712",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a3e7d97b89821239bbba3e2c434a9a6405911865",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/a3e7d97b89821239bbba3e2c434a9a6405911865",
      "created_at": "2025-06-24T21:12:30Z"
    },
    {
      "event": "reviewed",
      "id": 2957109420,
      "node_id": "PRR_kwDOABII586wQeis",
      "url": null,
      "actor": null,
      "commit_id": "a3e7d97b89821239bbba3e2c434a9a6405911865",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-25T08:11:34Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2957109420",
      "submitted_at": "2025-06-25T08:11:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18317741457,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARD0o2R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18317741457",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e4bdca5f74bf504882a6bc517192c426d4ad2cf8",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/e4bdca5f74bf504882a6bc517192c426d4ad2cf8",
      "created_at": "2025-06-25T14:12:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18317782068,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARD0yw0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18317782068",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d405976ed05ec4b99b18151ae5b1021a53531be0",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/d405976ed05ec4b99b18151ae5b1021a53531be0",
      "created_at": "2025-06-25T14:14:07Z"
    },
    {
      "event": "unlabeled",
      "id": 18319075128,
      "node_id": "UNLE_lADOABII585cyOzezwAAAARD5uc4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18319075128",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T15:14:23Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18320212353,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARD-EGB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18320212353",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "59984a1d31aca2a523a8e8aafb3cb26500d8e990",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/59984a1d31aca2a523a8e8aafb3cb26500d8e990",
      "created_at": "2025-06-25T16:15:15Z"
    },
    {
      "event": "labeled",
      "id": 18321656483,
      "node_id": "LE_lADOABII585cyOzezwAAAAREDkqj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18321656483",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T17:54:36Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18336818375,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARE9aTH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18336818375",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ef3e47d4623bcfacdfe87f556520fcb42d3f43e5",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/ef3e47d4623bcfacdfe87f556520fcb42d3f43e5",
      "created_at": "2025-06-26T13:42:23Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18338409065,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARFDepp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18338409065",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c1b55be50f7c6dffde95d927b5d89e437b13ac79",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/c1b55be50f7c6dffde95d927b5d89e437b13ac79",
      "created_at": "2025-06-26T15:08:05Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18340913009,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARFNB9x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18340913009",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "89f5fc80c2957c89a6f42f5bde11c9fb0f9abc3a",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/89f5fc80c2957c89a6f42f5bde11c9fb0f9abc3a",
      "created_at": "2025-06-26T17:53:08Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18344089950,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARFZJle",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18344089950",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f6b7da2493488c0e48ad9acf569ef3bdaf6b07b3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/f6b7da2493488c0e48ad9acf569ef3bdaf6b07b3",
      "created_at": "2025-06-26T21:05:50Z"
    },
    {
      "event": "unlabeled",
      "id": 18345818669,
      "node_id": "UNLE_lADOABII585cyOzezwAAAARFfvot",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18345818669",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T23:18:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2985983304,
      "node_id": "PRR_kwDOABII586x-n1I",
      "url": null,
      "actor": null,
      "commit_id": "f6b7da2493488c0e48ad9acf569ef3bdaf6b07b3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-04T07:51:34Z",
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-2985983304",
      "submitted_at": "2025-07-04T07:51:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "referenced",
      "id": 18514976913,
      "node_id": "REFE_lADOABII585cyOzezwAAAARPlCCR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18514976913",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "528f79f010d1617163e4154753b85e04539af993",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/528f79f010d1617163e4154753b85e04539af993",
      "created_at": "2025-07-08T00:26:38Z"
    },
    {
      "event": "labeled",
      "id": 18515878135,
      "node_id": "LE_lADOABII585cyOzezwAAAARPoeD3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18515878135",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-08T02:07:29Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18516076423,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARPpOeH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18516076423",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e8e1e1471d08a8c9f22d3f0a68bab732649c9a52",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/e8e1e1471d08a8c9f22d3f0a68bab732649c9a52",
      "created_at": "2025-07-08T02:28:38Z"
    },
    {
      "event": "unlabeled",
      "id": 18517013360,
      "node_id": "UNLE_lADOABII585cyOzezwAAAARPszNw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18517013360",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-08T04:13:24Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18622434171,
      "node_id": "LE_lADOABII585cyOzezwAAAARV-8t7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18622434171",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T17:21:37Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3070380062,
      "node_id": "IC_kwDOABII5863Akge",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3070380062",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T17:28:11Z",
      "updated_at": "2025-07-14T17:28:11Z",
      "author_association": "MEMBER",
      "body": "Sorry, #32948 probably caused some conflicts.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3070380062",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18626050861,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARWMvst",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18626050861",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cd55c0317a69aae8fb69c0467b3582381e41b259",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/cd55c0317a69aae8fb69c0467b3582381e41b259",
      "created_at": "2025-07-14T21:31:35Z"
    },
    {
      "event": "reviewed",
      "id": 3017897441,
      "node_id": "PRR_kwDOABII586z4XXh",
      "url": null,
      "actor": null,
      "commit_id": "cd55c0317a69aae8fb69c0467b3582381e41b259",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-14T21:32:20Z",
      "author_association": "MEMBER",
      "body": "> Sorry, #32948 probably caused some conflicts.\r\n\r\nAuch. Rebased.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3017897441",
      "submitted_at": "2025-07-14T21:32:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "unlabeled",
      "id": 18626069073,
      "node_id": "UNLE_lADOABII585cyOzezwAAAARWM0JR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18626069073",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T21:33:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 18628147879,
      "node_id": "LE_lADOABII585cyOzezwAAAARWUvqn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18628147879",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-15T01:26:50Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3071599558,
      "node_id": "IC_kwDOABII5863FOPG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3071599558",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-15T01:26:52Z",
      "updated_at": "2025-07-15T01:26:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `TSan, depends, gui`: https://github.com/bitcoin/bitcoin/runs/45962526520</sub>\n<sub>LLM reason (✨ experimental): The CI failure is caused by a data race detected in operator delete, leading to a crash during threadpool_tests.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3071599558",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18638155236,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARW663k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18638155236",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f1b4dd18bbc4232177be31bfdd373975887c9187",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/f1b4dd18bbc4232177be31bfdd373975887c9187",
      "created_at": "2025-07-15T13:11:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18643416539,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARXO_Xb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18643416539",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2a6161adf0a92a64aac391deb9146e23ec99e47d",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/2a6161adf0a92a64aac391deb9146e23ec99e47d",
      "created_at": "2025-07-15T17:36:20Z"
    },
    {
      "event": "unlabeled",
      "id": 18645872235,
      "node_id": "UNLE_lADOABII585cyOzezwAAAARXYW5r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18645872235",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-15T19:59:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3083204938,
      "node_id": "IC_kwDOABII5863xflK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3083204938",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-17T08:48:50Z",
      "updated_at": "2025-07-17T08:48:50Z",
      "author_association": "MEMBER",
      "body": "I tried to use this to boost the silent payment indexer, but I don't know what I'm doing :-) https://github.com/Sjors/bitcoin/pull/96",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3083204938",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "reviewed",
      "id": 3029621925,
      "node_id": "PRR_kwDOABII5860lFyl",
      "url": null,
      "actor": null,
      "commit_id": "2a6161adf0a92a64aac391deb9146e23ec99e47d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-17T13:48:06Z",
      "author_association": "MEMBER",
      "body": "> I tried to use this to boost the silent payment indexer, but I don't know what I'm doing :-) [Sjors#96](https://github.com/Sjors/bitcoin/pull/96)\r\n\r\n@Sjors, see https://github.com/furszy/bitcoin-core/commits/2025_bip352_blind_fix.\r\nNote: I only spent a few minutes with it and the test seem to pass (I'm partially afk these days). Let me know how it goes and could check it in detail next week.\r\nThe first commit there (413ce51bf10326a6c56bd4250f9a9f19fde44ed4) is merely a code improvement + cleanup, because you don't need to re-read the undo data inside the child class anymore since #32694.\r\nAnd the last commit (b8883fa1fd76fbf3c3d3c10f702bea24abb42dc9) enables it by overriding `CustomProcessBlock()` (same as it was implemented for the tx index parallelization e8add40fbfbda9955f9b1cf998732ca03787eb72).",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3029621925",
      "submitted_at": "2025-07-17T13:48:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "reviewed",
      "id": 3039751954,
      "node_id": "PRR_kwDOABII5861Lu8S",
      "url": null,
      "actor": null,
      "commit_id": "2a6161adf0a92a64aac391deb9146e23ec99e47d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-21T21:08:38Z",
      "author_association": "MEMBER",
      "body": "Concept ACK, did a quick pass through this.\r\n\r\nWill do in-depth review soon\r\n\r\n> Now the juicy part:\r\n\r\nWhat is the step to reproduce your result?\r\n\r\nSide note to self could be useful to try benchmarking this using [benchkit](https://github.com/bitcoin-dev-tools/benchkit) so that anyone can reproduce using the yaml config?",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3039751954",
      "submitted_at": "2025-07-21T21:03:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "reviewed",
      "id": 3048467543,
      "node_id": "PRR_kwDOABII5861s-xX",
      "url": null,
      "actor": null,
      "commit_id": "2a6161adf0a92a64aac391deb9146e23ec99e47d",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-23T18:19:03Z",
      "author_association": "MEMBER",
      "body": "> What is the step to reproduce your result?\r\n\r\n1. Sync your node without any index.\r\n2. Restart the node with block filter or txindex enabled and let it run (you could also set `-connect=0` to sync only the index, without running the net/validation threads. Since threads won't be competing for `cs_main`, this will give you a more accurate result).\r\n\r\nYou’ll see a \"[index name] is enabled at height [height]\" log entry once it finishes. Then it’s just a matter of subtracting the index startup time from the \"index synced\" log time.\r\n\r\nUnfortunately, there’s no \"stop at block\" option like we have for chain sync, so this process is a bit more manual and has some variances depending on where/how you run it. But you will see an overall significant speedup anyway.\r\n\r\nNote: I should update my results in the PR description. Those were compiled three years ago on a small VPS, and we've introduced many changes since then.\r\n\r\n> Side note to self: could be useful to try benchmarking this using [[benchkit](https://github.com/bitcoin-dev-tools/benchkit)](https://github.com/bitcoin-dev-tools/benchkit) so that anyone can reproduce using the YAML config?\r\n\r\nThat would be nice. I'm not sure it supports stopping after a specific log is written. Maybe @willcl-ark could enlighten us here.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3048467543",
      "submitted_at": "2025-07-23T17:58:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18780175795,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARfYr2z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18780175795",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "068537ae61309a61e3bc350dc747d75cf2207517",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/068537ae61309a61e3bc350dc747d75cf2207517",
      "created_at": "2025-07-23T18:17:52Z"
    },
    {
      "event": "reviewed",
      "id": 3052111555,
      "node_id": "PRR_kwDOABII586164bD",
      "url": null,
      "actor": null,
      "commit_id": "068537ae61309a61e3bc350dc747d75cf2207517",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-25T20:02:10Z",
      "author_association": "MEMBER",
      "body": "code review ACK 068537ae61309a61e3bc350dc747d75cf2207517\r\n\r\n\r\nBuilt and tested on macos/arm64 as well as Debian/x86. Left several questions and suggestions. I really like ThreadPool as a util and look forward to using it for http workers as well, to share the code. \r\n\r\nI'm currently rebuilding block filter and tx indexes with this branch to compare against master, which after 48 hours was only about 70% complete...\r\n\r\n\r\n<details><summary>Show Signature</summary>\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA256\r\n\r\nACK 068537ae61309a61e3bc350dc747d75cf2207517\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQIzBAEBCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmiD4qAACgkQ5+KYS2KJ\r\nyToG8g//d72j0Pq/TmDjOA0nbCrqrBIKLIvHiTD8DIBCvCb2Ul+NnZDfvFAbuR9s\r\nnkArmxEUPRPBSkKBYMqJHUt+JF4zsLyttkryJW1vFCHwLi49an82B2MKSNNyOfs+\r\nPUufS9ro5FNDNax66jVdjD1/CrNRYAt/AQ/K3FSo7FNG5dbpO2n09ZBXWAHqwZfU\r\n3bf7p3Ug0JBlEe7/JMz1Wbu7wDV9E0lINarr/n5dnVQZTBLHaCvabSYtrEix/BRG\r\nku2MjexrbZdR5PY1xKQvJYkOkndZDkLQVJMC9BT9GeCYBdGRaGXadZQ3AwNlzobz\r\nJVSMQO2Ngv/Ow8IQWrAs705Moqzu680PjdodxTSrj0QU/D4cNJAW390QzwT7evrw\r\npAVipwM4oomc4ZMfWX4pq8AwlZ+GywEIMa34UbO0pbpGnlIEUPRUBb7l7ODzcCcb\r\n/cp9l9xpXwWH8+1yY9uRUnh9AHRlVsNdTJeCq3kTU8W1CYcmCOaImwjMJU3tM9Aj\r\nvgFzVQam4KYJTD+WjhKkFAb7M0uTF6LqaM5ChfSaTR1zXuVQ7OX0sYM8R0B2QLJ8\r\nuxNzNF/KnTJZYaOc0i/b4JHP3MZWgoO3GcT64woj1GqHGjLj2YOAKYSfpNZfWaL+\r\nkdwRnzC4qgMKunoqtv4sX9Ht0Hk7qyDfPnEog/AT4wnSbiP/HZs=\r\n=VG2A\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\npinheadmz's public key is [on openpgp.org](https://keys.openpgp.org/vks/v1/by-fingerprint/E61773CD6E01040E2F1BD78CE7E2984B6289C93A)\r\n</details>\r\n\r\n\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3052111555",
      "submitted_at": "2025-07-25T20:00:40Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "review_requested",
      "id": 18820691473,
      "node_id": "RRE_lADOABII585cyOzezwAAAARhzPYR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18820691473",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T20:02:15Z",
      "requested_reviewer": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18820691658,
      "node_id": "RRE_lADOABII585cyOzezwAAAARhzPbK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18820691658",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T20:02:15Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18820691822,
      "node_id": "RRE_lADOABII585cyOzezwAAAARhzPdu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18820691822",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T20:02:16Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18820691999,
      "node_id": "RRE_lADOABII585cyOzezwAAAARhzPgf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18820691999",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T20:02:17Z",
      "requested_reviewer": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18822104073,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARh4oQJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18822104073",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f",
      "created_at": "2025-07-25T21:35:18Z"
    },
    {
      "event": "commented",
      "id": 3124309346,
      "node_id": "IC_kwDOABII5866OS1i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3124309346",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-27T11:01:26Z",
      "updated_at": "2025-07-27T11:01:26Z",
      "author_association": "MEMBER",
      "body": "Did a rough benchmark test. Froze a full node at height `906551` by restarting with `-noconnect` and also `-txindex -blockfilterindex`. First test was from master, after 48 hours I aborted the process after reaching only:\r\n\r\n```\r\n$ bitcoin-cli getindexinfo\r\n{\r\n  \"txindex\": {\r\n    \"synced\": false,\r\n    \"best_block_height\": 770289\r\n  },\r\n  \"basic block filter index\": {\r\n    \"synced\": true,\r\n    \"best_block_height\": 906551\r\n  }\r\n}\r\n```\r\n\r\nRunning this PR (restarting with empty `indexes/`), both indexing operations were complete after about 16 hours:\r\n```\r\n2025-07-25T18:12:46Z txindex thread start\r\n2025-07-25T18:12:46Z basic block filter index thread start\r\n...\r\n2025-07-25T19:48:16Z basic block filter index thread exit\r\n2025-07-26T10:14:21Z txindex thread exit\r\n\r\n```\r\n\r\n```\r\n{\r\n  \"txindex\": {\r\n    \"synced\": true,\r\n    \"best_block_height\": 906551\r\n  },\r\n  \"basic block filter index\": {\r\n    \"synced\": true,\r\n    \"best_block_height\": 906551\r\n  }\r\n}\r\n\r\n```",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3124309346",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "reviewed",
      "id": 3067959910,
      "node_id": "PRR_kwDOABII58623Vpm",
      "url": null,
      "actor": null,
      "commit_id": "9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-07-29T14:53:00Z",
      "author_association": "MEMBER",
      "body": "re-ACK 9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f\r\n\r\nChanges since last review are minimal responses to my own review suggestions. Built on macos/arm64 and debian/x86. Ran functional and unit tests, ran with `-indexworkers=16` on mainnet fullnode with >900000 blocks\r\n\r\n<details><summary>Show Signature</summary>\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA256\r\n\r\nACK 9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQIzBAEBCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmiI394ACgkQ5+KYS2KJ\r\nyTruCxAAwQ1Q4syFsBPG0fS1KaKSV7LKLl5oJNzr5RPP7w/NliMB3KDXI8lhQnhr\r\nej6NNs7ovm05O99QrjFomGyg5oYO+rcECPoXp5lrwsOQBWJk10ZNgDIKdh2ChWr0\r\nsn2o8DCsGpHfkXZ9qg8ynStt5ScCv/1bopb2jvaFjWHdy/5LREJ62XuJZoah5O74\r\nkSSWyj1Nxi9oVNKctXifFp0WwqOqofft2kgDWghRPw67SERuZGqcyzb89zKLPLxr\r\niyMIWd8LY36isVj7XZBNVz1+jQnr77ldR15Uar/CKlrEoNC/tKs/NBE0eXAHrKhs\r\n4iuKdtX470yazbKGAm6Ei2wQbYa4w5319QDa6pVYlqo30ZMlW/AvVMC//Uc1/v3a\r\nfCW2ootvbbzz0lBPXg5yIB8wvaCuDkYYjMGL6tnYg1T4ChlS7P2y7IbfWryAjOKt\r\nUN1kJNkMoXzSrHu2nZaDmIv3hFpQBaDUH0BlT+unUg8hUioE1VqpIw/+rmcCj7eA\r\nIhKJ0NnJZnh92y5Y+9b+lf+ix6TiF0ZqGT/h+5Yv7Vj8YVXP006HpKvpx2Y84ii+\r\n5IZag6OviHoKt056Gn2iixQFSbw6hVMOw8JnF5FC3iZR28roEkJlY2WtOUF6h/Se\r\nUJTC1VMQuxRm+AIYLwC8w1RCRMoZDRKlOKBjOY5beFCIOARef3w=\r\n=Zxbl\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\npinheadmz's public key is [on openpgp.org](https://keys.openpgp.org/vks/v1/by-fingerprint/E61773CD6E01040E2F1BD78CE7E2984B6289C93A)\r\n</details>\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3067959910",
      "submitted_at": "2025-07-29T14:53:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "referenced",
      "id": 18912001248,
      "node_id": "REFE_lADOABII585cyOzezwAAAARnPjzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18912001248",
      "actor": {
        "login": "DashCoreAutoGuix",
        "id": 156604295,
        "node_id": "U_kgDOCVWXhw",
        "avatar_url": "https://avatars.githubusercontent.com/u/156604295?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DashCoreAutoGuix",
        "html_url": "https://github.com/DashCoreAutoGuix",
        "followers_url": "https://api.github.com/users/DashCoreAutoGuix/followers",
        "following_url": "https://api.github.com/users/DashCoreAutoGuix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DashCoreAutoGuix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DashCoreAutoGuix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DashCoreAutoGuix/subscriptions",
        "organizations_url": "https://api.github.com/users/DashCoreAutoGuix/orgs",
        "repos_url": "https://api.github.com/users/DashCoreAutoGuix/repos",
        "events_url": "https://api.github.com/users/DashCoreAutoGuix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DashCoreAutoGuix/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "55c5a2a348e6cd84f53001c4a95b71f79440c73b",
      "commit_url": "https://api.github.com/repos/DashCoreAutoGuix/dash/commits/55c5a2a348e6cd84f53001c4a95b71f79440c73b",
      "created_at": "2025-07-31T05:32:15Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19044691181,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARvJuzt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19044691181",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b349fbafadbc9b5af0a35b4c282e142994a5a1d7",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/b349fbafadbc9b5af0a35b4c282e142994a5a1d7",
      "created_at": "2025-08-07T22:43:19Z"
    },
    {
      "event": "labeled",
      "id": 19045391717,
      "node_id": "LE_lADOABII585cyOzezwAAAARvMZ1l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19045391717",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-08T00:19:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3166200643,
      "node_id": "IC_kwDOABII5868uGND",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3166200643",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-08T00:19:14Z",
      "updated_at": "2025-08-08T00:19:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `TSan, depends, no gui`: https://github.com/bitcoin/bitcoin/runs/47637510992</sub>\n<sub>LLM reason (✨ experimental): The CI failure is due to the threadpool_tests timing out.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3166200643",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19045985008,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARvOqrw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19045985008",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "647f6f0f4432a113a66bb3a423afe1ba68a842c9",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/647f6f0f4432a113a66bb3a423afe1ba68a842c9",
      "created_at": "2025-08-08T01:37:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19046385476,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARvQMdE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19046385476",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f6a52c6686b4d14aea2b05ca0413ad664bcf72e6",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/f6a52c6686b4d14aea2b05ca0413ad664bcf72e6",
      "created_at": "2025-08-08T02:33:06Z"
    },
    {
      "event": "unlabeled",
      "id": 19046916387,
      "node_id": "UNLE_lADOABII585cyOzezwAAAARvSOEj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19046916387",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-08T03:44:02Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "referenced",
      "id": 19067087162,
      "node_id": "REFE_lADOABII585cyOzezwAAAARwfKk6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19067087162",
      "actor": {
        "login": "DashCoreAutoGuix",
        "id": 156604295,
        "node_id": "U_kgDOCVWXhw",
        "avatar_url": "https://avatars.githubusercontent.com/u/156604295?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DashCoreAutoGuix",
        "html_url": "https://github.com/DashCoreAutoGuix",
        "followers_url": "https://api.github.com/users/DashCoreAutoGuix/followers",
        "following_url": "https://api.github.com/users/DashCoreAutoGuix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DashCoreAutoGuix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DashCoreAutoGuix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DashCoreAutoGuix/subscriptions",
        "organizations_url": "https://api.github.com/users/DashCoreAutoGuix/orgs",
        "repos_url": "https://api.github.com/users/DashCoreAutoGuix/repos",
        "events_url": "https://api.github.com/users/DashCoreAutoGuix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DashCoreAutoGuix/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3ee82f3b2b4f1879d8fbe0018cc987bfd3007f3f",
      "commit_url": "https://api.github.com/repos/DashCoreAutoGuix/dash/commits/3ee82f3b2b4f1879d8fbe0018cc987bfd3007f3f",
      "created_at": "2025-08-09T10:39:38Z"
    },
    {
      "event": "commented",
      "id": 3178896875,
      "node_id": "IC_kwDOABII5869eh3r",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3178896875",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T11:19:15Z",
      "updated_at": "2025-08-12T11:19:15Z",
      "author_association": "MEMBER",
      "body": "Fwiw I encountered a segfault previously while testing on master on previous PR HEAD https://github.com/bitcoin/bitcoin/commit/9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f\r\n\r\nI ran the node on mainnet with `-noconnect` `-txindex`  `-blockfilterindex` `-indexworkers=4`\r\n![Screenshot 2025-08-05 at 09 42 43](https://github.com/user-attachments/assets/313b7ebc-3d8f-49ce-a42a-3a757366a085)\r\n\r\n\r\nAlthough I was not able to later reproduce the crash it seems to be happen intermittently cc @furszy  ",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3178896875",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "mentioned",
      "id": 19109993277,
      "node_id": "MEE_lADOABII585cyOzezwAAAARzC1s9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19109993277",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T11:19:17Z"
    },
    {
      "event": "subscribed",
      "id": 19109993307,
      "node_id": "SE_lADOABII585cyOzezwAAAARzC1tb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19109993307",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-12T11:19:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19121863772,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAARzwHxc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19121863772",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "49efddfae7e46637be2c2efc3938ef1a0fecb1e3",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/49efddfae7e46637be2c2efc3938ef1a0fecb1e3",
      "created_at": "2025-08-12T20:25:14Z"
    },
    {
      "event": "reviewed",
      "id": 3112731964,
      "node_id": "PRR_kwDOABII5865iIU8",
      "url": null,
      "actor": null,
      "commit_id": "49efddfae7e46637be2c2efc3938ef1a0fecb1e3",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-08-12T20:34:46Z",
      "author_association": "MEMBER",
      "body": "> Although I was not able to later reproduce the crash it seems to be happen intermittently\r\n\r\nThanks for the report! Check it now if you can. There was a very subtle bug on which the worker threads might have accessed an index `Sync()` local variable post-destruction.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#pullrequestreview-3112731964",
      "submitted_at": "2025-08-12T20:34:46Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
    },
    {
      "event": "labeled",
      "id": 19232295315,
      "node_id": "LE_lADOABII585cyOzezwAAAAR6VYmT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19232295315",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-19T20:45:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY1NmE0MTZlZDRiZjI3ZjI4Y2RlNzE5ZGRhMjU1ZmJhNWM5ZGZhODQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f56a416ed4bf27f28cde719dda255fba5c9dfa84",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f56a416ed4bf27f28cde719dda255fba5c9dfa84",
      "tree": {
        "sha": "e681db3291b3fadf496fe84ac24a381d18292073",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e681db3291b3fadf496fe84ac24a381d18292073"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e681db3291b3fadf496fe84ac24a381d18292073\nparent f5f853d952542ebd45339a270a98362696877657\nauthor furszy <matiasfurszyfer@protonmail.com> 1676560833 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1755681462 -0400\n\nutil: introduce general purpose thread pool\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmilkrYACgkQXdI8zGhq\npiP1gRAAt2YkcEfmKvSX9GWWWCsaCp26vqlPtl8ojaE9lrfvUvy4s6SqVCJ32dIZ\noPxOZP5kJtoYVDgH7ahvwmhKlvxzCifkxmo/kSV07htlegAdyOVI3nIBPGdAldYR\ntjTd4Qt6UFA+k+gqNx60lj1XOE3g5Hpo0/ahqKrmzYlVtfe4Yo4+0LO2uofR1iyw\nbx6pS3yi9UUFU8jO4EoqPEZquIrOMqLwEQ1Dh3CVoaTQVHGpM4CBLVJq1ZFTWLBt\nm2q6hbXXToRATW4D3AaIKkTBxBAwBPBNhxDM843h44wAP2EUAPECDPOMcBFcz1Hz\nYfl7bTZCqV4CZDYGoiwoIor/GfziNd8upCnoIcSBIKX3euNNnJGbLU+MVpk6046D\nhETqGWq14PPaO4gxs4P1rYBLmff622hSH83wBc1wkkg0xEqS67N21A/Rk9RzMzle\ncblvkytAEK7wZ9TkP6dquSgV+ntDEpVbJse/1NWQsRfcltUXj4t3lkypkXkYB6jk\nK1K/cmh1gscc7YeBIE9ygSMCzMX+qE/+k7lhp7/fgJSE7h8gQiKzRgcDIUdP8kdf\nqAw+HxNizHp9jdNVtTGMznXmwF1x/bXyEv1XKAWbp0ZIkgseskQpOrxd4jPGKNY6\nY0uPQiXfP3DpSa/TI/AuSUoFmWfxM7z+2BUPhwAtWcNP0B2bcTo=\n=ksk6\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5f853d952542ebd45339a270a98362696877657",
          "sha": "f5f853d952542ebd45339a270a98362696877657",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f5f853d952542ebd45339a270a98362696877657"
        }
      ],
      "message": "util: introduce general purpose thread pool",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-08-20T09:17:42Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-16T15:20:33Z"
      },
      "sha": "f56a416ed4bf27f28cde719dda255fba5c9dfa84"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVkOGNiOTQzODNlYjE2MDMxOGM0YTJhY2MxN2FhNjA3YmI1ZTg3MWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed8cb94383eb160318c4a2acc17aa607bb5e871b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ed8cb94383eb160318c4a2acc17aa607bb5e871b",
      "tree": {
        "sha": "2d96b0c99956387ebfb5c7509c8c5d3a688506bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2d96b0c99956387ebfb5c7509c8c5d3a688506bd"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2d96b0c99956387ebfb5c7509c8c5d3a688506bd\nparent f56a416ed4bf27f28cde719dda255fba5c9dfa84\nauthor furszy <matiasfurszyfer@protonmail.com> 1676941848 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1755681462 -0400\n\ninit: provide thread pool to indexes\n\nAnd add option to customize thread pool workers count\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmilkrYACgkQXdI8zGhq\npiPNhhAAh5FsWXQLGKBEs51YHYiYHve/JCSVLicc9t0gb4Gs9zEoOlD6V5qPV3/q\nbiX03LbSYcykdBdyEvkUqWwRKLMvQ/8fmWfNIEHYFC6IlrzZ5wr7AxmJJlTrVJ5V\nntJxzIBmLg/uyLiEYFe50MBmUwiTkcZjZIGKPglGw6jOTXkgjn+rTDmgdQNz2bmM\n/c/b2Jvh1K9uTeoCaDJDTpyDCU8skoZKp6DG6eoQUwVVUPNVOiD0GF13sWyYM0Zn\ntIxE8BD+1nWyEd5om7X0oJI5Iswakscs1UeYKZ7GKOWL7ScbsBuIWt9PtULkREF/\nJtSuL+th/Ltdi1VBDFSDwvDX1h0+nKs6t7UJVp3AmDMDn7AkVy5uh6TIxN3RunC4\nw/i4yLl4GLcftsskTebguusxXhGPkJcxeKr/iRGLpdmiwqLJLAZs8oq0v/o0jH5o\nYpwVt4oTjTJXLjQnnqeNsR6CB1zO3tQKKXQnqkAsOSNCcR3+Z91kcYN9OhiNSGmI\nTWwdNMLNti4yLVTDMKc4E9csOluq42zDD0hYzjUn7rUKkwdXktQlqx9eVvlS8y0M\nXgVSIP94sb3lfFZsAdyZ9ghsQTuAW4MD2VhoWelKHLDyS9GT9exnY8n616FnxlV0\nkP8VvIpjwaAtOG4Kx3WcR5RTMx6En+MVQQF5aV1LmQ7p3CAG7J4=\n=gESF\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f56a416ed4bf27f28cde719dda255fba5c9dfa84",
          "sha": "f56a416ed4bf27f28cde719dda255fba5c9dfa84",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f56a416ed4bf27f28cde719dda255fba5c9dfa84"
        }
      ],
      "message": "init: provide thread pool to indexes\n\nAnd add option to customize thread pool workers count",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-08-20T09:17:42Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-21T01:10:48Z"
      },
      "sha": "ed8cb94383eb160318c4a2acc17aa607bb5e871b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRjYmRlODRmMzU5ODM3MzZhYzQ2Mjc3ZTQxOWVlNjUwMjVmNTc1MjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcbde84f35983736ac46277e419ee65025f57521",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dcbde84f35983736ac46277e419ee65025f57521",
      "tree": {
        "sha": "64c90a16deb65b8f7f917fab7383a0cca96fcf75",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/64c90a16deb65b8f7f917fab7383a0cca96fcf75"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 64c90a16deb65b8f7f917fab7383a0cca96fcf75\nparent ed8cb94383eb160318c4a2acc17aa607bb5e871b\nauthor furszy <matiasfurszyfer@protonmail.com> 1676935070 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1755681912 -0400\n\nindex: implement index parallel sync\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmillHkACgkQXdI8zGhq\npiNw0Q//dkrM6o6dY+0FdY7aGc7lGdtrl09YXadezrGZ9ymy46xFOQRElrTY9KII\nBQ6OV/34N6t3yDhMRDCM/yQbWU7lgP3waZ0Q1/USXU/F0CO5IspvGG1mv8BxVGgp\n4LgsB7SowaAHIvqyLTmXodKEkY2dry4gpfZJX7MO6tXM+mSWB9Eb7uDWKM0edfbP\nVVR1ZfCUcETxgNZLR0to/htkR8GERdIRodu5H4ML0PrgS6bW9IDjPWuN9CTAzMiB\nEKz9vve27Ma2ej9VYcSV4OE06mGMrCBMMoq9Y+/3weya5mxxhz+oYTXADTLJU3JF\nA3nDzGRIXeRjUWubP2i7Q40t2S5rXmjl2C8F2cis1Cfk0Lu+2Vcxi20ltgEHhhTD\n9JEjAEmAX8Tr0n4vboDlpqa7r6/ApVGoygFyBUDUHXcaV4GX1QQ7SwYpzKL+Qiy/\nPDT9pPA1RFX6TmlF1duFoVUOVqGbug2NYi+NxteymoBOrSmYMdzA82ijFVeBeK1V\ns4n8pvk/XdMjgrEBi65WpbUz7WZAhv5AcWXmjgXy1O8kRkJ/W0DJE3DN+Jo6Z+Zh\nt7W0BMdcvYArtYXUS2dTVL8UsZPmRcuizduquY1TyjkqeygcP1JZPOiqahvuaD/G\njB4L+xiR/G6gvDI66Kr/+M9IUQzHwISrrAPCwrbS3RKIiw6DXno=\n=3tWD\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ed8cb94383eb160318c4a2acc17aa607bb5e871b",
          "sha": "ed8cb94383eb160318c4a2acc17aa607bb5e871b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ed8cb94383eb160318c4a2acc17aa607bb5e871b"
        }
      ],
      "message": "index: implement index parallel sync",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-08-20T09:25:12Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-20T23:17:50Z"
      },
      "sha": "dcbde84f35983736ac46277e419ee65025f57521"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJiMDI3OWUzNjUxZTg5YWUwZDg0MjNlNDhhNzY4YmRkZWMxNjliMWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b0279e3651e89ae0d8423e48a768bddec169b1d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2b0279e3651e89ae0d8423e48a768bddec169b1d",
      "tree": {
        "sha": "4a4a912a23b5af37c4091f071a69d1bb80c76e00",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4a4a912a23b5af37c4091f071a69d1bb80c76e00"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4a4a912a23b5af37c4091f071a69d1bb80c76e00\nparent dcbde84f35983736ac46277e419ee65025f57521\nauthor furszy <matiasfurszyfer@protonmail.com> 1676935142 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1755681913 -0400\n\nindex: enable block filter index parallel sync\n\nIt also adds coverage for initial sync from a particular block.\nMimicking a node restart.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmillHkACgkQXdI8zGhq\npiPTgxAAgq/yWRcP6TMZnOH/e9i53XOICEcKJRmIC6wyGRhPQLlZVBNRuLBiHL7s\nMSmcuF3RrDfn0NM4T/W/H9SwPOuo+7WOnL2VpLeyT2niksuGRZ+viyNEApQf9ckp\nGIj25EXr/fj3f4+dHqx04qBexvU0guhH/OvLikTT/0Hybal1YRbMFo6CxRGemP7b\naPEHxN3PsRluZQeoMww8UZsNr1V2fq293MprkhMrVhcZS+u7RweMtNGmXhQekEQQ\n6Kgr6Zv6lMtg5CLhXeZAmriK3vBeO556Uu3L0E3cXWCN8jmHptCF184lwtCbHdlE\nRQMlSSr3BLxOZncg3JIpkPv7d6hrwEQua+goFlCAqu3FZ0CuRiMijV5VbQsyI4OU\n41NBttpI2duJ4Ea53ZqT/uYgoQSN/egYbEEyQeg0sEqKZNsNqBMH63qqw5hbcGeo\nUoG7/bggVdHRXb/2SnRuZ4ewtFxmfYgfB6I8czeldYrKdLDYez3u8PeaP9jD/2Jb\n7mzJnsecBGdRCOXXCnWS2qjxbK67wDlQJChf2bGmSROAIMteegRnxzyEo69szCoA\nzC15JLSXIPm06rjjdvRYjewJSEm/1AQuUPWexeQVBan4T0XHRsyGHdvxAePR2BmW\nSf95ZyBSFEAMskIpzOZQM5LItrM/LgIOMBiY1GXp8VIMSTflz58=\n=djYo\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dcbde84f35983736ac46277e419ee65025f57521",
          "sha": "dcbde84f35983736ac46277e419ee65025f57521",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dcbde84f35983736ac46277e419ee65025f57521"
        }
      ],
      "message": "index: enable block filter index parallel sync\n\nIt also adds coverage for initial sync from a particular block.\nMimicking a node restart.",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-08-20T09:25:13Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-20T23:19:02Z"
      },
      "sha": "2b0279e3651e89ae0d8423e48a768bddec169b1d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY5NzkyYjZkM2VlNGI3MzIwYzYwOGQ1YjIzMDU2ZDNlOGI5OTgyNDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "tree": {
        "sha": "78a7587a91f72a3a9fbace9c18256734944986da",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/78a7587a91f72a3a9fbace9c18256734944986da"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 78a7587a91f72a3a9fbace9c18256734944986da\nparent 2b0279e3651e89ae0d8423e48a768bddec169b1d\nauthor furszy <matiasfurszyfer@protonmail.com> 1677536178 -0300\ncommitter furszy <matiasfurszyfer@protonmail.com> 1755681913 -0400\n\ntxindex: enable parallel sync\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEA++0fqwRHQpmlZfQXdI8zGhqpiMFAmillHkACgkQXdI8zGhq\npiOYdQ//UcwHCV5mmWX5yyQOK+kiOsBcbwlfWyPOScdE3ChXnz9ZPgBFxeCFyIsE\nWsF1HvHi5L+5s+sKwFSn8iJTeURT9t1QnmKv9ufAWZuZ73oG5zYywufUCQtqhozS\nNnq6eDKlSn14PizvBkwecEi4WQmnng0NZuFIFvo3NQrXD+hMAAx8MrPGb6+3Sgz5\nAwGLirb/TrWwlM2TOWWE/qx9nmYm6fP5XUfqkC3Wcd9pD1Q9b9K8as/JwtUVQEZm\nL2bCmNc8wA9arRPijft8p/DKDG7Ajk8djbOzZqcGz2ovBV2XKTxOez/SLqyuvVaH\nbgxFC2o1p8xTaXJEoubpk1BZa+MVvRog6L5EgFPwzxwW6k/rSBSvxX3GdNLXc/vP\nKUp3bavAaxge8mZ/+RNX/MkG16wZPMrcr7WSCjFPdacMtQP5cCCa9ue+OKDuC1t4\n22iI8cU9uhvOFZJwXY4RXUojwO9V3wNmlSOP1c7i09QwF5zLzL0+cZHTppVOKyy3\nmtB88HArQij9ivb2sAXwAOarp5hf7fqVqLC0046sBHb3lSaoYO/NcUPjruPhLvbM\nxifE68Clwh6kmC3U4PJyST60vDTrd79sK441wSDFRWnMjdEpsALgH0Azp9WZXN4Y\nM4CzOPTPAuhyEJOZavDRq9xCKB36OCCMfeuXxDaJ7OCE+gyaAy8=\n=55UM\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2b0279e3651e89ae0d8423e48a768bddec169b1d",
          "sha": "2b0279e3651e89ae0d8423e48a768bddec169b1d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2b0279e3651e89ae0d8423e48a768bddec169b1d"
        }
      ],
      "message": "txindex: enable parallel sync",
      "committer": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2025-08-20T09:25:13Z"
      },
      "author": {
        "name": "furszy",
        "email": "matiasfurszyfer@protonmail.com",
        "date": "2023-02-27T22:16:18Z"
      },
      "sha": "69792b6d3ee4b7320c608d5b23056d3e8b998247"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19241639826,
      "node_id": "HRFPE_lADOABII585cyOzezwAAAAR65B-S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19241639826",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "commit_url": "https://api.github.com/repos/furszy/bitcoin-core/commits/69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "created_at": "2025-08-20T09:26:20Z"
    },
    {
      "event": "labeled",
      "id": 19243840508,
      "node_id": "LE_lADOABII585cyOzezwAAAAR7BbP8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19243840508",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-20T11:26:39Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3205770008,
      "node_id": "IC_kwDOABII586_FCsY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3205770008",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-20T11:26:41Z",
      "updated_at": "2025-08-20T11:26:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `MSan, depends`: https://github.com/bitcoin/bitcoin/runs/48475050585</sub>\n<sub>LLM reason (✨ experimental): The CI failure is caused by a test timeout due to the index not reaching the expected height within the allowed time.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#issuecomment-3205770008",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/26966"
    },
    {
      "event": "unlabeled",
      "id": 19244219984,
      "node_id": "UNLE_lADOABII585cyOzezwAAAAR7C35Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19244219984",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-20T11:49:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404328365",
      "pull_request_review_id": 1747911419,
      "id": 1404328365,
      "node_id": "PRRC_kwDOABII585TtFmt",
      "diff_hunk": "@@ -42,6 +42,9 @@ class BlockFilterIndex final : public BaseIndex\n     /** cache of block hash to filter header, to avoid disk access when responding to getcfcheckpt. */\n     std::unordered_map<uint256, uint256, FilterHeaderHasher> m_headers_cache GUARDED_BY(m_cs_headers_cache);\n \n+    // Last computed header to avoid disk reads at every new block.\n+    uint256 last_header{};",
      "path": "src/index/blockfilterindex.h",
      "position": null,
      "original_position": 5,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "003f076a150c1237e4b9b212265d4665a32dcb5c",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "NIt: Might take this opportunity to add the <uint256.h> header?",
      "created_at": "2023-11-24T12:58:03Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404328365",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404328365"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404459012",
      "pull_request_review_id": 1747911419,
      "id": 1404459012,
      "node_id": "PRRC_kwDOABII585TtlgE",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't being stopped.",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 58,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "NIt: `// In case it hasn't been stoppped.`",
      "created_at": "2023-11-24T15:18:11Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404459012",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404459012"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404460151",
      "pull_request_review_id": 1747911419,
      "id": 1404460151,
      "node_id": "PRRC_kwDOABII585Ttlx3",
      "diff_hunk": "@@ -0,0 +1,158 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers",
      "path": "src/test/threadpool_tests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nit: Adjust copyright date.",
      "created_at": "2023-11-24T15:19:04Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404460151",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404460151"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404471253",
      "pull_request_review_id": 1747911419,
      "id": 1404471253,
      "node_id": "PRRC_kwDOABII585TtofV",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+",
      "path": "src/util/threadpool.h",
      "position": 25,
      "original_position": 16,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If I run IWYU locally, it reports the following headers as missing:\r\n```\r\n#include <cstddef>            // for size_t\r\n#include <algorithm>           // for max\r\n#include <atomic>              // for atomic\r\n#include <functional>          // for function\r\n#include <memory>              // for make_shared\r\n#include <stdexcept>           // for runtime_error\r\n#include <utility>             // for move, swap\r\n#include <vector>              // for vector\r\n```",
      "created_at": "2023-11-24T15:32:09Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404471253",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404471253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404663869",
      "pull_request_review_id": 1747911419,
      "id": 1404663869,
      "node_id": "PRRC_kwDOABII585TuXg9",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 24,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Just a comment: It would be nice if we could re-use the `CThreadInterrupt` interface here, but I don't think it's easily possible.",
      "created_at": "2023-11-24T22:37:07Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404663869",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404663869"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404664671",
      "pull_request_review_id": 1747911419,
      "id": 1404664671,
      "node_id": "PRRC_kwDOABII585TuXtf",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't being stopped.\n+    }\n+\n+    void Start(int num_workers)\n+    {\n+        if (!m_workers.empty()) throw std::runtime_error(\"Thread pool already started\");\n+\n+        // Create the workers\n+        for (int i=0; i<num_workers; i++) {\n+            m_workers.emplace_back(&ThreadPool::WorkerThread, this, \"threadpool_worker_\" + ToString(i));\n+        }\n+    }\n+\n+    void Stop()\n+    {\n+        // Notify workers and join them.\n+        m_stop = true;\n+        m_condition.notify_all();\n+        for (auto& worker : m_workers) {\n+            worker.join();\n+        }\n+        m_workers.clear();\n+        m_stop = false;\n+    }\n+\n+    template<class T> EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    auto Submit(T task) -> std::future<decltype(task())>\n+    {\n+        auto ptr_task = std::make_shared<std::packaged_task<decltype(task()) ()>>(std::move(task));\n+        std::future<decltype(task())> future = ptr_task->get_future();\n+        {\n+            LOCK(cs_work_queue);\n+            m_work_queue.emplace([=]() {\n+                (*ptr_task)();\n+            });\n+        }\n+        m_condition.notify_one();\n+        return future;\n+    }\n+\n+    // Synchronous processing\n+    void ProcessTask() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 99,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Why is this added?",
      "created_at": "2023-11-24T22:41:50Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404664671",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404664671"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404871876",
      "pull_request_review_id": 1747911419,
      "id": 1404871876,
      "node_id": "PRRC_kwDOABII585TvKTE",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }",
      "path": "src/util/threadpool.h",
      "position": 59,
      "original_position": 50,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think it would be necessary for the tasks themselves, since you already demonstrate in the tests how to retrieve exceptions, but I think some kind of exception handling and infomation logging similar to the one of `util::TraceThread` would still be nice. Did you choose not to use `TraceThread` on purpose?",
      "created_at": "2023-11-25T12:37:05Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404871876",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404871876"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 59,
      "original_line": 59,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404873978",
      "pull_request_review_id": 1747911419,
      "id": 1404873978,
      "node_id": "PRRC_kwDOABII585TvKz6",
      "diff_hunk": "@@ -0,0 +1,158 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_workers = 3;\n+        int num_tasks = 50;",
      "path": "src/test/threadpool_tests.cpp",
      "position": 39,
      "original_position": 24,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Could use this test to stress test the pool a bit with more tasks?",
      "created_at": "2023-11-25T12:44:25Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404873978",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404873978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 39,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404874302",
      "pull_request_review_id": 1747911419,
      "id": 1404874302,
      "node_id": "PRRC_kwDOABII585TvK4-",
      "diff_hunk": "@@ -0,0 +1,158 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_workers = 3;\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(num_workers);\n+        std::atomic<int> counter = 0;\n+        for (int i=0; i<num_tasks; i++) {",
      "path": "src/test/threadpool_tests.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think a test where each task is assigned slightly different data would be nice. Something like:\r\n```c++\r\n+        std::atomic<int> par_sum{0};\r\n+        for (int i = 0; i < num_tasks; i++) {\r\n+            threadPool.Submit([&par_sum,i]() {\r\n+                par_sum += i;\r\n             });\r\n         }\r\n+        int sync_sum{0};\r\n+        for (int i = 0; i < num_tasks; i++) {\r\n+            sync_sum += i;\r\n+        }\r\n```",
      "created_at": "2023-11-25T12:45:50Z",
      "updated_at": "2023-11-25T12:53:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1404874302",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1404874302"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405161198",
      "pull_request_review_id": 1749211886,
      "id": 1405161198,
      "node_id": "PRRC_kwDOABII585TwQ7u",
      "diff_hunk": "@@ -16,13 +16,17 @@ class CBlock;\n class CBlockIndex;\n class Chainstate;\n class ChainstateManager;\n+class ThreadPool;\n namespace interfaces {\n class Chain;\n } // namespace interfaces\n namespace Consensus {\n     struct Params;\n }\n \n+/** Number of concurrent jobs during the initial sync process */\n+const int16_t INDEX_WORKERS_COUNT = 0;",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 13,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7b2d4d471ae251d4c22184dda26b73993a65eff8",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`static constexpr int16_t INDEX_WORKERS_COUNT{0}` (and similarly below)?",
      "created_at": "2023-11-25T16:22:29Z",
      "updated_at": "2023-11-25T23:01:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405161198",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405161198"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405168955",
      "pull_request_review_id": 1749211886,
      "id": 1405168955,
      "node_id": "PRRC_kwDOABII585TwS07",
      "diff_hunk": "@@ -1966,7 +1970,21 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    std::shared_ptr<ThreadPool> thread_pool;\n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > 100) return InitError(_(\"Invalid -indexworkers arg\"));\n+\n+        thread_pool = std::make_shared<ThreadPool>();\n+        thread_pool->Start(index_workers);\n+    }\n+\n     // Start threads\n-    for (auto index : node.indexes) if (!index->StartBackgroundSync()) return false;\n+    for (auto index : node.indexes) {\n+        // todo: Only provide thread pool to indexes that supports parallel sync",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7b2d4d471ae251d4c22184dda26b73993a65eff8",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit 7b2d4d471ae251d4c22184dda26b73993a65eff8: Could the `AllowParallelSync` method be moved to this commit?",
      "created_at": "2023-11-25T16:46:03Z",
      "updated_at": "2023-11-25T23:01:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405168955",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405168955"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1984,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405180029",
      "pull_request_review_id": 1749211886,
      "id": 1405180029,
      "node_id": "PRRC_kwDOABII585TwVh9",
      "diff_hunk": "@@ -205,9 +217,53 @@ void BaseIndex::ThreadSync()\n                            __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                int remaining_blocks = tip_height - pindex_next->nHeight;",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 66,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "727be9d500c081309042c256dc02166acb6d4774",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Make `max_blocks_to_sync`, `tip_height`, and `remaining_blocks` `const`.",
      "created_at": "2023-11-25T17:25:51Z",
      "updated_at": "2023-11-25T23:01:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405180029",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405180029"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 229,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405180661",
      "pull_request_review_id": 1749211886,
      "id": 1405180661,
      "node_id": "PRRC_kwDOABII585TwVr1",
      "diff_hunk": "@@ -205,9 +217,53 @@ void BaseIndex::ThreadSync()\n                            __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                int remaining_blocks = tip_height - pindex_next->nHeight;\n+                work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);\n+                workers_count = m_thread_pool->WorkersCount();\n+                if (work_chunk == 0) { // disable parallel sync if we are close to the tip\n+                    workers_count = 0;",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 70,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "727be9d500c081309042c256dc02166acb6d4774",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nitty nit: Keep the order of `workers_count` and `work_chunk` consistent?",
      "created_at": "2023-11-25T17:28:24Z",
      "updated_at": "2023-11-25T23:01:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405180661",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405180661"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405250581",
      "pull_request_review_id": 1749211886,
      "id": 1405250581,
      "node_id": "PRRC_kwDOABII585TwmwV",
      "diff_hunk": "@@ -205,9 +217,53 @@ void BaseIndex::ThreadSync()\n                            __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                int remaining_blocks = tip_height - pindex_next->nHeight;\n+                work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);\n+                workers_count = m_thread_pool->WorkersCount();\n+                if (work_chunk == 0) { // disable parallel sync if we are close to the tip\n+                    workers_count = 0;\n+                    work_chunk = 1;\n+                }\n+\n+                for (int i = 0; i < workers_count; i++) {\n+                    const CBlockIndex* it_end =  WITH_LOCK(::cs_main, return m_chainstate->m_chain[it_start->nHeight + work_chunk - 1]);\n+                    // Async process\n+                    futures.emplace_back(m_thread_pool->Submit(std::bind(&BaseIndex::ProcessBlocks, this, it_start, it_end)));\n+                    // Update iterator\n+                    it_start = WITH_LOCK(::cs_main, return NextSyncBlock(it_end, m_chainstate->m_chain));\n+                }\n+            }\n \n+            // If we have only one block to process, run it directly.\n+            // Otherwise, this is an active-wait, so we process blocks until all workers finish.",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "727be9d500c081309042c256dc02166acb6d4774",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Would `so we also process blocks in this thread until all workers finish.` be more accurate?",
      "created_at": "2023-11-25T22:38:59Z",
      "updated_at": "2023-11-25T23:01:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405250581",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405250581"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405253107",
      "pull_request_review_id": 1749211886,
      "id": 1405253107,
      "node_id": "PRRC_kwDOABII585TwnXz",
      "diff_hunk": "@@ -14,6 +14,7 @@\n #include <test/util/blockfilter.h>",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 2,
      "original_position": 1,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "de69506c090f530f34d78478db39898bd4e2cbba",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit de69506c090f530f34d78478db39898bd4e2cbba: I think the test introduction should be squashed into the following commit, or do you want to demonstrate something here first?",
      "created_at": "2023-11-25T22:52:11Z",
      "updated_at": "2023-11-25T23:01:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405253107",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405253107"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 14,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405426732",
      "pull_request_review_id": 1749369732,
      "id": 1405426732,
      "node_id": "PRRC_kwDOABII585TxRws",
      "diff_hunk": "@@ -1966,7 +1970,20 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    std::shared_ptr<ThreadPool> thread_pool;\n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > 100) return InitError(_(\"Invalid -indexworkers arg\"));\n+\n+        thread_pool = std::make_shared<ThreadPool>();\n+        thread_pool->Start(index_workers);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "373b0bb077296624b7aeb5108673ae8f8b00b20d",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Since the constructor and `Start` are always called in succession in this patch set, you could make `ThreadPool` more RAII styled if the `Start` method were removed and instead placed in the constructor. Could also make sense to do the same with the destructor and `Stop`.",
      "created_at": "2023-11-26T16:08:46Z",
      "updated_at": "2023-11-26T16:08:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1405426732",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1405426732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2117,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535993177",
      "pull_request_review_id": 1955447962,
      "id": 1535993177,
      "node_id": "PRRC_kwDOABII585bjWVZ",
      "diff_hunk": "@@ -42,6 +42,9 @@ class BlockFilterIndex final : public BaseIndex\n     /** cache of block hash to filter header, to avoid disk access when responding to getcfcheckpt. */\n     std::unordered_map<uint256, uint256, FilterHeaderHasher> m_headers_cache GUARDED_BY(m_cs_headers_cache);\n \n+    // Last computed header to avoid disk reads at every new block.\n+    uint256 last_header{};",
      "path": "src/index/blockfilterindex.h",
      "position": null,
      "original_position": 5,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "003f076a150c1237e4b9b212265d4665a32dcb5c",
      "in_reply_to_id": 1404328365,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "hmm sorry, I missed to add it on #28955.",
      "created_at": "2024-03-22T18:03:01Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1535993177",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535993177"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535993253",
      "pull_request_review_id": 1955447962,
      "id": 1535993253,
      "node_id": "PRRC_kwDOABII585bjWWl",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't being stopped.",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 58,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404459012,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done as suggested. Thanks.",
      "created_at": "2024-03-22T18:03:06Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1535993253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535993253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535993516",
      "pull_request_review_id": 1955447962,
      "id": 1535993516,
      "node_id": "PRRC_kwDOABII585bjWas",
      "diff_hunk": "@@ -0,0 +1,158 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers",
      "path": "src/test/threadpool_tests.cpp",
      "position": null,
      "original_position": 1,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404460151,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done as suggested. Thanks.",
      "created_at": "2024-03-22T18:03:21Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1535993516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1535993516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536011023",
      "pull_request_review_id": 1955447962,
      "id": 1536011023,
      "node_id": "PRRC_kwDOABII585bjasP",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+",
      "path": "src/util/threadpool.h",
      "position": 25,
      "original_position": 16,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404471253,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done as suggested. Thanks.",
      "created_at": "2024-03-22T18:19:25Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536011023",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536011023"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 25,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536011315",
      "pull_request_review_id": 1955447962,
      "id": 1536011315,
      "node_id": "PRRC_kwDOABII585bjawz",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 24,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404663869,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hmm, it shouldn't be that hard, let me see.",
      "created_at": "2024-03-22T18:19:43Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536011315",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536011315"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536019699",
      "pull_request_review_id": 1955447962,
      "id": 1536019699,
      "node_id": "PRRC_kwDOABII585bjczz",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't being stopped.\n+    }\n+\n+    void Start(int num_workers)\n+    {\n+        if (!m_workers.empty()) throw std::runtime_error(\"Thread pool already started\");\n+\n+        // Create the workers\n+        for (int i=0; i<num_workers; i++) {\n+            m_workers.emplace_back(&ThreadPool::WorkerThread, this, \"threadpool_worker_\" + ToString(i));\n+        }\n+    }\n+\n+    void Stop()\n+    {\n+        // Notify workers and join them.\n+        m_stop = true;\n+        m_condition.notify_all();\n+        for (auto& worker : m_workers) {\n+            worker.join();\n+        }\n+        m_workers.clear();\n+        m_stop = false;\n+    }\n+\n+    template<class T> EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    auto Submit(T task) -> std::future<decltype(task())>\n+    {\n+        auto ptr_task = std::make_shared<std::packaged_task<decltype(task()) ()>>(std::move(task));\n+        std::future<decltype(task())> future = ptr_task->get_future();\n+        {\n+            LOCK(cs_work_queue);\n+            m_work_queue.emplace([=]() {\n+                (*ptr_task)();\n+            });\n+        }\n+        m_condition.notify_one();\n+        return future;\n+    }\n+\n+    // Synchronous processing\n+    void ProcessTask() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 99,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404664671,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Why is this added?\r\n\r\nBecause I initially thought on pushing extra work into the thread pool queue so then the originator thread, once it finishes calculating the different tasks, can take the workload on its active wait. But I ended up implementing it differently to re-use the same piece of code for the single-thread approach (Can check it looking for where it says \"// Otherwise, this is an active-wait, so we process blocks until all workers finish.\")\r\nStill, I think that having a method to process tasks manually make sense for a general thread pool implementation. But could remove it if you are strong on it.",
      "created_at": "2024-03-22T18:27:51Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536019699",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536019699"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536032270",
      "pull_request_review_id": 1955447962,
      "id": 1536032270,
      "node_id": "PRRC_kwDOABII585bjf4O",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }",
      "path": "src/util/threadpool.h",
      "position": 59,
      "original_position": 50,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404871876,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I don't think it would be necessary for the tasks themselves, since you already demonstrate in the tests how to retrieve exceptions, but I think some kind of exception handling and infomation logging similar to the one of `util::TraceThread` would still be nice. Did you choose not to use `TraceThread` on purpose?\r\n\r\nI probably wasn't aware of `TraceThread` when this was implemented. Changing it.. Thanks!",
      "created_at": "2024-03-22T18:37:07Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536032270",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536032270"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 59,
      "original_line": 59,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536056252",
      "pull_request_review_id": 1955447962,
      "id": 1536056252,
      "node_id": "PRRC_kwDOABII585bjlu8",
      "diff_hunk": "@@ -0,0 +1,158 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_workers = 3;\n+        int num_tasks = 50;",
      "path": "src/test/threadpool_tests.cpp",
      "position": 39,
      "original_position": 24,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404873978,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Could use this test to stress test the pool a bit with more tasks?\r\n\r\nWhat about creating a fuzzing test instead? I'm not sure about the benefits of adding more tasks here. I can only foresee other developers complaining about the increased unit test times.",
      "created_at": "2024-03-22T18:55:02Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536056252",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536056252"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 39,
      "original_line": 39,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536620146",
      "pull_request_review_id": 1955447962,
      "id": 1536620146,
      "node_id": "PRRC_kwDOABII585blvZy",
      "diff_hunk": "@@ -0,0 +1,158 @@\n+// Copyright (c) 2012-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_workers = 3;\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(num_workers);\n+        std::atomic<int> counter = 0;\n+        for (int i=0; i<num_tasks; i++) {",
      "path": "src/test/threadpool_tests.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404874302,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sure. Thats the Gauss sum :).",
      "created_at": "2024-03-23T11:48:22Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536620146",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536620146"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536627797",
      "pull_request_review_id": 1955447962,
      "id": 1536627797,
      "node_id": "PRRC_kwDOABII585blxRV",
      "diff_hunk": "@@ -16,13 +16,17 @@ class CBlock;\n class CBlockIndex;\n class Chainstate;\n class ChainstateManager;\n+class ThreadPool;\n namespace interfaces {\n class Chain;\n } // namespace interfaces\n namespace Consensus {\n     struct Params;\n }\n \n+/** Number of concurrent jobs during the initial sync process */\n+const int16_t INDEX_WORKERS_COUNT = 0;",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 13,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7b2d4d471ae251d4c22184dda26b73993a65eff8",
      "in_reply_to_id": 1405161198,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "sure",
      "created_at": "2024-03-23T12:45:00Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536627797",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536627797"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536628918",
      "pull_request_review_id": 1955447962,
      "id": 1536628918,
      "node_id": "PRRC_kwDOABII585blxi2",
      "diff_hunk": "@@ -1966,7 +1970,21 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    std::shared_ptr<ThreadPool> thread_pool;\n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > 100) return InitError(_(\"Invalid -indexworkers arg\"));\n+\n+        thread_pool = std::make_shared<ThreadPool>();\n+        thread_pool->Start(index_workers);\n+    }\n+\n     // Start threads\n-    for (auto index : node.indexes) if (!index->StartBackgroundSync()) return false;\n+    for (auto index : node.indexes) {\n+        // todo: Only provide thread pool to indexes that supports parallel sync",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 41,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7b2d4d471ae251d4c22184dda26b73993a65eff8",
      "in_reply_to_id": 1405168955,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit [7b2d4d4](https://github.com/bitcoin/bitcoin/commit/7b2d4d471ae251d4c22184dda26b73993a65eff8): Could the `AllowParallelSync` method be moved to this commit?\r\n\r\nSure.",
      "created_at": "2024-03-23T12:53:22Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536628918",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536628918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1984,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536628999",
      "pull_request_review_id": 1955447962,
      "id": 1536628999,
      "node_id": "PRRC_kwDOABII585blxkH",
      "diff_hunk": "@@ -205,9 +217,53 @@ void BaseIndex::ThreadSync()\n                            __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                int remaining_blocks = tip_height - pindex_next->nHeight;",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 66,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "727be9d500c081309042c256dc02166acb6d4774",
      "in_reply_to_id": 1405180029,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done as suggested.",
      "created_at": "2024-03-23T12:54:01Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536628999",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536628999"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 229,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536629222",
      "pull_request_review_id": 1955447962,
      "id": 1536629222,
      "node_id": "PRRC_kwDOABII585blxnm",
      "diff_hunk": "@@ -205,9 +217,53 @@ void BaseIndex::ThreadSync()\n                            __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                int remaining_blocks = tip_height - pindex_next->nHeight;\n+                work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);\n+                workers_count = m_thread_pool->WorkersCount();\n+                if (work_chunk == 0) { // disable parallel sync if we are close to the tip\n+                    workers_count = 0;",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 70,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "727be9d500c081309042c256dc02166acb6d4774",
      "in_reply_to_id": 1405180661,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Nitty nit: Keep the order of `workers_count` and `work_chunk` consistent?\r\n\r\nWhat do you mean? Set `workers_count` first, then `work_chunk` always in the same order?",
      "created_at": "2024-03-23T12:55:44Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536629222",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536629222"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 258,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536629364",
      "pull_request_review_id": 1955447962,
      "id": 1536629364,
      "node_id": "PRRC_kwDOABII585blxp0",
      "diff_hunk": "@@ -205,9 +217,53 @@ void BaseIndex::ThreadSync()\n                            __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                int remaining_blocks = tip_height - pindex_next->nHeight;\n+                work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);\n+                workers_count = m_thread_pool->WorkersCount();\n+                if (work_chunk == 0) { // disable parallel sync if we are close to the tip\n+                    workers_count = 0;\n+                    work_chunk = 1;\n+                }\n+\n+                for (int i = 0; i < workers_count; i++) {\n+                    const CBlockIndex* it_end =  WITH_LOCK(::cs_main, return m_chainstate->m_chain[it_start->nHeight + work_chunk - 1]);\n+                    // Async process\n+                    futures.emplace_back(m_thread_pool->Submit(std::bind(&BaseIndex::ProcessBlocks, this, it_start, it_end)));\n+                    // Update iterator\n+                    it_start = WITH_LOCK(::cs_main, return NextSyncBlock(it_end, m_chainstate->m_chain));\n+                }\n+            }\n \n+            // If we have only one block to process, run it directly.\n+            // Otherwise, this is an active-wait, so we process blocks until all workers finish.",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 84,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "727be9d500c081309042c256dc02166acb6d4774",
      "in_reply_to_id": 1405250581,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sure. Done as suggested. Thanks.",
      "created_at": "2024-03-23T12:56:39Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536629364",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536629364"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536630106",
      "pull_request_review_id": 1955447962,
      "id": 1536630106,
      "node_id": "PRRC_kwDOABII585blx1a",
      "diff_hunk": "@@ -14,6 +14,7 @@\n #include <test/util/blockfilter.h>",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": 2,
      "original_position": 1,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "de69506c090f530f34d78478db39898bd4e2cbba",
      "in_reply_to_id": 1405253107,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit [de69506](https://github.com/bitcoin/bitcoin/commit/de69506c090f530f34d78478db39898bd4e2cbba): I think the test introduction should be squashed into the following commit, or do you want to demonstrate something here first?\r\n\r\nhmm, will squash them. I don't remember why I split them (2 years ago).",
      "created_at": "2024-03-23T13:01:30Z",
      "updated_at": "2024-03-23T13:08:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1536630106",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1536630106"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 14,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1812965559",
      "pull_request_review_id": 1592642598,
      "id": 1812965559,
      "node_id": "PRRC_kwDOABII585sD6i3",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {",
      "path": "src/util/threadpool.h",
      "position": 46,
      "original_position": 45,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If we receive an interrupt, we don't also want to wait for the work queue to be empty right?",
      "created_at": "2024-10-23T14:54:39Z",
      "updated_at": "2024-10-23T15:02:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1812965559",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1812965559"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1812986201",
      "pull_request_review_id": 1592642598,
      "id": 1812986201,
      "node_id": "PRRC_kwDOABII585sD_lZ",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;",
      "path": "src/util/threadpool.h",
      "position": 40,
      "original_position": 39,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Can we modify this to be more generic and return a type? And add logic to collect all returned values into a shared vector which can then be atomically swapped out by an observer? Possibly not in this PR, but if this will be split out into a generic thread pool.",
      "created_at": "2024-10-23T15:02:40Z",
      "updated_at": "2024-10-23T15:02:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1812986201",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1812986201"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 40,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1817847707",
      "pull_request_review_id": 2397248915,
      "id": 1817847707,
      "node_id": "PRRC_kwDOABII585sWieb",
      "diff_hunk": "@@ -0,0 +1,124 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/threadnames.h>\n+\n+#include <condition_variable>\n+#include <future>\n+#include <queue>\n+#include <thread>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    // Stop indicator\n+    std::atomic<bool> m_stop{false};\n+    // Worker threads\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread(const std::string& thread_name) EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        util::ThreadRename(std::string{thread_name});\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_stop.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_stop.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_stop.load() && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't being stopped.\n+    }\n+\n+    void Start(int num_workers)\n+    {\n+        if (!m_workers.empty()) throw std::runtime_error(\"Thread pool already started\");\n+\n+        // Create the workers\n+        for (int i=0; i<num_workers; i++) {\n+            m_workers.emplace_back(&ThreadPool::WorkerThread, this, \"threadpool_worker_\" + ToString(i));\n+        }\n+    }\n+\n+    void Stop()\n+    {\n+        // Notify workers and join them.\n+        m_stop = true;\n+        m_condition.notify_all();\n+        for (auto& worker : m_workers) {\n+            worker.join();\n+        }\n+        m_workers.clear();\n+        m_stop = false;\n+    }\n+\n+    template<class T> EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    auto Submit(T task) -> std::future<decltype(task())>\n+    {\n+        auto ptr_task = std::make_shared<std::packaged_task<decltype(task()) ()>>(std::move(task));\n+        std::future<decltype(task())> future = ptr_task->get_future();\n+        {\n+            LOCK(cs_work_queue);\n+            m_work_queue.emplace([=]() {\n+                (*ptr_task)();\n+            });\n+        }\n+        m_condition.notify_one();\n+        return future;\n+    }\n+\n+    // Synchronous processing\n+    void ProcessTask() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 99,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "46e74257f22ea35f21b522c5b01c8cc99e4d5482",
      "in_reply_to_id": 1404664671,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This would make sense if we wanted to reuse this for CCheckQueue. Then, we could just loop and `ProcessTask` on the main thread once when we call `Wait`.",
      "created_at": "2024-10-26T13:00:24Z",
      "updated_at": "2024-10-26T13:00:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1817847707",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1817847707"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1818140297",
      "pull_request_review_id": 2397591697,
      "id": 1818140297,
      "node_id": "PRRC_kwDOABII585sXp6J",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {",
      "path": "src/util/threadpool.h",
      "position": 46,
      "original_position": 45,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": 1812965559,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I tried this and it causes memory errors, since the remaining futures will have a dangling ref to `m_condition`.",
      "created_at": "2024-10-27T16:52:55Z",
      "updated_at": "2024-10-27T16:52:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1818140297",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1818140297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1846807424",
      "pull_request_review_id": 2442986452,
      "id": 1846807424,
      "node_id": "PRRC_kwDOABII585uFAuA",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 60,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": null,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "tidy doesn't like this\r\n```suggestion\r\n    ThreadPool() = default;\r\n```",
      "created_at": "2024-11-18T15:37:35Z",
      "updated_at": "2024-11-18T15:37:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1846807424",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1846807424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1972522204",
      "pull_request_review_id": 2646111093,
      "id": 1972522204,
      "node_id": "PRRC_kwDOABII5851kkzc",
      "diff_hunk": "@@ -0,0 +1,164 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.",
      "path": "src/test/threadpool_tests.cpp",
      "position": 28,
      "original_position": 15,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "349b09983d994cb46faeed12b123ae2269c6c516",
      "in_reply_to_id": null,
      "user": {
        "login": "yancyribbens",
        "id": 817736,
        "node_id": "MDQ6VXNlcjgxNzczNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/817736?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yancyribbens",
        "html_url": "https://github.com/yancyribbens",
        "followers_url": "https://api.github.com/users/yancyribbens/followers",
        "following_url": "https://api.github.com/users/yancyribbens/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yancyribbens/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yancyribbens/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yancyribbens/subscriptions",
        "organizations_url": "https://api.github.com/users/yancyribbens/orgs",
        "repos_url": "https://api.github.com/users/yancyribbens/repos",
        "events_url": "https://api.github.com/users/yancyribbens/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yancyribbens/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```suggestion\r\n    // 2) Maintain all busy threads except one.\r\n```",
      "created_at": "2025-02-26T22:37:20Z",
      "updated_at": "2025-02-26T22:37:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1972522204",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1972522204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035856366",
      "pull_request_review_id": 2754283048,
      "id": 2035856366,
      "node_id": "PRRC_kwDOABII5855WLPu",
      "diff_hunk": "@@ -186,20 +220,7 @@ void BaseIndex::Sync()\n             pindex = pindex_next;\n \n \n-            CBlock block;\n-            interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!m_chainstate->m_blockman.ReadBlock(block, *pindex)) {\n-                FatalErrorf(\"%s: Failed to read block %s from disk\",\n-                           __func__, pindex->GetBlockHash().ToString());\n-                return;\n-            } else {\n-                block_info.data = &block;\n-            }\n-            if (!CustomAppend(block_info)) {\n-                FatalErrorf(\"%s: Failed to write block %s to index database\",\n-                           __func__, pindex->GetBlockHash().ToString());\n-                return;\n-            }\n+            if (!ProcessBlock(pindex)) break; // error logged internally",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 66,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "c4723fb9857c624ac0e1e034dc6c29d7821f5b4a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: remove CBlockIndex access from node internals\" (c4723fb9857c624ac0e1e034dc6c29d7821f5b4a)\r\n\r\nIt seems like this should be returning, not breaking. Would be good to change or clarify with a comment",
      "created_at": "2025-04-09T17:52:51Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2035856366",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035856366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 223,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035900118",
      "pull_request_review_id": 2754283048,
      "id": 2035900118,
      "node_id": "PRRC_kwDOABII5855WV7W",
      "diff_hunk": "@@ -311,17 +332,13 @@ void BaseIndex::BlockConnected(ChainstateRole role, const std::shared_ptr<const\n             return;\n         }\n     }\n-    interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex, block.get());\n-    if (CustomAppend(block_info)) {\n+\n+    if (ProcessBlock(pindex)) {",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 77,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "c4723fb9857c624ac0e1e034dc6c29d7821f5b4a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: remove CBlockIndex access from node internals\" (c4723fb9857c624ac0e1e034dc6c29d7821f5b4a)\r\n\r\nCoud add another `// error logged internally` comment here since it now looks like this failure is being ignored.\r\n",
      "created_at": "2025-04-09T18:24:10Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2035900118",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035900118"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 336,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035903040",
      "pull_request_review_id": 2754283048,
      "id": 2035903040,
      "node_id": "PRRC_kwDOABII5855WWpA",
      "diff_hunk": "@@ -250,19 +250,8 @@ std::optional<uint256> BlockFilterIndex::ReadFilterHeader(int height, const uint\n \n bool BlockFilterIndex::CustomAppend(const interfaces::BlockInfo& block)\n {\n-    CBlockUndo block_undo;\n-\n-    if (block.height > 0) {\n-        // pindex variable gives indexing code access to node internals. It\n-        // will be removed in upcoming commit\n-        const CBlockIndex* pindex = WITH_LOCK(cs_main, return m_chainstate->m_blockman.LookupBlockIndex(block.hash));\n-        if (!m_chainstate->m_blockman.ReadBlockUndo(block_undo, *pindex)) {\n-            return false;\n-        }\n-    }\n-\n+    const CBlockUndo& block_undo = block.height > 0 ? *Assert(block.undo_data) : CBlockUndo();",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "c4723fb9857c624ac0e1e034dc6c29d7821f5b4a",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: remove CBlockIndex access from node internals\" (c4723fb9857c624ac0e1e034dc6c29d7821f5b4a)\r\n\r\nI'm not sure this is safe. It looks like if block height is 0 this is taking a reference to a temporary object that will go out scope.\r\n\r\nIn any case I think this could be simplified to `const CBlockUndo& block_undo{*Assert(block.undo_data)}` because it looks like pointer will be set above even if height is 0.",
      "created_at": "2025-04-09T18:26:21Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2035903040",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035903040"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 253,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036050607",
      "pull_request_review_id": 2754283048,
      "id": 2036050607,
      "node_id": "PRRC_kwDOABII5855W6qv",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 32,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a382501d798c02a4dc042bc0641ce7b99c2db40f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"util: introduce general purpose thread pool\" (a382501d798c02a4dc042bc0641ce7b99c2db40f)\r\n\r\nI don't think it makes sense for `m_interrupt` to use the `CThreadInterrupt` class because the ThreadPool class already has it's own mutex and condition variable and it would be wasteful to introduce more. I think could just replace `CThreadInterrupt` with bool here, and replace `m_interrupt();` with `m_interrupt = true` and replace `m_interrupt.reset()` with `m_interrupt = false` while holding the mutex.",
      "created_at": "2025-04-09T19:52:39Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036050607",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036050607"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036055308",
      "pull_request_review_id": 2754283048,
      "id": 2036055308,
      "node_id": "PRRC_kwDOABII5855W70M",
      "diff_hunk": "@@ -299,6 +299,7 @@ inline MutexType* MaybeCheckNotHeld(MutexType* m) LOCKS_EXCLUDED(m) LOCK_RETURNE\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n #define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())\n+#define WITH_REVERSE_LOCK(cs, code) ([&]() -> decltype(auto) { REVERSE_LOCK(cs); code; }())",
      "path": "src/sync.h",
      "position": null,
      "original_position": 4,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a382501d798c02a4dc042bc0641ce7b99c2db40f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"util: introduce general purpose thread pool\" (a382501d798c02a4dc042bc0641ce7b99c2db40f)\r\n\r\nThis seems ok, but it's is only used one place where `WITH_REVERSE_LOCK` is not much simpler than plain `REVERSE_LOCK`. Could consider dropping it.",
      "created_at": "2025-04-09T19:56:20Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036055308",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036055308"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036057917",
      "pull_request_review_id": 2754283048,
      "id": 2036057917,
      "node_id": "PRRC_kwDOABII5855W8c9",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {",
      "path": "src/util/threadpool.h",
      "position": 46,
      "original_position": 45,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": 1812965559,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/26966#discussion_r1818140297\r\n\r\nIn commit \"util: introduce general purpose thread pool\" (a382501d798c02a4dc042bc0641ce7b99c2db40f)\r\n\r\n> I tried this and it causes memory errors, since the remaining futures will have a dangling ref to `m_condition`.\r\n\r\nTo be clear, you tried dropping the `m_work_queue.empty()` condition and that didn't work, so current code is correct? If so we could probably mark this thread resolved (if I am not misinterpreting).",
      "created_at": "2025-04-09T19:58:14Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036057917",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036057917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036071200",
      "pull_request_review_id": 2754283048,
      "id": 2036071200,
      "node_id": "PRRC_kwDOABII5855W_sg",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 29,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a382501d798c02a4dc042bc0641ce7b99c2db40f",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"util: introduce general purpose thread pool\" (a382501d798c02a4dc042bc0641ce7b99c2db40f)\r\n\r\nNot important, but would suggest simplifying naming and just calling these members:\r\n\r\n```c++\r\nMutex m_mutex;\r\nstd::condition_variable m_cv;\r\n```\r\n\r\nThe `cs_` prefix is an older convention that comes from windows code, and there is as long as this class is going to have one mutex there isn't really a reason to use a more complicated name.",
      "created_at": "2025-04-09T20:08:34Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036071200",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036071200"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036091278",
      "pull_request_review_id": 2754283048,
      "id": 2036091278,
      "node_id": "PRRC_kwDOABII5855XEmO",
      "diff_hunk": "@@ -2104,7 +2108,20 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    std::shared_ptr<ThreadPool> thread_pool;",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d9e4adb147ef71b7afa4234b94d077bce99416e4",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: implement index parallel sync\" (bc0e5211e8a914e80e68e9c700b846a4cc3ef95b)\r\n\r\nThis doesn't seem like a great use of shared_ptr because makes the shutdown sequence more complicated than it needs to be. I think it would be clearer if instead of taking `std::shared_ptr<ThreadPool>` references they just used `ThreadPool&` and a new `std::unique_ptr<ThreadPool> m_index_threads` member was added to `NodeContext`. This way the threads could be stopped with an explicit `reset()` call instead of shutting down more unpredictably when the last index is destroyed.",
      "created_at": "2025-04-09T20:23:31Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036091278",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036091278"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036131025",
      "pull_request_review_id": 2754283048,
      "id": 2036131025,
      "node_id": "PRRC_kwDOABII5855XOTR",
      "diff_hunk": "@@ -217,11 +228,53 @@ void BaseIndex::Sync()\n                 FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\", __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                const int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                const int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                const int remaining_blocks = tip_height - pindex_next->nHeight;\n+                work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "bc0e5211e8a914e80e68e9c700b846a4cc3ef95b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: implement index parallel sync\" (bc0e5211e8a914e80e68e9c700b846a4cc3ef95b)\r\n\r\nI found this hard to follow:\r\n\r\n```\r\nconst int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\r\nwork_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);\r\nworkers_count = m_thread_pool->WorkersCount();\r\n```\r\n\r\nwould suggest dropping the `max_blocks_to_sync` variable and simplifying to:\r\n\r\n```c++\r\nworkers_count = m_thread_pool->WorkersCount();\r\nwork_chunk = std::min(m_tasks_per_worker, remaining_blocks / (workers_count + 1));\r\n```\r\n",
      "created_at": "2025-04-09T20:56:12Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036131025",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036131025"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 242,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036133823",
      "pull_request_review_id": 2754283048,
      "id": 2036133823,
      "node_id": "PRRC_kwDOABII5855XO-_",
      "diff_hunk": "@@ -88,6 +91,7 @@ class BaseIndex : public CValidationInterface\n     CThreadInterrupt m_interrupt;\n \n     std::shared_ptr<ThreadPool> m_thread_pool;\n+    uint16_t m_tasks_per_worker{INDEX_WORK_PER_CHUNK};",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 21,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "bc0e5211e8a914e80e68e9c700b846a4cc3ef95b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: implement index parallel sync\" (bc0e5211e8a914e80e68e9c700b846a4cc3ef95b)\r\n\r\nIMO, this would be clearer if it were called blocks_per_worker or blocks_per_chunk instead of tasks_per_worker. Not knowing that a task is a block made the code harder to understand when initially reading it.",
      "created_at": "2025-04-09T20:58:36Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036133823",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036133823"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036163105",
      "pull_request_review_id": 2754283048,
      "id": 2036163105,
      "node_id": "PRRC_kwDOABII5855XWIh",
      "diff_hunk": "@@ -217,11 +228,53 @@ void BaseIndex::Sync()\n                 FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\", __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 64,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "bc0e5211e8a914e80e68e9c700b846a4cc3ef95b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"index: implement index parallel sync\" (bc0e5211e8a914e80e68e9c700b846a4cc3ef95b)\r\n\r\nWould be really helpful to have a comment saying how this works at a high level. Would suggest something like \"If parallel sync is enabled, use `WorkersCount()+1` threads (including the current thread) to each process block ranges of up to `m_tasks_per_worker` blocks. The blocks in each range are processed in sequence by calling the index's `CustomProcessBlock` method which returns `std::any` values that are collected into vectors. As the threads finish their work, the `std::any` values are processed in order by calling the index's `CustomPostProcessBlocks` method, and the process repeats until no blocks are remaining to be processed and post-processed.\"\r\n\r\nI guess at a high level this seems reasonable, but perhaps too rigid. Like if there are 3 threads processing block ranges 1-10, 11-20, 21-30, and the first 2 threads finish while the third thread is slow. Why should the loop need to wait for the third thread before beginning to process blocks 31-50 and there are two idle threads doing nothing?\r\n\r\nIt seems like this idleness could be avoided by moving the `CustomPostProcessBlocks` calls into the worker threads. So that whenever each worker thread finishes processing blocks, it then opportunistically calls `CustomPostProcessBlocks` to post-process any blocks that are available (given the ordering constraint for post-processing). This way all the worker threads would continuously have work to do, and I suspect the resulting code might be simpler too since there would just be a single phase of work, not alternating Processing/PostProcessing phases.",
      "created_at": "2025-04-09T21:24:01Z",
      "updated_at": "2025-04-09T21:50:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036163105",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036163105"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 238,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036207269",
      "pull_request_review_id": 2754912046,
      "id": 2036207269,
      "node_id": "PRRC_kwDOABII5855Xg6l",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {",
      "path": "src/util/threadpool.h",
      "position": 46,
      "original_position": 45,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": 1812965559,
      "user": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Err, I still think we would want to abandon the work queue if we are interrupted instead of waiting for it to finish, no? My naive approach of not waiting for the queue to be empty does not work though.",
      "created_at": "2025-04-09T22:12:33Z",
      "updated_at": "2025-04-09T22:13:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2036207269",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036207269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129539102",
      "pull_request_review_id": 2901371695,
      "id": 2129539102,
      "node_id": "PRRC_kwDOABII585-7jAe",
      "diff_hunk": "@@ -186,20 +220,7 @@ void BaseIndex::Sync()\n             pindex = pindex_next;\n \n \n-            CBlock block;\n-            interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex);\n-            if (!m_chainstate->m_blockman.ReadBlock(block, *pindex)) {\n-                FatalErrorf(\"%s: Failed to read block %s from disk\",\n-                           __func__, pindex->GetBlockHash().ToString());\n-                return;\n-            } else {\n-                block_info.data = &block;\n-            }\n-            if (!CustomAppend(block_info)) {\n-                FatalErrorf(\"%s: Failed to write block %s to index database\",\n-                           __func__, pindex->GetBlockHash().ToString());\n-                return;\n-            }\n+            if (!ProcessBlock(pindex)) break; // error logged internally",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 66,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "c4723fb9857c624ac0e1e034dc6c29d7821f5b4a",
      "in_reply_to_id": 2035856366,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"index: remove CBlockIndex access from node internals\" ([c4723fb](https://github.com/bitcoin/bitcoin/commit/c4723fb9857c624ac0e1e034dc6c29d7821f5b4a))\r\n> \r\n> It seems like this should be returning, not breaking. Would be good to change or clarify with a comment\r\n\r\n\r\nyeah, good catch!.\r\nI think at the end it doesn't matter much because `ProcessBlock` aborts the node during a failure but still, this would have logged an extra line \"index enabled at height <height>\" during shutdown.",
      "created_at": "2025-06-05T17:41:04Z",
      "updated_at": "2025-06-05T20:05:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129539102",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129539102"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 223,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129576690",
      "pull_request_review_id": 2901371695,
      "id": 2129576690,
      "node_id": "PRRC_kwDOABII585-7sLy",
      "diff_hunk": "@@ -311,17 +332,13 @@ void BaseIndex::BlockConnected(ChainstateRole role, const std::shared_ptr<const\n             return;\n         }\n     }\n-    interfaces::BlockInfo block_info = kernel::MakeBlockInfo(pindex, block.get());\n-    if (CustomAppend(block_info)) {\n+\n+    if (ProcessBlock(pindex)) {",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 77,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "c4723fb9857c624ac0e1e034dc6c29d7821f5b4a",
      "in_reply_to_id": 2035900118,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"index: remove CBlockIndex access from node internals\" ([c4723fb](https://github.com/bitcoin/bitcoin/commit/c4723fb9857c624ac0e1e034dc6c29d7821f5b4a))\r\n> \r\n> Coud add another `// error logged internally` comment here since it now looks like this failure is being ignored.\r\n\r\n\r\nDone as suggested.",
      "created_at": "2025-06-05T17:48:00Z",
      "updated_at": "2025-06-05T20:06:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129576690",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129576690"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 336,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129584923",
      "pull_request_review_id": 2901371695,
      "id": 2129584923,
      "node_id": "PRRC_kwDOABII585-7uMb",
      "diff_hunk": "@@ -250,19 +250,8 @@ std::optional<uint256> BlockFilterIndex::ReadFilterHeader(int height, const uint\n \n bool BlockFilterIndex::CustomAppend(const interfaces::BlockInfo& block)\n {\n-    CBlockUndo block_undo;\n-\n-    if (block.height > 0) {\n-        // pindex variable gives indexing code access to node internals. It\n-        // will be removed in upcoming commit\n-        const CBlockIndex* pindex = WITH_LOCK(cs_main, return m_chainstate->m_blockman.LookupBlockIndex(block.hash));\n-        if (!m_chainstate->m_blockman.ReadBlockUndo(block_undo, *pindex)) {\n-            return false;\n-        }\n-    }\n-\n+    const CBlockUndo& block_undo = block.height > 0 ? *Assert(block.undo_data) : CBlockUndo();",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 15,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "c4723fb9857c624ac0e1e034dc6c29d7821f5b4a",
      "in_reply_to_id": 2035903040,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"index: remove CBlockIndex access from node internals\" ([c4723fb](https://github.com/bitcoin/bitcoin/commit/c4723fb9857c624ac0e1e034dc6c29d7821f5b4a))\r\n> \r\n> I'm not sure this is safe. It looks like if block height is 0 this is taking a reference to a temporary object that will go out scope.\r\n> \r\n> In any case I think this could be simplified to `const CBlockUndo& block_undo{*Assert(block.undo_data)}` because it looks like pointer will be set above even if height is 0.\r\n\r\n\r\nyeah, great. Done as suggested.",
      "created_at": "2025-06-05T17:49:43Z",
      "updated_at": "2025-06-05T20:06:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129584923",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129584923"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 253,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129691798",
      "pull_request_review_id": 2901371695,
      "id": 2129691798,
      "node_id": "PRRC_kwDOABII585-8ISW",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 32,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a382501d798c02a4dc042bc0641ce7b99c2db40f",
      "in_reply_to_id": 2036050607,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"util: introduce general purpose thread pool\" ([a382501](https://github.com/bitcoin/bitcoin/commit/a382501d798c02a4dc042bc0641ce7b99c2db40f))\r\n> \r\n> I don't think it makes sense for `m_interrupt` to use the `CThreadInterrupt` class because the ThreadPool class already has it's own mutex and condition variable and it would be wasteful to introduce more. I think could just replace `CThreadInterrupt` with bool here, and replace `m_interrupt();` with `m_interrupt = true` and replace `m_interrupt.reset()` with `m_interrupt = false` while holding the mutex.\r\n\r\n\r\n\r\nsure, done as suggested. Thanks!",
      "created_at": "2025-06-05T18:16:02Z",
      "updated_at": "2025-06-05T20:06:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129691798",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129691798"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129720967",
      "pull_request_review_id": 2901371695,
      "id": 2129720967,
      "node_id": "PRRC_kwDOABII585-8PaH",
      "diff_hunk": "@@ -299,6 +299,7 @@ inline MutexType* MaybeCheckNotHeld(MutexType* m) LOCKS_EXCLUDED(m) LOCK_RETURNE\n //! The above is detectable at compile-time with the -Wreturn-local-addr flag in\n //! gcc and the -Wreturn-stack-address flag in clang, both enabled by default.\n #define WITH_LOCK(cs, code) (MaybeCheckNotHeld(cs), [&]() -> decltype(auto) { LOCK(cs); code; }())\n+#define WITH_REVERSE_LOCK(cs, code) ([&]() -> decltype(auto) { REVERSE_LOCK(cs); code; }())",
      "path": "src/sync.h",
      "position": null,
      "original_position": 4,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a382501d798c02a4dc042bc0641ce7b99c2db40f",
      "in_reply_to_id": 2036055308,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"util: introduce general purpose thread pool\" ([a382501](https://github.com/bitcoin/bitcoin/commit/a382501d798c02a4dc042bc0641ce7b99c2db40f))\r\n> \r\n> This seems ok, but it's is only used one place where `WITH_REVERSE_LOCK` is not much simpler than plain `REVERSE_LOCK`. Could consider dropping it.\r\n\r\n\r\n\r\nSure. I think I did it this way to be very explicit about the code that will be executed without the lock, but yeah, we could achieve the same outcome with another set of brackets too.",
      "created_at": "2025-06-05T18:22:01Z",
      "updated_at": "2025-06-05T20:06:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129720967",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129720967"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129726620",
      "pull_request_review_id": 2901371695,
      "id": 2129726620,
      "node_id": "PRRC_kwDOABII585-8Qyc",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 29,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a382501d798c02a4dc042bc0641ce7b99c2db40f",
      "in_reply_to_id": 2036071200,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"util: introduce general purpose thread pool\" ([a382501](https://github.com/bitcoin/bitcoin/commit/a382501d798c02a4dc042bc0641ce7b99c2db40f))\r\n> \r\n> Not important, but would suggest simplifying naming and just calling these members:\r\n> \r\n> ```c++\r\n> Mutex m_mutex;\r\n> std::condition_variable m_cv;\r\n> ```\r\n> \r\n> The `cs_` prefix is an older convention that comes from windows code, and there is as long as this class is going to have one mutex there isn't really a reason to use a more complicated name.\r\n\r\n\r\n\r\nk sure. Done as suggested.",
      "created_at": "2025-06-05T18:23:19Z",
      "updated_at": "2025-06-05T20:07:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129726620",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129726620"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129902851",
      "pull_request_review_id": 2901371695,
      "id": 2129902851,
      "node_id": "PRRC_kwDOABII585-870D",
      "diff_hunk": "@@ -2104,7 +2108,20 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    std::shared_ptr<ThreadPool> thread_pool;",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 29,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d9e4adb147ef71b7afa4234b94d077bce99416e4",
      "in_reply_to_id": 2036091278,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"index: implement index parallel sync\" ([bc0e521](https://github.com/bitcoin/bitcoin/commit/bc0e5211e8a914e80e68e9c700b846a4cc3ef95b))\r\n> \r\n> This doesn't seem like a great use of shared_ptr because makes the shutdown sequence more complicated than it needs to be. I think it would be clearer if instead of taking `std::shared_ptr<ThreadPool>` references they just used `ThreadPool&` and a new `std::unique_ptr<ThreadPool> m_index_threads` member was added to `NodeContext`. This way the threads could be stopped with an explicit `reset()` call instead of shutting down more unpredictably when the last index is destroyed.\r\n\r\n\r\nSounds good. Done as suggested. Thanks!",
      "created_at": "2025-06-05T19:05:59Z",
      "updated_at": "2025-06-05T20:07:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2129902851",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2129902851"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2111,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2130095726",
      "pull_request_review_id": 2901371695,
      "id": 2130095726,
      "node_id": "PRRC_kwDOABII585-9q5u",
      "diff_hunk": "@@ -217,11 +228,53 @@ void BaseIndex::Sync()\n                 FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\", __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {\n+                const int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\n+                const int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+                const int remaining_blocks = tip_height - pindex_next->nHeight;\n+                work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "bc0e5211e8a914e80e68e9c700b846a4cc3ef95b",
      "in_reply_to_id": 2036131025,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"index: implement index parallel sync\" ([bc0e521](https://github.com/bitcoin/bitcoin/commit/bc0e5211e8a914e80e68e9c700b846a4cc3ef95b))\r\n> \r\n> I found this hard to follow:\r\n> \r\n> ```\r\n> const int max_blocks_to_sync = m_tasks_per_worker * m_thread_pool->WorkersCount() + m_tasks_per_worker; // extra 'm_tasks_per_worker' due the active-wait.\r\n> work_chunk = remaining_blocks > max_blocks_to_sync ? m_tasks_per_worker : remaining_blocks / (m_thread_pool->WorkersCount() + 1);\r\n> workers_count = m_thread_pool->WorkersCount();\r\n> ```\r\n> \r\n> would suggest dropping the `max_blocks_to_sync` variable and simplifying to:\r\n> \r\n> ```c++\r\n> workers_count = m_thread_pool->WorkersCount();\r\n> work_chunk = std::min(m_tasks_per_worker, remaining_blocks / (workers_count + 1));\r\n> ```\r\n\r\n\r\n\r\nGood idea. Done as suggested.",
      "created_at": "2025-06-05T19:51:15Z",
      "updated_at": "2025-06-05T20:07:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2130095726",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2130095726"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 242,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2130122965",
      "pull_request_review_id": 2901371695,
      "id": 2130122965,
      "node_id": "PRRC_kwDOABII585-9xjV",
      "diff_hunk": "@@ -88,6 +91,7 @@ class BaseIndex : public CValidationInterface\n     CThreadInterrupt m_interrupt;\n \n     std::shared_ptr<ThreadPool> m_thread_pool;\n+    uint16_t m_tasks_per_worker{INDEX_WORK_PER_CHUNK};",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 21,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "bc0e5211e8a914e80e68e9c700b846a4cc3ef95b",
      "in_reply_to_id": 2036133823,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In commit \"index: implement index parallel sync\" ([bc0e521](https://github.com/bitcoin/bitcoin/commit/bc0e5211e8a914e80e68e9c700b846a4cc3ef95b))\r\n> \r\n> IMO, this would be clearer if it were called blocks_per_worker or blocks_per_chunk instead of tasks_per_worker. Not knowing that a task is a block made the code harder to understand when initially reading it.\r\n\r\n\r\n\r\nsure. Done as suggested.",
      "created_at": "2025-06-05T19:59:18Z",
      "updated_at": "2025-06-05T20:08:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2130122965",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2130122965"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2144624538",
      "pull_request_review_id": 2924075732,
      "id": 2144624538,
      "node_id": "PRRC_kwDOABII585_1F-a",
      "diff_hunk": "@@ -282,6 +282,23 @@ bool BlockFilterIndex::Write(const BlockFilter& filter, uint32_t block_height, c\n     return true;\n }\n \n+std::any BlockFilterIndex::CustomProcessBlock(const interfaces::BlockInfo& block_info)\n+{\n+    return std::make_pair(BlockFilter(BlockFilterType::BASIC, *block_info.data, *block_info.undo_data), block_info.height);\n+}\n+\n+bool BlockFilterIndex::CustomPostProcessBlocks(const std::any& obj)\n+{\n+    const auto& [filter, height] = std::any_cast<std::pair<BlockFilter, int>>(obj);\n+    const uint256& header = filter.ComputeHeader(m_last_header);\n+    if (!Write(filter, height, header)) {\n+        LogError(\"Error writings filters, shutting down block filters index\\n\");",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "53bc8b9663fd51fa43eb568aee8a38936cc7c6e8",
      "in_reply_to_id": null,
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "\r\n    writings -> writing [incorrect verb form in \"Error writings filters\"]\r\n",
      "created_at": "2025-06-13T09:38:15Z",
      "updated_at": "2025-06-13T09:38:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2144624538",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2144624538"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 295,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162030647",
      "pull_request_review_id": 2950751583,
      "id": 2162030647,
      "node_id": "PRRC_kwDOABII586A3fg3",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            // Execute the task without the lock\n+            WITH_REVERSE_LOCK(wait_lock, task());\n+        }\n+    }\n+\n+public:\n+    ThreadPool() {}",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 60,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": 1846807424,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done as suggested",
      "created_at": "2025-06-23T16:36:05Z",
      "updated_at": "2025-06-23T16:36:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2162030647",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162030647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 60,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162360516",
      "pull_request_review_id": 2951262244,
      "id": 2162360516,
      "node_id": "PRRC_kwDOABII586A4wDE",
      "diff_hunk": "@@ -217,11 +228,53 @@ void BaseIndex::Sync()\n                 FatalErrorf(\"%s: Failed to rewind index %s to a previous chain tip\", __func__, GetName());\n                 return;\n             }\n-            pindex = pindex_next;\n \n+            // By default, parallel sync disabled\n+            int work_chunk = 1;\n+            int workers_count = 0;\n+            std::vector<std::future<std::vector<std::any>>> futures;\n+            const CBlockIndex* it_start = pindex_next;\n+\n+            if (parallel_sync_enabled) {",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 64,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "bc0e5211e8a914e80e68e9c700b846a4cc3ef95b",
      "in_reply_to_id": 2036163105,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Would be really helpful to have a comment saying how this works at a high level. Would suggest something like \"If parallel sync is enabled, use WorkersCount()+1 threads (including the current thread) to each process block ranges of up to m_tasks_per_worker blocks. The blocks in each range are processed in sequence by calling the index's CustomProcessBlock method which returns std::any values that are collected into vectors. As the threads finish their work, the std::any values are processed in order by calling the index's CustomPostProcessBlocks method, and the process repeats until no blocks are remaining to be processed and post-processed.\"\r\n\r\nSure done!\r\n\r\n> guess at a high level this seems reasonable, but perhaps too rigid. Like if there are 3 threads processing block ranges 1-10, 11-20, 21-30, and the first 2 threads finish while the third thread is slow. Why should the loop need to wait for the third thread before beginning to process blocks 31-50 and there are two idle threads doing nothing?\r\n>\r\n> It seems like this idleness could be avoided by moving the CustomPostProcessBlocks calls into the worker threads. So that whenever each worker thread finishes processing blocks, it then opportunistically calls CustomPostProcessBlocks to post-process any blocks that are available (given the ordering constraint for post-processing). This way all the worker threads would continuously have work to do, and I suspect the resulting code might be simpler too since there would just be a single phase of work, not alternating Processing/PostProcessing phases.\r\n\r\nSpent a few days implementing this suggestion. It started out small but turned into a larger change than I initially expected. That said, I liked the direction and felt it was worth the extra effort. The process runs faster now.\r\nLet me know what you think.\r\n\r\nDesign-wise, I kept everything within the `Sync` method, but could also encapsulate it into a separate class if preferred.",
      "created_at": "2025-06-23T19:10:31Z",
      "updated_at": "2025-06-23T19:15:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2162360516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162360516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 238,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166085260",
      "pull_request_review_id": 2957109420,
      "id": 2166085260,
      "node_id": "PRRC_kwDOABII586BG9aM",
      "diff_hunk": "@@ -173,83 +175,270 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n         block_info.undo_data = &block_undo;\n     }\n \n-    if (!CustomAppend(block_info)) {\n-        FatalErrorf(\"%s: Failed to write block %s to index database\",\n-                    __func__, pindex->GetBlockHash().ToString());\n-        return false;\n+    const auto& any_obj = CustomProcessBlock(block_info);\n+    if (!any_obj.has_value()) {\n+        throw std::runtime_error(strprintf(\"%s: Failed to process block %s for index %s\", __func__, pindex->GetBlockHash().GetHex(), GetName()));\n     }\n+    return any_obj;\n+}\n \n-    return true;\n+std::vector<std::any> BaseIndex::ProcessBlocks(bool process_in_order, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    std::vector<std::any> results;\n+    if (process_in_order) {\n+        // When ordering is required, collect all block indexes from [end..start] in order\n+        std::vector<const CBlockIndex*> ordered_blocks;\n+        for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+            ordered_blocks.emplace_back(block);\n+        }\n+\n+        // And process blocks in forward order: from start to end\n+        for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+            results.emplace_back(ProcessBlock(*it));\n+        }\n+        return results;\n+    }\n+\n+    // If ordering is not required, process blocks directly from end to start\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        results.emplace_back(ProcessBlock(block));\n+    }\n+\n+    return results;\n }\n \n+struct Task {\n+    int id;\n+    const CBlockIndex* start_index;\n+    const CBlockIndex* end_index;\n+    std::vector<std::any> result;\n+\n+    Task(int task_id, const CBlockIndex* start, const CBlockIndex* end)\n+            : id(task_id), start_index(start), end_index(end) {}\n+\n+    // Disallow copy\n+    Task(const Task&) = delete;\n+    Task& operator=(const Task&) = delete;\n+    Task(Task&&) noexcept = default;\n+};\n+\n+// Context shared across the initial sync workers\n+struct SyncContext {\n+    Mutex mutex_pending_tasks;\n+    std::queue<Task> pending_tasks GUARDED_BY(mutex_pending_tasks);\n+\n+    Mutex mutex_processed_tasks;\n+    std::map<int, Task> processed_tasks GUARDED_BY(mutex_processed_tasks);\n+\n+    std::atomic<int> next_id_to_process{0};\n+};\n+\n+// Synchronizes the index with the active chain.\n+//\n+// If parallel sync is enabled, this method uses WorkersCount()+1 threads (including the current thread)\n+// to process block ranges concurrently. Each worker handles up to 'm_blocks_per_worker' blocks each time\n+// (this is called a \"task\"), which are processed via CustomProcessBlock calls. Results are stored in the\n+// SyncContext's 'processed_tasks' map so they can be sequentially post-processed later.\n+//\n+// After completing a task, workers opportunistically post-process completed tasks *in order* using\n+// CustomPostProcessBlocks. This continues until all blocks have been fully processed and committed.\n+//\n+// Reorgs are detected and handled before syncing begins, ensuring the index starts aligned with the active chain.\n void BaseIndex::Sync()\n {\n+    if (m_synced) return; // we are sync, nothing to do",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 105,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a3e7d97b89821239bbba3e2c434a9a6405911865",
      "in_reply_to_id": null,
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "\r\n    “// we are sync, nothing to do” → “// we are synced, nothing to do” [‘sync’ is incorrect here; use past participle ‘synced’]\r\n    “// Log progress every often” → “// Log progress every so often” [missing ‘so’ in the idiom]\r\n    “// Commit changes every often” → “// Commit changes every so often” [same idiomatic error]\r\n",
      "created_at": "2025-06-25T08:11:34Z",
      "updated_at": "2025-06-25T08:11:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2166085260",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166085260"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 249,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166835523",
      "pull_request_review_id": 2958359444,
      "id": 2166835523,
      "node_id": "PRRC_kwDOABII586BJ0lD",
      "diff_hunk": "@@ -173,83 +175,270 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n         block_info.undo_data = &block_undo;\n     }\n \n-    if (!CustomAppend(block_info)) {\n-        FatalErrorf(\"%s: Failed to write block %s to index database\",\n-                    __func__, pindex->GetBlockHash().ToString());\n-        return false;\n+    const auto& any_obj = CustomProcessBlock(block_info);\n+    if (!any_obj.has_value()) {\n+        throw std::runtime_error(strprintf(\"%s: Failed to process block %s for index %s\", __func__, pindex->GetBlockHash().GetHex(), GetName()));\n     }\n+    return any_obj;\n+}\n \n-    return true;\n+std::vector<std::any> BaseIndex::ProcessBlocks(bool process_in_order, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    std::vector<std::any> results;\n+    if (process_in_order) {\n+        // When ordering is required, collect all block indexes from [end..start] in order\n+        std::vector<const CBlockIndex*> ordered_blocks;\n+        for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+            ordered_blocks.emplace_back(block);\n+        }\n+\n+        // And process blocks in forward order: from start to end\n+        for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+            results.emplace_back(ProcessBlock(*it));\n+        }\n+        return results;\n+    }\n+\n+    // If ordering is not required, process blocks directly from end to start\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        results.emplace_back(ProcessBlock(block));\n+    }\n+\n+    return results;\n }\n \n+struct Task {\n+    int id;\n+    const CBlockIndex* start_index;\n+    const CBlockIndex* end_index;\n+    std::vector<std::any> result;\n+\n+    Task(int task_id, const CBlockIndex* start, const CBlockIndex* end)\n+            : id(task_id), start_index(start), end_index(end) {}\n+\n+    // Disallow copy\n+    Task(const Task&) = delete;\n+    Task& operator=(const Task&) = delete;\n+    Task(Task&&) noexcept = default;\n+};\n+\n+// Context shared across the initial sync workers\n+struct SyncContext {\n+    Mutex mutex_pending_tasks;\n+    std::queue<Task> pending_tasks GUARDED_BY(mutex_pending_tasks);\n+\n+    Mutex mutex_processed_tasks;\n+    std::map<int, Task> processed_tasks GUARDED_BY(mutex_processed_tasks);\n+\n+    std::atomic<int> next_id_to_process{0};\n+};\n+\n+// Synchronizes the index with the active chain.\n+//\n+// If parallel sync is enabled, this method uses WorkersCount()+1 threads (including the current thread)\n+// to process block ranges concurrently. Each worker handles up to 'm_blocks_per_worker' blocks each time\n+// (this is called a \"task\"), which are processed via CustomProcessBlock calls. Results are stored in the\n+// SyncContext's 'processed_tasks' map so they can be sequentially post-processed later.\n+//\n+// After completing a task, workers opportunistically post-process completed tasks *in order* using\n+// CustomPostProcessBlocks. This continues until all blocks have been fully processed and committed.\n+//\n+// Reorgs are detected and handled before syncing begins, ensuring the index starts aligned with the active chain.\n void BaseIndex::Sync()\n {\n+    if (m_synced) return; // we are sync, nothing to do",
      "path": "src/index/base.cpp",
      "position": null,
      "original_position": 105,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "a3e7d97b89821239bbba3e2c434a9a6405911865",
      "in_reply_to_id": 2166085260,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done. Please stop bullying my poor English :p",
      "created_at": "2025-06-25T14:14:58Z",
      "updated_at": "2025-06-25T14:20:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2166835523",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166835523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 249,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172705028",
      "pull_request_review_id": 2967674914,
      "id": 2172705028,
      "node_id": "PRRC_kwDOABII586BgNkE",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_condition.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(cs_work_queue) { return m_interrupt || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {",
      "path": "src/util/threadpool.h",
      "position": 46,
      "original_position": 45,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": 1812965559,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hmm, sorry for the very very late response @andrewtoth. I missed this message completely.\r\n\r\n> I still think we would want to abandon the work queue if we are interrupted instead of waiting for it to finish, no? My naive approach of not waiting for the queue to be empty does not work though.\r\n\r\nYeah, I don’t think that’s safe. Other threads might be waiting on the tasks' futures to complete, so exiting without notifying them would leave them blocked forever.\r\nWhat we could do (and I think you mentioned this elsewhere) is keep track of all the tasks' promises internally and fail them with an interruption error/exception if the thread pool gets interrupted. In this way we also avoid lingering objects.",
      "created_at": "2025-06-27T19:14:13Z",
      "updated_at": "2025-06-27T19:15:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2172705028",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172705028"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172711323",
      "pull_request_review_id": 2967687369,
      "id": 2172711323,
      "node_id": "PRRC_kwDOABII586BgPGb",
      "diff_hunk": "@@ -0,0 +1,130 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex cs_work_queue;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(cs_work_queue);\n+    std::condition_variable m_condition;\n+    CThreadInterrupt m_interrupt;\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!cs_work_queue)\n+    {\n+        WAIT_LOCK(cs_work_queue, wait_lock);\n+        while (!m_interrupt) {\n+            std::function<void()> task;",
      "path": "src/util/threadpool.h",
      "position": 40,
      "original_position": 39,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "81dcee9464fc0f2b4a4fe547f312b71b405010b2",
      "in_reply_to_id": 1812986201,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Can we modify this to be more generic and return a type? And add logic to collect all returned values into a shared vector which can then be atomically swapped out by an observer? Possibly not in this PR, but if this will be split out into a generic thread pool.\r\n\r\nWe could keep track of the task futures' promises, if that's what you're referring to. In other words, this void() function is just a wrapper that executes a generic function which sets the result inside the caller’s future.",
      "created_at": "2025-06-27T19:19:30Z",
      "updated_at": "2025-06-27T19:19:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2172711323",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172711323"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 40,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2184661489",
      "pull_request_review_id": 2985983304,
      "id": 2184661489,
      "node_id": "PRRC_kwDOABII586CN0nx",
      "diff_hunk": "@@ -130,6 +141,26 @@ class BaseIndex : public CValidationInterface\n     /// Update the internal best block index as well as the prune lock.\n     void SetBestBlockIndex(const CBlockIndex* block);\n \n+    /// If 'AllowParallelSync()' retrieves true, 'ProcessBlock()' will run concurrently in batches.",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 48,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "f6b7da2493488c0e48ad9acf569ef3bdaf6b07b3",
      "in_reply_to_id": null,
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Possible typos and grammar issues:\r\n\r\n    retrieves -> returns [‘retrieves true’ is awkward; standard terminology is ‘returns true’]\r\n    will be already be logged -> will already be logged [duplicate “be”]\r\n",
      "created_at": "2025-07-04T07:51:33Z",
      "updated_at": "2025-07-04T07:51:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2184661489",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2184661489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 144,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220282853",
      "pull_request_review_id": 3039751954,
      "id": 2220282853,
      "node_id": "PRRC_kwDOABII586EVtPl",
      "diff_hunk": "@@ -0,0 +1,136 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 44,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7d984c3b2dca085ef7f49d21568b06c7b89c7807",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \"util: introduce general purpose thread pool\" 7d984c3b2dca085ef7f49d21568b06c7b89c7807\r\n\r\nHmm I can imagine that this can be blocking when you want to stop instantly; but I guess there is a reason why you did not return here and then empty the work queue in Stop.\r\n```suggestion\r\n                // If stopped and no work left, exit worker.\r\n```",
      "created_at": "2025-07-21T20:44:15Z",
      "updated_at": "2025-07-21T21:04:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220282853",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220282853"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220285854",
      "pull_request_review_id": 3039751954,
      "id": 2220285854,
      "node_id": "PRRC_kwDOABII586EVt-e",
      "diff_hunk": "@@ -0,0 +1,136 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 49,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7d984c3b2dca085ef7f49d21568b06c7b89c7807",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \"util: introduce general purpose thread pool\" 7d984c3b2dca085ef7f49d21568b06c7b89c7807\r\n\r\nI think this and other verbose comment can be removed, it is quite obvious.\r\n\r\nWhat might need comment is Submit due to the abstraction there.",
      "created_at": "2025-07-21T20:45:29Z",
      "updated_at": "2025-07-21T21:04:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220285854",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220285854"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220304297",
      "pull_request_review_id": 3039751954,
      "id": 2220304297,
      "node_id": "PRRC_kwDOABII586EVyep",
      "diff_hunk": "@@ -0,0 +1,187 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);",
      "path": "src/test/threadpool_tests.cpp",
      "position": 58,
      "original_position": 44,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7d984c3b2dca085ef7f49d21568b06c7b89c7807",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \"util: introduce general purpose thread pool\" 7d984c3b2dca085ef7f49d21568b06c7b89c7807\r\n\r\nAlso verify that no work queue size is 0.",
      "created_at": "2025-07-21T20:52:17Z",
      "updated_at": "2025-07-21T21:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220304297",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220304297"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 58,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220315413",
      "pull_request_review_id": 3039751954,
      "id": 2220315413,
      "node_id": "PRRC_kwDOABII586EV1MV",
      "diff_hunk": "@@ -2160,7 +2165,19 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > 100) return InitError(_(\"Invalid -indexworkers arg\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \" init: provide thread pool to indexes \" 82fa9d29653b445118fc2d03e2ced520a5d4c7dc\r\n\r\nThis message should be more verbose users should know the limit",
      "created_at": "2025-07-21T20:55:41Z",
      "updated_at": "2025-07-21T21:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220315413",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220315413"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220317691",
      "pull_request_review_id": 3039751954,
      "id": 2220317691,
      "node_id": "PRRC_kwDOABII586EV1v7",
      "diff_hunk": "@@ -517,6 +519,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n                  strprintf(\"Maintain an index of compact filters by block (default: %s, values: %s).\", DEFAULT_BLOCKFILTERINDEX, ListBlockFilterTypes()) +\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-indexworkers=<n>\", strprintf(\"Number of worker threads spawned for the indexes initial sync process (default: %d).\", INDEX_WORKERS_COUNT), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \" init: provide thread pool to indexes \" 82fa9d29653b445118fc2d03e2ced520a5d4c7dc\r\n\r\nDefine the max and then use it here and in checking the bounds",
      "created_at": "2025-07-21T20:56:19Z",
      "updated_at": "2025-07-21T21:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220317691",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220317691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220319189",
      "pull_request_review_id": 3039751954,
      "id": 2220319189,
      "node_id": "PRRC_kwDOABII586EV2HV",
      "diff_hunk": "@@ -18,10 +18,14 @@ class CBlock;\n class CBlockIndex;\n class Chainstate;\n class ChainstateManager;\n+class ThreadPool;\n namespace interfaces {\n class Chain;\n } // namespace interfaces\n \n+/** Number of concurrent jobs during the initial sync process */\n+static constexpr int16_t INDEX_WORKERS_COUNT = 0;",
      "path": "src/index/base.h",
      "position": 19,
      "original_position": 10,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In \" init: provide thread pool to indexes \" 82fa9d29653b445118fc2d03e2ced520a5d4c7dc\r\n\r\nWhy 0?",
      "created_at": "2025-07-21T20:56:46Z",
      "updated_at": "2025-07-21T21:03:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220319189",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2220319189"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223829051",
      "pull_request_review_id": 3044877628,
      "id": 2223829051,
      "node_id": "PRRC_kwDOABII586EjPA7",
      "diff_hunk": "@@ -0,0 +1,136 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 44,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7d984c3b2dca085ef7f49d21568b06c7b89c7807",
      "in_reply_to_id": 2220282853,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Hmm I can imagine that this can be blocking when you want to stop instantly; but I guess there is a reason why you did not return here and then empty the work queue in Stop.\r\n\r\nYes. We need to fulfill all promises so there are no dangling futures waiting for the worker to finish executing the task.\r\nIn the future, we could avoid this by tracking all the promises and triggering a \"shutdown\" exception during stop.",
      "created_at": "2025-07-22T21:06:31Z",
      "updated_at": "2025-07-22T21:12:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2223829051",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223829051"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223838649",
      "pull_request_review_id": 3044877628,
      "id": 2223838649,
      "node_id": "PRRC_kwDOABII586EjRW5",
      "diff_hunk": "@@ -18,10 +18,14 @@ class CBlock;\n class CBlockIndex;\n class Chainstate;\n class ChainstateManager;\n+class ThreadPool;\n namespace interfaces {\n class Chain;\n } // namespace interfaces\n \n+/** Number of concurrent jobs during the initial sync process */\n+static constexpr int16_t INDEX_WORKERS_COUNT = 0;",
      "path": "src/index/base.h",
      "position": 19,
      "original_position": 10,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220319189,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Why 0?\r\n\r\nParallel sync is disabled by default. We’re currently not tracking the number of threads spawned by Core, so I chose not to make assumptions here (don't want indexes threads competing with net/validation ones). It’s safer to let users specify the appropriate number for their setup. In the future, we could improve this by adding thread tracking object/mechanism and picking up the best number for their machine.",
      "created_at": "2025-07-22T21:12:43Z",
      "updated_at": "2025-07-22T21:12:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2223838649",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223838649"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223903289",
      "pull_request_review_id": 3044985960,
      "id": 2223903289,
      "node_id": "PRRC_kwDOABII586EjhI5",
      "diff_hunk": "@@ -18,10 +18,14 @@ class CBlock;\n class CBlockIndex;\n class Chainstate;\n class ChainstateManager;\n+class ThreadPool;\n namespace interfaces {\n class Chain;\n } // namespace interfaces\n \n+/** Number of concurrent jobs during the initial sync process */\n+static constexpr int16_t INDEX_WORKERS_COUNT = 0;",
      "path": "src/index/base.h",
      "position": 19,
      "original_position": 10,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220319189,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Makes sense, I think we can make the bounds not just an arbitrary number but tied it to the cores of the machine.\r\n\r\nThat will prevent footgun whereby user will spawn more threads than the machine can handle leading to degraded performance due to lots of context switching.",
      "created_at": "2025-07-22T21:54:49Z",
      "updated_at": "2025-07-22T22:01:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2223903289",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2223903289"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226285266",
      "pull_request_review_id": 3048471756,
      "id": 2226285266,
      "node_id": "PRRC_kwDOABII586EsmrS",
      "diff_hunk": "@@ -18,10 +18,14 @@ class CBlock;\n class CBlockIndex;\n class Chainstate;\n class ChainstateManager;\n+class ThreadPool;\n namespace interfaces {\n class Chain;\n } // namespace interfaces\n \n+/** Number of concurrent jobs during the initial sync process */\n+static constexpr int16_t INDEX_WORKERS_COUNT = 0;",
      "path": "src/index/base.h",
      "position": 19,
      "original_position": 10,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220319189,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Absolutely",
      "created_at": "2025-07-23T18:00:08Z",
      "updated_at": "2025-07-23T18:00:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2226285266",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226285266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 30,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226304853",
      "pull_request_review_id": 3048500818,
      "id": 2226304853,
      "node_id": "PRRC_kwDOABII586EsrdV",
      "diff_hunk": "@@ -517,6 +519,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n                  strprintf(\"Maintain an index of compact filters by block (default: %s, values: %s).\", DEFAULT_BLOCKFILTERINDEX, ListBlockFilterTypes()) +\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-indexworkers=<n>\", strprintf(\"Number of worker threads spawned for the indexes initial sync process (default: %d).\", INDEX_WORKERS_COUNT), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220317691,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In \" init: provide thread pool to indexes \" [82fa9d2](https://github.com/bitcoin/bitcoin/commit/82fa9d29653b445118fc2d03e2ced520a5d4c7dc)\r\n> \r\n> Define the max and then use it here and in checking the bounds\r\n\r\nSince the maximum number of threads for indexes should depend on how many threads Core has at runtime and the number of available processors, I don't think hardcoding it here is the best approach. I agree with adding it on the error side: https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2220315413",
      "created_at": "2025-07-23T18:10:51Z",
      "updated_at": "2025-07-23T18:10:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2226304853",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226304853"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226307172",
      "pull_request_review_id": 3048504023,
      "id": 2226307172,
      "node_id": "PRRC_kwDOABII586EssBk",
      "diff_hunk": "@@ -0,0 +1,187 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);",
      "path": "src/test/threadpool_tests.cpp",
      "position": 58,
      "original_position": 44,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7d984c3b2dca085ef7f49d21568b06c7b89c7807",
      "in_reply_to_id": 2220304297,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> In \"util: introduce general purpose thread pool\" [7d984c3](https://github.com/bitcoin/bitcoin/commit/7d984c3b2dca085ef7f49d21568b06c7b89c7807)\r\n> \r\n> Also verify that no work queue size is 0.\r\n\r\nsure. Done.",
      "created_at": "2025-07-23T18:12:06Z",
      "updated_at": "2025-07-23T18:12:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2226307172",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226307172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 58,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226319906",
      "pull_request_review_id": 3048523459,
      "id": 2226319906,
      "node_id": "PRRC_kwDOABII586EsvIi",
      "diff_hunk": "@@ -0,0 +1,136 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped, exit worker.\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                // Pop the task",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 49,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "7d984c3b2dca085ef7f49d21568b06c7b89c7807",
      "in_reply_to_id": 2220285854,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done ",
      "created_at": "2025-07-23T18:17:21Z",
      "updated_at": "2025-07-23T18:17:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2226319906",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226319906"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226322535",
      "pull_request_review_id": 3048528509,
      "id": 2226322535,
      "node_id": "PRRC_kwDOABII586Esvxn",
      "diff_hunk": "@@ -2160,7 +2165,19 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > 100) return InitError(_(\"Invalid -indexworkers arg\"));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220315413,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done as suggested",
      "created_at": "2025-07-23T18:18:23Z",
      "updated_at": "2025-07-23T18:18:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2226322535",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226322535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228814663",
      "pull_request_review_id": 3052111555,
      "id": 2228814663,
      "node_id": "PRRC_kwDOABII586E2QNH",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.",
      "path": "src/test/threadpool_tests.cpp",
      "position": 57,
      "original_position": 43,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc\r\n\r\nWhy not just `+1` in each task like you do in the next test block?",
      "created_at": "2025-07-24T15:12:00Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2228814663",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228814663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 57,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228819659",
      "pull_request_review_id": 3052111555,
      "id": 2228819659,
      "node_id": "PRRC_kwDOABII586E2RbL",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 0);\n+    }\n+\n+    // Test case 2, maintain all threads busy except one.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        // Single blocking future for all threads\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Use per-thread ready promises to ensure all blocked threads have started\n+        std::vector<std::promise<void>> ready_promises(NUM_WORKERS_DEFAULT - 1);\n+        std::vector<std::future<void>> ready_futures;\n+        ready_futures.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (auto& p : ready_promises) ready_futures.emplace_back(p.get_future());\n+\n+        // Submit blocking task to all threads except one\n+        std::vector<std::future<void>> blocking_tasks;\n+        blocking_tasks.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT - 1; i++) {\n+            std::promise<void>& ready = ready_promises[i];\n+            blocking_tasks.emplace_back(threadPool.Submit([&ready, blocker_future]() {\n+                ready.set_value();\n+                blocker_future.wait();\n+            }));\n+        }\n+        // Wait until all blocked threads are actually blocked\n+        for (auto& f : ready_futures) f.wait();\n+\n+        // Now execute tasks on the single available worker\n+        // and check that all the tasks are executed.\n+        int num_tasks = 15;\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to wait on\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+        for (int i = 0; i < num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            }));\n+        }\n+\n+        for (auto& fut : futures) fut.wait();\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);\n+\n+        blocker.set_value();\n+        for (auto& t : blocking_tasks) t.wait(); // ensure blocking tasks finish too",
      "path": "src/test/threadpool_tests.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc\r\n\r\nwould there be any benefit here to incrementing the counter at the end of each blocking task and check that they executed properly when unblocked?",
      "created_at": "2025-07-24T15:14:02Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2228819659",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228819659"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228839630",
      "pull_request_review_id": 3052111555,
      "id": 2228839630,
      "node_id": "PRRC_kwDOABII586E2WTO",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 0);\n+    }\n+\n+    // Test case 2, maintain all threads busy except one.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        // Single blocking future for all threads\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Use per-thread ready promises to ensure all blocked threads have started\n+        std::vector<std::promise<void>> ready_promises(NUM_WORKERS_DEFAULT - 1);\n+        std::vector<std::future<void>> ready_futures;\n+        ready_futures.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (auto& p : ready_promises) ready_futures.emplace_back(p.get_future());\n+\n+        // Submit blocking task to all threads except one\n+        std::vector<std::future<void>> blocking_tasks;\n+        blocking_tasks.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT - 1; i++) {\n+            std::promise<void>& ready = ready_promises[i];\n+            blocking_tasks.emplace_back(threadPool.Submit([&ready, blocker_future]() {\n+                ready.set_value();\n+                blocker_future.wait();\n+            }));\n+        }\n+        // Wait until all blocked threads are actually blocked\n+        for (auto& f : ready_futures) f.wait();\n+\n+        // Now execute tasks on the single available worker\n+        // and check that all the tasks are executed.\n+        int num_tasks = 15;\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to wait on\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+        for (int i = 0; i < num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            }));\n+        }\n+\n+        for (auto& fut : futures) fut.wait();\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);\n+\n+        blocker.set_value();\n+        for (auto& t : blocking_tasks) t.wait(); // ensure blocking tasks finish too\n+        threadPool.Stop();\n+        BOOST_CHECK_EQUAL(threadPool.WorkersCount(), 0);\n+    }\n+\n+    // Test case 3, wait for work to finish.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<bool> flag = false;\n+        std::future<void> future = threadPool.Submit([&flag]() {\n+            std::this_thread::sleep_for(std::chrono::milliseconds{200});\n+            flag.store(true);\n+        });\n+        future.wait();\n+        BOOST_CHECK(flag.load());\n+    }\n+\n+    // Test case 4, wait for result object.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::future<bool> future_bool = threadPool.Submit([]() {\n+            return true;\n+        });\n+        BOOST_CHECK(future_bool.get());\n+\n+        std::future<std::string> future_str = threadPool.Submit([]() {\n+            return std::string(\"true\");\n+        });\n+        std::string result = future_str.get();\n+        BOOST_CHECK_EQUAL(result, \"true\");\n+    }\n+\n+    // Test case 5, throw exception and catch it on the consumer side.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        int ROUNDS = 5;\n+        std::string err_msg{\"something wrong happened\"};\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(ROUNDS);\n+        for (int i = 0; i < ROUNDS; i++) {\n+            futures.emplace_back(threadPool.Submit([err_msg, i]() {\n+                throw std::runtime_error(err_msg + util::ToString(i));\n+            }));\n+        }\n+\n+        for (int i = 0; i < ROUNDS; i++) {\n+            try {\n+                futures.at(i).get();\n+                BOOST_FAIL(\"Expected exception not thrown\");\n+            } catch (const std::runtime_error& e) {\n+                BOOST_CHECK_EQUAL(e.what(), err_msg + util::ToString(i));\n+            }\n+        }\n+    }\n+\n+    // Test case 6, all workers are busy, help them by processing tasks from outside.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Submit infinite blocking tasks that wait forever\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT; i++) {\n+            threadPool.Submit([blocker_future]() {\n+                blocker_future.wait();\n+            });\n+        }\n+\n+        // Now submit tasks and check that none of them are executed.\n+        int num_tasks = 20;\n+        std::atomic<int> counter = 0;\n+        for (int i = 0; i < num_tasks; i++) {\n+            threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            });\n+        }\n+        std::this_thread::sleep_for(std::chrono::milliseconds{100});",
      "path": "src/test/threadpool_tests.cpp",
      "position": 189,
      "original_position": 175,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc\r\n\r\nis this sleep to give tasks a chance to execute if the blocking breaks?",
      "created_at": "2025-07-24T15:21:37Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2228839630",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228839630"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 189,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228841403",
      "pull_request_review_id": 3052111555,
      "id": 2228841403,
      "node_id": "PRRC_kwDOABII586E2Wu7",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 0);\n+    }\n+\n+    // Test case 2, maintain all threads busy except one.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        // Single blocking future for all threads\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Use per-thread ready promises to ensure all blocked threads have started\n+        std::vector<std::promise<void>> ready_promises(NUM_WORKERS_DEFAULT - 1);\n+        std::vector<std::future<void>> ready_futures;\n+        ready_futures.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (auto& p : ready_promises) ready_futures.emplace_back(p.get_future());\n+\n+        // Submit blocking task to all threads except one\n+        std::vector<std::future<void>> blocking_tasks;\n+        blocking_tasks.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT - 1; i++) {\n+            std::promise<void>& ready = ready_promises[i];\n+            blocking_tasks.emplace_back(threadPool.Submit([&ready, blocker_future]() {\n+                ready.set_value();\n+                blocker_future.wait();\n+            }));\n+        }\n+        // Wait until all blocked threads are actually blocked\n+        for (auto& f : ready_futures) f.wait();\n+\n+        // Now execute tasks on the single available worker\n+        // and check that all the tasks are executed.\n+        int num_tasks = 15;\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to wait on\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+        for (int i = 0; i < num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            }));\n+        }\n+\n+        for (auto& fut : futures) fut.wait();\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);\n+\n+        blocker.set_value();\n+        for (auto& t : blocking_tasks) t.wait(); // ensure blocking tasks finish too\n+        threadPool.Stop();\n+        BOOST_CHECK_EQUAL(threadPool.WorkersCount(), 0);\n+    }\n+\n+    // Test case 3, wait for work to finish.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<bool> flag = false;\n+        std::future<void> future = threadPool.Submit([&flag]() {\n+            std::this_thread::sleep_for(std::chrono::milliseconds{200});\n+            flag.store(true);\n+        });\n+        future.wait();\n+        BOOST_CHECK(flag.load());\n+    }\n+\n+    // Test case 4, wait for result object.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::future<bool> future_bool = threadPool.Submit([]() {\n+            return true;\n+        });\n+        BOOST_CHECK(future_bool.get());\n+\n+        std::future<std::string> future_str = threadPool.Submit([]() {\n+            return std::string(\"true\");\n+        });\n+        std::string result = future_str.get();\n+        BOOST_CHECK_EQUAL(result, \"true\");\n+    }\n+\n+    // Test case 5, throw exception and catch it on the consumer side.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        int ROUNDS = 5;\n+        std::string err_msg{\"something wrong happened\"};\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(ROUNDS);\n+        for (int i = 0; i < ROUNDS; i++) {\n+            futures.emplace_back(threadPool.Submit([err_msg, i]() {\n+                throw std::runtime_error(err_msg + util::ToString(i));\n+            }));\n+        }\n+\n+        for (int i = 0; i < ROUNDS; i++) {\n+            try {\n+                futures.at(i).get();\n+                BOOST_FAIL(\"Expected exception not thrown\");\n+            } catch (const std::runtime_error& e) {\n+                BOOST_CHECK_EQUAL(e.what(), err_msg + util::ToString(i));\n+            }\n+        }\n+    }\n+\n+    // Test case 6, all workers are busy, help them by processing tasks from outside.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Submit infinite blocking tasks that wait forever\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT; i++) {\n+            threadPool.Submit([blocker_future]() {\n+                blocker_future.wait();\n+            });\n+        }\n+\n+        // Now submit tasks and check that none of them are executed.\n+        int num_tasks = 20;\n+        std::atomic<int> counter = 0;\n+        for (int i = 0; i < num_tasks; i++) {\n+            threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            });\n+        }\n+        std::this_thread::sleep_for(std::chrono::milliseconds{100});\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 20);\n+\n+        // Now process manually\n+        for (int i = 0; i < num_tasks; i++) {\n+            threadPool.ProcessTask();\n+        }\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);",
      "path": "src/test/threadpool_tests.cpp",
      "position": 196,
      "original_position": 182,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc\r\n\r\nCould anything be gained by checking the counter after each `ProcessTask()`?",
      "created_at": "2025-07-24T15:22:23Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2228841403",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228841403"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": 192,
      "original_start_line": 178,
      "start_side": "RIGHT",
      "line": 196,
      "original_line": 196,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228891058",
      "pull_request_review_id": 3052111555,
      "id": 2228891058,
      "node_id": "PRRC_kwDOABII586E2i2y",
      "diff_hunk": "@@ -2160,7 +2165,19 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > MAX_INDEX_WORKERS_COUNT) return InitError(Untranslated(strprintf(\"Invalid -indexworkers arg. Must be a number in-between 1 and %d\", MAX_INDEX_WORKERS_COUNT)));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "b36010261921adc74e61bdcbc91ba6b7778bad9a",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b36010261921adc74e61bdcbc91ba6b7778bad9a\r\n\r\n\"must be in-between 1 and...\" but you allow `0`\r\n\r\nalso nit, could drop the \"in-\" and say \"number between 1 and ...\"",
      "created_at": "2025-07-24T15:42:31Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2228891058",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228891058"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228893805",
      "pull_request_review_id": 3052111555,
      "id": 2228893805,
      "node_id": "PRRC_kwDOABII586E2jht",
      "diff_hunk": "@@ -517,6 +519,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n                  strprintf(\"Maintain an index of compact filters by block (default: %s, values: %s).\", DEFAULT_BLOCKFILTERINDEX, ListBlockFilterTypes()) +\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-indexworkers=<n>\", strprintf(\"Number of worker threads spawned for the indexes initial sync process (default: %d).\", INDEX_WORKERS_COUNT), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220317691,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b36010261921adc74e61bdcbc91ba6b7778bad9a\r\n\r\nWonder if it should be specified that threadpool is **shared** among all indexers (that support multithreading)",
      "created_at": "2025-07-24T15:43:43Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2228893805",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2228893805"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229009128",
      "pull_request_review_id": 3052111555,
      "id": 2229009128,
      "node_id": "PRRC_kwDOABII586E2_ro",
      "diff_hunk": "@@ -173,83 +175,270 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n         block_info.undo_data = &block_undo;\n     }\n \n-    if (!CustomAppend(block_info)) {\n-        FatalErrorf(\"Failed to write block %s to index database\",\n-                    pindex->GetBlockHash().ToString());\n-        return false;\n+    const auto& any_obj = CustomProcessBlock(block_info);\n+    if (!any_obj.has_value()) {\n+        throw std::runtime_error(strprintf(\"Failed to process block %s for index %s\", pindex->GetBlockHash().GetHex(), GetName()));\n     }\n+    return any_obj;\n+}\n \n-    return true;\n+std::vector<std::any> BaseIndex::ProcessBlocks(bool process_in_order, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    std::vector<std::any> results;\n+    if (process_in_order) {\n+        // When ordering is required, collect all block indexes from [end..start] in order\n+        std::vector<const CBlockIndex*> ordered_blocks;\n+        for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+            ordered_blocks.emplace_back(block);\n+        }\n+\n+        // And process blocks in forward order: from start to end\n+        for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+            results.emplace_back(ProcessBlock(*it));\n+        }\n+        return results;\n+    }\n+\n+    // If ordering is not required, process blocks directly from end to start\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        results.emplace_back(ProcessBlock(block));\n+    }\n+\n+    return results;\n }\n \n+struct Task {\n+    int id;\n+    const CBlockIndex* start_index;\n+    const CBlockIndex* end_index;\n+    std::vector<std::any> result;\n+\n+    Task(int task_id, const CBlockIndex* start, const CBlockIndex* end)\n+            : id(task_id), start_index(start), end_index(end) {}\n+\n+    // Disallow copy\n+    Task(const Task&) = delete;\n+    Task& operator=(const Task&) = delete;\n+    Task(Task&&) noexcept = default;\n+};\n+\n+// Context shared across the initial sync workers\n+struct SyncContext {\n+    Mutex mutex_pending_tasks;\n+    std::queue<Task> pending_tasks GUARDED_BY(mutex_pending_tasks);\n+\n+    Mutex mutex_processed_tasks;\n+    std::map<int, Task> processed_tasks GUARDED_BY(mutex_processed_tasks);\n+\n+    std::atomic<int> next_id_to_process{0};\n+};\n+\n+// Synchronizes the index with the active chain.\n+//\n+// If parallel sync is enabled, this method uses WorkersCount()+1 threads (including the current thread)\n+// to process block ranges concurrently. Each worker handles up to 'm_blocks_per_worker' blocks each time\n+// (this is called a \"task\"), which are processed via CustomProcessBlock calls. Results are stored in the\n+// SyncContext's 'processed_tasks' map so they can be sequentially post-processed later.\n+//\n+// After completing a task, workers opportunistically post-process completed tasks *in order* using\n+// CustomPostProcessBlocks. This continues until all blocks have been fully processed and committed.\n+//\n+// Reorgs are detected and handled before syncing begins, ensuring the index starts aligned with the active chain.\n void BaseIndex::Sync()\n {\n+    if (m_synced) return; // we are synced, nothing to do\n+\n+    // Before anything, verify we are in the active chain\n     const CBlockIndex* pindex = m_best_block_index.load();\n-    if (!m_synced) {\n-        std::chrono::steady_clock::time_point last_log_time{0s};\n-        std::chrono::steady_clock::time_point last_locator_write_time{0s};\n-        while (true) {\n-            if (m_interrupt) {\n-                LogInfo(\"%s: m_interrupt set; exiting ThreadSync\", GetName());\n-\n-                SetBestBlockIndex(pindex);\n-                // No need to handle errors in Commit. If it fails, the error will be already be\n-                // logged. The best way to recover is to continue, as index cannot be corrupted by\n-                // a missed commit to disk for an advanced index state.\n-                Commit();\n-                return;\n+    const int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+    // Note: be careful, could return null if there is no more work to do or if pindex is not found (erased blocks dir).\n+    const CBlockIndex* pindex_next = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n+    if (!pindex_next) {\n+        m_synced = true;\n+        return;\n+    }\n+\n+    // Handle potential reorgs; if the next block's parent doesn't match our current tip,\n+    // rewind our index state to match the chain and resume from there.\n+    if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n+        FatalErrorf(\"Failed to rewind index %s to a previous chain tip\", GetName());\n+        return;\n+    }\n+\n+    // Compute tasks ranges\n+    const int blocks_to_sync = tip_height - pindex_next->nHeight;\n+    const int num_tasks = blocks_to_sync / m_blocks_per_worker;\n+    const int remaining_blocks = blocks_to_sync % m_blocks_per_worker;\n+    const bool process_in_order = !AllowParallelSync();\n+\n+    std::shared_ptr<SyncContext> ctx = std::make_shared<SyncContext>();\n+    {\n+        LOCK2(ctx->mutex_pending_tasks, ::cs_main);\n+        // Create fixed-size tasks\n+        const CBlockIndex* it_start = pindex;\n+        const CBlockIndex* it_end;\n+        for (int id = 0; id < num_tasks; ++id) {\n+            it_start = Assert(NextSyncBlock(it_start, m_chainstate->m_chain));\n+            it_end = m_chainstate->m_chain[it_start->nHeight + m_blocks_per_worker - 1];\n+            ctx->pending_tasks.emplace(id, it_start, it_end);\n+            it_start = it_end;\n+        }\n+\n+        // Add final task with the remaining blocks, if any\n+        if (remaining_blocks > 0) {\n+            it_start = Assert(NextSyncBlock(it_start, m_chainstate->m_chain));\n+            it_end = m_chainstate->m_chain[it_start->nHeight + remaining_blocks];\n+            ctx->pending_tasks.emplace(/*task_id=*/num_tasks, it_start, it_end);\n+        }\n+    }\n+\n+    // Returns nullopt only when there are no pending tasks\n+    const auto& try_get_task = [](auto& ctx) -> std::optional<Task> {\n+        LOCK(ctx->mutex_pending_tasks);\n+        if (ctx->pending_tasks.empty()) return std::nullopt;\n+        Task t = std::move(ctx->pending_tasks.front());\n+        ctx->pending_tasks.pop();\n+        return t;\n+    };",
      "path": "src/index/base.cpp",
      "position": 192,
      "original_position": 171,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "76aa1c2da9635b99e2fb8792b24b53f320b90624",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "76aa1c2da9635b99e2fb8792b24b53f320b90624\r\n\r\nWhats the benefit of defining this as a lambda instead of just moving the code inside `func_worker`? It doesn't seem to be called anywhere else ...?",
      "created_at": "2025-07-24T16:35:48Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2229009128",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229009128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": 302,
      "original_start_line": 296,
      "start_side": "RIGHT",
      "line": 308,
      "original_line": 308,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229349665",
      "pull_request_review_id": 3052111555,
      "id": 2229349665,
      "node_id": "PRRC_kwDOABII586E4S0h",
      "diff_hunk": "@@ -138,6 +143,26 @@ class BaseIndex : public CValidationInterface\n     /// Update the internal best block index as well as the prune lock.\n     void SetBestBlockIndex(const CBlockIndex* block);\n \n+    /// If 'AllowParallelSync()' returns true, 'ProcessBlock()' will run concurrently in batches.\n+    /// The 'std::any' result will be passed to 'PostProcessBlocks()' so the index can process",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 40,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "76aa1c2da9635b99e2fb8792b24b53f320b90624",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "76aa1c2da9635b99e2fb8792b24b53f320b90624\r\n\r\nDid you mean `CustomPostProcessBlocks()` here?",
      "created_at": "2025-07-24T19:09:53Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2229349665",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2229349665"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 147,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231639166",
      "pull_request_review_id": 3052111555,
      "id": 2231639166,
      "node_id": "PRRC_kwDOABII586FBBx-",
      "diff_hunk": "@@ -299,6 +299,23 @@ bool BlockFilterIndex::Write(const BlockFilter& filter, uint32_t block_height, c\n     return true;\n }\n \n+std::any BlockFilterIndex::CustomProcessBlock(const interfaces::BlockInfo& block_info)\n+{\n+    return std::make_pair(BlockFilter(BlockFilterType::BASIC, *block_info.data, *block_info.undo_data), block_info.height);",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "77a14b37aaf5b1c1a5dbe28e900a3824e5732f3f",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "77a14b37aaf5b1c1a5dbe28e900a3824e5732f3f\r\n\r\nThe corresponding line in the serial/legacy processing path asserts the block data (I don't care much about that) but I do think you should keep the variable for the filter type if ever one day a new filter index is added:\r\n\r\n```cpp\r\nBlockFilter filter(m_filter_type, *Assert(block.data), *Assert(block.undo_data));\r\n```",
      "created_at": "2025-07-25T17:11:10Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2231639166",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231639166"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 304,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231646277",
      "pull_request_review_id": 3052111555,
      "id": 2231646277,
      "node_id": "PRRC_kwDOABII586FBDhF",
      "diff_hunk": "@@ -138,6 +143,26 @@ class BaseIndex : public CValidationInterface\n     /// Update the internal best block index as well as the prune lock.\n     void SetBestBlockIndex(const CBlockIndex* block);\n \n+    /// If 'AllowParallelSync()' returns true, 'ProcessBlock()' will run concurrently in batches.\n+    /// The 'std::any' result will be passed to 'PostProcessBlocks()' so the index can process\n+    /// async result batches in a synchronous fashion (if required).\n+    [[nodiscard]] virtual std::any CustomProcessBlock(const interfaces::BlockInfo& block_info) {\n+        // If parallel sync is enabled, the child class must implement this method.\n+        if (AllowParallelSync()) return std::any();",
      "path": "src/index/base.h",
      "position": 55,
      "original_position": 44,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "76aa1c2da9635b99e2fb8792b24b53f320b90624",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "76aa1c2da9635b99e2fb8792b24b53f320b90624\r\n\r\nI wonder if this condition should be a bit more attention-getting, since it *should* never execute right? Either log something or `Assume()` for the benefit of future index developers?",
      "created_at": "2025-07-25T17:15:28Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2231646277",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231646277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 151,
      "original_line": 151,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231653627",
      "pull_request_review_id": 3052111555,
      "id": 2231653627,
      "node_id": "PRRC_kwDOABII586FBFT7",
      "diff_hunk": "@@ -0,0 +1,135 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped and no work left, exit worker\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            {\n+                // Execute the task without the lock\n+                REVERSE_LOCK(wait_lock, m_mutex);\n+                task();\n+            }\n+        }\n+    }\n+\n+public:\n+    ThreadPool() = default;\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't been stopped.\n+    }\n+\n+    void Start(int num_workers)\n+    {\n+        if (!m_workers.empty()) throw std::runtime_error(\"Thread pool already started\");\n+        m_interrupt.store(false); // Reset\n+\n+        // Create workers\n+        for (int i = 0; i < num_workers; i++) {\n+            m_workers.emplace_back(&util::TraceThread, \"threadpool_worker_\" + util::ToString(i), [this] { WorkerThread(); });",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 76,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc\r\n\r\nI'd like to see `ThreadPool` reused in the codebase (for example, as http workers) which makes me think the class should also have a custom name property for logging and process monitoring. (e.g. `index_worker_thread_1` and `http_worker_thread_1`)",
      "created_at": "2025-07-25T17:19:22Z",
      "updated_at": "2025-07-25T20:00:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2231653627",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231653627"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231978461",
      "pull_request_review_id": 3056750380,
      "id": 2231978461,
      "node_id": "PRRC_kwDOABII586FCUnd",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.",
      "path": "src/test/threadpool_tests.cpp",
      "position": 57,
      "original_position": 43,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": 2228814663,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [d2138be](https://github.com/bitcoin/bitcoin/commit/d2138bef76ae7c25679571f9c07ecb44e99d4ecc)\r\n> \r\n> Why not just `+1` in each task like you do in the next test block?\r\n\r\nHmm, good question. I was probably not only testing that all tasks were executed, but also that each of them was executed only once (if they were all doing the same, it would be hard to know if they were all executed). Or.. maybe I just wanted to mention Gauss somewhere in our code.\r\nI did this one 3 years ago so.. it is hard to know. But it doesn't hurt to have it.",
      "created_at": "2025-07-25T20:46:23Z",
      "updated_at": "2025-07-25T20:48:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2231978461",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231978461"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 57,
      "original_line": 57,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231994092",
      "pull_request_review_id": 3056773483,
      "id": 2231994092,
      "node_id": "PRRC_kwDOABII586FCYbs",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 0);\n+    }\n+\n+    // Test case 2, maintain all threads busy except one.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        // Single blocking future for all threads\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Use per-thread ready promises to ensure all blocked threads have started\n+        std::vector<std::promise<void>> ready_promises(NUM_WORKERS_DEFAULT - 1);\n+        std::vector<std::future<void>> ready_futures;\n+        ready_futures.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (auto& p : ready_promises) ready_futures.emplace_back(p.get_future());\n+\n+        // Submit blocking task to all threads except one\n+        std::vector<std::future<void>> blocking_tasks;\n+        blocking_tasks.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT - 1; i++) {\n+            std::promise<void>& ready = ready_promises[i];\n+            blocking_tasks.emplace_back(threadPool.Submit([&ready, blocker_future]() {\n+                ready.set_value();\n+                blocker_future.wait();\n+            }));\n+        }\n+        // Wait until all blocked threads are actually blocked\n+        for (auto& f : ready_futures) f.wait();\n+\n+        // Now execute tasks on the single available worker\n+        // and check that all the tasks are executed.\n+        int num_tasks = 15;\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to wait on\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+        for (int i = 0; i < num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            }));\n+        }\n+\n+        for (auto& fut : futures) fut.wait();\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);\n+\n+        blocker.set_value();\n+        for (auto& t : blocking_tasks) t.wait(); // ensure blocking tasks finish too",
      "path": "src/test/threadpool_tests.cpp",
      "position": null,
      "original_position": 93,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": 2228819659,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [d2138be](https://github.com/bitcoin/bitcoin/commit/d2138bef76ae7c25679571f9c07ecb44e99d4ecc)\r\n> \r\n> would there be any benefit here to incrementing the counter at the end of each blocking task and check that they executed properly when unblocked?\r\n\r\nIt's subtle but we're doing the same with the wait here. The `blocking_tasks` vector contains the futures whose promises are set only when the worker finishes executing the task (meaning it has run all its code).",
      "created_at": "2025-07-25T20:56:38Z",
      "updated_at": "2025-07-25T20:56:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2231994092",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2231994092"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232002054",
      "pull_request_review_id": 3056783979,
      "id": 2232002054,
      "node_id": "PRRC_kwDOABII586FCaYG",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 0);\n+    }\n+\n+    // Test case 2, maintain all threads busy except one.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        // Single blocking future for all threads\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Use per-thread ready promises to ensure all blocked threads have started\n+        std::vector<std::promise<void>> ready_promises(NUM_WORKERS_DEFAULT - 1);\n+        std::vector<std::future<void>> ready_futures;\n+        ready_futures.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (auto& p : ready_promises) ready_futures.emplace_back(p.get_future());\n+\n+        // Submit blocking task to all threads except one\n+        std::vector<std::future<void>> blocking_tasks;\n+        blocking_tasks.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT - 1; i++) {\n+            std::promise<void>& ready = ready_promises[i];\n+            blocking_tasks.emplace_back(threadPool.Submit([&ready, blocker_future]() {\n+                ready.set_value();\n+                blocker_future.wait();\n+            }));\n+        }\n+        // Wait until all blocked threads are actually blocked\n+        for (auto& f : ready_futures) f.wait();\n+\n+        // Now execute tasks on the single available worker\n+        // and check that all the tasks are executed.\n+        int num_tasks = 15;\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to wait on\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+        for (int i = 0; i < num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            }));\n+        }\n+\n+        for (auto& fut : futures) fut.wait();\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);\n+\n+        blocker.set_value();\n+        for (auto& t : blocking_tasks) t.wait(); // ensure blocking tasks finish too\n+        threadPool.Stop();\n+        BOOST_CHECK_EQUAL(threadPool.WorkersCount(), 0);\n+    }\n+\n+    // Test case 3, wait for work to finish.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<bool> flag = false;\n+        std::future<void> future = threadPool.Submit([&flag]() {\n+            std::this_thread::sleep_for(std::chrono::milliseconds{200});\n+            flag.store(true);\n+        });\n+        future.wait();\n+        BOOST_CHECK(flag.load());\n+    }\n+\n+    // Test case 4, wait for result object.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::future<bool> future_bool = threadPool.Submit([]() {\n+            return true;\n+        });\n+        BOOST_CHECK(future_bool.get());\n+\n+        std::future<std::string> future_str = threadPool.Submit([]() {\n+            return std::string(\"true\");\n+        });\n+        std::string result = future_str.get();\n+        BOOST_CHECK_EQUAL(result, \"true\");\n+    }\n+\n+    // Test case 5, throw exception and catch it on the consumer side.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        int ROUNDS = 5;\n+        std::string err_msg{\"something wrong happened\"};\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(ROUNDS);\n+        for (int i = 0; i < ROUNDS; i++) {\n+            futures.emplace_back(threadPool.Submit([err_msg, i]() {\n+                throw std::runtime_error(err_msg + util::ToString(i));\n+            }));\n+        }\n+\n+        for (int i = 0; i < ROUNDS; i++) {\n+            try {\n+                futures.at(i).get();\n+                BOOST_FAIL(\"Expected exception not thrown\");\n+            } catch (const std::runtime_error& e) {\n+                BOOST_CHECK_EQUAL(e.what(), err_msg + util::ToString(i));\n+            }\n+        }\n+    }\n+\n+    // Test case 6, all workers are busy, help them by processing tasks from outside.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Submit infinite blocking tasks that wait forever\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT; i++) {\n+            threadPool.Submit([blocker_future]() {\n+                blocker_future.wait();\n+            });\n+        }\n+\n+        // Now submit tasks and check that none of them are executed.\n+        int num_tasks = 20;\n+        std::atomic<int> counter = 0;\n+        for (int i = 0; i < num_tasks; i++) {\n+            threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            });\n+        }\n+        std::this_thread::sleep_for(std::chrono::milliseconds{100});",
      "path": "src/test/threadpool_tests.cpp",
      "position": 189,
      "original_position": 175,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": 2228839630,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [d2138be](https://github.com/bitcoin/bitcoin/commit/d2138bef76ae7c25679571f9c07ecb44e99d4ecc)\r\n> \r\n> is this sleep to give tasks a chance to execute if the blocking breaks?\r\n\r\nGood eye.\r\nIIRC, I added it to wait until the workers actually get blocked. Otherwise, the thread pool queue size would be greater than the expected value (because it did not consumed the blocking tasks).\r\nStill, we could remove this by adding some `ready_promises`, as did in test 2. A bit more code but less fragile.",
      "created_at": "2025-07-25T21:01:45Z",
      "updated_at": "2025-07-25T21:01:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232002054",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232002054"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 189,
      "original_line": 189,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232007294",
      "pull_request_review_id": 3056791011,
      "id": 2232007294,
      "node_id": "PRRC_kwDOABII586FCbp-",
      "diff_hunk": "@@ -0,0 +1,188 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <util/threadpool.h>\n+\n+#include <boost/test/unit_test.hpp>\n+\n+BOOST_AUTO_TEST_SUITE(threadpool_tests)\n+\n+BOOST_AUTO_TEST_CASE(threadpool_basic)\n+{\n+    // Test Cases\n+    // 1) Submit tasks and verify completion.\n+    // 2) Maintain all threads busy except one.\n+    // 3) Wait for work to finish.\n+    // 4) Wait for result object.\n+    // 5) The task throws an exception, catch must be done in the consumer side.\n+    // 6) Busy workers, help them by processing tasks from outside.\n+\n+    const int NUM_WORKERS_DEFAULT = 3;\n+\n+    // Test case 1, submit tasks and verify completion.\n+    {\n+        int num_tasks = 50;\n+\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to ensure completion before checking counter.\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+\n+        for (int i = 1; i <= num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter, i]() {\n+                counter.fetch_add(i);\n+            }));\n+        }\n+\n+        // Wait for all tasks to finish\n+        for (auto& fut : futures) fut.wait();\n+        int expected_value = (num_tasks * (num_tasks + 1)) / 2; // Gauss sum.\n+        BOOST_CHECK_EQUAL(counter.load(), expected_value);\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 0);\n+    }\n+\n+    // Test case 2, maintain all threads busy except one.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        // Single blocking future for all threads\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Use per-thread ready promises to ensure all blocked threads have started\n+        std::vector<std::promise<void>> ready_promises(NUM_WORKERS_DEFAULT - 1);\n+        std::vector<std::future<void>> ready_futures;\n+        ready_futures.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (auto& p : ready_promises) ready_futures.emplace_back(p.get_future());\n+\n+        // Submit blocking task to all threads except one\n+        std::vector<std::future<void>> blocking_tasks;\n+        blocking_tasks.reserve(NUM_WORKERS_DEFAULT - 1);\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT - 1; i++) {\n+            std::promise<void>& ready = ready_promises[i];\n+            blocking_tasks.emplace_back(threadPool.Submit([&ready, blocker_future]() {\n+                ready.set_value();\n+                blocker_future.wait();\n+            }));\n+        }\n+        // Wait until all blocked threads are actually blocked\n+        for (auto& f : ready_futures) f.wait();\n+\n+        // Now execute tasks on the single available worker\n+        // and check that all the tasks are executed.\n+        int num_tasks = 15;\n+        std::atomic<int> counter = 0;\n+\n+        // Store futures to wait on\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(num_tasks);\n+        for (int i = 0; i < num_tasks; i++) {\n+            futures.emplace_back(threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            }));\n+        }\n+\n+        for (auto& fut : futures) fut.wait();\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);\n+\n+        blocker.set_value();\n+        for (auto& t : blocking_tasks) t.wait(); // ensure blocking tasks finish too\n+        threadPool.Stop();\n+        BOOST_CHECK_EQUAL(threadPool.WorkersCount(), 0);\n+    }\n+\n+    // Test case 3, wait for work to finish.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::atomic<bool> flag = false;\n+        std::future<void> future = threadPool.Submit([&flag]() {\n+            std::this_thread::sleep_for(std::chrono::milliseconds{200});\n+            flag.store(true);\n+        });\n+        future.wait();\n+        BOOST_CHECK(flag.load());\n+    }\n+\n+    // Test case 4, wait for result object.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+        std::future<bool> future_bool = threadPool.Submit([]() {\n+            return true;\n+        });\n+        BOOST_CHECK(future_bool.get());\n+\n+        std::future<std::string> future_str = threadPool.Submit([]() {\n+            return std::string(\"true\");\n+        });\n+        std::string result = future_str.get();\n+        BOOST_CHECK_EQUAL(result, \"true\");\n+    }\n+\n+    // Test case 5, throw exception and catch it on the consumer side.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        int ROUNDS = 5;\n+        std::string err_msg{\"something wrong happened\"};\n+        std::vector<std::future<void>> futures;\n+        futures.reserve(ROUNDS);\n+        for (int i = 0; i < ROUNDS; i++) {\n+            futures.emplace_back(threadPool.Submit([err_msg, i]() {\n+                throw std::runtime_error(err_msg + util::ToString(i));\n+            }));\n+        }\n+\n+        for (int i = 0; i < ROUNDS; i++) {\n+            try {\n+                futures.at(i).get();\n+                BOOST_FAIL(\"Expected exception not thrown\");\n+            } catch (const std::runtime_error& e) {\n+                BOOST_CHECK_EQUAL(e.what(), err_msg + util::ToString(i));\n+            }\n+        }\n+    }\n+\n+    // Test case 6, all workers are busy, help them by processing tasks from outside.\n+    {\n+        ThreadPool threadPool;\n+        threadPool.Start(NUM_WORKERS_DEFAULT);\n+\n+        std::promise<void> blocker;\n+        std::shared_future<void> blocker_future(blocker.get_future());\n+\n+        // Submit infinite blocking tasks that wait forever\n+        for (int i = 0; i < NUM_WORKERS_DEFAULT; i++) {\n+            threadPool.Submit([blocker_future]() {\n+                blocker_future.wait();\n+            });\n+        }\n+\n+        // Now submit tasks and check that none of them are executed.\n+        int num_tasks = 20;\n+        std::atomic<int> counter = 0;\n+        for (int i = 0; i < num_tasks; i++) {\n+            threadPool.Submit([&counter]() {\n+                counter.fetch_add(1);\n+            });\n+        }\n+        std::this_thread::sleep_for(std::chrono::milliseconds{100});\n+        BOOST_CHECK_EQUAL(threadPool.WorkQueueSize(), 20);\n+\n+        // Now process manually\n+        for (int i = 0; i < num_tasks; i++) {\n+            threadPool.ProcessTask();\n+        }\n+        BOOST_CHECK_EQUAL(counter.load(), num_tasks);",
      "path": "src/test/threadpool_tests.cpp",
      "position": 196,
      "original_position": 182,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": 2228841403,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [d2138be](https://github.com/bitcoin/bitcoin/commit/d2138bef76ae7c25679571f9c07ecb44e99d4ecc)\r\n> \r\n> Could anything be gained by checking the counter after each `ProcessTask()`?\r\n\r\ndon't think so. Could maybe improve it by making the task return something and checking the futures' promises. But I'm not totally convinced it will add much value.",
      "created_at": "2025-07-25T21:05:26Z",
      "updated_at": "2025-07-25T21:05:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232007294",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232007294"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": 192,
      "original_start_line": 178,
      "start_side": "RIGHT",
      "line": 196,
      "original_line": 196,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232008180",
      "pull_request_review_id": 3056792550,
      "id": 2232008180,
      "node_id": "PRRC_kwDOABII586FCb30",
      "diff_hunk": "@@ -2160,7 +2165,19 @@ bool StartIndexBackgroundSync(NodeContext& node)\n         }\n     }\n \n+    if (node.args->IsArgSet(\"-indexworkers\")) {\n+        int index_workers = node.args->GetIntArg(\"-indexworkers\", INDEX_WORKERS_COUNT);\n+        if (index_workers < 0 || index_workers > MAX_INDEX_WORKERS_COUNT) return InitError(Untranslated(strprintf(\"Invalid -indexworkers arg. Must be a number in-between 1 and %d\", MAX_INDEX_WORKERS_COUNT)));",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "b36010261921adc74e61bdcbc91ba6b7778bad9a",
      "in_reply_to_id": 2228891058,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good catch!, fixed.",
      "created_at": "2025-07-25T21:06:09Z",
      "updated_at": "2025-07-25T21:06:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232008180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232008180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2170,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232015151",
      "pull_request_review_id": 3056803122,
      "id": 2232015151,
      "node_id": "PRRC_kwDOABII586FCdkv",
      "diff_hunk": "@@ -173,83 +175,270 @@ bool BaseIndex::ProcessBlock(const CBlockIndex* pindex, const CBlock* block_data\n         block_info.undo_data = &block_undo;\n     }\n \n-    if (!CustomAppend(block_info)) {\n-        FatalErrorf(\"Failed to write block %s to index database\",\n-                    pindex->GetBlockHash().ToString());\n-        return false;\n+    const auto& any_obj = CustomProcessBlock(block_info);\n+    if (!any_obj.has_value()) {\n+        throw std::runtime_error(strprintf(\"Failed to process block %s for index %s\", pindex->GetBlockHash().GetHex(), GetName()));\n     }\n+    return any_obj;\n+}\n \n-    return true;\n+std::vector<std::any> BaseIndex::ProcessBlocks(bool process_in_order, const CBlockIndex* start, const CBlockIndex* end)\n+{\n+    std::vector<std::any> results;\n+    if (process_in_order) {\n+        // When ordering is required, collect all block indexes from [end..start] in order\n+        std::vector<const CBlockIndex*> ordered_blocks;\n+        for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+            ordered_blocks.emplace_back(block);\n+        }\n+\n+        // And process blocks in forward order: from start to end\n+        for (auto it = ordered_blocks.rbegin(); it != ordered_blocks.rend(); ++it) {\n+            results.emplace_back(ProcessBlock(*it));\n+        }\n+        return results;\n+    }\n+\n+    // If ordering is not required, process blocks directly from end to start\n+    for (const CBlockIndex* block = end; block && start->pprev != block; block = block->pprev) {\n+        results.emplace_back(ProcessBlock(block));\n+    }\n+\n+    return results;\n }\n \n+struct Task {\n+    int id;\n+    const CBlockIndex* start_index;\n+    const CBlockIndex* end_index;\n+    std::vector<std::any> result;\n+\n+    Task(int task_id, const CBlockIndex* start, const CBlockIndex* end)\n+            : id(task_id), start_index(start), end_index(end) {}\n+\n+    // Disallow copy\n+    Task(const Task&) = delete;\n+    Task& operator=(const Task&) = delete;\n+    Task(Task&&) noexcept = default;\n+};\n+\n+// Context shared across the initial sync workers\n+struct SyncContext {\n+    Mutex mutex_pending_tasks;\n+    std::queue<Task> pending_tasks GUARDED_BY(mutex_pending_tasks);\n+\n+    Mutex mutex_processed_tasks;\n+    std::map<int, Task> processed_tasks GUARDED_BY(mutex_processed_tasks);\n+\n+    std::atomic<int> next_id_to_process{0};\n+};\n+\n+// Synchronizes the index with the active chain.\n+//\n+// If parallel sync is enabled, this method uses WorkersCount()+1 threads (including the current thread)\n+// to process block ranges concurrently. Each worker handles up to 'm_blocks_per_worker' blocks each time\n+// (this is called a \"task\"), which are processed via CustomProcessBlock calls. Results are stored in the\n+// SyncContext's 'processed_tasks' map so they can be sequentially post-processed later.\n+//\n+// After completing a task, workers opportunistically post-process completed tasks *in order* using\n+// CustomPostProcessBlocks. This continues until all blocks have been fully processed and committed.\n+//\n+// Reorgs are detected and handled before syncing begins, ensuring the index starts aligned with the active chain.\n void BaseIndex::Sync()\n {\n+    if (m_synced) return; // we are synced, nothing to do\n+\n+    // Before anything, verify we are in the active chain\n     const CBlockIndex* pindex = m_best_block_index.load();\n-    if (!m_synced) {\n-        std::chrono::steady_clock::time_point last_log_time{0s};\n-        std::chrono::steady_clock::time_point last_locator_write_time{0s};\n-        while (true) {\n-            if (m_interrupt) {\n-                LogInfo(\"%s: m_interrupt set; exiting ThreadSync\", GetName());\n-\n-                SetBestBlockIndex(pindex);\n-                // No need to handle errors in Commit. If it fails, the error will be already be\n-                // logged. The best way to recover is to continue, as index cannot be corrupted by\n-                // a missed commit to disk for an advanced index state.\n-                Commit();\n-                return;\n+    const int tip_height = WITH_LOCK(cs_main, return m_chainstate->m_chain.Height());\n+    // Note: be careful, could return null if there is no more work to do or if pindex is not found (erased blocks dir).\n+    const CBlockIndex* pindex_next = WITH_LOCK(cs_main, return NextSyncBlock(pindex, m_chainstate->m_chain));\n+    if (!pindex_next) {\n+        m_synced = true;\n+        return;\n+    }\n+\n+    // Handle potential reorgs; if the next block's parent doesn't match our current tip,\n+    // rewind our index state to match the chain and resume from there.\n+    if (pindex_next->pprev != pindex && !Rewind(pindex, pindex_next->pprev)) {\n+        FatalErrorf(\"Failed to rewind index %s to a previous chain tip\", GetName());\n+        return;\n+    }\n+\n+    // Compute tasks ranges\n+    const int blocks_to_sync = tip_height - pindex_next->nHeight;\n+    const int num_tasks = blocks_to_sync / m_blocks_per_worker;\n+    const int remaining_blocks = blocks_to_sync % m_blocks_per_worker;\n+    const bool process_in_order = !AllowParallelSync();\n+\n+    std::shared_ptr<SyncContext> ctx = std::make_shared<SyncContext>();\n+    {\n+        LOCK2(ctx->mutex_pending_tasks, ::cs_main);\n+        // Create fixed-size tasks\n+        const CBlockIndex* it_start = pindex;\n+        const CBlockIndex* it_end;\n+        for (int id = 0; id < num_tasks; ++id) {\n+            it_start = Assert(NextSyncBlock(it_start, m_chainstate->m_chain));\n+            it_end = m_chainstate->m_chain[it_start->nHeight + m_blocks_per_worker - 1];\n+            ctx->pending_tasks.emplace(id, it_start, it_end);\n+            it_start = it_end;\n+        }\n+\n+        // Add final task with the remaining blocks, if any\n+        if (remaining_blocks > 0) {\n+            it_start = Assert(NextSyncBlock(it_start, m_chainstate->m_chain));\n+            it_end = m_chainstate->m_chain[it_start->nHeight + remaining_blocks];\n+            ctx->pending_tasks.emplace(/*task_id=*/num_tasks, it_start, it_end);\n+        }\n+    }\n+\n+    // Returns nullopt only when there are no pending tasks\n+    const auto& try_get_task = [](auto& ctx) -> std::optional<Task> {\n+        LOCK(ctx->mutex_pending_tasks);\n+        if (ctx->pending_tasks.empty()) return std::nullopt;\n+        Task t = std::move(ctx->pending_tasks.front());\n+        ctx->pending_tasks.pop();\n+        return t;\n+    };",
      "path": "src/index/base.cpp",
      "position": 192,
      "original_position": 171,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "76aa1c2da9635b99e2fb8792b24b53f320b90624",
      "in_reply_to_id": 2229009128,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [76aa1c2](https://github.com/bitcoin/bitcoin/commit/76aa1c2da9635b99e2fb8792b24b53f320b90624)\r\n> \r\n> Whats the benefit of defining this as a lambda instead of just moving the code inside `func_worker`? It doesn't seem to be called anywhere else ...?\r\n\r\nIt was like that at first, but I found it harder to follow and wanted to simplify `func_worker` as much as possible.\r\nYou can try moving it back in and will surely see what I'm referring to.",
      "created_at": "2025-07-25T21:12:05Z",
      "updated_at": "2025-07-25T21:12:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232015151",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232015151"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": 302,
      "original_start_line": 296,
      "start_side": "RIGHT",
      "line": 308,
      "original_line": 308,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232021760",
      "pull_request_review_id": 3056810936,
      "id": 2232021760,
      "node_id": "PRRC_kwDOABII586FCfMA",
      "diff_hunk": "@@ -299,6 +299,23 @@ bool BlockFilterIndex::Write(const BlockFilter& filter, uint32_t block_height, c\n     return true;\n }\n \n+std::any BlockFilterIndex::CustomProcessBlock(const interfaces::BlockInfo& block_info)\n+{\n+    return std::make_pair(BlockFilter(BlockFilterType::BASIC, *block_info.data, *block_info.undo_data), block_info.height);",
      "path": "src/index/blockfilterindex.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "77a14b37aaf5b1c1a5dbe28e900a3824e5732f3f",
      "in_reply_to_id": 2231639166,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "good catch!, fixed.",
      "created_at": "2025-07-25T21:16:21Z",
      "updated_at": "2025-07-25T21:16:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232021760",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232021760"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 304,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232035213",
      "pull_request_review_id": 3056827115,
      "id": 2232035213,
      "node_id": "PRRC_kwDOABII586FCieN",
      "diff_hunk": "@@ -138,6 +143,26 @@ class BaseIndex : public CValidationInterface\n     /// Update the internal best block index as well as the prune lock.\n     void SetBestBlockIndex(const CBlockIndex* block);\n \n+    /// If 'AllowParallelSync()' returns true, 'ProcessBlock()' will run concurrently in batches.\n+    /// The 'std::any' result will be passed to 'PostProcessBlocks()' so the index can process\n+    /// async result batches in a synchronous fashion (if required).\n+    [[nodiscard]] virtual std::any CustomProcessBlock(const interfaces::BlockInfo& block_info) {\n+        // If parallel sync is enabled, the child class must implement this method.\n+        if (AllowParallelSync()) return std::any();",
      "path": "src/index/base.h",
      "position": 55,
      "original_position": 44,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "76aa1c2da9635b99e2fb8792b24b53f320b90624",
      "in_reply_to_id": 2231646277,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [76aa1c2](https://github.com/bitcoin/bitcoin/commit/76aa1c2da9635b99e2fb8792b24b53f320b90624)\r\n> \r\n> I wonder if this condition should be a bit more attention-getting, since it _should_ never execute right? Either log something or `Assume()` for the benefit of future index developers?\r\n\r\nHmm, or we could remove this line and call `CustomAppend` by default. Then it would be up to the child index to decide whether it needs sequential ordering during parallel sync or not. This way, the tx and BIP352 indexes would require fewer lines of code.",
      "created_at": "2025-07-25T21:25:41Z",
      "updated_at": "2025-07-25T21:25:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232035213",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232035213"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 151,
      "original_line": 151,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232051304",
      "pull_request_review_id": 3056843784,
      "id": 2232051304,
      "node_id": "PRRC_kwDOABII586FCmZo",
      "diff_hunk": "@@ -0,0 +1,135 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped and no work left, exit worker\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            {\n+                // Execute the task without the lock\n+                REVERSE_LOCK(wait_lock, m_mutex);\n+                task();\n+            }\n+        }\n+    }\n+\n+public:\n+    ThreadPool() = default;\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't been stopped.\n+    }\n+\n+    void Start(int num_workers)\n+    {\n+        if (!m_workers.empty()) throw std::runtime_error(\"Thread pool already started\");\n+        m_interrupt.store(false); // Reset\n+\n+        // Create workers\n+        for (int i = 0; i < num_workers; i++) {\n+            m_workers.emplace_back(&util::TraceThread, \"threadpool_worker_\" + util::ToString(i), [this] { WorkerThread(); });",
      "path": "src/util/threadpool.h",
      "position": null,
      "original_position": 76,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "d2138bef76ae7c25679571f9c07ecb44e99d4ecc",
      "in_reply_to_id": 2231653627,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done!",
      "created_at": "2025-07-25T21:35:30Z",
      "updated_at": "2025-07-25T21:35:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232051304",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232051304"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232052962",
      "pull_request_review_id": 3056845514,
      "id": 2232052962,
      "node_id": "PRRC_kwDOABII586FCmzi",
      "diff_hunk": "@@ -138,6 +143,26 @@ class BaseIndex : public CValidationInterface\n     /// Update the internal best block index as well as the prune lock.\n     void SetBestBlockIndex(const CBlockIndex* block);\n \n+    /// If 'AllowParallelSync()' returns true, 'ProcessBlock()' will run concurrently in batches.\n+    /// The 'std::any' result will be passed to 'PostProcessBlocks()' so the index can process",
      "path": "src/index/base.h",
      "position": null,
      "original_position": 40,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "76aa1c2da9635b99e2fb8792b24b53f320b90624",
      "in_reply_to_id": 2229349665,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "yes, fixed.",
      "created_at": "2025-07-25T21:36:31Z",
      "updated_at": "2025-07-25T21:36:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2232052962",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2232052962"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 147,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240120761",
      "pull_request_review_id": 3067959910,
      "id": 2240120761,
      "node_id": "PRRC_kwDOABII586FhYe5",
      "diff_hunk": "@@ -0,0 +1,136 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or https://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_UTIL_THREADPOOL_H\n+#define BITCOIN_UTIL_THREADPOOL_H\n+\n+#include <sync.h>\n+#include <util/string.h>\n+#include <util/thread.h>\n+#include <util/threadinterrupt.h>\n+\n+#include <algorithm>\n+#include <atomic>\n+#include <condition_variable>\n+#include <cstddef>\n+#include <functional>\n+#include <future>\n+#include <memory>\n+#include <stdexcept>\n+#include <utility>\n+#include <queue>\n+#include <thread>\n+#include <vector>\n+\n+class ThreadPool {\n+\n+private:\n+    std::string m_name;\n+    Mutex m_mutex;\n+    std::queue<std::function<void()>> m_work_queue GUARDED_BY(m_mutex);\n+    std::condition_variable m_cv;\n+    std::atomic<bool> m_interrupt{false};\n+    std::vector<std::thread> m_workers;\n+\n+    void WorkerThread() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex)\n+    {\n+        WAIT_LOCK(m_mutex, wait_lock);\n+        while (!m_interrupt.load()) {\n+            std::function<void()> task;\n+            {\n+                // Wait for the task or until the stop flag is set\n+                m_cv.wait(wait_lock,[&]() EXCLUSIVE_LOCKS_REQUIRED(m_mutex) { return m_interrupt.load() || !m_work_queue.empty(); });\n+\n+                // If stopped and no work left, exit worker\n+                if (m_interrupt && m_work_queue.empty()) {\n+                    return;\n+                }\n+\n+                task = std::move(m_work_queue.front());\n+                m_work_queue.pop();\n+            }\n+\n+            {\n+                // Execute the task without the lock\n+                REVERSE_LOCK(wait_lock, m_mutex);\n+                task();\n+            }\n+        }\n+    }\n+\n+public:\n+    ThreadPool(const std::string& name) : m_name(name) {}\n+\n+    ~ThreadPool()\n+    {\n+        Stop(); // In case it hasn't been stopped.\n+    }\n+\n+    void Start(int num_workers)\n+    {\n+        if (!m_workers.empty()) throw std::runtime_error(\"Thread pool already started\");\n+        m_interrupt.store(false); // Reset\n+\n+        // Create workers\n+        for (int i = 0; i < num_workers; i++) {\n+            m_workers.emplace_back(&util::TraceThread, m_name + \"_threadpool_worker_\" + util::ToString(i), [this] { WorkerThread(); });",
      "path": "src/util/threadpool.h",
      "position": 77,
      "original_position": 77,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "9bba5ef0cc5b6890eba2be3a6ed429c4fea5a28f",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is bike shedding now so ok to ignore -- but when we set thread names on Linux they are truncated to 15 characters. So I dunno I guess \"thread\" and \"worker\" are redundant in the name of a thread?\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/2f410ad78c767e37f083d03114f6661b73647af3/src/util/threadnames.cpp#L22-L27\r\n\r\n<img width=\"692\" height=\"317\" alt=\"image\" src=\"https://github.com/user-attachments/assets/8819caee-2731-462c-a914-c595a8599000\" />\r\n",
      "created_at": "2025-07-29T14:50:53Z",
      "updated_at": "2025-07-29T14:53:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2240120761",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240120761"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 77,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240255267",
      "pull_request_review_id": 3068148361,
      "id": 2240255267,
      "node_id": "PRRC_kwDOABII586Fh5Uj",
      "diff_hunk": "@@ -517,6 +519,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n                  strprintf(\"Maintain an index of compact filters by block (default: %s, values: %s).\", DEFAULT_BLOCKFILTERINDEX, ListBlockFilterTypes()) +\n                  \" If <type> is not supplied or if <type> = 1, indexes for all known types are enabled.\",\n                  ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);\n+    argsman.AddArg(\"-indexworkers=<n>\", strprintf(\"Number of worker threads spawned for the indexes initial sync process (default: %d).\", INDEX_WORKERS_COUNT), ArgsManager::ALLOW_ANY, OptionsCategory::OPTIONS);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "69792b6d3ee4b7320c608d5b23056d3e8b998247",
      "original_commit_id": "82fa9d29653b445118fc2d03e2ced520a5d4c7dc",
      "in_reply_to_id": 2220317691,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> [b360102](https://github.com/bitcoin/bitcoin/commit/b36010261921adc74e61bdcbc91ba6b7778bad9a)\r\n> \r\n> Wonder if it should be specified that threadpool is **shared** among all indexers (that support multithreading)\r\n\r\nDone as suggested.",
      "created_at": "2025-07-29T15:41:50Z",
      "updated_at": "2025-07-29T15:41:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/26966#discussion_r2240255267",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2240255267"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/26966"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 522,
      "side": "RIGHT"
    }
  ]
}