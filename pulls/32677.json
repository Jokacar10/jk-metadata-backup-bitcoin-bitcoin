{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677",
    "id": 2564943013,
    "node_id": "PR_kwDOABII586Y4eyl",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32677",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32677.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32677.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
    "number": 32677,
    "state": "closed",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "test: headers sync timeout",
    "user": {
      "login": "stringintech",
      "id": 157148846,
      "node_id": "U_kgDOCV3mrg",
      "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/stringintech",
      "html_url": "https://github.com/stringintech",
      "followers_url": "https://api.github.com/users/stringintech/followers",
      "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
      "organizations_url": "https://api.github.com/users/stringintech/orgs",
      "repos_url": "https://api.github.com/users/stringintech/repos",
      "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/stringintech/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "When reviewing PR #32051 and considering which functional tests might need to be adapted/extended accordingly, I noticed there appears to be limited functional test coverage for header sync timeouts and thought it might be helpful to add one.\r\n\r\nThis test attempts to cover two scenarios:\r\n\r\n1. **Normal peer timeout behavior:** When a peer fails to respond to initial getheaders requests within the timeout period, it should be disconnected and the node should attempt to sync headers from the next available peer.\r\n\r\n2. **Noban peer behavior:** When a peer with noban privileges times out, it should remain connected while the node still attempts to sync headers from other peers.\r\n",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2025-06-03T18:50:04Z",
    "updated_at": "2025-08-04T21:45:51Z",
    "closed_at": "2025-07-15T10:47:16Z",
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2025-07-15T10:47:16Z",
    "merged_by": {
      "login": "fanquake",
      "id": 863730,
      "node_id": "MDQ6VXNlcjg2MzczMA==",
      "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/fanquake",
      "html_url": "https://github.com/fanquake",
      "followers_url": "https://api.github.com/users/fanquake/followers",
      "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
      "organizations_url": "https://api.github.com/users/fanquake/orgs",
      "repos_url": "https://api.github.com/users/fanquake/repos",
      "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/fanquake/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "merge_commit_sha": "5d17e64a0290536f62e55cd09162783e8e0a71d1",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "Prabhat1308",
        "id": 94048855,
        "node_id": "U_kgDOBZsSVw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94048855?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Prabhat1308",
        "html_url": "https://github.com/Prabhat1308",
        "followers_url": "https://api.github.com/users/Prabhat1308/followers",
        "following_url": "https://api.github.com/users/Prabhat1308/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Prabhat1308/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Prabhat1308/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Prabhat1308/subscriptions",
        "organizations_url": "https://api.github.com/users/Prabhat1308/orgs",
        "repos_url": "https://api.github.com/users/Prabhat1308/repos",
        "events_url": "https://api.github.com/users/Prabhat1308/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Prabhat1308/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "stringintech:2025/06/test-header-sync-timeout",
      "ref": "2025/06/test-header-sync-timeout",
      "sha": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 933192994,
        "node_id": "R_kgDON59lIg",
        "name": "bitcoin",
        "full_name": "stringintech/bitcoin",
        "owner": {
          "login": "stringintech",
          "id": 157148846,
          "node_id": "U_kgDOCV3mrg",
          "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/stringintech",
          "html_url": "https://github.com/stringintech",
          "followers_url": "https://api.github.com/users/stringintech/followers",
          "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
          "organizations_url": "https://api.github.com/users/stringintech/orgs",
          "repos_url": "https://api.github.com/users/stringintech/repos",
          "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/stringintech/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/stringintech/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/stringintech/bitcoin",
        "archive_url": "https://api.github.com/repos/stringintech/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/stringintech/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/stringintech/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/stringintech/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/stringintech/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/stringintech/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/stringintech/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/stringintech/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/stringintech/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/stringintech/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/stringintech/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/stringintech/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/stringintech/bitcoin/events",
        "forks_url": "https://api.github.com/repos/stringintech/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/stringintech/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/stringintech/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/stringintech/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/stringintech/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/stringintech/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/stringintech/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/stringintech/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/stringintech/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/stringintech/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/stringintech/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/stringintech/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/stringintech/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/stringintech/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/stringintech/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/stringintech/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:stringintech/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/stringintech/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/stringintech/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/stringintech/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/stringintech/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/stringintech/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/stringintech/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/stringintech/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/stringintech/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/stringintech/bitcoin/hooks",
        "svn_url": "https://github.com/stringintech/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 244104,
        "default_branch": "master",
        "open_issues_count": 9,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-14T20:35:40Z",
        "created_at": "2025-02-15T11:29:00Z",
        "updated_at": "2025-06-03T18:20:27Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "e72cb20c3fb76b892c9d5eb5b13bca6c206ba111",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37607,
        "stargazers_count": 84882,
        "watchers_count": 84882,
        "size": 290109,
        "default_branch": "master",
        "open_issues_count": 751,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-08-04T18:04:35Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-08-04T19:35:35Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 101,
    "deletions": 15,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 25,
    "comments": 11
  },
  "events": [
    {
      "event": "commented",
      "id": 2936730011,
      "node_id": "IC_kwDOABII586vCvGb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2936730011",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T18:50:07Z",
      "updated_at": "2025-07-15T07:54:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32677.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [stratospher](https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-3018395027), [maflcko](https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-3072510986) |\n| Concept ACK | [yuvicc](https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2948079431), [Prabhat1308](https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2935249487) |\n| Stale ACK | [mzumsande](https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2954748917) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2936730011",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "labeled",
      "id": 17965592262,
      "node_id": "LE_lADOABII5865rEj7zwAAAAQu1S7G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17965592262",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T18:50:17Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17966561471,
      "node_id": "HRFPE_lADOABII5865rEj7zwAAAAQu4_i_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17966561471",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "commit_url": "https://api.github.com/repos/stringintech/bitcoin/commits/16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "created_at": "2025-06-03T19:42:46Z"
    },
    {
      "event": "labeled",
      "id": 17966564112,
      "node_id": "LE_lADOABII5865rEj7zwAAAAQu5AMQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17966564112",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T19:42:53Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 17968327779,
      "node_id": "UNLE_lADOABII5865rEj7zwAAAAQu_uxj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17968327779",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-03T21:40:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2948079431,
      "node_id": "IC_kwDOABII586vuB9H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2948079431",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-06T04:53:16Z",
      "updated_at": "2025-06-06T04:53:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nGreat observation and thanks for adding. I was thinking if we could add this timeout test in [`p2p_initial_headers_sync.py`](https://github.com/bitcoin/bitcoin/blob/master/test/functional/p2p_initial_headers_sync.py) instead of creating another one. ",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2948079431",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "unsubscribed",
      "id": 18016728023,
      "node_id": "UE_lADOABII5865rEj7zwAAAAQx4XPX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18016728023",
      "actor": {
        "login": "deehochberg",
        "id": 185879065,
        "node_id": "U_kgDOCxRKGQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/185879065?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/deehochberg",
        "html_url": "https://github.com/deehochberg",
        "followers_url": "https://api.github.com/users/deehochberg/followers",
        "following_url": "https://api.github.com/users/deehochberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/deehochberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/deehochberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/deehochberg/subscriptions",
        "organizations_url": "https://api.github.com/users/deehochberg/orgs",
        "repos_url": "https://api.github.com/users/deehochberg/repos",
        "events_url": "https://api.github.com/users/deehochberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/deehochberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-06T05:32:39Z"
    },
    {
      "event": "commented",
      "id": 2952919063,
      "node_id": "IC_kwDOABII586wAfgX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2952919063",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-07T19:28:54Z",
      "updated_at": "2025-06-07T19:29:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I was thinking if we could add this timeout test in [`p2p_initial_headers_sync.py`](https://github.com/bitcoin/bitcoin/blob/master/test/functional/p2p_initial_headers_sync.py) instead of creating another one.\r\n\r\n@yuvicc Actually, I did not consider that. However, now that I am thinking about it, the two sub-tests in the new test file share some context that is not used by the test file you mentioned. So, I think it is cleaner to keep them separate, especially if it will be extended to test the addnode peers as well (like [here](https://github.com/stringintech/bitcoin/commit/02f4bec94db6db81b2885646312219ddabf82270#diff-8ba81fc6003c09eec6425cd72ae7384e982dde0a7a5ca12a9a9349a41879df95)). But I will be thinking more about it while waiting for other feedback.",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2952919063",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "mentioned",
      "id": 18038571695,
      "node_id": "MEE_lADOABII5865rEj7zwAAAAQzLsKv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18038571695",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-07T19:28:54Z"
    },
    {
      "event": "subscribed",
      "id": 18038571699,
      "node_id": "SE_lADOABII5865rEj7zwAAAAQzLsKz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18038571699",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-07T19:28:54Z"
    },
    {
      "event": "reviewed",
      "id": 2908751605,
      "node_id": "PRR_kwDOABII586tYAb1",
      "url": null,
      "actor": null,
      "commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK.\r\nDidn't read the above, but I also thought it might be better to add the additional tests to `p2p_initial_headers_sync.py` - after all, this is not a particularly long test.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2908751605",
      "submitted_at": "2025-06-09T02:07:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18102191824,
      "node_id": "HRFPE_lADOABII5865rEj7zwAAAAQ2-YbQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18102191824",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "commit_url": "https://api.github.com/repos/stringintech/bitcoin/commits/bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "created_at": "2025-06-11T21:31:19Z"
    },
    {
      "event": "commented",
      "id": 2964373635,
      "node_id": "IC_kwDOABII586wsMCD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2964373635",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-11T21:45:54Z",
      "updated_at": "2025-06-11T21:45:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "16a62fa to bff80f5 - Addressed feedback by @mzumsande and @yuvicc; Thanks!",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2964373635",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "mentioned",
      "id": 18102356379,
      "node_id": "MEE_lADOABII5865rEj7zwAAAAQ2_Amb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18102356379",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-11T21:45:55Z"
    },
    {
      "event": "subscribed",
      "id": 18102356400,
      "node_id": "SE_lADOABII5865rEj7zwAAAAQ2_Amw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18102356400",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-11T21:45:55Z"
    },
    {
      "event": "mentioned",
      "id": 18102356419,
      "node_id": "MEE_lADOABII5865rEj7zwAAAAQ2_AnD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18102356419",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-11T21:45:56Z"
    },
    {
      "event": "subscribed",
      "id": 18102356434,
      "node_id": "SE_lADOABII5865rEj7zwAAAAQ2_AnS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18102356434",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-11T21:45:56Z"
    },
    {
      "event": "reviewed",
      "id": 2935249487,
      "node_id": "PRR_kwDOABII586u9FpP",
      "url": null,
      "actor": null,
      "commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK . left a nit",
      "user": {
        "login": "Prabhat1308",
        "id": 94048855,
        "node_id": "U_kgDOBZsSVw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94048855?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Prabhat1308",
        "html_url": "https://github.com/Prabhat1308",
        "followers_url": "https://api.github.com/users/Prabhat1308/followers",
        "following_url": "https://api.github.com/users/Prabhat1308/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Prabhat1308/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Prabhat1308/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Prabhat1308/subscriptions",
        "organizations_url": "https://api.github.com/users/Prabhat1308/orgs",
        "repos_url": "https://api.github.com/users/Prabhat1308/repos",
        "events_url": "https://api.github.com/users/Prabhat1308/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Prabhat1308/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2935249487",
      "submitted_at": "2025-06-17T14:37:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "reviewed",
      "id": 2937247646,
      "node_id": "PRR_kwDOABII586vEtee",
      "url": null,
      "actor": null,
      "commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2937247646",
      "submitted_at": "2025-06-17T22:30:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "convert_to_draft",
      "id": 18206940873,
      "node_id": "CTDE_lADOABII5865rEj7zwAAAAQ9N97J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18206940873",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-18T09:47:19Z"
    },
    {
      "event": "commented",
      "id": 2983506139,
      "node_id": "IC_kwDOABII586x1LDb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2983506139",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-18T09:48:09Z",
      "updated_at": "2025-06-18T09:48:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Drafted to address the issue explained [here](https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2153287651) and the new comments.",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2983506139",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18277970640,
      "node_id": "HRFPE_lADOABII5865rEj7zwAAAARBc7LQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18277970640",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "commit_url": "https://api.github.com/repos/stringintech/bitcoin/commits/8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "created_at": "2025-06-23T17:19:04Z"
    },
    {
      "event": "ready_for_review",
      "id": 18278130758,
      "node_id": "RFRE_lADOABII5865rEj7zwAAAARBdiRG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18278130758",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T17:30:46Z"
    },
    {
      "event": "commented",
      "id": 2997339318,
      "node_id": "IC_kwDOABII586yp8S2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2997339318",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T17:44:07Z",
      "updated_at": "2025-06-23T17:44:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "[bff80f5](https://github.com/bitcoin/bitcoin/commit/bff80f59bd8f4d7176f70eab6ad7086ca869a120) to [8d257ed](https://github.com/bitcoin/bitcoin/commit/8d257ed5937a47e1a60b7fe085f2e984eb60a956) - Addressed formatting comments and reverted to original approach of using the genesis block time as best header time for timeout calculation (as discussed in [this](https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2134916035) conversation).",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-2997339318",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "reviewed",
      "id": 2954748917,
      "node_id": "PRR_kwDOABII586wHeP1",
      "url": null,
      "actor": null,
      "commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code Review ACK 8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2954748917",
      "submitted_at": "2025-06-24T17:38:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "review_requested",
      "id": 18299556070,
      "node_id": "RRE_lADOABII5865rEj7zwAAAARCvRDm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18299556070",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-24T17:38:08Z",
      "requested_reviewer": {
        "login": "Prabhat1308",
        "id": 94048855,
        "node_id": "U_kgDOBZsSVw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94048855?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Prabhat1308",
        "html_url": "https://github.com/Prabhat1308",
        "followers_url": "https://api.github.com/users/Prabhat1308/followers",
        "following_url": "https://api.github.com/users/Prabhat1308/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Prabhat1308/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Prabhat1308/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Prabhat1308/subscriptions",
        "organizations_url": "https://api.github.com/users/Prabhat1308/orgs",
        "repos_url": "https://api.github.com/users/Prabhat1308/repos",
        "events_url": "https://api.github.com/users/Prabhat1308/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Prabhat1308/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2957517215,
      "node_id": "PRR_kwDOABII586wSCGf",
      "url": null,
      "actor": null,
      "commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "lgtm. Nice test for both branches\r\n\r\nreview ACK 8d257ed5937a47e1a60b7fe085f2e984eb60a956 👋\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: review ACK 8d257ed5937a47e1a60b7fe085f2e984eb60a956 👋\r\nDx0uDH6sK4oEHrtvkvxApjRYlTLYj+EHHZzNAl++iaYjo/3lz0ow5P9Hx+JBjxTIAPOCUijhrwtWNKESdnxHDQ==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2957517215",
      "submitted_at": "2025-06-25T10:56:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18359364750,
      "node_id": "HRFPE_lADOABII5865rEj7zwAAAARGTayO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18359364750",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ac33f52e29d08b19bd2049860a1865c373e55771",
      "commit_url": "https://api.github.com/repos/stringintech/bitcoin/commits/ac33f52e29d08b19bd2049860a1865c373e55771",
      "created_at": "2025-06-27T14:53:41Z"
    },
    {
      "event": "reviewed",
      "id": 2966898068,
      "node_id": "PRR_kwDOABII586w10WU",
      "url": null,
      "actor": null,
      "commit_id": "ac33f52e29d08b19bd2049860a1865c373e55771",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-2966898068",
      "submitted_at": "2025-06-27T14:56:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18359609273,
      "node_id": "HRFPE_lADOABII5865rEj7zwAAAARGUWe5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18359609273",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "11546183c70def6c0aa539642fd1c9ada3d46840",
      "commit_url": "https://api.github.com/repos/stringintech/bitcoin/commits/11546183c70def6c0aa539642fd1c9ada3d46840",
      "created_at": "2025-06-27T15:06:31Z"
    },
    {
      "event": "commented",
      "id": 3013414743,
      "node_id": "IC_kwDOABII586znQ9X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3013414743",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T15:11:41Z",
      "updated_at": "2025-06-27T15:11:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "[8d257ed](https://github.com/bitcoin/bitcoin/commit/8d257ed5937a47e1a60b7fe085f2e984eb60a956) to [1154618](https://github.com/bitcoin/bitcoin/commit/11546183c70def6c0aa539642fd1c9ada3d46840) ([compare](https://github.com/bitcoin/bitcoin/compare/8d257ed5937a47e1a60b7fe085f2e984eb60a956..11546183c70def6c0aa539642fd1c9ada3d46840)) - Addresses review comments from @maflcko and @l0rinc. Thanks!",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-3013414743",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "mentioned",
      "id": 18359693307,
      "node_id": "MEE_lADOABII5865rEj7zwAAAARGUq_7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18359693307",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T15:11:42Z"
    },
    {
      "event": "subscribed",
      "id": 18359693334,
      "node_id": "SE_lADOABII5865rEj7zwAAAARGUrAW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18359693334",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T15:11:42Z"
    },
    {
      "event": "mentioned",
      "id": 18359693349,
      "node_id": "MEE_lADOABII5865rEj7zwAAAARGUrAl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18359693349",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T15:11:42Z"
    },
    {
      "event": "subscribed",
      "id": 18359693360,
      "node_id": "SE_lADOABII5865rEj7zwAAAARGUrAw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18359693360",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T15:11:42Z"
    },
    {
      "event": "reviewed",
      "id": 3015110334,
      "node_id": "PRR_kwDOABII586ztu6-",
      "url": null,
      "actor": null,
      "commit_id": "11546183c70def6c0aa539642fd1c9ada3d46840",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 11546183c70def6c0aa539642fd1c9ada3d46840. nice test!\r\nleft some more style nits here - https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2204080826",
      "user": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-3015110334",
      "submitted_at": "2025-07-14T07:42:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "review_requested",
      "id": 18612014626,
      "node_id": "RRE_lADOABII5865rEj7zwAAAARVXM4i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18612014626",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T07:42:24Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18612014834,
      "node_id": "RRE_lADOABII5865rEj7zwAAAARVXM7y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18612014834",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T07:42:25Z",
      "requested_reviewer": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 3068819299,
      "node_id": "IC_kwDOABII58626ndj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3068819299",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T10:16:25Z",
      "updated_at": "2025-07-14T10:16:25Z",
      "author_association": "MEMBER",
      "body": "re-ACK 11546183c70def6c0aa539642fd1c9ada3d46840 🗻\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 11546183c70def6c0aa539642fd1c9ada3d46840 🗻\r\nmqU5RZJ+SCn2jP2WG28PjthiMcefRUfGQhbyBaqFzcGSJGzjbCeWMsdkfKxExydD2QhCuNnvvHPlzBI4hcfHCA==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-3068819299",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYxZTgwMGU3NWNmZmEyNTZjY2RiYzJmZmM3YTE3MzljMDA4ODBjZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "tree": {
        "sha": "10cda5470f866860452cd152ab8626196d31a3df",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/10cda5470f866860452cd152ab8626196d31a3df"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e872a566f251c73908de8b6d243c94a6679c2eac",
          "sha": "e872a566f251c73908de8b6d243c94a6679c2eac",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e872a566f251c73908de8b6d243c94a6679c2eac"
        }
      ],
      "message": "test: headers sync timeout",
      "committer": {
        "name": "Stringintech",
        "email": "stringintech@gmail.com",
        "date": "2025-07-14T13:18:23Z"
      },
      "author": {
        "name": "stringintech",
        "email": "stringintech@gmail.com",
        "date": "2025-06-18T19:26:32Z"
      },
      "sha": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18619217462,
      "node_id": "HRFPE_lADOABII5865rEj7zwAAAARVyrY2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18619217462",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "commit_url": "https://api.github.com/repos/stringintech/bitcoin/commits/61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "created_at": "2025-07-14T14:18:46Z"
    },
    {
      "event": "commented",
      "id": 3069805059,
      "node_id": "IC_kwDOABII5862-YID",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3069805059",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T14:23:17Z",
      "updated_at": "2025-07-14T14:24:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "[1154618](https://github.com/bitcoin/bitcoin/commit/11546183c70def6c0aa539642fd1c9ada3d46840) to [61e800e](https://github.com/bitcoin/bitcoin/commit/61e800e75cffa256ccdbc2ffc7a1739c00880ce0) - Applied [suggestion](https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2204080826) by @stratospher to move helper methods before their respective subtest. Thanks!",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-3069805059",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "mentioned",
      "id": 18619303963,
      "node_id": "MEE_lADOABII5865rEj7zwAAAARVzAgb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18619303963",
      "actor": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T14:23:19Z"
    },
    {
      "event": "subscribed",
      "id": 18619303998,
      "node_id": "SE_lADOABII5865rEj7zwAAAARVzAg-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18619303998",
      "actor": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-14T14:23:19Z"
    },
    {
      "event": "reviewed",
      "id": 3018395027,
      "node_id": "PRR_kwDOABII586z6Q2T",
      "url": null,
      "actor": null,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "reACK 61e800e7.",
      "user": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#pullrequestreview-3018395027",
      "submitted_at": "2025-07-15T03:41:59Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
    },
    {
      "event": "commented",
      "id": 3072510986,
      "node_id": "IC_kwDOABII5863IswK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3072510986",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-15T07:54:42Z",
      "updated_at": "2025-07-15T07:54:42Z",
      "author_association": "MEMBER",
      "body": "re-ACK 61e800e75cffa256ccdbc2ffc7a1739c00880ce0 🗝\r\n\r\n<details><summary>Show signature</summary>\r\n\r\nSignature:\r\n\r\n```\r\nuntrusted comment: signature from minisign secret key on empty file; verify via: minisign -Vm \"${path_to_any_empty_file}\" -P RWTRmVTMeKV5noAMqVlsMugDDCyyTSbA3Re5AkUrhvLVln0tSaFWglOw -x \"${path_to_this_whole_four_line_signature_blob}\"\r\nRUTRmVTMeKV5npGrKx1nqXCw5zeVHdtdYURB/KlyA/LMFgpNCs+SkW9a8N95d+U4AP1RJMi+krxU1A3Yux4bpwZNLvVBKy0wLgM=\r\ntrusted comment: re-ACK 61e800e75cffa256ccdbc2ffc7a1739c00880ce0 🗝\r\nXhUGX4l4l2w6MYNlOvNRVgYeftSBi08ZqM3A4eRybDzwtcBh2wPhgBSfIAMcPCLAmOwRbbJywtNLWPRazKx6CA==\r\n```\r\n\r\n</details>\r\n",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-3072510986",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "merged",
      "id": 18635648568,
      "node_id": "ME_lADOABII5865rEj7zwAAAARWxW44",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18635648568",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5d17e64a0290536f62e55cd09162783e8e0a71d1",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/5d17e64a0290536f62e55cd09162783e8e0a71d1",
      "created_at": "2025-07-15T10:47:16Z"
    },
    {
      "event": "closed",
      "id": 18635648585,
      "node_id": "CE_lADOABII5865rEj7zwAAAARWxW5J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18635648585",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-15T10:47:16Z"
    },
    {
      "event": "referenced",
      "id": 18852613042,
      "node_id": "REFE_lADOABII5865rEj7zwAAAARjtAuy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18852613042",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "02ded863bae336011f29fe6ffda2966e42b876f4",
      "commit_url": "https://api.github.com/repos/TheCharlatan/rust-bitcoinkernel/commits/02ded863bae336011f29fe6ffda2966e42b876f4",
      "created_at": "2025-07-28T10:34:59Z"
    },
    {
      "event": "referenced",
      "id": 18857070117,
      "node_id": "REFE_lADOABII5865rEj7zwAAAARj-A4l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18857070117",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "52d7f32bd64b7c975b4e7da1bf2aee3aa979fa85",
      "commit_url": "https://api.github.com/repos/TheCharlatan/rust-bitcoinkernel/commits/52d7f32bd64b7c975b4e7da1bf2aee3aa979fa85",
      "created_at": "2025-07-28T14:03:14Z"
    },
    {
      "event": "commented",
      "id": 3152491438,
      "node_id": "IC_kwDOABII58675zOu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3152491438",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-04T21:45:51Z",
      "updated_at": "2025-08-04T21:45:51Z",
      "author_association": "MEMBER",
      "body": "Post-merge ACK, thanks @stringintech!",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#issuecomment-3152491438",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32677"
    },
    {
      "event": "mentioned",
      "id": 18978980109,
      "node_id": "MEE_lADOABII5865rEj7zwAAAARrPEEN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18978980109",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-04T21:45:52Z"
    },
    {
      "event": "subscribed",
      "id": 18978980123,
      "node_id": "SE_lADOABII5865rEj7zwAAAARrPEEb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18978980123",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-04T21:45:52Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2134912428",
      "pull_request_review_id": 2908751605,
      "id": 2134912428,
      "node_id": "PRRC_kwDOABII585_QC2s",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 83,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "this seems unnecessary, `add_outbound_p2p_connection` already has a built-in wait for the `verack`.",
      "created_at": "2025-06-09T01:43:52Z",
      "updated_at": "2025-06-09T02:07:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2134912428",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2134912428"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 83,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2134916035",
      "pull_request_review_id": 2908751605,
      "id": 2134916035,
      "node_id": "PRRC_kwDOABII585_QDvD",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This doesn't return the timestamp of the best header, but the time of the tip (which is still at genesis, after all headers up to minchainwork have been downloaded but no blocks connected). As far as I know (didn't check) we don't expose `m_chainman.m_best_header->Time()` via RPC, so to test the dynamic part in a functional test we would have to check the actual timestamps of the headers we sent the node, instead of using getblockchaininfo. ",
      "created_at": "2025-06-09T01:51:06Z",
      "updated_at": "2025-06-09T02:09:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2134916035",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2134916035"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2141160283",
      "pull_request_review_id": 2918813952,
      "id": 2141160283,
      "node_id": "PRRC_kwDOABII585_n4Nb",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": 2134916035,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I used `getblockchaininfo()['time']` because we hadn't sent the node any headers yet, so I relied on the assumption that the best header should still be at genesis with the genesis block time (which I should have commented better).\r\nBut I agree with your suggestion as it is more direct and I have applied it - I appreciate your further feedback on it.",
      "created_at": "2025-06-11T21:39:47Z",
      "updated_at": "2025-06-11T21:39:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2141160283",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2141160283"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2152014769",
      "pull_request_review_id": 2935249487,
      "id": 2152014769,
      "node_id": "PRRC_kwDOABII586ARSOx",
      "diff_hunk": "@@ -1,18 +1,27 @@\n #!/usr/bin/env python3\n-# Copyright (c) 2022 The Bitcoin Core developers\n+# Copyright (c) 2022-2025 The Bitcoin Core developers",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 3,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "in_reply_to_id": null,
      "user": {
        "login": "Prabhat1308",
        "id": 94048855,
        "node_id": "U_kgDOBZsSVw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94048855?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Prabhat1308",
        "html_url": "https://github.com/Prabhat1308",
        "followers_url": "https://api.github.com/users/Prabhat1308/followers",
        "following_url": "https://api.github.com/users/Prabhat1308/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Prabhat1308/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Prabhat1308/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Prabhat1308/subscriptions",
        "organizations_url": "https://api.github.com/users/Prabhat1308/orgs",
        "repos_url": "https://api.github.com/users/Prabhat1308/repos",
        "events_url": "https://api.github.com/users/Prabhat1308/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Prabhat1308/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Would be better to do 2022-Present",
      "created_at": "2025-06-17T11:22:45Z",
      "updated_at": "2025-06-17T14:37:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2152014769",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2152014769"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2153275109",
      "pull_request_review_id": 2937247646,
      "id": 2153275109,
      "node_id": "PRRC_kwDOABII586AWF7l",
      "diff_hunk": "@@ -66,35 +92,137 @@ def run_test(self):\n \n         self.log.info(\"Check that peer1 receives a getheaders in response\")\n         peer1.wait_for_getheaders(block_hash=best_block_hash)\n-        peer1.send_without_ping(msg_headers()) # Send empty response, see above\n-\n-        self.log.info(\"Check that exactly 1 of {peer2, peer3} received a getheaders in response\")\n-        count = 0\n-        peer_receiving_getheaders = None\n-        for p in [peer2, peer3]:\n-            with p2p_lock:\n-                if \"getheaders\" in p.last_message:\n-                    count += 1\n-                    peer_receiving_getheaders = p\n-                    p.send_without_ping(msg_headers()) # Send empty response, see above\n+        # Send empty response, see above\n+        peer1.send_without_ping(msg_headers())\n \n-        assert_equal(count, 1)\n+        self.log.info(",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 99,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "in_reply_to_id": null,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think it would be good to drop the formatting changes to code you don't change for easier review. Some linters such as flake8 will suggest a 80 character limit, but that is not usually followed here - there will be longer lines in almost every functional test (it's fine to respect in the added code if you want).",
      "created_at": "2025-06-17T22:30:42Z",
      "updated_at": "2025-06-17T22:30:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2153275109",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2153275109"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2153287651",
      "pull_request_review_id": 2937265151,
      "id": 2153287651,
      "node_id": "PRRC_kwDOABII586AWI_j",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": 2134916035,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@mzumsande I just reviewed the code again and found an issue with how I implemented your suggestion. The problem is that `self.send_new_block(peer1)` gets called _**after**_ the headers sync timeout for peer1 has already been calculated. During peer setup, the timeout calculation uses the genesis block time as the best header time, not the new block's header time that gets set later. So I need to make additional changes to fix this timing issue.",
      "created_at": "2025-06-17T22:44:56Z",
      "updated_at": "2025-06-18T09:55:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2153287651",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2153287651"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2154894242",
      "pull_request_review_id": 2939695340,
      "id": 2154894242,
      "node_id": "PRRC_kwDOABII586AcROi",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": 2134916035,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I looked at this again, and I think the original approach is fine - I think I was confused by something in my original comment, sorry!\r\nJust adding a comment that the genesis block time is the best header time in this case (because we didn't receive any headers from peers) should be sufficient - no need to send a block.\r\n\r\nIt could be good though to run the timeout tests at the beginning of `p2p_initial_headers_sync`, before the `test_initial_headers_sync` subtest (which does send headers).",
      "created_at": "2025-06-18T15:19:45Z",
      "updated_at": "2025-06-18T15:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2154894242",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2154894242"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159867263",
      "pull_request_review_id": 2947567868,
      "id": 2159867263,
      "node_id": "PRRC_kwDOABII586AvPV_",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": 2134916035,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks for looking into this further. I fixed the timing issue I mentioned earlier (fixed version [here](https://github.com/stringintech/bitcoin/commit/afa35aa362c1bbb0cba53c7e1dfdeb5b5ddf1bfc)), but while reviewing it, I started to question how much value sending a new header/block actually adds to the test. I’ll revert it to use the genesis block time as the best header time and add the comment.\r\n\r\nBut does changing the order of the subtests actually matter, given that the `test_initial_headers_sync` subtest sends no actual headers?",
      "created_at": "2025-06-21T04:58:13Z",
      "updated_at": "2025-06-21T09:38:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2159867263",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159867263"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162110075",
      "pull_request_review_id": 2950870285,
      "id": 2162110075,
      "node_id": "PRRC_kwDOABII586A3y57",
      "diff_hunk": "@@ -66,35 +92,137 @@ def run_test(self):\n \n         self.log.info(\"Check that peer1 receives a getheaders in response\")\n         peer1.wait_for_getheaders(block_hash=best_block_hash)\n-        peer1.send_without_ping(msg_headers()) # Send empty response, see above\n-\n-        self.log.info(\"Check that exactly 1 of {peer2, peer3} received a getheaders in response\")\n-        count = 0\n-        peer_receiving_getheaders = None\n-        for p in [peer2, peer3]:\n-            with p2p_lock:\n-                if \"getheaders\" in p.last_message:\n-                    count += 1\n-                    peer_receiving_getheaders = p\n-                    p.send_without_ping(msg_headers()) # Send empty response, see above\n+        # Send empty response, see above\n+        peer1.send_without_ping(msg_headers())\n \n-        assert_equal(count, 1)\n+        self.log.info(",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 99,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "in_reply_to_id": 2153275109,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done. Good to know the line length limit isn't strictly enforced everywhere since respecting it actually hurts readability in some places.",
      "created_at": "2025-06-23T17:25:51Z",
      "updated_at": "2025-06-23T17:25:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2162110075",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162110075"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162111070",
      "pull_request_review_id": 2950871813,
      "id": 2162111070,
      "node_id": "PRRC_kwDOABII586A3zJe",
      "diff_hunk": "@@ -1,18 +1,27 @@\n #!/usr/bin/env python3\n-# Copyright (c) 2022 The Bitcoin Core developers\n+# Copyright (c) 2022-2025 The Bitcoin Core developers",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 3,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "in_reply_to_id": 2152014769,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Applied. Thanks!",
      "created_at": "2025-06-23T17:26:30Z",
      "updated_at": "2025-06-23T17:26:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2162111070",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162111070"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 2,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162117242",
      "pull_request_review_id": 2950881210,
      "id": 2162117242,
      "node_id": "PRRC_kwDOABII586A30p6",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": 2134916035,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "(Just pushed a new version; I'll update the subtest order once this conversation wraps up. Thanks!)",
      "created_at": "2025-06-23T17:30:25Z",
      "updated_at": "2025-06-23T17:30:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2162117242",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2162117242"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2164560686",
      "pull_request_review_id": 2954748079,
      "id": 2164560686,
      "node_id": "PRRC_kwDOABII586BBJMu",
      "diff_hunk": "@@ -0,0 +1,111 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2022 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Test peer timeout during initial headers sync.\n+Tests normal peer disconnection vs noban peer behavior.\"\"\"\n+\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.p2p import (\n+    p2p_lock,\n+    P2PInterface,\n+)\n+from test_framework.util import assert_equal\n+import time\n+\n+HEADERS_SYNC_BASE_TIMEOUT_SEC = 900  # 15 minutes\n+HEADERS_PER_HEADER_TIMEOUT_US = 1000  # 1 millisecond\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes\n+\n+\n+class HeadersSyncTimeoutTest(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.setup_clean_chain = True\n+        self.num_nodes = 1\n+        self.peer1 = None\n+        self.peer2 = None\n+\n+    def run_test(self):\n+        self.node = self.nodes[0]\n+\n+        self.test_normal_peer_timeout()\n+        self.test_noban_peer_timeout()\n+\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        self.peer1.wait_for_disconnect()\n+        assert_equal(self.node.num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        self.peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.node.setmocktime(int(time.time()))\n+        self.setup_peers()\n+\n+        with self.node.assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, \"\n+                 \"not disconnecting peer=0\"]):\n+            self.trigger_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        self.peer1.sync_with_ping()\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a \"\n+                      \"getheaders\")\n+        count = 0\n+        for p in [self.peer1, self.peer2]:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+        assert_equal(count, 1)\n+\n+    def setup_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial \"\n+                      \"getheaders request\")\n+        with self.node.assert_debug_log(\n+                expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            self.peer1 = self.node.add_p2p_connection(P2PInterface())\n+        self.peer1.wait_for_getheaders()\n+\n+        self.log.info(\"Add outbound peer2\")\n+        with self.node.wait_for_new_peer():\n+            # This peer has to be outbound otherwise the stalling peer is\n+            # protected from disconnection\n+            self.peer2 = self.node.add_outbound_p2p_connection(\n+                P2PInterface(), p2p_idx=1,\n+                connection_type=\"outbound-full-relay\")\n+        assert_equal(self.node.num_test_p2p_connections(), 2)\n+\n+    def trigger_timeout(self):\n+        self.log.info(\"Trigger the headers download timeout by advancing \"\n+                      \"mock time\")\n+        best_header_time = self.node.getblockchaininfo()['time']",
      "path": "test/functional/p2p_initial_headers_sync_timeout.py",
      "position": null,
      "original_position": 94,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "16a62fa881b1610d71402ef6b27bcdf2288a3297",
      "in_reply_to_id": 2134916035,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "right, it just sends an empty headers message - kind of surprising that a test called `test_initial_headers_sync` doesn't send a single header. I think it's fine to leave the order as is.",
      "created_at": "2025-06-24T17:37:43Z",
      "updated_at": "2025-06-24T17:37:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2164560686",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2164560686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 94,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166328136",
      "pull_request_review_id": 2957517215,
      "id": 2166328136,
      "node_id": "PRRC_kwDOABII586BH4tI",
      "diff_hunk": "@@ -93,8 +100,86 @@ def run_test(self):\n \n         expected_peer.wait_for_getheaders(block_hash=best_block_hash)\n \n-        self.log.info(\"Success!\")\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.restart_node(0)\n+        self.nodes[0].setmocktime(int(time.time()))\n+        peer1, peer2 = self.setup_timeout_test_peers()\n+\n+        with self.nodes[0].assert_debug_log([\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_headers_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        peer1.wait_for_disconnect()\n+        assert_equal(self.nodes[0].num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 91,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "\r\n    getheader -> getheaders [matches the method and plural usage elsewhere]\r\n",
      "created_at": "2025-06-25T09:59:40Z",
      "updated_at": "2025-06-25T10:56:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2166328136",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166328136"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166390209",
      "pull_request_review_id": 2957517215,
      "id": 2166390209,
      "node_id": "PRRC_kwDOABII586BIH3B",
      "diff_hunk": "@@ -24,18 +27,30 @@\n     assert_equal,\n )\n import random\n+import time\n+\n+# Constants from net_processing\n+HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC = 900  # 15 minutes\n+HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_US = 1000  # 1 millisecond per header\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes between blocks\n+\n+\n+def calculate_headers_timeout(best_header_time, current_time):\n+    seconds_since_best_header = current_time - best_header_time\n+    variable_timeout_us = (HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_US *\n+                           seconds_since_best_header / POW_TARGET_SPACING_SEC)\n+    variable_timeout_sec = variable_timeout_us / 1_000_000\n+    return int(current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC + variable_timeout_sec)",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 35,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```suggestion\r\n    variable_timeout_sec = math.ceil(HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_MS /1_000 *\r\n                           seconds_since_best_header / POW_TARGET_SPACING_SEC)   # ceil, to make this function usable with mocktime, which only has second precision.\r\n\r\n    return (current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC + variable_timeout_sec)\r\n```\r\n\r\nseems a bit odd to be rounding down in this function and then apply a random +1 offset below. So it is actually rounding up. It would be better to just round up directly. Also, documenting why rounding is needed at all can't hurt. Finally, 1000/1000000 can be written as 1/1000.",
      "created_at": "2025-06-25T10:33:53Z",
      "updated_at": "2025-06-25T10:56:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2166390209",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166390209"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": 40,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166403740",
      "pull_request_review_id": 2957517215,
      "id": 2166403740,
      "node_id": "PRRC_kwDOABII586BILKc",
      "diff_hunk": "@@ -93,8 +100,86 @@ def run_test(self):\n \n         expected_peer.wait_for_getheaders(block_hash=best_block_hash)\n \n-        self.log.info(\"Success!\")\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.restart_node(0)",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": 117,
      "original_position": 80,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: it is probably a bit faster to `self.nodes[0].disconnect_p2ps()` when the goal is to disconnect all peers (and throw away their peer state)",
      "created_at": "2025-06-25T10:41:17Z",
      "updated_at": "2025-06-25T10:56:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2166403740",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166403740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 149,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166409317",
      "pull_request_review_id": 2957517215,
      "id": 2166409317,
      "node_id": "PRRC_kwDOABII586BIMhl",
      "diff_hunk": "@@ -93,8 +100,86 @@ def run_test(self):\n \n         expected_peer.wait_for_getheaders(block_hash=best_block_hash)\n \n-        self.log.info(\"Success!\")\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.restart_node(0)\n+        self.nodes[0].setmocktime(int(time.time()))\n+        peer1, peer2 = self.setup_timeout_test_peers()\n+\n+        with self.nodes[0].assert_debug_log([\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_headers_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        peer1.wait_for_disconnect()\n+        assert_equal(self.nodes[0].num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.nodes[0].setmocktime(int(time.time()))\n+        peer1, peer2 = self.setup_timeout_test_peers()\n+\n+        with self.nodes[0].assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, not disconnecting peer=0\"]):\n+            self.trigger_headers_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        peer1.sync_with_ping()\n+        assert_equal(self.nodes[0].num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a getheaders\")\n+        self.assert_single_getheaders_recipient([peer1, peer2])\n+\n+    def announce_random_block(self, peers):\n+        new_block_announcement = msg_inv(\n+            inv=[CInv(MSG_BLOCK, random.randrange(1 << 256))])\n+        for p in peers:\n+            p.send_and_ping(new_block_announcement)\n+\n+    def assert_single_getheaders_recipient(self, peers):\n+        count = 0\n+        receiving_peer = None\n+        for p in peers:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+                    receiving_peer = p\n+        assert_equal(count, 1)\n+        return receiving_peer\n+\n+    def setup_timeout_test_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial getheaders request\")\n+        node = self.nodes[0]\n+        with node.assert_debug_log(expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            peer1 = node.add_p2p_connection(P2PInterface())\n+        peer1.wait_for_getheaders()",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 133,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```suggestion\r\n        with node.assert_debug_log(expected_msgs=[\"initial getheaders (0) to peer=0\"]):\r\n            peer1 = node.add_p2p_connection(P2PInterface())\r\n            peer1.wait_for_getheaders()\r\n```\r\n\r\nnit: it is a bit better to check the state (and wait for it directly) than to indirectly read the debug log in a loop until a specific log line is hit.",
      "created_at": "2025-06-25T10:44:37Z",
      "updated_at": "2025-06-25T10:56:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2166409317",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166409317"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": 156,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166420099",
      "pull_request_review_id": 2957517215,
      "id": 2166420099,
      "node_id": "PRRC_kwDOABII586BIPKD",
      "diff_hunk": "@@ -93,8 +100,86 @@ def run_test(self):\n \n         expected_peer.wait_for_getheaders(block_hash=best_block_hash)\n \n-        self.log.info(\"Success!\")\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.restart_node(0)\n+        self.nodes[0].setmocktime(int(time.time()))\n+        peer1, peer2 = self.setup_timeout_test_peers()\n+\n+        with self.nodes[0].assert_debug_log([\"Timeout downloading headers, disconnecting peer=0\"]):\n+            self.trigger_headers_timeout()\n+\n+        self.log.info(\"Check that stalling peer1 is disconnected\")\n+        peer1.wait_for_disconnect()\n+        assert_equal(self.nodes[0].num_test_p2p_connections(), 1)\n+\n+        self.log.info(\"Check that peer2 receives a getheader request\")\n+        peer2.wait_for_getheaders()\n+\n+    def test_noban_peer_timeout(self):\n+        self.log.info(\"Test noban peer on header timeout\")\n+        self.restart_node(0, extra_args=['-whitelist=noban@127.0.0.1'])\n+        self.nodes[0].setmocktime(int(time.time()))\n+        peer1, peer2 = self.setup_timeout_test_peers()\n+\n+        with self.nodes[0].assert_debug_log(\n+                [\"Timeout downloading headers from noban peer, not disconnecting peer=0\"]):\n+            self.trigger_headers_timeout()\n+\n+        self.log.info(\"Check that noban peer1 is not disconnected\")\n+        peer1.sync_with_ping()\n+        assert_equal(self.nodes[0].num_test_p2p_connections(), 2)\n+\n+        self.log.info(\"Check that exactly 1 of {peer1, peer2} receives a getheaders\")\n+        self.assert_single_getheaders_recipient([peer1, peer2])\n+\n+    def announce_random_block(self, peers):\n+        new_block_announcement = msg_inv(\n+            inv=[CInv(MSG_BLOCK, random.randrange(1 << 256))])\n+        for p in peers:\n+            p.send_and_ping(new_block_announcement)\n+\n+    def assert_single_getheaders_recipient(self, peers):\n+        count = 0\n+        receiving_peer = None\n+        for p in peers:\n+            with p2p_lock:\n+                if \"getheaders\" in p.last_message:\n+                    count += 1\n+                    receiving_peer = p\n+        assert_equal(count, 1)\n+        return receiving_peer\n+\n+    def setup_timeout_test_peers(self):\n+        self.log.info(\"Add peer1 and check it receives an initial getheaders request\")\n+        node = self.nodes[0]\n+        with node.assert_debug_log(expected_msgs=[\"initial getheaders (0) to peer=0\"]):\n+            peer1 = node.add_p2p_connection(P2PInterface())\n+        peer1.wait_for_getheaders()",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 133,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": 2166409317,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "also, could check the getheaders `block_hash=int(node.getbestblockhash(), 16)` ",
      "created_at": "2025-06-25T10:51:02Z",
      "updated_at": "2025-06-25T10:56:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2166420099",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2166420099"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": 156,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2167253212",
      "pull_request_review_id": 2959068733,
      "id": 2167253212,
      "node_id": "PRRC_kwDOABII586BLajc",
      "diff_hunk": "@@ -24,18 +27,30 @@\n     assert_equal,\n )\n import random\n+import time\n+\n+# Constants from net_processing\n+HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC = 900  # 15 minutes\n+HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_US = 1000  # 1 millisecond per header\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes between blocks\n+\n+\n+def calculate_headers_timeout(best_header_time, current_time):\n+    seconds_since_best_header = current_time - best_header_time\n+    variable_timeout_us = (HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_US *\n+                           seconds_since_best_header / POW_TARGET_SPACING_SEC)\n+    variable_timeout_sec = variable_timeout_us / 1_000_000\n+    return int(current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC + variable_timeout_sec)",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 35,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": 2166390209,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think the +1 offset would still be needed in a corner case when the input of the ceil function is already an integer. In this case, if +1 is removed, the timeout will not be triggered because the check `current_time > peer->m_headers_sync_timeout` ([here](https://github.com/bitcoin/bitcoin/blob/7d5a6d17398aae3cea6d63564d33e7e49da3c71c/src/net_processing.cpp#L5888)) would evaluate to `timeout > timeout` (false) instead of `timeout + 1 > timeout` (true).",
      "created_at": "2025-06-25T17:27:52Z",
      "updated_at": "2025-06-25T17:27:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2167253212",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2167253212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": 40,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2167267966",
      "pull_request_review_id": 2959093612,
      "id": 2167267966,
      "node_id": "PRRC_kwDOABII586BLeJ-",
      "diff_hunk": "@@ -24,18 +27,30 @@\n     assert_equal,\n )\n import random\n+import time\n+\n+# Constants from net_processing\n+HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC = 900  # 15 minutes\n+HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_US = 1000  # 1 millisecond per header\n+POW_TARGET_SPACING_SEC = 600  # 10 minutes between blocks\n+\n+\n+def calculate_headers_timeout(best_header_time, current_time):\n+    seconds_since_best_header = current_time - best_header_time\n+    variable_timeout_us = (HEADERS_DOWNLOAD_TIMEOUT_PER_HEADER_US *\n+                           seconds_since_best_header / POW_TARGET_SPACING_SEC)\n+    variable_timeout_sec = variable_timeout_us / 1_000_000\n+    return int(current_time + HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC + variable_timeout_sec)",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 35,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": 2166390209,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Aside from the +1 offset though, maybe it is good to apply your suggestion and use the ceil function so that `calculate_headers_timeout` returns a time that is >= the real timeout calculated by core, ensuring it doesn't return a lower value due to precision loss.",
      "created_at": "2025-06-25T17:37:12Z",
      "updated_at": "2025-06-25T17:37:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2167267966",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2167267966"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": 40,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 45,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2167480268",
      "pull_request_review_id": 2959426896,
      "id": 2167480268,
      "node_id": "PRRC_kwDOABII586BMR_M",
      "diff_hunk": "@@ -93,8 +100,86 @@ def run_test(self):\n \n         expected_peer.wait_for_getheaders(block_hash=best_block_hash)\n \n-        self.log.info(\"Success!\")\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.restart_node(0)",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": 117,
      "original_position": 80,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": 2166403740,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I tried this and it seems that doing this instead of restarting the node does not reset the peer indexes, and I can no longer count on the peer indexes in the debug logs. \r\nFor example, for the `test_normal_peer_timeout` subset:\r\n```\r\nTimeout downloading headers, disconnecting peer=0\r\n```\r\nbecomes\r\n```\r\nTimeout downloading headers, disconnecting peer=3\r\n```\r\nAlthough still having `peer=0` for the `test_noban_peer_timeout` subtest since we need a restart for that. \n\nBut it shouldn't matter if you think I should get rid of the debug log assertions altogether.",
      "created_at": "2025-06-25T19:40:51Z",
      "updated_at": "2025-06-25T19:56:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2167480268",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2167480268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 149,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169541692",
      "pull_request_review_id": 2962871253,
      "id": 2169541692,
      "node_id": "PRRC_kwDOABII586BUJQ8",
      "diff_hunk": "@@ -93,8 +100,86 @@ def run_test(self):\n \n         expected_peer.wait_for_getheaders(block_hash=best_block_hash)\n \n-        self.log.info(\"Success!\")\n+    def test_normal_peer_timeout(self):\n+        self.log.info(\"Test peer disconnection on header timeout\")\n+        self.restart_node(0)",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": 117,
      "original_position": 80,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "8d257ed5937a47e1a60b7fe085f2e984eb60a956",
      "in_reply_to_id": 2166403740,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "no strong opinion. Generally, nits are left for the author to decide on (take or leave)",
      "created_at": "2025-06-26T17:23:26Z",
      "updated_at": "2025-06-26T17:23:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2169541692",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169541692"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 149,
      "original_line": 149,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172225961",
      "pull_request_review_id": 2966898068,
      "id": 2172225961,
      "node_id": "PRRC_kwDOABII586BeYmp",
      "diff_hunk": "@@ -23,19 +26,33 @@\n from test_framework.util import (\n     assert_equal,\n )\n+import math\n import random\n+import time\n+\n+# Constants from net_processing\n+HEADERS_DOWNLOAD_TIMEOUT_BASE_SEC = 900  # 15 minutes",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 27,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "ac33f52e29d08b19bd2049860a1865c373e55771",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "you could store it as a multiplication instead of the comment:\r\n```suggestion\r\nHEADERS_DOWNLOAD_TIMEOUT_BASE_SEC = 15 * 60\r\n```",
      "created_at": "2025-06-27T14:56:10Z",
      "updated_at": "2025-06-27T14:56:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2172225961",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2172225961"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2204080826",
      "pull_request_review_id": 3015116306,
      "id": 2204080826,
      "node_id": "PRRC_kwDOABII586DX5q6",
      "diff_hunk": "@@ -66,35 +92,137 @@ def run_test(self):\n \n         self.log.info(\"Check that peer1 receives a getheaders in response\")\n         peer1.wait_for_getheaders(block_hash=best_block_hash)\n-        peer1.send_without_ping(msg_headers()) # Send empty response, see above\n-\n-        self.log.info(\"Check that exactly 1 of {peer2, peer3} received a getheaders in response\")\n-        count = 0\n-        peer_receiving_getheaders = None\n-        for p in [peer2, peer3]:\n-            with p2p_lock:\n-                if \"getheaders\" in p.last_message:\n-                    count += 1\n-                    peer_receiving_getheaders = p\n-                    p.send_without_ping(msg_headers()) # Send empty response, see above\n+        # Send empty response, see above\n+        peer1.send_without_ping(msg_headers())\n \n-        assert_equal(count, 1)\n+        self.log.info(",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 99,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "in_reply_to_id": 2153275109,
      "user": {
        "login": "stratospher",
        "id": 44024636,
        "node_id": "MDQ6VXNlcjQ0MDI0NjM2",
        "avatar_url": "https://avatars.githubusercontent.com/u/44024636?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stratospher",
        "html_url": "https://github.com/stratospher",
        "followers_url": "https://api.github.com/users/stratospher/followers",
        "following_url": "https://api.github.com/users/stratospher/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stratospher/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stratospher/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stratospher/subscriptions",
        "organizations_url": "https://api.github.com/users/stratospher/orgs",
        "repos_url": "https://api.github.com/users/stratospher/repos",
        "events_url": "https://api.github.com/users/stratospher/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stratospher/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "(just more style nits):\r\n\r\nlooks like there's a few more instances - ex: `announce_random_block` [cuts off in the middle](https://github.com/bitcoin/bitcoin/blob/11546183c70def6c0aa539642fd1c9ada3d46840/test/functional/p2p_initial_headers_sync.py#L140).\r\n\r\nalso `announce_random_block` wasn't touched in the PR but seeing a diff for it. I think the general pattern in the codebase is to keep the helper functions before the respective `test_` function (see for example: `feature_fee_estimation.py`). so it's ok to keep `announce_random_block` on top.\r\n\r\n> When subclassing the BitcoinTestFramework, place overrides for the set_test_params(), add_options() and setup_xxxx() methods at the top of the subclass, then locally-defined helper methods, then the run_test() method.",
      "created_at": "2025-07-14T07:43:37Z",
      "updated_at": "2025-07-14T07:43:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2204080826",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2204080826"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2205078542",
      "pull_request_review_id": 3016586276,
      "id": 2205078542,
      "node_id": "PRRC_kwDOABII586DbtQO",
      "diff_hunk": "@@ -66,35 +92,137 @@ def run_test(self):\n \n         self.log.info(\"Check that peer1 receives a getheaders in response\")\n         peer1.wait_for_getheaders(block_hash=best_block_hash)\n-        peer1.send_without_ping(msg_headers()) # Send empty response, see above\n-\n-        self.log.info(\"Check that exactly 1 of {peer2, peer3} received a getheaders in response\")\n-        count = 0\n-        peer_receiving_getheaders = None\n-        for p in [peer2, peer3]:\n-            with p2p_lock:\n-                if \"getheaders\" in p.last_message:\n-                    count += 1\n-                    peer_receiving_getheaders = p\n-                    p.send_without_ping(msg_headers()) # Send empty response, see above\n+        # Send empty response, see above\n+        peer1.send_without_ping(msg_headers())\n \n-        assert_equal(count, 1)\n+        self.log.info(",
      "path": "test/functional/p2p_initial_headers_sync.py",
      "position": null,
      "original_position": 99,
      "commit_id": "61e800e75cffa256ccdbc2ffc7a1739c00880ce0",
      "original_commit_id": "bff80f59bd8f4d7176f70eab6ad7086ca869a120",
      "in_reply_to_id": 2153275109,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "While I personally prefer a top-down approach where the main test methods are visible at the top without much scrolling, I am seeing the pattern you described is mostly respected across the tests, so I applied it.",
      "created_at": "2025-07-14T14:24:14Z",
      "updated_at": "2025-07-14T14:24:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32677#discussion_r2205078542",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2205078542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32677"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 98,
      "side": "RIGHT"
    }
  ]
}