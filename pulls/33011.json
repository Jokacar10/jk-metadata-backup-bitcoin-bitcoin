{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011",
    "id": 2677902759,
    "node_id": "PR_kwDOABII586fnY2n",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/33011",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/33011.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/33011.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33011",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33011/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
    "number": 33011,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "log: rate limiting followups",
    "user": {
      "login": "Crypt-iQ",
      "id": 15145615,
      "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
      "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Crypt-iQ",
      "html_url": "https://github.com/Crypt-iQ",
      "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
      "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
      "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
      "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
      "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Followups to #32604.\r\n\r\nThe only behavior change is that prefixing with `[*]` is done to all logs (regardless of `should_ratelimit`) per https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2195710943. This does not need a release note as the release notes were already a bit vague as pointed out in the comment.",
    "labels": [
      {
        "id": 241832923,
        "node_id": "MDU6TGFiZWwyNDE4MzI5MjM=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Utils/log/libs",
        "name": "Utils/log/libs",
        "description": "",
        "color": "5319e7",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/72",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/72",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/72/labels",
      "id": 12172984,
      "node_id": "MI_kwDOABII584Aub64",
      "number": 72,
      "state": "open",
      "title": "30.0",
      "description": "",
      "creator": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "open_issues": 11,
      "closed_issues": 37,
      "created_at": "2025-01-15T19:21:36Z",
      "updated_at": "2025-07-23T22:19:05Z"
    },
    "created_at": "2025-07-18T18:00:57Z",
    "updated_at": "2025-07-23T22:19:05Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "974bbeaf1a546846f73535283fa95e578e6c9d6d",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Crypt-iQ:32604_followup_07152025",
      "ref": "32604_followup_07152025",
      "sha": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 79155174,
        "node_id": "MDEwOlJlcG9zaXRvcnk3OTE1NTE3NA==",
        "name": "bitcoin",
        "full_name": "Crypt-iQ/bitcoin",
        "owner": {
          "login": "Crypt-iQ",
          "id": 15145615,
          "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
          "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Crypt-iQ",
          "html_url": "https://github.com/Crypt-iQ",
          "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
          "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
          "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
          "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
          "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Crypt-iQ/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Crypt-iQ/bitcoin",
        "archive_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Crypt-iQ/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Crypt-iQ/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Crypt-iQ/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/hooks",
        "svn_url": "https://github.com/Crypt-iQ/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 260094,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-21T14:54:12Z",
        "created_at": "2017-01-16T20:09:01Z",
        "updated_at": "2025-06-09T13:37:15Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "11c6a864c9ee3a9bbd65720517fd22c155fd9060",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37565,
        "stargazers_count": 84707,
        "watchers_count": 84707,
        "size": 289351,
        "default_branch": "master",
        "open_issues_count": 762,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-23T20:29:15Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-23T21:44:25Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 134,
    "deletions": 134,
    "changed_files": 4,
    "commits": 7,
    "review_comments": 8,
    "comments": 4
  },
  "events": [
    {
      "event": "labeled",
      "id": 18705122224,
      "node_id": "LE_lADOABII587BWvuGzwAAAARa6YOw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18705122224",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T18:01:01Z",
      "label": {
        "name": "Utils/log/libs",
        "color": "5319e7"
      }
    },
    {
      "event": "commented",
      "id": 3090251611,
      "node_id": "IC_kwDOABII5864MX9b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3090251611",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T18:01:03Z",
      "updated_at": "2025-07-18T18:01:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/33011.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#issuecomment-3090251611",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33011"
    },
    {
      "event": "commented",
      "id": 3090274955,
      "node_id": "IC_kwDOABII5864MdqL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3090274955",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T18:11:10Z",
      "updated_at": "2025-07-23T19:00:07Z",
      "author_association": "CONTRIBUTOR",
      "body": "Addressed in this PR:\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188529752\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2163341392\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2163349298\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2182919153\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2185313756\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188155450\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188156156\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188158176\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188159134\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188161714\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188231409\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188256330\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188285962\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188544998\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188548959\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2194330070\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2195710943\r\n\r\nNot addressed:\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2115869345\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188158709\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188237233\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188643445\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188644325\r\n  - The comment for `MakeUCharSpan` says that it works with unsigned char and `file_name()` uses bare char -- this was concerning. Also, `CSipHasher& Write(uint64_t data)` may only be used if a [multiple of 8 bytes have been written so far](https://github.com/bitcoin/bitcoin/blob/11c6a864c9ee3a9bbd65720517fd22c155fd9060/src/crypto/siphash.h#L26-L28).\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188651877\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188652258\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2194621936\r\n  - Removed `BOOST_CHECK_THROW` and `BOOST_CHECK_NO_THROW`, so no longer relevant.\r\n- https://github.com/bitcoin/bitcoin/pull/32604#issuecomment-3054117201\r\n- https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188225785\r\n  - Not convinced recursion is bad in this case.\r\n\r\nThe comment links under \"Not addressed\" _without_ rationale are all good to implement, but I did want to limit 1) the number of commits and 2) the amount of new logic a reviewer would have to go through.\r\n",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#issuecomment-3090274955",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33011"
    },
    {
      "event": "labeled",
      "id": 18706251434,
      "node_id": "LE_lADOABII587BWvuGzwAAAARa-r6q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18706251434",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T19:24:14Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3090499446,
      "node_id": "IC_kwDOABII5864NUd2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3090499446",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-18T19:24:17Z",
      "updated_at": "2025-07-18T19:24:17Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `previous releases, depends DEBUG`: https://github.com/bitcoin/bitcoin/runs/46279969042</sub>\n<sub>LLM reason (✨ experimental): Build error due to incomplete type in std::pair's second member caused by missing full definition of BCLog::LogRateLimiter::Stats.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#issuecomment-3090499446",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33011"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18709353385,
      "node_id": "HRFPE_lADOABII587BWvuGzwAAAARbKhOp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18709353385",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e76466af75bf92ad7113e209b31a08c1c04ccf08",
      "commit_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/commits/e76466af75bf92ad7113e209b31a08c1c04ccf08",
      "created_at": "2025-07-19T02:22:52Z"
    },
    {
      "event": "unlabeled",
      "id": 18709589758,
      "node_id": "UNLE_lADOABII587BWvuGzwAAAARbLa7-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18709589758",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-19T03:28:43Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk5ODUxMDQzYjdjZTI4OWM2ZWUyOTk3ZDY2YmJlYmE2M2YxYmMwMTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99851043b7ce289c6ee2997d66bbeba63f1bc011",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/99851043b7ce289c6ee2997d66bbeba63f1bc011",
      "tree": {
        "sha": "ee3962e50214918cf0c3cd4feb2822f0188b2ab8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ee3962e50214918cf0c3cd4feb2822f0188b2ab8"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree ee3962e50214918cf0c3cd4feb2822f0188b2ab8\nparent 11c6a864c9ee3a9bbd65720517fd22c155fd9060\nauthor Eugene Siegel <elzeigel@gmail.com> 1752845270 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109636 -0400\n\ntest: remove noexcept(false) comment in ~DebugLogHelper\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIQACgkQEYdZ6DQ5\nqbGSeAgApMeq7uP6Yy1mqsBHfCTQWVBMRA7VgEmz/bwq+x/uI4xqxVxZAD9GAFyR\nNPCPptmltxbaxFPL86pMoadcbYwCN+2f8hF9o31gZ7pltoG7xtvJr8XZUYkVO23/\nCPtwfG3IsDeZBI4GUjhJratn+S5cI1ubslxvxhIrwDFr4H+VP7Nx/0C1TjjRXkiP\ncg1aRl47Khy8KJh12vqukxSuXitaz3ue/ApWeZMvRzUrmlCWlsye7aTxbzzxJSXd\n4ugI8YYD3anzvwpPM30WSGXo7UmL+zBE2aUaKySyOqjiWa2ofpkSVLZKwgU2RWfb\nDHghBG1HnxjxHxmCQSLeF9SvSwrXZA==\n=6Vz2\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/11c6a864c9ee3a9bbd65720517fd22c155fd9060",
          "sha": "11c6a864c9ee3a9bbd65720517fd22c155fd9060",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/11c6a864c9ee3a9bbd65720517fd22c155fd9060"
        }
      ],
      "message": "test: remove noexcept(false) comment in ~DebugLogHelper",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:56Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T13:27:50Z"
      },
      "sha": "99851043b7ce289c6ee2997d66bbeba63f1bc011"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQxOTAyZTczOWU3MzdkNDBiYTVlN2NjMWIzZjg5YzAyNjNlZDYyOGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/41902e739e737d40ba5e7cc1b3f89c0263ed628a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/41902e739e737d40ba5e7cc1b3f89c0263ed628a",
      "tree": {
        "sha": "53a66618e91fe81a869b8831099d7f3a6f47a52a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/53a66618e91fe81a869b8831099d7f3a6f47a52a"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 53a66618e91fe81a869b8831099d7f3a6f47a52a\nparent 99851043b7ce289c6ee2997d66bbeba63f1bc011\nauthor Eugene Siegel <elzeigel@gmail.com> 1752846223 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109636 -0400\n\nlog: remove const qualifier from arguments in LogPrintFormatInternal\n\nCo-Authored-By: l0rinc <pap.lorinc@gmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIQACgkQEYdZ6DQ5\nqbHQ8wf+I+kVutYTAh06aEYBvWmv25geMNbi5ExoUBaQsJjZx8qQ9oCSFQWIBc1y\ntl5XMsDeRiX6iE5oQPslkijI3UAvjjfdGT6JekccWzpo5JvfvqXVYlZd68zWvrAW\nLtMHJVcdx2tzzO75/2XETaGHCVeLT3c8wFVqwPxGCHrUytg8bQ62R4YsDW7bTTaZ\nQAmX2XQnTESmzFnoe+BDEzXLGAh6+MWUBtzMDUUbYGMz5j7+9dpi4XRrpSeUneiC\ni0vOMF40Npp3l0tZsmk9XFouy3FnWVCJk+n5eap/c6k1kVJXDGttZJBgnPwtZiUr\nFIrw6H08Qgw+H9I4eTit5vMouOasmQ==\n=0ngz\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99851043b7ce289c6ee2997d66bbeba63f1bc011",
          "sha": "99851043b7ce289c6ee2997d66bbeba63f1bc011",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/99851043b7ce289c6ee2997d66bbeba63f1bc011"
        }
      ],
      "message": "log: remove const qualifier from arguments in LogPrintFormatInternal\n\nCo-Authored-By: l0rinc <pap.lorinc@gmail.com>",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:56Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T13:43:43Z"
      },
      "sha": "41902e739e737d40ba5e7cc1b3f89c0263ed628a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM1NTg1YzU0YjU3YmJiMDViZmM0ZGU2Mzg4MGMxNzY3OTMxZTM2OTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/35585c54b57bbb05bfc4de63880c1767931e3696",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/35585c54b57bbb05bfc4de63880c1767931e3696",
      "tree": {
        "sha": "401ce8186f191a926039e6c6e74810398f77db94",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/401ce8186f191a926039e6c6e74810398f77db94"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 401ce8186f191a926039e6c6e74810398f77db94\nparent 41902e739e737d40ba5e7cc1b3f89c0263ed628a\nauthor Eugene Siegel <elzeigel@gmail.com> 1752847475 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109636 -0400\n\nlog: clarify RATELIMIT_MAX_BYTES comment\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIQACgkQEYdZ6DQ5\nqbG5QwgAoGSOM7ZKkxoR/g1ANnSNKsx8XlgjkL6W6NqefQF1EVk6fBjZ5HI2efyQ\nyu2CoIcFap9eFos2pGp7LaYjtE+WEiRxvVOaF7sDGtq0SZH0Wis/R4ZiMaR8jDeq\n/rzxFR74UIuI62a85ns8fNgvUIMSQREIfneNoYoTPZciT7HkEbhW6cVBbaNMkZ5j\n8MxjZ5UL5WeUWReh02xqAybFWGarzshyF3WXrRtIsSQHzYhGTPQcWZ6L6NxaGqs0\nBz1fk+BmNrdGqrtGgBRyw0SEw4Hv5Ir6hITGSdEU+8z4qnQqUYqY8RBWFOzulj6d\nXQPCqdb6Ec4KzXoIBcK91uhVLjy5hg==\n=zhqf\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/41902e739e737d40ba5e7cc1b3f89c0263ed628a",
          "sha": "41902e739e737d40ba5e7cc1b3f89c0263ed628a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/41902e739e737d40ba5e7cc1b3f89c0263ed628a"
        }
      ],
      "message": "log: clarify RATELIMIT_MAX_BYTES comment",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:56Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T14:04:35Z"
      },
      "sha": "35585c54b57bbb05bfc4de63880c1767931e3696"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1MTA4NDRlMWEwYTU1OGI2MDU3ZDZiNmZlZmY2NzNjYzYxNDIxNjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b510844e1a0a558b6057d6b6feff673cc6142167",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b510844e1a0a558b6057d6b6feff673cc6142167",
      "tree": {
        "sha": "00e5e5c01fbff44d9ceb127c9ec32a851c6115be",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/00e5e5c01fbff44d9ceb127c9ec32a851c6115be"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 00e5e5c01fbff44d9ceb127c9ec32a851c6115be\nparent 35585c54b57bbb05bfc4de63880c1767931e3696\nauthor Eugene Siegel <elzeigel@gmail.com> 1752848339 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109637 -0400\n\nlog: change LogLimitStats to struct LogRateLimiter::Stats\n\nClean up the noisy LogLimitStats and remove references to the time\nwindow.\n\nCo-Authored-By: stickies-v <stickies-v@protonmail.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIUACgkQEYdZ6DQ5\nqbGGbAgAiYaYmJH0/RrGQ6s6WsSu0rzKw/kC4EsX6c49rRGKU3ypLh2QvvPv42+E\nDz+S0RiXMdK0Pl3ld2FGOgN/IEgDgHdSQr/XibJo3YHby1LEt3bXGbQ9INygZ2a5\npnsrozkoqegRGBS0pDsPPpsUPaIt3CAQGUVueJ5fYT0zY03O+piW+SQaLrvF0Yu/\n92xQxf/r32s5qaFbPMkx959h+SJ+IihKUY6SQ2mWQrmqM/YBdA50h9am91lAIbLE\nOuos5yBy4tgfCdNpvBwZkeFeJ6A8UAAsgMAVFC7B/UG4S1CwSh9e9ps1BbCGtGQG\ndHDLN18fv1f3haFrD0Phl5XNBe7aSA==\n=+8Mq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/35585c54b57bbb05bfc4de63880c1767931e3696",
          "sha": "35585c54b57bbb05bfc4de63880c1767931e3696",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/35585c54b57bbb05bfc4de63880c1767931e3696"
        }
      ],
      "message": "log: change LogLimitStats to struct LogRateLimiter::Stats\n\nClean up the noisy LogLimitStats and remove references to the time\nwindow.\n\nCo-Authored-By: stickies-v <stickies-v@protonmail.com>",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:57Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T14:18:59Z"
      },
      "sha": "b510844e1a0a558b6057d6b6feff673cc6142167"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGRlZTA5ZDllZjk2Mzc1ZDBjZDQxMjlhN2Y3Y2M0NWM2YWY3M2EwNDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dee09d9ef96375d0cd4129a7f7cc45c6af73a047",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/dee09d9ef96375d0cd4129a7f7cc45c6af73a047",
      "tree": {
        "sha": "3117b8eadb7ed4fc3d78e5fedd2735efbb7d597b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3117b8eadb7ed4fc3d78e5fedd2735efbb7d597b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3117b8eadb7ed4fc3d78e5fedd2735efbb7d597b\nparent b510844e1a0a558b6057d6b6feff673cc6142167\nauthor Eugene Siegel <elzeigel@gmail.com> 1752849585 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109637 -0400\n\nlog: clean up LogPrintStr_ and Reset, prefix all logs with \"[*]\" when there are suppressions\n\nIn LogPrintStr_:\n- remove an unnecessary BCLog since we are in the BCLog namespace.\n- remove an unnecessary \\n when rate limiting is triggered since\n  FormatLogStrInPlace will add it.\n- move the ratelimit bool into an else if block.\n- prefix all log lines with [*] when suppressions exist. Previously this\n  was only done if should_ratelimit was true.\n\nIn Reset:\n- remove an unnecessary \\n since FormatLogStrInPlace will add it.\n- Change Level::Info to Level::Warning.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIUACgkQEYdZ6DQ5\nqbEQKQf/dUF+meuWw4GT5TKMGrxoijaLZ5e/FrSEiTMHOkSwQyP/srvnAa/Mj6NL\n0ifgDHqpMuiX7VYiJA1T6eOUMQoU47fgNA3QH6Eqi79ZpfWkWdFrlg7Opea52Mzk\nqOlEg7kQ5L7DlqZd+RzScI7ruWWzadhoB/0okuGqwNHc2gyA3ygtAYbvc3S/jRLS\nwC3zLCS5ypwrq+Iw3iT/WUAY/B0KSqNGlCWcdKf0d7yMhY/x7Qi0/hz0TgqHSBaM\nCx6geQOOTI1u5ALEc0UV/oGHoRhVgVngnPTAehj6WMeh1fDcxDcuDUcTxBkZaheX\nQxLZ3a5t2WkG0GmyerYIZ3Bof8n6jw==\n=QzBk\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b510844e1a0a558b6057d6b6feff673cc6142167",
          "sha": "b510844e1a0a558b6057d6b6feff673cc6142167",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b510844e1a0a558b6057d6b6feff673cc6142167"
        }
      ],
      "message": "log: clean up LogPrintStr_ and Reset, prefix all logs with \"[*]\" when there are suppressions\n\nIn LogPrintStr_:\n- remove an unnecessary BCLog since we are in the BCLog namespace.\n- remove an unnecessary \\n when rate limiting is triggered since\n  FormatLogStrInPlace will add it.\n- move the ratelimit bool into an else if block.\n- prefix all log lines with [*] when suppressions exist. Previously this\n  was only done if should_ratelimit was true.\n\nIn Reset:\n- remove an unnecessary \\n since FormatLogStrInPlace will add it.\n- Change Level::Info to Level::Warning.",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:57Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T14:39:45Z"
      },
      "sha": "dee09d9ef96375d0cd4129a7f7cc45c6af73a047"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhiNDEwM2MxNjFkZDM5MGE3YTQ0NmVlYjliZWUyYzdkMGQ0NGFkNWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b",
      "tree": {
        "sha": "7122597c932c850da937d8fabd3958b5753b4994",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7122597c932c850da937d8fabd3958b5753b4994"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7122597c932c850da937d8fabd3958b5753b4994\nparent dee09d9ef96375d0cd4129a7f7cc45c6af73a047\nauthor Eugene Siegel <elzeigel@gmail.com> 1752849654 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109637 -0400\n\ntest: clean up logging_log_rate_limiter test\n\nUse brace initialization and types over auto.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIUACgkQEYdZ6DQ5\nqbHF0AgAj43pcQc5pty5LbkY0UE238DB6NcsH4KnXhu4JL6EbBuvLsvvVPc+e3Cy\nGBc5OnDGyhEYUNEe4E/xrreNqbKrRCDUtEh/bl//4QNzr4myzKiLH2tIfGPBopux\nn/TXkPGGyc6M+VbOt9n4aoiwekcps4UcJXOwlp1sblp1gFptiqm0HoUSq1Y+jy+V\nrQZhxCxwqEHZRrdyhtT02ZwIL4Rprq34rRWraKRa+hqvFBu0/iuKoI4Sa6ooVSiw\nj7hQ94/BRKf/DDSGVkBm1MNnZ2K0dtr3ilNppfqn9WXVCiP4nphk4e1bd8jukCJI\namkmtmbdQFBhmOCzEaP/HRUSqEYWUw==\n=ZWur\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/dee09d9ef96375d0cd4129a7f7cc45c6af73a047",
          "sha": "dee09d9ef96375d0cd4129a7f7cc45c6af73a047",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/dee09d9ef96375d0cd4129a7f7cc45c6af73a047"
        }
      ],
      "message": "test: clean up logging_log_rate_limiter test\n\nUse brace initialization and types over auto.",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:57Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T14:40:54Z"
      },
      "sha": "8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQwYjNhODBiN2Y2ZjhiMjZlZDQwNjkzNzg5NjFhNzZiNTNhMjFjYmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "tree": {
        "sha": "d41d4a180f25ad203d25c8aebbb4ed50025ee66d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d41d4a180f25ad203d25c8aebbb4ed50025ee66d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d41d4a180f25ad203d25c8aebbb4ed50025ee66d\nparent 8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b\nauthor Eugene Siegel <elzeigel@gmail.com> 1752849740 -0400\ncommitter Eugene Siegel <elzeigel@gmail.com> 1753109637 -0400\n\ntest: clean up logging_filesize_rate_limit, LogFromLocation*\n\n- Introduce `enum class Location` in place of magic ints and use\n  this in LogFromLocation and LogFromLocationAndExpect.\n- Change LogFromLocation to use LogDebug and LogPrintLevel_ (with\n  should_ratelimit=false) to test that these functions may bypass\n  the rate limiting logic.\n- Use brace initialization where applicable.\n- Replace auto usage with explicit types.\n- Remove unnecessary comments.\n- Replace BOOST_CHECK_MESSAGE with BOOST_CHECK.\n- Remove confusing BOOST_CHECK_NO_THROW and BOOST_CHECK_THROW.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCAAdFiEEfoHva5mJqcyTiEgDEYdZ6DQ5qbEFAmh+VIUACgkQEYdZ6DQ5\nqbGMggf+Ls9RcRY0ZKPpnierZ6eMbZ51V1R8I8XqOumi4rjbQyx4y0qVqRvl3nYB\nC+qxhfQMsrtP1vPHFq4lCP0JmvJmlHmJUYa2AaYnWkeDOq7Aj+Nl6TVgVeOjSmzW\nfzGOJAjC1FUrhoRTxZhVOqYldD+6U1FYl/ksQ1/BOKPSLDCjDnI+nsGMw/1XZCG/\n9w5wmEs8tv8UoNMLnZ3lSQrUBAp+XACSocK0y2PTbkZFRaHLWuGj3wCfhaD5CIpv\ngR2SBGPnrhdr9OHP2qbXm+uFF3FQgVzAGvsSgRv+d7SHiWBip372PVA/5OsdPSYi\n3E0R8CeRoH9jio08WT0EjSD/budZhw==\n=de3C\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b",
          "sha": "8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8b4103c161dd390a7a446eeb9bee2c7d0d44ad5b"
        }
      ],
      "message": "test: clean up logging_filesize_rate_limit, LogFromLocation*\n\n- Introduce `enum class Location` in place of magic ints and use\n  this in LogFromLocation and LogFromLocationAndExpect.\n- Change LogFromLocation to use LogDebug and LogPrintLevel_ (with\n  should_ratelimit=false) to test that these functions may bypass\n  the rate limiting logic.\n- Use brace initialization where applicable.\n- Replace auto usage with explicit types.\n- Remove unnecessary comments.\n- Replace BOOST_CHECK_MESSAGE with BOOST_CHECK.\n- Remove confusing BOOST_CHECK_NO_THROW and BOOST_CHECK_THROW.",
      "committer": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-21T14:53:57Z"
      },
      "author": {
        "name": "Eugene Siegel",
        "email": "elzeigel@gmail.com",
        "date": "2025-07-18T14:42:20Z"
      },
      "sha": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18730976105,
      "node_id": "HRFPE_lADOABII587BWvuGzwAAAARcdANp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18730976105",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "commit_url": "https://api.github.com/repos/Crypt-iQ/bitcoin/commits/d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "created_at": "2025-07-21T14:54:13Z"
    },
    {
      "event": "ready_for_review",
      "id": 18734297218,
      "node_id": "RFRE_lADOABII587BWvuGzwAAAARcprCC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18734297218",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-21T18:02:30Z"
    },
    {
      "event": "commented",
      "id": 3107517948,
      "node_id": "IC_kwDOABII5865OPX8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3107517948",
      "actor": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T11:55:42Z",
      "updated_at": "2025-07-23T11:55:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "cc @stickies-v @l0rinc",
      "user": {
        "login": "Crypt-iQ",
        "id": 15145615,
        "node_id": "MDQ6VXNlcjE1MTQ1NjE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/15145615?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Crypt-iQ",
        "html_url": "https://github.com/Crypt-iQ",
        "followers_url": "https://api.github.com/users/Crypt-iQ/followers",
        "following_url": "https://api.github.com/users/Crypt-iQ/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Crypt-iQ/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Crypt-iQ/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Crypt-iQ/subscriptions",
        "organizations_url": "https://api.github.com/users/Crypt-iQ/orgs",
        "repos_url": "https://api.github.com/users/Crypt-iQ/repos",
        "events_url": "https://api.github.com/users/Crypt-iQ/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Crypt-iQ/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#issuecomment-3107517948",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/33011"
    },
    {
      "event": "mentioned",
      "id": 18772626609,
      "node_id": "MEE_lADOABII587BWvuGzwAAAARe74yx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18772626609",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T11:55:44Z"
    },
    {
      "event": "subscribed",
      "id": 18772626632,
      "node_id": "SE_lADOABII587BWvuGzwAAAARe74zI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18772626632",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T11:55:44Z"
    },
    {
      "event": "mentioned",
      "id": 18772626655,
      "node_id": "MEE_lADOABII587BWvuGzwAAAARe74zf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18772626655",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T11:55:44Z"
    },
    {
      "event": "subscribed",
      "id": 18772626678,
      "node_id": "SE_lADOABII587BWvuGzwAAAARe74z2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18772626678",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T11:55:44Z"
    },
    {
      "event": "reviewed",
      "id": 3046739749,
      "node_id": "PRR_kwDOABII5861mY8l",
      "url": null,
      "actor": null,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "code lgtm 8aa2726f1cfbc1e4267a796cb000c4eeae5910f5 - but would like to see if we can make improvements on the [`m_limiter` lifetime guarantees](https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2226684372), and on the [`logging_filesize_rate_limit` tests](https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2226805223). Both are not essential, but I think it could make sense to include them here.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#pullrequestreview-3046739749",
      "submitted_at": "2025-07-23T22:12:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
    },
    {
      "event": "milestoned",
      "id": 18783601899,
      "node_id": "MIE_lADOABII587BWvuGzwAAAARflwTr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18783601899",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-23T22:19:05Z",
      "milestone": {
        "title": "30.0"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225128347",
      "pull_request_review_id": 3046739749,
      "id": 2225128347,
      "node_id": "PRRC_kwDOABII586EoMOb",
      "diff_hunk": "@@ -104,46 +104,30 @@ namespace BCLog {\n     };\n     constexpr auto DEFAULT_LOG_LEVEL{Level::Debug};\n     constexpr size_t DEFAULT_MAX_LOG_BUFFER{1'000'000}; // buffer up to 1MB of log data prior to StartLogging\n-    constexpr uint64_t RATELIMIT_MAX_BYTES{1024 * 1024}; // maximum number of bytes that can be logged within one window\n+    constexpr uint64_t RATELIMIT_MAX_BYTES{1024 * 1024}; // maximum number of bytes per source location that can be logged within the specified time-window",
      "path": "src/logging.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit on 35585c54b57bbb05bfc4de63880c1767931e3696: more consistent parameterise both:\r\n\r\n<details>\r\n<summary>git diff on d0b3a80b7f</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 63244c802e..863b2e088e 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1382,7 +1382,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n     LogInstance().SetRateLimiting(std::make_unique<BCLog::LogRateLimiter>(\r\n         [&scheduler](auto func, auto window) { scheduler.scheduleEvery(std::move(func), window); },\r\n         BCLog::RATELIMIT_MAX_BYTES,\r\n-        1h));\r\n+        BCLog::RATELIMIT_WINDOW));\r\n \r\n     assert(!node.validation_signals);\r\n     node.validation_signals = std::make_unique<ValidationSignals>(std::make_unique<SerialTaskRunner>(scheduler));\r\ndiff --git a/src/logging.h b/src/logging.h\r\nindex 5437d73c78..a2cbbf51f7 100644\r\n--- a/src/logging.h\r\n+++ b/src/logging.h\r\n@@ -104,7 +104,8 @@ namespace BCLog {\r\n     };\r\n     constexpr auto DEFAULT_LOG_LEVEL{Level::Debug};\r\n     constexpr size_t DEFAULT_MAX_LOG_BUFFER{1'000'000}; // buffer up to 1MB of log data prior to StartLogging\r\n-    constexpr uint64_t RATELIMIT_MAX_BYTES{1024 * 1024}; // maximum number of bytes per source location that can be logged within the specified time-window\r\n+    constexpr uint64_t RATELIMIT_MAX_BYTES{1024 * 1024}; // maximum number of bytes per source location that can be logged within the RATELIMIT_WINDOW\r\n+    constexpr auto RATELIMIT_WINDOW{1h}; // time window after which log ratelimit stats are reset\r\n \r\n     //! Fixed window rate limiter for logging.\r\n     class LogRateLimiter\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2025-07-23T10:42:48Z",
      "updated_at": "2025-07-23T22:12:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2225128347",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225128347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 107,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225156552",
      "pull_request_review_id": 3046739749,
      "id": 2225156552,
      "node_id": "PRRC_kwDOABII586EoTHI",
      "diff_hunk": "@@ -307,13 +307,15 @@ BOOST_AUTO_TEST_CASE(logging_log_rate_limiter)\n     CScheduler scheduler{};\n     scheduler.m_service_thread = std::thread([&scheduler] { scheduler.serviceQueue(); });\n     uint64_t max_bytes{1024};\n-    auto reset_window{1min};\n-    auto sched_func = [&scheduler](auto func, auto window) { scheduler.scheduleEvery(std::move(func), window); };\n+    std::chrono::minutes reset_window{1};\n+    BCLog::LogRateLimiter::SchedulerFunction sched_func{[&scheduler](std::function<void()> func, std::chrono::milliseconds window) {\n+        scheduler.scheduleEvery(std::move(func), window);\n+    }};\n     BCLog::LogRateLimiter limiter{sched_func, max_bytes, reset_window};\n \n     using Status = BCLog::LogRateLimiter::Status;\n-    auto source_loc_1{std::source_location::current()};\n-    auto source_loc_2{std::source_location::current()};\n+    std::source_location source_loc_1{std::source_location::current()};\n+    std::source_location source_loc_2{std::source_location::current()};",
      "path": "src/test/logging_tests.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: `auto` can sometimes make things less readable, but I think in all of these changes that's not the case. Repeating types (e.g. `std::source_location source_loc_1{std::source_location::current()}` is just overly verbose imo), and for the others the name/literal is already explanatory. For `sched_func`, I think the logic is now drowned in rather unimportant type definitions. I think this addresses [this comment](https://github.com/bitcoin/bitcoin/pull/32604#discussion_r2188256330), but I personally don't think there's anything wrong with mixing `auto` and explicit types, we should use whichever is most appropriate at each time imo.",
      "created_at": "2025-07-23T10:55:15Z",
      "updated_at": "2025-07-23T22:12:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2225156552",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225156552"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": 310,
      "original_start_line": 310,
      "start_side": "RIGHT",
      "line": 318,
      "original_line": 318,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225171353",
      "pull_request_review_id": 3046739749,
      "id": 2225171353,
      "node_id": "PRRC_kwDOABII586EoWuZ",
      "diff_hunk": "@@ -348,122 +350,137 @@ BOOST_AUTO_TEST_CASE(logging_log_rate_limiter)\n \n BOOST_AUTO_TEST_CASE(logging_log_limit_stats)\n {\n-    BCLog::LogLimitStats counter{BCLog::RATELIMIT_MAX_BYTES};\n+    BCLog::LogRateLimiter::Stats stats(BCLog::RATELIMIT_MAX_BYTES);\n \n-    // Check that counter gets initialized correctly.\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    // Check that stats gets initialized correctly.\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    const uint64_t MESSAGE_SIZE{512 * 1024};\n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    const uint64_t MESSAGE_SIZE{BCLog::RATELIMIT_MAX_BYTES / 2};\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    // Consuming more bytes after already having consumed 1MB should fail.\n-    BOOST_CHECK(!counter.Consume(500));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), 0ull);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 500ull);\n+    // Consuming more bytes after already having consumed RATELIMIT_MAX_BYTES should fail.\n+    BOOST_CHECK(!stats.Consume(500));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, uint64_t{0});\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{500});\n }\n \n-void LogFromLocation(int location, std::string message)\n-{\n+namespace {\n+\n+enum class Location {\n+    FIRST,",
      "path": "src/test/logging_tests.cpp",
      "position": 74,
      "original_position": 74,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: using descriptive names might make more sense, e.g. `INFO_1`, `INFO_2`, `DEBUG`, `INFO_NOLIMIT`",
      "created_at": "2025-07-23T11:00:48Z",
      "updated_at": "2025-07-23T22:12:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2225171353",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225171353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 377,
      "original_line": 377,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225184386",
      "pull_request_review_id": 3046739749,
      "id": 2225184386,
      "node_id": "PRRC_kwDOABII586EoZ6C",
      "diff_hunk": "@@ -348,122 +350,137 @@ BOOST_AUTO_TEST_CASE(logging_log_rate_limiter)\n \n BOOST_AUTO_TEST_CASE(logging_log_limit_stats)\n {\n-    BCLog::LogLimitStats counter{BCLog::RATELIMIT_MAX_BYTES};\n+    BCLog::LogRateLimiter::Stats stats(BCLog::RATELIMIT_MAX_BYTES);\n \n-    // Check that counter gets initialized correctly.\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    // Check that stats gets initialized correctly.\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    const uint64_t MESSAGE_SIZE{512 * 1024};\n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    const uint64_t MESSAGE_SIZE{BCLog::RATELIMIT_MAX_BYTES / 2};\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    // Consuming more bytes after already having consumed 1MB should fail.\n-    BOOST_CHECK(!counter.Consume(500));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), 0ull);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 500ull);\n+    // Consuming more bytes after already having consumed RATELIMIT_MAX_BYTES should fail.\n+    BOOST_CHECK(!stats.Consume(500));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, uint64_t{0});\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{500});\n }\n \n-void LogFromLocation(int location, std::string message)\n-{\n+namespace {\n+\n+enum class Location {\n+    FIRST,\n+    SECOND,\n+    THIRD,\n+    FOURTH,\n+};\n+\n+void LogFromLocation(Location location, const std::string& message) {\n     switch (location) {\n-    case 0:\n+    case Location::FIRST:\n         LogInfo(\"%s\\n\", message);\n-        break;\n-    case 1:\n+        return;\n+    case Location::SECOND:\n         LogInfo(\"%s\\n\", message);\n-        break;\n-    case 2:\n-        LogPrintLevel(BCLog::LogFlags::NONE, BCLog::Level::Info, \"%s\\n\", message);\n-        break;\n-    case 3:\n-        LogPrintLevel(BCLog::LogFlags::ALL, BCLog::Level::Info, \"%s\\n\", message);\n-        break;\n-    }\n+        return;\n+    case Location::THIRD:\n+        LogDebug(BCLog::LogFlags::HTTP, \"%s\\n\", message);\n+        return;\n+    case Location::FOURTH:\n+        LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false, \"%s\\n\", message);\n+        return;\n+    } // no default case, so the compiler can warn about missing cases\n+    assert(false);\n }\n \n-void LogFromLocationAndExpect(int location, std::string message, std::string expect)\n-{\n+void LogFromLocationAndExpect(Location location, const std::string& message, const std::string& expect) {\n     ASSERT_DEBUG_LOG(expect);\n     LogFromLocation(location, message);\n }\n \n+} // namespace\n+\n BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\n {\n-    bool prev_log_timestamps = LogInstance().m_log_timestamps;\n+    bool prev_log_timestamps{LogInstance().m_log_timestamps};\n     LogInstance().m_log_timestamps = false;\n-    bool prev_log_sourcelocations = LogInstance().m_log_sourcelocations;\n+    bool prev_log_sourcelocations{LogInstance().m_log_sourcelocations};\n     LogInstance().m_log_sourcelocations = false;\n-    bool prev_log_threadnames = LogInstance().m_log_threadnames;\n+    bool prev_log_threadnames{LogInstance().m_log_threadnames};\n     LogInstance().m_log_threadnames = false;\n \n+    int64_t line_length{1023};",
      "path": "src/test/logging_tests.cpp",
      "position": 130,
      "original_position": 130,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: I find setting `line_length{1024}` and documenting the subtraction more straightforward:\r\n\r\n<details>\r\n<summary>git diff on d0b3a80b7f</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/logging_tests.cpp b/src/test/logging_tests.cpp\r\nindex 81c0bacba0..245940f284 100644\r\n--- a/src/test/logging_tests.cpp\r\n+++ b/src/test/logging_tests.cpp\r\n@@ -414,11 +414,10 @@ BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\r\n     bool prev_log_threadnames{LogInstance().m_log_threadnames};\r\n     LogInstance().m_log_threadnames = false;\r\n \r\n-    int64_t line_length{1023};\r\n+    int64_t line_length{1024};\r\n     int64_t num_lines{1024};\r\n \r\n-    // Add 1 to line_length because of newline.\r\n-    int64_t bytes_quota{(line_length + 1) * num_lines};\r\n+    int64_t bytes_quota{line_length * num_lines};\r\n \r\n     std::chrono::seconds time_window{20};\r\n \r\n@@ -430,7 +429,7 @@ BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\r\n     std::unique_ptr<BCLog::LogRateLimiter> limiter{std::make_unique<BCLog::LogRateLimiter>(sched_func, bytes_quota, time_window)};\r\n     LogInstance().SetRateLimiting(std::move(limiter));\r\n \r\n-    std::string log_message(line_length, 'a');\r\n+    std::string log_message(line_length - 1, 'a'); // subtract one for newline\r\n \r\n     std::string utf8_path{LogInstance().m_file_path.utf8string()};\r\n     const char* log_path{utf8_path.c_str()};\r\n\r\n```\r\n</details>\r\n\r\nAlso, constants could be marked as such. Diff including the previous suggestion:\r\n\r\n<details>\r\n<summary>git diff on d0b3a80b7f</summary>\r\n\r\n```diff\r\ndiff --git a/src/test/logging_tests.cpp b/src/test/logging_tests.cpp\r\nindex 81c0bacba0..62c92287dd 100644\r\n--- a/src/test/logging_tests.cpp\r\n+++ b/src/test/logging_tests.cpp\r\n@@ -407,20 +407,17 @@ void LogFromLocationAndExpect(Location location, const std::string& message, con\r\n \r\n BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\r\n {\r\n-    bool prev_log_timestamps{LogInstance().m_log_timestamps};\r\n+    const bool prev_log_timestamps{LogInstance().m_log_timestamps};\r\n     LogInstance().m_log_timestamps = false;\r\n-    bool prev_log_sourcelocations{LogInstance().m_log_sourcelocations};\r\n+    const bool prev_log_sourcelocations{LogInstance().m_log_sourcelocations};\r\n     LogInstance().m_log_sourcelocations = false;\r\n-    bool prev_log_threadnames{LogInstance().m_log_threadnames};\r\n+    const bool prev_log_threadnames{LogInstance().m_log_threadnames};\r\n     LogInstance().m_log_threadnames = false;\r\n \r\n-    int64_t line_length{1023};\r\n-    int64_t num_lines{1024};\r\n-\r\n-    // Add 1 to line_length because of newline.\r\n-    int64_t bytes_quota{(line_length + 1) * num_lines};\r\n-\r\n-    std::chrono::seconds time_window{20};\r\n+    constexpr int64_t line_length{1024};\r\n+    constexpr int64_t num_lines{1024};\r\n+    constexpr int64_t bytes_quota{line_length * num_lines};\r\n+    constexpr std::chrono::seconds time_window{20};\r\n \r\n     CScheduler scheduler{};\r\n     scheduler.m_service_thread = std::thread([&] { scheduler.serviceQueue(); });\r\n@@ -430,9 +427,8 @@ BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\r\n     std::unique_ptr<BCLog::LogRateLimiter> limiter{std::make_unique<BCLog::LogRateLimiter>(sched_func, bytes_quota, time_window)};\r\n     LogInstance().SetRateLimiting(std::move(limiter));\r\n \r\n-    std::string log_message(line_length, 'a');\r\n-\r\n-    std::string utf8_path{LogInstance().m_file_path.utf8string()};\r\n+    const std::string log_message(line_length - 1, 'a'); // subtract one for newline\r\n+    const std::string utf8_path{LogInstance().m_file_path.utf8string()};\r\n     const char* log_path{utf8_path.c_str()};\r\n \r\n     // Use GetFileSize because fs::file_size may require a flush to be accurate.\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2025-07-23T11:05:10Z",
      "updated_at": "2025-07-23T22:12:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2225184386",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225184386"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 417,
      "original_line": 417,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225276727",
      "pull_request_review_id": 3046739749,
      "id": 2225276727,
      "node_id": "PRRC_kwDOABII586Eowc3",
      "diff_hunk": "@@ -348,122 +350,137 @@ BOOST_AUTO_TEST_CASE(logging_log_rate_limiter)\n \n BOOST_AUTO_TEST_CASE(logging_log_limit_stats)\n {\n-    BCLog::LogLimitStats counter{BCLog::RATELIMIT_MAX_BYTES};\n+    BCLog::LogRateLimiter::Stats stats(BCLog::RATELIMIT_MAX_BYTES);\n \n-    // Check that counter gets initialized correctly.\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    // Check that stats gets initialized correctly.\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    const uint64_t MESSAGE_SIZE{512 * 1024};\n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    const uint64_t MESSAGE_SIZE{BCLog::RATELIMIT_MAX_BYTES / 2};\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    // Consuming more bytes after already having consumed 1MB should fail.\n-    BOOST_CHECK(!counter.Consume(500));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), 0ull);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 500ull);\n+    // Consuming more bytes after already having consumed RATELIMIT_MAX_BYTES should fail.\n+    BOOST_CHECK(!stats.Consume(500));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, uint64_t{0});\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{500});\n }\n \n-void LogFromLocation(int location, std::string message)\n-{\n+namespace {\n+\n+enum class Location {\n+    FIRST,\n+    SECOND,\n+    THIRD,\n+    FOURTH,\n+};\n+\n+void LogFromLocation(Location location, const std::string& message) {\n     switch (location) {\n-    case 0:\n+    case Location::FIRST:\n         LogInfo(\"%s\\n\", message);\n-        break;\n-    case 1:\n+        return;\n+    case Location::SECOND:\n         LogInfo(\"%s\\n\", message);\n-        break;\n-    case 2:\n-        LogPrintLevel(BCLog::LogFlags::NONE, BCLog::Level::Info, \"%s\\n\", message);\n-        break;\n-    case 3:\n-        LogPrintLevel(BCLog::LogFlags::ALL, BCLog::Level::Info, \"%s\\n\", message);\n-        break;\n-    }\n+        return;\n+    case Location::THIRD:\n+        LogDebug(BCLog::LogFlags::HTTP, \"%s\\n\", message);\n+        return;\n+    case Location::FOURTH:\n+        LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false, \"%s\\n\", message);\n+        return;\n+    } // no default case, so the compiler can warn about missing cases\n+    assert(false);\n }\n \n-void LogFromLocationAndExpect(int location, std::string message, std::string expect)\n-{\n+void LogFromLocationAndExpect(Location location, const std::string& message, const std::string& expect) {\n     ASSERT_DEBUG_LOG(expect);\n     LogFromLocation(location, message);\n }\n \n+} // namespace\n+\n BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\n {\n-    bool prev_log_timestamps = LogInstance().m_log_timestamps;\n+    bool prev_log_timestamps{LogInstance().m_log_timestamps};\n     LogInstance().m_log_timestamps = false;\n-    bool prev_log_sourcelocations = LogInstance().m_log_sourcelocations;\n+    bool prev_log_sourcelocations{LogInstance().m_log_sourcelocations};\n     LogInstance().m_log_sourcelocations = false;\n-    bool prev_log_threadnames = LogInstance().m_log_threadnames;\n+    bool prev_log_threadnames{LogInstance().m_log_threadnames};\n     LogInstance().m_log_threadnames = false;\n \n+    int64_t line_length{1023};\n+    int64_t num_lines{1024};\n+\n+    // Add 1 to line_length because of newline.\n+    int64_t bytes_quota{(line_length + 1) * num_lines};\n+\n+    std::chrono::seconds time_window{20};\n+\n     CScheduler scheduler{};\n     scheduler.m_service_thread = std::thread([&] { scheduler.serviceQueue(); });\n-    auto sched_func = [&scheduler](auto func, auto window) { scheduler.scheduleEvery(std::move(func), window); };\n-    auto limiter = std::make_unique<BCLog::LogRateLimiter>(sched_func, 1024 * 1024, 20s);\n+    BCLog::LogRateLimiter::SchedulerFunction sched_func{[&scheduler](std::function<void()> func, std::chrono::milliseconds window) {\n+        scheduler.scheduleEvery(std::move(func), window);\n+    }};\n+    std::unique_ptr<BCLog::LogRateLimiter> limiter{std::make_unique<BCLog::LogRateLimiter>(sched_func, bytes_quota, time_window)};\n     LogInstance().SetRateLimiting(std::move(limiter));\n \n-    // Log 1024-character lines (1023 plus newline) to make the math simple.\n-    std::string log_message(1023, 'a');\n+    std::string log_message(line_length, 'a');\n \n     std::string utf8_path{LogInstance().m_file_path.utf8string()};\n     const char* log_path{utf8_path.c_str()};\n \n     // Use GetFileSize because fs::file_size may require a flush to be accurate.\n     std::streamsize log_file_size{static_cast<std::streamsize>(GetFileSize(log_path))};\n \n-    // Logging 1 MiB should be allowed.\n-    for (int i = 0; i < 1024; ++i) {\n-        LogFromLocation(0, log_message);\n+    for (int64_t i{0}; i < num_lines; ++i) {\n+        LogFromLocation(Location::FIRST, log_message);\n     }\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"should be able to log 1 MiB from location 0\");\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n \n     log_file_size = GetFileSize(log_path);\n-\n-    BOOST_CHECK_NO_THROW(LogFromLocationAndExpect(0, log_message, \"Excessive logging detected\"));\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"the start of the suppression period should be logged\");\n+    LogFromLocationAndExpect(Location::FIRST, log_message, \"Excessive logging detected\");\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n \n     log_file_size = GetFileSize(log_path);\n-    for (int i = 0; i < 1024; ++i) {\n-        LogFromLocation(0, log_message);\n-    }\n+    LogFromLocation(Location::FIRST, log_message);\n+    BOOST_CHECK_EQUAL(log_file_size, GetFileSize(log_path));\n \n-    BOOST_CHECK_MESSAGE(log_file_size == GetFileSize(log_path), \"all further logs from location 0 should be dropped\");\n-\n-    BOOST_CHECK_THROW(LogFromLocationAndExpect(1, log_message, \"Excessive logging detected\"), std::runtime_error);\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"location 1 should be unaffected by other locations\");\n+    log_file_size = GetFileSize(log_path);\n+    LogFromLocation(Location::SECOND, log_message);\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n \n     log_file_size = GetFileSize(log_path);\n     {\n         ASSERT_DEBUG_LOG(\"Restarting logging\");\n         MockForwardAndSync(scheduler, 1min);",
      "path": "src/test/logging_tests.cpp",
      "position": 192,
      "original_position": 192,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: use variable\r\n```suggestion\r\n        MockForwardAndSync(scheduler, time_window);\r\n```",
      "created_at": "2025-07-23T11:37:25Z",
      "updated_at": "2025-07-23T22:12:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2225276727",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225276727"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 461,
      "original_line": 461,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225484458",
      "pull_request_review_id": 3046739749,
      "id": 2225484458,
      "node_id": "PRRC_kwDOABII586EpjKq",
      "diff_hunk": "@@ -348,122 +350,137 @@ BOOST_AUTO_TEST_CASE(logging_log_rate_limiter)\n \n BOOST_AUTO_TEST_CASE(logging_log_limit_stats)\n {\n-    BCLog::LogLimitStats counter{BCLog::RATELIMIT_MAX_BYTES};\n+    BCLog::LogRateLimiter::Stats stats(BCLog::RATELIMIT_MAX_BYTES);\n \n-    // Check that counter gets initialized correctly.\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    // Check that stats gets initialized correctly.\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    const uint64_t MESSAGE_SIZE{512 * 1024};\n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    const uint64_t MESSAGE_SIZE{BCLog::RATELIMIT_MAX_BYTES / 2};\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    BOOST_CHECK(counter.Consume(MESSAGE_SIZE));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 0ull);\n+    BOOST_CHECK(stats.Consume(MESSAGE_SIZE));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, BCLog::RATELIMIT_MAX_BYTES - MESSAGE_SIZE * 2);\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{0});\n \n-    // Consuming more bytes after already having consumed 1MB should fail.\n-    BOOST_CHECK(!counter.Consume(500));\n-    BOOST_CHECK_EQUAL(counter.GetAvailableBytes(), 0ull);\n-    BOOST_CHECK_EQUAL(counter.GetDroppedBytes(), 500ull);\n+    // Consuming more bytes after already having consumed RATELIMIT_MAX_BYTES should fail.\n+    BOOST_CHECK(!stats.Consume(500));\n+    BOOST_CHECK_EQUAL(stats.available_bytes, uint64_t{0});\n+    BOOST_CHECK_EQUAL(stats.dropped_bytes, uint64_t{500});\n }\n \n-void LogFromLocation(int location, std::string message)\n-{\n+namespace {\n+\n+enum class Location {\n+    FIRST,\n+    SECOND,\n+    THIRD,\n+    FOURTH,\n+};\n+\n+void LogFromLocation(Location location, const std::string& message) {\n     switch (location) {\n-    case 0:\n+    case Location::FIRST:\n         LogInfo(\"%s\\n\", message);\n-        break;\n-    case 1:\n+        return;\n+    case Location::SECOND:\n         LogInfo(\"%s\\n\", message);\n-        break;\n-    case 2:\n-        LogPrintLevel(BCLog::LogFlags::NONE, BCLog::Level::Info, \"%s\\n\", message);\n-        break;\n-    case 3:\n-        LogPrintLevel(BCLog::LogFlags::ALL, BCLog::Level::Info, \"%s\\n\", message);\n-        break;\n-    }\n+        return;\n+    case Location::THIRD:\n+        LogDebug(BCLog::LogFlags::HTTP, \"%s\\n\", message);\n+        return;\n+    case Location::FOURTH:\n+        LogPrintLevel_(BCLog::LogFlags::ALL, BCLog::Level::Info, /*should_ratelimit=*/false, \"%s\\n\", message);\n+        return;\n+    } // no default case, so the compiler can warn about missing cases\n+    assert(false);\n }\n \n-void LogFromLocationAndExpect(int location, std::string message, std::string expect)\n-{\n+void LogFromLocationAndExpect(Location location, const std::string& message, const std::string& expect) {\n     ASSERT_DEBUG_LOG(expect);\n     LogFromLocation(location, message);\n }\n \n+} // namespace\n+\n BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\n {\n-    bool prev_log_timestamps = LogInstance().m_log_timestamps;\n+    bool prev_log_timestamps{LogInstance().m_log_timestamps};\n     LogInstance().m_log_timestamps = false;\n-    bool prev_log_sourcelocations = LogInstance().m_log_sourcelocations;\n+    bool prev_log_sourcelocations{LogInstance().m_log_sourcelocations};\n     LogInstance().m_log_sourcelocations = false;\n-    bool prev_log_threadnames = LogInstance().m_log_threadnames;\n+    bool prev_log_threadnames{LogInstance().m_log_threadnames};\n     LogInstance().m_log_threadnames = false;\n \n+    int64_t line_length{1023};\n+    int64_t num_lines{1024};\n+\n+    // Add 1 to line_length because of newline.\n+    int64_t bytes_quota{(line_length + 1) * num_lines};\n+\n+    std::chrono::seconds time_window{20};\n+\n     CScheduler scheduler{};\n     scheduler.m_service_thread = std::thread([&] { scheduler.serviceQueue(); });\n-    auto sched_func = [&scheduler](auto func, auto window) { scheduler.scheduleEvery(std::move(func), window); };\n-    auto limiter = std::make_unique<BCLog::LogRateLimiter>(sched_func, 1024 * 1024, 20s);\n+    BCLog::LogRateLimiter::SchedulerFunction sched_func{[&scheduler](std::function<void()> func, std::chrono::milliseconds window) {\n+        scheduler.scheduleEvery(std::move(func), window);\n+    }};\n+    std::unique_ptr<BCLog::LogRateLimiter> limiter{std::make_unique<BCLog::LogRateLimiter>(sched_func, bytes_quota, time_window)};\n     LogInstance().SetRateLimiting(std::move(limiter));\n \n-    // Log 1024-character lines (1023 plus newline) to make the math simple.\n-    std::string log_message(1023, 'a');\n+    std::string log_message(line_length, 'a');\n \n     std::string utf8_path{LogInstance().m_file_path.utf8string()};\n     const char* log_path{utf8_path.c_str()};\n \n     // Use GetFileSize because fs::file_size may require a flush to be accurate.\n     std::streamsize log_file_size{static_cast<std::streamsize>(GetFileSize(log_path))};\n \n-    // Logging 1 MiB should be allowed.\n-    for (int i = 0; i < 1024; ++i) {\n-        LogFromLocation(0, log_message);\n+    for (int64_t i{0}; i < num_lines; ++i) {\n+        LogFromLocation(Location::FIRST, log_message);\n     }\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"should be able to log 1 MiB from location 0\");\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n \n     log_file_size = GetFileSize(log_path);\n-\n-    BOOST_CHECK_NO_THROW(LogFromLocationAndExpect(0, log_message, \"Excessive logging detected\"));\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"the start of the suppression period should be logged\");\n+    LogFromLocationAndExpect(Location::FIRST, log_message, \"Excessive logging detected\");\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n \n     log_file_size = GetFileSize(log_path);\n-    for (int i = 0; i < 1024; ++i) {\n-        LogFromLocation(0, log_message);\n-    }\n+    LogFromLocation(Location::FIRST, log_message);\n+    BOOST_CHECK_EQUAL(log_file_size, GetFileSize(log_path));\n \n-    BOOST_CHECK_MESSAGE(log_file_size == GetFileSize(log_path), \"all further logs from location 0 should be dropped\");\n-\n-    BOOST_CHECK_THROW(LogFromLocationAndExpect(1, log_message, \"Excessive logging detected\"), std::runtime_error);\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"location 1 should be unaffected by other locations\");\n+    log_file_size = GetFileSize(log_path);\n+    LogFromLocation(Location::SECOND, log_message);\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n \n     log_file_size = GetFileSize(log_path);\n     {\n         ASSERT_DEBUG_LOG(\"Restarting logging\");\n         MockForwardAndSync(scheduler, 1min);\n     }\n-\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"the end of the suppression period should be logged\");\n-\n-    BOOST_CHECK_THROW(LogFromLocationAndExpect(1, log_message, \"Restarting logging\"), std::runtime_error);\n-\n-    // Attempt to log 1MiB from location 2 and 1MiB from location 3. These exempt locations should be allowed to log\n-    // without limit.\n-    log_file_size = GetFileSize(log_path);\n-    for (int i = 0; i < 1024; ++i) {\n-        BOOST_CHECK_THROW(LogFromLocationAndExpect(2, log_message, \"Excessive logging detected\"), std::runtime_error);\n+    BOOST_CHECK(log_file_size < GetFileSize(log_path));\n+\n+    // Check that Location::THIRD and Location::FOURTH are exempt from rate limiting.\n+    for (Location location : {Location::THIRD, Location::FOURTH}) {\n+        log_file_size = GetFileSize(log_path);\n+        for (int64_t i{0}; i < num_lines; ++i) {\n+            LogFromLocation(location, log_message);\n+        }\n+        BOOST_CHECK(log_file_size < GetFileSize(log_path));\n+\n+        // Another log statement would normally trigger the rate limit and prevent any further logs.\n+        log_file_size = GetFileSize(log_path);\n+        LogFromLocation(location, log_message);\n+        BOOST_CHECK(log_file_size < GetFileSize(log_path));\n+\n+        // Check that the rate limit is bypassed and the file size increases.\n+        log_file_size = GetFileSize(log_path);\n+        LogFromLocation(location, log_message);\n+        BOOST_CHECK(log_file_size < GetFileSize(log_path));\n     }\n \n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"location 2 should be exempt from rate limiting\");\n-\n-    log_file_size = GetFileSize(log_path);\n-    for (int i = 0; i < 1024; ++i) {\n-        BOOST_CHECK_THROW(LogFromLocationAndExpect(3, log_message, \"Excessive logging detected\"), std::runtime_error);\n-    }\n-\n-    BOOST_CHECK_MESSAGE(log_file_size < GetFileSize(log_path), \"location 3 should be exempt from rate limiting\");\n-\n     LogInstance().m_log_timestamps = prev_log_timestamps;\n     LogInstance().m_log_sourcelocations = prev_log_sourcelocations;\n     LogInstance().m_log_threadnames = prev_log_threadnames;",
      "path": "src/test/logging_tests.cpp",
      "position": 236,
      "original_position": 236,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Note: this is already handled by the `LogSetup` fixture, so I think we can remove this logic here.\r\n\r\nOn that note: I think `LogSetup` could benefit from explicitly setting `LogInstance().SetRateLimiting(nullptr);` in both its constructor and destructor?",
      "created_at": "2025-07-23T12:45:40Z",
      "updated_at": "2025-07-23T22:12:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2225484458",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2225484458"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": 484,
      "original_start_line": 484,
      "start_side": "RIGHT",
      "line": 486,
      "original_line": 486,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226684372",
      "pull_request_review_id": 3046739749,
      "id": 2226684372,
      "node_id": "PRRC_kwDOABII586EuIHU",
      "diff_hunk": "@@ -154,7 +138,7 @@ namespace BCLog {\n          *                          reset_window interval.\n          * @param max_bytes         Maximum number of bytes that can be logged for each source\n          *                          location.\n-         * @param reset_window      Time window after which the byte counters are reset.\n+         * @param reset_window      Time window after which the stats are reset.\n          */\n         LogRateLimiter(SchedulerFunction scheduler_func, uint64_t max_bytes, std::chrono::seconds reset_window);",
      "path": "src/logging.h",
      "position": 71,
      "original_position": 71,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "There are some lifetime concerns wrt `scheduler_func`, that are okay in our current codebase, but make the contract perhaps more fragile than it needs to be. Specifically: `Logger` has a `std::unique_ptr<LogRateLimiter> m_limiter` member. The node's scheduler holds [a reference](https://github.com/bitcoin/bitcoin/blob/eb137184482cea8a2a7cdfcd3c73ec6ae5fdd0d6/src/logging.cpp#L379) to the limiter. This means that the limiter may not be destroyed before the scheduler is stopped. In our current code, this is fine, because the logger is a [static global](https://github.com/bitcoin/bitcoin/blob/eb137184482cea8a2a7cdfcd3c73ec6ae5fdd0d6/src/logging.cpp#L43), so it can never be destroyed before the node is shutdown (which stops the scheduler).\r\n\r\nI ran into this dependency while reviewing / drafting my suggestion on #32604 when I was writing the test code, when I realized that writing an RAII struct (as now e.g. implemented [here](https://github.com/stickies-v/bitcoin/commit/8aa2726f1cfbc1e4267a796cb000c4eeae5910f5#diff-8c9b223f6f7e311ef2a0585813c17e4cc78119d39ef9956431164336e9158832R285-R287)) for the limiter was not really possible using the `std::unique_ptr` approach. I kept it as-is because the non-test code was fine, and I didn't want to overcomplicate things, but perhaps this follow-up is a good place to at least reconsider this.\r\n\r\nConceptually, I think it makes sense to make `m_limiter` a `std::shared_ptr` since it has two users: the thing that uses it to consume logs (in our case `Logger`), and the thing that uses it to reset stats (in our case `CScheduler`). With a shared pointer, we can safely and explicitly manage these dependencies without introducing coupling between the logger and the scheduler.\r\n\r\nAfter playing around with it, it turns out the implementation is actually rather straightforward:\r\n\r\n<details>\r\n<summary>git diff on d0b3a80b7f</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex 63244c802e..75db37397c 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -1379,7 +1379,7 @@ bool AppInitMain(NodeContext& node, interfaces::BlockAndHeaderTipInfo* tip_info)\r\n         }\r\n     }, std::chrono::minutes{5});\r\n \r\n-    LogInstance().SetRateLimiting(std::make_unique<BCLog::LogRateLimiter>(\r\n+    LogInstance().SetRateLimiting(BCLog::LogRateLimiter::Create(\r\n         [&scheduler](auto func, auto window) { scheduler.scheduleEvery(std::move(func), window); },\r\n         BCLog::RATELIMIT_MAX_BYTES,\r\n         1h));\r\ndiff --git a/src/logging.cpp b/src/logging.cpp\r\nindex e2c27ec54d..3d42bd9bc8 100644\r\n--- a/src/logging.cpp\r\n+++ b/src/logging.cpp\r\n@@ -371,12 +371,21 @@ static size_t MemUsage(const BCLog::Logger::BufferedLog& buflog)\r\n            memusage::MallocUsage(sizeof(memusage::list_node<BCLog::Logger::BufferedLog>));\r\n }\r\n \r\n-BCLog::LogRateLimiter::LogRateLimiter(\r\n-    SchedulerFunction scheduler_func,\r\n-    uint64_t max_bytes,\r\n-    std::chrono::seconds reset_window) : m_max_bytes{max_bytes}, m_reset_window{reset_window}\r\n+BCLog::LogRateLimiter::LogRateLimiter(uint64_t max_bytes, std::chrono::seconds reset_window)\r\n+    : m_max_bytes{max_bytes}, m_reset_window{reset_window} {}\r\n+\r\n+std::shared_ptr<BCLog::LogRateLimiter> BCLog::LogRateLimiter::Create(\r\n+    SchedulerFunction scheduler_func, uint64_t max_bytes, std::chrono::seconds reset_window)\r\n {\r\n-    scheduler_func([this] { Reset(); }, reset_window);\r\n+    auto limiter{std::shared_ptr<LogRateLimiter>(new LogRateLimiter(max_bytes, reset_window))};\r\n+    std::weak_ptr<LogRateLimiter> weak_limiter{limiter};\r\n+    scheduler_func([weak_limiter] {\r\n+        if (auto shared_limiter{weak_limiter.lock()}) {\r\n+            shared_limiter->Reset();\r\n+        }\r\n+    },\r\n+                   limiter->m_reset_window);\r\n+    return limiter;\r\n }\r\n \r\n BCLog::LogRateLimiter::Status BCLog::LogRateLimiter::Consume(\r\ndiff --git a/src/logging.h b/src/logging.h\r\nindex 5437d73c78..12905f1e47 100644\r\n--- a/src/logging.h\r\n+++ b/src/logging.h\r\n@@ -18,6 +18,7 @@\r\n #include <cstring>\r\n #include <functional>\r\n #include <list>\r\n+#include <memory>\r\n #include <mutex>\r\n #include <source_location>\r\n #include <string>\r\n@@ -107,7 +108,7 @@ namespace BCLog {\r\n     constexpr uint64_t RATELIMIT_MAX_BYTES{1024 * 1024}; // maximum number of bytes per source location that can be logged within the specified time-window\r\n \r\n     //! Fixed window rate limiter for logging.\r\n-    class LogRateLimiter\r\n+    class LogRateLimiter : public std::enable_shared_from_this<LogRateLimiter>\r\n     {\r\n     public:\r\n         //! Keeps track of an individual source location and how many available bytes are left for logging from it.\r\n@@ -129,6 +130,7 @@ namespace BCLog {\r\n         std::unordered_map<std::source_location, Stats, SourceLocationHasher, SourceLocationEqual> m_source_locations GUARDED_BY(m_mutex);\r\n         //! Whether any log locations are suppressed. Cached view on m_source_locations for performance reasons.\r\n         std::atomic<bool> m_suppression_active{false};\r\n+        LogRateLimiter(uint64_t max_bytes, std::chrono::seconds reset_window);\r\n \r\n     public:\r\n         using SchedulerFunction = std::function<void(std::function<void()>, std::chrono::milliseconds)>;\r\n@@ -140,7 +142,10 @@ namespace BCLog {\r\n          *                          location.\r\n          * @param reset_window      Time window after which the stats are reset.\r\n          */\r\n-        LogRateLimiter(SchedulerFunction scheduler_func, uint64_t max_bytes, std::chrono::seconds reset_window);\r\n+        static std::shared_ptr<LogRateLimiter> Create(\r\n+            SchedulerFunction scheduler_func,\r\n+            uint64_t max_bytes,\r\n+            std::chrono::seconds reset_window);\r\n         //! Maximum number of bytes logged per location per window.\r\n         const uint64_t m_max_bytes;\r\n         //! Interval after which the window is reset.\r\n@@ -160,6 +165,8 @@ namespace BCLog {\r\n         void Reset() EXCLUSIVE_LOCKS_REQUIRED(!m_mutex);\r\n         //! Returns true if any log locations are currently being suppressed.\r\n         bool SuppressionsActive() const { return m_suppression_active; }\r\n+        //! The function that is used to schedule the reset window.\r\n+        SchedulerFunction m_scheduler_func;\r\n     };\r\n \r\n     class Logger\r\n@@ -185,7 +192,7 @@ namespace BCLog {\r\n         size_t m_buffer_lines_discarded GUARDED_BY(m_cs){0};\r\n \r\n         //! Manages the rate limiting of each log location.\r\n-        std::unique_ptr<LogRateLimiter> m_limiter GUARDED_BY(m_cs);\r\n+        std::shared_ptr<LogRateLimiter> m_limiter GUARDED_BY(m_cs);\r\n \r\n         //! Category-specific log level. Overrides `m_log_level`.\r\n         std::unordered_map<LogFlags, Level> m_category_log_levels GUARDED_BY(m_cs);\r\n@@ -254,7 +261,7 @@ namespace BCLog {\r\n         /** Only for testing */\r\n         void DisconnectTestLogger() EXCLUSIVE_LOCKS_REQUIRED(!m_cs);\r\n \r\n-        void SetRateLimiting(std::unique_ptr<LogRateLimiter>&& limiter) EXCLUSIVE_LOCKS_REQUIRED(!m_cs)\r\n+        void SetRateLimiting(std::shared_ptr<LogRateLimiter> limiter) EXCLUSIVE_LOCKS_REQUIRED(!m_cs)\r\n         {\r\n             StdLockGuard scoped_lock(m_cs);\r\n             m_limiter = std::move(limiter);\r\ndiff --git a/src/test/logging_tests.cpp b/src/test/logging_tests.cpp\r\nindex 81c0bacba0..ea0297367d 100644\r\n--- a/src/test/logging_tests.cpp\r\n+++ b/src/test/logging_tests.cpp\r\n@@ -311,7 +311,8 @@ BOOST_AUTO_TEST_CASE(logging_log_rate_limiter)\r\n     BCLog::LogRateLimiter::SchedulerFunction sched_func{[&scheduler](std::function<void()> func, std::chrono::milliseconds window) {\r\n         scheduler.scheduleEvery(std::move(func), window);\r\n     }};\r\n-    BCLog::LogRateLimiter limiter{sched_func, max_bytes, reset_window};\r\n+    auto limiter_{BCLog::LogRateLimiter::Create(sched_func, max_bytes, reset_window)};\r\n+    auto& limiter{*limiter_};\r\n \r\n     using Status = BCLog::LogRateLimiter::Status;\r\n     std::source_location source_loc_1{std::source_location::current()};\r\n@@ -427,8 +428,7 @@ BOOST_FIXTURE_TEST_CASE(logging_filesize_rate_limit, LogSetup)\r\n     BCLog::LogRateLimiter::SchedulerFunction sched_func{[&scheduler](std::function<void()> func, std::chrono::milliseconds window) {\r\n         scheduler.scheduleEvery(std::move(func), window);\r\n     }};\r\n-    std::unique_ptr<BCLog::LogRateLimiter> limiter{std::make_unique<BCLog::LogRateLimiter>(sched_func, bytes_quota, time_window)};\r\n-    LogInstance().SetRateLimiting(std::move(limiter));\r\n+    LogInstance().SetRateLimiting(BCLog::LogRateLimiter::Create(sched_func, bytes_quota, time_window));\r\n \r\n     std::string log_message(line_length, 'a');\r\n \r\n\r\n```\r\n</details>\r\n\r\n\r\nWhat do you think?",
      "created_at": "2025-07-23T21:03:24Z",
      "updated_at": "2025-07-23T22:21:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2226684372",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226684372"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 143,
      "original_line": 143,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226805223",
      "pull_request_review_id": 3046739749,
      "id": 2226805223,
      "node_id": "PRRC_kwDOABII586Eulnn",
      "diff_hunk": "",
      "path": "src/test/logging_tests.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "original_commit_id": "d0b3a80b7f6f8b26ed4069378961a76b53a21cbc",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The test has definitely improved in both functionality and readability, but I find it's still quite clunky (e.g. lots of repeated code) and unspecific (e.g. using any increase in filesize as measurement, not accurately checking the (non) existence of certain log statements most of the time), so I dove into a little rabbit hole today to see what my ideal test would look like, and I think it'd be close to something like this: https://github.com/stickies-v/bitcoin/commit/e55c03bf7954122fd0a23bfb60599d19be507877. The main conceptual difference is that I added a separate function that quite exhaustively compares all the attributes of all the produced on-disk log output with its expected values. Most of the code changes then accommodates that / reduces duplication.\r\n\r\nIt has two helper commits (one already mentioned in another comment), and it also incorporates a bunch of the changes I've left in smaller comments on this PR. What do you think?\r\n",
      "created_at": "2025-07-23T22:03:47Z",
      "updated_at": "2025-07-23T22:30:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/33011#discussion_r2226805223",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2226805223"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/33011"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    }
  ]
}