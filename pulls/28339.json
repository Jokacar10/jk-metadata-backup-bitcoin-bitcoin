{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339",
    "id": 1488494172,
    "node_id": "PR_kwDOABII585YuJ5c",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28339",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28339.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28339.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/5bc2077e8f592442b089affdf0b5795fbc053bb8",
    "number": 28339,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "validation: improve performance of CheckBlockIndex",
    "user": {
      "login": "mzumsande",
      "id": 48763452,
      "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
      "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mzumsande",
      "html_url": "https://github.com/mzumsande",
      "followers_url": "https://api.github.com/users/mzumsande/followers",
      "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
      "organizations_url": "https://api.github.com/users/mzumsande/orgs",
      "repos_url": "https://api.github.com/users/mzumsande/repos",
      "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/mzumsande/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "`CheckBlockIndex() ` are consistency checks that are currently enabled by default on regtest.\r\n\r\nThe function is rather slow, which is annoying if you\r\n* attempt to run it on other networks, especially if not fully synced\r\n* want to generate a long chain on regtest and see block generation slow down because you forgot to disable `-checkblockindex` or don't know it existed.\r\n\r\nOne reason why it's slow is that in order to be able to traverse the block tree depth-first from genesis, it inserts pointers to all block indices into a `std::multimap` - for which inserts and lookups become slow once there are hundred thousands of entries.\r\nHowever, typically the block index is mostly chain-like with just a few forks so a multimap isn't really needed for the most part. This PR suggests to store the block indices of the chain ending in the best header in a vector instead, and store only the rest of the indices in a multimap. This does not change the actual consistency checks that are being performed for each index, just the way the block index tree is stored and traversed.\r\n\r\nThis adds a bit of complication to make sure each block is visited (note that there are asserts that check it), making sure that the two containers are traversed correctly, but it speeds up the function considerably:\r\n\r\nOn master, a single invocation of `CheckBlockIndex` takes ~1.4s on mainnet for me (4.9s on testnet which has >2.4 million blocks).\r\nWith this branch, the runtime goes down to ~0.27s (0.85s on testnet).This is a speedup by a factor ~5.",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2023-08-24T18:18:30Z",
    "updated_at": "2025-07-31T14:17:54Z",
    "closed_at": "2024-06-11T20:41:56Z",
    "mergeable_state": "unknown",
    "merged": true,
    "merged_at": "2024-06-11T20:41:56Z",
    "merged_by": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "merge_commit_sha": "891e4bf3740774485c40d1c1a54075a1b69d6dde",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "head": {
      "label": "mzumsande:202308_speedup_checkblockindex",
      "ref": "202308_speedup_checkblockindex",
      "sha": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 187673073,
        "node_id": "MDEwOlJlcG9zaXRvcnkxODc2NzMwNzM=",
        "name": "bitcoin",
        "full_name": "mzumsande/bitcoin",
        "owner": {
          "login": "mzumsande",
          "id": 48763452,
          "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
          "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/mzumsande",
          "html_url": "https://github.com/mzumsande",
          "followers_url": "https://api.github.com/users/mzumsande/followers",
          "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
          "organizations_url": "https://api.github.com/users/mzumsande/orgs",
          "repos_url": "https://api.github.com/users/mzumsande/repos",
          "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/mzumsande/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/mzumsande/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/mzumsande/bitcoin",
        "archive_url": "https://api.github.com/repos/mzumsande/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/mzumsande/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/mzumsande/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/mzumsande/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/mzumsande/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/mzumsande/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/mzumsande/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/mzumsande/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/mzumsande/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/mzumsande/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/mzumsande/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/mzumsande/bitcoin/events",
        "forks_url": "https://api.github.com/repos/mzumsande/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/mzumsande/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/mzumsande/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/mzumsande/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/mzumsande/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/mzumsande/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/mzumsande/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/mzumsande/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/mzumsande/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/mzumsande/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/mzumsande/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/mzumsande/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/mzumsande/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/mzumsande/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/mzumsande/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:mzumsande/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/mzumsande/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/mzumsande/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/mzumsande/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/mzumsande/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/mzumsande/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/mzumsande/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/mzumsande/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/mzumsande/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/mzumsande/bitcoin/hooks",
        "svn_url": "https://github.com/mzumsande/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 268603,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-30T17:42:25Z",
        "created_at": "2019-05-20T16:03:10Z",
        "updated_at": "2025-07-13T19:52:31Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "7973a670915632b75a6aa16f24f98b936865c48f",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37591,
        "stargazers_count": 84826,
        "watchers_count": 84826,
        "size": 289751,
        "default_branch": "master",
        "open_issues_count": 750,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-31T14:08:20Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-31T14:37:47Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 73,
    "deletions": 19,
    "changed_files": 8,
    "commits": 3,
    "review_comments": 46,
    "comments": 19
  },
  "events": [
    {
      "event": "commented",
      "id": 1692197300,
      "node_id": "IC_kwDOABII585k3OG0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1692197300",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T18:18:33Z",
      "updated_at": "2024-06-11T20:33:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28339).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2066200941), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2108028986), [achow101](https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2161560686) |\n| Concept ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1879863374) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1692197300",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "labeled",
      "id": 10184648948,
      "node_id": "LE_lADOABII585vM7wGzwAAAAJfDWj0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10184648948",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T18:18:34Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "convert_to_draft",
      "id": 10184649778,
      "node_id": "CTDE_lADOABII585vM7wGzwAAAAJfDWwy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10184649778",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-24T18:18:40Z"
    },
    {
      "event": "ready_for_review",
      "id": 10187193791,
      "node_id": "RFRE_lADOABII585vM7wGzwAAAAJfND2_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10187193791",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-25T00:42:32Z"
    },
    {
      "event": "commented",
      "id": 1693443871,
      "node_id": "IC_kwDOABII585k7-cf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693443871",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-25T14:22:25Z",
      "updated_at": "2023-08-25T14:22:25Z",
      "author_association": "MEMBER",
      "body": "cc @martinus ",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1693443871",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "mentioned",
      "id": 10193643332,
      "node_id": "MEE_lADOABII585vM7wGzwAAAAJflqdE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10193643332",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-25T14:22:26Z"
    },
    {
      "event": "subscribed",
      "id": 10193643347,
      "node_id": "SE_lADOABII585vM7wGzwAAAAJflqdT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10193643347",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-25T14:22:26Z"
    },
    {
      "event": "commented",
      "id": 1693859881,
      "node_id": "IC_kwDOABII585k9kAp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1693859881",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-25T19:51:15Z",
      "updated_at": "2023-08-25T19:51:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Hi, I wonder how you measured the runtime, is there a benchmark? Another optimization that might be worth it, it is to replace the `std::multimap<CBlockIndex*,CBlockIndex*> forward` with an `std::unordered_map<CBlockIndex*, std::vector<CBlockIndex*>> forward`.",
      "user": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1693859881",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "reviewed",
      "id": 1598474945,
      "node_id": "PRR_kwDOABII585fRsrB",
      "url": null,
      "actor": null,
      "commit_id": "3e0f0018987472a0fbecf2251a018ccaecbeb985",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1598474945",
      "submitted_at": "2023-08-28T14:56:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "commented",
      "id": 1695883820,
      "node_id": "IC_kwDOABII585lFSIs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1695883820",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-28T15:17:24Z",
      "updated_at": "2023-08-28T15:17:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Hi, I wonder how you measured the runtime, is there a benchmark? \r\n\r\nSo far only manually, by adding log statements to the beginning and end of CheckBlockIndex and running with `-logtimemicros`. I will add a benchmark!\r\n\r\n> Another optimization that might be worth it, it is to replace the std::multimap<CBlockIndex*,CBlockIndex*> forward with an std::unordered_map<CBlockIndex*, std::vector<CBlockIndex*>> forward.\r\n\r\nThanks, I'll look into that!",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1695883820",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "labeled",
      "id": 10266909413,
      "node_id": "LE_lADOABII585vM7wGzwAAAAJj9Jrl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10266909413",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-03T18:04:02Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10281034336,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAAJkzCJg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10281034336",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-05T09:10:54Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "convert_to_draft",
      "id": 10339215247,
      "node_id": "CTDE_lADOABII585vM7wGzwAAAAJoQ-eP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10339215247",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-11T21:37:16Z"
    },
    {
      "event": "commented",
      "id": 1720017227,
      "node_id": "IC_kwDOABII585mhWFL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1720017227",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-14T19:24:25Z",
      "updated_at": "2023-09-14T19:24:25Z",
      "author_association": "MEMBER",
      "body": "While you're at it, I noticed that the help text for `-checkblockindex` says \"occasionally\" (added in #7290), but afaik it happens every block (and every header during the initial header sync). We should probably drop that word, or alternatively provide an `interval` argument.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1720017227",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "commented",
      "id": 1721653608,
      "node_id": "IC_kwDOABII585mnllo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1721653608",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-15T18:02:36Z",
      "updated_at": "2023-09-15T18:02:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "> While you're at it, I noticed that the help text for -checkblockindex says \"occasionally\" (added in https://github.com/bitcoin/bitcoin/pull/7290), but afaik it happens every block (and every header during the initial header sync). We should probably drop that word, or alternatively provide an interval argument.\r\n\r\nGood point, I think that an interval argument similar to addrman or mempool consistency checks makes sense. Will try that in addition to the other points above (it might take a few weeks though, therefore put the PR into draft).",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1721653608",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "labeled",
      "id": 10582265627,
      "node_id": "LE_lADOABII585vM7wGzwAAAAJ2wI8b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10582265627",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-07T16:40:32Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 10657299526,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAAJ7OXxG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10657299526",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-15T09:34:40Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11327918224,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAAKjMlCQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11327918224",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "87d6155b91797d795433c9c8bca5da20c74f810c",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/87d6155b91797d795433c9c8bca5da20c74f810c",
      "created_at": "2023-12-22T16:12:56Z"
    },
    {
      "event": "commented",
      "id": 1867862091,
      "node_id": "IC_kwDOABII585vVVBL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1867862091",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-22T16:18:24Z",
      "updated_at": "2023-12-22T16:44:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "I added a commit with a benchmark, and another one that allow to specify the frequency for `-checkblockindex` (analogous to the way `-checkaddrman` and `-checkmempool` work).\r\n\r\n> Another optimization that might be worth it, it is to replace the std::multimap<CBlockIndex*,CBlockIndex*> forward with an std::unordered_map<CBlockIndex*, std::vector<CBlockIndex*>> forward.\r\n\r\nI tried that in https://github.com/mzumsande/bitcoin/commit/51aae54cfafc9700581e69dc129866cff76925ae (directly on master without the changes of this PR), however it doesn't seem to improve performance - I'll post benchmark results below.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1867862091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "commented",
      "id": 1867883982,
      "node_id": "IC_kwDOABII585vVaXO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1867883982",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-22T16:43:55Z",
      "updated_at": "2023-12-22T16:45:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Benchmark results:\r\n<details>\r\n<summary>master</summary>\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          331,165.67 |            3,019.64 |    0.3% |      0.01 | `CheckBlockIndex`\r\n|          320,603.00 |            3,119.12 |    1.7% |      0.01 | `CheckBlockIndex`\r\n|          315,683.67 |            3,167.73 |    0.4% |      0.01 | `CheckBlockIndex`\r\n|          329,077.33 |            3,038.80 |    0.3% |      0.01 | `CheckBlockIndex`\r\n|          315,345.33 |            3,171.13 |    0.4% |      0.01 | `CheckBlockIndex`\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>PR</summary>\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          127,273.00 |            7,857.13 |    1.8% |      0.01 | `CheckBlockIndex`\r\n|          123,687.22 |            8,084.91 |    0.1% |      0.01 | `CheckBlockIndex`\r\n|          136,637.17 |            7,318.65 |    0.1% |      0.01 | `CheckBlockIndex`\r\n|          123,805.67 |            8,077.17 |    0.3% |      0.01 | `CheckBlockIndex`\r\n|          124,162.62 |            8,053.95 |    0.2% |      0.01 | `CheckBlockIndex`\r\n</details>\r\n\r\n<details>\r\n<summary>martinus' idea</summary>\r\n\r\nUses `std::unordered_map<CBlockIndex*, std::vector<CBlockIndex*>>`, see https://github.com/mzumsande/bitcoin/commit/51aae54cfafc9700581e69dc129866cff76925ae for my implementation\r\n\r\n|               ns/op |                op/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|          384,395.00 |            2,601.49 |    0.5% |      0.01 | `CheckBlockIndex`\r\n|          380,674.67 |            2,626.92 |    0.3% |      0.01 | `CheckBlockIndex`\r\n|          384,337.33 |            2,601.88 |    1.1% |      0.01 | `CheckBlockIndex`\r\n|          410,836.50 |            2,434.06 |    3.4% |      0.01 | `CheckBlockIndex`\r\n|          384,461.33 |            2,601.04 |    2.0% |      0.01 | `CheckBlockIndex`\r\n</details>\r\n\r\nThe benchmark currently uses a linear chain of 1100 headers. In general, the efficiency gain becomes larger with a longer chain, for example with just 100 headers the speedup is less.\r\n\r\nSo there is a speedup of a facto >2.5 with the benchmark (that becomes larger on larger chains, see results for mainnet / testnet in OP).\r\nThe suggestion by @martinus to use `std::unordered_map<CBlockIndex*, std::vector<CBlockIndex*>>` doesn't seem to improve performance (though it's also very possible that I might have not implemented it in a great away).\r\n\r\n",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1867883982",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "mentioned",
      "id": 11328109267,
      "node_id": "MEE_lADOABII585vM7wGzwAAAAKjNTrT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11328109267",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-22T16:43:55Z"
    },
    {
      "event": "subscribed",
      "id": 11328109272,
      "node_id": "SE_lADOABII585vM7wGzwAAAAKjNTrY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11328109272",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-22T16:43:56Z"
    },
    {
      "event": "ready_for_review",
      "id": 11328121236,
      "node_id": "RFRE_lADOABII585vM7wGzwAAAAKjNWmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11328121236",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-22T16:45:55Z"
    },
    {
      "event": "commented",
      "id": 1879863374,
      "node_id": "IC_kwDOABII585wDHBO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1879863374",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-06T22:41:25Z",
      "updated_at": "2024-01-06T22:41:25Z",
      "author_association": "MEMBER",
      "body": "Concept ACK",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1879863374",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "labeled",
      "id": 11469358342,
      "node_id": "LE_lADOABII585vM7wGzwAAAAKroIUG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11469358342",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-12T13:38:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 11662044613,
      "node_id": "LE_lADOABII585vM7wGzwAAAAK3HK3F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11662044613",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-31T22:26:42Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11709459609,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAAK58CyZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11709459609",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "created_at": "2024-02-05T20:18:22Z"
    },
    {
      "event": "commented",
      "id": 1928027472,
      "node_id": "IC_kwDOABII585y611Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1928027472",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-05T20:19:24Z",
      "updated_at": "2024-02-05T20:19:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "[87d6155 ](https://github.com/bitcoin/bitcoin/commit/87d6155b91797d795433c9c8bca5da20c74f810c)to [efdc8e3](https://github.com/bitcoin/bitcoin/commit/efdc8e3a0ee81b143ee17a578f1e27b1c427a912): rebased",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-1928027472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "unlabeled",
      "id": 11709923081,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAAK59z8J",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11709923081",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-05T21:10:18Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 11710080765,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAAK5-ab9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11710080765",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-05T21:27:58Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1864675813,
      "node_id": "PRR_kwDOABII585vJLHl",
      "url": null,
      "actor": null,
      "commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1864675813",
      "submitted_at": "2024-02-06T09:34:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "reviewed",
      "id": 1870367495,
      "node_id": "PRR_kwDOABII585ve4sH",
      "url": null,
      "actor": null,
      "commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK.\r\nWill start reviewing next week.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1870367495",
      "submitted_at": "2024-02-08T14:24:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "reviewed",
      "id": 1904842490,
      "node_id": "PRR_kwDOABII585xiZb6",
      "url": null,
      "actor": null,
      "commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1904842490",
      "submitted_at": "2024-03-04T01:50:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "reviewed",
      "id": 1932720514,
      "node_id": "PRR_kwDOABII585zMvmC",
      "url": null,
      "actor": null,
      "commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review efdc8e3a0ee81b143ee17a578f1e27b1c427a912.\r\n\r\nConcept ACK. Seems like this gives a significant speedup from a simple code change.\r\n\r\nI left some questions below and didn't ack yet because I think the current implementation might inadvertently break passing a `-checkblockindex` argument with no value, but otherwise this looks good.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1932720514",
      "submitted_at": "2024-03-12T21:54:49Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12157299000,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALUoak4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12157299000",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "08a9b356dc99ff5d7f1d64981848dee9d22840c4",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/08a9b356dc99ff5d7f1d64981848dee9d22840c4",
      "created_at": "2024-03-18T18:33:24Z"
    },
    {
      "event": "commented",
      "id": 2004658024,
      "node_id": "IC_kwDOABII5853fKdo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004658024",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T18:34:43Z",
      "updated_at": "2024-03-18T18:34:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "just rebased, will address feedback soon (I have a local merge conflict which apparently doesn't bother Github)",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2004658024",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12159327381,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALUwJyV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12159327381",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4f51a4c01f2ce8ee1390e3b7a373d91158d8a83e",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/4f51a4c01f2ce8ee1390e3b7a373d91158d8a83e",
      "created_at": "2024-03-18T20:55:34Z"
    },
    {
      "event": "commented",
      "id": 2004986168,
      "node_id": "IC_kwDOABII5853gak4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2004986168",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T21:04:15Z",
      "updated_at": "2024-03-18T21:04:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "[08a9b35 ](https://github.com/bitcoin/bitcoin/commit/08a9b356dc99ff5d7f1d64981848dee9d22840c4)to [4f51a4c](https://github.com/bitcoin/bitcoin/commit/4f51a4c01f2ce8ee1390e3b7a373d91158d8a83e): Addressed feedback by @ryanofsky, thanks!",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2004986168",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "mentioned",
      "id": 12159440697,
      "node_id": "MEE_lADOABII585vM7wGzwAAAALUwlc5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12159440697",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T21:04:16Z"
    },
    {
      "event": "subscribed",
      "id": 12159440713,
      "node_id": "SE_lADOABII585vM7wGzwAAAALUwldJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12159440713",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-18T21:04:17Z"
    },
    {
      "event": "reviewed",
      "id": 1926717285,
      "node_id": "PRR_kwDOABII585y119l",
      "url": null,
      "actor": null,
      "commit_id": "4f51a4c01f2ce8ee1390e3b7a373d91158d8a83e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK 4f51a4c\r\n\r\nWould be nice to cover this function properly with a good number of unit tests. It shouldn't be hard, the `validation_block_tests.cpp` file contain all the util functions to create different chain topologies.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1926717285",
      "submitted_at": "2024-03-19T15:08:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "review_requested",
      "id": 12171113500,
      "node_id": "RRE_lADOABII585vM7wGzwAAAALVdHQc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12171113500",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T15:08:07Z",
      "requested_reviewer": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 12171113717,
      "node_id": "RRE_lADOABII585vM7wGzwAAAALVdHT1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12171113717",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-19T15:08:07Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "labeled",
      "id": 12188589227,
      "node_id": "LE_lADOABII585vM7wGzwAAAALWfxyr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12188589227",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T17:19:27Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMyYzgwNDEzZmRiMDYzMTk5ZjNiZWU3MTljNDY1MWJkNjNmMDVmY2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32c80413fdb063199f3bee719c4651bd63f05fce",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/32c80413fdb063199f3bee719c4651bd63f05fce",
      "tree": {
        "sha": "8e486f5672f795bc682472f802e7b9cef6ed3c66",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8e486f5672f795bc682472f802e7b9cef6ed3c66"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b50554babdddf452acaa51bac757736766c70e81",
          "sha": "b50554babdddf452acaa51bac757736766c70e81",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b50554babdddf452acaa51bac757736766c70e81"
        }
      ],
      "message": "bench: add benchmark for checkblockindex",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-03-20T20:30:04Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-12-20T20:41:05Z"
      },
      "sha": "32c80413fdb063199f3bee719c4651bd63f05fce"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12191280801,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALWqC6h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191280801",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7fcd686f1fe219d8c4cb4ba90127d1139eee9d22",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/7fcd686f1fe219d8c4cb4ba90127d1139eee9d22",
      "created_at": "2024-03-20T20:59:17Z"
    },
    {
      "event": "commented",
      "id": 2010640693,
      "node_id": "IC_kwDOABII58531_E1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2010640693",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T21:07:58Z",
      "updated_at": "2024-03-20T21:12:32Z",
      "author_association": "CONTRIBUTOR",
      "body": "[4f51a4c ](https://github.com/bitcoin/bitcoin/commit/4f51a4c01f2ce8ee1390e3b7a373d91158d8a83e)to [b51eb42](https://github.com/bitcoin/bitcoin/commit/b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42): Rebased, addressed nit.\r\n\r\n> Would be nice to cover this function properly with a good number of unit tests. It shouldn't be hard, the `validation_block_tests.cpp` file contain all the util functions to create different chain topologies.\r\n\r\nI agree, might take me a few weeks to get to that thoughs since I have a few other things on my list.\r\nAlthough just mentioning that quite a few constellations are already covered in random unit / functional tests that are targeted at something else - when I implemented this originally and didn't get some details right, I got several failures.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2010640693",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12191420752,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALWqlFQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191420752",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "created_at": "2024-03-20T21:11:52Z"
    },
    {
      "event": "unlabeled",
      "id": 12191716668,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAALWrtU8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12191716668",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-20T21:43:08Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1966214484,
      "node_id": "PRR_kwDOABII5851Mg1U",
      "url": null,
      "actor": null,
      "commit_id": "b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42 but it seems like code could be simpler and clearer (could eliminate finished and in_best_hdr_chain variables and redundant height checks before using CChain::operator[])",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-1966214484",
      "submitted_at": "2024-03-28T14:09:14Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "review_requested",
      "id": 12282304301,
      "node_id": "RRE_lADOABII585vM7wGzwAAAALcFRct",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12282304301",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-28T14:09:19Z",
      "requested_reviewer": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12311593969,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALd1APx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12311593969",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7015231d9ab042f7c3ad0f584cbf64a32c896d77",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/7015231d9ab042f7c3ad0f584cbf64a32c896d77",
      "created_at": "2024-04-01T14:44:25Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12311698028,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALd1Zps",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12311698028",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e880ee0a634f0be5079d39328fa5e118452553a9",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/e880ee0a634f0be5079d39328fa5e118452553a9",
      "created_at": "2024-04-01T14:53:55Z"
    },
    {
      "event": "commented",
      "id": 2029897164,
      "node_id": "IC_kwDOABII5854_cXM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2029897164",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-01T14:59:37Z",
      "updated_at": "2024-04-01T14:59:37Z",
      "author_association": "CONTRIBUTOR",
      "body": "[b51eb42](https://github.com/bitcoin/bitcoin/commit/b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42) to [e880ee0](https://github.com/bitcoin/bitcoin/commit/e880ee0a634f0be5079d39328fa5e118452553a9)\r\nAddressed feedback by @ryanofsky - now the diff to master should be a bit smaller than before.\r\n\r\nStill haven't had the time to write more unit tests for `CheckBlockIndex()`.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2029897164",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "mentioned",
      "id": 12311761798,
      "node_id": "MEE_lADOABII585vM7wGzwAAAALd1pOG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12311761798",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-01T14:59:38Z"
    },
    {
      "event": "subscribed",
      "id": 12311761830,
      "node_id": "SE_lADOABII585vM7wGzwAAAALd1pOm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12311761830",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-01T14:59:38Z"
    },
    {
      "event": "labeled",
      "id": 12314475345,
      "node_id": "LE_lADOABII585vM7wGzwAAAALd__tR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12314475345",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-01T18:55:44Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 12370258800,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAALhUytw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12370258800",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-05T08:54:20Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2006968441,
      "node_id": "PRR_kwDOABII5853n-h5",
      "url": null,
      "actor": null,
      "commit_id": "e880ee0a634f0be5079d39328fa5e118452553a9",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK e880ee0a634f0be5079d39328fa5e118452553a9. Just rebase and suggested simplifications since the last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2006968441",
      "submitted_at": "2024-04-17T19:54:52Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "reviewed",
      "id": 2008877392,
      "node_id": "PRR_kwDOABII5853vQlQ",
      "url": null,
      "actor": null,
      "commit_id": "e880ee0a634f0be5079d39328fa5e118452553a9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2008877392",
      "submitted_at": "2024-04-18T13:17:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "review_requested",
      "id": 12523389729,
      "node_id": "RRE_lADOABII585vM7wGzwAAAALqc8Mh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12523389729",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-18T13:17:58Z",
      "requested_reviewer": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2063852471,
      "node_id": "IC_kwDOABII5857A-O3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2063852471",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-18T13:19:30Z",
      "updated_at": "2024-04-18T13:19:30Z",
      "author_association": "MEMBER",
      "body": "@DrahtBot, I just reviewed it..",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2063852471",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "mentioned",
      "id": 12523413288,
      "node_id": "MEE_lADOABII585vM7wGzwAAAALqdB8o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12523413288",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-18T13:19:32Z"
    },
    {
      "event": "subscribed",
      "id": 12523413312,
      "node_id": "SE_lADOABII585vM7wGzwAAAALqdB9A",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12523413312",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-18T13:19:32Z"
    },
    {
      "event": "reviewed",
      "id": 2011192368,
      "node_id": "PRR_kwDOABII58534Fww",
      "url": null,
      "actor": null,
      "commit_id": "e880ee0a634f0be5079d39328fa5e118452553a9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2011192368",
      "submitted_at": "2024-04-19T11:32:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "review_requested",
      "id": 12537317883,
      "node_id": "RRE_lADOABII585vM7wGzwAAAALrSEn7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12537317883",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-19T11:32:39Z",
      "requested_reviewer": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12562603206,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALsyhzG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12562603206",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3c3895ccfa108e10f4a0b1a78f64ffedade1fd11",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/3c3895ccfa108e10f4a0b1a78f64ffedade1fd11",
      "created_at": "2024-04-22T16:20:21Z"
    },
    {
      "event": "commented",
      "id": 2070114863,
      "node_id": "IC_kwDOABII5857Y3Iv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2070114863",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-22T16:24:26Z",
      "updated_at": "2024-04-22T16:24:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "[e880ee0 ](https://github.com/bitcoin/bitcoin/commit/e880ee0a634f0be5079d39328fa5e118452553a9)to [3c3895c](https://github.com/bitcoin/bitcoin/commit/3c3895ccfa108e10f4a0b1a78f64ffedade1fd11):\r\nAddressed review feedback.",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2070114863",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "reviewed",
      "id": 2019819063,
      "node_id": "PRR_kwDOABII5854Y_43",
      "url": null,
      "actor": null,
      "commit_id": "3c3895ccfa108e10f4a0b1a78f64ffedade1fd11",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 3c3895ccfa108e10f4a0b1a78f64ffedade1fd11\r\n\r\nLeft another suggestion, but this looks good in its current form.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2019819063",
      "submitted_at": "2024-04-24T13:40:32Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1YTYzMWI5NTk3ZTUwMjlhNTA0OGQ5YjhhZDg0ZWE0NTM2YmJhYzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5a631b9597e5029a5048d9b8ad84ea4536bbac0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5a631b9597e5029a5048d9b8ad84ea4536bbac0",
      "tree": {
        "sha": "daa0b0d0269dfc6bc2d9ad5ff0f180fd753353bc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/daa0b0d0269dfc6bc2d9ad5ff0f180fd753353bc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/32c80413fdb063199f3bee719c4651bd63f05fce",
          "sha": "32c80413fdb063199f3bee719c4651bd63f05fce",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/32c80413fdb063199f3bee719c4651bd63f05fce"
        }
      ],
      "message": "validation: improve performance of CheckBlockIndex\n\nby not saving all indexes in a std::multimap, but only\nthose that are not part of the best header chain.\nThe indexes of the best header chain are stored in a vector,\nwhich, in the typical case of a mostly linear chain with\na few forks, results in a much smaller multimap, and increases\nperformance noticeably for long chains.\n\nThis does not change the actual consistency checks that are being\nperformed for each index, just the way the block index tree is\nstored and traversed.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-04-26T17:31:28Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-08-23T18:05:42Z"
      },
      "sha": "d5a631b9597e5029a5048d9b8ad84ea4536bbac0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDViYzIwNzdlOGY1OTI0NDJiMDg5YWZmZGYwYjU3OTVmYmMwNTNiYjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "tree": {
        "sha": "43d51e83663cf460b4e064e45561fd4c736dc5c4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/43d51e83663cf460b4e064e45561fd4c736dc5c4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5a631b9597e5029a5048d9b8ad84ea4536bbac0",
          "sha": "d5a631b9597e5029a5048d9b8ad84ea4536bbac0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d5a631b9597e5029a5048d9b8ad84ea4536bbac0"
        }
      ],
      "message": "validation: allow to specify frequency for -checkblockindex\n\nThis makes it similar to -checkaddrman and -checkmempool, which\nalso allow to run the check occasionally instead of always / never.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2024-04-26T17:31:28Z"
      },
      "author": {
        "name": "Martin Zumsande",
        "email": "mzumsande@gmail.com",
        "date": "2023-12-21T22:24:07Z"
      },
      "sha": "5bc2077e8f592442b089affdf0b5795fbc053bb8"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 12626666163,
      "node_id": "HRFPE_lADOABII585vM7wGzwAAAALwm6Kz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12626666163",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "commit_url": "https://api.github.com/repos/mzumsande/bitcoin/commits/5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "created_at": "2024-04-26T17:35:33Z"
    },
    {
      "event": "commented",
      "id": 2079810727,
      "node_id": "IC_kwDOABII585792Sn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2079810727",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-04-26T17:37:24Z",
      "updated_at": "2024-04-26T17:37:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "[3c3895c ](https://github.com/bitcoin/bitcoin/commit/3c3895ccfa108e10f4a0b1a78f64ffedade1fd11)to [5bc2077](https://github.com/bitcoin/bitcoin/commit/5bc2077e8f592442b089affdf0b5795fbc053bb8):\r\nAddressed review feedback",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2079810727",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "reviewed",
      "id": 2066200941,
      "node_id": "PRR_kwDOABII5857J7lt",
      "url": null,
      "actor": null,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2066200941",
      "submitted_at": "2024-05-20T13:15:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "review_requested",
      "id": 12866180941,
      "node_id": "RRE_lADOABII585vM7wGzwAAAAL-4ldN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12866180941",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-05-20T13:15:28Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2108028986,
      "node_id": "PRR_kwDOABII5859pfg6",
      "url": null,
      "actor": null,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 5bc2077e8f592442b089affdf0b5795fbc053bb8. Just added suggested assert and simplification since last review",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#pullrequestreview-2108028986",
      "submitted_at": "2024-06-10T14:49:01Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
    },
    {
      "event": "commented",
      "id": 2161560686,
      "node_id": "IC_kwDOABII586A1sxu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2161560686",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T20:33:29Z",
      "updated_at": "2024-06-11T20:33:29Z",
      "author_association": "MEMBER",
      "body": "ACK 5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2161560686",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "merged",
      "id": 13122586848,
      "node_id": "ME_lADOABII585vM7wGzwAAAAMOKsjg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13122586848",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "891e4bf3740774485c40d1c1a54075a1b69d6dde",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/891e4bf3740774485c40d1c1a54075a1b69d6dde",
      "created_at": "2024-06-11T20:41:56Z"
    },
    {
      "event": "closed",
      "id": 13122586866,
      "node_id": "CE_lADOABII585vM7wGzwAAAAMOKsjy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13122586866",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T20:41:56Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 13122917962,
      "node_id": "HRDE_lADOABII585vM7wGzwAAAAMOL9ZK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13122917962",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-06-11T21:24:15Z"
    },
    {
      "event": "labeled",
      "id": 13707110580,
      "node_id": "LE_lADOABII585vM7wGzwAAAAMxAei0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13707110580",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-31T09:33:47Z",
      "label": {
        "name": "Needs CMake port",
        "color": "0e8a16"
      }
    },
    {
      "event": "commented",
      "id": 2260126454,
      "node_id": "IC_kwDOABII586Gtsr2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2260126454",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-31T09:55:18Z",
      "updated_at": "2024-07-31T09:55:18Z",
      "author_association": "MEMBER",
      "body": "Ported to the CMake-based build system in https://github.com/hebasto/bitcoin/pull/290.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#issuecomment-2260126454",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28339"
    },
    {
      "event": "unlabeled",
      "id": 13707395259,
      "node_id": "UNLE_lADOABII585vM7wGzwAAAAMxBkC7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13707395259",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-31T09:55:25Z",
      "label": {
        "name": "Needs CMake port",
        "color": "0e8a16"
      }
    },
    {
      "event": "locked",
      "id": 18920683468,
      "node_id": "LOE_lADOABII585vM7wGzwAAAARnwrfM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18920683468",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-31T14:17:54Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307539361",
      "pull_request_review_id": 1598474945,
      "id": 1307539361,
      "node_id": "PRRC_kwDOABII585N73eh",
      "diff_hunk": "@@ -4698,18 +4698,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "3e0f0018987472a0fbecf2251a018ccaecbeb985",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Instead of explicitly building your own vector, can you reuse `Chainstate::m_chain`, which effectively contains pointers to all current-mainchain block index entries in a vector already?",
      "created_at": "2023-08-28T14:56:27Z",
      "updated_at": "2023-08-28T14:56:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1307539361",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307539361"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307561848",
      "pull_request_review_id": 1598510727,
      "id": 1307561848,
      "node_id": "PRRC_kwDOABII585N7894",
      "diff_hunk": "@@ -4698,18 +4698,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "3e0f0018987472a0fbecf2251a018ccaecbeb985",
      "in_reply_to_id": 1307539361,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I didn't do that so that the speedup is independent from the chain, and also applies to situations where we have all the headers, but `m_chain` is behind (IBD, reindex). Which seemed important because these are the exact situations where `CheckBlockIndex` will be called a lot and slows `bitcoind` down most noticeably. ",
      "created_at": "2023-08-28T15:14:45Z",
      "updated_at": "2023-08-28T15:14:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1307561848",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307561848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307566110",
      "pull_request_review_id": 1598518173,
      "id": 1307566110,
      "node_id": "PRRC_kwDOABII585N7-Ae",
      "diff_hunk": "@@ -4698,18 +4698,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 10,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "3e0f0018987472a0fbecf2251a018ccaecbeb985",
      "in_reply_to_id": 1307539361,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Makes sense!",
      "created_at": "2023-08-28T15:18:26Z",
      "updated_at": "2023-08-28T15:18:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1307566110",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1307566110"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5019,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479473030",
      "pull_request_review_id": 1864675813,
      "id": 1479473030,
      "node_id": "PRRC_kwDOABII585YLveG",
      "diff_hunk": "@@ -4817,6 +4817,13 @@ void ChainstateManager::LoadExternalBlockFile(\n     LogPrintf(\"Loaded %i blocks from external file in %dms\\n\", nLoaded, Ticks<std::chrono::milliseconds>(SteadyClock::now() - start));\n }\n \n+bool ChainstateManager::ShouldCheckBlockIndex() const\n+{\n+    if (!*Assert(m_options.check_block_index)) return false;\n+    if (GetRand(*m_options.check_block_index) >= 1) return false;",
      "path": "src/validation.cpp",
      "position": 8,
      "original_position": 7,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "May be better to do this deterministically to avoid non-determinism in tests?",
      "created_at": "2024-02-06T09:34:40Z",
      "updated_at": "2024-02-06T09:34:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1479473030",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1479473030"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5041,
      "original_line": 5041,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1480178708",
      "pull_request_review_id": 1865782286,
      "id": 1480178708,
      "node_id": "PRRC_kwDOABII585YObwU",
      "diff_hunk": "@@ -4817,6 +4817,13 @@ void ChainstateManager::LoadExternalBlockFile(\n     LogPrintf(\"Loaded %i blocks from external file in %dms\\n\", nLoaded, Ticks<std::chrono::milliseconds>(SteadyClock::now() - start));\n }\n \n+bool ChainstateManager::ShouldCheckBlockIndex() const\n+{\n+    if (!*Assert(m_options.check_block_index)) return false;\n+    if (GetRand(*m_options.check_block_index) >= 1) return false;",
      "path": "src/validation.cpp",
      "position": 8,
      "original_position": 7,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "in_reply_to_id": 1479473030,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think it would be nice to have consistency among `-checkaddrman`, `-checkmempool` and `-checkblockindex`. Since non-determinism would only occur for values other than 0 and 1, maybe it'd be best not to use other values than that in tests? Or change all three do be deterministic?",
      "created_at": "2024-02-06T16:30:51Z",
      "updated_at": "2024-02-06T16:30:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1480178708",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1480178708"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5041,
      "original_line": 5041,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505021829",
      "pull_request_review_id": 1904842490,
      "id": 1505021829,
      "node_id": "PRRC_kwDOABII585ZtM-F",
      "diff_hunk": "@@ -0,0 +1,20 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+static void CheckBlockIndex(benchmark::Bench& bench)\n+{\n+    auto testing_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+    // Mine some more blocks\n+    testing_setup->mineBlocks(1000);\n+    bench.run([&] {\n+        testing_setup->m_node.chainman->CheckBlockIndex();\n+    });",
      "path": "src/bench/checkblockindex.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "94f2da6c622b5c0f54c5a27eb9f882f1f25ee592",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Have you thought on making `check_block_index` configurable during runtime? (at least at the code level). It would speedup this and other bench setups greatly.",
      "created_at": "2024-02-27T21:28:30Z",
      "updated_at": "2024-03-04T01:50:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1505021829",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1505021829"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": 11,
      "original_start_line": 11,
      "start_side": "RIGHT",
      "line": 16,
      "original_line": 16,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510505516",
      "pull_request_review_id": 1904842490,
      "id": 1510505516,
      "node_id": "PRRC_kwDOABII585aCHws",
      "diff_hunk": "@@ -4833,18 +4833,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Haven't gone deeper yet but this reminds me to #26245 (and #26260).",
      "created_at": "2024-03-04T01:49:53Z",
      "updated_at": "2024-03-04T01:50:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1510505516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1510505516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5017,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1518247005",
      "pull_request_review_id": 1925764484,
      "id": 1518247005,
      "node_id": "PRRC_kwDOABII585afpxd",
      "diff_hunk": "@@ -0,0 +1,20 @@\n+// Copyright (c) 2023-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+static void CheckBlockIndex(benchmark::Bench& bench)\n+{\n+    auto testing_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+    // Mine some more blocks\n+    testing_setup->mineBlocks(1000);\n+    bench.run([&] {\n+        testing_setup->m_node.chainman->CheckBlockIndex();\n+    });",
      "path": "src/bench/checkblockindex.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "94f2da6c622b5c0f54c5a27eb9f882f1f25ee592",
      "in_reply_to_id": 1505021829,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "no, I hadn't thought about it, but that sounds like a good idea (which seems independent from this PR though)",
      "created_at": "2024-03-08T20:12:05Z",
      "updated_at": "2024-03-08T20:12:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1518247005",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1518247005"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": 11,
      "original_start_line": 11,
      "start_side": "RIGHT",
      "line": 16,
      "original_line": 16,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1519010456",
      "pull_request_review_id": 1926717285,
      "id": 1519010456,
      "node_id": "PRRC_kwDOABII585aikKY",
      "diff_hunk": "@@ -5053,20 +5075,34 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n+            } else if (pindexPar->nHeight <= best_hdr_height && pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // The parent is part of the best header chain, all forks have been processed.\n+                in_best_hdr_chain = true;\n+                if (nHeight <= best_hdr_height) {\n+                    // If possible, continue by processing a sibling of the best header chain.\n+                    pindex = best_hdr_chain[nHeight];\n+                    break;\n+                } else {\n+                    // no sibling exists in the best header chain (i.e. pindexPar was the best header), so we are finished\n+                    assert(pindexPar == m_best_header);\n+                    finished = true;\n+                    break;\n+                }\n             } else {\n                 // Move up further.\n                 pindex = pindexPar;\n                 nHeight--;\n                 continue;\n             }",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 94,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "tiny nit:\r\n```diff\r\ndiff --git a/src/validation.cpp b/src/validation.cpp\r\n--- a/src/validation.cpp\t(revision 7ae0a3cf9eba43a0132e99f33ad58990866c587e)\r\n+++ b/src/validation.cpp\t(date 1710113242384)\r\n@@ -5206,12 +5206,11 @@\r\n                     finished = true;\r\n                     break;\r\n                 }\r\n-            } else {\r\n-                // Move up further.\r\n-                pindex = pindexPar;\r\n-                nHeight--;\r\n-                continue;\r\n-            }\r\n+            }\r\n+\r\n+            // Move up further\r\n+            pindex = pindexPar;\r\n+            nHeight--;\r\n         }\r\n         if (finished) break;\r\n     }\r\n```",
      "created_at": "2024-03-10T23:28:33Z",
      "updated_at": "2024-03-19T15:08:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1519010456",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1519010456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 5094,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1522146586",
      "pull_request_review_id": 1932720514,
      "id": 1522146586,
      "node_id": "PRRC_kwDOABII585auh0a",
      "diff_hunk": "@@ -24,7 +24,7 @@\n namespace node {\n util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManager::Options& opts)\n {\n-    if (auto value{args.GetBoolArg(\"-checkblockindex\")}) opts.check_block_index = *value;\n+    if (auto value{args.GetIntArg(\"-checkblockindex\")}) opts.check_block_index = *value;",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: allow to specify frequency for -checkblockindex\" (efdc8e3a0ee81b143ee17a578f1e27b1c427a912)\r\n\r\nA problem with this change is that it will now interpret bare `-checkblockindex` arguments as `-checkblockindex=0` instead of `-checkblockindex=1`. Could fix this with:\r\n\r\n```c++\r\nif (auto value{args.GetIntArg(\"-checkblockindex\")}) {\r\n    // Interpret bare -checkblockindex argument as 1 instead of 0.\r\n   opts.check_block_index = args.GetArg(\"-checkblockindex\")->empty() ? 1 : *value;\r\n}\r\n```\r\n",
      "created_at": "2024-03-12T21:37:21Z",
      "updated_at": "2024-03-12T21:54:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1522146586",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1522146586"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1522152244",
      "pull_request_review_id": 1932720514,
      "id": 1522152244,
      "node_id": "PRRC_kwDOABII585aujM0",
      "diff_hunk": "@@ -4833,18 +4833,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);\n+    while (index_walk) {\n+        best_hdr_chain[index_walk->nHeight] = index_walk;\n+        index_walk = index_walk->pprev;\n+    }",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (0f7963e0b306257ae5d547ba979712156c9d3a30)\r\n\r\nThis seems like this is reimplementing what's already implemented in the CChain class, and all this initialization could be replaced with:\r\n\r\n```c++\r\nCChain best_headers;\r\nif (m_best_header) best_headers.SetTip(m_best_header});\r\n```\r\n\r\nAlso code below could be simplified.",
      "created_at": "2024-03-12T21:43:13Z",
      "updated_at": "2024-03-12T21:54:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1522152244",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1522152244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 4839,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5023,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1522158984",
      "pull_request_review_id": 1932720514,
      "id": 1522158984,
      "node_id": "PRRC_kwDOABII585auk2I",
      "diff_hunk": "@@ -4833,18 +4833,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);\n+    while (index_walk) {\n+        best_hdr_chain[index_walk->nHeight] = index_walk;\n+        index_walk = index_walk->pprev;\n+    }\n+\n     std::multimap<CBlockIndex*,CBlockIndex*> forward;\n     for (auto& [_, block_index] : m_blockman.m_block_index) {\n-        forward.emplace(block_index.pprev, &block_index);\n+        // Only save indexes in forward that are not part of the best header chain.\n+        if (block_index.nHeight > best_hdr_height || best_hdr_chain[block_index.nHeight]->GetBlockHash() != block_index.GetBlockHash()) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (0f7963e0b306257ae5d547ba979712156c9d3a30)\r\n\r\nCalling GetBlockHash() here is unnecessary, right? It seems like it would be more consistent with rest of code to just compare pointers not hashes.",
      "created_at": "2024-03-12T21:50:31Z",
      "updated_at": "2024-03-12T21:54:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1522158984",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1522158984"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5028,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529265499",
      "pull_request_review_id": 1944179766,
      "id": 1529265499,
      "node_id": "PRRC_kwDOABII585bJr1b",
      "diff_hunk": "@@ -4833,18 +4833,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);\n+    while (index_walk) {\n+        best_hdr_chain[index_walk->nHeight] = index_walk;\n+        index_walk = index_walk->pprev;\n+    }",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": 1522152244,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nice! Changed it to use `CChain`.",
      "created_at": "2024-03-18T20:56:28Z",
      "updated_at": "2024-03-18T20:56:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1529265499",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529265499"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 4839,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5023,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529270128",
      "pull_request_review_id": 1944184432,
      "id": 1529270128,
      "node_id": "PRRC_kwDOABII585bJs9w",
      "diff_hunk": "@@ -4833,18 +4833,31 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector.\n+    // All remaining blocks are stored in a multimap.\n+    CBlockIndex* index_walk{m_best_header};\n+    const int best_hdr_height{m_best_header->nHeight};\n+    std::vector<CBlockIndex*> best_hdr_chain(best_hdr_height + 1);\n+    while (index_walk) {\n+        best_hdr_chain[index_walk->nHeight] = index_walk;\n+        index_walk = index_walk->pprev;\n+    }\n+\n     std::multimap<CBlockIndex*,CBlockIndex*> forward;\n     for (auto& [_, block_index] : m_blockman.m_block_index) {\n-        forward.emplace(block_index.pprev, &block_index);\n+        // Only save indexes in forward that are not part of the best header chain.\n+        if (block_index.nHeight > best_hdr_height || best_hdr_chain[block_index.nHeight]->GetBlockHash() != block_index.GetBlockHash()) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": 1522158984,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Makes sense, but since I replaced then entire condition with `CChain::Contains()`, this is no longer relevant.",
      "created_at": "2024-03-18T20:58:22Z",
      "updated_at": "2024-03-18T20:58:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1529270128",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529270128"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5028,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529274476",
      "pull_request_review_id": 1944192257,
      "id": 1529274476,
      "node_id": "PRRC_kwDOABII585bJuBs",
      "diff_hunk": "@@ -24,7 +24,7 @@\n namespace node {\n util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManager::Options& opts)\n {\n-    if (auto value{args.GetBoolArg(\"-checkblockindex\")}) opts.check_block_index = *value;\n+    if (auto value{args.GetIntArg(\"-checkblockindex\")}) opts.check_block_index = *value;",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "efdc8e3a0ee81b143ee17a578f1e27b1c427a912",
      "in_reply_to_id": 1522146586,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good catch! Took your suggestion. I copied this from the `-checkmempool` parsing code, which will still interpret a bare `-checkmempool` as `-checkmempool=0` (even though that was a boolean arg originally as well). Maybe that should be changed as well.",
      "created_at": "2024-03-18T21:02:37Z",
      "updated_at": "2024-03-18T21:02:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1529274476",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1529274476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532861331",
      "pull_request_review_id": 1950176943,
      "id": 1532861331,
      "node_id": "PRRC_kwDOABII585bXZuT",
      "diff_hunk": "@@ -5053,20 +5075,34 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n+            } else if (pindexPar->nHeight <= best_hdr_height && pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // The parent is part of the best header chain, all forks have been processed.\n+                in_best_hdr_chain = true;\n+                if (nHeight <= best_hdr_height) {\n+                    // If possible, continue by processing a sibling of the best header chain.\n+                    pindex = best_hdr_chain[nHeight];\n+                    break;\n+                } else {\n+                    // no sibling exists in the best header chain (i.e. pindexPar was the best header), so we are finished\n+                    assert(pindexPar == m_best_header);\n+                    finished = true;\n+                    break;\n+                }\n             } else {\n                 // Move up further.\n                 pindex = pindexPar;\n                 nHeight--;\n                 continue;\n             }",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 94,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "0f7963e0b306257ae5d547ba979712156c9d3a30",
      "in_reply_to_id": 1519010456,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done!",
      "created_at": "2024-03-20T20:59:37Z",
      "updated_at": "2024-03-20T20:59:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1532861331",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1532861331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 5094,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542970326",
      "pull_request_review_id": 1966214484,
      "id": 1542970326,
      "node_id": "PRRC_kwDOABII585b99vW",
      "diff_hunk": "@@ -5050,18 +5050,26 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);\n+\n     std::multimap<CBlockIndex*,CBlockIndex*> forward;\n     for (auto& [_, block_index] : m_blockman.m_block_index) {\n-        forward.emplace(block_index.pprev, &block_index);\n+        // Only save indexes in forward that are not part of the best header chain.\n+        if (!best_hdr_chain.Contains(&block_index)) {\n+            // Only genesis, which must be be part of the best header chain, can have a nullptr parent.\n+            assert(block_index.pprev);\n+            forward.emplace(block_index.pprev, &block_index);\n+        }\n     }\n+    assert(forward.size() + best_hdr_chain.Height() + 1 == m_blockman.m_block_index.size());\n \n-    assert(forward.size() == m_blockman.m_block_index.size());\n-\n-    std::pair<std::multimap<CBlockIndex*,CBlockIndex*>::iterator,std::multimap<CBlockIndex*,CBlockIndex*>::iterator> rangeGenesis = forward.equal_range(nullptr);\n-    CBlockIndex *pindex = rangeGenesis.first->second;\n-    rangeGenesis.first++;\n-    assert(rangeGenesis.first == rangeGenesis.second); // There is only one index entry with parent nullptr.\n+    CBlockIndex* pindex = best_hdr_chain[0];\n+    assert(pindex);\n+    bool in_best_hdr_chain{true};",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (8cf5b83a86efa55b95d81f86f4f467277791dc62)\r\n\r\nI think you could consider getting rid of the `in_best_hdr_chain` variable and just writing `best_hdr_chain.Contains(pindex)` below. IMO, this would make code easier to understand and eliminate a potential source of bugs (having an extra state variable that needs to be updated correctly in all code paths). Maybe keeping the bool would be slightly faster but I wouldn't expect the difference to significant.",
      "created_at": "2024-03-28T13:22:39Z",
      "updated_at": "2024-03-28T14:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1542970326",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1542970326"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5072,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543001064",
      "pull_request_review_id": 1966214484,
      "id": 1543001064,
      "node_id": "PRRC_kwDOABII585b-FPo",
      "diff_hunk": "@@ -5307,20 +5325,32 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n-            } else {\n-                // Move up further.\n-                pindex = pindexPar;\n-                nHeight--;\n-                continue;\n+            } else if (pindexPar->nHeight <= best_hdr_chain.Height() && pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // The parent is part of the best header chain, all forks have been processed.\n+                in_best_hdr_chain = true;\n+                if (nHeight <= m_best_header->nHeight) {\n+                    // If possible, continue by processing a sibling of the best header chain.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 82,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (8cf5b83a86efa55b95d81f86f4f467277791dc62)\r\n\r\nSeems like this should say \"sibling on\" not \"sibling of\"?",
      "created_at": "2024-03-28T13:38:57Z",
      "updated_at": "2024-03-28T14:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1543001064",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543001064"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543005349",
      "pull_request_review_id": 1966214484,
      "id": 1543005349,
      "node_id": "PRRC_kwDOABII585b-GSl",
      "diff_hunk": "@@ -5274,17 +5282,27 @@ void ChainstateManager::CheckBlockIndex()\n         // assert(pindex->GetBlockHash() == pindex->GetBlockHeader().GetHash()); // Perhaps too slow\n         // End: actual consistency checks.\n \n-        // Try descending into the first subnode.\n+\n+        // Try descending into the first subnode. Always process forks first and the best header chain after.\n         snap_update_firsts();\n         std::pair<std::multimap<CBlockIndex*,CBlockIndex*>::iterator,std::multimap<CBlockIndex*,CBlockIndex*>::iterator> range = forward.equal_range(pindex);\n         if (range.first != range.second) {\n-            // A subnode was found.\n+            // A subnode not part of the best header chain was found.\n             pindex = range.first->second;\n             nHeight++;\n+            in_best_hdr_chain = false;\n+            continue;\n+        } else if (in_best_hdr_chain && nHeight < best_hdr_chain.Height()) {\n+            // Descend further into best header chain.\n+            nHeight++;\n+            pindex = best_hdr_chain[nHeight];\n             continue;\n         }\n         // This is a leaf node.\n+        if (in_best_hdr_chain) break; // we are finished, since the best header chain is alway processed last\n+\n         // Move upwards until we reach a node of which we have not yet visited the last child.\n+        bool finished{false};",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 61,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (8cf5b83a86efa55b95d81f86f4f467277791dc62)\r\n\r\nIMO, it would be clearer to drop the `finished` variable and just write `pindex = nullptr` instead of `finished = true` to keep the same end condition.",
      "created_at": "2024-03-28T13:42:03Z",
      "updated_at": "2024-03-28T14:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1543005349",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543005349"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5305,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543011300",
      "pull_request_review_id": 1966214484,
      "id": 1543011300,
      "node_id": "PRRC_kwDOABII585b-Hvk",
      "diff_hunk": "@@ -5307,20 +5325,32 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n-            } else {\n-                // Move up further.\n-                pindex = pindexPar;\n-                nHeight--;\n-                continue;\n+            } else if (pindexPar->nHeight <= best_hdr_chain.Height() && pindexPar == best_hdr_chain[nHeight - 1]) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (8cf5b83a86efa55b95d81f86f4f467277791dc62)\r\n\r\nCould write this more concisely as `pindexPar == best_hdr_chain[nHeight - 1]` since operator[] is already implemented to return nullptr if height is out of bounds.",
      "created_at": "2024-03-28T13:46:06Z",
      "updated_at": "2024-03-28T14:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1543011300",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543011300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5331,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543015894",
      "pull_request_review_id": 1966214484,
      "id": 1543015894,
      "node_id": "PRRC_kwDOABII585b-I3W",
      "diff_hunk": "@@ -5307,20 +5325,32 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n-            } else {\n-                // Move up further.\n-                pindex = pindexPar;\n-                nHeight--;\n-                continue;\n+            } else if (pindexPar->nHeight <= best_hdr_chain.Height() && pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // The parent is part of the best header chain, all forks have been processed.\n+                in_best_hdr_chain = true;\n+                if (nHeight <= m_best_header->nHeight) {\n+                    // If possible, continue by processing a sibling of the best header chain.\n+                    pindex = best_hdr_chain[nHeight];\n+                    break;\n+                } else {\n+                    // no sibling exists in the best header chain (i.e. pindexPar was the best header), so we are finished\n+                    assert(pindexPar == m_best_header);\n+                    finished = true;\n+                    break;\n+                }\n             }\n+            // Move up further.\n+            pindex = pindexPar;\n+            nHeight--;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 94,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (8cf5b83a86efa55b95d81f86f4f467277791dc62)\r\n\r\nDiff could be a little smaller if this code was not moving. I believe this could just be written as:\r\n\r\n```c++\r\nif (rangePar.first != rangePar.second) {\r\n    // Move to pindex's sibling not on the best-chain.\r\n     pindex = rangePar.first->second;\r\n     break;\r\n} else if (pindexPar == best_hdr_chain[nHeight - 1])\r\n     // Move to pindex's sibling on the best-chain, if it has one.\r\n     pindex = best_hdr_chain[nHeight];\r\n     assert(pindex || pindexPar == m_best_header);\r\n     break;\r\n} else {\r\n    // Move up further.\r\n    pindex = pindexPar;\r\n    nHeight--;\r\n}\r\n```",
      "created_at": "2024-03-28T13:49:11Z",
      "updated_at": "2024-03-28T14:11:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1543015894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543015894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 5345,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5347,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543029833",
      "pull_request_review_id": 1966214484,
      "id": 1543029833,
      "node_id": "PRRC_kwDOABII585b-MRJ",
      "diff_hunk": "@@ -24,8 +24,10 @@\n namespace node {\n util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManager::Options& opts)\n {\n-    if (auto value{args.GetBoolArg(\"-checkblockindex\")}) opts.check_block_index = *value;\n-",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": 9,
      "original_position": 5,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: allow to specify frequency for -checkblockindex\" (b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42)\r\n\r\nProbably should keep this line break to keep style consistent within the function",
      "created_at": "2024-03-28T13:57:55Z",
      "updated_at": "2024-03-28T14:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1543029833",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543029833"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543041595",
      "pull_request_review_id": 1966214484,
      "id": 1543041595,
      "node_id": "PRRC_kwDOABII585b-PI7",
      "diff_hunk": "@@ -5034,6 +5034,13 @@ void ChainstateManager::LoadExternalBlockFile(\n     LogPrintf(\"Loaded %i blocks from external file in %dms\\n\", nLoaded, Ticks<std::chrono::milliseconds>(SteadyClock::now() - start));\n }\n \n+bool ChainstateManager::ShouldCheckBlockIndex() const\n+{\n+    if (!*Assert(m_options.check_block_index)) return false;",
      "path": "src/validation.cpp",
      "position": 7,
      "original_position": 6,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: allow to specify frequency for -checkblockindex\" (b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42)\r\n\r\nNote: I was initially confused why this is has an Assert to check if the option is set, instead of just returning a default value when the option is unset, but the reason seems to be that this is a check to make sure that Flatten() has been called and `opts.chainparams.DefaultConsistencyChecks()` has been applied. Could maybe add a comment above this like \"// Assert to verify Flatten() has been called.\" to clarify this",
      "created_at": "2024-03-28T14:05:20Z",
      "updated_at": "2024-03-28T14:09:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1543041595",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1543041595"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5040,
      "original_line": 5040,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546406341",
      "pull_request_review_id": 1971401423,
      "id": 1546406341,
      "node_id": "PRRC_kwDOABII585cLEnF",
      "diff_hunk": "@@ -24,8 +24,10 @@\n namespace node {\n util::Result<void> ApplyArgsManOptions(const ArgsManager& args, ChainstateManager::Options& opts)\n {\n-    if (auto value{args.GetBoolArg(\"-checkblockindex\")}) opts.check_block_index = *value;\n-",
      "path": "src/node/chainstatemanager_args.cpp",
      "position": 9,
      "original_position": 5,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "in_reply_to_id": 1543029833,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2024-04-01T14:47:17Z",
      "updated_at": "2024-04-01T14:47:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546406341",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546406341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 28,
      "original_line": 28,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546407943",
      "pull_request_review_id": 1971404105,
      "id": 1546407943,
      "node_id": "PRRC_kwDOABII585cLFAH",
      "diff_hunk": "@@ -5034,6 +5034,13 @@ void ChainstateManager::LoadExternalBlockFile(\n     LogPrintf(\"Loaded %i blocks from external file in %dms\\n\", nLoaded, Ticks<std::chrono::milliseconds>(SteadyClock::now() - start));\n }\n \n+bool ChainstateManager::ShouldCheckBlockIndex() const\n+{\n+    if (!*Assert(m_options.check_block_index)) return false;",
      "path": "src/validation.cpp",
      "position": 7,
      "original_position": 6,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "b51eb422d657bb1d0e6f9c7e71eb8a87a8c74f42",
      "in_reply_to_id": 1543041595,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I added a comment. By the way, the Assert is also already present on master.",
      "created_at": "2024-04-01T14:49:03Z",
      "updated_at": "2024-04-01T14:49:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546407943",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546407943"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5040,
      "original_line": 5040,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546408932",
      "pull_request_review_id": 1971405703,
      "id": 1546408932,
      "node_id": "PRRC_kwDOABII585cLFPk",
      "diff_hunk": "@@ -5050,18 +5050,26 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);\n+\n     std::multimap<CBlockIndex*,CBlockIndex*> forward;\n     for (auto& [_, block_index] : m_blockman.m_block_index) {\n-        forward.emplace(block_index.pprev, &block_index);\n+        // Only save indexes in forward that are not part of the best header chain.\n+        if (!best_hdr_chain.Contains(&block_index)) {\n+            // Only genesis, which must be be part of the best header chain, can have a nullptr parent.\n+            assert(block_index.pprev);\n+            forward.emplace(block_index.pprev, &block_index);\n+        }\n     }\n+    assert(forward.size() + best_hdr_chain.Height() + 1 == m_blockman.m_block_index.size());\n \n-    assert(forward.size() == m_blockman.m_block_index.size());\n-\n-    std::pair<std::multimap<CBlockIndex*,CBlockIndex*>::iterator,std::multimap<CBlockIndex*,CBlockIndex*>::iterator> rangeGenesis = forward.equal_range(nullptr);\n-    CBlockIndex *pindex = rangeGenesis.first->second;\n-    rangeGenesis.first++;\n-    assert(rangeGenesis.first == rangeGenesis.second); // There is only one index entry with parent nullptr.\n+    CBlockIndex* pindex = best_hdr_chain[0];\n+    assert(pindex);\n+    bool in_best_hdr_chain{true};",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 31,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": 1542970326,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I changed it as suggested, and didn't see a noticeable impact on performance.",
      "created_at": "2024-04-01T14:50:07Z",
      "updated_at": "2024-04-01T14:50:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546408932",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546408932"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5072,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546409034",
      "pull_request_review_id": 1971405890,
      "id": 1546409034,
      "node_id": "PRRC_kwDOABII585cLFRK",
      "diff_hunk": "@@ -5307,20 +5325,32 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n-            } else {\n-                // Move up further.\n-                pindex = pindexPar;\n-                nHeight--;\n-                continue;\n+            } else if (pindexPar->nHeight <= best_hdr_chain.Height() && pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // The parent is part of the best header chain, all forks have been processed.\n+                in_best_hdr_chain = true;\n+                if (nHeight <= m_best_header->nHeight) {\n+                    // If possible, continue by processing a sibling of the best header chain.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 82,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": 1543001064,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "fixed",
      "created_at": "2024-04-01T14:50:15Z",
      "updated_at": "2024-04-01T14:50:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546409034",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546409034"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546410957",
      "pull_request_review_id": 1971409465,
      "id": 1546410957,
      "node_id": "PRRC_kwDOABII585cLFvN",
      "diff_hunk": "@@ -5274,17 +5282,27 @@ void ChainstateManager::CheckBlockIndex()\n         // assert(pindex->GetBlockHash() == pindex->GetBlockHeader().GetHash()); // Perhaps too slow\n         // End: actual consistency checks.\n \n-        // Try descending into the first subnode.\n+\n+        // Try descending into the first subnode. Always process forks first and the best header chain after.\n         snap_update_firsts();\n         std::pair<std::multimap<CBlockIndex*,CBlockIndex*>::iterator,std::multimap<CBlockIndex*,CBlockIndex*>::iterator> range = forward.equal_range(pindex);\n         if (range.first != range.second) {\n-            // A subnode was found.\n+            // A subnode not part of the best header chain was found.\n             pindex = range.first->second;\n             nHeight++;\n+            in_best_hdr_chain = false;\n+            continue;\n+        } else if (in_best_hdr_chain && nHeight < best_hdr_chain.Height()) {\n+            // Descend further into best header chain.\n+            nHeight++;\n+            pindex = best_hdr_chain[nHeight];\n             continue;\n         }\n         // This is a leaf node.\n+        if (in_best_hdr_chain) break; // we are finished, since the best header chain is alway processed last\n+\n         // Move upwards until we reach a node of which we have not yet visited the last child.\n+        bool finished{false};",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 61,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": 1543005349,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2024-04-01T14:52:27Z",
      "updated_at": "2024-04-01T14:52:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546410957",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546410957"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5305,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546413494",
      "pull_request_review_id": 1971413966,
      "id": 1546413494,
      "node_id": "PRRC_kwDOABII585cLGW2",
      "diff_hunk": "@@ -5307,20 +5325,32 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n-            } else {\n-                // Move up further.\n-                pindex = pindexPar;\n-                nHeight--;\n-                continue;\n+            } else if (pindexPar->nHeight <= best_hdr_chain.Height() && pindexPar == best_hdr_chain[nHeight - 1]) {",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 78,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": 1543011300,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "True, changed.",
      "created_at": "2024-04-01T14:55:06Z",
      "updated_at": "2024-04-01T14:55:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546413494",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546413494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5331,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546414083",
      "pull_request_review_id": 1971415083,
      "id": 1546414083,
      "node_id": "PRRC_kwDOABII585cLGgD",
      "diff_hunk": "@@ -5307,20 +5325,32 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n-            } else {\n-                // Move up further.\n-                pindex = pindexPar;\n-                nHeight--;\n-                continue;\n+            } else if (pindexPar->nHeight <= best_hdr_chain.Height() && pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // The parent is part of the best header chain, all forks have been processed.\n+                in_best_hdr_chain = true;\n+                if (nHeight <= m_best_header->nHeight) {\n+                    // If possible, continue by processing a sibling of the best header chain.\n+                    pindex = best_hdr_chain[nHeight];\n+                    break;\n+                } else {\n+                    // no sibling exists in the best header chain (i.e. pindexPar was the best header), so we are finished\n+                    assert(pindexPar == m_best_header);\n+                    finished = true;\n+                    break;\n+                }\n             }\n+            // Move up further.\n+            pindex = pindexPar;\n+            nHeight--;",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 94,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "8cf5b83a86efa55b95d81f86f4f467277791dc62",
      "in_reply_to_id": 1543015894,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nice! I took that suggestion.",
      "created_at": "2024-04-01T14:55:38Z",
      "updated_at": "2024-04-01T14:55:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1546414083",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1546414083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 5345,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5347,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1569392358",
      "pull_request_review_id": 2006968441,
      "id": 1569392358,
      "node_id": "PRRC_kwDOABII585diwbm",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (4b05c654c1a5df294fa32a94c38001ac2b4ff2de)\r\n\r\nIt seems like this code cannot work in the case where `m_best_header` is null because `assert(pindex)` on line 5071 below will be triggered.\r\n\r\nI think it might make sense to replace `if (m_best_header)` here with `assert(m_best_header);` to make the assumption explicit. Otherwise, I think you will need to set the `best_hdr_chain` tip to something else, like `blockman.m_block_index.begin()`",
      "created_at": "2024-04-17T19:27:30Z",
      "updated_at": "2024-04-17T19:54:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1569392358",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1569392358"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1569423672",
      "pull_request_review_id": 2006968441,
      "id": 1569423672,
      "node_id": "PRRC_kwDOABII585di4E4",
      "diff_hunk": "@@ -5307,9 +5321,14 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n+            } else if (pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // Move to pindex's sibling on the best-chain, if it has one.\n+                pindex = best_hdr_chain[nHeight];\n+                assert(pindex || pindexPar == m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 73,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (4b05c654c1a5df294fa32a94c38001ac2b4ff2de)\r\n\r\nI think this assert might be a little clearer if it replaced `m_best_header` with `best_hdr_chain.Tip()`. Both values should be identical but latter doesn't require remembering how the `best_hdr_chain` tip was assigned ~300 lines earlier in the code. Also I think the check could be stricter because if `pindex` is not null, `pindexPar` cannot be the best header. Would suggest:\r\n\r\n```c++\r\n// There will not be a next block if (and only if) parent block is the best header.\r\nassert((pindex == nullptr) == (pindexPar == best_hdr_chain.Tip()));\r\n```",
      "created_at": "2024-04-17T19:46:48Z",
      "updated_at": "2024-04-17T19:54:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1569423672",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1569423672"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570731552",
      "pull_request_review_id": 2008877392,
      "id": 1570731552,
      "node_id": "PRRC_kwDOABII585dn3Yg",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 4b05c654c1:\r\n\r\nUsing `m_best_header` shouldn't be working (at least not as you expect) for `invalidateblock`.\r\n\r\nDuring `InvalidateBlock()`, we first disconnect all blocks, then call `CheckBlockIndex` without updating `m_best_header` (this is done later on the flow, when we call `InvalidChainFound()`). So, by the time `CheckBlockIndex` is called, `best_hdr_chain` is loaded with a chain that is not the active one.\r\n\r\nAny reason not to use `ActiveTip()` instead of `m_best_header` here?",
      "created_at": "2024-04-18T13:17:09Z",
      "updated_at": "2024-04-18T13:21:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1570731552",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570731552"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570756697",
      "pull_request_review_id": 2008911573,
      "id": 1570756697,
      "node_id": "PRRC_kwDOABII585dn9hZ",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1570731552,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Any reason not to use `ActiveTip()` instead of `m_best_header` here?\r\n\r\nI think the reason is just that we want `best_hdr_chain` to be the longest chain with the most forks for the optimization to work well. We don't actually care which chain it is because CheckBlockIndex will traverse all the blocks in any case. If a different chain is chosen it just means the blocks will be traversed in a different order, less or more efficiently.",
      "created_at": "2024-04-18T13:29:01Z",
      "updated_at": "2024-04-18T13:29:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1570756697",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570756697"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570807877",
      "pull_request_review_id": 2008976739,
      "id": 1570807877,
      "node_id": "PRRC_kwDOABII585doKBF",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1570731552,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ok, yeah. Then it is not an issue but, isn't error-prone to call `best_hdr_chain` something that might not be the best chain then? E.g. it seems that if we ever add a check only for the active chain blocks here, the `best_hdr_chain.Contains()` usage temptation will be there.",
      "created_at": "2024-04-18T13:53:21Z",
      "updated_at": "2024-04-18T13:53:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1570807877",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570807877"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570911819",
      "pull_request_review_id": 2009127059,
      "id": 1570911819,
      "node_id": "PRRC_kwDOABII585dojZL",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1570731552,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> ok, yeah. Then it is not an issue but, isn't error-prone to call `best_hdr_chain` something that might not be the best chain then? E.g. it seems that if we ever add a check only for the active chain blocks here, the `best_hdr_chain.Contains()` usage temptation will be there.\r\n\r\nI don't love the name `best_hdr_chain` but don't think it is too bad. I agree it could potentially be confused with the active chain in new code, and that would be a bug. In my original suggestion https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1522152244, I called it `best_headers` so at least the name was consistent with `m_best_header`. I don't really have other ideas though.",
      "created_at": "2024-04-18T14:47:12Z",
      "updated_at": "2024-04-18T14:47:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1570911819",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1570911819"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571211066",
      "pull_request_review_id": 2009628220,
      "id": 1571211066,
      "node_id": "PRRC_kwDOABII585dpsc6",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1570731552,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Any reason not to use ActiveTip() instead of m_best_header here\r\n\r\nMy main reason is that `CheckBlockIndex()` being independent from the active chainstate makes the performance improvement applicable to situations where we have all the headers but haven't validated much of the chain: See  [this old answer](https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1307561848). IBD and reindex seem much more relevant than extreme `invalidateblock` scenarios.",
      "created_at": "2024-04-18T18:44:24Z",
      "updated_at": "2024-04-18T18:44:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1571211066",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1571211066"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572234194",
      "pull_request_review_id": 2011192368,
      "id": 1572234194,
      "node_id": "PRRC_kwDOABII585dtmPS",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);\n+\n     std::multimap<CBlockIndex*,CBlockIndex*> forward;\n     for (auto& [_, block_index] : m_blockman.m_block_index) {\n-        forward.emplace(block_index.pprev, &block_index);\n+        // Only save indexes in forward that are not part of the best header chain.\n+        if (!best_hdr_chain.Contains(&block_index)) {\n+            // Only genesis, which must be be part of the best header chain, can have a nullptr parent.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "tiny typo\r\n```suggestion\r\n            // Only genesis, which must be part of the best header chain, can have a nullptr parent.\r\n```",
      "created_at": "2024-04-19T11:30:35Z",
      "updated_at": "2024-04-19T11:32:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1572234194",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1572234194"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5063,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575035825",
      "pull_request_review_id": 2015254640,
      "id": 1575035825,
      "node_id": "PRRC_kwDOABII585d4SOx",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);\n+\n     std::multimap<CBlockIndex*,CBlockIndex*> forward;\n     for (auto& [_, block_index] : m_blockman.m_block_index) {\n-        forward.emplace(block_index.pprev, &block_index);\n+        // Only save indexes in forward that are not part of the best header chain.\n+        if (!best_hdr_chain.Contains(&block_index)) {\n+            // Only genesis, which must be be part of the best header chain, can have a nullptr parent.",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1572234194,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "fixed",
      "created_at": "2024-04-22T16:20:37Z",
      "updated_at": "2024-04-22T16:20:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1575035825",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575035825"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5063,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575039039",
      "pull_request_review_id": 2015260141,
      "id": 1575039039,
      "node_id": "PRRC_kwDOABII585d4TA_",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1570731552,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I agree it could potentially be confused with the active chain in new code, and that would be a bug.\r\n\r\nI added a comment in `CheckBlockIndex()` describing why these can differ.\r\n",
      "created_at": "2024-04-22T16:23:22Z",
      "updated_at": "2024-04-22T16:23:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1575039039",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575039039"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575039363",
      "pull_request_review_id": 2015260676,
      "id": 1575039363,
      "node_id": "PRRC_kwDOABII585d4TGD",
      "diff_hunk": "@@ -5307,9 +5321,14 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n+            } else if (pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // Move to pindex's sibling on the best-chain, if it has one.\n+                pindex = best_hdr_chain[nHeight];\n+                assert(pindex || pindexPar == m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 73,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1569423672,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done, thanks!",
      "created_at": "2024-04-22T16:23:39Z",
      "updated_at": "2024-04-22T16:23:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1575039363",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575039363"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5330,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575039633",
      "pull_request_review_id": 2015261088,
      "id": 1575039633,
      "node_id": "PRRC_kwDOABII585d4TKR",
      "diff_hunk": "@@ -5050,19 +5050,25 @@ void ChainstateManager::CheckBlockIndex()\n         return;\n     }\n \n-    // Build forward-pointing map of the entire block tree.\n+    // Build forward-pointing data structure for the entire block tree.\n+    // For performance reasons, indexes of the best header chain are stored in a vector (within CChain).\n+    // All remaining blocks are stored in a multimap.\n+    CChain best_hdr_chain;\n+    if (m_best_header) best_hdr_chain.SetTip(*m_best_header);",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "4b05c654c1a5df294fa32a94c38001ac2b4ff2de",
      "in_reply_to_id": 1569392358,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "changed to an assert.",
      "created_at": "2024-04-22T16:23:52Z",
      "updated_at": "2024-04-22T16:23:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1575039633",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1575039633"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5057,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1577858964",
      "pull_request_review_id": 2019819063,
      "id": 1577858964,
      "node_id": "PRRC_kwDOABII585eDDeU",
      "diff_hunk": "@@ -5274,16 +5283,24 @@ void ChainstateManager::CheckBlockIndex()\n         // assert(pindex->GetBlockHash() == pindex->GetBlockHeader().GetHash()); // Perhaps too slow\n         // End: actual consistency checks.\n \n-        // Try descending into the first subnode.\n+\n+        // Try descending into the first subnode. Always process forks first and the best header chain after.\n         snap_update_firsts();\n         std::pair<std::multimap<CBlockIndex*,CBlockIndex*>::iterator,std::multimap<CBlockIndex*,CBlockIndex*>::iterator> range = forward.equal_range(pindex);\n         if (range.first != range.second) {\n-            // A subnode was found.\n+            // A subnode not part of the best header chain was found.\n             pindex = range.first->second;\n             nHeight++;\n             continue;\n+        } else if (best_hdr_chain.Contains(pindex) && nHeight < best_hdr_chain.Height()) {\n+            // Descend further into best header chain.\n+            nHeight++;\n+            pindex = best_hdr_chain[nHeight];\n+            continue;\n         }\n         // This is a leaf node.\n+        if (best_hdr_chain.Contains(pindex)) break; // we are finished, since the best header chain is alway processed last",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 60,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "7183bc90483cc9361cfffb157b91fd4245ab77e0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (7183bc90483cc9361cfffb157b91fd4245ab77e0)\r\n\r\nThis might be a little simpler and clearer since it consolidates the best header chain cases:\r\n\r\n```diff\r\n--- a/src/validation.cpp\r\n+++ b/src/validation.cpp\r\n@@ -5292,15 +5292,14 @@ void ChainstateManager::CheckBlockIndex()\r\n             pindex = range.first->second;\r\n             nHeight++;\r\n             continue;\r\n-        } else if (best_hdr_chain.Contains(pindex) && nHeight < best_hdr_chain.Height()) {\r\n+        } else if (best_hdr_chain.Contains(pindex)) {\r\n             // Descend further into best header chain.\r\n             nHeight++;\r\n             pindex = best_hdr_chain[nHeight];\r\n+            if (!pindex) break; // we are finished, since the best header chain is always processed last\r\n             continue;\r\n         }\r\n         // This is a leaf node.\r\n-        if (best_hdr_chain.Contains(pindex)) break; // we are finished, since the best header chain is alway processed last\r\n-\r\n         // Move upwards until we reach a node of which we have not yet visited the last child.\r\n         while (pindex) {\r\n             // We are going to either move to a parent or a sibling of pindex.\r\n```\r\n\r\n(also fixes spelling of \"alway\")",
      "created_at": "2024-04-24T13:10:41Z",
      "updated_at": "2024-04-24T13:40:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1577858964",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1577858964"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1577887301",
      "pull_request_review_id": 2019819063,
      "id": 1577887301,
      "node_id": "PRRC_kwDOABII585eDKZF",
      "diff_hunk": "@@ -5307,9 +5324,15 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n+            } else if (pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // Move to pindex's sibling on the best-chain, if it has one.\n+                pindex = best_hdr_chain[nHeight];\n+                // There will not be a next block if (and only if) parent block is the best header.\n+                assert(pindex || pindexPar == best_hdr_chain.Tip());",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 77,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "7183bc90483cc9361cfffb157b91fd4245ab77e0",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"validation: improve performance of CheckBlockIndex\" (7183bc90483cc9361cfffb157b91fd4245ab77e0)\r\n\r\nNote: this assert is a little different than what I suggested https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1569423672 because it is not enforcing that if the parent block is the best header, then pindex must be null. So the statement that there will not be a best block if the parent block is the best header is not checked by the assert.\r\n\r\nBut I think this is fine. The comment is still true and the assert is still useful even if they don't align exactly.",
      "created_at": "2024-04-24T13:25:06Z",
      "updated_at": "2024-04-24T13:40:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1577887301",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1577887301"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 5333,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5334,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581333124",
      "pull_request_review_id": 2025542983,
      "id": 1581333124,
      "node_id": "PRRC_kwDOABII585eQTqE",
      "diff_hunk": "@@ -5307,9 +5324,15 @@ void ChainstateManager::CheckBlockIndex()\n             // Proceed to the next one.\n             rangePar.first++;\n             if (rangePar.first != rangePar.second) {\n-                // Move to the sibling.\n+                // Move to a sibling not part of the best header chain.\n                 pindex = rangePar.first->second;\n                 break;\n+            } else if (pindexPar == best_hdr_chain[nHeight - 1]) {\n+                // Move to pindex's sibling on the best-chain, if it has one.\n+                pindex = best_hdr_chain[nHeight];\n+                // There will not be a next block if (and only if) parent block is the best header.\n+                assert(pindex || pindexPar == best_hdr_chain.Tip());",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 77,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "7183bc90483cc9361cfffb157b91fd4245ab77e0",
      "in_reply_to_id": 1577887301,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "That was not on purpose, I just missed the second half of you suggestion. Changed it now, slightly stricter checks can only be helpful.",
      "created_at": "2024-04-26T17:36:44Z",
      "updated_at": "2024-04-26T17:36:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1581333124",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581333124"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": 5333,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 5334,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581333328",
      "pull_request_review_id": 2025543337,
      "id": 1581333328,
      "node_id": "PRRC_kwDOABII585eQTtQ",
      "diff_hunk": "@@ -5274,16 +5283,24 @@ void ChainstateManager::CheckBlockIndex()\n         // assert(pindex->GetBlockHash() == pindex->GetBlockHeader().GetHash()); // Perhaps too slow\n         // End: actual consistency checks.\n \n-        // Try descending into the first subnode.\n+\n+        // Try descending into the first subnode. Always process forks first and the best header chain after.\n         snap_update_firsts();\n         std::pair<std::multimap<CBlockIndex*,CBlockIndex*>::iterator,std::multimap<CBlockIndex*,CBlockIndex*>::iterator> range = forward.equal_range(pindex);\n         if (range.first != range.second) {\n-            // A subnode was found.\n+            // A subnode not part of the best header chain was found.\n             pindex = range.first->second;\n             nHeight++;\n             continue;\n+        } else if (best_hdr_chain.Contains(pindex) && nHeight < best_hdr_chain.Height()) {\n+            // Descend further into best header chain.\n+            nHeight++;\n+            pindex = best_hdr_chain[nHeight];\n+            continue;\n         }\n         // This is a leaf node.\n+        if (best_hdr_chain.Contains(pindex)) break; // we are finished, since the best header chain is alway processed last",
      "path": "src/validation.cpp",
      "position": null,
      "original_position": 60,
      "commit_id": "5bc2077e8f592442b089affdf0b5795fbc053bb8",
      "original_commit_id": "7183bc90483cc9361cfffb157b91fd4245ab77e0",
      "in_reply_to_id": 1577858964,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done as suggested.",
      "created_at": "2024-04-26T17:37:00Z",
      "updated_at": "2024-04-26T17:37:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28339#discussion_r1581333328",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1581333328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28339"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5302,
      "side": "RIGHT"
    }
  ]
}