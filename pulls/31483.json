{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483",
    "id": 2231533853,
    "node_id": "PR_kwDOABII586FAoEd",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31483",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31483.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31483.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
    "number": 31483,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "kernel: Move kernel-related cache constants to kernel cache",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Carrying non-kernel related fields in the cache sizes for the indexes is confusing for kernel library users. The cache sizes are set currently with magic numbers in bitcoin-chainstate. The comments for the cache size calculations are not completely clear. The constants for the cache sizes are also currently in `txdb.h`, which is not an ideal place for holding all cache size related constants.\r\n\r\nSolve these things by moving the kernel-specific cache size fields to their own struct and moving the constants to either the node or the kernel cache sizes.\r\n\r\nThis slightly changes the way the cache is allocated if (and only if) the txindex and/or blockfilterindex is used. Since they are now given precedence over the block tree db cache, this results in a bit less cache being allocated to the block tree db, coinsdb and coins caches. The effect is negligible though, i.e. cache sizes with default dbcache reported through the logs are:\r\n\r\nmaster:\r\n```\r\nCache configuration:\r\n* Using 2.0 MiB for block index database\r\n* Using 56.0 MiB for transaction index database\r\n* Using 49.0 MiB for basic block filter index database\r\n* Using 8.0 MiB for chain state database\r\n* Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n```\r\n\r\nthis PR:\r\n```\r\nCache configuration:\r\n* Using 2.0 MiB for block index database\r\n* Using 56.2 MiB for transaction index database\r\n* Using 49.2 MiB for basic block filter index database\r\n* Using 8.0 MiB for chain state database\r\n* Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n```\r\n\r\n---\r\nThis PR is part of the [libbitcoinkernel project](https://github.com/bitcoin/bitcoin/issues/27587).",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2024-12-12T12:17:56Z",
    "updated_at": "2025-01-06T11:00:02Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "5553b332fb235ecf148898718d740efe49280ed3",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "TheCharlatan:kernel_cache_sizes",
      "ref": "kernel_cache_sizes",
      "sha": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 94456368,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NDQ1NjM2OA==",
        "name": "bitcoin",
        "full_name": "TheCharlatan/bitcoin",
        "owner": {
          "login": "TheCharlatan",
          "id": 8421793,
          "node_id": "MDQ6VXNlcjg0MjE3OTM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheCharlatan",
          "html_url": "https://github.com/TheCharlatan",
          "followers_url": "https://api.github.com/users/TheCharlatan/followers",
          "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
          "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
          "repos_url": "https://api.github.com/users/TheCharlatan/repos",
          "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/TheCharlatan/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/TheCharlatan/bitcoin",
        "archive_url": "https://api.github.com/repos/TheCharlatan/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheCharlatan/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheCharlatan/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheCharlatan/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheCharlatan/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheCharlatan/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheCharlatan/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheCharlatan/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheCharlatan/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheCharlatan/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheCharlatan/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheCharlatan/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheCharlatan/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheCharlatan/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheCharlatan/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheCharlatan/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheCharlatan/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheCharlatan/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/hooks",
        "svn_url": "https://github.com/TheCharlatan/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 252821,
        "default_branch": "master",
        "open_issues_count": 1,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-03T22:02:59Z",
        "created_at": "2017-06-15T16:03:35Z",
        "updated_at": "2025-01-05T17:06:40Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "6aa0e70ccbd5491ec9d7c81892820f3341ccd631",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36494,
        "stargazers_count": 81175,
        "watchers_count": 81175,
        "size": 273906,
        "default_branch": "master",
        "open_issues_count": 688,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-06T10:36:48Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-06T10:50:03Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 137,
    "deletions": 73,
    "changed_files": 14,
    "commits": 6,
    "review_comments": 28,
    "comments": 7
  },
  "events": [
    {
      "event": "commented",
      "id": 2538749277,
      "node_id": "IC_kwDOABII586XUj1d",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2538749277",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-12T12:17:59Z",
      "updated_at": "2025-01-03T17:18:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31483.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [stickies-v](https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2511656329), [ryanofsky](https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2512351049) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30965](https://github.com/bitcoin/bitcoin/pull/30965) (kernel: Move block tree db open to block manager by TheCharlatan)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#26022](https://github.com/bitcoin/bitcoin/pull/26022) (Add util::ResultPtr class by ryanofsky)\n* [#25722](https://github.com/bitcoin/bitcoin/pull/25722) (refactor: Use util::Result class for wallet loading by ryanofsky)\n* [#25665](https://github.com/bitcoin/bitcoin/pull/25665) (refactor: Add util::Result failure values, multiple error and warning messages by ryanofsky)\n* [#24539](https://github.com/bitcoin/bitcoin/pull/24539) (Add a \"tx output spender\" index by sstone)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2538749277",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "labeled",
      "id": 15633722647,
      "node_id": "LE_lADOABII586jEBuMzwAAAAOj160X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15633722647",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-12T12:18:02Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "reviewed",
      "id": 2499365306,
      "node_id": "PRR_kwDOABII586U-Um6",
      "url": null,
      "actor": null,
      "commit_id": "62da6a0b1ef99fc00357e967fe868ca3235cc4fb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2499365306",
      "submitted_at": "2024-12-12T12:40:40Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15634223112,
      "node_id": "HRFPE_lADOABII586jEBuMzwAAAAOj31AI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15634223112",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/173477b5efad4723863b38fe51cd1156620d01df",
      "created_at": "2024-12-12T12:58:34Z"
    },
    {
      "event": "reviewed",
      "id": 2501686219,
      "node_id": "PRR_kwDOABII586VHLPL",
      "url": null,
      "actor": null,
      "commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK. Makes sense to separate this.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2501686219",
      "submitted_at": "2024-12-13T15:12:13Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15656759866,
      "node_id": "HRFPE_lADOABII586jEBuMzwAAAAOlNzI6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15656759866",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f454987be6f140aca6c13ab3abf94c3afa183fdf",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/f454987be6f140aca6c13ab3abf94c3afa183fdf",
      "created_at": "2024-12-14T10:10:06Z"
    },
    {
      "event": "commented",
      "id": 2543040080,
      "node_id": "IC_kwDOABII586Xk7ZQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2543040080",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-14T10:10:09Z",
      "updated_at": "2024-12-14T10:10:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review @stickies-v,\r\n\r\nUpdated 173477b5efad4723863b38fe51cd1156620d01df -> f454987be6f140aca6c13ab3abf94c3afa183fdf ([kernel_cache_sizes_0](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_0) -> [kernel_cache_sizes_1](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes_0..kernel_cache_sizes_1))\r\n\r\n* Addressed @stickies-v's  [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1884078251), removed unnecassary new index size member in the tests.\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1883694847), fixed commit order for include addition and optionsmodel and removed the no longer needed txdb include.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2543040080",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "mentioned",
      "id": 15656759997,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOlNzK9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15656759997",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-14T10:10:10Z"
    },
    {
      "event": "subscribed",
      "id": 15656759999,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOlNzK_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15656759999",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-14T10:10:10Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15676732984,
      "node_id": "HRFPE_lADOABII586jEBuMzwAAAAOmZ_Y4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15676732984",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2c49e0bfd295dc0326d02cd0a80853d7dee885ac",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/2c49e0bfd295dc0326d02cd0a80853d7dee885ac",
      "created_at": "2024-12-16T21:28:37Z"
    },
    {
      "event": "commented",
      "id": 2546835212,
      "node_id": "IC_kwDOABII586XzZ8M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2546835212",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-16T21:28:45Z",
      "updated_at": "2024-12-16T21:28:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the comments @stickies-v,\r\n\r\nUpdated f454987be6f140aca6c13ab3abf94c3afa183fdf -> 2c49e0bfd295dc0326d02cd0a80853d7dee885ac ([kernel_cache_sizes_1](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_1) -> [kernel_cache_sizes_2](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_2), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes_1..kernel_cache_sizes_2))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1884061716), added a kernel-specific cache size constant and moved the minimum size out of the kernel.\r\n",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2546835212",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "mentioned",
      "id": 15676735063,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOmZ_5X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15676735063",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-16T21:28:46Z"
    },
    {
      "event": "subscribed",
      "id": 15676735081,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOmZ_5p",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15676735081",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-16T21:28:46Z"
    },
    {
      "event": "reviewed",
      "id": 2508948359,
      "node_id": "PRR_kwDOABII586Vi4OH",
      "url": null,
      "actor": null,
      "commit_id": "2c49e0bfd295dc0326d02cd0a80853d7dee885ac",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 2c49e0bfd295dc0326d02cd0a80853d7dee885ac\r\n\r\nThe only behaviour change is a very slight difference in cache allocation by moving `block_tree_db` allocation after index allocation. Because `block_tree_db` is capped at 2MiB, the maximum impact this change can have is very limited. Even at the most extreme case with `-dbcache=4 -txindex -blockfilterindex=1`, the results are not meaningfully different:\r\n\r\nOn master:\r\n```\r\n2024-12-17T14:25:35Z Cache configuration:\r\n2024-12-17T14:25:35Z * Using 0.5 MiB for block index database\r\n2024-12-17T14:25:35Z * Using 0.4 MiB for transaction index database\r\n2024-12-17T14:25:35Z * Using 0.4 MiB for basic block filter index database\r\n2024-12-17T14:25:35Z * Using 1.3 MiB for chain state database\r\n2024-12-17T14:25:35Z * Using 1.3 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n```\r\n\r\nWith this PR:\r\n```\r\n2024-12-17T14:27:38Z Cache configuration:\r\n2024-12-17T14:27:38Z * Using 0.4 MiB for block index database\r\n2024-12-17T14:27:38Z * Using 0.5 MiB for transaction index database\r\n2024-12-17T14:27:38Z * Using 0.4 MiB for basic block filter index database\r\n2024-12-17T14:27:38Z * Using 1.3 MiB for chain state database\r\n2024-12-17T14:27:38Z * Using 1.3 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\r\n```",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2508948359",
      "submitted_at": "2024-12-17T14:31:11Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15688050928,
      "node_id": "HRFPE_lADOABII586jEBuMzwAAAAOnFKjw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15688050928",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8e929e343e14b0228f6f4841ecf2d85a73afda3b",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/8e929e343e14b0228f6f4841ecf2d85a73afda3b",
      "created_at": "2024-12-17T15:37:32Z"
    },
    {
      "event": "commented",
      "id": 2548783892,
      "node_id": "IC_kwDOABII586X61sU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2548783892",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-17T15:37:34Z",
      "updated_at": "2024-12-17T15:37:34Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated 2c49e0bfd295dc0326d02cd0a80853d7dee885ac -> 8e929e343e14b0228f6f4841ecf2d85a73afda3b ([kernel_cache_sizes_2](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_2) -> [kernel_cache_sizes_3](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_3), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes_2..kernel_cache_sizes_3))\r\n\r\n* Addressed @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1888558172), removed redundant comment.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2548783892",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "mentioned",
      "id": 15688052299,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOnFK5L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15688052299",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-17T15:37:37Z"
    },
    {
      "event": "subscribed",
      "id": 15688052350,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOnFK5-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15688052350",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-17T15:37:37Z"
    },
    {
      "event": "reviewed",
      "id": 2509607744,
      "node_id": "PRR_kwDOABII586VlZNA",
      "url": null,
      "actor": null,
      "commit_id": "8e929e343e14b0228f6f4841ecf2d85a73afda3b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 8e929e343e14b0228f6f4841ecf2d85a73afda3b - just a small doc change.",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2509607744",
      "submitted_at": "2024-12-17T17:34:43Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "reviewed",
      "id": 2509692136,
      "node_id": "PRR_kwDOABII586Vltzo",
      "url": null,
      "actor": null,
      "commit_id": "8e929e343e14b0228f6f4841ecf2d85a73afda3b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 8e929e343e14b0228f6f4841ecf2d85a73afda3b. All these changes make sense and definitely make the kernel API nicer.\r\n\r\nI do also think it would be an improvement to change all the int64_t fields to size_t since they just get casted to size_t in the end anyway, and because size_t is more self-documenting and makes it clearer the sizes are in bytes.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2509692136",
      "submitted_at": "2024-12-17T18:24:26Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15693181451,
      "node_id": "HRFPE_lADOABII586jEBuMzwAAAAOnYvIL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15693181451",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "created_at": "2024-12-17T21:14:40Z"
    },
    {
      "event": "commented",
      "id": 2549645058,
      "node_id": "IC_kwDOABII586X-H8C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2549645058",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-17T21:14:44Z",
      "updated_at": "2024-12-17T21:14:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review @ryanofsky!\r\nUpdated 8e929e343e14b0228f6f4841ecf2d85a73afda3b -> 7517126d9fd2c3e50dc95ce831bac6895b950e24 ([kernel_cache_sizes_3](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_3) -> [kernel_cache_sizes_4](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_4), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes_3..kernel_cache_sizes_4))\r\n\r\n* Addressed @ryanofsky's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1888992732), removed (redundant?) logic from coins_db cache size calculation.\r\n* Took @ryanofsky's [suggestion](https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2509692136), made the cache fields `size_t`.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2549645058",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "mentioned",
      "id": 15693182227,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOnYvUT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15693182227",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-17T21:14:45Z"
    },
    {
      "event": "subscribed",
      "id": 15693182244,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOnYvUk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15693182244",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-17T21:14:45Z"
    },
    {
      "event": "reviewed",
      "id": 2511656329,
      "node_id": "PRR_kwDOABII586VtNWJ",
      "url": null,
      "actor": null,
      "commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 7517126d9fd2c3e50dc95ce831bac6895b950e24\r\n\r\nI think c71fc6ac6e62e5eea96e8aa4e0f43260afc81723 is an absolute improvement, ~~but I'm [~0](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890151750) on 7517126d9fd2c3e50dc95ce831bac6895b950e24~~. (edit: [resolved](https://github.com/bitcoin/bitcoin/pull/31483/files#r1890652637))",
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2511656329",
      "submitted_at": "2024-12-18T12:24:28Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "review_requested",
      "id": 15702523424,
      "node_id": "RRE_lADOABII586jEBuMzwAAAAOn8X4g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15702523424",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-18T12:24:32Z",
      "requested_reviewer": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2512351049,
      "node_id": "PRR_kwDOABII586Vv29J",
      "url": null,
      "actor": null,
      "commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 7517126d9fd2c3e50dc95ce831bac6895b950e24. Just added two new commits since last review simplifying coinsdb cache calculation and switching to size_t to avoid casts. Thanks for the updates!",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2512351049",
      "submitted_at": "2024-12-18T17:09:18Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "reviewed",
      "id": 2518616838,
      "node_id": "PRR_kwDOABII586WHwsG",
      "url": null,
      "actor": null,
      "commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review 7517126d9fd2c3e50dc95ce831bac6895b950e24\r\n\r\nSome concern over implicit narrowing on 32-bit platforms (see inline comments).\r\n\r\n*Rough* suggestions: https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes...hodlinator:bitcoin:pr/31483_suggestions\r\n\\+ Use of curly braces to catch narrowing.\r\n\\+ The above encourages asserts, leading to finding cases where truncation would eventually happen (increasing `DEFAULT_KERNEL_CACHE` by 10x triggers assert).\r\n\\- ~Not so happy about my strategy to avoid repeated asserts and casts, that part is definitely WIP.~ Edit: Ended up replacing user defined literal solution with simple free function ([previous fancy & ugly solution](https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes...d535c2fd447cd09d6e86f08e8b0c6ed9f16240f5)).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2518616838",
      "submitted_at": "2024-12-21T22:25:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
    },
    {
      "event": "commented",
      "id": 2558635023,
      "node_id": "IC_kwDOABII586YgawP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2558635023",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-22T22:53:09Z",
      "updated_at": "2024-12-22T22:53:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for the suggestions @hodlinator, I appreciate the time you took for this. I was originally intent on tackling the 32bit case in a follow-up, mainly because I was thinking whether we should trap the max amount of cache at `numeric_limits<size_t>::max()`. That might be a bit friendlier than just running into an assert, some kind of allocation failure, or much less cache being allocated than requested. With your suggestions, I agree that this should be handled in this PR now.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2558635023",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "mentioned",
      "id": 15742515994,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOqU7sa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15742515994",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-22T22:53:10Z"
    },
    {
      "event": "subscribed",
      "id": 15742515997,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOqU7sd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15742515997",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-22T22:53:10Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVkYjdkNGQzZDI4YmQxMjY5YTA5OTU1YjQ2OTUxMzVjODZjNDgyN2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5db7d4d3d28bd1269a09955b4695135c86c4827d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5db7d4d3d28bd1269a09955b4695135c86c4827d",
      "tree": {
        "sha": "20ac54c8c9e9713453f98712a44b3825d65c22a6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/20ac54c8c9e9713453f98712a44b3825d65c22a6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 20ac54c8c9e9713453f98712a44b3825d65c22a6\nparent 37e49c2c7ca5969124830d79b2cb31041c570755\nauthor TheCharlatan <seb.kung@gmail.com> 1733951722 +0100\ncommitter TheCharlatan <seb.kung@gmail.com> 1735924295 +0100\n\ndoc: Correct docstring describing max block tree db cache\n\nIt is always applied in the same way, no matter how the txindex is\nsetup. This was no longer accurate after 8181db8, where their\ninitialization was made independent.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmd4GyAACgkQm3m0VpHb\nQXP16RAAvpkRI4rgZB8Fk2liJoKXjjL88sGUCGPsfTJO2kZgt/eOiGRzRdr/HLta\nPu8E8p8KaTkG683lBqySfF6h52hEEszVn0Z9kKMVGiQKI1T53jRDJ7xkPCBRo+kn\n/rCcUg0Fzds+YkrI3G/BmCfi5nsgMUkAMqCo+WxU7rScibKZxBBpafnE/SC7Y/Ob\n/Abk3SXXyMJNVN1T+E7c/NqnwBN0p2yZ1GtLQSWszQ5DtHX15P0cPrd+gf82hOAj\nqQjNG/saaCSKsJr2IBEPGMpDOFPIGI28DhBsVwBoTAWZa4G17pXmVSfCbjtn59Oe\nbyufscmvdiH42rJJg+Q5nrv2x8LQpg5squvDJqxyzyMHWB4ktVbJflkgHik6klRy\nLmpKns1cvUu3cVpxju4q+9qy+tR8h4NAz+Ui9XfDzJKvVM/lnC4iINCg9qfJT+hl\npRGChzeXAhdBjXViQqTyatfgmg84aRzHuC/sN2EfZ4wwF8T2BW3LW/PsIJyYlZg7\nWBkN2IH85bTttPQjkdu4C7Ji5OggvXQ8ss+4TgQ9/n7XgHFbRXV2TtEImqzO94L+\nAAcQn20sYxV2FPrAZ8NzsxsuHfHphRKTdKtjNNa8qtqx2Eh0veCGx6gt77SlItyT\ntUxWbEmh/hk8go8xcz1ZmRrcnLFlDI7wcI/xvtiCmUbPw0FaUhg=\n=iSbO\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37e49c2c7ca5969124830d79b2cb31041c570755",
          "sha": "37e49c2c7ca5969124830d79b2cb31041c570755",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/37e49c2c7ca5969124830d79b2cb31041c570755"
        }
      ],
      "message": "doc: Correct docstring describing max block tree db cache\n\nIt is always applied in the same way, no matter how the txindex is\nsetup. This was no longer accurate after 8181db8, where their\ninitialization was made independent.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-01-03T17:11:35Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-12-11T21:15:22Z"
      },
      "sha": "5db7d4d3d28bd1269a09955b4695135c86c4827d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE5MzE2ZWNjYWY5Mzc3NmM0OWIxODcwZjhhYTlhNWZlNTdlYzVmMzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19316eccaf93776c49b1870f8aa9a5fe57ec5f33",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/19316eccaf93776c49b1870f8aa9a5fe57ec5f33",
      "tree": {
        "sha": "9b0dd8496e3ccc67b7d6410b698411fe2d7d465b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9b0dd8496e3ccc67b7d6410b698411fe2d7d465b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 9b0dd8496e3ccc67b7d6410b698411fe2d7d465b\nparent 5db7d4d3d28bd1269a09955b4695135c86c4827d\nauthor TheCharlatan <seb.kung@gmail.com> 1734467636 +0100\ncommitter TheCharlatan <seb.kung@gmail.com> 1735924526 +0100\n\ninit: Simplify coinsdb cache calculation\n\n(total_cache / 4) + (1 << 23) is at least 8 MiB and nMaxCoinsDBCache is\nalso 8 MiB, so the minimum between the two will always be\nnMaxCoinsDBCache.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmd4Gy4ACgkQm3m0VpHb\nQXPmZBAArFjF/tROjMkvFmx2J11bubRmxZC/mMz0VS4ASWPaiszXMDrROxC7x2w2\nKEQTUOuEon7/wrIiHuVfEMVsCD/KqRlR738dlrtlkqjlatUwDtnGkrtbNsJOh0X5\n8AbzKMc3l3Q0ViM77k81uhDaZa+aM1c4xtV3StW/8xXP3iebXrFN+NZnousgvJna\n7Ggh0QiEdRs0JkLtUf8XGW4AOrBdzf4gicsU+e9DKkFgH6HA2zWA9J9jTrHqqsAK\nYhPhwjuIrp2cQ6Vq5y+WFSCJaA3eO/lLxQWoyCBzeNuONP/UEK8c9vdTcipaq0T6\nilhOAQyeIafdEAoHOC8rZLyychK4+PFl2zTUwqX4XqhsNTU5m8F59pan0/XwOPzC\nUfBTOY8W5Mgh6TV5nqZLyYKWizROMn0Mjib5KsOgiKXjz8UvnzVFWuGp1dERDDM5\nStQIg+BcJNqR5JDmyi/ei/JNDzQ/8rhau1icyQuObFw1/fR7Ax5iZDIpjYwbmZTX\nXDWF5R4aiYlISNKL1K3Uia67yDxgwuKcCHqa4dbRdZzWHKhDi+nxAe6rxUlAbQrO\n5Y11D71k+I5B2n1kj1x7ueMj1izsllCGMLvKXH3JFKOydZrBQp2Qkh9n4dbQsbbS\nrq1GLgLn0LtVUegDGQtgx/e7xIQPoaUXDUE3BxcWqbJ1snOGxHM=\n=a74S\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5db7d4d3d28bd1269a09955b4695135c86c4827d",
          "sha": "5db7d4d3d28bd1269a09955b4695135c86c4827d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5db7d4d3d28bd1269a09955b4695135c86c4827d"
        }
      ],
      "message": "init: Simplify coinsdb cache calculation\n\n(total_cache / 4) + (1 << 23) is at least 8 MiB and nMaxCoinsDBCache is\nalso 8 MiB, so the minimum between the two will always be\nnMaxCoinsDBCache.\n\nCo-authored-by: Ryan Ofsky <ryan@ofsky.org>",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-01-03T17:15:26Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-12-17T20:33:56Z"
      },
      "sha": "19316eccaf93776c49b1870f8aa9a5fe57ec5f33"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmZWVmZDE5ZWI1NTYwOGYzYTY1MmE5MTFlNzNhY2RlN2UwMjI5NjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0feefd19eb55608f3a652a911e73acde7e022963",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0feefd19eb55608f3a652a911e73acde7e022963",
      "tree": {
        "sha": "e3249b926de79b91d6044d2d5dec8efdbe697904",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e3249b926de79b91d6044d2d5dec8efdbe697904"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e3249b926de79b91d6044d2d5dec8efdbe697904\nparent 19316eccaf93776c49b1870f8aa9a5fe57ec5f33\nauthor TheCharlatan <seb.kung@gmail.com> 1732305094 +0100\ncommitter TheCharlatan <seb.kung@gmail.com> 1735924528 +0100\n\nkernel: Move kernel-specific cache size options to kernel\n\nCarrying non-kernel related fields in the cache sizes for the indexes is\nconfusing for kernel library users. The cache sizes also are set\ncurrently with magic numbers in bitcoin-chainstate. The comments for the\ncache size calculations are also not completely clear.\n\nSolve these things by moving the kernel-specific cache size fields to\ntheir own struct.\n\nThis slightly changes the way the cache is allocated if the txindex\nand/or blockfilterindex is used. Since they are now given precedence\nover the block tree db cache, this results in a bit less cache being\nallocated to the block tree db, coinsdb and coins caches. The effect is\nnegligible though, i.e. cache sizes with default dbcache reported\nthrough the logs are:\n\nmaster:\nCache configuration:\n* Using 2.0 MiB for block index database\n* Using 56.0 MiB for transaction index database\n* Using 49.0 MiB for basic block filter index database\n* Using 8.0 MiB for chain state database\n* Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n\nthis branch:\nCache configuration:\n* Using 2.0 MiB for block index database\n* Using 56.2 MiB for transaction index database\n* Using 49.2 MiB for basic block filter index database\n* Using 8.0 MiB for chain state database\n* Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmd4GzAACgkQm3m0VpHb\nQXOYuxAAsa6h/F2+kHYSNNEU8aszo8d04cQ5mPQYVoHg8SZi6jygpaTUs3N307Lc\nXEny4jwF3QkInemUEoNhHBeMcOS3N2i5M99nuSJu2nOcg+or1S3XQSK15RaneWPB\nLK2lVDLB8DmE7DqF48HUNO3vZPQ/rWARrKZqVWShnTGwXnxvhs5X/HUwHkS8Osit\n6NHnt6n0oicc15pbszamoB6NdDMW00W8LEBQC2ccdx2xOibxtYXDKDmg+dPR/PfX\nRFcpf17g3wUV2J5lFOwjAPn/HuCDgHcODosqnP9j5FglEaHkMMTOy8fB8m/UTNd1\nJ28hayhSRNtSL+Qpl1rBUxvu2o6/29Faludf2SoIEly48lqSgOB/QGLOCod3evey\nmndR12FyNZRDyiCNr5/S/Sskkbv8ZBKCbKWQ4hFgDf8keubbK4yCjGrlZKWf5YBv\nm5taT06bxs2wa1G83FhdIv1O05Po2fYriKBzz1tBmEp0tNCJig4lTbUctZGYShbK\n3ZeYzxMPg0IscrDx8bQAQJ7YkOSgtUDKZot/i+MBqMxMA+cbBDNeDrowrUXYiRY4\nY8YHWnl+bao6AekgtNnbMJgyUteHviaWpWcWk7eFKnPsytui90jtEJOtGjve36lj\nuxKUw5rSAu6pIFVNdxMqUXgWHkF6aVugtWsId+7nBuWsNWyJmW8=\n=gI+v\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19316eccaf93776c49b1870f8aa9a5fe57ec5f33",
          "sha": "19316eccaf93776c49b1870f8aa9a5fe57ec5f33",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/19316eccaf93776c49b1870f8aa9a5fe57ec5f33"
        }
      ],
      "message": "kernel: Move kernel-specific cache size options to kernel\n\nCarrying non-kernel related fields in the cache sizes for the indexes is\nconfusing for kernel library users. The cache sizes also are set\ncurrently with magic numbers in bitcoin-chainstate. The comments for the\ncache size calculations are also not completely clear.\n\nSolve these things by moving the kernel-specific cache size fields to\ntheir own struct.\n\nThis slightly changes the way the cache is allocated if the txindex\nand/or blockfilterindex is used. Since they are now given precedence\nover the block tree db cache, this results in a bit less cache being\nallocated to the block tree db, coinsdb and coins caches. The effect is\nnegligible though, i.e. cache sizes with default dbcache reported\nthrough the logs are:\n\nmaster:\nCache configuration:\n* Using 2.0 MiB for block index database\n* Using 56.0 MiB for transaction index database\n* Using 49.0 MiB for basic block filter index database\n* Using 8.0 MiB for chain state database\n* Using 335.0 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n\nthis branch:\nCache configuration:\n* Using 2.0 MiB for block index database\n* Using 56.2 MiB for transaction index database\n* Using 49.2 MiB for basic block filter index database\n* Using 8.0 MiB for chain state database\n* Using 334.5 MiB for in-memory UTXO set (plus up to 286.1 MiB of unused mempool space)\n\nCo-authored-by: Hodlinator <172445034+hodlinator@users.noreply.github.com>",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-01-03T17:15:28Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-11-22T19:51:34Z"
      },
      "sha": "0feefd19eb55608f3a652a911e73acde7e022963"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1MDdmZDAzZDMwNDkwZTNhMGNkMzlkOTkxNzY4NTFhNjUzNjI1ZDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c507fd03d30490e3a0cd39d99176851a653625d3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c507fd03d30490e3a0cd39d99176851a653625d3",
      "tree": {
        "sha": "0b266fa4f02fc77f392a6c66fe1f0da230e56b2d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0b266fa4f02fc77f392a6c66fe1f0da230e56b2d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 0b266fa4f02fc77f392a6c66fe1f0da230e56b2d\nparent 0feefd19eb55608f3a652a911e73acde7e022963\nauthor TheCharlatan <seb.kung@gmail.com> 1732311857 +0100\ncommitter TheCharlatan <seb.kung@gmail.com> 1735924530 +0100\n\nkernel: Move non-kernel db cache size constants\n\nThese have nothing to do with the txdb, so move them out and into the\nnode caches.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmd4GzIACgkQm3m0VpHb\nQXPXng/+MY5yGp3bKKVIA6ukf+7mt3RdnOX8+rsUyTOJV0+wUT+xbhcTBhEotNmy\nIRXJTMxvRZBtSRKc04f60UzSDvzeBf7YuM/dltYJrdu2DzrS+LMXthuOth/E7lz8\niEepThoSmMshofvOTsKkhKvnPAxNXF948a1dUGWgQqEHUub8LsbyZUSsmRq7ZoJl\nkacYYEbvnioCNjrAKaDUzOsIJo6KzLURZS8M0CyAcsqEqaI0mrueBdWUnSXhyMx1\nqd6x7NyhMBcetwMCsbFmo/UHSFuNSNC2ipM+b0dXCwQMggGxnB047jgYshU85lit\n2hymbfL3KYBkMl7vxQLz9XSn7SHW6LiCt/OCEVrOInYKR2fVXdM8kuYRaVmBOi9w\nTPL/yGNqrljWe02B2fBwIhJj3dtPVkrcAvQPMRnjQsKUhSkyiXec5n9FgxtCKYmL\nzF5AQf6SBZJQdjTLBpMJZkrzP4YDKZWTf4pKwAx2cNnheFgpanxriDGWqVj+Lt0e\nP6sxLnmRVaKovSp/8SyiT4SgjtV1gxZBdeTyklFkDpoQEboGB4INoCK0qK73TSjg\nficMan7dk72JfHHLYpq4jvi7hQ4PeDCsBey8q/aqVe58wBlgeEIf2mtJ2Xw5Yjyt\nq4ERgq7RLtadcCK6UF0kwAbME5nplGTHtxp/AcoaoVctUiCsUxI=\n=4X+P\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0feefd19eb55608f3a652a911e73acde7e022963",
          "sha": "0feefd19eb55608f3a652a911e73acde7e022963",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0feefd19eb55608f3a652a911e73acde7e022963"
        }
      ],
      "message": "kernel: Move non-kernel db cache size constants\n\nThese have nothing to do with the txdb, so move them out and into the\nnode caches.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-01-03T17:15:30Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-11-22T21:44:17Z"
      },
      "sha": "c507fd03d30490e3a0cd39d99176851a653625d3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE3ZGVkMjk1NzM2NTEzZWVkZjU2ZGI2MmM3ODY0NmU5MDZlYjM0ZmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7ded295736513eedf56db62c78646e906eb34ff",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a7ded295736513eedf56db62c78646e906eb34ff",
      "tree": {
        "sha": "e93bbb51555d9c5d3759e60a85e072b442f25648",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e93bbb51555d9c5d3759e60a85e072b442f25648"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e93bbb51555d9c5d3759e60a85e072b442f25648\nparent c507fd03d30490e3a0cd39d99176851a653625d3\nauthor TheCharlatan <seb.kung@gmail.com> 1732312322 +0100\ncommitter TheCharlatan <seb.kung@gmail.com> 1735924531 +0100\n\nkernel: Move kernel-related cache constants to kernel cache\n\nThey are not all related to the txdb, so a better place for them is the\nnew kernel cache file.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmd4GzMACgkQm3m0VpHb\nQXPcIA//b6icGJLSVpa3GPdcYb/S94ap3b8a+QiYTxRNv0s/jssBgoLhYXo/8eKl\nDwWlXiXzu6E3Aez5G3csa+syuwxYNqRTnBC3IlIX2jC6j3Oa6MnrmFCDIM0Y9SVa\nyPTfdX36D1LCaJiKgflcBOQrbgeBOWtG81Tndjeod6J4CqvN3z1yrrtveUNJrhsS\nG5KWnKnJM0A6Cy0W+1VP1L/AqpDCLqjftuG4rc3iONbvwIOLmkmdeWiaS6cRAmPr\nA7TYkjnSCn/RvoPEg09hIJmLbCTcfl4labRnn8RZO+Agc9cm/iWSWHCQu2tSaiSn\nRbQA8Er6PQXTZj90lFvzFsjyjpzm8VcNEjVoriTsgAc3hgCkUqYbPdm4VRvok9Fb\nxM2Ar40SZ/5LHypEuyM+lQLU/llHlnRyE3BcKXxpNMtLeNOOmlFS+BNOrrYu3fJC\nBuLcYBusw5TtoPuqAMdLz8yk1fGjb2CSfggaEomUMr03HZhzUzXw5LI14siV4wgs\nkfsILGbzXJ+bmx4tEh0VyviNz+cNlvEfjh3rKul/uAqf78uPEadV4JEte30qNTb+\ntQzsOHk831+rmb/jAAb5DPjWLPY0P7icQmDT0Hy4YuaQb2aw1wHIJPXxK+PIpB+M\nynyYmM6xQQZ4RXrd1auWRtRrrdgG50VVWcW1yLNpnaljPEWHmuk=\n=OhFW\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c507fd03d30490e3a0cd39d99176851a653625d3",
          "sha": "c507fd03d30490e3a0cd39d99176851a653625d3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c507fd03d30490e3a0cd39d99176851a653625d3"
        }
      ],
      "message": "kernel: Move kernel-related cache constants to kernel cache\n\nThey are not all related to the txdb, so a better place for them is the\nnew kernel cache file.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-01-03T17:15:31Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-11-22T21:52:02Z"
      },
      "sha": "a7ded295736513eedf56db62c78646e906eb34ff"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFkODBlNDEwYjNiZjg4MTRjYjViOTk3NzE1ZWU4Y2IyOGYyYTJhNjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "tree": {
        "sha": "b8b38bcd5b140f5944929e2e690e40e21d1db6f0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b8b38bcd5b140f5944929e2e690e40e21d1db6f0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b8b38bcd5b140f5944929e2e690e40e21d1db6f0\nparent a7ded295736513eedf56db62c78646e906eb34ff\nauthor TheCharlatan <seb.kung@gmail.com> 1734469127 +0100\ncommitter TheCharlatan <seb.kung@gmail.com> 1735924532 +0100\n\ninit: Use size_t consistently for cache sizes\n\nThis avoids having to rely on implicit casts when passing them to the\nvarious functions allocating the caches.\n\nThis also fixes a bug where an incorrect amount of memory was allocated\non 32bit platforms. If the db cache size exceeded the maximum size of a\n32 bit unsigned integer, it would overflow and allocate much less memory\nthan instructed to. Fix this by returning an error to the user if the\npassed in dbcache size exceeeds the size of a size_t on that platform.\n\nAdd a release not for the change in behaviour on 32-bit systems.\n\nAlso take this opportunity to make the total amounts of cache in the\nchainstate manager a size_t too.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmd4GzQACgkQm3m0VpHb\nQXOxAxAAs7pRkaJM+x0SoXkz2zxkVLHGvxiIST610qhDTFv19rpVVzPLHBlVddHc\nGxEJYOlGnCn0I6SKUMgPSeCH7RpgB/vPL7xMERWhcYIMoQzIho31YesT/NkpmlRD\nxMTKDjLMakp9HL/jbbzcnYS5+nVIDTFKVv5yI+e/EtWclD3Xy4pB9chrpJMZTmMO\nx40KPjHR9FZvqxH2NLESbX6dZDlbZWBJjS5qq3eKHt4qwlGNADsp1m5QtcyUW5aY\nVGHd35+XfL7ZGK/6Wzu0oAobzNsriuKpHz5BS8ooHQHxkMYfhOHCi2klwmf35oNs\nZn0+6Cze0YV+srt1FnpNeKgA1b+Qwj9H7nJuPiR/Mk0yC1y50fqSUpA/hVBBRPYX\nWZ4saHC4NQ0bdLqfUS0xsXcGPRf1TM1Ybgkhu8FRHrW1TtfgN1ubKveBDIPrAGu1\nlY/P9YsTLftkUC/OohwsY+LtwDyHhNfoSvr+/RlYzXObFP4u3yX6Aia9EyGtozEv\nhZmA2xfkiW1Lcvf1thnVh2boFqKCNdTgH376Ro+vX5FCVcF12XhLUS7SF/2mRtxd\n9kNEaalZgLFcWuH7MRbYgNk9BkrivYYUPnx+YWX9L/dIPzDZxRUWzbEK7uMlAyf2\nO1LPi9xBUvdATkQoElLsw6JFOt1+sAn4GMR0yX15jPBlqUUvJVk=\n=I/Z8\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7ded295736513eedf56db62c78646e906eb34ff",
          "sha": "a7ded295736513eedf56db62c78646e906eb34ff",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a7ded295736513eedf56db62c78646e906eb34ff"
        }
      ],
      "message": "init: Use size_t consistently for cache sizes\n\nThis avoids having to rely on implicit casts when passing them to the\nvarious functions allocating the caches.\n\nThis also fixes a bug where an incorrect amount of memory was allocated\non 32bit platforms. If the db cache size exceeded the maximum size of a\n32 bit unsigned integer, it would overflow and allocate much less memory\nthan instructed to. Fix this by returning an error to the user if the\npassed in dbcache size exceeeds the size of a size_t on that platform.\n\nAdd a release not for the change in behaviour on 32-bit systems.\n\nAlso take this opportunity to make the total amounts of cache in the\nchainstate manager a size_t too.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-01-03T17:15:32Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2024-12-17T20:58:47Z"
      },
      "sha": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15809467706,
      "node_id": "HRFPE_lADOABII586jEBuMzwAAAAOuUVU6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15809467706",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "created_at": "2025-01-03T17:18:52Z"
    },
    {
      "event": "commented",
      "id": 2569566280,
      "node_id": "IC_kwDOABII586ZKHhI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2569566280",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-03T17:18:57Z",
      "updated_at": "2025-01-03T17:19:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thank you for the review and code suggestions @hodlinator,\r\n\r\nUpdated 7517126d9fd2c3e50dc95ce831bac6895b950e24 -> ad80e410b3bf8814cb5b997715ee8cb28f2a2a66 ([kernel_cache_sizes_4](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_4) -> [kernel_cache_sizes_5](https://github.com/TheCharlatan/bitcoin/tree/kernel_cache_sizes_5), [compare](https://github.com/TheCharlatan/bitcoin/compare/kernel_cache_sizes_4..kernel_cache_sizes_5))\r\n\r\n* Add handling for dbcache sizes exceeding `size_t` size. Previously the value would just overflow if larger than 4096 on 32 bit platforms. Now it returns an error on startup. Add a release note for it, since it changes behaviour.\r\n* Addressed @hodlinator's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894643334), made `total_cache` a `size_t` type.\r\n* Addressed @hodlinator's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894591427) and @stickies-v's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1883535731), replacing `std::tuple` with a new struct.\r\n* Addressed @hodlinator's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894597050), renaming `sizes` to `index_sizes` in `node/caches.cpp`.\r\n* Addressed @hodlinator's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894643457), document unit for `MAX_TX_INDEX_CACHE`.\r\n* Addressed @hodlinator's [comment](https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2518616838), add the suggested `MiBToBytes` function.\r\n* Addressed @hodlinator's [comment](https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894593777), added a hint to the commit message on when the docstring describing the block tree db cache initialization became inaccurate. ",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#issuecomment-2569566280",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31483"
    },
    {
      "event": "mentioned",
      "id": 15809468605,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOuUVi9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15809468605",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-03T17:18:58Z"
    },
    {
      "event": "subscribed",
      "id": 15809468614,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOuUVjG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15809468614",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-03T17:18:58Z"
    },
    {
      "event": "mentioned",
      "id": 15809477310,
      "node_id": "MEE_lADOABII586jEBuMzwAAAAOuUXq-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15809477310",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-03T17:20:12Z"
    },
    {
      "event": "subscribed",
      "id": 15809477319,
      "node_id": "SE_lADOABII586jEBuMzwAAAAOuUXrH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15809477319",
      "actor": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-03T17:20:12Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1881990823",
      "pull_request_review_id": 2499365306,
      "id": 1881990823,
      "node_id": "PRRC_kwDOABII585wLOan",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! min. -dbcache (MiB)\n+static constexpr int64_t MIN_DB_CACHE{4};\n+//! -dbcache default (MiB)\n+static constexpr int64_t DEFAULT_DB_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 15,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "62da6a0b1ef99fc00357e967fe868ca3235cc4fb",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Missing the `(MiB)` comment.",
      "created_at": "2024-12-12T12:40:39Z",
      "updated_at": "2024-12-12T12:40:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1881990823",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1881990823"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1882016734",
      "pull_request_review_id": 2499436523,
      "id": 1882016734,
      "node_id": "PRRC_kwDOABII585wLUve",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! min. -dbcache (MiB)\n+static constexpr int64_t MIN_DB_CACHE{4};\n+//! -dbcache default (MiB)\n+static constexpr int64_t DEFAULT_DB_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 15,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "62da6a0b1ef99fc00357e967fe868ca3235cc4fb",
      "in_reply_to_id": 1881990823,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, fixed.",
      "created_at": "2024-12-12T12:58:37Z",
      "updated_at": "2024-12-12T12:58:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1882016734",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1882016734"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1883535731",
      "pull_request_review_id": 2501686219,
      "id": 1883535731,
      "node_id": "PRRC_kwDOABII585wRHlz",
      "diff_hunk": "@@ -5,20 +5,20 @@\n #ifndef BITCOIN_NODE_CACHES_H\n #define BITCOIN_NODE_CACHES_H\n \n+#include <kernel/caches.h>\n+\n #include <cstddef>\n #include <cstdint>\n+#include <tuple>\n \n class ArgsManager;\n \n namespace node {\n-struct CacheSizes {\n-    int64_t block_tree_db;\n-    int64_t coins_db;\n-    int64_t coins;\n+struct IndexCacheSizes {",
      "path": "src/node/caches.h",
      "position": 18,
      "original_position": 17,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: will we have separate structs for different node cache sizes? I think just keeping it `CacheSizes` and adding the `node::` namespace in ambiguous places makes more sense for now?\r\n\r\n<details>\r\n<summary>git diff on 2e6c43f9c3</summary>\r\n\r\n```diff\r\ndiff --git a/src/node/caches.cpp b/src/node/caches.cpp\r\nindex 50e41b8d1e..41bd8c95d0 100644\r\n--- a/src/node/caches.cpp\r\n+++ b/src/node/caches.cpp\r\n@@ -13,11 +13,11 @@\r\n #include <string>\r\n \r\n namespace node {\r\n-std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\r\n+std::tuple<node::CacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\r\n {\r\n     int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", nDefaultDbCache) << 20);\r\n     nTotalCache = std::max(nTotalCache, nMinDbCache << 20); // total cache cannot be less than nMinDbCache\r\n-    IndexCacheSizes sizes;\r\n+    CacheSizes sizes;\r\n     sizes.tx_index = std::min(nTotalCache / 8, args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX) ? nMaxTxIndexCache << 20 : 0);\r\n     nTotalCache -= sizes.tx_index;\r\n     sizes.filter_index = 0;\r\ndiff --git a/src/node/caches.h b/src/node/caches.h\r\nindex f4cc14bb23..c47134539b 100644\r\n--- a/src/node/caches.h\r\n+++ b/src/node/caches.h\r\n@@ -14,11 +14,11 @@\r\n class ArgsManager;\r\n \r\n namespace node {\r\n-struct IndexCacheSizes {\r\n+struct CacheSizes {\r\n     int64_t tx_index;\r\n     int64_t filter_index;\r\n };\r\n-std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);\r\n+std::tuple<node::CacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);\r\n } // namespace node\r\n \r\n #endif // BITCOIN_NODE_CACHES_H\r\ndiff --git a/src/test/util/setup_common.h b/src/test/util/setup_common.h\r\nindex 46035772f5..fbea90a20b 100644\r\n--- a/src/test/util/setup_common.h\r\n+++ b/src/test/util/setup_common.h\r\n@@ -104,7 +104,7 @@ struct BasicTestingSetup {\r\n  * initialization behaviour.\r\n  */\r\n struct ChainTestingSetup : public BasicTestingSetup {\r\n-    node::IndexCacheSizes m_index_cache_sizes{std::get<0>(node::CalculateCacheSizes(m_args))};\r\n+    node::CacheSizes m_index_cache_sizes{std::get<0>(node::CalculateCacheSizes(m_args))};\r\n     kernel::CacheSizes m_kernel_cache_sizes{std::get<1>(node::CalculateCacheSizes(m_args))};\r\n     bool m_coins_db_in_memory{true};\r\n     bool m_block_tree_db_in_memory{true};\r\n\r\n```\r\n</details>\r\n",
      "created_at": "2024-12-13T08:18:57Z",
      "updated_at": "2024-12-13T15:12:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1883535731",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1883535731"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1883674740",
      "pull_request_review_id": 2501686219,
      "id": 1883674740,
      "node_id": "PRRC_kwDOABII585wRph0",
      "diff_hunk": "@@ -119,9 +120,10 @@ using common::AmountErrMsg;\n using common::InvalidPortErrMsg;\n using common::ResolveErrMsg;\n \n+using kernel::CacheSizes;",
      "path": "src/init.cpp",
      "position": 12,
      "original_position": 12,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: since it doesn't meaningfully change the diff, I would much prefer not to use `using` here to immediately disambiguate with `node::CacheSizes` (+ in `chainstate.cpp`)\r\n\r\n<details>\r\n<summary>git diff on 2e6c43f9c3</summary>\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex dd273cfe61..f52933b658 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -120,8 +120,6 @@ using common::AmountErrMsg;\r\n using common::InvalidPortErrMsg;\r\n using common::ResolveErrMsg;\r\n \r\n-using kernel::CacheSizes;\r\n-\r\n using node::ApplyArgsManOptions;\r\n using node::BlockManager;\r\n using node::CalculateCacheSizes;\r\n@@ -1179,7 +1177,7 @@ static ChainstateLoadResult InitAndLoadChainstate(\r\n     NodeContext& node,\r\n     bool do_reindex,\r\n     const bool do_reindex_chainstate,\r\n-    CacheSizes& cache_sizes,\r\n+    kernel::CacheSizes& cache_sizes,\r\n     const ArgsManager& args)\r\n {\r\n     const CChainParams& chainparams = Params();\r\ndiff --git a/src/node/chainstate.cpp b/src/node/chainstate.cpp\r\nindex 660d2c3289..d4d8828f73 100644\r\n--- a/src/node/chainstate.cpp\r\n+++ b/src/node/chainstate.cpp\r\n@@ -29,14 +29,12 @@\r\n #include <memory>\r\n #include <vector>\r\n \r\n-using kernel::CacheSizes;\r\n-\r\n namespace node {\r\n // Complete initialization of chainstates after the initial call has been made\r\n // to ChainstateManager::InitializeChainstate().\r\n static ChainstateLoadResult CompleteChainstateInitialization(\r\n     ChainstateManager& chainman,\r\n-    const CacheSizes& cache_sizes,\r\n+    const kernel::CacheSizes& cache_sizes,\r\n     const ChainstateLoadOptions& options) EXCLUSIVE_LOCKS_REQUIRED(::cs_main)\r\n {\r\n     auto& pblocktree{chainman.m_blockman.m_block_tree_db};\r\n@@ -172,7 +170,7 @@ static ChainstateLoadResult CompleteChainstateInitialization(\r\n     return {ChainstateLoadStatus::SUCCESS, {}};\r\n }\r\n \r\n-ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const CacheSizes& cache_sizes,\r\n+ChainstateLoadResult LoadChainstate(ChainstateManager& chainman, const kernel::CacheSizes& cache_sizes,\r\n                                     const ChainstateLoadOptions& options)\r\n {\r\n     if (!chainman.AssumedValidBlock().IsNull()) {\r\n\r\n```\r\n</details>\r\n\r\nedit: oh, that's less true for the current `node::IndexCacheSizes` name of course. I personally still prefer keeping the namespace for clarity, but it also fits within the `init.cpp` coding style.\r\n",
      "created_at": "2024-12-13T10:01:59Z",
      "updated_at": "2024-12-13T15:12:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1883674740",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1883674740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 123,
      "original_line": 123,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1883694847",
      "pull_request_review_id": 2501686219,
      "id": 1883694847,
      "node_id": "PRRC_kwDOABII585wRub_",
      "diff_hunk": "@@ -12,6 +12,7 @@\n \n #include <common/args.h>\n #include <interfaces/node.h>\n+#include <kernel/caches.h>",
      "path": "src/qt/optionsmodel.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "2e6c43f9c3aed577678a537b5456adaa31a2cb04",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: this is in the wrong commit (2e6c43f9c3aed577678a537b5456adaa31a2cb04)",
      "created_at": "2024-12-13T10:14:51Z",
      "updated_at": "2024-12-13T15:12:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1883694847",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1883694847"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1884061716",
      "pull_request_review_id": 2501686219,
      "id": 1884061716,
      "node_id": "PRRC_kwDOABII585wTIAU",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! min. -dbcache (MiB)\n+static constexpr int64_t MIN_DB_CACHE{4};\n+//! -dbcache default (MiB)\n+static constexpr int64_t DEFAULT_DB_CACHE{450};",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 14,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm not sure what the best solution is, but aren't `MIN_DB_CACHE` and `DEFAULT_DB_CACHE` `node` attributes, instead of `kernel`? Then again, we do need a default total cache size in kernel, so maybe the best approach is to just rename to e.g. `MIN_KERNEL_CACHE` and `DEFAULT_KERNEL_CACHE` - or redefine `DEFAULT_DB_CACHE{DEFAULT_KERNEL_CACHE};`?",
      "created_at": "2024-12-13T14:57:45Z",
      "updated_at": "2024-12-13T15:12:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1884061716",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1884061716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": 12,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1884078251",
      "pull_request_review_id": 2501686219,
      "id": 1884078251,
      "node_id": "PRRC_kwDOABII585wTMCr",
      "diff_hunk": "@@ -103,7 +104,8 @@ struct BasicTestingSetup {\n  * initialization behaviour.\n  */\n struct ChainTestingSetup : public BasicTestingSetup {\n-    node::CacheSizes m_cache_sizes{};\n+    node::IndexCacheSizes m_index_cache_sizes{std::get<0>(node::CalculateCacheSizes(m_args))};",
      "path": "src/test/util/setup_common.h",
      "position": null,
      "original_position": 13,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This member is not used, best to remove until it is?",
      "created_at": "2024-12-13T15:09:51Z",
      "updated_at": "2024-12-13T15:12:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1884078251",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1884078251"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1884999663",
      "pull_request_review_id": 2503766075,
      "id": 1884999663,
      "node_id": "PRRC_kwDOABII585wWs_v",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! min. -dbcache (MiB)\n+static constexpr int64_t MIN_DB_CACHE{4};\n+//! -dbcache default (MiB)\n+static constexpr int64_t DEFAULT_DB_CACHE{450};",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 14,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": 1884061716,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Mmh, is there a scenario where `DEFAULT_DB_CACHE` and `DEFAULT_KERNEL_CACHE` would ever diverge? The current naming does not seem too confusing to me.",
      "created_at": "2024-12-14T09:43:43Z",
      "updated_at": "2024-12-14T10:10:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1884999663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1884999663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": 12,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1885000798",
      "pull_request_review_id": 2503766075,
      "id": 1885000798,
      "node_id": "PRRC_kwDOABII585wWtRe",
      "diff_hunk": "@@ -5,20 +5,20 @@\n #ifndef BITCOIN_NODE_CACHES_H\n #define BITCOIN_NODE_CACHES_H\n \n+#include <kernel/caches.h>\n+\n #include <cstddef>\n #include <cstdint>\n+#include <tuple>\n \n class ArgsManager;\n \n namespace node {\n-struct CacheSizes {\n-    int64_t block_tree_db;\n-    int64_t coins_db;\n-    int64_t coins;\n+struct IndexCacheSizes {",
      "path": "src/node/caches.h",
      "position": 18,
      "original_position": 17,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": 1883535731,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "My expectation would be that if other non-index caches are added later, they would get their own struct too. This also might make it a bit easier in case the indexes ever get their own process?",
      "created_at": "2024-12-14T09:45:26Z",
      "updated_at": "2024-12-14T10:10:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1885000798",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1885000798"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1887412097",
      "pull_request_review_id": 2507107693,
      "id": 1887412097,
      "node_id": "PRRC_kwDOABII585wf5-B",
      "diff_hunk": "@@ -0,0 +1,38 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! min. -dbcache (MiB)\n+static constexpr int64_t MIN_DB_CACHE{4};\n+//! -dbcache default (MiB)\n+static constexpr int64_t DEFAULT_DB_CACHE{450};",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 14,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": 1884061716,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Mmh, is there a scenario where `DEFAULT_DB_CACHE` and `DEFAULT_KERNEL_CACHE` would ever diverge?\r\n\r\n`node` could decide to increase the default total cache size (e.g. because it enables certain indexes by default), and that shouldn't affect the `kernel` default cache size.\r\n\r\n> The current naming does not seem too confusing to me.\r\n\r\nIt's not necessarily confusing, but `-dbcache` is a node setting, not a kernel setting. So I think `DEFAULT_KERNEL_CACHE` is both more accurate (in `kernel/caches.h`) and - as per the previous paragraph - more futureproof.\r\n\r\nEither way, it's easy to fix in the future. My suggestion feels more logical to me but either is fine, so can be resolved if you disagree.",
      "created_at": "2024-12-16T19:31:42Z",
      "updated_at": "2024-12-16T19:31:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1887412097",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1887412097"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": 12,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 14,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1887420476",
      "pull_request_review_id": 2507116596,
      "id": 1887420476,
      "node_id": "PRRC_kwDOABII585wf8A8",
      "diff_hunk": "@@ -5,20 +5,20 @@\n #ifndef BITCOIN_NODE_CACHES_H\n #define BITCOIN_NODE_CACHES_H\n \n+#include <kernel/caches.h>\n+\n #include <cstddef>\n #include <cstdint>\n+#include <tuple>\n \n class ArgsManager;\n \n namespace node {\n-struct CacheSizes {\n-    int64_t block_tree_db;\n-    int64_t coins_db;\n-    int64_t coins;\n+struct IndexCacheSizes {",
      "path": "src/node/caches.h",
      "position": 18,
      "original_position": 17,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "173477b5efad4723863b38fe51cd1156620d01df",
      "in_reply_to_id": 1883535731,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Works for me, thanks!",
      "created_at": "2024-12-16T19:33:39Z",
      "updated_at": "2024-12-16T19:33:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1887420476",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1887420476"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 22,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1888558172",
      "pull_request_review_id": 2508948359,
      "id": 1888558172,
      "node_id": "PRRC_kwDOABII585wkRxc",
      "diff_hunk": "@@ -6,28 +6,31 @@\n \n #include <common/args.h>\n #include <index/txindex.h>\n-#include <txdb.h>\n+#include <kernel/caches.h>\n+\n+#include <algorithm>\n+#include <string>\n+\n+// Unlike for the UTXO database, for the txindex scenario the leveldb cache make\n+// a meaningful difference: https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229601991\n+static constexpr int64_t MAX_TX_INDEX_CACHE{1024};\n+//! Max memory allocated to all block filter index caches combined in MiB.\n+static constexpr int64_t MAX_FILTER_INDEX_CACHE{1024};\n \n namespace node {\n-CacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n+std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n {\n-    int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", nDefaultDbCache) << 20);\n-    nTotalCache = std::max(nTotalCache, nMinDbCache << 20); // total cache cannot be less than nMinDbCache\n-    CacheSizes sizes;\n-    sizes.block_tree_db = std::min(nTotalCache / 8, nMaxBlockDBCache << 20);\n-    nTotalCache -= sizes.block_tree_db;\n-    sizes.tx_index = std::min(nTotalCache / 8, args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX) ? nMaxTxIndexCache << 20 : 0);\n+    int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", DEFAULT_DB_CACHE) << 20);\n+    nTotalCache = std::max(nTotalCache, MIN_DB_CACHE << 20); // total cache cannot be less than nMinDbCache",
      "path": "src/node/caches.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "2c49e0bfd295dc0326d02cd0a80853d7dee885ac",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```suggestion\r\n    nTotalCache = std::max(nTotalCache, MIN_DB_CACHE << 20); // total cache cannot be less than MIN_DB_CACHE\r\n```\r\nedit: actually, the comment is pretty redundant, might as well just remove it too.",
      "created_at": "2024-12-17T13:53:00Z",
      "updated_at": "2024-12-17T14:51:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1888558172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1888558172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1888724781",
      "pull_request_review_id": 2509230463,
      "id": 1888724781,
      "node_id": "PRRC_kwDOABII585wk6ct",
      "diff_hunk": "@@ -6,28 +6,31 @@\n \n #include <common/args.h>\n #include <index/txindex.h>\n-#include <txdb.h>\n+#include <kernel/caches.h>\n+\n+#include <algorithm>\n+#include <string>\n+\n+// Unlike for the UTXO database, for the txindex scenario the leveldb cache make\n+// a meaningful difference: https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229601991\n+static constexpr int64_t MAX_TX_INDEX_CACHE{1024};\n+//! Max memory allocated to all block filter index caches combined in MiB.\n+static constexpr int64_t MAX_FILTER_INDEX_CACHE{1024};\n \n namespace node {\n-CacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n+std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n {\n-    int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", nDefaultDbCache) << 20);\n-    nTotalCache = std::max(nTotalCache, nMinDbCache << 20); // total cache cannot be less than nMinDbCache\n-    CacheSizes sizes;\n-    sizes.block_tree_db = std::min(nTotalCache / 8, nMaxBlockDBCache << 20);\n-    nTotalCache -= sizes.block_tree_db;\n-    sizes.tx_index = std::min(nTotalCache / 8, args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX) ? nMaxTxIndexCache << 20 : 0);\n+    int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", DEFAULT_DB_CACHE) << 20);\n+    nTotalCache = std::max(nTotalCache, MIN_DB_CACHE << 20); // total cache cannot be less than nMinDbCache",
      "path": "src/node/caches.cpp",
      "position": null,
      "original_position": 27,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "2c49e0bfd295dc0326d02cd0a80853d7dee885ac",
      "in_reply_to_id": 1888558172,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "thanks for the suggestion, I removed it.",
      "created_at": "2024-12-17T15:37:32Z",
      "updated_at": "2024-12-17T15:37:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1888724781",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1888724781"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1888992732",
      "pull_request_review_id": 2509692136,
      "id": 1888992732,
      "node_id": "PRRC_kwDOABII585wl73c",
      "diff_hunk": "@@ -18,10 +23,10 @@ struct CacheSizes {\n \n     CacheSizes(int64_t total_cache)\n     {\n-        block_tree_db = std::min(total_cache / 8, nMaxBlockDBCache << 20);\n+        block_tree_db = std::min(total_cache / 8, MAX_BLOCK_DB_CACHE << 20);\n         total_cache -= block_tree_db;\n         // use 25%-50% of the remainder for disk cache, capped by the maximum.\n-        coins_db = std::min({total_cache / 2, (total_cache / 4) + (1 << 23), nMaxCoinsDBCache << 20});\n+        coins_db = std::min({total_cache / 2, (total_cache / 4) + (1 << 23), MAX_COINS_DB_CACHE << 20});",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 28,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "8e929e343e14b0228f6f4841ecf2d85a73afda3b",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: In commit \"kernel: Move kernel-related cache constants to kernel cache\" (8e929e343e14b0228f6f4841ecf2d85a73afda3b)\r\n\r\nPrecedes this PR, but this code does not seem to make any sense. (1 << 23) is 8MiB which is the same as MAX_COINS_DB_CACHE. So this is effectively min(total / 2, total / 4 + 8MiB, 8Mib) with the middle argument not doing anything. Could be simplified to `std::min(total_cache / 2, MAX_COINS_DB_CACHE << 20)` with no change in behavior AFAICT.",
      "created_at": "2024-12-17T18:09:17Z",
      "updated_at": "2024-12-17T18:24:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1888992732",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1888992732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1889179809",
      "pull_request_review_id": 2510045835,
      "id": 1889179809,
      "node_id": "PRRC_kwDOABII585wmpih",
      "diff_hunk": "@@ -18,10 +23,10 @@ struct CacheSizes {\n \n     CacheSizes(int64_t total_cache)\n     {\n-        block_tree_db = std::min(total_cache / 8, nMaxBlockDBCache << 20);\n+        block_tree_db = std::min(total_cache / 8, MAX_BLOCK_DB_CACHE << 20);\n         total_cache -= block_tree_db;\n         // use 25%-50% of the remainder for disk cache, capped by the maximum.\n-        coins_db = std::min({total_cache / 2, (total_cache / 4) + (1 << 23), nMaxCoinsDBCache << 20});\n+        coins_db = std::min({total_cache / 2, (total_cache / 4) + (1 << 23), MAX_COINS_DB_CACHE << 20});",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 28,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "8e929e343e14b0228f6f4841ecf2d85a73afda3b",
      "in_reply_to_id": 1888992732,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Heh, I guess I should have actually done the math here. Will remove.",
      "created_at": "2024-12-17T20:31:57Z",
      "updated_at": "2024-12-17T20:31:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1889179809",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1889179809"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 29,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890138649",
      "pull_request_review_id": 2511656329,
      "id": 1890138649,
      "node_id": "PRRC_kwDOABII585wqToZ",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! Suggested default amount of cache reserved for the kernel (MiB)\n+static constexpr int64_t DEFAULT_KERNEL_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache (MiB)\n+static constexpr int64_t MAX_BLOCK_DB_CACHE{2};\n+//! Max memory allocated to coin DB specific cache (MiB)\n+static constexpr int64_t MAX_COINS_DB_CACHE{8};\n+\n+namespace kernel {\n+struct CacheSizes {\n+    size_t block_tree_db;\n+    size_t coins_db;\n+    size_t coins;\n+\n+    CacheSizes(int64_t total_cache)\n+    {\n+        block_tree_db = std::min(total_cache / 8, MAX_BLOCK_DB_CACHE << 20);",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 26,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Would be prudent to ensure no negative values here\r\n```suggestion\r\n        assert(total_cache >= 0);\r\n        block_tree_db = std::min(total_cache / 8, MAX_BLOCK_DB_CACHE << 20);\r\n```",
      "created_at": "2024-12-18T12:12:45Z",
      "updated_at": "2024-12-18T12:24:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890138649",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890138649"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890151750",
      "pull_request_review_id": 2511656329,
      "id": 1890151750,
      "node_id": "PRRC_kwDOABII585wqW1G",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! Suggested default amount of cache reserved for the kernel (MiB)\n+static constexpr int64_t DEFAULT_KERNEL_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache (MiB)\n+static constexpr int64_t MAX_BLOCK_DB_CACHE{2};\n+//! Max memory allocated to coin DB specific cache (MiB)\n+static constexpr int64_t MAX_COINS_DB_CACHE{8};\n+\n+namespace kernel {\n+struct CacheSizes {\n+    size_t block_tree_db;\n+    size_t coins_db;\n+    size_t coins;",
      "path": "src/kernel/caches.h",
      "position": 34,
      "original_position": 22,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": null,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think I'm ~0 on this change. I follow @ryanofsky's [reasoning](https://github.com/bitcoin/bitcoin/pull/31483#pullrequestreview-2509692136), but it also goes against the work done e.g. in https://github.com/bitcoin/bitcoin/pull/23962. If `kernel::CacheSizes` becomes part of the public kernel interface, then keeping these members an `int64_t` might be more prudent, as per e.g. the link in [this comment](https://github.com/bitcoin/bitcoin/pull/23962#issuecomment-1005494716)? But of course, `size_t` is a pretty natural fit for a size type.",
      "created_at": "2024-12-18T12:23:39Z",
      "updated_at": "2024-12-18T12:24:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890151750",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890151750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": 32,
      "original_start_line": 20,
      "start_side": "RIGHT",
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890537379",
      "pull_request_review_id": 2512351049,
      "id": 1890537379,
      "node_id": "PRRC_kwDOABII585wr0-j",
      "diff_hunk": "@@ -24,8 +24,7 @@ CacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n         sizes.filter_index = max_cache / n_indexes;\n         nTotalCache -= sizes.filter_index * n_indexes;\n     }\n-    sizes.coins_db = std::min(nTotalCache / 2, (nTotalCache / 4) + (1 << 23)); // use 25%-50% of the remainder for disk cache\n-    sizes.coins_db = std::min(sizes.coins_db, nMaxCoinsDBCache << 20); // cap total coins db cache",
      "path": "src/node/caches.cpp",
      "position": 51,
      "original_position": 5,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "c71fc6ac6e62e5eea96e8aa4e0f43260afc81723",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"init: Simplify coinsdb cache calculation\" (c71fc6ac6e62e5eea96e8aa4e0f43260afc81723)\r\n\r\nFor background on why previous code was written this way, apparently the first line `coins_db = min(total / 2, total / 4 + 8MiB)` made sense when it was added in b3ed4236beb7f68e1720ceb3da15e0c3682ef629 from #6102. But when the second line `coins_db = min(coins_db, 8MiB)` was added later in 32cab91278651d07a11132b7636dc3d21144e616 from [#8273](https://github.com/bitcoin/bitcoin/pull/8273), the `total / 4` term in the first line became redundant.\r\n\r\nIt seems like the second change was probably intentional (even though the implementation is confusing) because the commit message says \"This avoids that the extra cache memory goes to the much less effective\r\nleveldb cache instead of our application-level cache.\"",
      "created_at": "2024-12-18T16:40:00Z",
      "updated_at": "2024-12-18T17:09:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890537379",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890537379"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": 27,
      "original_start_line": 27,
      "start_side": "LEFT",
      "line": 28,
      "original_line": 28,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890571436",
      "pull_request_review_id": 2512351049,
      "id": 1890571436,
      "node_id": "PRRC_kwDOABII585wr9Ss",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! Suggested default amount of cache reserved for the kernel (MiB)\n+static constexpr int64_t DEFAULT_KERNEL_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache (MiB)\n+static constexpr int64_t MAX_BLOCK_DB_CACHE{2};\n+//! Max memory allocated to coin DB specific cache (MiB)\n+static constexpr int64_t MAX_COINS_DB_CACHE{8};\n+\n+namespace kernel {\n+struct CacheSizes {\n+    size_t block_tree_db;\n+    size_t coins_db;\n+    size_t coins;",
      "path": "src/kernel/caches.h",
      "position": 34,
      "original_position": 22,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": 1890151750,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890151750\r\n\r\nI agree with changes in the issues you linked to, but I don't think the reasoning in those cases carries over to this one. int32_t is a good choice for transaction sizes and weights, because we know the sizes of transactions are bounded and can't get very big, so it makes sense to use a small type, and we want the bounds to be platform independent so it makes to use fixed width types, and because they are numbers we do arithmetic with, and signed types tend to be safer than unsigned types for arithmetic.\r\n\r\nI think size_t is a better choice for the cache size variables in this PR, because these values are eventually used to allocate memory so making them size_t from the beginning is clearer and avoids the need for casts and conversions later on. Also size_t is the standard type to use for this purpose so it's more idiomatic c++. Also maximum cache sizes do depend on the platform, so size_t a safe choice because it is guaranteed to be able to represent the maximum size of any allocated object on a platform. I do think a downside of choosing size_t is that it is unsigned and unsigned types have less intuitive overflow behavior, but if the values are just going to get casted to size_t later anyway, potentially bad overflow behavior is there no matter what.",
      "created_at": "2024-12-18T17:03:58Z",
      "updated_at": "2024-12-18T17:10:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890571436",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890571436"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": 32,
      "original_start_line": 20,
      "start_side": "RIGHT",
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890652637",
      "pull_request_review_id": 2512542163,
      "id": 1890652637,
      "node_id": "PRRC_kwDOABII585wsRHd",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! Suggested default amount of cache reserved for the kernel (MiB)\n+static constexpr int64_t DEFAULT_KERNEL_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache (MiB)\n+static constexpr int64_t MAX_BLOCK_DB_CACHE{2};\n+//! Max memory allocated to coin DB specific cache (MiB)\n+static constexpr int64_t MAX_COINS_DB_CACHE{8};\n+\n+namespace kernel {\n+struct CacheSizes {\n+    size_t block_tree_db;\n+    size_t coins_db;\n+    size_t coins;",
      "path": "src/kernel/caches.h",
      "position": 34,
      "original_position": 22,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": 1890151750,
      "user": {
        "login": "stickies-v",
        "id": 69010457,
        "node_id": "MDQ6VXNlcjY5MDEwNDU3",
        "avatar_url": "https://avatars.githubusercontent.com/u/69010457?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stickies-v",
        "html_url": "https://github.com/stickies-v",
        "followers_url": "https://api.github.com/users/stickies-v/followers",
        "following_url": "https://api.github.com/users/stickies-v/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stickies-v/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stickies-v/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stickies-v/subscriptions",
        "organizations_url": "https://api.github.com/users/stickies-v/orgs",
        "repos_url": "https://api.github.com/users/stickies-v/repos",
        "events_url": "https://api.github.com/users/stickies-v/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stickies-v/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah, thinking about it more I agree with all of your points. I was a bit alarmed by all the comparison operations we were doing with these (now) `size_t` types, but they almost all happen inside the constructor. Once the sizes are determined, they don't seem likely to be used for arithmetic operations or comparisons, just for allocating memory.\r\n\r\nI think the benefits you outline outweigh the potential downsides, so I'm happy with the new approach.",
      "created_at": "2024-12-18T18:14:16Z",
      "updated_at": "2024-12-18T18:14:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890652637",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1890652637"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": 32,
      "original_start_line": 20,
      "start_side": "RIGHT",
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894591427",
      "pull_request_review_id": 2518616838,
      "id": 1894591427,
      "node_id": "PRRC_kwDOABII585w7SvD",
      "diff_hunk": "@@ -5,20 +5,25 @@\n #ifndef BITCOIN_NODE_CACHES_H\n #define BITCOIN_NODE_CACHES_H\n \n+#include <kernel/caches.h>\n+\n #include <cstddef>\n #include <cstdint>\n+#include <tuple>\n \n class ArgsManager;\n \n+//! min. -dbcache (MiB)\n+static constexpr int64_t MIN_DB_CACHE{4};\n+//! -dbcache default (MiB)\n+static constexpr int64_t DEFAULT_DB_CACHE{DEFAULT_KERNEL_CACHE};\n+\n namespace node {\n-struct CacheSizes {\n-    int64_t block_tree_db;\n-    int64_t coins_db;\n-    int64_t coins;\n-    int64_t tx_index;\n-    int64_t filter_index;\n+struct IndexCacheSizes {\n+    size_t tx_index;\n+    size_t filter_index;\n };\n-CacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);\n+std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);",
      "path": "src/node/caches.h",
      "position": null,
      "original_position": 29,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Me and the compilers would prefer a contrived name over `std::tuple<...>`. It still allows for the structured bindings in *init.cpp*.\r\n\r\n\r\n```suggestion\r\nstruct IndexAndKernelCacheSizes {\r\n    IndexCacheSizes index;\r\n    kernel::CacheSizes kernel;\r\n};\r\nIndexAndKernelCacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);\r\n```\r\n\r\n<details>\r\n<summary>Full diff</summary>\r\n\r\n```diff\r\ndiff --git a/src/node/caches.cpp b/src/node/caches.cpp\r\nindex bd0c93d76f..c7197b6ef1 100644\r\n--- a/src/node/caches.cpp\r\n+++ b/src/node/caches.cpp\r\n@@ -18,7 +18,7 @@ static constexpr int64_t MAX_TX_INDEX_CACHE{1024};\r\n static constexpr int64_t MAX_FILTER_INDEX_CACHE{1024};\r\n \r\n namespace node {\r\n-std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\r\n+IndexAndKernelCacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\r\n {\r\n     int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", DEFAULT_DB_CACHE) << 20);\r\n     nTotalCache = std::max(nTotalCache, MIN_DB_CACHE << 20);\r\ndiff --git a/src/node/caches.h b/src/node/caches.h\r\nindex 02b91cee87..afa0946d8b 100644\r\n--- a/src/node/caches.h\r\n+++ b/src/node/caches.h\r\n@@ -9,7 +9,6 @@\r\n \r\n #include <cstddef>\r\n #include <cstdint>\r\n-#include <tuple>\r\n \r\n class ArgsManager;\r\n \r\n@@ -23,7 +22,11 @@ struct IndexCacheSizes {\r\n     size_t tx_index;\r\n     size_t filter_index;\r\n };\r\n-std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);\r\n+struct IndexAndKernelCacheSizes {\r\n+    IndexCacheSizes index;\r\n+    kernel::CacheSizes kernel;\r\n+};\r\n+IndexAndKernelCacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes = 0);\r\n } // namespace node\r\n \r\n #endif // BITCOIN_NODE_CACHES_H\r\ndiff --git a/src/test/util/setup_common.h b/src/test/util/setup_common.h\r\nindex ca9e2111a4..33ad258457 100644\r\n--- a/src/test/util/setup_common.h\r\n+++ b/src/test/util/setup_common.h\r\n@@ -104,7 +104,7 @@ struct BasicTestingSetup {\r\n  * initialization behaviour.\r\n  */\r\n struct ChainTestingSetup : public BasicTestingSetup {\r\n-    kernel::CacheSizes m_kernel_cache_sizes{std::get<1>(node::CalculateCacheSizes(m_args))};\r\n+    kernel::CacheSizes m_kernel_cache_sizes{node::CalculateCacheSizes(m_args).kernel};\r\n     bool m_coins_db_in_memory{true};\r\n     bool m_block_tree_db_in_memory{true};\r\n     std::function<void()> m_make_chainman{};\r\n```\r\n</details>\r\n\r\nThe compilation speed difference is probably not measurable, more a case of death by a thousand eventual cuts.",
      "created_at": "2024-12-21T09:27:55Z",
      "updated_at": "2024-12-21T22:25:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894591427",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894591427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894593777",
      "pull_request_review_id": 2518616838,
      "id": 1894593777,
      "node_id": "PRRC_kwDOABII585w7TTx",
      "diff_hunk": "@@ -21,22 +21,8 @@\n class COutPoint;\n class uint256;\n \n-//! -dbcache default (MiB)\n-static const int64_t nDefaultDbCache = 450;\n //! -dbbatchsize default (bytes)\n static const int64_t nDefaultDbBatchSize = 16 << 20;\n-//! min. -dbcache (MiB)\n-static const int64_t nMinDbCache = 4;\n-//! Max memory allocated to block tree DB specific cache, if no -txindex (MiB)\n-static const int64_t nMaxBlockDBCache = 2;\n-//! Max memory allocated to block tree DB specific cache, if -txindex (MiB)",
      "path": "src/txdb.h",
      "position": 12,
      "original_position": 12,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: The message of commit 69159326810822c804ab53a009ef57fb5f28fac9 belonging to this PR states:\r\n> It always applied in the same way, no matter how the txindex is setup.\r\n\r\nThere is some nuance here, the comment was correct in 32cab91278651d07a11132b7636dc3d21144e616 (laanwj 2016 #8273), but was no longer valid after 8181db88f6e0ed96654951e18b1558cd8f78765b (jimpo 2017 #13033). Could add nuance to the commit message.",
      "created_at": "2024-12-21T09:48:28Z",
      "updated_at": "2024-12-21T22:25:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894593777",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894593777"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 32,
      "original_line": 32,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894596535",
      "pull_request_review_id": 2518616838,
      "id": 1894596535,
      "node_id": "PRRC_kwDOABII585w7T-3",
      "diff_hunk": "@@ -24,8 +24,7 @@ CacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n         sizes.filter_index = max_cache / n_indexes;\n         nTotalCache -= sizes.filter_index * n_indexes;\n     }\n-    sizes.coins_db = std::min(nTotalCache / 2, (nTotalCache / 4) + (1 << 23)); // use 25%-50% of the remainder for disk cache\n-    sizes.coins_db = std::min(sizes.coins_db, nMaxCoinsDBCache << 20); // cap total coins db cache",
      "path": "src/node/caches.cpp",
      "position": 51,
      "original_position": 5,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "c71fc6ac6e62e5eea96e8aa4e0f43260afc81723",
      "in_reply_to_id": 1890537379,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890537379\r\n\r\nAgree with the simplification mostly. Only way the old calculation was useful was if someone was to tweak `nMaxCoinsDBCache` to be lower than `(1 << 23)`/8MiB, which is very unlikely.",
      "created_at": "2024-12-21T10:10:55Z",
      "updated_at": "2024-12-21T22:25:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894596535",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894596535"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": 27,
      "original_start_line": 27,
      "start_side": "LEFT",
      "line": 28,
      "original_line": 28,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894597050",
      "pull_request_review_id": 2518616838,
      "id": 1894597050,
      "node_id": "PRRC_kwDOABII585w7UG6",
      "diff_hunk": "@@ -6,28 +6,31 @@\n \n #include <common/args.h>\n #include <index/txindex.h>\n-#include <txdb.h>\n+#include <kernel/caches.h>\n+\n+#include <algorithm>\n+#include <string>\n+\n+// Unlike for the UTXO database, for the txindex scenario the leveldb cache make\n+// a meaningful difference: https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229601991\n+static constexpr int64_t MAX_TX_INDEX_CACHE{1024};\n+//! Max memory allocated to all block filter index caches combined in MiB.\n+static constexpr int64_t MAX_FILTER_INDEX_CACHE{1024};\n \n namespace node {\n-CacheSizes CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n+std::tuple<IndexCacheSizes, kernel::CacheSizes> CalculateCacheSizes(const ArgsManager& args, size_t n_indexes)\n {\n-    int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", nDefaultDbCache) << 20);\n-    nTotalCache = std::max(nTotalCache, nMinDbCache << 20); // total cache cannot be less than nMinDbCache\n-    CacheSizes sizes;\n-    sizes.block_tree_db = std::min(nTotalCache / 8, nMaxBlockDBCache << 20);\n-    nTotalCache -= sizes.block_tree_db;\n-    sizes.tx_index = std::min(nTotalCache / 8, args.GetBoolArg(\"-txindex\", DEFAULT_TXINDEX) ? nMaxTxIndexCache << 20 : 0);\n+    int64_t nTotalCache = (args.GetIntArg(\"-dbcache\", DEFAULT_DB_CACHE) << 20);\n+    nTotalCache = std::max(nTotalCache, MIN_DB_CACHE << 20);\n+    IndexCacheSizes sizes;",
      "path": "src/node/caches.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Arguably clearer:\r\n```suggestion\r\n    IndexCacheSizes index_sizes;\r\n```",
      "created_at": "2024-12-21T10:15:35Z",
      "updated_at": "2024-12-21T22:25:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894597050",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894597050"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 25,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894643162",
      "pull_request_review_id": 2518616838,
      "id": 1894643162,
      "node_id": "PRRC_kwDOABII585w7fXa",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! Suggested default amount of cache reserved for the kernel (MiB)\n+static constexpr int64_t DEFAULT_KERNEL_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache (MiB)\n+static constexpr int64_t MAX_BLOCK_DB_CACHE{2};\n+//! Max memory allocated to coin DB specific cache (MiB)\n+static constexpr int64_t MAX_COINS_DB_CACHE{8};\n+\n+namespace kernel {\n+struct CacheSizes {\n+    size_t block_tree_db;\n+    size_t coins_db;\n+    size_t coins;",
      "path": "src/kernel/caches.h",
      "position": 34,
      "original_position": 22,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": 1890151750,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890151750\r\n\r\nMy intuition was \"why not keep using 64-bit types in case the platform is 32-bit\", but 32-bit implies it will not be able to make use of larger than `size_t`, so `size_t` is preferable.\r\n\r\n---\r\n\r\nAdded:\r\n```\r\nstatic_assert(sizeof(size_t) == 4);\r\n```\r\nand built on a 32-bit container (i686-centos).\r\n\r\n---\r\n\r\nWhat is worrying is that I also tested adding an extra zero here:\r\n```C++\r\n//! Suggested default amount of cache reserved for the kernel (MiB)\r\nstatic constexpr int64_t DEFAULT_KERNEL_CACHE{4500};\r\n```\r\nShifted left 20 bits, that value should have become greater than 4294967295/max of `size_t`, but didn't trigger any errors. :warning: See my suggestion in another comment about adding curlies to trigger narrowing conversion errors.\r\n\r\nThis 10x tweak of that constant is caught by asserts I added to my branch.",
      "created_at": "2024-12-21T15:03:25Z",
      "updated_at": "2024-12-21T22:27:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894643162",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894643162"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": 32,
      "original_start_line": 20,
      "start_side": "RIGHT",
      "line": 34,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894643334",
      "pull_request_review_id": 2518616838,
      "id": 1894643334,
      "node_id": "PRRC_kwDOABII585w7faG",
      "diff_hunk": "@@ -0,0 +1,35 @@\n+// Copyright (c) 2024-present The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_KERNEL_CACHES_H\n+#define BITCOIN_KERNEL_CACHES_H\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+//! Suggested default amount of cache reserved for the kernel (MiB)\n+static constexpr int64_t DEFAULT_KERNEL_CACHE{450};\n+//! Max memory allocated to block tree DB specific cache (MiB)\n+static constexpr int64_t MAX_BLOCK_DB_CACHE{2};\n+//! Max memory allocated to coin DB specific cache (MiB)\n+static constexpr int64_t MAX_COINS_DB_CACHE{8};\n+\n+namespace kernel {\n+struct CacheSizes {\n+    size_t block_tree_db;\n+    size_t coins_db;\n+    size_t coins;\n+\n+    CacheSizes(int64_t total_cache)\n+    {\n+        block_tree_db = std::min(total_cache / 8, MAX_BLOCK_DB_CACHE << 20);",
      "path": "src/kernel/caches.h",
      "position": null,
      "original_position": 26,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": 1890138649,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1890138649\r\n\r\nOr make `total_cache` `size_t`, removing the need for an assert, and also helps signal the unit being bytes? (May require adding casts though).\r\n\r\n---\r\n\r\nWe also have some implicit narrowing going on here, especially on 32-bit platforms, from `int64_t` to `size_t`. Adding curlies trigger an error.\r\n```suggestion\r\n        block_tree_db = {std::min(total_cache / 8, MAX_BLOCK_DB_CACHE << 20)};\r\n```",
      "created_at": "2024-12-21T15:05:01Z",
      "updated_at": "2024-12-21T22:25:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894643334",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894643334"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894643457",
      "pull_request_review_id": 2518616838,
      "id": 1894643457,
      "node_id": "PRRC_kwDOABII585w7fcB",
      "diff_hunk": "@@ -6,28 +6,31 @@\n \n #include <common/args.h>\n #include <index/txindex.h>\n-#include <txdb.h>\n+#include <kernel/caches.h>\n+\n+#include <algorithm>\n+#include <string>\n+\n+// Unlike for the UTXO database, for the txindex scenario the leveldb cache make\n+// a meaningful difference: https://github.com/bitcoin/bitcoin/pull/8273#issuecomment-229601991\n+static constexpr int64_t MAX_TX_INDEX_CACHE{1024};",
      "path": "src/node/caches.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "ad80e410b3bf8814cb5b997715ee8cb28f2a2a66",
      "original_commit_id": "7517126d9fd2c3e50dc95ce831bac6895b950e24",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "No longer documents unit (MiB) due to commit 69159326810822c804ab53a009ef57fb5f28fac9.",
      "created_at": "2024-12-21T15:05:42Z",
      "updated_at": "2024-12-21T22:25:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31483#discussion_r1894643457",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1894643457"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31483"
        }
      },
      "start_line": null,
      "original_start_line": 14,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    }
  ]
}