{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32597",
    "id": 2538516709,
    "node_id": "PR_kwDOABII586XTrDl",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32597",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32597.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32597.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32597",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32597/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32597/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32597/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/47237cd1938058b29fdec242c3a37611e255fda0",
    "number": 32597,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet: Always set descriptor cache upgraded flag for new wallets",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Newly created wallets will always have an upgraded descriptor cache, so set those.\r\n\r\nAlso, to verify this behavior, add a new `flags` field to `getwalletinfo` and check that in the functional tests.\r\n\r\nSplit from #32489",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2025-05-23T00:39:49Z",
    "updated_at": "2025-05-26T22:16:47Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "4500c104a50107ec06cd74a7e81de508aa6188bf",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "achow101:desc-cache-is-upgraded",
      "ref": "desc-cache-is-upgraded",
      "sha": "47237cd1938058b29fdec242c3a37611e255fda0",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 8,
        "stargazers_count": 42,
        "watchers_count": 42,
        "size": 296066,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-26T22:14:53Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2025-05-11T17:20:16Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2df824f4e62b6bc569044819cd64f66f3839ba13",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37262,
        "stargazers_count": 83817,
        "watchers_count": 83817,
        "size": 282986,
        "default_branch": "master",
        "open_issues_count": 741,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-23T19:35:01Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-05-26T22:48:56Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32597"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 53,
    "deletions": 12,
    "changed_files": 5,
    "commits": 3,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY5ZjU4OGE5OWE3YTc5ZDFkNzIzMDBiYzBmMmM4NDc1Zjk1ZjZjNmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/69f588a99a7a79d1d72300bc0f2c8475f95f6c6a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/69f588a99a7a79d1d72300bc0f2c8475f95f6c6a",
      "tree": {
        "sha": "fa5d0c46d6079ead670a8fd463e790644b15397b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fa5d0c46d6079ead670a8fd463e790644b15397b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2df824f4e62b6bc569044819cd64f66f3839ba13",
          "sha": "2df824f4e62b6bc569044819cd64f66f3839ba13",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2df824f4e62b6bc569044819cd64f66f3839ba13"
        }
      ],
      "message": "wallet: Set upgraded descriptor cache flag for newly created wallets\n\nAlthough WalletBatch::LoadWallet performs the descriptor cache upgrade,\nbecause new wallets do not have the descriptor flag set yet, the upgrade\ndoes not run and set the flag.\n\nSince new wallets will always being using the upgraded cache, there's no\nreason to wait to set the flag, so set it when the wallet flags are\nbeing initialized for new wallets.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-05-23T00:36:32Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-05-13T21:33:45Z"
      },
      "sha": "69f588a99a7a79d1d72300bc0f2c8475f95f6c6a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJjMmEyNmIyOTYyMzhjYmVhZDYwMTJjMDcxYmM3NzQxYzQwZmJkMDI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc2a26b296238cbead6012c071bc7741c40fbd02",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bc2a26b296238cbead6012c071bc7741c40fbd02",
      "tree": {
        "sha": "71a266573d38de2fcd26e2d2cb041eff1442e403",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/71a266573d38de2fcd26e2d2cb041eff1442e403"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/69f588a99a7a79d1d72300bc0f2c8475f95f6c6a",
          "sha": "69f588a99a7a79d1d72300bc0f2c8475f95f6c6a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/69f588a99a7a79d1d72300bc0f2c8475f95f6c6a"
        }
      ],
      "message": "wallet: Add GetWalletFlags",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-05-23T00:37:41Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-05-12T21:00:28Z"
      },
      "sha": "bc2a26b296238cbead6012c071bc7741c40fbd02"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ3MjM3Y2QxOTM4MDU4YjI5ZmRlYzI0MmMzYTM3NjExZTI1NWZkYTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/47237cd1938058b29fdec242c3a37611e255fda0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/47237cd1938058b29fdec242c3a37611e255fda0",
      "tree": {
        "sha": "49955501e9d370fce5ec5968d37191b5f9fb7ac0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49955501e9d370fce5ec5968d37191b5f9fb7ac0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bc2a26b296238cbead6012c071bc7741c40fbd02",
          "sha": "bc2a26b296238cbead6012c071bc7741c40fbd02",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bc2a26b296238cbead6012c071bc7741c40fbd02"
        }
      ],
      "message": "wallet, rpc: Output wallet flags in getwalletinfo",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-05-23T00:37:41Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-05-23T00:29:21Z"
      },
      "sha": "47237cd1938058b29fdec242c3a37611e255fda0"
    },
    {
      "event": "commented",
      "id": 2902953826,
      "node_id": "IC_kwDOABII586tB49i",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2902953826",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-23T00:39:52Z",
      "updated_at": "2025-05-26T22:16:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32597.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [adyshimony](https://github.com/bitcoin/bitcoin/pull/32597#issuecomment-2910699910) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32597#issuecomment-2902953826",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32597"
    },
    {
      "event": "labeled",
      "id": 17781432329,
      "node_id": "LE_lADOABII58633w7ZzwAAAAQj2yAJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17781432329",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-23T00:40:02Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 2910699910,
      "node_id": "IC_kwDOABII586tfcGG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2910699910",
      "actor": {
        "login": "adyshimony",
        "id": 6388409,
        "node_id": "MDQ6VXNlcjYzODg0MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6388409?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adyshimony",
        "html_url": "https://github.com/adyshimony",
        "followers_url": "https://api.github.com/users/adyshimony/followers",
        "following_url": "https://api.github.com/users/adyshimony/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adyshimony/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adyshimony/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adyshimony/subscriptions",
        "organizations_url": "https://api.github.com/users/adyshimony/orgs",
        "repos_url": "https://api.github.com/users/adyshimony/repos",
        "events_url": "https://api.github.com/users/adyshimony/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adyshimony/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-26T22:16:43Z",
      "updated_at": "2025-05-26T22:16:43Z",
      "author_association": "NONE",
      "body": "ACK \r\n\r\n[47237cd](https://github.com/bitcoin/bitcoin/pull/32597/commits/47237cd1938058b29fdec242c3a37611e255fda0)\r\n\r\n\r\nManual tests:\r\n\r\n```\r\n\r\n./bitcoin-cli createwallet \"test_32597_wallet\" false false \"\" false true\r\n{\r\n  \"name\": \"test_32597_wallet\",\r\n  \"warnings\": [\r\n    \"Empty string given as passphrase, wallet will not be encrypted.\"\r\n  ]\r\n}\r\n\r\n\r\n\r\n./bitcoin-cli -rpcwallet=test_32597_wallet getwalletinfo\r\n{\r\n  \"walletname\": \"test_32597_wallet\",\r\n  \"walletversion\": 169900,\r\n  \"format\": \"sqlite\",\r\n  \"balance\": 0.00000000,\r\n  \"unconfirmed_balance\": 0.00000000,\r\n  \"immature_balance\": 0.00000000,\r\n  \"txcount\": 0,\r\n  \"keypoolsize\": 4000,\r\n  \"keypoolsize_hd_internal\": 4000,\r\n  \"paytxfee\": 0.00000000,\r\n  \"private_keys_enabled\": true,\r\n  \"avoid_reuse\": false,\r\n  \"scanning\": false,\r\n  \"descriptors\": true,\r\n  \"external_signer\": false,\r\n  \"blank\": false,\r\n  \"birthtime\": 1748289166,\r\n  \"flags\": [\r\n    \"last_hardened_xpub_cached\",\r\n    \"descriptor_wallet\"\r\n  ],\r\n  \"lastprocessedblock\": {\r\n    \"hash\": \"0000000000000000000104185d6d17742c6f4e4a7b005af0e14c55176037ad95\",\r\n    \"height\": 898492\r\n  }\r\n}\r\n```\r\n\r\nFunctional tests:\r\n\r\n```\r\nbuild/test/functional/wallet_avoidreuse.py\r\n2025-05-26T20:24:39.668000Z TestFramework (INFO): PRNG seed is: 1859031226962638324\r\n2025-05-26T20:24:39.669000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_b3fqengx\r\n2025-05-26T20:24:40.193000Z TestFramework (INFO): Test wallet files persist avoid_reuse flag\r\n2025-05-26T20:24:40.761000Z TestFramework (INFO): Test immutable wallet flags\r\n2025-05-26T20:24:42.050000Z TestFramework (INFO): Test that change doesn't turn into non-change when spent\r\n2025-05-26T20:24:42.135000Z TestFramework (INFO): Test sending from reused address with avoid_reuse=false\r\n2025-05-26T20:24:42.289000Z TestFramework (INFO): Test sending from reused legacy address fails\r\n2025-05-26T20:24:43.382000Z TestFramework (INFO): Test sending from reused p2sh-segwit address fails\r\n2025-05-26T20:24:43.452000Z TestFramework (INFO): Test sending from reused bech32 address fails\r\n2025-05-26T20:24:43.531000Z TestFramework (INFO): Test getbalances used category\r\n2025-05-26T20:24:45.734000Z TestFramework (INFO): Test that full destination groups are preferred in coin selection\r\n2025-05-26T20:24:47.031000Z TestFramework (INFO): Test that all destination groups are used\r\n2025-05-26T20:24:49.956000Z TestFramework (INFO): Stopping nodes\r\n2025-05-26T20:24:50.010000Z TestFramework (INFO): Cleaning up /tmp/bitcoin_func_test_b3fqengx on exit\r\n2025-05-26T20:24:50.010000Z TestFramework (INFO): Tests successful\r\n```\r\n\r\n\r\n```\r\nbuild/test/functional/wallet_createwallet.py\r\n2025-05-26T20:25:07.813000Z TestFramework (INFO): PRNG seed is: 2684982768405465258\r\n2025-05-26T20:25:07.814000Z TestFramework (INFO): Initializing test directory /tmp/bitcoin_func_test_p9897jvk\r\n2025-05-26T20:25:08.134000Z TestFramework (INFO): Run createwallet with invalid parameters.\r\n2025-05-26T20:25:08.150000Z TestFramework (INFO): Test disableprivatekeys creation.\r\n2025-05-26T20:25:08.169000Z TestFramework (INFO): Test that private keys cannot be imported\r\n2025-05-26T20:25:08.182000Z TestFramework (INFO): Test blank creation with private keys disabled.\r\n2025-05-26T20:25:08.199000Z TestFramework (INFO): Test blank creation with private keys enabled.\r\n2025-05-26T20:25:08.255000Z TestFramework (INFO): Test blank creation with privkeys enabled and then encryption\r\n2025-05-26T20:25:08.691000Z TestFramework (INFO): Test blank creation with privkeys disabled and then encryption\r\n2025-05-26T20:25:08.711000Z TestFramework (INFO): New blank and encrypted wallets can be created\r\n2025-05-26T20:25:09.108000Z TestFramework (INFO): Test creating a new encrypted wallet.\r\n2025-05-26T20:25:09.547000Z TestFramework (INFO): Test making a wallet with avoid reuse flag\r\n2025-05-26T20:25:09.563000Z TestFramework (INFO): Using a passphrase with private keys disabled returns error\r\n2025-05-26T20:25:09.564000Z TestFramework (INFO): Test that legacy wallets cannot be created\r\n2025-05-26T20:25:09.565000Z TestFramework (INFO): Check that the version number is being logged correctly\r\n2025-05-26T20:25:09.658000Z TestFramework (INFO): Stopping nodes\r\n2025-05-26T20:25:09.810000Z TestFramework (INFO): Cleaning up /tmp/bitcoin_func_test_p9897jvk on exit\r\n2025-05-26T20:25:09.810000Z TestFramework (INFO): Tests successful\r\n\r\n```\r\n\r\nbitcoin-cli help shows the new flags field:\r\n\r\n```\r\nbuild/bin/bitcoin-cli help getwalletinfo\r\ngetwalletinfo\r\n\r\nReturns an object containing various wallet state info.\r\n\r\nResult:\r\n{                                         (json object)\r\n  \"walletname\" : \"str\",                   (string) the wallet name\r\n  \"walletversion\" : n,                    (numeric) the wallet version\r\n  \"format\" : \"str\",                       (string) the database format (only sqlite)\r\n  \"balance\" : n,                          (numeric) DEPRECATED. Identical to getbalances().mine.trusted\r\n  \"unconfirmed_balance\" : n,              (numeric) DEPRECATED. Identical to getbalances().mine.untrusted_pending\r\n  \"immature_balance\" : n,                 (numeric) DEPRECATED. Identical to getbalances().mine.immature\r\n  \"txcount\" : n,                          (numeric) the total number of transactions in the wallet\r\n  \"keypoololdest\" : xxx,                  (numeric, optional) the UNIX epoch time of the oldest pre-generated key in the key pool. Legacy wallets only.\r\n  \"keypoolsize\" : n,                      (numeric) how many new keys are pre-generated (only counts external keys)\r\n  \"keypoolsize_hd_internal\" : n,          (numeric, optional) how many new keys are pre-generated for internal use (used for change outputs, only appears if the wallet is using this feature, otherwise external keys are used)\r\n  \"unlocked_until\" : xxx,                 (numeric, optional) the UNIX epoch time until which the wallet is unlocked for transfers, or 0 if the wallet is locked (only present for passphrase-encrypted wallets)\r\n  \"paytxfee\" : n,                         (numeric) the transaction fee configuration, set in BTC/kvB\r\n  \"private_keys_enabled\" : true|false,    (boolean) false if privatekeys are disabled for this wallet (enforced watch-only wallet)\r\n  \"avoid_reuse\" : true|false,             (boolean) whether this wallet tracks clean/dirty coins in terms of reuse\r\n  \"scanning\" : {                          (json object) current scanning details, or false if no scan is in progress\r\n    \"duration\" : n,                       (numeric) elapsed seconds since scan start\r\n    \"progress\" : n                        (numeric) scanning progress percentage [0.0, 1.0]\r\n  },\r\n  \"descriptors\" : true|false,             (boolean) whether this wallet uses descriptors for output script management\r\n  \"external_signer\" : true|false,         (boolean) whether this wallet is configured to use an external signer such as a hardware wallet\r\n  \"blank\" : true|false,                   (boolean) Whether this wallet intentionally does not contain any keys, scripts, or descriptors\r\n  \"birthtime\" : xxx,                      (numeric, optional) The start time for blocks scanning. It could be modified by (re)importing any descriptor with an earlier timestamp.\r\n  \"flags\" : [                             (json array) The flags currently set on the wallet\r\n    \"str\",                                (string) The name of the flag\r\n    ...\r\n  ],\r\n  \"lastprocessedblock\" : {                (json object) hash and height of the block this information was generated on\r\n    \"hash\" : \"hex\",                       (string) hash of the block this information was generated on\r\n    \"height\" : n                          (numeric) height of the block this information was generated on\r\n  }\r\n}\r\n\r\n```",
      "user": {
        "login": "adyshimony",
        "id": 6388409,
        "node_id": "MDQ6VXNlcjYzODg0MDk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6388409?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/adyshimony",
        "html_url": "https://github.com/adyshimony",
        "followers_url": "https://api.github.com/users/adyshimony/followers",
        "following_url": "https://api.github.com/users/adyshimony/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/adyshimony/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/adyshimony/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/adyshimony/subscriptions",
        "organizations_url": "https://api.github.com/users/adyshimony/orgs",
        "repos_url": "https://api.github.com/users/adyshimony/repos",
        "events_url": "https://api.github.com/users/adyshimony/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/adyshimony/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32597#issuecomment-2910699910",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32597"
    }
  ],
  "comments": []
}