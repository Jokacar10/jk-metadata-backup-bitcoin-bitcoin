{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689",
    "id": 2287301043,
    "node_id": "PR_kwDOABII586IVXGz",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31689",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31689.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31689.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
    "number": 31689,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Benchmark Chainstate::ConnectBlock duration",
    "user": {
      "login": "Eunovo",
      "id": 37949128,
      "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Eunovo",
      "html_url": "https://github.com/Eunovo",
      "followers_url": "https://api.github.com/users/Eunovo/followers",
      "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
      "organizations_url": "https://api.github.com/users/Eunovo/orgs",
      "repos_url": "https://api.github.com/users/Eunovo/repos",
      "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Eunovo/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Introduce benchmarks to evaluate ConnectBlock performance for:\r\n- Blocks containing only Schnorr signatures\r\n- Blocks containing both Schnorr and ECDSA signatures\r\n- Blocks containing only ECDSA signatures\r\n\r\nThe benchmarks in this PR, focus on signature validation. Additional benchmarks may be added in the future to assess other aspects of ConnectBlock.\r\n\r\nThis is the first step toward implementing Batch Verification of Schnorr Signatures in Core. It provides a way to test and measure the performance improvements of batch verification on Core.\r\nFor more details on batch validation, refer to the [batch-verify module on secp](https://github.com/bitcoin-core/secp256k1/pull/1134) and [batch-verify on core](https://github.com/bitcoin/bitcoin/pull/29491).",
    "labels": [],
    "created_at": "2025-01-20T10:34:46Z",
    "updated_at": "2025-02-12T06:37:36Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "94c2fd50017013b560cbb9452c5bfbb51fb2f3d8",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Eunovo:connect-block-benchmark",
      "ref": "connect-block-benchmark",
      "sha": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 755831492,
        "node_id": "R_kgDOLQ0SxA",
        "name": "bitcoin",
        "full_name": "Eunovo/bitcoin",
        "owner": {
          "login": "Eunovo",
          "id": 37949128,
          "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
          "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Eunovo",
          "html_url": "https://github.com/Eunovo",
          "followers_url": "https://api.github.com/users/Eunovo/followers",
          "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
          "organizations_url": "https://api.github.com/users/Eunovo/orgs",
          "repos_url": "https://api.github.com/users/Eunovo/repos",
          "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Eunovo/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Eunovo/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Eunovo/bitcoin",
        "archive_url": "https://api.github.com/repos/Eunovo/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Eunovo/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Eunovo/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Eunovo/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Eunovo/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Eunovo/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Eunovo/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Eunovo/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Eunovo/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Eunovo/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Eunovo/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Eunovo/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Eunovo/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Eunovo/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Eunovo/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Eunovo/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Eunovo/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Eunovo/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Eunovo/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Eunovo/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Eunovo/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Eunovo/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Eunovo/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Eunovo/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Eunovo/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Eunovo/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Eunovo/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Eunovo/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Eunovo/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Eunovo/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Eunovo/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Eunovo/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Eunovo/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Eunovo/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Eunovo/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Eunovo/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Eunovo/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Eunovo/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Eunovo/bitcoin/hooks",
        "svn_url": "https://github.com/Eunovo/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 236228,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-30T04:38:00Z",
        "created_at": "2024-02-11T07:44:19Z",
        "updated_at": "2024-02-11T07:44:19Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "809d7e763cc9bdfff3288860a1c530460c76ffff",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36712,
        "stargazers_count": 81948,
        "watchers_count": 81948,
        "size": 275328,
        "default_branch": "master",
        "open_issues_count": 698,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-02-11T19:04:52Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-02-12T06:59:43Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
      }
    },
    "author_association": "NONE",
    "draft": false,
    "additions": 146,
    "deletions": 0,
    "changed_files": 2,
    "commits": 1,
    "review_comments": 28,
    "comments": 13
  },
  "events": [
    {
      "event": "commented",
      "id": 2602043855,
      "node_id": "IC_kwDOABII586bGAnP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2602043855",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-20T10:34:50Z",
      "updated_at": "2025-02-10T16:07:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31689.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [josibake](https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2606336089) |\n| Concept ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2609704404) |\n| Approach ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2613835315) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2602043855",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "convert_to_draft",
      "id": 15996698469,
      "node_id": "CTDE_lADOABII586m02F9zwAAAAO5ej9l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15996698469",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-20T10:34:53Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15997559931,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAO5h2R7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15997559931",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f8db91e477f463b7a6e8e5bced13dd2d5b06ac58",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/f8db91e477f463b7a6e8e5bced13dd2d5b06ac58",
      "created_at": "2025-01-20T11:37:36Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15997881413,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAO5jExF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15997881413",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "created_at": "2025-01-20T12:04:31Z"
    },
    {
      "event": "reviewed",
      "id": 2562243937,
      "node_id": "PRR_kwDOABII586YuL1h",
      "url": null,
      "actor": null,
      "commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2562243937",
      "submitted_at": "2025-01-20T12:17:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15998442687,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAO5lNy_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15998442687",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d553a49beb165638fc22eece1bb9c3fda4e6bdbf",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/d553a49beb165638fc22eece1bb9c3fda4e6bdbf",
      "created_at": "2025-01-20T12:48:24Z"
    },
    {
      "event": "commented",
      "id": 2604630509,
      "node_id": "IC_kwDOABII586bP4Ht",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2604630509",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T12:41:41Z",
      "updated_at": "2025-01-21T12:41:41Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nWhat's keeping this in draft status?",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2604630509",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "commented",
      "id": 2604687152,
      "node_id": "IC_kwDOABII586bQF8w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2604687152",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T13:06:57Z",
      "updated_at": "2025-01-21T13:06:57Z",
      "author_association": "NONE",
      "body": "@fjahr  I'm trying to use some real Mainnet blocks here instead. Block 861848 for example, has a lot of taproot inputs and could be good for measuring batch-validation impact on a taproot-heavy block.\r\ncc @l0rinc ",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2604687152",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "mentioned",
      "id": 16014164183,
      "node_id": "MEE_lADOABII586m02F9zwAAAAO6hMDX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16014164183",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T13:06:58Z"
    },
    {
      "event": "subscribed",
      "id": 16014164208,
      "node_id": "SE_lADOABII586m02F9zwAAAAO6hMDw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16014164208",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T13:06:58Z"
    },
    {
      "event": "mentioned",
      "id": 16014164233,
      "node_id": "MEE_lADOABII586m02F9zwAAAAO6hMEJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16014164233",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T13:06:58Z"
    },
    {
      "event": "subscribed",
      "id": 16014164256,
      "node_id": "SE_lADOABII586m02F9zwAAAAO6hMEg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16014164256",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T13:06:58Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16016365875,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAO6plkz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16016365875",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/c0597320e1f2c76652944ac86759e226c0d8cbca",
      "created_at": "2025-01-21T15:33:02Z"
    },
    {
      "event": "reviewed",
      "id": 2565018048,
      "node_id": "PRR_kwDOABII586Y4xHA",
      "url": null,
      "actor": null,
      "commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2565018048",
      "submitted_at": "2025-01-21T15:41:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
    },
    {
      "event": "commented",
      "id": 2605397889,
      "node_id": "IC_kwDOABII586bSzeB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2605397889",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T17:56:58Z",
      "updated_at": "2025-01-21T17:56:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I'm trying to use some real Mainnet blocks here instead.\r\n\r\nHow would that be feasible if we don't have the UTXO set that this block is validated on?",
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2605397889",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "commented",
      "id": 2605410942,
      "node_id": "IC_kwDOABII586bS2p-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2605410942",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T18:03:39Z",
      "updated_at": "2025-01-21T18:03:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "A similar attempt I had (based on your previous comment): https://github.com/bitcoin/bitcoin/pull/31699/commits/d90a0b8c90cd662bd2588e7df5fa6f641eebe3ba\r\n\r\nBut we can of course just copy the structure to make sure the benchmarks measure something real and not something completely made up (happens all the time with benchmarks and tests).\r\nThere is no perfect benchmark, but I'd like to investigate if we can do better than what we have currently.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2605410942",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "commented",
      "id": 2605423826,
      "node_id": "IC_kwDOABII586bS5zS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2605423826",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T18:10:16Z",
      "updated_at": "2025-01-21T18:10:16Z",
      "author_association": "NONE",
      "body": "> How would that be feasible if we don't have the UTXO set that this block is validated on?\r\n\r\n@mzumsande Copying the block structure could be feasible",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2605423826",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "mentioned",
      "id": 16018422539,
      "node_id": "MEE_lADOABII586m02F9zwAAAAO6xbsL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16018422539",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T18:10:18Z"
    },
    {
      "event": "subscribed",
      "id": 16018422554,
      "node_id": "SE_lADOABII586m02F9zwAAAAO6xbsa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16018422554",
      "actor": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T18:10:18Z"
    },
    {
      "event": "commented",
      "id": 2605486813,
      "node_id": "IC_kwDOABII586bTJLd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2605486813",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T18:43:45Z",
      "updated_at": "2025-01-21T18:43:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK\r\n\r\nIMO the `check_` prefix on the benchmark file name is a bit odd, just `connectblock.cpp` should be fine.\r\n\r\nAnd there is quite a bit of duplication in the file benchmarks file, I played around with it a bit and I would suggest something like this: https://github.com/fjahr/bitcoin/commit/12eab5df067915ed83f91bf0777fcd0189f02b85 feel free to use it.\r\n\r\nAnd I think you can take this out of draft status :)",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2605486813",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16031020045,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAO7hfQN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16031020045",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d186875d420e5bb5dc7d35034999b66286b1480e",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/d186875d420e5bb5dc7d35034999b66286b1480e",
      "created_at": "2025-01-22T15:36:56Z"
    },
    {
      "event": "commented",
      "id": 2607602906,
      "node_id": "IC_kwDOABII586bbNza",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2607602906",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T15:47:55Z",
      "updated_at": "2025-01-22T15:48:38Z",
      "author_association": "NONE",
      "body": "I used a script to count Tx inputs in the 848000 to 868000 block range. The non-taproot to taproot ratio is 80% to 20%. I used that to create the mixed block. The mixed block can be used to gauge the effects of improvements like batch-validation on current blocks while we also see what it's effect on all schnorr blocks look like.",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2607602906",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "ready_for_review",
      "id": 16031534012,
      "node_id": "RFRE_lADOABII586m02F9zwAAAAO7jcu8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16031534012",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T16:12:37Z"
    },
    {
      "event": "reviewed",
      "id": 2569617843,
      "node_id": "PRR_kwDOABII586ZKUGz",
      "url": null,
      "actor": null,
      "commit_id": "d186875d420e5bb5dc7d35034999b66286b1480e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "I have started reviewing but it contains too many misunderstanding, a few quick notes:\r\n* use `std::shared_ptr` to clarify ownership instead of get\r\n* don't clear the vectors, recreate them, they're faster and more obvious\r\n* use brace inits where possible\r\n* for primitive parameters add comments on use site\r\n* `use_schnorr` seems redundant, `num_taproot` already defines it\r\n* `bench.unit(\"block\").run([&] {` unit should likely be something that changes, e.g. total signatures or something that we can compare between the different runs\r\n* use `emplace_back` to construct objects in-place\r\n* destructure tuple returns to avoid calling `.first`\r\n* num_txs can be a param with default value\r\n\r\nStopped reviewing here, will continue based on follow ups",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2569617843",
      "submitted_at": "2025-01-23T12:28:36Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
    },
    {
      "event": "commented",
      "id": 2609704404,
      "node_id": "IC_kwDOABII586bjO3U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2609704404",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-23T12:37:38Z",
      "updated_at": "2025-01-23T13:44:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The non-taproot to taproot ratio is 80% to 20%. I used that to create the mixed block.\r\n\r\nI still think that 50/50 would have been a better choice. Just from looking at the UTXO set we know that this number will be different from 80/20 in the future. Currently P2TR outputs take up 32% of the UTXO set. P2TR grows much faster than all other output types in the UTXO set. The other outputs types have been mostly stagnating the past ~year (while P2TR utxos doubled in the last year, P2WPKH grew by 10%, the others didn't grow). And you can subtract provably unspendables and lost keys from the rest of the output types in much higher numbers which will lead to an even higher share of P2TR inputs in future blocks. Could all current P2TR key holder throw them away and never spend their outputs? Sure, but much less likely than that the trend continues and future block have a lot more taproot inputs.\r\n\r\nAnd future blocks are much more interesting for this benchmark than past blocks because we can do all kinds of tricks and optimizations to speed up IBD but having a new tip propagate through the network as fast as possible is a much harder task.\r\n\r\nThis is my last comment on the topic of the mixed block split and I will just focus on the code from now on. I just want to reiterate that it makes a lot more sense to optimize for future blocks rather than past blocks.\r\n\r\nACK to 80/20 split. Please leave it and let's move on.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2609704404",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16059735948,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAO9PB-M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16059735948",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "created_at": "2025-01-24T14:46:35Z"
    },
    {
      "event": "commented",
      "id": 2613820430,
      "node_id": "IC_kwDOABII586by7wO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2613820430",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T07:12:01Z",
      "updated_at": "2025-01-25T07:12:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2569617843\r\n\r\n> use std::shared_ptr to clarify ownership instead of get\r\n\r\nI don't think this applies here, or is good advice in general. Shared pointers only seem useful when the object receiving a pointer possibly outlives the original, which I don't think is the case here anywhere. I'd instead suggest to take a reference of the underlying object where possible.\r\n\r\n<details>\r\n<summary>git diff on d54722be41246e89508f451bf6f9e27e7bb8d5f9</summary>\r\n\r\n```diff\r\ndiff --git a/src/bench/connectblock.cpp b/src/bench/connectblock.cpp\r\nindex 51471aa3d5..ec28646b0f 100644\r\n--- a/src/bench/connectblock.cpp\r\n+++ b/src/bench/connectblock.cpp\r\n@@ -18 +18 @@ CBlock CreateTestBlock(\r\n-    std::shared_ptr<TestChain100Setup> test_setup,\r\n+    TestChain100Setup& test_setup,\r\n@@ -23 +23 @@ CBlock CreateTestBlock(\r\n-    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\r\n+    Chainstate& chainstate{test_setup.m_node.chainman->ActiveChainstate()};\r\n@@ -32 +32 @@ CBlock CreateTestBlock(\r\n-    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\r\n+    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup.coinbaseKey.GetPubKey())};\r\n@@ -36,2 +36,2 @@ CBlock CreateTestBlock(\r\n-    auto coinbase_to_spend{test_setup->m_coinbase_txns[0]};\r\n-    const auto [first_tx, _]{test_setup->CreateValidTransaction(\r\n+    auto coinbase_to_spend{test_setup.m_coinbase_txns[0]};\r\n+    const auto [first_tx, _]{test_setup.CreateValidTransaction(\r\n@@ -42 +42 @@ CBlock CreateTestBlock(\r\n-    test_setup->CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\r\n+    test_setup.CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\r\n@@ -55 +55 @@ CBlock CreateTestBlock(\r\n-        const auto [taproot_tx, _]{test_setup->CreateValidTransaction(\r\n+        const auto [taproot_tx, _]{test_setup.CreateValidTransaction(\r\n@@ -63 +63 @@ CBlock CreateTestBlock(\r\n-    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\r\n+    return test_setup.CreateBlock(txs, coinbase_spk, chainstate);\r\n@@ -89 +89 @@ std::pair<std::vector<CKey>, std::vector<CScript>> CreateKeysAndScripts(const CK\r\n-void BenchmarkConnectBlock(benchmark::Bench& bench, std::vector<CKey>& keys, std::vector<CScript>& spks, std::shared_ptr<TestChain100Setup> test_setup)\r\n+void BenchmarkConnectBlock(benchmark::Bench& bench, std::vector<CKey>& keys, std::vector<CScript>& spks, TestChain100Setup& test_setup)\r\n@@ -95 +95 @@ void BenchmarkConnectBlock(benchmark::Bench& bench, std::vector<CKey>& keys, std\r\n-    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\r\n+    Chainstate& chainstate{test_setup.m_node.chainman->ActiveChainstate()};\r\n@@ -111 +111 @@ static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\r\n-    const std::shared_ptr test_setup{MakeNoLogFileContext<TestChain100Setup>()};\r\n+    const std::unique_ptr test_setup{MakeNoLogFileContext<TestChain100Setup>()};\r\n@@ -113 +113 @@ static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\r\n-    BenchmarkConnectBlock(bench, keys, spks, test_setup);\r\n+    BenchmarkConnectBlock(bench, keys, spks, *test_setup);\r\n@@ -118 +118 @@ static void ConnectBlockMixed(benchmark::Bench& bench)\r\n-    const std::shared_ptr test_setup{MakeNoLogFileContext<TestChain100Setup>()};\r\n+    const std::unique_ptr test_setup{MakeNoLogFileContext<TestChain100Setup>()};\r\n@@ -121 +121 @@ static void ConnectBlockMixed(benchmark::Bench& bench)\r\n-    BenchmarkConnectBlock(bench, keys, spks, test_setup);\r\n+    BenchmarkConnectBlock(bench, keys, spks, *test_setup);\r\n@@ -126 +126 @@ static void ConnectBlockNoSchnorr(benchmark::Bench& bench)\r\n-    const std::shared_ptr test_setup{MakeNoLogFileContext<TestChain100Setup>()};\r\n+    const std::unique_ptr test_setup{MakeNoLogFileContext<TestChain100Setup>()};\r\n@@ -128 +128 @@ static void ConnectBlockNoSchnorr(benchmark::Bench& bench)\r\n-    BenchmarkConnectBlock(bench, keys, spks, test_setup);\r\n+    BenchmarkConnectBlock(bench, keys, spks, *test_setup);\r\n```\r\n</details>",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2613820430",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "commented",
      "id": 2613835315,
      "node_id": "IC_kwDOABII586by_Yz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2613835315",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-25T08:08:54Z",
      "updated_at": "2025-01-25T08:08:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2613835315",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "reviewed",
      "id": 2575773186,
      "node_id": "PRR_kwDOABII586Zhy4C",
      "url": null,
      "actor": null,
      "commit_id": "d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nThanks for picking this up, @Eunovo! This is a necessary precursor for the batch validation work, but also a generally useful benchmark to have. I think the motivation for the PR could be a bit more detailed, specifically highlighting that the benchmarks we are adding now are focused on signature verification. I imagine there are other aspects of `ConnectBlock` we might want to benchmark, which can be added to this file in the future. I do think it's a good idea to keep this initial PR focused on signature validation.\r\n\r\nI ran the benchmark locally (after doing the recommended pyperf step) and I noticed the mixed block case was taking noticeably longer than the all ECDSA/all Schnorr cases. See the output below:\r\n\r\n```\r\n./build/src/bench/bench_bitcoin -filter=\"ConnectBlock.*\"\r\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\r\n|       66,432,404.00 |               15.05 |    0.1% |  675,467,204.00 |  165,553,635.00 |  4.080 |  15,187,165.00 |    1.7% |      0.74 | `ConnectBlockAllSchnorr`\r\n|       83,202,399.00 |               12.02 |    0.1% |  839,153,157.00 |  207,359,165.00 |  4.047 |  19,061,066.00 |    1.7% |      0.93 | `ConnectBlockMixed`\r\n|       66,390,509.00 |               15.06 |    0.1% |  670,872,896.00 |  165,494,875.00 |  4.054 |  15,186,590.00 |    1.7% |      0.74 | `ConnectBlockNoSchnorr`\r\n```\r\n\r\nThis was surprising to me. I noticed that for the 80/20 split, you are doing it _within_ a transaction, e.g., two taproot inputs and two ECDSA inputs in the same transaction (as opposed to a transaction with two Schnorr spends and a transaction with two ECDSA spends). My first guess is the extra time is coming from hashing the transaction multiple times for the different signature digest algorithms? Just a guess; will need to dig into the code more to understand. I think it would be good to document some of this in the comments, explaining how we are constructing the transactions and that we are only doing the simple case of key path spends for Schnorr and using `SIGHASH_ALL/DEFAULT` in these initial benchmarks.\r\n\r\nI'd also echo @TheCharlatan 's feedback regarding taking a reference. Still in the process of reviewing, so will follow up with more feedback on the implementation. In the meanwhile, left some nits, if you end up retouching this before I finish my review",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2575773186",
      "submitted_at": "2025-01-27T15:46:29Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16117635109,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAPAr5gl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16117635109",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f440e0686a19e9b968e8f99e487623a2e520df23",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/f440e0686a19e9b968e8f99e487623a2e520df23",
      "created_at": "2025-01-30T03:59:50Z"
    },
    {
      "event": "commented",
      "id": 2623477551,
      "node_id": "IC_kwDOABII586cXxcv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2623477551",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T04:12:55Z",
      "updated_at": "2025-01-30T04:12:55Z",
      "author_association": "NONE",
      "body": "I've updated the code to take a reference to the underlying test_setup object following @TheCharlatan and @josibake reviews. I've also added more comments explaining how the transactions in the test block are created.",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2623477551",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "mentioned",
      "id": 16117707199,
      "node_id": "MEE_lADOABII586m02F9zwAAAAPAsLG_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16117707199",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T04:12:56Z"
    },
    {
      "event": "subscribed",
      "id": 16117707206,
      "node_id": "SE_lADOABII586m02F9zwAAAAPAsLHG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16117707206",
      "actor": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T04:12:56Z"
    },
    {
      "event": "mentioned",
      "id": 16117707214,
      "node_id": "MEE_lADOABII586m02F9zwAAAAPAsLHO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16117707214",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T04:12:56Z"
    },
    {
      "event": "subscribed",
      "id": 16117707217,
      "node_id": "SE_lADOABII586m02F9zwAAAAPAsLHR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16117707217",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T04:12:56Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFjNmI4ODY0NjVkZjBmMDA1NDllN2QxMGMzYmZlZmQyN2JlN2YxYzI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "tree": {
        "sha": "ffd7c32cb61d453800e23f9f4c69e99e1c86f2f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ffd7c32cb61d453800e23f9f4c69e99e1c86f2f2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad2f9324c619ae608c434ee85ad9ae1b2812877d",
          "sha": "ad2f9324c619ae608c434ee85ad9ae1b2812877d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ad2f9324c619ae608c434ee85ad9ae1b2812877d"
        }
      ],
      "message": "Benchmark Chainstate::ConnectBlock duration\n\nMeasure ConnectBlock performance for\n- blocks containing only schnorr sigs\n- blocks containing both schnorr and ecdsa sigs\n- blocks containing only ecdsa sigs\n\nThis will allow testing and measurement of performance improvement for features like\nbatch verification of schnorr signatures",
      "committer": {
        "name": "Eunovo",
        "email": "eunovo9@gmail.com",
        "date": "2025-01-30T04:37:54Z"
      },
      "author": {
        "name": "Eunovo",
        "email": "eunovo9@gmail.com",
        "date": "2024-10-31T19:31:36Z"
      },
      "sha": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16117839956,
      "node_id": "HRFPE_lADOABII586m02F9zwAAAAPAsrhU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16117839956",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "created_at": "2025-01-30T04:38:01Z"
    },
    {
      "event": "commented",
      "id": 2623504472,
      "node_id": "IC_kwDOABII586cX4BY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2623504472",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T04:40:14Z",
      "updated_at": "2025-01-30T04:41:09Z",
      "author_association": "NONE",
      "body": "> My first guess is the extra time is coming from hashing the transaction multiple times for the different signature digest algorithms? Just a guess; will need to dig into the code more to understand.\r\n\r\nI'm pretty sure this is the case after looking at `SignatureHash` and `SignatureHashSchnorr` in `interpreter.cpp`. I added a comment explaining this",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2623504472",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31689"
    },
    {
      "event": "unsubscribed",
      "id": 16129590553,
      "node_id": "UE_lADOABII586m02F9zwAAAAPBZgUZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16129590553",
      "actor": {
        "login": "PRADACANDI18",
        "id": 91190628,
        "node_id": "MDQ6VXNlcjkxMTkwNjI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/91190628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PRADACANDI18",
        "html_url": "https://github.com/PRADACANDI18",
        "followers_url": "https://api.github.com/users/PRADACANDI18/followers",
        "following_url": "https://api.github.com/users/PRADACANDI18/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PRADACANDI18/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PRADACANDI18/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PRADACANDI18/subscriptions",
        "organizations_url": "https://api.github.com/users/PRADACANDI18/orgs",
        "repos_url": "https://api.github.com/users/PRADACANDI18/repos",
        "events_url": "https://api.github.com/users/PRADACANDI18/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PRADACANDI18/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T20:16:30Z"
    },
    {
      "event": "reviewed",
      "id": 2606336089,
      "node_id": "PRR_kwDOABII586bWYhZ",
      "url": null,
      "actor": null,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK https://github.com/bitcoin/bitcoin/pull/31689/commits/1c6b886465df0f00549e7d10c3bfefd27be7f1c2\r\n\r\nI spent some time trying to come up with a way to create a mixed block of all schnorr input transactions and all ecdsa input transactions (as opposed to transactions with both schnorr and ecdsa inputs), but I couldn't find a simple way to do it. Furthermore, it felt unnecessary for what we are trying to accomplish: establish a baseline for signature validation of blocks with both schnorr and ecdsa signatures. Thought it was a bit surprising at first, I think the comment you added explaining that a mixed input transaction will take longer to validate is sufficient.\r\n\r\nI left a few non-blocking style nits if you end up retouching, but overall this looks good!",
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2606336089",
      "submitted_at": "2025-02-10T16:07:00Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
    },
    {
      "event": "review_requested",
      "id": 16250509926,
      "node_id": "RRE_lADOABII586m02F9zwAAAAPImxpm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16250509926",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-10T16:07:05Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 16250510107,
      "node_id": "RRE_lADOABII586m02F9zwAAAAPImxsb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16250510107",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-10T16:07:06Z",
      "requested_reviewer": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2610952186,
      "node_id": "PRR_kwDOABII586bn_f6",
      "url": null,
      "actor": null,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#pullrequestreview-2610952186",
      "submitted_at": "2025-02-12T06:37:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922316363",
      "pull_request_review_id": 2562243937,
      "id": 1922316363,
      "node_id": "PRRC_kwDOABII585ylDhL",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Could we use an existing block from Mainnet - to be sure we're measuring a representative case and not one skewed towards our preferences?\r\nOne with many schnorr sigs - but since we don't yet have one that only contains them, I don't think it makes sense to measure that (like we do here).",
      "created_at": "2025-01-20T12:17:34Z",
      "updated_at": "2025-01-21T16:46:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1922316363",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1922316363"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923716358",
      "pull_request_review_id": 2564607523,
      "id": 1923716358,
      "node_id": "PRRC_kwDOABII585yqZUG",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": 1922316363,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Optimizing for one specific block is also skewing towards something, just a bit different. Maybe the test should generate a number of blocks with some randomization of the txs and inputs and outputs instead.",
      "created_at": "2025-01-21T13:18:35Z",
      "updated_at": "2025-01-21T13:18:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923716358",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923716358"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923806250",
      "pull_request_review_id": 2564764237,
      "id": 1923806250,
      "node_id": "PRRC_kwDOABII585yqvQq",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": 1922316363,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "They're always skewed, but if we use actual blocks as basis, at least we can't trick ourselves so easily.",
      "created_at": "2025-01-21T14:14:24Z",
      "updated_at": "2025-01-21T14:14:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923806250",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923806250"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923821802",
      "pull_request_review_id": 2564790660,
      "id": 1923821802,
      "node_id": "PRRC_kwDOABII585yqzDq",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": 1922316363,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> They're always skewed, \r\n\r\nNot if we use randomization.\r\n\r\n> but if we use actual blocks as basis, at least we can't trick ourselves so easily.\r\n\r\nWe are just tricking ourselves differently.\r\n\r\nAfter a brief discussion with @Eunovo and @josibake elsewhere I think there should be 3 separate benchmarks: No Schnorr Blocks, Random-mix Blocks and only schnorr blocks. This allows to see the impact of changes on each of these scenarios and the random mix blocks should cover what we currently see on chain.",
      "created_at": "2025-01-21T14:23:12Z",
      "updated_at": "2025-01-21T14:23:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923821802",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923821802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923846544",
      "pull_request_review_id": 2564831836,
      "id": 1923846544,
      "node_id": "PRRC_kwDOABII585yq5GQ",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": 1922316363,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> They're always skewed \r\n\r\n> Not if we use randomization.\r\n\r\nWe always introduce bias, it's unavoidable. Let's try to come up with something that minimizes our own preference of how we wish the blocks looked like (as in this PR where the block only contained Schnorrs). We can avoid that by checking the actual usages and relying on them.\r\n\r\n> I think there should be 3 separate benchmarks: No Schnorr Blocks, Random-mix Blocks and only schnorr blocks. \r\n\r\nThis will likely minimize the biases that we introduce - especially, as mentioned before, if we rely on existing blocks, instead of an artificial setup that are skewed towards the settings we desire to measure.",
      "created_at": "2025-01-21T14:37:23Z",
      "updated_at": "2025-01-21T14:41:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923846544",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923846544"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923955156",
      "pull_request_review_id": 2565012834,
      "id": 1923955156,
      "node_id": "PRRC_kwDOABII585yrTnU",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": 1922316363,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I've updated the PR to use 3 blocks\r\n- all schnorr\r\n- 50% schnorr, 50% ecdsa\r\n- all ecdsa\r\n\r\nIf we used one block from Mainnet here, we would optimize for that block. This setup of 3 blocks is more balanced. We can always do an actual IBD benchmark or use tools like [Benchcoin](https://github.com/bitcoin-dev-tools/benchcoin) cc @josibake \r\n\r\nConnecting random blocks from Mainnet is tricky. At best, I would only be able to use the Mainnet block as a template to create the blocks for the benchmark. I'm not sure it's worth it to do this.",
      "created_at": "2025-01-21T15:40:28Z",
      "updated_at": "2025-01-21T15:40:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923955156",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923955156"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923957793",
      "pull_request_review_id": 2565018048,
      "id": 1923957793,
      "node_id": "PRRC_kwDOABII585yrUQh",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "As mentioned earlier, I would prefer basing the constants on data derived from actual usage. The current approach feels arbitrary and directly impacts the outcome.",
      "created_at": "2025-01-21T15:41:57Z",
      "updated_at": "2025-01-21T15:41:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923957793",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923957793"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923964274",
      "pull_request_review_id": 2565029250,
      "id": 1923964274,
      "node_id": "PRRC_kwDOABII585yrV1y",
      "diff_hunk": "@@ -0,0 +1,93 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+std::pair<CBlock, std::unique_ptr<CBlockIndex>> CreateTestBlock(TestChain100Setup* test_setup)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    // Create a block with (500*4) schnorr signatures to verify\n+    // Typical blocks have high number of txs with few inputs\n+    const int num_txs = 500;\n+    const int num_inputs = 4;",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 26,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "0b13781d9fe39a5ebccbbec5cc584c505ea9be2a",
      "in_reply_to_id": 1922316363,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> we would optimize for that block\r\n\r\nSo what *are* we optimizing for now?",
      "created_at": "2025-01-21T15:45:53Z",
      "updated_at": "2025-01-21T16:46:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1923964274",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1923964274"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924039967",
      "pull_request_review_id": 2565154968,
      "id": 1924039967,
      "node_id": "PRRC_kwDOABII585yroUf",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Picking a random block is just as arbitrary and it would make sense to base the numbers on an outlook for the future rather than looking backwards. I think 50/50 is good as a starting point. I'm sure there has been a block in past that had exactly 50% schnorr sigs, so this argument about using a specific block is pointless. If you want to suggest a different split based on the past I would suggest taking a larger range of blocks and deriving a very specific split from that. Like over the last year it's probably going to be something around 40%. I would still prefer to use 50/50 because it's more representative of what we expect the future to be like but maybe you can convince other reviewers to use this.",
      "created_at": "2025-01-21T16:32:01Z",
      "updated_at": "2025-01-21T16:32:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924039967",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924039967"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924059948",
      "pull_request_review_id": 2565187304,
      "id": 1924059948,
      "node_id": "PRRC_kwDOABII585yrtMs",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Picking a random block is just as arbitrary\r\n\r\nAbsolutely, nobody recommended that.\r\n\r\n> I'm sure there has been a block in past that had exactly 50% schnorr sigs\r\n\r\nMy point is that I'd appreciate putting in the work and actually testing that assumption. And I'm not recommending getting any block, but create one that is based on measured values, not guessed ones.\r\n\r\n> Like over the last year it's probably going to be something around 40%.\r\n\r\nGreat, can we back that by actual measurements?\r\n\r\n> it's more representative of what we expect the future to be like\r\n\r\nHow so? Whenever that changes we can easily adjust the benchmarks. Let's base it on data instead of feelings.\r\n\r\nWhat I'm proposing is to take inspiration from the actual usages instead of coming up with these trivial values - only to discover later that they're not representative and don't cause any measurable speedup in reality.",
      "created_at": "2025-01-21T16:45:09Z",
      "updated_at": "2025-01-21T16:46:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924059948",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924059948"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924113469",
      "pull_request_review_id": 2565273162,
      "id": 1924113469,
      "node_id": "PRRC_kwDOABII585yr6Q9",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Absolutely, nobody recommended that.\r\n\r\nYou literally [suggested it one day ago](https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1922316363) and when @Eunovo said [he was going to follow through with it](https://github.com/bitcoin/bitcoin/pull/31689#issuecomment-2604687152) you gave him a thumbs up. That's what started this whole argument.\r\n\r\n> Great, can we back that by actual measurements?\r\n\r\nAs I said, I think 50/50 is fine so I won't do those measurements. Unless @Eunovo wants to do them it's probably better if you do them and suggest to use them here.\r\n\r\n> How so? Whenever that changes we can easily adjust the benchmarks. Let's base it on data instead of feelings.\r\n>\r\n> What I'm proposing is to take inspiration from the actual usages instead of coming up with these trivial values - only to discover later that they're not representative and don't cause any measurable speedup in reality.\r\n\r\nThese aren't feelings, they are assumptions based on what is being built in the bitcoin ecosystem. It seems more likely than not that we will see more taproot adoption rather than less.",
      "created_at": "2025-01-21T17:20:06Z",
      "updated_at": "2025-01-21T17:20:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924113469",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924113469"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924120812",
      "pull_request_review_id": 2565285205,
      "id": 1924120812,
      "node_id": "PRRC_kwDOABII585yr8Ds",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> You literally suggested it one day ago\r\n\r\nRead it again, there was no randomness suggested, rather the opposite, a well thought out investigation.\r\n\r\n> likely than not that we will see more taproot adoption rather than less\r\n\r\nExactly, so why 50/50 and not 80/20? ",
      "created_at": "2025-01-21T17:25:50Z",
      "updated_at": "2025-01-21T17:26:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924120812",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924120812"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924125286",
      "pull_request_review_id": 2565292483,
      "id": 1924125286,
      "node_id": "PRRC_kwDOABII585yr9Jm",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Exactly, so why 50/50 and not 80/20?\r\n\r\nWhy 80/20?",
      "created_at": "2025-01-21T17:28:50Z",
      "updated_at": "2025-01-21T17:28:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924125286",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924125286"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924126425",
      "pull_request_review_id": 2565294310,
      "id": 1924126425,
      "node_id": "PRRC_kwDOABII585yr9bZ",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Exactly!",
      "created_at": "2025-01-21T17:29:40Z",
      "updated_at": "2025-01-21T17:29:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924126425",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924126425"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924128794",
      "pull_request_review_id": 2565298279,
      "id": 1924128794,
      "node_id": "PRRC_kwDOABII585yr-Aa",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Read it again, there was no randomness suggested\r\n\r\nWhat investigation? You suggested to pick a random block from mainnet and @Eunovo followed up with this saying \"Block 861848 for example\".",
      "created_at": "2025-01-21T17:31:37Z",
      "updated_at": "2025-01-21T17:31:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924128794",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924128794"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924131171",
      "pull_request_review_id": 2565302222,
      "id": 1924131171,
      "node_id": "PRRC_kwDOABII585yr-lj",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> > Exactly, so why 50/50 and not 80/20?\r\n> \r\n> Why 80/20?\r\n\r\nI hope you get the point. I can ask you why why why for anything you suggest too (why do you want to look at the past? Why do you want to look at the past year/6 months etc) and this PR will not go anywhere which would be a shame. This is a pointless debate.",
      "created_at": "2025-01-21T17:33:32Z",
      "updated_at": "2025-01-21T17:33:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924131171",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924131171"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924131994",
      "pull_request_review_id": 2565303551,
      "id": 1924131994,
      "node_id": "PRRC_kwDOABII585yr-ya",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Please read what I wrote, there was no random block suggestion.\r\nAll I'm saying is let's back up our choices by data instead of random values guided by feelings.\r\nDid not expect that to be a controversial statement...",
      "created_at": "2025-01-21T17:34:09Z",
      "updated_at": "2025-01-21T17:34:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924131994",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924131994"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924139948",
      "pull_request_review_id": 2565317291,
      "id": 1924139948,
      "node_id": "PRRC_kwDOABII585ysAus",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Please read what I wrote, there was no random block suggestion.\r\n\r\nOf course and you confirmed it with the engagement in the comment.\r\n\r\n> All I'm saying is let's back up our choices by data instead of random values guided by feelings.\r\n\r\nWhat data? Your suggestion is as arbitrary as mine as long as you have not made an actual suggestion of which data you want to use and put in the work to run the analysis. When have done that I can degrade that effort just like you degrade my comments here by calling them \"feelings\" because you will have to make decisions, too, like which blocks you actually include.",
      "created_at": "2025-01-21T17:40:32Z",
      "updated_at": "2025-01-21T17:40:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924139948",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924139948"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924154132",
      "pull_request_review_id": 2565340529,
      "id": 1924154132,
      "node_id": "PRRC_kwDOABII585ysEMU",
      "diff_hunk": "@@ -0,0 +1,180 @@\n+// Copyright (c) 2016-2022 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>\n+\n+CBlock CreateTestBlock(TestChain100Setup* test_setup, std::vector<CKey>& keys, std::vector<CScript>& scriptpubkeys)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    const int num_txs = 500;\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+\n+    auto input_tx{test_setup->m_coinbase_txns[0]};\n+\n+    std::vector<COutPoint> inputs{COutPoint(input_tx->GetHash(), 0)};\n+    inputs.reserve(scriptpubkeys.size());\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will create outputs for each scriptpubkey that are spent in the next transaction\n+    outputs.reserve(scriptpubkeys.size());\n+\n+    for (int i{0}; i < num_txs; i++) {\n+        Txid txid = input_tx->GetHash();\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(txid, j);\n+        }\n+\n+        outputs.clear();\n+        for (size_t j{0}; j < scriptpubkeys.size(); j++) {\n+            outputs.emplace_back(COIN, scriptpubkeys[j]);\n+        }\n+        const auto taproot_tx{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.push_back(taproot_tx.first);\n+        input_tx = MakeTransactionRef(taproot_tx.first);\n+\n+        inputs.clear();\n+    }\n+\n+    const WitnessV1Taproot taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+    const CScript coinbase_spk{GetScriptForDestination(taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+static void ConnectBlockAllSchnorr(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_keys{4};\n+    std::vector<CKey> keys{test_setup->coinbaseKey};\n+    keys.reserve(num_keys + 1);\n+\n+    std::vector<CScript> taproot_spks;\n+    taproot_spks.reserve(num_keys);\n+\n+    for (size_t i{0}; i < num_keys; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.push_back(key);\n+        const CScript scriptpubkey{GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())})};\n+        taproot_spks.push_back(scriptpubkey);\n+    }\n+\n+    const auto test_block{CreateTestBlock(test_setup.get(), keys, taproot_spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));\n+    });\n+}\n+\n+static void ConnectBlockMixed(benchmark::Bench& bench)\n+{\n+    const auto test_setup{MakeNoLogFileContext<TestChain100Setup>()};\n+\n+    size_t num_taproot{2};\n+    size_t num_nontaproot{2};",
      "path": "src/bench/check_connectblock.cpp",
      "position": null,
      "original_position": 102,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "c0597320e1f2c76652944ac86759e226c0d8cbca",
      "in_reply_to_id": 1923957793,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ok guys, cool it please. I recommend a 24 hour break on this thread, or take it off github.",
      "created_at": "2025-01-21T17:52:14Z",
      "updated_at": "2025-01-21T17:52:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1924154132",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1924154132"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 101,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 102,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926830123",
      "pull_request_review_id": 2569617843,
      "id": 1926830123,
      "node_id": "PRRC_kwDOABII585y2Rgr",
      "diff_hunk": "@@ -20,6 +20,7 @@ add_executable(bench_bitcoin\n   chacha20.cpp\n   checkblock.cpp\n   checkblockindex.cpp\n+  connectblock.cpp\n   checkqueue.cpp\n   cluster_linearize.cpp\n   crypto_hash.cpp",
      "path": "src/bench/CMakeLists.txt",
      "position": null,
      "original_position": 7,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "d186875d420e5bb5dc7d35034999b66286b1480e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "We order these alphabetically to minimize needless merge conflicts\r\n```suggestion\r\n  checkblockindex.cpp\r\n  checkqueue.cpp\r\n  cluster_linearize.cpp\r\n  connectblock.cpp\r\n  crypto_hash.cpp\r\n```",
      "created_at": "2025-01-23T11:31:55Z",
      "updated_at": "2025-01-23T12:28:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1926830123",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926830123"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 22,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 26,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926839196",
      "pull_request_review_id": 2569617843,
      "id": 1926839196,
      "node_id": "PRRC_kwDOABII585y2Tuc",
      "diff_hunk": "@@ -0,0 +1,132 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <bench/bench.h>\n+\n+#include <addresstype.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <utility>\n+#include <vector>",
      "path": "src/bench/connectblock.cpp",
      "position": null,
      "original_position": 17,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "d186875d420e5bb5dc7d35034999b66286b1480e",
      "in_reply_to_id": null,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: `utility` seems unused and `bench` seems out of line:\r\n```suggestion\r\n#include <addresstype.h>\r\n#include <bench/bench.h>\r\n#include <interfaces/chain.h>\r\n#include <kernel/cs_main.h>\r\n#include <script/interpreter.h>\r\n#include <sync.h>\r\n#include <test/util/setup_common.h>\r\n#include <validation.h>\r\n\r\n#include <cassert>\r\n#include <vector>\r\n```",
      "created_at": "2025-01-23T11:39:22Z",
      "updated_at": "2025-01-23T12:28:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1926839196",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1926839196"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 5,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1930726187",
      "pull_request_review_id": 2575773186,
      "id": 1930726187,
      "node_id": "PRRC_kwDOABII585zFIsr",
      "diff_hunk": "@@ -0,0 +1,133 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+CBlock CreateTestBlock(\n+    std::shared_ptr<TestChain100Setup> test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CScript>& scriptpubkeys,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will pay to the same outputs that will be spent in the next one\n+    outputs.reserve(scriptpubkeys.size());\n+    for (const auto& spk : scriptpubkeys) {\n+        outputs.emplace_back(COIN, spk);\n+    }\n+\n+    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+\n+    // Create the outputs that will be spent in the first transaction of the test block\n+    // Doing this in a separate blocks excludes the validation of it's inputs from the benchmark\n+    auto coinbase_to_spend{test_setup->m_coinbase_txns[0]};\n+    const auto [first_tx, _]{test_setup->CreateValidTransaction(\n+        std::vector{coinbase_to_spend},\n+        std::vector{COutPoint(coinbase_to_spend->GetHash(), 0)},\n+        chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+    const auto test_block_parent_coinbase{GetScriptForDestination(coinbase_taproot)};\n+    test_setup->CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+    CTransactionRef input_tx{MakeTransactionRef(first_tx)};\n+    for (int i{0}; i < num_txs; i++) {\n+        std::vector<COutPoint> inputs;\n+        inputs.reserve(outputs.size());\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(input_tx->GetHash(), j);\n+        }\n+\n+        const auto [taproot_tx, _]{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.emplace_back(taproot_tx);\n+        input_tx = MakeTransactionRef(taproot_tx);\n+    }\n+\n+    // Coinbase output can use any output type as it is not spent and will not change the benchmark\n+    const CScript coinbase_spk{GetScriptForDestination(coinbase_taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+std::pair<std::vector<CKey>, std::vector<CScript>> CreateKeysAndScripts(const CKey& coinbaseKey, size_t num_taproot, size_t num_nontaproot)",
      "path": "src/bench/connectblock.cpp",
      "position": null,
      "original_position": 66,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "~I know that we generically call things \"scripts\" but I think it would be more clear to name this something like `CreateKeysAndSignatures`, as that better indicates what we are testing, i.e., ECDSA signatures and Schnorr signatures. I'd also recommend renaming the variables to `num_ecdsa_sigs` and `num_schnorr_sigs`, or something similar.~\r\n\r\nEDIT: reading this again, Scripts is more accurate since the signatures are created later, ignore me 😅 ",
      "created_at": "2025-01-27T15:33:05Z",
      "updated_at": "2025-01-28T11:28:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1930726187",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1930726187"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1930742652",
      "pull_request_review_id": 2575773186,
      "id": 1930742652,
      "node_id": "PRRC_kwDOABII585zFMt8",
      "diff_hunk": "@@ -0,0 +1,133 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+CBlock CreateTestBlock(\n+    std::shared_ptr<TestChain100Setup> test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CScript>& scriptpubkeys,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will pay to the same outputs that will be spent in the next one\n+    outputs.reserve(scriptpubkeys.size());\n+    for (const auto& spk : scriptpubkeys) {\n+        outputs.emplace_back(COIN, spk);\n+    }\n+\n+    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup->coinbaseKey.GetPubKey())};\n+\n+    // Create the outputs that will be spent in the first transaction of the test block\n+    // Doing this in a separate blocks excludes the validation of it's inputs from the benchmark\n+    auto coinbase_to_spend{test_setup->m_coinbase_txns[0]};\n+    const auto [first_tx, _]{test_setup->CreateValidTransaction(\n+        std::vector{coinbase_to_spend},\n+        std::vector{COutPoint(coinbase_to_spend->GetHash(), 0)},\n+        chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+    const auto test_block_parent_coinbase{GetScriptForDestination(coinbase_taproot)};\n+    test_setup->CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+    CTransactionRef input_tx{MakeTransactionRef(first_tx)};\n+    for (int i{0}; i < num_txs; i++) {\n+        std::vector<COutPoint> inputs;\n+        inputs.reserve(outputs.size());\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(input_tx->GetHash(), j);\n+        }\n+\n+        const auto [taproot_tx, _]{test_setup->CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.emplace_back(taproot_tx);\n+        input_tx = MakeTransactionRef(taproot_tx);\n+    }\n+\n+    // Coinbase output can use any output type as it is not spent and will not change the benchmark\n+    const CScript coinbase_spk{GetScriptForDestination(coinbase_taproot)};\n+    return test_setup->CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+std::pair<std::vector<CKey>, std::vector<CScript>> CreateKeysAndScripts(const CKey& coinbaseKey, size_t num_taproot, size_t num_nontaproot)\n+{\n+    std::vector<CKey> keys{coinbaseKey};\n+    keys.reserve(num_taproot + num_nontaproot + 1);\n+\n+    std::vector<CScript> spks;\n+    spks.reserve(num_taproot + num_nontaproot);\n+\n+    for (size_t i{0}; i < num_nontaproot; i++) {\n+        const CKey key{GenerateRandomKey()};\n+        keys.emplace_back(key);\n+        spks.emplace_back(GetScriptForDestination(WitnessV0KeyHash{key.GetPubKey()}));\n+    }\n+\n+    for (size_t i{0}; i < num_taproot; i++) {\n+        CKey key{GenerateRandomKey()};\n+        keys.emplace_back(key);\n+        spks.emplace_back(GetScriptForDestination(WitnessV1Taproot{XOnlyPubKey(key.GetPubKey())}));\n+    }\n+\n+    return {keys, spks};\n+}\n+\n+void BenchmarkConnectBlock(benchmark::Bench& bench, std::vector<CKey>& keys, std::vector<CScript>& spks, std::shared_ptr<TestChain100Setup> test_setup)\n+{\n+    const auto test_block{CreateTestBlock(test_setup, keys, spks)};\n+    auto pindex{std::make_unique<CBlockIndex>(test_block)};\n+    auto test_blockhash{std::make_unique<uint256>(test_block.GetHash())};\n+\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    pindex->nHeight = chainstate.m_chain.Height() + 1;\n+    pindex->phashBlock = test_blockhash.get();\n+    pindex->pprev = chainstate.m_chain.Tip();\n+\n+    BlockValidationState test_block_state;\n+    bench.unit(\"block\").run([&] {\n+        LOCK(cs_main);\n+        CCoinsViewCache viewNew{&chainstate.CoinsTip()};\n+        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew, false));",
      "path": "src/bench/connectblock.cpp",
      "position": null,
      "original_position": 105,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`fJustCheck` is already false by default, so I think this would be better as:\r\n\r\n```suggestion\r\n        assert(chainstate.ConnectBlock(test_block, test_block_state, pindex.get(), viewNew));\r\n```",
      "created_at": "2025-01-27T15:43:26Z",
      "updated_at": "2025-01-27T15:46:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1930742652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1930742652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1930745356",
      "pull_request_review_id": 2575773186,
      "id": 1930745356,
      "node_id": "PRRC_kwDOABII585zFNYM",
      "diff_hunk": "@@ -0,0 +1,133 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+CBlock CreateTestBlock(\n+    std::shared_ptr<TestChain100Setup> test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CScript>& scriptpubkeys,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will pay to the same outputs that will be spent in the next one\n+    outputs.reserve(scriptpubkeys.size());\n+    for (const auto& spk : scriptpubkeys) {\n+        outputs.emplace_back(COIN, spk);\n+    }",
      "path": "src/bench/connectblock.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It seems this was moved in here to deduplicate the code (which is great!), but I found this part to be a bit confusing. We only use this `scriptpubkeys` argument to create an outputs array, so why not create the `CTxOut` vector directly when we are creating the `scriptpubkeys` vector and then pass the `CTxOut` vector in as an argument? I also think a comment explicitly mentioning we are creating an same number input, same number output transaction would be worth adding.",
      "created_at": "2025-01-27T15:45:00Z",
      "updated_at": "2025-01-27T15:46:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1930745356",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1930745356"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1934978868",
      "pull_request_review_id": 2582875253,
      "id": 1934978868,
      "node_id": "PRRC_kwDOABII585zVW80",
      "diff_hunk": "@@ -0,0 +1,133 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+CBlock CreateTestBlock(\n+    std::shared_ptr<TestChain100Setup> test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CScript>& scriptpubkeys,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup->m_node.chainman->ActiveChainstate()};\n+\n+    std::vector<CTxOut> outputs;\n+    // Each transaction will pay to the same outputs that will be spent in the next one\n+    outputs.reserve(scriptpubkeys.size());\n+    for (const auto& spk : scriptpubkeys) {\n+        outputs.emplace_back(COIN, spk);\n+    }",
      "path": "src/bench/connectblock.cpp",
      "position": null,
      "original_position": 30,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "d54722be41246e89508f451bf6f9e27e7bb8d5f9",
      "in_reply_to_id": 1930745356,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> so why not create the `CTxOut` vector directly when we are creating the `scriptpubkeys` vector and then pass the `CTxOut` vector in as an argument?\r\n\r\nI updated the PR to do that.\r\n\r\n> I also think a comment explicitly mentioning we are creating an same number input, same number output transaction would be worth adding.\r\n\r\nI also added a comment stating this",
      "created_at": "2025-01-30T04:09:54Z",
      "updated_at": "2025-01-30T04:09:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1934978868",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1934978868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": 25,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 30,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1949386041",
      "pull_request_review_id": 2606336089,
      "id": 1949386041,
      "node_id": "PRRC_kwDOABII5850MUU5",
      "diff_hunk": "@@ -0,0 +1,145 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+/*\n+ * Creates a test block containing transactions with the following properties:\n+ * - Each transaction has the same number of inputs and outputs\n+ * - All Taproot inputs use simple key path spends (no script path spends)\n+ * - All signatures use SIGHASH_ALL (default sighash)\n+ * - Each transaction spends all outputs from the previous transaction\n+ */\n+CBlock CreateTestBlock(\n+    TestChain100Setup& test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CTxOut>& outputs,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup.m_node.chainman->ActiveChainstate()};\n+\n+    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup.coinbaseKey.GetPubKey())};\n+\n+    // Create the outputs that will be spent in the first transaction of the test block\n+    // Doing this in a separate blocks excludes the validation of it's inputs from the benchmark\n+    auto coinbase_to_spend{test_setup.m_coinbase_txns[0]};\n+    const auto [first_tx, _]{test_setup.CreateValidTransaction(\n+        std::vector{coinbase_to_spend},\n+        std::vector{COutPoint(coinbase_to_spend->GetHash(), 0)},\n+        chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+    const auto test_block_parent_coinbase{GetScriptForDestination(coinbase_taproot)};\n+    test_setup.CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+    CTransactionRef input_tx{MakeTransactionRef(first_tx)};\n+    for (int i{0}; i < num_txs; i++) {\n+        std::vector<COutPoint> inputs;\n+        inputs.reserve(outputs.size());\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(input_tx->GetHash(), j);\n+        }\n+\n+        const auto [taproot_tx, _]{test_setup.CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.emplace_back(taproot_tx);\n+        input_tx = MakeTransactionRef(taproot_tx);\n+    }\n+\n+    // Coinbase output can use any output type as it is not spent and will not change the benchmark\n+    const CScript coinbase_spk{GetScriptForDestination(coinbase_taproot)};\n+    return test_setup.CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+/*\n+ * Creates key pairs and corresponding outputs for the benchmark transactions.\n+ * - For Taproot outputs: Creates simple key path spendable outputs\n+ * - For non-Taproot outputs: Creates P2WPKH (native SegWit v0) outputs\n+ * - All outputs have value of 1 BTC\n+ */\n+std::pair<std::vector<CKey>, std::vector<CTxOut>> CreateKeysAndOutputs(const CKey& coinbaseKey, size_t num_taproot, size_t num_nontaproot)",
      "path": "src/bench/connectblock.cpp",
      "position": 72,
      "original_position": 72,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: `int` seems more appropriate here and I find `num_ecdsa` and `num_schnorr` to be more intuitive than `taproot` and `nontaproot`\r\n\r\n```suggestion\r\nstd::pair<std::vector<CKey>, std::vector<CTxOut>> CreateKeysAndOutputs(const CKey& coinbaseKey, int num_ecdsa, int num_schnorr)\r\n```",
      "created_at": "2025-02-10T15:54:39Z",
      "updated_at": "2025-02-10T16:07:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1949386041",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1949386041"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 72,
      "original_line": 72,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1949388434",
      "pull_request_review_id": 2606336089,
      "id": 1949388434,
      "node_id": "PRRC_kwDOABII5850MU6S",
      "diff_hunk": "@@ -0,0 +1,145 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+/*\n+ * Creates a test block containing transactions with the following properties:\n+ * - Each transaction has the same number of inputs and outputs\n+ * - All Taproot inputs use simple key path spends (no script path spends)\n+ * - All signatures use SIGHASH_ALL (default sighash)\n+ * - Each transaction spends all outputs from the previous transaction\n+ */\n+CBlock CreateTestBlock(\n+    TestChain100Setup& test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CTxOut>& outputs,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup.m_node.chainman->ActiveChainstate()};\n+\n+    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup.coinbaseKey.GetPubKey())};\n+\n+    // Create the outputs that will be spent in the first transaction of the test block\n+    // Doing this in a separate blocks excludes the validation of it's inputs from the benchmark\n+    auto coinbase_to_spend{test_setup.m_coinbase_txns[0]};\n+    const auto [first_tx, _]{test_setup.CreateValidTransaction(\n+        std::vector{coinbase_to_spend},\n+        std::vector{COutPoint(coinbase_to_spend->GetHash(), 0)},\n+        chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+    const auto test_block_parent_coinbase{GetScriptForDestination(coinbase_taproot)};\n+    test_setup.CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);\n+    CTransactionRef input_tx{MakeTransactionRef(first_tx)};\n+    for (int i{0}; i < num_txs; i++) {\n+        std::vector<COutPoint> inputs;\n+        inputs.reserve(outputs.size());\n+\n+        for (size_t j{0}; j < outputs.size(); j++) {\n+            inputs.emplace_back(input_tx->GetHash(), j);\n+        }\n+\n+        const auto [taproot_tx, _]{test_setup.CreateValidTransaction(\n+            std::vector{input_tx}, inputs, chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+        txs.emplace_back(taproot_tx);\n+        input_tx = MakeTransactionRef(taproot_tx);\n+    }\n+\n+    // Coinbase output can use any output type as it is not spent and will not change the benchmark\n+    const CScript coinbase_spk{GetScriptForDestination(coinbase_taproot)};\n+    return test_setup.CreateBlock(txs, coinbase_spk, chainstate);\n+}\n+\n+/*\n+ * Creates key pairs and corresponding outputs for the benchmark transactions.\n+ * - For Taproot outputs: Creates simple key path spendable outputs\n+ * - For non-Taproot outputs: Creates P2WPKH (native SegWit v0) outputs\n+ * - All outputs have value of 1 BTC\n+ */\n+std::pair<std::vector<CKey>, std::vector<CTxOut>> CreateKeysAndOutputs(const CKey& coinbaseKey, size_t num_taproot, size_t num_nontaproot)\n+{\n+    std::vector<CKey> keys{coinbaseKey};\n+    keys.reserve(num_taproot + num_nontaproot + 1);\n+\n+    std::vector<CTxOut> outputs;\n+    outputs.reserve(num_taproot + num_nontaproot);\n+\n+    for (size_t i{0}; i < num_nontaproot; i++) {",
      "path": "src/bench/connectblock.cpp",
      "position": 80,
      "original_position": 80,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "in_reply_to_id": null,
      "user": {
        "login": "josibake",
        "id": 7444140,
        "node_id": "MDQ6VXNlcjc0NDQxNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7444140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/josibake",
        "html_url": "https://github.com/josibake",
        "followers_url": "https://api.github.com/users/josibake/followers",
        "following_url": "https://api.github.com/users/josibake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/josibake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/josibake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/josibake/subscriptions",
        "organizations_url": "https://api.github.com/users/josibake/orgs",
        "repos_url": "https://api.github.com/users/josibake/repos",
        "events_url": "https://api.github.com/users/josibake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/josibake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "per the style guide in `doc/developer-notes.md`, `++I` is preferred over `i++`\r\n\r\n```suggestion\r\n    for (int i{0}; i < num_schnorr; ++i) {\r\n```\r\n\r\n(same feedback for the other loops below)",
      "created_at": "2025-02-10T15:56:01Z",
      "updated_at": "2025-02-10T16:07:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1949388434",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1949388434"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 80,
      "original_line": 80,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1952062784",
      "pull_request_review_id": 2610952186,
      "id": 1952062784,
      "node_id": "PRRC_kwDOABII5850Wh1A",
      "diff_hunk": "@@ -0,0 +1,145 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <addresstype.h>\n+#include <bench/bench.h>\n+#include <interfaces/chain.h>\n+#include <kernel/cs_main.h>\n+#include <script/interpreter.h>\n+#include <sync.h>\n+#include <test/util/setup_common.h>\n+#include <validation.h>\n+\n+#include <cassert>\n+#include <vector>\n+\n+/*\n+ * Creates a test block containing transactions with the following properties:\n+ * - Each transaction has the same number of inputs and outputs\n+ * - All Taproot inputs use simple key path spends (no script path spends)\n+ * - All signatures use SIGHASH_ALL (default sighash)\n+ * - Each transaction spends all outputs from the previous transaction\n+ */\n+CBlock CreateTestBlock(\n+    TestChain100Setup& test_setup,\n+    const std::vector<CKey>& keys,\n+    const std::vector<CTxOut>& outputs,\n+    int num_txs = 1000)\n+{\n+    Chainstate& chainstate{test_setup.m_node.chainman->ActiveChainstate()};\n+\n+    const WitnessV1Taproot coinbase_taproot{XOnlyPubKey(test_setup.coinbaseKey.GetPubKey())};\n+\n+    // Create the outputs that will be spent in the first transaction of the test block\n+    // Doing this in a separate blocks excludes the validation of it's inputs from the benchmark\n+    auto coinbase_to_spend{test_setup.m_coinbase_txns[0]};\n+    const auto [first_tx, _]{test_setup.CreateValidTransaction(\n+        std::vector{coinbase_to_spend},\n+        std::vector{COutPoint(coinbase_to_spend->GetHash(), 0)},\n+        chainstate.m_chain.Height() + 1, keys, outputs, std::nullopt, std::nullopt)};\n+    const auto test_block_parent_coinbase{GetScriptForDestination(coinbase_taproot)};\n+    test_setup.CreateAndProcessBlock(std::vector{first_tx}, test_block_parent_coinbase, &chainstate);\n+\n+    std::vector<CMutableTransaction> txs;\n+    txs.reserve(num_txs);",
      "path": "src/bench/connectblock.cpp",
      "position": 45,
      "original_position": 45,
      "commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "original_commit_id": "1c6b886465df0f00549e7d10c3bfefd27be7f1c2",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "not blocking, just a question: here and below, why `reserve()` for vectors that are outside of a critical path?",
      "created_at": "2025-02-12T06:37:36Z",
      "updated_at": "2025-02-12T06:38:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31689#discussion_r1952062784",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1952062784"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31689"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 45,
      "original_line": 45,
      "side": "RIGHT"
    }
  ]
}