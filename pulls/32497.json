{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497",
    "id": 2519262912,
    "node_id": "PR_kwDOABII586WKObA",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32497",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32497.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32497.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/a7997d02ebe5b72e706712f43884644b705a1cd1",
    "number": 32497,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "merkle: pre‑reserve leaves to prevent reallocs with odd vtx count",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "#### Summary\r\n\r\n`ComputeMerkleRoot` [duplicates the last hash](https://github.com/bitcoin/bitcoin/blob/39b6c139bd6be33699af781f1d71f6fed303d468/src/consensus/merkle.cpp#L54-L56) when the input size is odd.\r\nIf the caller provides a `std::vector` whose capacity equals its size (common when the vector was created with `resize()`), that extra `push_back` forces a reallocation, doubling its capacity.\r\nWe pay this penalty on every Merkle root calculation even though we know the final size in advance.\r\n\r\n#### Fix\r\n\r\n* Call sites: replace `resize(n)` + index assignment with `reserve(n + (n & 1))` + `emplace_back(...)`;\r\n* Guarantees one extra slot when `vtx.size()` is odd (assigned later);\r\n* Removes default construction of `uint256` objects we overwrite anyway.\r\n\r\n#### Validation\r\n\r\nThe benchmark was updated to use an even leaf count for simplicity and to focus on hashing speed rather than reallocations or vector copying.\r\n\r\nAsserts (not pushed in this PR) confirm that `push_back` never reallocates and that the coinbase witness hash remains null:\r\n\r\n```cpp\r\nif (hashes.size() & 1) {\r\n    assert(hashes.size() < hashes.capacity()); // TODO remove\r\n    hashes.push_back(hashes.back());\r\n}\r\n\r\nleaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\r\nleaves.emplace_back();\r\nassert(leaves.back().IsNull()); // TODO remove\r\n```\r\n\r\nA full `-reindex-chainstate` up to block **896 408** ran without triggering the asserts.\r\n",
    "labels": [],
    "created_at": "2025-05-14T13:01:42Z",
    "updated_at": "2025-08-09T02:32:50Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "516cf059f699b39453e935b20c321e47508bf965",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/pre‑reserve-merkle-leaves-to-max",
      "ref": "l0rinc/pre‑reserve-merkle-leaves-to-max",
      "sha": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 270966,
        "default_branch": "master",
        "open_issues_count": 5,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-08-08T23:47:42Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2025-08-04T01:45:17Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "2bb06bcaf284d3522db5411890c20ba1a587703e",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37625,
        "stargazers_count": 84932,
        "watchers_count": 84932,
        "size": 291031,
        "default_branch": "master",
        "open_issues_count": 750,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-08-09T01:11:27Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-08-09T01:11:37Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 50,
    "deletions": 20,
    "changed_files": 7,
    "commits": 2,
    "review_comments": 18,
    "comments": 10
  },
  "events": [
    {
      "event": "commented",
      "id": 2880167395,
      "node_id": "IC_kwDOABII586rq93j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2880167395",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T13:01:47Z",
      "updated_at": "2025-08-08T08:20:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32497.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [optout21](https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-3099889680) |\n| Concept ACK | [luke-jr](https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2853787748) |\n| Stale ACK | [yuvicc](https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3011987044) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#33116](https://github.com/bitcoin/bitcoin/pull/33116) (refactor: Convert uint256 to Txid by marcofleon)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-2880167395",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "reviewed",
      "id": 2853787748,
      "node_id": "PRR_kwDOABII586qGVhk",
      "url": null,
      "actor": null,
      "commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-05-20T11:34:01Z",
      "author_association": "MEMBER",
      "body": "utACK main commit. Not sure why the benchmark is being changed.",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2853787748",
      "submitted_at": "2025-05-20T11:34:01Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "reviewed",
      "id": 2854173281,
      "node_id": "PRR_kwDOABII586qHzph",
      "url": null,
      "actor": null,
      "commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-05-20T13:28:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the review!",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2854173281",
      "submitted_at": "2025-05-20T13:28:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "reviewed",
      "id": 2926329777,
      "node_id": "PRR_kwDOABII586ubD-x",
      "url": null,
      "actor": null,
      "commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-13T20:34:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nMemory allocation/deallocation is slow and expensive. ",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2926329777",
      "submitted_at": "2025-06-13T20:34:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "commented",
      "id": 2971637588,
      "node_id": "IC_kwDOABII586xH5dU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2971637588",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-13T20:42:19Z",
      "updated_at": "2025-06-13T20:42:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "I have thought on changing the benchmark tests as we would want to test the worst case scenario right? or else we could have both case for testing? ",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-2971637588",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "reviewed",
      "id": 2926489759,
      "node_id": "PRR_kwDOABII586ubrCf",
      "url": null,
      "actor": null,
      "commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-13T21:35:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "# Benchmark Testing\r\n\r\nmaster@5757de4ddd37f9321ee6b338b40888fd3561fc00\r\n\r\n- With 9000\r\n```\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               52.62 |       19,005,746.07 |    0.2% |      0.01 | `MerkleRoot`\r\n|               52.64 |       18,998,504.40 |    0.3% |      0.01 | `MerkleRoot`\r\n|               52.63 |       18,999,727.67 |    0.2% |      0.01 | `MerkleRoot`\r\n```\r\n\r\n- With 9001\r\n```\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.50 |       18,693,063.88 |    0.3% |      0.01 | `MerkleRoot`\r\n|               53.53 |       18,681,211.49 |    0.5% |      0.01 | `MerkleRoot`\r\n|               53.49 |       18,694,053.87 |    0.5% |      0.01 | `MerkleRoot`\r\n```\r\n\r\n--------------------------------------------------------------------\r\n\r\nCommit 39b6c139bd6be33699af781f1d71f6fed303d468\r\n\r\n- With 9000\r\n```\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               52.51 |       19,043,628.95 |    0.2% |      0.01 | `MerkleRoot`\r\n|               52.52 |       19,040,989.96 |    0.2% |      0.01 | `MerkleRoot`\r\n|               52.53 |       19,036,358.39 |    0.2% |      0.01 | `MerkleRoot`\r\n```\r\n\r\n- With 9001\r\n```\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.40 |       18,713,525.67 |    0.3% |      0.01 | `MerkleRoot`\r\n|               53.44 |       19,314,655.73 |    0.3% |      0.01 | `MerkleRoot`\r\n|               53.41 |       18,883,462.75 |    0.3% |      0.01 | `MerkleRoot`\r\n```",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2926489759",
      "submitted_at": "2025-06-13T21:35:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18154933868,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAAQ6Hk5s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18154933868",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/4cc5942895673591de4edceb6dd0c7188c302a72",
      "created_at": "2025-06-15T09:56:25Z"
    },
    {
      "event": "commented",
      "id": 2973633245,
      "node_id": "IC_kwDOABII586xPgrd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2973633245",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T10:06:53Z",
      "updated_at": "2025-06-15T10:08:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated the benchmark to showcase the before/after state better (resembles production code changes), by splitting out the vector copies to the unmetered lambda and having an odd number of elements.\r\nChanged the previous `leaves.reserve((block.vtx.size() + 1) & ~1ULL)` rounding to `leaves.reserve(block.vtx.size() + (block.vtx.size() & 1))`.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-2973633245",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "review_requested",
      "id": 18154970596,
      "node_id": "RRE_lADOABII5862klqrzwAAAAQ6Ht3k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18154970596",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T10:06:57Z",
      "requested_reviewer": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18154970671,
      "node_id": "RRE_lADOABII5862klqrzwAAAAQ6Ht4v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18154970671",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T10:06:58Z",
      "requested_reviewer": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2930083029,
      "node_id": "PRR_kwDOABII586upYTV",
      "url": null,
      "actor": null,
      "commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-19T16:00:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK 4cc5942895673591de4edceb6dd0c7188c302a72\r\n\r\n# Testing\r\n\r\n## Before Master@9a7eece5a4\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.75 |       18,605,160.70 |    0.7% |      0.01 | `MerkleRoot`\r\n|               53.64 |       18,643,002.35 |    0.1% |      0.01 | `MerkleRoot`\r\n|               53.91 |       18,548,704.52 |    0.4% |      0.01 | `MerkleRoot`\r\n\r\n## After commit@4cc5942895673591de4edceb6dd0c7188c302a72\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               57.67 |       17,340,305.39 |    0.0% |      0.52 | `MerkleRoot`\r\n|               57.69 |       17,332,534.96 |    0.0% |      0.52 | `MerkleRoot`\r\n|               58.14 |       17,199,057.10 |    0.0% |      0.52 | `MerkleRoot`",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2930083029",
      "submitted_at": "2025-06-15T17:26:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "reviewed",
      "id": 2945160215,
      "node_id": "PRR_kwDOABII586vi5QX",
      "url": null,
      "actor": null,
      "commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-20T09:22:45Z",
      "author_association": "MEMBER",
      "body": "not sure how meaningful this is, but it looks like there are a bunch of unrelated style changes that don't seem to have a benefit?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2945160215",
      "submitted_at": "2025-06-20T09:22:45Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18245408459,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAAQ_gtbL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18245408459",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a1f2a4c3eed7ca6129781451e0edc49debbb0594",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/a1f2a4c3eed7ca6129781451e0edc49debbb0594",
      "created_at": "2025-06-20T11:19:32Z"
    },
    {
      "event": "reviewed",
      "id": 2945559978,
      "node_id": "PRR_kwDOABII586vka2q",
      "url": null,
      "actor": null,
      "commit_id": "a1f2a4c3eed7ca6129781451e0edc49debbb0594",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-06-25T21:34:02Z",
      "author_association": "CONTRIBUTOR",
      "body": "The changes revert the original benchmark's behavior of including the leaf vector in the benchmark (more explicitly and reserved like the production code).\r\nI've also changed the `emplace_back` calls for the hashes to `push_bash` and reverted the original loop conditions to minimize the diff in critical code sections.\r\n\r\nNote to yuvicc: previous benchmark version was measuring something else than master (only the merkle call without the vector copy), so we can't directly compare the results.\r\n\r\n~The new results don't show any significant speed increase, only the memory allocation is more predictable - which isn't captured by the benchmark anymore.~",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-2945559978",
      "submitted_at": "2025-06-20T11:24:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "review_requested",
      "id": 18312609733,
      "node_id": "RRE_lADOABII5862klqrzwAAAARDhD_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18312609733",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T09:22:33Z",
      "requested_reviewer": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 18312610132,
      "node_id": "RRE_lADOABII5862klqrzwAAAARDhEFU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18312610132",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T09:22:34Z",
      "requested_reviewer": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18324692942,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAAREPJ_O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18324692942",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a73dd45e95f5e909d0950ba7c76225589df74854",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/a73dd45e95f5e909d0950ba7c76225589df74854",
      "created_at": "2025-06-25T21:30:38Z"
    },
    {
      "event": "commented",
      "id": 3006209711,
      "node_id": "IC_kwDOABII586zLx6v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3006209711",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T21:33:42Z",
      "updated_at": "2025-06-25T21:33:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "I've rebased the changed and adjusted the benchmark to be more similar to the other production usages in the first commit, rounded to even in the second (optimization) commit, so that we can realistically measure the speed difference before and after:\r\n\r\n% build/bin/bench_bitcoin -filter='MerkleRoot' --min-time=1000\r\n\r\nBefore 7f620cffebee593e48434cf182cc2fd64a6d76be:\r\n\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               45.50 |       21,975,688.66 |    0.0% |      1.10 | `MerkleRoot`\r\n|               45.53 |       21,962,546.91 |    0.1% |      1.10 | `MerkleRoot`\r\n|               45.53 |       21,965,162.52 |    0.0% |      1.10 | `MerkleRoot`\r\n\r\nAfter a73dd45e95f5e909d0950ba7c76225589df74854:\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               45.04 |       22,200,976.95 |    0.1% |      1.10 | `MerkleRoot`\r\n|               44.97 |       22,235,208.25 |    0.1% |      1.10 | `MerkleRoot`\r\n|               45.01 |       22,217,033.81 |    0.1% |      1.10 | `MerkleRoot`",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3006209711",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18324753508,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAAREPYxk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18324753508",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "be8f3053a7ad526823f32f1a70847b9c06c4c54b",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/be8f3053a7ad526823f32f1a70847b9c06c4c54b",
      "created_at": "2025-06-25T21:36:01Z"
    },
    {
      "event": "commented",
      "id": 3011987044,
      "node_id": "IC_kwDOABII586zh0Zk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3011987044",
      "actor": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T07:22:24Z",
      "updated_at": "2025-06-27T07:22:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "lgtm re-ACK be8f3053a7ad526823f32f1a70847b9c06c4c54b\r\n\r\nBefore e87430ed5fad6f9d90c1e7d256b9b8276b936c24\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.83 |       18,577,129.91 |    0.1% |      1.10 | `MerkleRoot`\r\n|               53.62 |       18,648,858.81 |    0.1% |      1.10 | `MerkleRoot`\r\n|               53.70 |       18,621,594.40 |    0.1% |      1.10 | `MerkleRoot`\r\n\r\nAfter be8f3053a7ad526823f32f1a70847b9c06c4c54b\r\n\r\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\r\n|--------------------:|--------------------:|--------:|----------:|:----------\r\n|               53.02 |       18,860,232.62 |    0.2% |      1.10 | `MerkleRoot`\r\n|               52.88 |       18,910,755.68 |    0.0% |      1.10 | `MerkleRoot`\r\n|               52.89 |       18,906,671.63 |    0.1% |      1.10 | `MerkleRoot`",
      "user": {
        "login": "yuvicc",
        "id": 92994932,
        "node_id": "U_kgDOBYr9dA",
        "avatar_url": "https://avatars.githubusercontent.com/u/92994932?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/yuvicc",
        "html_url": "https://github.com/yuvicc",
        "followers_url": "https://api.github.com/users/yuvicc/followers",
        "following_url": "https://api.github.com/users/yuvicc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/yuvicc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/yuvicc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/yuvicc/subscriptions",
        "organizations_url": "https://api.github.com/users/yuvicc/orgs",
        "repos_url": "https://api.github.com/users/yuvicc/repos",
        "events_url": "https://api.github.com/users/yuvicc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/yuvicc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3011987044",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18909367246,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAARnFgvO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18909367246",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6d1950d76bb643b2e3aa2899e052bbe507b97ef1",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/6d1950d76bb643b2e3aa2899e052bbe507b97ef1",
      "created_at": "2025-07-30T23:55:09Z"
    },
    {
      "event": "commented",
      "id": 3138169095,
      "node_id": "IC_kwDOABII5867DKkH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3138169095",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-30T23:58:15Z",
      "updated_at": "2025-07-30T23:58:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased and added a new commit on top for deduplicating the integer rounding. Ready for review again.",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3138169095",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18909421146,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAARnFt5a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18909421146",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2d1a4e7208f2205c671a299de6b7ee358bb235a7",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/2d1a4e7208f2205c671a299de6b7ee358bb235a7",
      "created_at": "2025-07-30T23:58:47Z"
    },
    {
      "event": "labeled",
      "id": 18909422097,
      "node_id": "LE_lADOABII5862klqrzwAAAARnFuIR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18909422097",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-30T23:58:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3138171113,
      "node_id": "IC_kwDOABII5867DLDp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3138171113",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-30T23:58:57Z",
      "updated_at": "2025-07-30T23:58:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/47077763348</sub>\n<sub>LLM reason (✨ experimental): Lint check failed due to missing include guards in src/util/ints.h.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3138171113",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "unlabeled",
      "id": 18910163555,
      "node_id": "UNLE_lADOABII5862klqrzwAAAARnIjJj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18910163555",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-31T01:37:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3162698716,
      "node_id": "IC_kwDOABII5868gvPc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3162698716",
      "actor": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-07T06:36:53Z",
      "updated_at": "2025-08-07T06:36:53Z",
      "author_association": "NONE",
      "body": "LGTM!\r\nMinor comments:\r\n- Maybe add a note to the `ComputeMerkleRoot` declaration, that the `hashes` input is expected to have one extra capacity (in case size is odd). Minor, as this function is not used directly much.\r\n- Even more, it could debug-assert that capacity is even, but this may be a bit of a stretch.",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3162698716",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19041923436,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAARu_LFs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19041923436",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "5d117d99f3080ef27e433dd9ee826b7d56a0dc19",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/5d117d99f3080ef27e433dd9ee826b7d56a0dc19",
      "created_at": "2025-08-07T19:02:47Z"
    },
    {
      "event": "commented",
      "id": 3165392837,
      "node_id": "IC_kwDOABII5868rA_F",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3165392837",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-07T19:03:12Z",
      "updated_at": "2025-08-07T22:36:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "> it could debug-assert that capacity is even\r\n\r\n~Added, thanks for the hint~\r\n\r\nEdit: had to push a few variants, the fuzzing still seems to fail, so I removed the Assert/Assume from `ComputeMerkleRoot` (it's not a requirement anyway, it's just more performant)",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3165392837",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19042360120,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAARvA1s4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19042360120",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c162fdf83aca13bfd925c3873b7af8eda6f908f3",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/c162fdf83aca13bfd925c3873b7af8eda6f908f3",
      "created_at": "2025-08-07T19:31:43Z"
    },
    {
      "event": "labeled",
      "id": 19042361620,
      "node_id": "LE_lADOABII5862klqrzwAAAARvA2EU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19042361620",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-07T19:31:51Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3165481789,
      "node_id": "IC_kwDOABII5868rWs9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3165481789",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-07T19:31:53Z",
      "updated_at": "2025-08-07T19:31:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `multiprocess, i686, DEBUG`: https://github.com/bitcoin/bitcoin/runs/47624077326</sub>\n<sub>LLM reason (✨ experimental): The CI failure is caused by an assertion failure in consensus/merkle.cpp during the merkle root computation.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#issuecomment-3165481789",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32497"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE3YTRmOGFjZTM3YTVjZDgyMWFhNWJmMzQxOGFlMDAxZTkyNGQ0NGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/17a4f8ace37a5cd821aa5bf3418ae001e924d44e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/17a4f8ace37a5cd821aa5bf3418ae001e924d44e",
      "tree": {
        "sha": "f6041b4943177775eb9ffae73dfb2db6ca9b2a42",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f6041b4943177775eb9ffae73dfb2db6ca9b2a42"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2bb06bcaf284d3522db5411890c20ba1a587703e",
          "sha": "2bb06bcaf284d3522db5411890c20ba1a587703e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2bb06bcaf284d3522db5411890c20ba1a587703e"
        }
      ],
      "message": "refactor: make `MerkleRoot` benchmark more representative\n\nInstead of mutating the input after each round to avoid unwanted compiler optimizations, we assert the expected hash, which likewise inhibits aggressive optimization.\n\nTo make the benchmark more similar to other `ComputeMerkleRoot` the input leaves copying is made explicit before each run.\n\n% build/bin/bench_bitcoin -filter='MerkleRoot' --min-time=1000\n\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|               45.50 |       21,975,688.66 |    0.0% |      1.10 | `MerkleRoot`\n|               45.53 |       21,962,546.91 |    0.1% |      1.10 | `MerkleRoot`\n|               45.53 |       21,965,162.52 |    0.0% |      1.10 | `MerkleRoot`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-08-07T21:25:02Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-05-14T12:32:08Z"
      },
      "sha": "17a4f8ace37a5cd821aa5bf3418ae001e924d44e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19043786054,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAARvGR1G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19043786054",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9f1f74a388fdbb997e5b01b6ce444727cafb5274",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/9f1f74a388fdbb997e5b01b6ce444727cafb5274",
      "created_at": "2025-08-07T21:25:12Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE3OTk3ZDAyZWJlNWI3MmU3MDY3MTJmNDM4ODQ2NDRiNzA1YTFjZDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7997d02ebe5b72e706712f43884644b705a1cd1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a7997d02ebe5b72e706712f43884644b705a1cd1",
      "tree": {
        "sha": "acf9f43f6827507d847f3a70bb1c9d33147b345e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/acf9f43f6827507d847f3a70bb1c9d33147b345e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/17a4f8ace37a5cd821aa5bf3418ae001e924d44e",
          "sha": "17a4f8ace37a5cd821aa5bf3418ae001e924d44e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/17a4f8ace37a5cd821aa5bf3418ae001e924d44e"
        }
      ],
      "message": "merkle: pre-reserve leaves to prevent reallocs with odd vtx count\n\nThis prevents the input vector from doubling in size when the input count is odd.\nThe rounding adds 1 when the size is odd (least significant bit is 1); otherwise it adds 0, keeping the value even.\n\n% build/bin/bench_bitcoin -filter='MerkleRoot' --min-time=1000\n\n|             ns/leaf |              leaf/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|               45.04 |       22,200,976.95 |    0.1% |      1.10 | `MerkleRoot`\n|               44.97 |       22,235,208.25 |    0.1% |      1.10 | `MerkleRoot`\n|               45.01 |       22,217,033.81 |    0.1% |      1.10 | `MerkleRoot`\n\nCo-authored-by: optout21 <13562139+optout21@users.noreply.github.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-08-07T22:35:44Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-05-14T12:32:11Z"
      },
      "sha": "a7997d02ebe5b72e706712f43884644b705a1cd1"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 19044622452,
      "node_id": "HRFPE_lADOABII5862klqrzwAAAARvJeB0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19044622452",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "commit_url": "https://api.github.com/repos/l0rinc/bitcoin/commits/a7997d02ebe5b72e706712f43884644b705a1cd1",
      "created_at": "2025-08-07T22:35:53Z"
    },
    {
      "event": "unlabeled",
      "id": 19045352770,
      "node_id": "UNLE_lADOABII5862klqrzwAAAARvMQVC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/19045352770",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-08-08T00:13:27Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 3099889680,
      "node_id": "PRR_kwDOABII5864xJAQ",
      "url": null,
      "actor": null,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-08-08T08:20:09Z",
      "author_association": "NONE",
      "body": "ACK a7997d02ebe5b72e706712f43884644b705a1cd1\r\n\r\nGood optimization, nice catch!",
      "user": {
        "login": "optout21",
        "id": 13562139,
        "node_id": "MDQ6VXNlcjEzNTYyMTM5",
        "avatar_url": "https://avatars.githubusercontent.com/u/13562139?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/optout21",
        "html_url": "https://github.com/optout21",
        "followers_url": "https://api.github.com/users/optout21/followers",
        "following_url": "https://api.github.com/users/optout21/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/optout21/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/optout21/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/optout21/subscriptions",
        "organizations_url": "https://api.github.com/users/optout21/orgs",
        "repos_url": "https://api.github.com/users/optout21/repos",
        "events_url": "https://api.github.com/users/optout21/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/optout21/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-3099889680",
      "submitted_at": "2025-08-08T08:20:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    },
    {
      "event": "reviewed",
      "id": 3102373739,
      "node_id": "PRR_kwDOABII58646ndr",
      "url": null,
      "actor": null,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "commit_url": null,
      "created_at": null,
      "updated_at": "2025-08-09T01:34:54Z",
      "author_association": "MEMBER",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#pullrequestreview-3102373739",
      "submitted_at": "2025-08-09T01:34:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097711372",
      "pull_request_review_id": 2853787748,
      "id": 2097711372,
      "node_id": "PRRC_kwDOABII5859CIkM",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve((block.vtx.size() + 1) & ~1ULL); // capacity rounded up to even",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This assumes `size_t` is `unsigned long long` I think? Can we avoid that easily?",
      "created_at": "2025-05-20T11:25:51Z",
      "updated_at": "2025-05-20T11:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2097711372",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097711372"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 69,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097724115",
      "pull_request_review_id": 2853787748,
      "id": 2097724115,
      "node_id": "PRRC_kwDOABII5859CLrT",
      "diff_hunk": "@@ -11,16 +11,15 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n-    std::vector<uint256> leaves;\n-    leaves.resize(9001);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+    std::vector<uint256> leaves(9000); // even number of leaves",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "899e4662374e73e3b5a3fb5b22fba8e94d64a49f",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Wouldn't it be better to benchmark the less-performant input?",
      "created_at": "2025-05-20T11:33:07Z",
      "updated_at": "2025-05-20T11:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2097724115",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097724115"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097725346",
      "pull_request_review_id": 2853787748,
      "id": 2097725346,
      "node_id": "PRRC_kwDOABII5859CL-i",
      "diff_hunk": "@@ -11,16 +11,15 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n-    std::vector<uint256> leaves;\n-    leaves.resize(9001);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+    std::vector<uint256> leaves(9000); // even number of leaves\n     for (auto& item : leaves) {\n         item = rng.rand256();\n     }\n     bench.batch(leaves.size()).unit(\"leaf\").run([&] {\n-        bool mutation = false;\n-        uint256 hash = ComputeMerkleRoot(std::vector<uint256>(leaves), &mutation);\n-        leaves[mutation] = hash;\n+        bool mutation{false};\n+        const uint256 hash{ComputeMerkleRoot(std::vector(leaves), &mutation)};\n+        assert(mutation == false && hash == uint256{\"18ff9b2bef46a834b2625871b2839fec3b67fc1243920c424858324fbde1a8de\"});",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "899e4662374e73e3b5a3fb5b22fba8e94d64a49f",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "How does this avoid optimisations?",
      "created_at": "2025-05-20T11:33:49Z",
      "updated_at": "2025-05-20T11:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2097725346",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097725346"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097962172",
      "pull_request_review_id": 2854173281,
      "id": 2097962172,
      "node_id": "PRRC_kwDOABII5859DFy8",
      "diff_hunk": "@@ -11,16 +11,15 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n-    std::vector<uint256> leaves;\n-    leaves.resize(9001);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+    std::vector<uint256> leaves(9000); // even number of leaves\n     for (auto& item : leaves) {\n         item = rng.rand256();\n     }\n     bench.batch(leaves.size()).unit(\"leaf\").run([&] {\n-        bool mutation = false;\n-        uint256 hash = ComputeMerkleRoot(std::vector<uint256>(leaves), &mutation);\n-        leaves[mutation] = hash;\n+        bool mutation{false};\n+        const uint256 hash{ComputeMerkleRoot(std::vector(leaves), &mutation)};\n+        assert(mutation == false && hash == uint256{\"18ff9b2bef46a834b2625871b2839fec3b67fc1243920c424858324fbde1a8de\"});",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "899e4662374e73e3b5a3fb5b22fba8e94d64a49f",
      "in_reply_to_id": 2097725346,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "the `ComputeMerkleRoot` calculation has to be performed to be able to validate this assert - it's can't eliminate the call.",
      "created_at": "2025-05-20T13:21:31Z",
      "updated_at": "2025-05-20T13:28:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2097962172",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097962172"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097969142",
      "pull_request_review_id": 2854173281,
      "id": 2097969142,
      "node_id": "PRRC_kwDOABII5859DHf2",
      "diff_hunk": "@@ -11,16 +11,15 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n-    std::vector<uint256> leaves;\n-    leaves.resize(9001);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+    std::vector<uint256> leaves(9000); // even number of leaves",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "899e4662374e73e3b5a3fb5b22fba8e94d64a49f",
      "in_reply_to_id": 2097724115,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "After this change all call-sites are pre-sized to even number of leaves, so this reflects the usage better.\r\nI could also round to `9002` to mimic the new `leaves.reserve((9001 + 1) & ~1ULL)` behavior, if you thinks that's more representative.",
      "created_at": "2025-05-20T13:24:35Z",
      "updated_at": "2025-05-20T13:28:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2097969142",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097969142"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097976720",
      "pull_request_review_id": 2854173281,
      "id": 2097976720,
      "node_id": "PRRC_kwDOABII5859DJWQ",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve((block.vtx.size() + 1) & ~1ULL); // capacity rounded up to even",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "in_reply_to_id": 2097711372,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "we could either do `size_t{1}` or `leaves.reserve(block.vtx.size() + (block.vtx.size() & 1))`, I think, if you think this could be problematic on 32 bit systems.",
      "created_at": "2025-05-20T13:27:20Z",
      "updated_at": "2025-05-20T13:29:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2097976720",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2097976720"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 69,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2147507046",
      "pull_request_review_id": 2929061513,
      "id": 2147507046,
      "node_id": "PRRC_kwDOABII586AAFtm",
      "diff_hunk": "@@ -11,16 +11,15 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n-    std::vector<uint256> leaves;\n-    leaves.resize(9001);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+    std::vector<uint256> leaves(9000); // even number of leaves",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "899e4662374e73e3b5a3fb5b22fba8e94d64a49f",
      "in_reply_to_id": 2097724115,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "added back `9001`",
      "created_at": "2025-06-15T09:35:50Z",
      "updated_at": "2025-06-15T10:07:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2147507046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2147507046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 15,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2147507192",
      "pull_request_review_id": 2929061513,
      "id": 2147507192,
      "node_id": "PRRC_kwDOABII586AAFv4",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve((block.vtx.size() + 1) & ~1ULL); // capacity rounded up to even",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "39b6c139bd6be33699af781f1d71f6fed303d468",
      "in_reply_to_id": 2097711372,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I ended up with `block.vtx.size() + (block.vtx.size() & 1)` - if the value ends with a 1, it's an odd number and we increment it to make it even",
      "created_at": "2025-06-15T09:36:33Z",
      "updated_at": "2025-06-15T10:07:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2147507192",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2147507192"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 69,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158435570",
      "pull_request_review_id": 2945160215,
      "id": 2158435570,
      "node_id": "PRRC_kwDOABII586Apxzy",
      "diff_hunk": "@@ -11,16 +11,27 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+\n+    constexpr size_t block_vtx_size{9001}; // Must be odd to test the special case of the last hash being duplicated.\n     std::vector<uint256> leaves;\n-    leaves.resize(9001);\n-    for (auto& item : leaves) {\n-        item = rng.rand256();\n+    leaves.resize(block_vtx_size);\n+    for (auto& h : leaves) h = rng.rand256();",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "064f33bbe2b646a43f37807785c59e1031029131",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "why is this changed. touching a line to only remove the {} after the for loop seems odd and I had the impression that the dev notes preferred to use {}",
      "created_at": "2025-06-20T09:11:12Z",
      "updated_at": "2025-06-20T09:22:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158435570",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158435570"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "LEFT",
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158441331",
      "pull_request_review_id": 2945160215,
      "id": 2158441331,
      "node_id": "PRRC_kwDOABII586ApzNz",
      "diff_hunk": "@@ -11,16 +11,27 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+\n+    constexpr size_t block_vtx_size{9001}; // Must be odd to test the special case of the last hash being duplicated.\n     std::vector<uint256> leaves;\n-    leaves.resize(9001);\n-    for (auto& item : leaves) {\n-        item = rng.rand256();\n+    leaves.resize(block_vtx_size);\n+    for (auto& h : leaves) h = rng.rand256();\n+\n+    constexpr size_t iterations{1000};\n+    std::vector<std::vector<uint256>> cases(iterations);",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "064f33bbe2b646a43f37807785c59e1031029131",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "not sure about pre-allocating. All real code paths allocate in-line for each iteration, so the benchmark should follow that. This would also avoid eating 100+mb for a microbenchmark?",
      "created_at": "2025-06-20T09:14:12Z",
      "updated_at": "2025-06-20T09:22:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158441331",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158441331"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158453448",
      "pull_request_review_id": 2945160215,
      "id": 2158453448,
      "node_id": "PRRC_kwDOABII586Ap2LI",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\n+    for (const auto& tx : block.vtx) {\n+        leaves.emplace_back(tx->GetHash());",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "why is this changed? I don't think a byte array can meaningfully be moved (of course it compiles, but moving a byte is no different than copying it)",
      "created_at": "2025-06-20T09:19:21Z",
      "updated_at": "2025-06-20T09:22:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158453448",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158453448"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 71,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158456828",
      "pull_request_review_id": 2945160215,
      "id": 2158456828,
      "node_id": "PRRC_kwDOABII586Ap2_8",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\n+    for (const auto& tx : block.vtx) {\n+        leaves.emplace_back(tx->GetHash());\n     }\n     return ComputeMerkleRoot(std::move(leaves), mutated);\n }\n \n uint256 BlockWitnessMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    leaves[0].SetNull(); // The witness hash of the coinbase is 0.\n-    for (size_t s = 1; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetWitnessHash();\n+    leaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\n+    leaves.emplace_back(); // The witness hash of the coinbase is 0.\n+    for (size_t i{1}; i < block.vtx.size(); ++i) {",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "why is this changed? I don't think it is worth to touch a line just to change the name of the variable from one single char to another single char.",
      "created_at": "2025-06-20T09:20:41Z",
      "updated_at": "2025-06-20T09:22:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158456828",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158456828"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158650714",
      "pull_request_review_id": 2945559978,
      "id": 2158650714,
      "node_id": "PRRC_kwDOABII586AqmVa",
      "diff_hunk": "@@ -11,16 +11,27 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+\n+    constexpr size_t block_vtx_size{9001}; // Must be odd to test the special case of the last hash being duplicated.\n     std::vector<uint256> leaves;\n-    leaves.resize(9001);\n-    for (auto& item : leaves) {\n-        item = rng.rand256();\n+    leaves.resize(block_vtx_size);\n+    for (auto& h : leaves) h = rng.rand256();\n+\n+    constexpr size_t iterations{1000};\n+    std::vector<std::vector<uint256>> cases(iterations);",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "064f33bbe2b646a43f37807785c59e1031029131",
      "in_reply_to_id": 2158441331,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I wanted to explicitly only measure the `ComputeMerkleRoot` call here without collecting hashes into a vector.\r\nBut if you think that part should de included, I don't mind, but in that case we won't measure the behavior change in `ComputeMerkleRoot` anymore.\r\nHowever, I think the proper allocation makes sense regardless -  e.g. for 2001 entries now we'll allocate 2002 entries instead of 4002 like before.",
      "created_at": "2025-06-20T10:42:10Z",
      "updated_at": "2025-06-20T11:24:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158650714",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158650714"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158723337",
      "pull_request_review_id": 2945559978,
      "id": 2158723337,
      "node_id": "PRRC_kwDOABII586Aq4EJ",
      "diff_hunk": "@@ -11,16 +11,27 @@\n \n static void MerkleRoot(benchmark::Bench& bench)\n {\n-    FastRandomContext rng(true);\n+    FastRandomContext rng{/*fDeterministic=*/true};\n+\n+    constexpr size_t block_vtx_size{9001}; // Must be odd to test the special case of the last hash being duplicated.\n     std::vector<uint256> leaves;\n-    leaves.resize(9001);\n-    for (auto& item : leaves) {\n-        item = rng.rand256();\n+    leaves.resize(block_vtx_size);\n+    for (auto& h : leaves) h = rng.rand256();",
      "path": "src/bench/merkle_root.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "064f33bbe2b646a43f37807785c59e1031029131",
      "in_reply_to_id": 2158435570,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm fine with both, reverted.",
      "created_at": "2025-06-20T11:19:33Z",
      "updated_at": "2025-06-20T11:24:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158723337",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158723337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": 17,
      "start_side": "LEFT",
      "line": null,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158723447",
      "pull_request_review_id": 2945559978,
      "id": 2158723447,
      "node_id": "PRRC_kwDOABII586Aq4F3",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\n+    for (const auto& tx : block.vtx) {\n+        leaves.emplace_back(tx->GetHash());",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 9,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "in_reply_to_id": 2158453448,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "After I have used `leaves.emplace_back(); // The witness hash of the coinbase is 0` in `BlockWitnessMerkleRoot` it seemed more consistent to me to use `emplace_back` in `BlockMerkleRoot` as well - as you said it should do the same.\r\nI'm fine with both, I've changed them inside the loop to `push_back`.",
      "created_at": "2025-06-20T11:19:36Z",
      "updated_at": "2025-06-20T11:24:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158723447",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158723447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 71,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158723518",
      "pull_request_review_id": 2945559978,
      "id": 2158723518,
      "node_id": "PRRC_kwDOABII586Aq4G-",
      "diff_hunk": "@@ -66,20 +66,20 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetHash();\n+    leaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\n+    for (const auto& tx : block.vtx) {\n+        leaves.emplace_back(tx->GetHash());\n     }\n     return ComputeMerkleRoot(std::move(leaves), mutated);\n }\n \n uint256 BlockWitnessMerkleRoot(const CBlock& block, bool* mutated)\n {\n     std::vector<uint256> leaves;\n-    leaves.resize(block.vtx.size());\n-    leaves[0].SetNull(); // The witness hash of the coinbase is 0.\n-    for (size_t s = 1; s < block.vtx.size(); s++) {\n-        leaves[s] = block.vtx[s]->GetWitnessHash();\n+    leaves.reserve(block.vtx.size() + (block.vtx.size() & 1)); // capacity rounded up to even\n+    leaves.emplace_back(); // The witness hash of the coinbase is 0.\n+    for (size_t i{1}; i < block.vtx.size(); ++i) {",
      "path": "src/consensus/merkle.cpp",
      "position": null,
      "original_position": 23,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "4cc5942895673591de4edceb6dd0c7188c302a72",
      "in_reply_to_id": 2158456828,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "There was no other loops with the same variable after the change anymore, so it doesn't need to be a non-standard loop variable name (wasn't sure what `s` meant in this context) - but  since it's important to you I've reverted them.",
      "created_at": "2025-06-20T11:19:39Z",
      "updated_at": "2025-06-20T11:24:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2158723518",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158723518"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 81,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2264185044",
      "pull_request_review_id": 3102373739,
      "id": 2264185044,
      "node_id": "PRRC_kwDOABII586G9LjU",
      "diff_hunk": "@@ -80,7 +81,8 @@ FUZZ_TARGET(integer, .init = initialize_integer)\n     }\n     constexpr uint256 u256_min{\"0000000000000000000000000000000000000000000000000000000000000000\"};\n     constexpr uint256 u256_max{\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"};\n-    const std::vector<uint256> v256{u256, u256_min, u256_max};\n+    std::vector<uint256> v256{u256, u256_min, u256_max};\n+    v256.reserve(RoundUpToEven(v256.size()));",
      "path": "src/test/fuzz/integer.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "in_reply_to_id": null,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This reserve seems to be for `ComputeMerkleRoot`. However, I think it would be better to have `ComputeMerkleRoot` do any reservations necessary rather than relying on the caller to do so.",
      "created_at": "2025-08-09T01:34:54Z",
      "updated_at": "2025-08-09T01:34:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2264185044",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2264185044"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 85,
      "original_line": 85,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2264209340",
      "pull_request_review_id": 3102399396,
      "id": 2264209340,
      "node_id": "PRRC_kwDOABII586G9Re8",
      "diff_hunk": "@@ -80,7 +81,8 @@ FUZZ_TARGET(integer, .init = initialize_integer)\n     }\n     constexpr uint256 u256_min{\"0000000000000000000000000000000000000000000000000000000000000000\"};\n     constexpr uint256 u256_max{\"ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff\"};\n-    const std::vector<uint256> v256{u256, u256_min, u256_max};\n+    std::vector<uint256> v256{u256, u256_min, u256_max};\n+    v256.reserve(RoundUpToEven(v256.size()));",
      "path": "src/test/fuzz/integer.cpp",
      "position": 22,
      "original_position": 22,
      "commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "original_commit_id": "a7997d02ebe5b72e706712f43884644b705a1cd1",
      "in_reply_to_id": 2264185044,
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`ComputeMerkleRoot` already received a list of values, usually sized to fit their current size exactly (i.e. `capacity()` == `size()`). We can of course increase the capacity inside - it's what:\r\n```C++\r\nif (hashes.size() & 1) {\r\n    hashes.push_back(hashes.back());\r\n}\r\n```\r\ndoes already, but if we want to avoid reallocations, we have to predict the size of the vector before we start populating it.\r\n\r\n-----\r\n\r\nWe could add some kind of lambda as a parameter and an expected size maybe, something like:\r\n```C++\r\ntemplate <typename Gen>\r\nuint256 GenerateMerkleRoot(std::size_t count, Gen&& gen, bool* mutated = nullptr)\r\n{\r\n    std::vector<uint256> leaves;\r\n    leaves.reserve(RoundUpToEven(count));\r\n    for (std::size_t i{0}; i < count; ++i) {\r\n        leaves.push_back(gen(i));\r\n    }\r\n    return ComputeMerkleRoot(std::move(leaves), mutated);\r\n}\r\n```\r\nand the production code callers would look like:\r\n```C++\r\nstatic uint256 ComputeModifiedMerkleRoot(const CMutableTransaction& cb, const CBlock& block)\r\n{\r\n    return GenerateMerkleRoot(block.vtx.size(), [&](auto i) { return i == 0 ? cb.GetHash() : block.vtx[i]->GetHash(); });\r\n}\r\n\r\nuint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\r\n{\r\n    return GenerateMerkleRoot(block.vtx.size(), [&](auto i) { return block.vtx[i]->GetHash(); }, mutated);\r\n}\r\nuint256 BlockWitnessMerkleRoot(const CBlock& block, bool* mutated)\r\n{\r\n    return GenerateMerkleRoot(block.vtx.size(), [&](auto i) { return i == 0 ? uint256{} : uint256(block.vtx[i]->GetWitnessHash()); }, mutated);\r\n}\r\n```\r\n\r\nWould that be simpler in your opinion?\r\n\r\n<details>\r\n<summary>Patch</summary>\r\n\r\n```patch\r\ndiff --git a/src/consensus/merkle.cpp b/src/consensus/merkle.cpp\r\nindex 8c56d979a5..a0e358b005 100644\r\n--- a/src/consensus/merkle.cpp\r\n+++ b/src/consensus/merkle.cpp\r\n@@ -5,7 +5,6 @@\r\n #include <consensus/merkle.h>\r\n #include <hash.h>\r\n #include <util/check.h>\r\n-#include <util/ints.h>\r\n \r\n /*     WARNING! If you're reading this because you're learning about crypto\r\n        and/or designing a new system that will use merkle trees, keep in mind\r\n@@ -63,26 +62,14 @@ uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated) {\r\n     return hashes[0];\r\n }\r\n \r\n-\r\n uint256 BlockMerkleRoot(const CBlock& block, bool* mutated)\r\n {\r\n-    std::vector<uint256> leaves;\r\n-    leaves.reserve(RoundUpToEven(block.vtx.size()));\r\n-    for (size_t s = 0; s < block.vtx.size(); s++) {\r\n-        leaves.push_back(block.vtx[s]->GetHash());\r\n-    }\r\n-    return ComputeMerkleRoot(std::move(leaves), mutated);\r\n+    return GenerateMerkleRoot(block.vtx.size(), [&](auto i) { return block.vtx[i]->GetHash(); }, mutated);\r\n }\r\n \r\n uint256 BlockWitnessMerkleRoot(const CBlock& block, bool* mutated)\r\n {\r\n-    std::vector<uint256> leaves;\r\n-    leaves.reserve(RoundUpToEven(block.vtx.size()));\r\n-    leaves.emplace_back(); // The witness hash of the coinbase is 0.\r\n-    for (size_t s = 1; s < block.vtx.size(); s++) {\r\n-        leaves.push_back(block.vtx[s]->GetWitnessHash());\r\n-    }\r\n-    return ComputeMerkleRoot(std::move(leaves), mutated);\r\n+    return GenerateMerkleRoot(block.vtx.size(), [&](auto i) { return i == 0 ? uint256{} : uint256(block.vtx[i]->GetWitnessHash()); }, mutated);\r\n }\r\n \r\n /* This implements a constant-space merkle root/path calculator, limited to 2^32 leaves. */\r\ndiff --git a/src/consensus/merkle.h b/src/consensus/merkle.h\r\nindex c722cbe446..8b5c14157a 100644\r\n--- a/src/consensus/merkle.h\r\n+++ b/src/consensus/merkle.h\r\n@@ -9,9 +9,21 @@\r\n \r\n #include <primitives/block.h>\r\n #include <uint256.h>\r\n+#include <util/ints.h>\r\n \r\n uint256 ComputeMerkleRoot(std::vector<uint256> hashes, bool* mutated = nullptr);\r\n \r\n+template <typename Gen>\r\n+uint256 GenerateMerkleRoot(std::size_t count, Gen&& gen, bool* mutated = nullptr)\r\n+{\r\n+    std::vector<uint256> leaves;\r\n+    leaves.reserve(RoundUpToEven(count));\r\n+    for (std::size_t i{0}; i < count; ++i) {\r\n+        leaves.push_back(gen(i));\r\n+    }\r\n+    return ComputeMerkleRoot(std::move(leaves), mutated);\r\n+}\r\n+\r\n /*\r\n  * Compute the Merkle root of the transactions in a block.\r\n  * *mutated is set to true if a duplicated subtree was found.\r\ndiff --git a/src/signet.cpp b/src/signet.cpp\r\nindex 3104b7f2d7..5aea084f15 100644\r\n--- a/src/signet.cpp\r\n+++ b/src/signet.cpp\r\n@@ -58,13 +58,8 @@ static bool FetchAndClearCommitmentSection(const std::span<const uint8_t> header\r\n \r\n static uint256 ComputeModifiedMerkleRoot(const CMutableTransaction& cb, const CBlock& block)\r\n {\r\n-    std::vector<uint256> leaves;\r\n-    leaves.reserve(RoundUpToEven(block.vtx.size()));\r\n-    leaves.push_back(cb.GetHash());\r\n-    for (size_t s = 1; s < block.vtx.size(); ++s) {\r\n-        leaves.push_back(block.vtx[s]->GetHash());\r\n-    }\r\n-    return ComputeMerkleRoot(std::move(leaves));\r\n+    return GenerateMerkleRoot(block.vtx.size(),\r\n+        [&](auto i) { return i ? block.vtx[i]->GetHash() : cb.GetHash(); });\r\n }\r\n \r\n std::optional<SignetTxs> SignetTxs::Create(const CBlock& block, const CScript& challenge)\r\n```\r\n\r\n</details>",
      "created_at": "2025-08-09T02:32:50Z",
      "updated_at": "2025-08-09T02:34:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32497#discussion_r2264209340",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2264209340"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32497"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 85,
      "original_line": 85,
      "side": "RIGHT"
    }
  ]
}