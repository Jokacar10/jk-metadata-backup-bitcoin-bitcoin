{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750",
    "id": 2593403550,
    "node_id": "PR_kwDOABII586alDKe",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32750",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32750.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32750.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/d3b8a54a81209420ef6447dd4581e1b6b8550647",
    "number": 32750,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "refactor: CFeeRate encapsulates FeeFrac internally",
    "user": {
      "login": "polespinasa",
      "id": 57642229,
      "node_id": "MDQ6VXNlcjU3NjQyMjI5",
      "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/polespinasa",
      "html_url": "https://github.com/polespinasa",
      "followers_url": "https://api.github.com/users/polespinasa/followers",
      "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
      "organizations_url": "https://api.github.com/users/polespinasa/orgs",
      "repos_url": "https://api.github.com/users/polespinasa/repos",
      "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/polespinasa/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The `FeeFrac` type represents a fraction, intended to be used for `sats/vbyte` or `sats/WU`. It was added to improve accuracy when evaluating fee rates in cluster mempool. [1]\r\nBut it can also be used to fix the precision issues that the current `CFeeRate` class has now.\r\n\r\nAt the moment, `CFeeRate` handles the fee rate as  satoshis per kilovirtualbyte: `CAmount / kvB` using an integer.\r\nThis PR fix `CFeeRate` precision issues by encapsulating `FeeFrac` internally keeping backwards compatibility.\r\n\r\nThis PR can also be used as a based to use multiple units on RPC calls as detailed in this issue [2].\r\n\r\nSome previous discussions:\r\n[1] https://github.com/bitcoin/bitcoin/pull/30535\r\n[2] https://github.com/bitcoin/bitcoin/issues/32093",
    "labels": [
      {
        "id": 135961,
        "node_id": "MDU6TGFiZWwxMzU5NjE=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Refactoring",
        "name": "Refactoring",
        "color": "E6F6D6",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-06-15T10:17:55Z",
    "updated_at": "2025-07-07T09:39:36Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "ffab6f0a0538035554a6bc28f94de9bf68df6da3",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "polespinasa:FeeFracWrapper",
      "ref": "FeeFracWrapper",
      "sha": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 879841478,
        "node_id": "R_kgDONHFQxg",
        "name": "bitcoin",
        "full_name": "polespinasa/bitcoin",
        "owner": {
          "login": "polespinasa",
          "id": 57642229,
          "node_id": "MDQ6VXNlcjU3NjQyMjI5",
          "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/polespinasa",
          "html_url": "https://github.com/polespinasa",
          "followers_url": "https://api.github.com/users/polespinasa/followers",
          "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
          "organizations_url": "https://api.github.com/users/polespinasa/orgs",
          "repos_url": "https://api.github.com/users/polespinasa/repos",
          "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/polespinasa/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/polespinasa/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/polespinasa/bitcoin",
        "archive_url": "https://api.github.com/repos/polespinasa/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/polespinasa/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/polespinasa/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/polespinasa/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/polespinasa/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/polespinasa/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/polespinasa/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/polespinasa/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/polespinasa/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/polespinasa/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/polespinasa/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/polespinasa/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/polespinasa/bitcoin/events",
        "forks_url": "https://api.github.com/repos/polespinasa/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/polespinasa/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/polespinasa/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/polespinasa/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/polespinasa/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/polespinasa/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/polespinasa/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/polespinasa/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/polespinasa/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/polespinasa/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/polespinasa/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/polespinasa/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/polespinasa/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/polespinasa/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/polespinasa/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/polespinasa/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:polespinasa/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/polespinasa/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/polespinasa/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/polespinasa/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/polespinasa/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/polespinasa/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/polespinasa/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/polespinasa/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/polespinasa/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/polespinasa/bitcoin/hooks",
        "svn_url": "https://github.com/polespinasa/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 4,
        "watchers_count": 4,
        "size": 245955,
        "default_branch": "master",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-07T08:39:55Z",
        "created_at": "2024-10-28T16:32:04Z",
        "updated_at": "2025-06-26T08:02:57Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "e3f416dbf7633b2fb19c933e5508bd231cc7e9cf",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37494,
        "stargazers_count": 84449,
        "watchers_count": 84449,
        "size": 288727,
        "default_branch": "master",
        "open_issues_count": 743,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-03T23:45:43Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-07T09:51:13Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 66,
    "deletions": 65,
    "changed_files": 11,
    "commits": 1,
    "review_comments": 58,
    "comments": 13
  },
  "events": [
    {
      "event": "commented",
      "id": 2973638558,
      "node_id": "IC_kwDOABII586xPh-e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2973638558",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T10:17:57Z",
      "updated_at": "2025-07-07T08:40:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32750.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [ismaelsadeeq](https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2929549483), [Eunovo](https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2946065410), [theStack](https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-2998558126) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\nPossible typos and grammar issues:\n\n- param@[in] -> @param[in] [correct Doxygen tag syntax]\n- param@[in] -> @param[in] [correct Doxygen tag syntax]\n\n<sup>drahtbot_id_4_m</sup>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-2973638558",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "renamed",
      "id": 18155011708,
      "node_id": "RTE_lADOABII5867mFyTzwAAAAQ6H358",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18155011708",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T10:20:47Z",
      "rename": {
        "from": "Refactor CFeeRate to use FeeFrac internally",
        "to": "refactor: CFeeRate encapsulates FeeFrac internally"
      }
    },
    {
      "event": "labeled",
      "id": 18155011885,
      "node_id": "LE_lADOABII5867mFyTzwAAAAQ6H38t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18155011885",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T10:20:51Z",
      "label": {
        "name": "Refactoring",
        "color": "E6F6D6"
      }
    },
    {
      "event": "labeled",
      "id": 18155273559,
      "node_id": "LE_lADOABII5867mFyTzwAAAAQ6I31X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18155273559",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T11:20:55Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2973674874,
      "node_id": "IC_kwDOABII586xPq16",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2973674874",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-15T11:20:56Z",
      "updated_at": "2025-06-15T11:20:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `fuzzer,address,undefined,integer, no depends`: https://github.com/bitcoin/bitcoin/runs/44121425336</sub>\n<sub>LLM reason (✨ experimental): The CI failure is caused by an implicit integer conversion that triggered an UndefinedBehaviorSanitizer error during fuzzing.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-2973674874",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "reviewed",
      "id": 2929549483,
      "node_id": "PRR_kwDOABII586unWCr",
      "url": null,
      "actor": null,
      "commit_id": "a67ac6c66a6dbc6048217730e9746b25a390e11e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK I've taken a look into this previously in https://github.com/bitcoin/bitcoin/pull/30535#pullrequestreview-2227244550\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2929549483",
      "submitted_at": "2025-06-15T13:47:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "reviewed",
      "id": 2929593259,
      "node_id": "PRR_kwDOABII586ungur",
      "url": null,
      "actor": null,
      "commit_id": "a67ac6c66a6dbc6048217730e9746b25a390e11e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "I think you can fix the fuzz crash with\r\n```diff\r\ndiff --git a/src/test/fuzz/fee_rate.cpp b/src/test/fuzz/fee_rate.cpp\r\nindex 92616b62bea..f69cb59ab7b 100644\r\n--- a/src/test/fuzz/fee_rate.cpp\r\n+++ b/src/test/fuzz/fee_rate.cpp\r\n@@ -20,7 +20,7 @@ FUZZ_TARGET(fee_rate)\r\n     const CFeeRate fee_rate{satoshis_per_k};\r\n \r\n     (void)fee_rate.GetFeePerK();\r\n-    const auto bytes = fuzzed_data_provider.ConsumeIntegral<uint32_t>();\r\n+    const auto bytes = fuzzed_data_provider.ConsumeIntegral<int32_t>();\r\n     if (!MultiplicationOverflow(int64_t{bytes}, satoshis_per_k)) {\r\n         (void)fee_rate.GetFee(bytes);\r\n     }\r\n```\r\n\r\nAlso the `// Compare approximately with CFeeRate` test in `src/test/fuzz/fee_frac.cpp` is now not required. ",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2929593259",
      "submitted_at": "2025-06-15T14:03:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18171580959,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAAQ7HFIf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18171580959",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fdc3d20047a42803fccefc2688609dc06f916706",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/fdc3d20047a42803fccefc2688609dc06f916706",
      "created_at": "2025-06-16T14:12:09Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18177123267,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAAQ7cOPD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18177123267",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "created_at": "2025-06-16T19:42:42Z"
    },
    {
      "event": "reviewed",
      "id": 2933362362,
      "node_id": "PRR_kwDOABII586u1466",
      "url": null,
      "actor": null,
      "commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2933362362",
      "submitted_at": "2025-06-16T20:19:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "unlabeled",
      "id": 18178016627,
      "node_id": "UNLE_lADOABII5867mFyTzwAAAAQ7foVz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18178016627",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-16T20:42:04Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2934175550,
      "node_id": "PRR_kwDOABII586u4_c-",
      "url": null,
      "actor": null,
      "commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2934175550",
      "submitted_at": "2025-06-17T05:26:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18184870990,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAAQ75xxO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18184870990",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "created_at": "2025-06-17T07:48:34Z"
    },
    {
      "event": "mentioned",
      "id": 18184878691,
      "node_id": "MEE_lADOABII5867mFyTzwAAAAQ75zpj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18184878691",
      "actor": {
        "login": "param",
        "id": 88536923,
        "node_id": "MDQ6VXNlcjg4NTM2OTIz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88536923?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/param",
        "html_url": "https://github.com/param",
        "followers_url": "https://api.github.com/users/param/followers",
        "following_url": "https://api.github.com/users/param/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/param/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/param/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/param/subscriptions",
        "organizations_url": "https://api.github.com/users/param/orgs",
        "repos_url": "https://api.github.com/users/param/repos",
        "events_url": "https://api.github.com/users/param/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/param/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-17T07:49:00Z"
    },
    {
      "event": "subscribed",
      "id": 18184878722,
      "node_id": "SE_lADOABII5867mFyTzwAAAAQ75zqC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18184878722",
      "actor": {
        "login": "param",
        "id": 88536923,
        "node_id": "MDQ6VXNlcjg4NTM2OTIz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88536923?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/param",
        "html_url": "https://github.com/param",
        "followers_url": "https://api.github.com/users/param/followers",
        "following_url": "https://api.github.com/users/param/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/param/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/param/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/param/subscriptions",
        "organizations_url": "https://api.github.com/users/param/orgs",
        "repos_url": "https://api.github.com/users/param/repos",
        "events_url": "https://api.github.com/users/param/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/param/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-17T07:49:00Z"
    },
    {
      "event": "labeled",
      "id": 18233059121,
      "node_id": "LE_lADOABII5867mFyTzwAAAAQ-xmcx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18233059121",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-19T15:44:23Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2946065410,
      "node_id": "PRR_kwDOABII586vmWQC",
      "url": null,
      "actor": null,
      "commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nLeft some comments",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2946065410",
      "submitted_at": "2025-06-20T13:47:57Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18273454568,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARBLsno",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18273454568",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/13efb13bbe0e904babd6f7646dda1885e80b8226",
      "created_at": "2025-06-23T13:05:22Z"
    },
    {
      "event": "unlabeled",
      "id": 18274072333,
      "node_id": "UNLE_lADOABII5867mFyTzwAAAARBODcN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18274072333",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T13:36:38Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2996630488,
      "node_id": "IC_kwDOABII586ynPPY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2996630488",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-23T14:03:18Z",
      "updated_at": "2025-06-23T14:03:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "13efb13bbe0e904babd6f7646dda1885e80b8226 Rebased on top of Master (c5849663baa925a5291731e4e4013a08c811c646)",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-2996630488",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "commented",
      "id": 2998558126,
      "node_id": "IC_kwDOABII586yul2u",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2998558126",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-24T02:26:20Z",
      "updated_at": "2025-06-24T02:26:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-2998558126",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "reviewed",
      "id": 2955846126,
      "node_id": "PRR_kwDOABII586wLqHu",
      "url": null,
      "actor": null,
      "commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2955846126",
      "submitted_at": "2025-06-25T01:38:31Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18309250353,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARDUP0x",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18309250353",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "created_at": "2025-06-25T06:12:51Z"
    },
    {
      "event": "commented",
      "id": 3003478781,
      "node_id": "IC_kwDOABII586zBXL9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3003478781",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-25T06:14:46Z",
      "updated_at": "2025-06-25T06:14:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "db63d5bf81895d78d39fe8cf94ded6f63d81d614 removes an unused include and some nit on arg names.\r\n990010f49ca97479f9fe46e288ed0f0fbb0fde94 modifies the code to use uint instead of ints see https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165236159 for context",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3003478781",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "reviewed",
      "id": 2961834485,
      "node_id": "PRR_kwDOABII586wigH1",
      "url": null,
      "actor": null,
      "commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2961834485",
      "submitted_at": "2025-06-26T11:59:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "reviewed",
      "id": 2962409852,
      "node_id": "PRR_kwDOABII586wksl8",
      "url": null,
      "actor": null,
      "commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2962409852",
      "submitted_at": "2025-06-26T14:45:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18338541429,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARFD-91",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18338541429",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cc894b5a7ed15d0e52c22229cc859bfeefc2d5f8",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/cc894b5a7ed15d0e52c22229cc859bfeefc2d5f8",
      "created_at": "2025-06-26T15:15:34Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18338906759,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARFFYKH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18338906759",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bf63317ae7395b0509f86e2c188b1c6cacf995de",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/bf63317ae7395b0509f86e2c188b1c6cacf995de",
      "created_at": "2025-06-26T15:37:28Z"
    },
    {
      "event": "commented",
      "id": 3009102393,
      "node_id": "IC_kwDOABII586zW0I5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3009102393",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:14Z",
      "updated_at": "2025-06-26T16:43:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "I think I'll drop bf63317ae7395b0509f86e2c188b1c6cacf995de and revert to only db63d5bf81 (unless someone sees a blocking reason and the need to use uint32 instead of int32).\r\n\r\nChanging to uint32 needs many changes in FeeFrac (which I would like to avoid touching). In FeeFrac size is defined as an int32_t so using uint32 doesn't give us any \"advantage\".\r\n\r\nFriendly ping @davidgumberg @Eunovo @sipa to know your opinion :)\r\n",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3009102393",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "mentioned",
      "id": 18339878931,
      "node_id": "MEE_lADOABII5867mFyTzwAAAARFJFgT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18339878931",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:16Z"
    },
    {
      "event": "subscribed",
      "id": 18339878946,
      "node_id": "SE_lADOABII5867mFyTzwAAAARFJFgi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18339878946",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:16Z"
    },
    {
      "event": "mentioned",
      "id": 18339878963,
      "node_id": "MEE_lADOABII5867mFyTzwAAAARFJFgz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18339878963",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:16Z"
    },
    {
      "event": "subscribed",
      "id": 18339878979,
      "node_id": "SE_lADOABII5867mFyTzwAAAARFJFhD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18339878979",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:16Z"
    },
    {
      "event": "mentioned",
      "id": 18339878999,
      "node_id": "MEE_lADOABII5867mFyTzwAAAARFJFhX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18339878999",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:16Z"
    },
    {
      "event": "subscribed",
      "id": 18339879014,
      "node_id": "SE_lADOABII5867mFyTzwAAAARFJFhm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18339879014",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T16:43:16Z"
    },
    {
      "event": "labeled",
      "id": 18342155736,
      "node_id": "LE_lADOABII5867mFyTzwAAAARFRxXY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18342155736",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T19:04:09Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3009623668,
      "node_id": "IC_kwDOABII586zYzZ0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3009623668",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T19:04:11Z",
      "updated_at": "2025-06-26T19:04:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `fuzzer,address,undefined,integer, no depends`: https://github.com/bitcoin/bitcoin/runs/44861911741</sub>\n<sub>LLM reason (✨ experimental): The failure is caused by an assertion failure in the evaluateFee function due to at_size exceeding INT32_MAX during fuzz testing.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3009623668",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "commented",
      "id": 3010205780,
      "node_id": "IC_kwDOABII586zbBhU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3010205780",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-26T21:33:45Z",
      "updated_at": "2025-06-26T21:34:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Changing to uint32 needs many changes in FeeFrac (which I would like to avoid touching). In FeeFrac size is defined as an int32_t so using uint32 doesn't give us any \"advantage\".\r\n\r\nYes, but leaving size as signed in `FeeFrac` means that this PR has to make changes to `CFeeRate` to make its sizes signed. `FeeFrac` and `CFeeRate` should both be signed or unsigned, I don't have any context on if/why someone might want signed sizes, but all the `FeeFrac` functions works with signed sizes, and it seems like it could be useful in some situations so changing `CFeeRate` to use signed sizes (as the PR was originally structured) seems fair enough.\r\n\r\nIf you do that, I think it would be good to add some checks for negative sizes passed to `CFeeRate::CFeeRate()` and `CFeeRate::GetFee()` in `src/test/amount_tests.cpp`.",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3010205780",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "commented",
      "id": 3011530424,
      "node_id": "IC_kwDOABII586zgE64",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3011530424",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T03:54:54Z",
      "updated_at": "2025-06-27T03:54:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Changing to uint32 needs many changes in FeeFrac (which I would like to avoid touching). In FeeFrac size is defined as an int32_t so using uint32 doesn't give us any \"advantage\".\r\n\r\nIt's difficult for me to give an opinion here because I'm not sure why `FeeFrac` was designed with signed sizes in the first place.\r\nI see that `FeeFrac::EvaluateFee` does have an `Assume(at_size >= 0)` check, I think you should rely on this check when you revert instead of returning `-1` (as was done in https://github.com/bitcoin/bitcoin/commit/ccb53ed05921a77fada46e22cf2e7410ef7f338c#diff-cc74b9dc8da4346ef6f877eab0aafa44feeea22d672a6516fe2d4f2fd65a74ccR24) before calling `FeeFrac::EvaluateFeeUp`. Returning early bypasses the assertion.",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3011530424",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "commented",
      "id": 3013244578,
      "node_id": "IC_kwDOABII586zmnai",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3013244578",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-27T14:19:29Z",
      "updated_at": "2025-06-27T14:35:51Z",
      "author_association": "MEMBER",
      "body": "The reason why `FeeFrac` supports negative fees and negative sizes is because that allows it to be used on \"set differences\" (*), which was at some point expected to be used inside the cluster linearization algorithm. It isn't in the current version in master, however, but it ended up being very useful in PR #32545 (see [this line](https://github.com/bitcoin/bitcoin/pull/32545/commits/68ce630abd669b86d9e2ff270aa2ba1e7332f95a#diff-1433c1fc4926a466291656ba67cf6b029523e4bd5da177ade812f25edf07343cR987) which relies on it).\r\n\r\n(*) Imagine you have a set of transactions, whose total fee/size (sum of fees divided by sum of sizes) is a FeeFrac `c`, and you have two potential subsets of transactions (both subsets of `c`) that can be moved to the front of the linearization, `t1` and `t2` (both `FeeFrac` objects, containing their sum of fees and sum of sizes). To determine whether `t1` is better than `t2`, it turns out that `(t1 - t2) >> c` is the correct expression (i.e., `(t1.fee - t2.fee) * c.size > c.fee * (t1.size - t2.size)`), which works even when `t2` has a larger size than `t1` (and thus the difference `t1 - t2` between them would have negative size).\r\n\r\nThis doesn't apply to the `at_size` argument for `EvaluateFeeUp` and `EvaluateFeeDown` however, which I can't imagine ever needing to be negative.",
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3013244578",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18367905704,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARGz_-o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18367905704",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "db63d5bf81895d78d39fe8cf94ded6f63d81d614",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/db63d5bf81895d78d39fe8cf94ded6f63d81d614",
      "created_at": "2025-06-28T08:44:49Z"
    },
    {
      "event": "commented",
      "id": 3015120652,
      "node_id": "IC_kwDOABII586ztxcM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3015120652",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-28T08:47:53Z",
      "updated_at": "2025-06-28T08:47:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "db63d5bf81 reverts to previous status (do not review). Will apply the commented changes in the next push.",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3015120652",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "unlabeled",
      "id": 18368066611,
      "node_id": "UNLE_lADOABII5867mFyTzwAAAARG0nQz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18368066611",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-28T09:43:08Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18368244862,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARG1Sx-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18368244862",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9a98ac49cd9396adfb4c904226fbb82157226322",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/9a98ac49cd9396adfb4c904226fbb82157226322",
      "created_at": "2025-06-28T10:48:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18368263680,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARG1XYA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18368263680",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2b8b4e06732b9d7e0784e3b2b4dea5aa7e96424e",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/2b8b4e06732b9d7e0784e3b2b4dea5aa7e96424e",
      "created_at": "2025-06-28T10:55:29Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18368375559,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAARG1ysH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18368375559",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "created_at": "2025-06-28T11:39:48Z"
    },
    {
      "event": "reviewed",
      "id": 2968519019,
      "node_id": "PRR_kwDOABII586w8AFr",
      "url": null,
      "actor": null,
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374 adds tests for negative size in full constructor.\r\n0aaeba9fe79df5ed51b3802056f93c0e7857a9fe uses `Assume(num_bytes >= 0)` instead of returning -1 if size is negative.",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2968519019",
      "submitted_at": "2025-06-28T12:02:17Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "reviewed",
      "id": 2976133077,
      "node_id": "PRR_kwDOABII586xZC_V",
      "url": null,
      "actor": null,
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "The current iteration is looking better, I will do another round of review and testing tomorrow.\r\n\r\nJust a few nits after a short glance",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2976133077",
      "submitted_at": "2025-07-01T20:19:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "reviewed",
      "id": 2977996985,
      "node_id": "PRR_kwDOABII586xgKC5",
      "url": null,
      "actor": null,
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2977996985",
      "submitted_at": "2025-07-02T07:16:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "reviewed",
      "id": 2978665608,
      "node_id": "PRR_kwDOABII586xitSI",
      "url": null,
      "actor": null,
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review 0aaeba9fe79df5ed51b3802056f93c0e7857a9fe\r\n\r\nI think you should document the current behavior in `CFeeRate` docstring\r\n\r\n1.  Passing any virtual bytes less than or equal to 0 to the constructor will result in 0 fee rate per 0 size.\r\n2. Passing negative virtual bytes to `GetFee` will return -1 as the fee.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#pullrequestreview-2978665608",
      "submitted_at": "2025-07-02T11:33:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18499318757,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAAROpTPl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18499318757",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "609e6b3d31179726e14c7e6f7040d749e21900aa",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/609e6b3d31179726e14c7e6f7040d749e21900aa",
      "created_at": "2025-07-07T08:04:08Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18499480823,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAAROp6z3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18499480823",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "fe2cc17bc2b5762607563604017c4ad46e3b0f99",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/fe2cc17bc2b5762607563604017c4ad46e3b0f99",
      "created_at": "2025-07-07T08:12:50Z"
    },
    {
      "event": "labeled",
      "id": 18499484783,
      "node_id": "LE_lADOABII5867mFyTzwAAAAROp7xv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18499484783",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-07T08:13:04Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 3043922017,
      "node_id": "IC_kwDOABII5861bpBh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3043922017",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-07T08:13:05Z",
      "updated_at": "2025-07-07T08:13:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Task `lint`: https://github.com/bitcoin/bitcoin/runs/45455462527</sub>\n<sub>LLM reason (✨ experimental): The CI failure is due to a trailing whitespace error detected by lint check.</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3043922017",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQzYjhhNTRhODEyMDk0MjBlZjY0NDdkZDQ1ODFlMWI2Yjg1NTA2NDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "tree": {
        "sha": "3a01570ddb91520655ac9adfa082a848530ebcb1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3a01570ddb91520655ac9adfa082a848530ebcb1"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3a01570ddb91520655ac9adfa082a848530ebcb1\nparent c5849663baa925a5291731e4e4013a08c811c646\nauthor Pol Espinasa <pol.espinasa@uab.cat> 1747497522 +0200\ncommitter Pol Espinasa <pol.espinasa@uab.cat> 1751877585 +0200\n\nRefactor CFeeRate to use FeeFrac internally\n\nCo-authored-by: Abubakar Sadiq Ismail <48946461+ismaelsadeeq@users.noreply.github.com>\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niIsEABYKADMWIQRd8IHT46QaaYw3spsoRwkHtAvybQUCaGuH1BUccG9sLmVzcGlu\nYXNhQHVhYi5jYXQACgkQKEcJB7QL8m0sEAEA6tL0YI8nCBCe20tXKJkJ6ycshyVH\nQBJrafV6jPvoUIoBAMpK1sTlbH3ZcdGTQXjJ4L7W85ocSlCPal7n6N8gp0oB\n=sH92\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5849663baa925a5291731e4e4013a08c811c646",
          "sha": "c5849663baa925a5291731e4e4013a08c811c646",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c5849663baa925a5291731e4e4013a08c811c646"
        }
      ],
      "message": "Refactor CFeeRate to use FeeFrac internally\n\nCo-authored-by: Abubakar Sadiq Ismail <48946461+ismaelsadeeq@users.noreply.github.com>",
      "committer": {
        "name": "Pol Espinasa",
        "email": "pol.espinasa@uab.cat",
        "date": "2025-07-07T08:39:45Z"
      },
      "author": {
        "name": "Pol Espinasa",
        "email": "pol.espinasa@uab.cat",
        "date": "2025-05-17T15:58:42Z"
      },
      "sha": "d3b8a54a81209420ef6447dd4581e1b6b8550647"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 18499950787,
      "node_id": "HRFPE_lADOABII5867mFyTzwAAAAROrtjD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18499950787",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "commit_url": "https://api.github.com/repos/polespinasa/bitcoin/commits/d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "created_at": "2025-07-07T08:39:57Z"
    },
    {
      "event": "mentioned",
      "id": 18499959244,
      "node_id": "MEE_lADOABII5867mFyTzwAAAAROrvnM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18499959244",
      "actor": {
        "login": "param",
        "id": 88536923,
        "node_id": "MDQ6VXNlcjg4NTM2OTIz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88536923?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/param",
        "html_url": "https://github.com/param",
        "followers_url": "https://api.github.com/users/param/followers",
        "following_url": "https://api.github.com/users/param/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/param/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/param/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/param/subscriptions",
        "organizations_url": "https://api.github.com/users/param/orgs",
        "repos_url": "https://api.github.com/users/param/repos",
        "events_url": "https://api.github.com/users/param/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/param/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-07T08:40:26Z"
    },
    {
      "event": "subscribed",
      "id": 18499959280,
      "node_id": "SE_lADOABII5867mFyTzwAAAAROrvnw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18499959280",
      "actor": {
        "login": "param",
        "id": 88536923,
        "node_id": "MDQ6VXNlcjg4NTM2OTIz",
        "avatar_url": "https://avatars.githubusercontent.com/u/88536923?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/param",
        "html_url": "https://github.com/param",
        "followers_url": "https://api.github.com/users/param/followers",
        "following_url": "https://api.github.com/users/param/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/param/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/param/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/param/subscriptions",
        "organizations_url": "https://api.github.com/users/param/orgs",
        "repos_url": "https://api.github.com/users/param/repos",
        "events_url": "https://api.github.com/users/param/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/param/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-07T08:40:26Z"
    },
    {
      "event": "commented",
      "id": 3044199252,
      "node_id": "IC_kwDOABII5861cstU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3044199252",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-07T09:39:36Z",
      "updated_at": "2025-07-07T09:39:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "d3b8a54a81209420ef6447dd4581e1b6b8550647\r\nAddressed some of the comments. Mostly nits.",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3044199252",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32750"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150779615",
      "pull_request_review_id": 2933362362,
      "id": 2150779615,
      "node_id": "PRRC_kwDOABII586AMkrf",
      "diff_hunk": "@@ -27,52 +28,61 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize nSatoshisPerV;",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 22,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Coding style nit: use `m_satoshis_per_vb` or `m_feerate` or so? (see doc/developer-notes.md, don't try to mimic existing style when rewriting code).",
      "created_at": "2025-06-16T20:05:55Z",
      "updated_at": "2025-06-16T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2150779615",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150779615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 38,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150781501",
      "pull_request_review_id": 2933362362,
      "id": 2150781501,
      "node_id": "PRRC_kwDOABII586AMlI9",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`nSatoshisPerV.size <= 0` is not possible, it can only be 0, but that is caught by the line above.",
      "created_at": "2025-06-16T20:07:00Z",
      "updated_at": "2025-06-16T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2150781501",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150781501"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150784409",
      "pull_request_review_id": 2933362362,
      "id": 2150784409,
      "node_id": "PRRC_kwDOABII586AMl2Z",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(nSatoshisPerV.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0) {\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) > 0) return CAmount(1);",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This line is equivalent to `if (nSatoshisPerV.fee > 0) return CAmount(1);`, and that cannot happen, because if it was the case, then `nFee` would have been strictly positive already.\r\n",
      "created_at": "2025-06-16T20:09:06Z",
      "updated_at": "2025-06-16T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2150784409",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150784409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150786456",
      "pull_request_review_id": 2933362362,
      "id": 2150786456,
      "node_id": "PRRC_kwDOABII586AMmWY",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(nSatoshisPerV.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0) {\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) > 0) return CAmount(1);\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) < 0) return CAmount(-1);",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This line is equivalent to `if (nSatoshisPerV.fee < 0) return CAmount(-1);`",
      "created_at": "2025-06-16T20:10:18Z",
      "updated_at": "2025-06-16T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2150786456",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150786456"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150800073",
      "pull_request_review_id": 2933362362,
      "id": 2150800073,
      "node_id": "PRRC_kwDOABII586AMprJ",
      "diff_hunk": "@@ -27,52 +28,61 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize nSatoshisPerV;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _nSatoshisPerK) : nSatoshisPerV(FeePerVSize(_nSatoshisPerK, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(nSatoshisPerV.EvaluateFeeDown(1000)); }\n+    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerV << b.nSatoshisPerV; }",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 63,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Since C++20, all of these comparison functions can be replaced with just:\r\n\r\n```c++\r\nfriend std::weak_ordering operator<=>(const CFeeRate& a, const CFeeRate& b) noexcept\r\n{\r\n    return FeeRateCompare(a.nSatoshisPerV, b.nSatoshisPerV);\r\n}\r\nfriend bool operator==(const CFeeRate& a, const CFeeRate& b) noexcept\r\n{\r\n    return FeeRateCompare(a.nSatoshisPerV, b.nSatoshisPerV) == std::weak_ordering::equivalent;\r\n}\r\n```\r\n\r\nThe 4 others will be automatically synthesized from these.\r\n",
      "created_at": "2025-06-16T20:18:36Z",
      "updated_at": "2025-06-16T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2150800073",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2150800073"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151347612",
      "pull_request_review_id": 2934175550,
      "id": 2151347612,
      "node_id": "PRRC_kwDOABII586AOvWc",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(nSatoshisPerV.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0) {\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) > 0) return CAmount(1);\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) < 0) return CAmount(-1);\n     }\n-\n     return nFee;\n }\n \n std::string CFeeRate::ToString(const FeeEstimateMode& fee_estimate_mode) const\n {\n+    const CAmount rate_per_kvb = nSatoshisPerV.fee * 1000 / nSatoshisPerV.size;",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`rate_per_kvb = GetFeePerK();` ?",
      "created_at": "2025-06-17T05:24:18Z",
      "updated_at": "2025-06-17T05:26:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151347612",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151347612"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151572427",
      "pull_request_review_id": 2934526144,
      "id": 2151572427,
      "node_id": "PRRC_kwDOABII586APmPL",
      "diff_hunk": "@@ -27,52 +28,61 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize nSatoshisPerV;",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 22,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": 2150779615,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done 👍",
      "created_at": "2025-06-17T07:49:32Z",
      "updated_at": "2025-06-17T07:49:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151572427",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151572427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 38,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151573061",
      "pull_request_review_id": 2934527151,
      "id": 2151573061,
      "node_id": "PRRC_kwDOABII586APmZF",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": 2150781501,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done 👍",
      "created_at": "2025-06-17T07:49:52Z",
      "updated_at": "2025-06-17T07:49:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151573061",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151573061"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151574614",
      "pull_request_review_id": 2934529446,
      "id": 2151574614,
      "node_id": "PRRC_kwDOABII586APmxW",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(nSatoshisPerV.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0) {\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) > 0) return CAmount(1);",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 35,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": 2150784409,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You're right, good catch, thx! Done 👍",
      "created_at": "2025-06-17T07:50:39Z",
      "updated_at": "2025-06-17T07:50:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151574614",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151574614"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 27,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151574806",
      "pull_request_review_id": 2934529752,
      "id": 2151574806,
      "node_id": "PRRC_kwDOABII586APm0W",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(nSatoshisPerV.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0) {\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) > 0) return CAmount(1);\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) < 0) return CAmount(-1);",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 36,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": 2150786456,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done 👍",
      "created_at": "2025-06-17T07:50:45Z",
      "updated_at": "2025-06-17T07:50:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151574806",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151574806"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 28,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151576376",
      "pull_request_review_id": 2934531981,
      "id": 2151576376,
      "node_id": "PRRC_kwDOABII586APnM4",
      "diff_hunk": "@@ -27,52 +28,61 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize nSatoshisPerV;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _nSatoshisPerK) : nSatoshisPerV(FeePerVSize(_nSatoshisPerK, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(nSatoshisPerV.EvaluateFeeDown(1000)); }\n+    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerV << b.nSatoshisPerV; }",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 63,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": 2150800073,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Didn't know about that, thanks!! Done 👍",
      "created_at": "2025-06-17T07:51:31Z",
      "updated_at": "2025-06-17T07:51:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151576376",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151576376"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 65,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151578015",
      "pull_request_review_id": 2934534249,
      "id": 2151578015,
      "node_id": "PRRC_kwDOABII586APnmf",
      "diff_hunk": "@@ -9,37 +9,33 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        nSatoshisPerV = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        nSatoshisPerV = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n+    if (nSatoshisPerV.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0 || nSatoshisPerV.size <= 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(nSatoshisPerV.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0) {\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) > 0) return CAmount(1);\n+        if (nSatoshisPerV.EvaluateFeeUp(nSatoshisPerV.size) < 0) return CAmount(-1);\n     }\n-\n     return nFee;\n }\n \n std::string CFeeRate::ToString(const FeeEstimateMode& fee_estimate_mode) const\n {\n+    const CAmount rate_per_kvb = nSatoshisPerV.fee * 1000 / nSatoshisPerV.size;",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "417bd07ed5795f9b4f275b23b1dc430e27cff95b",
      "in_reply_to_id": 2151347612,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nice catch! Done 👍",
      "created_at": "2025-06-17T07:52:10Z",
      "updated_at": "2025-06-17T07:52:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2151578015",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2151578015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 35,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158944950",
      "pull_request_review_id": 2946065410,
      "id": 2158944950,
      "node_id": "PRRC_kwDOABII586AruK2",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }",
      "path": "src/policy/feerate.h",
      "position": 72,
      "original_position": 62,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/ccb53ed05921a77fada46e22cf2e7410ef7f338c: `GetFee()` rounds up but `GetFeePerK()` rounds down, which means that the feerate returned will be less than the feerate actually used for calculations.\r\n\r\nWhy not round up for  `GetFeePerK()`?",
      "created_at": "2025-06-20T13:12:29Z",
      "updated_at": "2025-06-20T13:47:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2158944950",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2158944950"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159006094",
      "pull_request_review_id": 2946065410,
      "id": 2159006094,
      "node_id": "PRRC_kwDOABII586Ar9GO",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }\n+    friend std::weak_ordering operator<=>(const CFeeRate& a, const CFeeRate& b) noexcept\n+    {\n+        return FeeRateCompare(a.m_feerate, b.m_feerate);\n+    }\n+    friend bool operator==(const CFeeRate& a, const CFeeRate& b) noexcept\n+    {\n+        return FeeRateCompare(a.m_feerate, b.m_feerate) == std::weak_ordering::equivalent;\n+    }\n+    CFeeRate& operator+=(const CFeeRate& a) {\n+        m_feerate = FeePerVSize(GetFeePerK() + a.GetFeePerK(), 1000);",
      "path": "src/policy/feerate.h",
      "position": 82,
      "original_position": 72,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/ccb53ed05921a77fada46e22cf2e7410ef7f338c: Why not use fractional addition?",
      "created_at": "2025-06-20T13:29:23Z",
      "updated_at": "2025-06-20T13:47:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159006094",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159006094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 76,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159034444",
      "pull_request_review_id": 2946065410,
      "id": 2159034444,
      "node_id": "PRRC_kwDOABII586AsEBM",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}",
      "path": "src/policy/feerate.cpp",
      "position": 43,
      "original_position": 33,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/ccb53ed05921a77fada46e22cf2e7410ef7f338c: IIUC  previously, zero Sats was only returned when `num_bytes == 0`. Looks like you need to do `m_feerate.IsEmpty() && num_bytes == 0`.",
      "created_at": "2025-06-20T13:42:39Z",
      "updated_at": "2025-06-20T13:47:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159034444",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159034444"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159041469",
      "pull_request_review_id": 2946065410,
      "id": 2159041469,
      "node_id": "PRRC_kwDOABII586AsFu9",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0) { return CAmount(-1);}",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 34,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/ccb53ed05921a77fada46e22cf2e7410ef7f338c: `num_bytes` refers to the size of the transaction. It should not be negative. We should be doing `assert(num_bytes >= 0)` instead.",
      "created_at": "2025-06-20T13:45:49Z",
      "updated_at": "2025-06-26T11:52:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159041469",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159041469"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159125750",
      "pull_request_review_id": 2946393710,
      "id": 2159125750,
      "node_id": "PRRC_kwDOABII586AsaT2",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }",
      "path": "src/policy/feerate.h",
      "position": 72,
      "original_position": 62,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2158944950,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I dont think thats correct, It actually round down implicitly when initializing `nSatoshisPerK` see the the constructor.\r\n\r\nIt round up in `GetFee`",
      "created_at": "2025-06-20T14:32:28Z",
      "updated_at": "2025-06-20T14:32:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159125750",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159125750"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159496933",
      "pull_request_review_id": 2947015920,
      "id": 2159496933,
      "node_id": "PRRC_kwDOABII586At07l",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }",
      "path": "src/policy/feerate.h",
      "position": 72,
      "original_position": 62,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2158944950,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@ismaelsadeeq https://github.com/bitcoin/bitcoin/blob/master/src/policy/feerate.cpp#L12-L21 Have I missed something?",
      "created_at": "2025-06-20T18:32:21Z",
      "updated_at": "2025-06-20T18:32:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159496933",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159496933"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159522375",
      "pull_request_review_id": 2947055802,
      "id": 2159522375,
      "node_id": "PRRC_kwDOABII586At7JH",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }",
      "path": "src/policy/feerate.h",
      "position": 72,
      "original_position": 62,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2158944950,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Exactly what you quoted, see my previous review here https://github.com/polespinasa/bitcoin/pull/2#discussion_r2143529762\r\n\r\nIf you round up you will see change in behavior and test failures.",
      "created_at": "2025-06-20T18:54:28Z",
      "updated_at": "2025-06-20T18:54:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159522375",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159522375"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159558099",
      "pull_request_review_id": 2947112523,
      "id": 2159558099,
      "node_id": "PRRC_kwDOABII586AuD3T",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }",
      "path": "src/policy/feerate.h",
      "position": 72,
      "original_position": 62,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2158944950,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I see. Thanks @ismaelsadeeq ",
      "created_at": "2025-06-20T19:27:50Z",
      "updated_at": "2025-06-20T19:27:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2159558099",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2159558099"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 66,
      "original_line": 66,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161371083",
      "pull_request_review_id": 2949701084,
      "id": 2161371083,
      "node_id": "PRRC_kwDOABII586A0-fL",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}\n \n     /**\n      * Construct a fee rate from a fee in satoshis and a vsize in vB.\n      *\n      * param@[in]   nFeePaid    The fee paid by a transaction, in satoshis\n      * param@[in]   num_bytes   The vsize of a transaction, in vbytes\n      */\n-    CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes);\n+    CFeeRate(const CAmount& nFeePaid, int32_t num_bytes);\n \n     /**\n      * Return the fee in satoshis for the given vsize in vbytes.\n      * If the calculated fee would have fractional satoshis, then the\n      * returned fee will always be rounded up to the nearest satoshi.\n      */\n-    CAmount GetFee(uint32_t num_bytes) const;\n+    CAmount GetFee(int32_t num_bytes) const;\n \n     /**\n      * Return the fee in satoshis for a vsize of 1000 vbytes\n      */\n-    CAmount GetFeePerK() const { return nSatoshisPerK; }\n-    friend bool operator<(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK < b.nSatoshisPerK; }\n-    friend bool operator>(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK > b.nSatoshisPerK; }\n-    friend bool operator==(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK == b.nSatoshisPerK; }\n-    friend bool operator<=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK <= b.nSatoshisPerK; }\n-    friend bool operator>=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK >= b.nSatoshisPerK; }\n-    friend bool operator!=(const CFeeRate& a, const CFeeRate& b) { return a.nSatoshisPerK != b.nSatoshisPerK; }\n-    CFeeRate& operator+=(const CFeeRate& a) { nSatoshisPerK += a.nSatoshisPerK; return *this; }\n+    CAmount GetFeePerK() const { return CAmount(m_feerate.EvaluateFeeDown(1000)); }\n+    friend std::weak_ordering operator<=>(const CFeeRate& a, const CFeeRate& b) noexcept\n+    {\n+        return FeeRateCompare(a.m_feerate, b.m_feerate);\n+    }\n+    friend bool operator==(const CFeeRate& a, const CFeeRate& b) noexcept\n+    {\n+        return FeeRateCompare(a.m_feerate, b.m_feerate) == std::weak_ordering::equivalent;\n+    }\n+    CFeeRate& operator+=(const CFeeRate& a) {\n+        m_feerate = FeePerVSize(GetFeePerK() + a.GetFeePerK(), 1000);",
      "path": "src/policy/feerate.h",
      "position": 82,
      "original_position": 72,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2159006094,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "More or less that's what this is doing but relying on feefrac code (more clean).\r\nThe two fractions are converted to denominator 1000. And then the numerators are added, the result of that sum is returned with denominator 1000.\r\n\r\nDoesn't matter what units are we using because the units are specified when calling `GetFee` or `GetFeePerK`.",
      "created_at": "2025-06-23T11:23:41Z",
      "updated_at": "2025-06-23T11:23:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2161371083",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161371083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 76,
      "original_line": 76,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161410165",
      "pull_request_review_id": 2949754618,
      "id": 2161410165,
      "node_id": "PRRC_kwDOABII586A1IB1",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}",
      "path": "src/policy/feerate.cpp",
      "position": 43,
      "original_position": 33,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2159034444,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```diff\r\n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\r\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\r\n {\r\n-    const int64_t nSize{num_bytes};\r\n-\r\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\r\n-    // We've previously had issues with the silent double->int64_t conversion.\r\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\r\n-\r\n-    if (nFee == 0 && nSize != 0) {\r\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\r\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\r\n-    }\r\n-\r\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}\r\n+    if (num_bytes < 0) { return CAmount(-1);}\r\n+    CAmount nFee = CAmount(m_feerate.EvaluateFeeUp(num_bytes));\r\n+    if (nFee == 0 && num_bytes != 0 && m_feerate.fee < 0) return CAmount(-1);\r\n     return nFee;\r\n }\r\n\r\n```\r\n\r\nNot necessarily. For example, if `num_bytes=10` and `nSatoshisPerK=0` n_Fee will be 0. And the function will return 0. Because `nSatoshisPerK=0` will not catch any of the if statements. That's the case `m_feerate.IsEmpty()` is evaluating.\r\n\r\nIf `num_bytes=0` then nFee will also be 0. See: (at_size is num_bytes)\r\nhttps://github.com/bitcoin/bitcoin/blob/c5849663baa925a5291731e4e4013a08c811c646/src/util/feefrac.h#L202-L217\r\n\r\nThe next if is the same as it was before but the option to return 1 was deleted as that cannot happend, see: https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2150784409\r\n",
      "created_at": "2025-06-23T11:39:32Z",
      "updated_at": "2025-06-23T11:39:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2161410165",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161410165"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161740652",
      "pull_request_review_id": 2950297533,
      "id": 2161740652,
      "node_id": "PRRC_kwDOABII586A2Yts",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}",
      "path": "src/policy/feerate.cpp",
      "position": 43,
      "original_position": 33,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2159034444,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@polespinasa You're right, zero is always returned when `nSatoshisPerK` is zero. You can mark this as resolved",
      "created_at": "2025-06-23T14:13:03Z",
      "updated_at": "2025-06-23T14:13:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2161740652",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2161740652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165221968",
      "pull_request_review_id": 2955846126,
      "id": 2165221968,
      "node_id": "PRRC_kwDOABII586BDqpQ",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 2,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "can drop this since the `std::ceil` call is dropped.\r\n",
      "created_at": "2025-06-25T00:55:27Z",
      "updated_at": "2025-06-25T01:38:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165221968",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165221968"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 10,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165233501",
      "pull_request_review_id": 2955846126,
      "id": 2165233501,
      "node_id": "PRRC_kwDOABII586BDtdd",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 32,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: the argument name should probably be `m_feerate_kvb`",
      "created_at": "2025-06-25T01:10:15Z",
      "updated_at": "2025-06-25T01:38:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165233501",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165233501"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165236159",
      "pull_request_review_id": 2955846126,
      "id": 2165236159,
      "node_id": "PRRC_kwDOABII586BDuG_",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)",
      "path": "src/policy/feerate.cpp",
      "position": 13,
      "original_position": 4,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The reason that the fuzz tests fail before changing this to `uint32_t` (e.g. this commit: https://github.com/davidgumberg/bitcoin/commit/01a4557b10b31e620716cff04c554e6f1a95653a)  is because `CFeeRate::GetFee` takes an unsigned int, but then passes it  to `EvaluateFeeUp()` which implicitly converts `at_size` to a signed value, and large examples of `uint32_t` values become negative integers, this results in `EvaluateFee()` getting passed a negative number and asserting.\r\n\r\nWouldn't it be better to change the `FeeFrac::EvaluateFee*()` functions to take unsigned integers, e.g.:  \r\n\r\n```diff\r\ndiff --git a/src/util/feefrac.h b/src/util/feefrac.h\r\nindex 7577107e8c..9d034c6791 100644\r\n--- a/src/util/feefrac.h\r\n+++ b/src/util/feefrac.h\r\n@@ -199,10 +199,9 @@ struct FeeFrac\r\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\r\n      */\r\n     template<bool RoundDown>\r\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\r\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\r\n     {\r\n         Assume(size > 0);\r\n-        Assume(at_size >= 0);\r\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {\r\n             // Common case where (this->fee * at_size) is guaranteed to fit in a uint64_t.\r\n             if constexpr (RoundDown) {\r\n@@ -218,9 +217,9 @@ struct FeeFrac\r\n\r\n public:\r\n     /** Compute the fee for a given size `at_size` using this object's feerate, rounding down. */\r\n-    int64_t EvaluateFeeDown(int32_t at_size) const noexcept { return EvaluateFee<true>(at_size); }\r\n+    int64_t EvaluateFeeDown(uint32_t at_size) const noexcept { return EvaluateFee<true>(at_size); }\r\n     /** Compute the fee for a given size `at_size` using this object's feerate, rounding up. */\r\n-    int64_t EvaluateFeeUp(int32_t at_size) const noexcept { return EvaluateFee<false>(at_size); }\r\n+    int64_t EvaluateFeeUp(uint32_t at_size) const noexcept { return EvaluateFee<false>(at_size); }\r\n };\r\n\r\n /** Compare the feerate diagrams implied by the provided sorted chunks data.\r\n ```\r\n \r\nTested as follows:\r\n\r\n```bash\r\ncmake --preset libfuzzer && cmake --build build_fuzz -j $(nproc)\r\nFUZZ=fee_rate_fuzz_target \r\n```",
      "created_at": "2025-06-25T01:12:37Z",
      "updated_at": "2025-06-25T01:38:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165236159",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165236159"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 12,
      "original_line": 12,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165819775",
      "pull_request_review_id": 2956680454,
      "id": 2165819775,
      "node_id": "PRRC_kwDOABII586BF8l_",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 2,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": 2165221968,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-06-25T05:32:44Z",
      "updated_at": "2025-06-25T05:32:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165819775",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165819775"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 10,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165819887",
      "pull_request_review_id": 2956680636,
      "id": 2165819887,
      "node_id": "PRRC_kwDOABII586BF8nv",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */\n+    CFeeRate() = default;\n     template<std::integral I> // Disallow silent float -> int conversion\n-    explicit CFeeRate(const I _nSatoshisPerK): nSatoshisPerK(_nSatoshisPerK) {\n-    }\n+    explicit CFeeRate(const I _m_feerate) : m_feerate(FeePerVSize(_m_feerate, 1000)) {}",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 32,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": 2165233501,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-06-25T05:32:51Z",
      "updated_at": "2025-06-25T05:32:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165819887",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165819887"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 44,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165877940",
      "pull_request_review_id": 2956779793,
      "id": 2165877940,
      "node_id": "PRRC_kwDOABII586BGKy0",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)",
      "path": "src/policy/feerate.cpp",
      "position": 13,
      "original_position": 4,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": 2165236159,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "That would make sense. Implemented on a separated commit bf63317ae7395b0509f86e2c188b1c6cacf995de.\r\n\r\n@sipa, I would like to know your opinion on this. Is there any reason you used int32 for `EvaluateFee` in the first place? The two `Assume` at the beginning of the function cut the function to only positive numbers.",
      "created_at": "2025-06-25T06:19:09Z",
      "updated_at": "2025-06-26T15:40:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2165877940",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2165877940"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 12,
      "original_line": 12,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2168890446",
      "pull_request_review_id": 2961824554,
      "id": 2168890446,
      "node_id": "PRRC_kwDOABII586BRqRO",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0) { return CAmount(-1);}",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 34,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "ccb53ed05921a77fada46e22cf2e7410ef7f338c",
      "in_reply_to_id": 2159041469,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@polespinasa now that the code has been updated to use `uint32`, I think you can mark this as resolved",
      "created_at": "2025-06-26T11:55:53Z",
      "updated_at": "2025-06-26T11:55:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2168890446",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2168890446"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2168896663",
      "pull_request_review_id": 2961834485,
      "id": 2168896663,
      "node_id": "PRRC_kwDOABII586BRryX",
      "diff_hunk": "@@ -17,12 +17,13 @@ CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n     }\n }\n \n-CAmount CFeeRate::GetFee(int32_t num_bytes) const\n+CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n {\n+    const int64_t nSize{num_bytes};\n     if (m_feerate.IsEmpty()) { return CAmount(0);}\n-    if (num_bytes < 0) { return CAmount(-1);}\n-    CAmount nFee = CAmount(m_feerate.EvaluateFeeUp(num_bytes));\n-    if (nFee == 0 && num_bytes != 0 && m_feerate.fee < 0) return CAmount(-1);\n+    if (nSize < 0) { return CAmount(-1);}",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/990010f49ca97479f9fe46e288ed0f0fbb0fde94: Is it still possible for `nSize` to be less than zero? Converting from `uint32` to `int64` should be safe",
      "created_at": "2025-06-26T11:59:18Z",
      "updated_at": "2025-06-26T12:11:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2168896663",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2168896663"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169246397",
      "pull_request_review_id": 2962401981,
      "id": 2169246397,
      "node_id": "PRRC_kwDOABII586BTBK9",
      "diff_hunk": "@@ -9,37 +9,29 @@\n \n #include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)",
      "path": "src/policy/feerate.cpp",
      "position": 13,
      "original_position": 4,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "13efb13bbe0e904babd6f7646dda1885e80b8226",
      "in_reply_to_id": 2165236159,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@davidgumberg I'm having doubts about this. FeeFrac takes an int32 for `size` attribute. I'm not sure it is a good idea to mix types between functions.\r\n\r\nAlso `Mul(fee, at_size)` is taking a int32.",
      "created_at": "2025-06-26T14:43:38Z",
      "updated_at": "2025-06-26T14:50:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169246397",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169246397"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 12,
      "original_line": 12,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169251427",
      "pull_request_review_id": 2962409852,
      "id": 2169251427,
      "node_id": "PRRC_kwDOABII586BTCZj",
      "diff_hunk": "@@ -199,10 +199,10 @@ struct FeeFrac\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\n      */\n     template<bool RoundDown>\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\n     {\n         Assume(size > 0);\n-        Assume(at_size >= 0);\n+        //Assume(at_size >= 0);\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 10,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": null,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If you change `at_size` to be uint32, I don't think this check is still correct.",
      "created_at": "2025-06-26T14:45:50Z",
      "updated_at": "2025-06-26T14:45:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169251427",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169251427"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169312647",
      "pull_request_review_id": 2962507550,
      "id": 2169312647,
      "node_id": "PRRC_kwDOABII586BTRWH",
      "diff_hunk": "@@ -17,12 +17,13 @@ CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n     }\n }\n \n-CAmount CFeeRate::GetFee(int32_t num_bytes) const\n+CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n {\n+    const int64_t nSize{num_bytes};\n     if (m_feerate.IsEmpty()) { return CAmount(0);}\n-    if (num_bytes < 0) { return CAmount(-1);}\n-    CAmount nFee = CAmount(m_feerate.EvaluateFeeUp(num_bytes));\n-    if (nFee == 0 && num_bytes != 0 && m_feerate.fee < 0) return CAmount(-1);\n+    if (nSize < 0) { return CAmount(-1);}",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": 2168896663,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Actually I think nSize is not needed at all and the check can be deleted. If `EvaluateFeeUp` is taking an uint32 there's no need to convert `num_bytes` to other types!!",
      "created_at": "2025-06-26T15:14:10Z",
      "updated_at": "2025-06-26T15:14:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169312647",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169312647"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 24,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169317441",
      "pull_request_review_id": 2962515167,
      "id": 2169317441,
      "node_id": "PRRC_kwDOABII586BTShB",
      "diff_hunk": "@@ -199,10 +199,10 @@ struct FeeFrac\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\n      */\n     template<bool RoundDown>\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\n     {\n         Assume(size > 0);\n-        Assume(at_size >= 0);\n+        //Assume(at_size >= 0);\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 10,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": 2169251427,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You mean the commented Assume can be deleted?",
      "created_at": "2025-06-26T15:16:27Z",
      "updated_at": "2025-06-26T15:16:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169317441",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169317441"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169326321",
      "pull_request_review_id": 2962529170,
      "id": 2169326321,
      "node_id": "PRRC_kwDOABII586BTUrx",
      "diff_hunk": "@@ -199,10 +199,10 @@ struct FeeFrac\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\n      */\n     template<bool RoundDown>\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\n     {\n         Assume(size > 0);\n-        Assume(at_size >= 0);\n+        //Assume(at_size >= 0);\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 10,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": 2169251427,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "No, the `if` condition is wrong now. The result can overflow.",
      "created_at": "2025-06-26T15:20:47Z",
      "updated_at": "2025-06-26T15:20:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169326321",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169326321"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169364191",
      "pull_request_review_id": 2962589227,
      "id": 2169364191,
      "node_id": "PRRC_kwDOABII586BTd7f",
      "diff_hunk": "@@ -199,10 +199,10 @@ struct FeeFrac\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\n      */\n     template<bool RoundDown>\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\n     {\n         Assume(size > 0);\n-        Assume(at_size >= 0);\n+        //Assume(at_size >= 0);\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 10,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": 2169251427,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Oh you're right! ~I think adding an `Assume(at_size <= INT32_MAX)` should be enough?~\r\nSelf-answer: Nope, it breaks fuzz test by trying to use numbers bigger than `INT32_MAX`.",
      "created_at": "2025-06-26T15:39:31Z",
      "updated_at": "2025-06-26T16:29:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169364191",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169364191"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169647676",
      "pull_request_review_id": 2963040571,
      "id": 2169647676,
      "node_id": "PRRC_kwDOABII586BUjI8",
      "diff_hunk": "@@ -199,10 +199,10 @@ struct FeeFrac\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\n      */\n     template<bool RoundDown>\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\n     {\n         Assume(size > 0);\n-        Assume(at_size >= 0);\n+        //Assume(at_size >= 0);\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 10,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": 2169251427,
      "user": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Well if you're going to assume `at_size <= INT32_MAX`, why bother changing the type?",
      "created_at": "2025-06-26T18:09:17Z",
      "updated_at": "2025-06-26T18:09:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169647676",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169647676"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169656553",
      "pull_request_review_id": 2963055448,
      "id": 2169656553,
      "node_id": "PRRC_kwDOABII586BUlTp",
      "diff_hunk": "@@ -199,10 +199,10 @@ struct FeeFrac\n      * is guaranteed to be the case when 0 <= at_size <= this->size.\n      */\n     template<bool RoundDown>\n-    int64_t EvaluateFee(int32_t at_size) const noexcept\n+    int64_t EvaluateFee(uint32_t at_size) const noexcept\n     {\n         Assume(size > 0);\n-        Assume(at_size >= 0);\n+        //Assume(at_size >= 0);\n         if (fee >= 0 && fee < 0x200000000) [[likely]] {",
      "path": "src/util/feefrac.h",
      "position": null,
      "original_position": 10,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "990010f49ca97479f9fe46e288ed0f0fbb0fde94",
      "in_reply_to_id": 2169251427,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yep, I think I will not :) https://github.com/bitcoin/bitcoin/pull/32750#issuecomment-3009102393:\r\n> In FeeFrac size is defined as an int32_t so using uint32 doesn't give us any \"advantage\".",
      "created_at": "2025-06-26T18:12:28Z",
      "updated_at": "2025-06-26T18:12:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2169656553",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2169656553"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 206,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2173219182",
      "pull_request_review_id": 2968519019,
      "id": 2173219182,
      "node_id": "PRRC_kwDOABII586BiLFu",
      "diff_hunk": "@@ -45,8 +45,8 @@ FUZZ_TARGET(wallet_fees, .init = initialize_setup)\n     }\n     (void)GetDiscardRate(wallet);\n \n-    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<unsigned int>()};\n-\n+    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<int32_t>()};\n+    if (tx_bytes < 0) return;",
      "path": "src/wallet/test/fuzz/fees.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "in_reply_to_id": null,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Not sure if there's a cleaner way to handle this. Without it negative values can be provided to `GetFee()` hitting the `Assume(num_bytes >= 0)` statement and failing the code.",
      "created_at": "2025-06-28T11:43:27Z",
      "updated_at": "2025-06-28T12:02:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2173219182",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2173219182"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2178028452",
      "pull_request_review_id": 2976133077,
      "id": 2178028452,
      "node_id": "PRRC_kwDOABII586B0hOk",
      "diff_hunk": "@@ -7,39 +7,30 @@\n #include <policy/feerate.h>\n #include <tinyformat.h>\n \n-#include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(m_feerate.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0 && m_feerate.fee < 0) return CAmount(-1);\n     return nFee;\n }\n \n std::string CFeeRate::ToString(const FeeEstimateMode& fee_estimate_mode) const\n {\n+    const CAmount rate_per_kvb = GetFeePerK();",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: be less ambiguous?\r\n```suggestion\r\n    const CAmount feerate_per_kvb = GetFeePerK();\r\n```\r\n",
      "created_at": "2025-07-01T16:18:37Z",
      "updated_at": "2025-07-01T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2178028452",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2178028452"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2178446483",
      "pull_request_review_id": 2976133077,
      "id": 2178446483,
      "node_id": "PRRC_kwDOABII586B2HST",
      "diff_hunk": "@@ -6,6 +6,7 @@\n #ifndef BITCOIN_POLICY_FEERATE_H\n #define BITCOIN_POLICY_FEERATE_H\n \n+#include <util/feefrac.h>",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 4,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit:\r\nincludes are alphabetical",
      "created_at": "2025-07-01T20:17:11Z",
      "updated_at": "2025-07-01T20:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2178446483",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2178446483"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 9,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179291875",
      "pull_request_review_id": 2977996985,
      "id": 2179291875,
      "node_id": "PRRC_kwDOABII586B5Vrj",
      "diff_hunk": "",
      "path": "src/test/amount_tests.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/c4af90f4a80832cbaa925d33dbf4ba0f0eab6374: Consider\r\n\r\n```diff\r\ndiff --git a/src/test/amount_tests.cpp b/src/test/amount_tests.cpp\r\nindex 40f3119cf1..65278aaa41 100644\r\n--- a/src/test/amount_tests.cpp\r\n+++ b/src/test/amount_tests.cpp\r\n@@ -78,13 +78,15 @@ BOOST_AUTO_TEST_CASE(GetFeeTest)\r\n     BOOST_CHECK(CFeeRate(CAmount(-1), 1000) == CFeeRate(-1));\r\n     BOOST_CHECK(CFeeRate(CAmount(0), 1000) == CFeeRate(0));\r\n     BOOST_CHECK(CFeeRate(CAmount(1), 1000) == CFeeRate(1));\r\n-    // lost precision (can only resolve satoshis per kB)\r\n-    // we no longer lose precision\r\n-    BOOST_CHECK(CFeeRate(CAmount(1), 1001) > CFeeRate(0));\r\n-    BOOST_CHECK(CFeeRate(CAmount(2), 1001) > CFeeRate(1));\r\n+    // Previously, precision was limited to three decimal digits\r\n+    // due to only supporting satoshis per kB,\r\n+    // so CFeeRate(CAmount(1), 1001) was equal to CFeeRate(0)\r\n+    // Since #32750, higher precision is maintained.\r\n+    BOOST_CHECK(CFeeRate(CAmount(1), 1001) > CFeeRate(0) && CFeeRate(CAmount(1), 1001) < CFeeRate(1));\r\n+    BOOST_CHECK(CFeeRate(CAmount(2), 1001) > CFeeRate(1) && CFeeRate(CAmount(2), 1001) < CFeeRate(2));\r\n     // some more integer checks\r\n-    BOOST_CHECK(CFeeRate(CAmount(26), 789) > CFeeRate(32));\r\n-    BOOST_CHECK(CFeeRate(CAmount(27), 789) > CFeeRate(34));\r\n+    BOOST_CHECK(CFeeRate(CAmount(26), 789) > CFeeRate(32) && CFeeRate(CAmount(26), 789) < CFeeRate(33));\r\n+    BOOST_CHECK(CFeeRate(CAmount(27), 789) > CFeeRate(34) && CFeeRate(CAmount(27), 789) < CFeeRate(35));\r\n     // Maximum size in bytes, should not crash\r\n     CFeeRate(MAX_MONEY, std::numeric_limits<int32_t>::max()).GetFeePerK();\r\n```",
      "created_at": "2025-07-02T07:08:04Z",
      "updated_at": "2025-07-02T07:16:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179291875",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179291875"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179302609",
      "pull_request_review_id": 2977996985,
      "id": 2179302609,
      "node_id": "PRRC_kwDOABII586B5YTR",
      "diff_hunk": "@@ -20,8 +20,8 @@ FUZZ_TARGET(fee_rate)\n     const CFeeRate fee_rate{satoshis_per_k};\n \n     (void)fee_rate.GetFeePerK();\n-    const auto bytes = fuzzed_data_provider.ConsumeIntegral<uint32_t>();\n-    if (!MultiplicationOverflow(int64_t{bytes}, satoshis_per_k)) {\n+    const auto bytes = fuzzed_data_provider.ConsumeIntegral<int32_t>();",
      "path": "src/test/fuzz/fee_rate.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "https://github.com/bitcoin/bitcoin/pull/32750/commits/c4af90f4a80832cbaa925d33dbf4ba0f0eab6374:\r\n```diff\r\ndiff --git a/src/test/fuzz/fee_rate.cpp b/src/test/fuzz/fee_rate.cpp\r\nindex 20578c325e..26146bc617 100644\r\n--- a/src/test/fuzz/fee_rate.cpp\r\n+++ b/src/test/fuzz/fee_rate.cpp\r\n@@ -20,8 +20,8 @@ FUZZ_TARGET(fee_rate)\r\n     const CFeeRate fee_rate{satoshis_per_k};\r\n \r\n     (void)fee_rate.GetFeePerK();\r\n-    const auto bytes = fuzzed_data_provider.ConsumeIntegral<int32_t>();\r\n-    if (bytes >= 0 && !MultiplicationOverflow(int64_t{bytes}, satoshis_per_k)) {\r\n+    const auto bytes = fuzzed_data_provider.ConsumeIntegralInRange<int32_t>(0, std::\r\nnumeric_limits<int32_t>::max());\r\n+    if (!MultiplicationOverflow(int64_t{bytes}, satoshis_per_k)) {\r\n         (void)fee_rate.GetFee(bytes);\r\n     }\r\n     (void)fee_rate.ToString();\r\n```",
      "created_at": "2025-07-02T07:13:41Z",
      "updated_at": "2025-07-02T07:16:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179302609",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179302609"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179306743",
      "pull_request_review_id": 2977996985,
      "id": 2179306743,
      "node_id": "PRRC_kwDOABII586B5ZT3",
      "diff_hunk": "@@ -45,8 +45,8 @@ FUZZ_TARGET(wallet_fees, .init = initialize_setup)\n     }\n     (void)GetDiscardRate(wallet);\n \n-    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<unsigned int>()};\n-\n+    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<int32_t>()};\n+    if (tx_bytes < 0) return;",
      "path": "src/wallet/test/fuzz/fees.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "in_reply_to_id": 2173219182,
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Try `ConsumeIntegralInRange(0, std::numeric_limits<int32_t>::max())`",
      "created_at": "2025-07-02T07:15:54Z",
      "updated_at": "2025-07-02T07:16:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179306743",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179306743"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179737580",
      "pull_request_review_id": 2978665608,
      "id": 2179737580,
      "node_id": "PRRC_kwDOABII586B7Cfs",
      "diff_hunk": "@@ -7,39 +7,30 @@\n #include <policy/feerate.h>",
      "path": "src/policy/feerate.cpp",
      "position": 8,
      "original_position": 1,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit licence update",
      "created_at": "2025-07-02T10:46:42Z",
      "updated_at": "2025-07-02T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179737580",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179737580"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179741353",
      "pull_request_review_id": 2978665608,
      "id": 2179741353,
      "node_id": "PRRC_kwDOABII586B7Dap",
      "diff_hunk": "@@ -7,39 +7,30 @@\n #include <policy/feerate.h>\n #include <tinyformat.h>\n \n-#include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: since we are changing the datatype, also change the name to virtual_bytes?",
      "created_at": "2025-07-02T10:48:50Z",
      "updated_at": "2025-07-02T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179741353",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179741353"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179744660",
      "pull_request_review_id": 2978665608,
      "id": 2179744660,
      "node_id": "PRRC_kwDOABII586B7EOU",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 14,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit:\r\n```suggestion\r\n * Fee rate in satoshis per virtualbyte: CAmount / vB\r\n * the feerate is represented internally as FeeFrac\r\n```",
      "created_at": "2025-07-02T10:50:45Z",
      "updated_at": "2025-07-02T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179744660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179744660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": 31,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179747303",
      "pull_request_review_id": 2978665608,
      "id": 2179747303,
      "node_id": "PRRC_kwDOABII586B7E3n",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 27,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: I think it should be clear that when using this constructor we also have 0 virtual bytes, I think it is possible to have 0 fee rate per n virtual bytes I think.\r\n```suggestion\r\n    /** Fee rate of 0 satoshis per 0 vB */\r\n```",
      "created_at": "2025-07-02T10:52:07Z",
      "updated_at": "2025-07-02T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179747303",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179747303"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179800839",
      "pull_request_review_id": 2978665608,
      "id": 2179800839,
      "node_id": "PRRC_kwDOABII586B7R8H",
      "diff_hunk": "@@ -223,7 +223,7 @@ FUZZ_TARGET(feefrac_mul_div)\n         if (mul64 < std::numeric_limits<int64_t>::max() / 1000 &&\n             mul64 > std::numeric_limits<int64_t>::min() / 1000 &&\n             quot_abs < arith_uint256{std::numeric_limits<int64_t>::max() / 1000}) {\n-            CFeeRate feerate(mul64, (uint32_t)div);\n+            CFeeRate feerate(mul64, (int32_t)div);",
      "path": "src/test/fuzz/feefrac.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "you can remove the type conversion, I think it is no-op because div is implicitly `int32_t`",
      "created_at": "2025-07-02T11:21:44Z",
      "updated_at": "2025-07-02T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179800839",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179800839"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 226,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179806415",
      "pull_request_review_id": 2978665608,
      "id": 2179806415,
      "node_id": "PRRC_kwDOABII586B7TTP",
      "diff_hunk": "@@ -19,8 +19,8 @@ CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n \n CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n+    Assume(num_bytes >= 0);",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "in_reply_to_id": null,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "why the assume, is it not better to just return the -1? and add a test for it?\r\n\r\nAlso it was added in first commit and removed here, the two commits should be squashed.",
      "created_at": "2025-07-02T11:24:33Z",
      "updated_at": "2025-07-02T11:33:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179806415",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179806415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179823586",
      "pull_request_review_id": 2978795661,
      "id": 2179823586,
      "node_id": "PRRC_kwDOABII586B7Xfi",
      "diff_hunk": "@@ -45,8 +45,8 @@ FUZZ_TARGET(wallet_fees, .init = initialize_setup)\n     }\n     (void)GetDiscardRate(wallet);\n \n-    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<unsigned int>()};\n-\n+    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<int32_t>()};\n+    if (tx_bytes < 0) return;",
      "path": "src/wallet/test/fuzz/fees.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "in_reply_to_id": 2173219182,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Also same at `fee_rate` fuzz test.",
      "created_at": "2025-07-02T11:33:20Z",
      "updated_at": "2025-07-02T11:33:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2179823586",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2179823586"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189149829",
      "pull_request_review_id": 2992439964,
      "id": 2189149829,
      "node_id": "PRRC_kwDOABII586Ce8aF",
      "diff_hunk": "@@ -7,39 +7,30 @@\n #include <policy/feerate.h>\n #include <tinyformat.h>\n \n-#include <cmath>\n \n-CFeeRate::CFeeRate(const CAmount& nFeePaid, uint32_t num_bytes)\n+CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n {\n-    const int64_t nSize{num_bytes};\n-\n-    if (nSize > 0) {\n-        nSatoshisPerK = nFeePaid * 1000 / nSize;\n+    if (num_bytes > 0) {\n+        m_feerate = FeePerVSize(nFeePaid, num_bytes);\n     } else {\n-        nSatoshisPerK = 0;\n+        m_feerate = FeePerVSize();\n     }\n }\n \n-CAmount CFeeRate::GetFee(uint32_t num_bytes) const\n+CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n-    const int64_t nSize{num_bytes};\n-\n-    // Be explicit that we're converting from a double to int64_t (CAmount) here.\n-    // We've previously had issues with the silent double->int64_t conversion.\n-    CAmount nFee{static_cast<CAmount>(std::ceil(nSatoshisPerK * nSize / 1000.0))};\n-\n-    if (nFee == 0 && nSize != 0) {\n-        if (nSatoshisPerK > 0) nFee = CAmount(1);\n-        if (nSatoshisPerK < 0) nFee = CAmount(-1);\n-    }\n-\n+    if (m_feerate.IsEmpty()) { return CAmount(0);}\n+    if (num_bytes < 0) { return CAmount(-1);}\n+    CAmount nFee = CAmount(m_feerate.EvaluateFeeUp(num_bytes));\n+    if (nFee == 0 && num_bytes != 0 && m_feerate.fee < 0) return CAmount(-1);\n     return nFee;\n }\n \n std::string CFeeRate::ToString(const FeeEstimateMode& fee_estimate_mode) const\n {\n+    const CAmount rate_per_kvb = GetFeePerK();",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": 2178028452,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-07-07T07:03:51Z",
      "updated_at": "2025-07-07T07:03:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2189149829",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189149829"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189152069",
      "pull_request_review_id": 2992443277,
      "id": 2189152069,
      "node_id": "PRRC_kwDOABII586Ce89F",
      "diff_hunk": "@@ -20,8 +20,8 @@ FUZZ_TARGET(fee_rate)\n     const CFeeRate fee_rate{satoshis_per_k};\n \n     (void)fee_rate.GetFeePerK();\n-    const auto bytes = fuzzed_data_provider.ConsumeIntegral<uint32_t>();\n-    if (!MultiplicationOverflow(int64_t{bytes}, satoshis_per_k)) {\n+    const auto bytes = fuzzed_data_provider.ConsumeIntegral<int32_t>();",
      "path": "src/test/fuzz/fee_rate.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": 2179302609,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Great! Thanks",
      "created_at": "2025-07-07T07:05:07Z",
      "updated_at": "2025-07-07T07:05:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2189152069",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189152069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 23,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189162753",
      "pull_request_review_id": 2992458696,
      "id": 2189162753,
      "node_id": "PRRC_kwDOABII586Ce_kB",
      "diff_hunk": "@@ -45,8 +45,8 @@ FUZZ_TARGET(wallet_fees, .init = initialize_setup)\n     }\n     (void)GetDiscardRate(wallet);\n \n-    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<unsigned int>()};\n-\n+    const auto tx_bytes{fuzzed_data_provider.ConsumeIntegral<int32_t>()};\n+    if (tx_bytes < 0) return;",
      "path": "src/wallet/test/fuzz/fees.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "in_reply_to_id": 2173219182,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Great! Thanks :)\r\nDone",
      "created_at": "2025-07-07T07:11:11Z",
      "updated_at": "2025-07-07T07:11:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2189162753",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189162753"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189174459",
      "pull_request_review_id": 2992476419,
      "id": 2189174459,
      "node_id": "PRRC_kwDOABII586CfCa7",
      "diff_hunk": "@@ -27,52 +28,57 @@ enum class FeeEstimateMode {\n };\n \n /**\n- * Fee rate in satoshis per kilovirtualbyte: CAmount / kvB\n+ * Fee rate in satoshis per virtualbyte: CAmount / vB\n+ * Wrapping FeeFrac to handle precision issues\n  */\n class CFeeRate\n {\n private:\n-    /** Fee rate in sat/kvB (satoshis per 1000 virtualbytes) */\n-    CAmount nSatoshisPerK;\n+    /** Fee rate in sats/vB (satoshis per N virtualbytes) */\n+    FeePerVSize m_feerate;\n \n public:\n-    /** Fee rate of 0 satoshis per kvB */\n-    CFeeRate() : nSatoshisPerK(0) { }\n+    /** Fee rate of 0 satoshis per vB */",
      "path": "src/policy/feerate.h",
      "position": null,
      "original_position": 27,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": 2179747303,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "True! Done",
      "created_at": "2025-07-07T07:17:20Z",
      "updated_at": "2025-07-07T07:17:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2189174459",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189174459"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 41,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189201868",
      "pull_request_review_id": 2992513809,
      "id": 2189201868,
      "node_id": "PRRC_kwDOABII586CfJHM",
      "diff_hunk": "@@ -19,8 +19,8 @@ CFeeRate::CFeeRate(const CAmount& nFeePaid, int32_t num_bytes)\n \n CAmount CFeeRate::GetFee(int32_t num_bytes) const\n {\n+    Assume(num_bytes >= 0);",
      "path": "src/policy/feerate.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "d3b8a54a81209420ef6447dd4581e1b6b8550647",
      "original_commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "in_reply_to_id": 2179806415,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't see in which case a 0 or less can be passed. It should never happen.\r\nIf it fails on the assume then there's something wrong in another part of the code and we should not treat that as an expected case.\r\n\r\nHappy to go back to return -1 if there's a specific case for that.",
      "created_at": "2025-07-07T07:26:17Z",
      "updated_at": "2025-07-07T07:26:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2189201868",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189201868"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 22,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189259717",
      "pull_request_review_id": 2992600046,
      "id": 2189259717,
      "node_id": "PRRC_kwDOABII586CfXPF",
      "diff_hunk": "",
      "path": "src/test/amount_tests.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "0aaeba9fe79df5ed51b3802056f93c0e7857a9fe",
      "original_commit_id": "c4af90f4a80832cbaa925d33dbf4ba0f0eab6374",
      "in_reply_to_id": 2179291875,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "lgtm, done!",
      "created_at": "2025-07-07T07:49:10Z",
      "updated_at": "2025-07-07T07:49:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32750#discussion_r2189259717",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2189259717"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32750"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    }
  ]
}