{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384",
    "id": 2204182907,
    "node_id": "PR_kwDOABII586DYSl7",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31384",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31384.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31384.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/2fb833e69627a8f9b1c4b14b60d1df9903adf210",
    "number": 31384,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "mining: bugfix: Fix duplicate coinbase tx weight reservation",
    "user": {
      "login": "ismaelsadeeq",
      "id": 48946461,
      "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ismaelsadeeq",
      "html_url": "https://github.com/ismaelsadeeq",
      "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
      "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
      "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
      "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
      "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "* This PR attempts to fix the duplicate coinbase weight reservation issue we currently have.\r\n* Fixes #21950\r\n\r\nWe reserve 4000 weight units for coinbase transaction in `DEFAULT_BLOCK_MAX_WEIGHT`\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7590e93bc73b3bbac641f05d490fd5c984156b33/src/policy/policy.h#L23\r\n\r\nAnd  also reserve additional `4000` weight units in the default `BlockCreationOptions` struct.\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/7590e93bc73b3bbac641f05d490fd5c984156b33/src/node/types.h#L36-L40\r\n\r\n\r\n**Motivation**\r\n\r\n- This issue was first noticed during a review here https://github.com/bitcoin/bitcoin/pull/11100#discussion_r136157411)\r\n- It was later reported in issue #21950.\r\n- I also came across the bug while writing a test for building the block template. I could not create a block template above `3,992,000` in the block assembler, and this was not documented anywhere. It took me a while to realize that we were reserving space for the coinbase transaction weight twice.\r\n\r\n---\r\nThis PR fixes this by consolidating the reservation to be in a single location in the codebase.\r\n\r\nThis PR then adds a new startup option `-maxcoinbaseweight` whose default is `8000` that can be used to lower or increase the reserved coinbase transaction weight.",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2024-11-27T19:57:29Z",
    "updated_at": "2025-01-09T11:03:46Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "99d00833d0c45e0c179abaed55b2ec87f2995f4d",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ismaelsadeeq:11-2024-fix-duplicate-coinbase-reservation-bug",
      "ref": "11-2024-fix-duplicate-coinbase-reservation-bug",
      "sha": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 577730599,
        "node_id": "R_kgDOIm94Jw",
        "name": "bitcoin",
        "full_name": "ismaelsadeeq/bitcoin",
        "owner": {
          "login": "ismaelsadeeq",
          "id": 48946461,
          "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
          "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ismaelsadeeq",
          "html_url": "https://github.com/ismaelsadeeq",
          "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
          "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
          "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
          "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
          "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ismaelsadeeq/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ismaelsadeeq/bitcoin",
        "archive_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ismaelsadeeq/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ismaelsadeeq/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ismaelsadeeq/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/hooks",
        "svn_url": "https://github.com/ismaelsadeeq/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 269152,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-08T18:46:33Z",
        "created_at": "2022-12-13T11:54:34Z",
        "updated_at": "2023-03-10T09:46:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "433412fd8478923dfdb20044f74c5d1e19fa8dd8",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36508,
        "stargazers_count": 81264,
        "watchers_count": 81264,
        "size": 273986,
        "default_branch": "master",
        "open_issues_count": 690,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-08T18:01:37Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-09T11:56:21Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 167,
    "deletions": 23,
    "changed_files": 10,
    "commits": 6,
    "review_comments": 48,
    "comments": 21
  },
  "events": [
    {
      "event": "commented",
      "id": 2504678276,
      "node_id": "IC_kwDOABII586VSluE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2504678276",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T19:57:33Z",
      "updated_at": "2025-01-08T20:29:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31384.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [pinheadmz](https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2538119452) |\n| Approach ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2530880952) |\n| Stale ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2536792956) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31583](https://github.com/bitcoin/bitcoin/pull/31583) (rpc: add gettarget , target getmininginfo field and show next block info by Sjors)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2504678276",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "labeled",
      "id": 15457144365,
      "node_id": "LE_lADOABII586g6bkdzwAAAAOZUU4t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15457144365",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T19:57:36Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "renamed",
      "id": 15457145211,
      "node_id": "RTE_lADOABII586g6bkdzwAAAAOZUVF7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15457145211",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T19:57:42Z",
      "rename": {
        "from": "mining: bugfix: Fix duplicate tx coinbase weight reservation",
        "to": "mining: bugfix: Fix duplicate coinbase tx weight reservation"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15457173643,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOZUcCL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15457173643",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "889145a3ff94b7afb34ea071bffd6ab52c9c6e6d",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/889145a3ff94b7afb34ea071bffd6ab52c9c6e6d",
      "created_at": "2024-11-27T20:01:22Z"
    },
    {
      "event": "labeled",
      "id": 15457177223,
      "node_id": "LE_lADOABII586g6bkdzwAAAAOZUc6H",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15457177223",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T20:01:49Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2504684303,
      "node_id": "IC_kwDOABII586VSnMP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2504684303",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T20:01:50Z",
      "updated_at": "2024-11-27T20:01:50Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/33621957087</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2504684303",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15457195299,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOZUhUj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15457195299",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "created_at": "2024-11-27T20:04:10Z"
    },
    {
      "event": "unlabeled",
      "id": 15457564792,
      "node_id": "UNLE_lADOABII586g6bkdzwAAAAOZV7h4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15457564792",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-27T20:55:18Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2469911697,
      "node_id": "PRR_kwDOABII586TN9yR",
      "url": null,
      "actor": null,
      "commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2469911697",
      "submitted_at": "2024-11-29T13:20:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "reviewed",
      "id": 2469916339,
      "node_id": "PRR_kwDOABII586TN-6z",
      "url": null,
      "actor": null,
      "commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2469916339",
      "submitted_at": "2024-11-29T13:23:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "commented",
      "id": 2507869514,
      "node_id": "IC_kwDOABII586Vew1K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2507869514",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-29T13:55:49Z",
      "updated_at": "2024-11-29T13:55:49Z",
      "author_association": "MEMBER",
      "body": "I'm in favor of fixing this bug, but differently, see https://github.com/bitcoin/bitcoin/issues/21950#issuecomment-2507864614",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2507869514",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "commented",
      "id": 2507906763,
      "node_id": "IC_kwDOABII586Ve57L",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2507906763",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-29T14:16:38Z",
      "updated_at": "2024-11-29T14:25:12Z",
      "author_association": "MEMBER",
      "body": "Something like this should do:\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex f79ebe881d..881a254efc 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -54,6 +54,7 @@\r\n #include <node/mempool_persist_args.h>\r\n #include <node/miner.h>\r\n #include <node/peerman_args.h>\r\n+#include <node/types.h>           // for BlockCreateOptions\r\n #include <policy/feerate.h>\r\n #include <policy/fees.h>\r\n #include <policy/fees_args.h>\r\n@@ -645,7 +646,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\r\n     argsman.AddArg(\"-whitelistrelay\", strprintf(\"Add 'relay' permission to whitelisted peers with default permissions. This will accept relayed transactions even when not relaying transactions (default: %d)\", DEFAULT_WHITELISTRELAY), ArgsManager::ALLOW_ANY, OptionsCategory::NODE_RELAY);\r\n \r\n \r\n-    argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d)\", DEFAULT_BLOCK_MAX_WEIGHT), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\r\n+    argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d). Note that getblocktemplate reserves %d weight units for the pool to customize the coinbase.\", DEFAULT_BLOCK_MAX_WEIGHT, node::BlockCreateOptions{}.coinbase_max_additional_weight), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\r\n     argsman.AddArg(\"-blockmintxfee=<amt>\", strprintf(\"Set lowest fee rate (in %s/kvB) for transactions to be included in block creation. (default: %s)\", CURRENCY_UNIT, FormatMoney(DEFAULT_BLOCK_MIN_TX_FEE)), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\r\n     argsman.AddArg(\"-blockversion=<n>\", \"Override block version to test forking scenarios\", ArgsManager::ALLOW_ANY | ArgsManager::DEBUG_ONLY, OptionsCategory::BLOCK_CREATION);\r\n \r\ndiff --git a/src/policy/policy.h b/src/policy/policy.h\r\nindex 4412f2db87..f0c9e822ec 100644\r\n--- a/src/policy/policy.h\r\n+++ b/src/policy/policy.h\r\n@@ -20,7 +20,7 @@ class CFeeRate;\r\n class CScript;\r\n \r\n /** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\r\n-static constexpr unsigned int DEFAULT_BLOCK_MAX_WEIGHT{MAX_BLOCK_WEIGHT - 4000};\r\n+static constexpr unsigned int DEFAULT_BLOCK_MAX_WEIGHT{MAX_BLOCK_WEIGHT};\r\n /** Default for -blockmintxfee, which sets the minimum feerate for a transaction in blocks created by mining code **/\r\n static constexpr unsigned int DEFAULT_BLOCK_MIN_TX_FEE{1000};\r\n /** The maximum weight for transactions we're willing to relay/mine */\r\n```\r\n\r\nWhile you're touching this, maybe `init.cpp` should also enforce that `-blockmaxweight` <= `MAX_BLOCK_WEIGHT`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2507906763",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15482496410,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOa1CWa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15482496410",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "e8ead38f8825eb4e0634571e42d5390102a32193",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/e8ead38f8825eb4e0634571e42d5390102a32193",
      "created_at": "2024-11-30T22:33:38Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15482543622,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOa1N4G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15482543622",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4784131ed87c0274f2f9676d945c235ad77470e4",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/4784131ed87c0274f2f9676d945c235ad77470e4",
      "created_at": "2024-11-30T22:41:53Z"
    },
    {
      "event": "labeled",
      "id": 15482543758,
      "node_id": "LE_lADOABII586g6bkdzwAAAAOa1N6O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15482543758",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-30T22:41:59Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2509431483,
      "node_id": "IC_kwDOABII586VkuK7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2509431483",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-30T22:42:00Z",
      "updated_at": "2024-11-30T22:42:00Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/33738108686</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2509431483",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "commented",
      "id": 2509452312,
      "node_id": "IC_kwDOABII586VkzQY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2509452312",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-30T22:53:11Z",
      "updated_at": "2024-11-30T22:53:11Z",
      "author_association": "MEMBER",
      "body": "Thanks for your review, @Sjors.\r\n\r\nI addressed all of your comments.  \r\n\r\n> Something like this should do  \r\n\r\nDone. Instead of creating `DEFAULT_BLOCK_MAX_WEIGHT` that copies `MAX_BLOCK_WEIGHT`, I've used it directly.  \r\n\r\n> Maybe init.cpp should also enforce that -blockmaxweight <= MAX_BLOCK_WEIGHT  \r\n\r\nWe already clamp the block size in the block assembler, so it will never exceed `MAX_BLOCK_WEIGHT`, but done with a test.  \r\n\r\nI've added a functional test and release notes.  ",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2509452312",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "mentioned",
      "id": 15482636355,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOa1khD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15482636355",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-30T22:53:12Z"
    },
    {
      "event": "subscribed",
      "id": 15482636357,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOa1khF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15482636357",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-30T22:53:12Z"
    },
    {
      "event": "unlabeled",
      "id": 15482732829,
      "node_id": "UNLE_lADOABII586g6bkdzwAAAAOa18Ed",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15482732829",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-30T23:24:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2511123617,
      "node_id": "IC_kwDOABII586VrLSh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2511123617",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-02T10:19:11Z",
      "updated_at": "2024-12-02T10:19:11Z",
      "author_association": "MEMBER",
      "body": "> We already clamp the block size in the block assembler\r\n\r\nTrue, but I think it's always better to clearly inform the user when they're trying to do something impossible. That said, not everyone might agree with that. If other reviewers don't like it you can always drop the check.\r\n\r\nWill review shortly.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2511123617",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "labeled",
      "id": 15517594199,
      "node_id": "LE_lADOABII586g6bkdzwAAAAOc67JX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15517594199",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-04T00:19:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15532661622,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOd0Zt2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15532661622",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3a2dd90151820cf8d6ae0fe7199807d777faca70",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/3a2dd90151820cf8d6ae0fe7199807d777faca70",
      "created_at": "2024-12-04T21:22:17Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15532663205,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOd0aGl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15532663205",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "created_at": "2024-12-04T21:22:27Z"
    },
    {
      "event": "unlabeled",
      "id": 15534177505,
      "node_id": "UNLE_lADOABII586g6bkdzwAAAAOd6Lzh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15534177505",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-05T00:34:13Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2522505791,
      "node_id": "IC_kwDOABII586WWmI_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2522505791",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-06T08:32:02Z",
      "updated_at": "2024-12-10T05:51:56Z",
      "author_association": "MEMBER",
      "body": "~ACK f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97~ (see comment below)\r\n\r\nI checked that the new `test_block_max_weight` test fails if I undo the changes in e1114bcc0d1b0078a6b3dbb6bbcf28f738f97bd0.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2522505791",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "reviewed",
      "id": 2489253785,
      "node_id": "PRR_kwDOABII586UXv-Z",
      "url": null,
      "actor": null,
      "commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Could you talk to why it is not a concern for existing deployed pool software which relies on the 8k value? It seems that reducing the default to 4k could at best cause issues to upgrading to a new Bitcoin Core version if noticed or at worst lead to creating an invalid block.\r\n\r\nFrom a quick skim through a block explorer there is a bunch of blocks with a >4k coinbase transaction right now:\r\n- https://blockstream.info/tx/121436b7346a49e12495a9286638636bf4baed0a218ce47867cad510c78030b1\r\n- https://blockstream.info/tx/9017f8200301770d2bac3fc224302ab207ccec2ef42e00eae78a30928fdb40a7\r\n- https://blockstream.info/tx/134a47f4853382ec2b066c580a2b98867e90fe264889b71e562c94fb83991350\r\n- https://blockstream.info/tx/747a8b230bd07e738ad4d5392190121e91da3a8125d1a33ccac4ec21f37cddc0\r\n- https://blockstream.info/tx/9d2203b1c72eddc072b566c4a16ed8757fcba95a3be6f270e17a128e41554b33\r\n- https://blockstream.info/tx/0987ebb31c4d8abd8158d5c7d63af8aea76df8581289ba0d676d7d38923ecd4f\r\n\r\nIt seems those were all created by a single pool, so it might make sense to look into their software if it's open source, or reach out to them. Also probably a good idea to scan the past year of blocks to see if any other miner was creating coinbase between 4k and 8k.\r\n\r\nTo be clear i think it makes absolute sense to not double count or at least to clarify the *actual* max block weight Bitcoin Core will use by default. Just want to make sure that lowering the default doesn't lead our users to make an expensive mistake.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2489253785",
      "submitted_at": "2024-12-09T15:57:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "reviewed",
      "id": 2489138820,
      "node_id": "PRR_kwDOABII586UXT6E",
      "url": null,
      "actor": null,
      "commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97\r\n\r\nBuilt and tested on arm/macos. Confirmed test fails without patch. I noticed [last year](https://github.com/bitcoin/bitcoin/issues/21950#issuecomment-1577337474) that all but one pools' blocks were maxing out at 3996000 but I really appreciate @darosior point about pools that typically build large coinbases.\r\n\r\nI wonder if it makes sense for a pool to set their own reserved coinbase weight, or pass in the outputs they want into getblocktemplate as an argument?\r\n\r\n<details><summary>Show Signature</summary>\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA256\r\n\r\nACK f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQIzBAEBCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmdXM54ACgkQ5+KYS2KJ\r\nyTpiAxAAwSCb+I2c2yJmDmlmcZcq8tyNAiHuNxr7r6RWCcIx35TDiELPJaYNBkhj\r\nS4OuTeRV+2CR0VbzCudmkt2MAHPaAlxCv3kgsMe4giI9bKSaHpBlCL5c0Zw3G2f4\r\nY0GTuCHYXMuK/G6pfMr/ox82AXXjorgVMpxAqAnlAigaebDb0CGwdSWw0by2kYNu\r\n1DH8ivkU2c590cRO5OYZr/9t8HdGLp7ySvnQ4Db/c4lJNC5EmopO0sq31wAcSKpP\r\nZYlv+eE6tKG8XYABNf78PNXnE4k2gpf3T6Gid+3lTXGAHSdopLJODmlK3UnVbMeH\r\n9d9UaYZ0La5eeGOdRe66iKOyByNI+gOHXE7N0bdmM3xM1OR7LG3CaGxVOx27WSwg\r\nQR/mGG43AbGdOGLbUY9MY6qjQWLeekYYTEQEWiBb22oltvn0vmoWBTZ07rKnkiBL\r\nrbmZzAFHVkyjEZD6AkOxJ7EzeSQb0cAqMFfCC9z8tRJnVLwyvnLU8UUS2xq+NvN/\r\nnpKdyC6OLK8F0Rg77oS6oWsJRzcvg5+lzDw54TXyokRYSLEsQCWBsAR2Fjl91C6a\r\nMf/4SN/d4oHdf1o1MxG+HqNiH+B8kgF5zSRxqmq2H1vPtQzf9Gpam+ol5uWFnXYl\r\nx26/0aESedAhHqoZrpdwqdCRNn5CZoSOnL0f6aiqQVWFzNnwdeE=\r\n=/h/d\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\npinheadmz's public key is [on keybase](https://keybase.io/pinheadmz/pgp_keys.asc?fingerprint=e61773cd6e01040e2f1bd78ce7e2984b6289c93a)\r\n</details>\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2489138820",
      "submitted_at": "2024-12-09T18:17:46Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "commented",
      "id": 2529419308,
      "node_id": "IC_kwDOABII586Ww-As",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2529419308",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-09T20:50:38Z",
      "updated_at": "2024-12-09T20:55:02Z",
      "author_association": "MEMBER",
      "body": "I ran this branch in Warnet too, filled up a mempool (`\"size\": 4563,  \"bytes\": 1377134`) and called GBT from two connected nodes, v27.0 and this branch with expected results: \r\n\r\n```\r\n$ # branch\r\n$ warnet bitcoin rpc tank-0000 getblocktemplate '{\\\"rules\\\":[\\\"segwit\\\"]}' | jq '[.transactions[].weight] | add '\r\n3995896\r\n$ # v27.0\r\n$ warnet bitcoin rpc tank-0001 getblocktemplate '{\\\"rules\\\":[\\\"segwit\\\"]}' | jq '[.transactions[].weight] | add '\r\n3991958\r\n```\r\n\r\nBoth block templates had the exact same transactions, with the exception of the last 2\r\n\r\nI'm interested in replaying this test with 6k, 8k, 10k weight coinbase txs too.",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2529419308",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "commented",
      "id": 2530503262,
      "node_id": "IC_kwDOABII586W1Gpe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2530503262",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T05:54:48Z",
      "updated_at": "2024-12-10T05:58:25Z",
      "author_association": "MEMBER",
      "body": "> Could you talk to why it is not a concern for existing deployed pool software which relies on the 8k value?\r\n\r\nIf a pool does not manually set a value for `-maxblockweight` then, before this change, 4000 weight units were reserved for the coinbase and 4000 were unallocated. That effectively makes it a 8000 weight unit reservation.\r\n\r\nSo if any existing pool relies on that space to be available they could produce an invalid block after upgrading.\r\n\r\n> From a quick skim through a block explorer there is a bunch of blocks with a >4k coinbase transaction right now:\r\n\r\nTo be more precise, we're interested in coinbase transactions of 4000 < size <= 8000, only counting scriptSig, witness and outputs. But the above is enough evidence to be careful here, so I undid my ACK.\r\n\r\n> It seems those were all created by a single pool, so it might make sense to look into their software if it's open source\r\n\r\nIt being open source is highly unlikely unfortunately.\r\n\r\nI see two options:\r\n\r\n1. Make it clear in the README that miners should check if their pool software produces large coinbase transactions. This relies a bit too much on people actually reading things.\r\n\r\n2. Add a new configuration option `-maxcoinbaseweight` (leaving out \"additional\" for readability) and make it 8000 by default. Combined with the changes in this PR, it preserves the current behavior.\r\n\r\nIf we go for option (2) we should probably go ahead and also add `-maxcoinbasesigops` since we know at least one pool patched Bitcoin Core (incorrectly) to have this functionality. See https://bitcoin.stackexchange.com/questions/117837/how-many-sigops-are-in-the-invalid-block-783426\r\n\r\nGiven the observations above I don't know if we can safely recommend 4000. I'm a bit worried about miners yolo-adjusting this value too low.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2530503262",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "commented",
      "id": 2530734917,
      "node_id": "IC_kwDOABII586W1_NF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2530734917",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:34Z",
      "updated_at": "2024-12-10T08:07:34Z",
      "author_association": "MEMBER",
      "body": "Thanks for all your reviews.\r\n\r\nThanks @pinheadmz for testing this with warnet 🚀 \r\n\r\n>  It seems that reducing the default to 4k could at best cause issues with upgrading to a new Bitcoin Core version if noticed or at worst lead to creating an invalid block.\r\n\r\nThis is only the case if the miner starts their node with default configurations. Assuming this PR gets into the next release, miners who want more space for the coinbase can simply start their node with a custom `-blockmaxweight` option, reducing the weight to their preferred value.\r\n@darosior I have a test covering this case in b52aad748efd84dceff84f9d46604375a6e23d1f\r\n\r\nThis pool should start with `-blockmaxweight=3996000`, which would provide an additional 4,000 weight units, and they are fine. \r\nHowever, as @Sjors mentioned, \"This relies a bit too much on people actually reading things,\" and I completely agree.\r\n\r\nI also agree it would be very useful to analyze the percentage of coinbase weight usage over the last few years so that we can make an informed decision based on historical data. I will work on this.\r\n\r\n---\r\n\r\nAs it stands, most miners are likely to have coinbases with weights not exceeding 4,000 (note: this claim should be backed with data; I only did a quick review of a few blocks) and current master provides no way for miners to build a block template that fully utilizes the remaining 4,000 weight units of weight. \r\nAnd we see some pools using a custom block builder to try to max out the remaining space according to @pinheadmz observations.\r\n\r\nWe should consider providing a mechanism that allows users to adjust this parameter while preserving the current block behavior.\r\n- One option is to introduce a `-maxcoinbaseweight` parameter as @Sjors suggested.\r\n- Alternatively, if we want to avoid adding a new option, we could reserve 8,000 weight units by default.  When users specify a `-blockmaxweight` lower than 4,000,000, the delta would determine the default coinbase transaction weight. \r\n     - Users who want 4,000 weight units for the coinbase can set `-blockmaxweight=3996000`.\r\n     - Users who prefer the default 8,000 weight units will just start their node with the default configuration.\r\n     \r\n     \r\n> I'm a bit worried about miners yolo-adjusting this value too low.\r\n\r\n(we can prevent too low delta in all approaches, so I think the minimum should be 4000 weight units. This PR already does that)\r\n     \r\nI am open to implementing any of these suggestions in this PR.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2530734917",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "mentioned",
      "id": 15596403294,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOhnjpe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15596403294",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:35Z"
    },
    {
      "event": "subscribed",
      "id": 15596403306,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOhnjpq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15596403306",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:36Z"
    },
    {
      "event": "mentioned",
      "id": 15596403318,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOhnjp2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15596403318",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:36Z"
    },
    {
      "event": "subscribed",
      "id": 15596403332,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOhnjqE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15596403332",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:36Z"
    },
    {
      "event": "mentioned",
      "id": 15596403344,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOhnjqQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15596403344",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:36Z"
    },
    {
      "event": "subscribed",
      "id": 15596403357,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOhnjqd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15596403357",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T08:07:36Z"
    },
    {
      "event": "commented",
      "id": 2530942691,
      "node_id": "IC_kwDOABII586W2x7j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2530942691",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-12-10T09:19:37Z",
      "updated_at": "2024-12-10T09:27:23Z",
      "author_association": "MEMBER",
      "body": "> Alternatively, if we want to avoid adding a new option, we could reserve 8,000 weight units by default.\r\n\r\nMaybe that's the best way to keep this PR simple. For Stratum v2 I don't care because we override the value anyway.\r\n\r\n> When users specify a `-blockmaxweight` lower than 4,000,000, the delta would determine the default coinbase transaction weight.\r\n\r\nI think we should strictly honor `-blockmaxweight` though.\r\n\r\nAnd then add `-maxcoinbaseweight` later to allow actually lowering this.\r\n\r\nThough we should probably do that in the same release as this PR, because otherwise those who currently use `-blockmaxweight=4000000` would be annoyed.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2530942691",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "commented",
      "id": 2567112162,
      "node_id": "IC_kwDOABII586ZAwXi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2567112162",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:23Z",
      "updated_at": "2025-01-01T18:57:23Z",
      "author_association": "MEMBER",
      "body": "@darosior @Sjors @pinheadmz \r\n\r\nI've recently analyzed the blockchain for the last two years from 4th December 2022 to 23rd December 2024 to move this forward.\r\n\r\nI will cross-write my findings here, but more seen here details can be seen here https://delvingbitcoin.org/t/analyzing-mining-pool-behavior-to-address-bitcoin-cores-double-coinbase-reservation-issue/1351\r\n\r\n- Most mining pools adhere to Bitcoin Core’s default setup, keeping coinbase transaction weights well below **4000 WU**. However, two pools stand out:\r\n  - **Ocean.xyz** consistently uses larger coinbase transactions, with an average weight of **6,994 WU**. Their smallest coinbase weight was **5,308 WU** (in block 865820), and their largest reached **9,272 WU** (block 863471). This suggests Ocean.xyz configures its node with a reduced `-blockmaxweight` setting, as their average block size is **3,986,489 WU**, well below the default template size.\r\n  - An **Unknown Pool/miner** also exceeded the default coinbase weight, averaging **7,432 WU**, with a maximum of **7,864 WU** but a very low block weight average which is unusual behavior.\r\n- **F2Pool** blocks have an average weight of **3,997,857 WU**, with some blocks exceeding **3,995,063 WU**. For instance, block **779729** reached **3,998,554 WU** with a coinbase weight of just **1,588 WU**, showcasing their optimal use of the available block weight.\r\n- The majority of pools—such as Foundry USA, Binance Pool, and AntPool—produce blocks averaging around **3,993,000 WU**, consistent with Bitcoin Core’s current behavior. However, this depicts underutilization which is a direct result of the double-reservation bug.\r\n- The small increase in the weights of the blocks among these pools suggests minor additions of transactions by miners after building a block template.\r\n\r\nIf the double-reservation issue is fixed, block templates will increase to **3,996,000 WU**, aligning theoretical and actual limits. This change benefits pools by allowing full utilization of the block weight while preserving **4000 WU** for coinbase transactions and other small additions.\r\n\r\nMiners who need more space, such as Ocean.xyz, can still configure their nodes with a reduced `-blockmaxweight`. For example, setting it to **3,999,000 WU** frees up **1000 WU** for larger coinbase transactions, ensuring compliance with consensus rules.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2567112162",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "mentioned",
      "id": 15794394328,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOta1TY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15794394328",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:25Z"
    },
    {
      "event": "subscribed",
      "id": 15794394329,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOta1TZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15794394329",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:25Z"
    },
    {
      "event": "mentioned",
      "id": 15794394331,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOta1Tb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15794394331",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:25Z"
    },
    {
      "event": "subscribed",
      "id": 15794394334,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOta1Te",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15794394334",
      "actor": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:25Z"
    },
    {
      "event": "mentioned",
      "id": 15794394337,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOta1Th",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15794394337",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:25Z"
    },
    {
      "event": "subscribed",
      "id": 15794394340,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOta1Tk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15794394340",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-01T18:57:25Z"
    },
    {
      "event": "commented",
      "id": 2567472713,
      "node_id": "IC_kwDOABII586ZCIZJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2567472713",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T09:18:23Z",
      "updated_at": "2025-01-02T09:18:23Z",
      "author_association": "MEMBER",
      "body": "@ismaelsadeeq thanks for the research!\r\n\r\nOcean in the DATUM documentation indeed requires a reduced `-blockmaxweight=3985000`, so presumably they do something similar in their regular stratum pool: https://github.com/OCEAN-xyz/datum_gateway?tab=readme-ov-file#node-configuration\r\n\r\nI still think we should use `-blockmaxweight` (default `4000000`) to refer to the entire block, including coinbase, and then have a separate `-maxcoinbaseweight` (default `8000`). This keeps the same behavior for miners with default settings.\r\n\r\nMiners who manually configured `-blockmaxweight` before will, after this update, need to manually set `-maxcoinbaseweight=4000` to preserve the same behaviour. But if they don't do this, it's not dangerous.\r\n\r\nLater on we could even deprecate `-blockmaxweight`. Its original purpose was to constrain the block size far below the consensus limit, which nobody is doing anymore.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2567472713",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "mentioned",
      "id": 15796813558,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOtkD72",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15796813558",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T09:18:24Z"
    },
    {
      "event": "subscribed",
      "id": 15796813570,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOtkD8C",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15796813570",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T09:18:24Z"
    },
    {
      "event": "commented",
      "id": 2567933827,
      "node_id": "IC_kwDOABII586ZD4-D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2567933827",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T15:18:12Z",
      "updated_at": "2025-01-02T15:18:12Z",
      "author_association": "MEMBER",
      "body": "@Sjors \r\n\r\n> I still think we should use -blockmaxweight (default 4000000) \r\n\r\nAgreed this reflects the current behaviour of this PR\r\n\r\n> and then have a separate -maxcoinbaseweight (default 8000). This keeps the same behavior for miners with default settings.\r\n\r\n> Miners who manually configured -blockmaxweight before will, after this update, need to manually set -maxcoinbaseweight=4000 to preserve the same behaviour. But if they don't do this, it's not dangerous.\r\n\r\nWhy do we want to preserve the same behavior? Yes, they now have the ability to lower it, but then our default is high above the average of what miners use (almost 4x), and users tend to stick to the default. As a result, they will mine at a disadvantage compared to their counter parties have a custom settings.\r\n\r\nCould you clarify the effect of setting it to `4000` in light of the recent findings? I see no reason why we should not set it to `4000`  because it's more than enough for most users, and does not incentivize any custom set-up.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2567933827",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "mentioned",
      "id": 15799752651,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOtvRfL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15799752651",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T15:18:14Z"
    },
    {
      "event": "subscribed",
      "id": 15799752662,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOtvRfW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15799752662",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-02T15:18:14Z"
    },
    {
      "event": "commented",
      "id": 2569056045,
      "node_id": "IC_kwDOABII586ZIK8t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2569056045",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-03T11:06:59Z",
      "updated_at": "2025-01-03T11:06:59Z",
      "author_association": "MEMBER",
      "body": "> Could you clarify the effect of setting it to 4000 in light of the recent findings?\r\n\r\nIt's still not worth the risk imo. Making the default 4000 instead of 8000 provides 0.1% extra fee revenue for miners who don't read the release notes. But there could be a miner out there losing 100% of the block revenue (subsidy + 100% of fees) because they were doing something custom that you didn't detect in the analysis.\r\n\r\nIn the example of Ocean it _seems_ that their custom `-blockmaxweight` is low enough that this change won't bite them, but without inspecting their software we can't know if there's some edge case where it _does_ matter.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2569056045",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15811975677,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOud5n9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15811975677",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "created_at": "2025-01-04T01:38:04Z"
    },
    {
      "event": "commented",
      "id": 2569993729,
      "node_id": "IC_kwDOABII586ZLv4B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2569993729",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-04T01:41:37Z",
      "updated_at": "2025-01-04T01:41:37Z",
      "author_association": "MEMBER",
      "body": "> Making the default 4000 instead of 8000 provides 0.1% extra fee revenue for miners who don't read the release notes. But there could be a miner out there losing 100% of the block revenue (subsidy + 100% of fees)\r\n\r\nFair enough.\r\n\r\nI've pushed an update [diff](https://github.com/bitcoin/bitcoin/compare/f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97..cd48e2ccaf24c9594f5987a29e02b924573134ed):\r\n\r\n1. Set the default to 8000, based on [this suggestion](https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2567472713).\r\n2. e504d15cfb4c0b6ed67c46f5aecc47980f233bcb Fixed the accounting of total block weight and total block sigop count to exclude the reserved values for coinbase transaction. These are estimates and can be incorrect when the actual values, which are usually lower, don't match the reserved ones. It's now explicit that the totals do not include the coinbase transaction.\r\n\r\nI didn't push the update for `maxcoinbaseweight` because I wanted to suggest making it a runtime option. The requirements can change for each block template, so it might be better to pass it as an RPC parameter in `getblocktemplate` instead of an init parameter. WDYT, @Sjors?\r\n\r\nAlso, you can skip reviewing the release notes they're  not final yet.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2569993729",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "mentioned",
      "id": 15811982651,
      "node_id": "MEE_lADOABII586g6bkdzwAAAAOud7U7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15811982651",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-04T01:41:39Z"
    },
    {
      "event": "subscribed",
      "id": 15811982653,
      "node_id": "SE_lADOABII586g6bkdzwAAAAOud7U9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15811982653",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-04T01:41:39Z"
    },
    {
      "event": "commented",
      "id": 2571312484,
      "node_id": "IC_kwDOABII586ZQx1k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2571312484",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-04T13:59:30Z",
      "updated_at": "2025-01-04T13:59:30Z",
      "author_association": "MEMBER",
      "body": "Changing anything about `getblocktemplate` can be tricky in my experience https://github.com/bitcoin/bitcoin/pull/27433#issuecomment-1607709381, because it's defined in BIP22: https://github.com/bitcoin/bips/blob/master/bip-0022.mediawiki\r\n\r\nSo I would leave \"making it a runtime option\" to a followup. That said, I'm skeptical how useful that would be. Legacy pool software probably won't use it, Ocean has a fixed value that they tell users to configure and modern mining pool software should just use the new Mining IPC interface imo.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2571312484",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "reviewed",
      "id": 2530880952,
      "node_id": "PRR_kwDOABII586W2i24",
      "url": null,
      "actor": null,
      "commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2530880952",
      "submitted_at": "2025-01-05T14:06:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15829615126,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOvhMIW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15829615126",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "16f3e9e241ec5762f38e9a3291dab3dedb04d0e3",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/16f3e9e241ec5762f38e9a3291dab3dedb04d0e3",
      "created_at": "2025-01-06T18:38:42Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15829646653,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOvhT09",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15829646653",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ededdd13f3263df08f7878aa2514d3796436cbfb",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/ededdd13f3263df08f7878aa2514d3796436cbfb",
      "created_at": "2025-01-06T18:42:11Z"
    },
    {
      "event": "commented",
      "id": 2573697292,
      "node_id": "IC_kwDOABII586ZZ4EM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2573697292",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-06T18:42:16Z",
      "updated_at": "2025-01-06T18:42:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35214287972</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2573697292",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "labeled",
      "id": 15829647510,
      "node_id": "LE_lADOABII586g6bkdzwAAAAOvhUCW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15829647510",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-06T18:42:16Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2532569808,
      "node_id": "PRR_kwDOABII586W8_LQ",
      "url": null,
      "actor": null,
      "commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Thanks for your feedback @Sjors and your review @TheCharlatan \r\n\r\nI've forced pushed to see [diff](https://github.com/bitcoin/bitcoin/compare/cd48e2ccaf24c9594f5987a29e02b924573134ed..ededdd13f3263df08f7878aa2514d3796436cbfb):\r\n1. Add the `-maxcoinbaseweight` option with default as `8000`.\r\n2.  Address review comments from @TheCharlatan \r\n\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2532569808",
      "submitted_at": "2025-01-06T18:45:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "unlabeled",
      "id": 15835664316,
      "node_id": "UNLE_lADOABII586g6bkdzwAAAAOv4Q-8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15835664316",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-07T08:58:34Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2533761935,
      "node_id": "PRR_kwDOABII586XBiOP",
      "url": null,
      "actor": null,
      "commit_id": "ededdd13f3263df08f7878aa2514d3796436cbfb",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code reviewed ededdd13f3263df08f7878aa2514d3796436cbfb, almost there.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2533761935",
      "submitted_at": "2025-01-07T12:29:10Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15843401780,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOwVyA0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15843401780",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8cca69e9b55ce60a4fa8c785462408501ad71ef1",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/8cca69e9b55ce60a4fa8c785462408501ad71ef1",
      "created_at": "2025-01-07T19:30:21Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDcwMzM3M2RmOGM1OTc3Y2E1NzJlMjY0MjJlYjE3NTJjNjk0MzYxYTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/703373df8c5977ca572e26422eb1752c694361a8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/703373df8c5977ca572e26422eb1752c694361a8",
      "tree": {
        "sha": "7e5ceaf380a8816c221b93e6a7f40f160e33d306",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7e5ceaf380a8816c221b93e6a7f40f160e33d306"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e8cc790fe2a223cfaa6dedfba88a6dc4f336f1d9",
          "sha": "e8cc790fe2a223cfaa6dedfba88a6dc4f336f1d9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e8cc790fe2a223cfaa6dedfba88a6dc4f336f1d9"
        }
      ],
      "message": "miner: bugfix: remove duplicate space reservation for coinbase tx",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-07T19:37:11Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-30T16:45:24Z"
      },
      "sha": "703373df8c5977ca572e26422eb1752c694361a8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI1NWJiOTVkOGQ4MDE3NWYzMGQyZDRkYTVjNmNmZDcyZTVkOGVlZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd",
      "tree": {
        "sha": "6b66fcc67038eb9b78cd4b17245f602515cb89c6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6b66fcc67038eb9b78cd4b17245f602515cb89c6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/703373df8c5977ca572e26422eb1752c694361a8",
          "sha": "703373df8c5977ca572e26422eb1752c694361a8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/703373df8c5977ca572e26422eb1752c694361a8"
        }
      ],
      "message": "test: add `-blockmaxweight` startup option functional test",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-07T19:37:11Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-30T20:47:46Z"
      },
      "sha": "b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIwOTY3MThiODhkNzc0MTc2OTY1NzM3MDZhNmQxYzQxMmI4OWRlZDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b096718b88d77417696573706a6d1c412b89ded0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b096718b88d77417696573706a6d1c412b89ded0",
      "tree": {
        "sha": "91080a22eb35447c371cade118aba10dd47c032b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/91080a22eb35447c371cade118aba10dd47c032b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd",
          "sha": "b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd"
        }
      ],
      "message": "init: fail to start when `-blockmaxweight` exceeds `MAX_BLOCK_WEIGHT`",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-07T19:37:11Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-30T22:09:45Z"
      },
      "sha": "b096718b88d77417696573706a6d1c412b89ded0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZlMDE3ODAxNDM1ZTkxMDM2ZDUyNmFlMTk2MzRiZjFjNmY3YWVlYzk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6e017801435e91036d526ae19634bf1c6f7aeec9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6e017801435e91036d526ae19634bf1c6f7aeec9",
      "tree": {
        "sha": "f4232ab2e02ebb69d3d2e3dc159327208755efbb",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f4232ab2e02ebb69d3d2e3dc159327208755efbb"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b096718b88d77417696573706a6d1c412b89ded0",
          "sha": "b096718b88d77417696573706a6d1c412b89ded0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b096718b88d77417696573706a6d1c412b89ded0"
        }
      ],
      "message": "miner: fix block weight and block sigop count accounting\n\n- The reserved weight and sigops count of the coinbase transaction\n  is an estimate and may not represent the exact values; it can be lower.\n  Adding these values to the total block weight, and total block sigop count\n  of the assembled block might result in an incorrect total values when the\n  real values are lower than the reserved ones.\n\n- Fix this by not adding the reserved values to the total.\n\n- Also make it explicit that total block weight, sigops count, and transaction count\n  does not include the coinbase transaction.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-07T19:37:11Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-04T00:41:37Z"
      },
      "sha": "6e017801435e91036d526ae19634bf1c6f7aeec9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE0NWFmNmFmNGU3YTU5Y2QxNGVmNmUxNmI4ZTVlMTgwZmE5ZDU2NGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "tree": {
        "sha": "377f4bd357dabc8382526f4004fc2673515a45fa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/377f4bd357dabc8382526f4004fc2673515a45fa"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6e017801435e91036d526ae19634bf1c6f7aeec9",
          "sha": "6e017801435e91036d526ae19634bf1c6f7aeec9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6e017801435e91036d526ae19634bf1c6f7aeec9"
        }
      ],
      "message": "miner: init: add `-maxcoinbaseweight` startup option",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-07T19:37:11Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-06T16:13:44Z"
      },
      "sha": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15843463938,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOwWBMC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15843463938",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7452638559e8ccbe00db5ef5a53cb21ffe27d337",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/7452638559e8ccbe00db5ef5a53cb21ffe27d337",
      "created_at": "2025-01-07T19:37:17Z"
    },
    {
      "event": "labeled",
      "id": 15843464600,
      "node_id": "LE_lADOABII586g6bkdzwAAAAOwWBWY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15843464600",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-07T19:37:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2576083604,
      "node_id": "IC_kwDOABII586Zi-qU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2576083604",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-07T19:37:23Z",
      "updated_at": "2025-01-07T19:37:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/35274044590</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2576083604",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    },
    {
      "event": "unlabeled",
      "id": 15844120509,
      "node_id": "UNLE_lADOABII586g6bkdzwAAAAOwYhe9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15844120509",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-07T20:47:07Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2536792956,
      "node_id": "PRR_kwDOABII586XNGN8",
      "url": null,
      "actor": null,
      "commit_id": "7452638559e8ccbe00db5ef5a53cb21ffe27d337",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 7452638559e8ccbe00db5ef5a53cb21ffe27d337",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2536792956",
      "submitted_at": "2025-01-08T10:39:27Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "review_requested",
      "id": 15851947717,
      "node_id": "RRE_lADOABII586g6bkdzwAAAAOw2YbF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15851947717",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T10:39:31Z",
      "requested_reviewer": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 15851947944,
      "node_id": "RRE_lADOABII586g6bkdzwAAAAOw2Yeo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15851947944",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T10:39:32Z",
      "requested_reviewer": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJmYjgzM2U2OTYyN2E4ZjliMWM0YjE0YjYwZDFkZjk5MDNhZGYyMTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "tree": {
        "sha": "e13c7b3a443581fc55113e62952edafd1dd124e3",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e13c7b3a443581fc55113e62952edafd1dd124e3"
      },
      "verification": {
        "verified": false,
        "reason": "unknown_key",
        "payload": "tree e13c7b3a443581fc55113e62952edafd1dd124e3\nparent a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d\nauthor ismaelsadeeq <ask4ismailsadiq@gmail.com> 1733005772 -0500\ncommitter ismaelsadeeq <ask4ismailsadiq@gmail.com> 1736344679 -0500\n\ndoc: add release notes\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niHUEABYKAB0WIQTp92/X8LZmU6fYk5kOOQjzZJiYiAUCZ36EZwAKCRAOOQjzZJiY\niOcNAP9zeSk/VMOlUV8cD2u2usTLt7vOyI3DkSru8ZEZukW9HQD/d2v7wChSS+1v\npBZNpny0pJoyB9gGTDzCk3wkY2C97AI=\n=GF8D\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
          "sha": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d"
        }
      ],
      "message": "doc: add release notes",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-08T13:57:59Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-30T22:29:32Z"
      },
      "sha": "2fb833e69627a8f9b1c4b14b60d1df9903adf210"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15854626061,
      "node_id": "HRFPE_lADOABII586g6bkdzwAAAAOxAmUN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15854626061",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "created_at": "2025-01-08T13:58:41Z"
    },
    {
      "event": "reviewed",
      "id": 2538119452,
      "node_id": "PRR_kwDOABII586XSKEc",
      "url": null,
      "actor": null,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "ACK 2fb833e69627a8f9b1c4b14b60d1df9903adf210\r\n\r\nReviewed each commit, built and ran unit and functional tests on arm/macos. I left a few questions and nits below. \r\n\r\nTest coverage is great and I think this is the right approach to add a coinbase reserved weight option. Also it's a nice way to get those extra 4000 weight for default miners without putting the heavy-coinbase mining pools at risk\r\n\r\n\r\n\r\nI also have one last lingering question which is: when does the miner actually construct their coinbase transaction and is that ever compared to the reserved size? Or do we just ensure it fits in the current block template against MAX_BLOCK_WEIGHT? In either case, how is the miner warned that they may need to reduce their coinbase weight OR restart with a different `-maxcoinbaseweight`?\r\n\r\n<details><summary>Show Signature</summary>\r\n\r\n```\r\n-----BEGIN PGP SIGNED MESSAGE-----\r\nHash: SHA256\r\n\r\nACK 2fb833e69627a8f9b1c4b14b60d1df9903adf210\r\n-----BEGIN PGP SIGNATURE-----\r\n\r\niQIzBAEBCAAdFiEE5hdzzW4BBA4vG9eM5+KYS2KJyToFAmd+3sMACgkQ5+KYS2KJ\r\nyTroqhAAg1FUDuanndz7w+oHkrzpJ1JvmAGoZnaoBU6Rua7FgN97+RgHCv44zPH5\r\nw5knXBMPl77AiM6BSCvfqt/os15Opm+GvU1wkz3oW4w/JvzYuiQK3X3PqQv4eeW2\r\nE46p5dAoClwkzpkqdTKo4AezqiM3tHo+pGuvPLcaUgOFggElt/lYA2yKSvbEocst\r\nkWyw3fW6iXa71u+pONRukWHzRYthBiozrBQu8vPsj7o1xqnUqN+o650kzqT5qHXU\r\npD9LPJlVUoeAKXg2+uUAlXRa0NI23H+QiRS5z3AKC8Y1frLA9oTFo3RvxcbyP2ux\r\nqIr57H30yEX+DhwG3u4B7TF2O3xcP5+KuKPER7CJ/EYXEYhxzaXW6jOkIbAwEH8b\r\n3mVvN9fPxVHozMeeFHTJl+jQN6Jm6m0SMF85HSkxnvfS1xTRl7/BkQFmy8D2ofVQ\r\nIBeyIaibQCM53uc0MTI5Fr/FdiL4r63GzJopG4fPYmU2pnhZPdX89fgodMtVVmIE\r\nDbgaLOLn+CnnlJcT2kWoP7D3sZdzAvgyLB0yxByjMkRia4tahMrRh/iAjoTuEPr1\r\nLJCw2vDPET/BZogPkJoXVdN9y9mxGu5jn4rHQBYh88oup+Wz1qdJ28H9RztP6XFs\r\n+uDEgRAYVwg0c5fSrRFtoKI+Mk3gtJIU+cQ0YBzaR3E3U8YYANs=\r\n=Fh++\r\n-----END PGP SIGNATURE-----\r\n```\r\n\r\npinheadmz's public key is [on keybase](https://keybase.io/pinheadmz/pgp_keys.asc?fingerprint=e61773cd6e01040e2f1bd78ce7e2984b6289c93a)\r\n</details>\r\n",
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2538119452",
      "submitted_at": "2025-01-08T20:28:56Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "review_requested",
      "id": 15859650067,
      "node_id": "RRE_lADOABII586g6bkdzwAAAAOxTw4T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15859650067",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-08T20:29:01Z",
      "requested_reviewer": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2538478813,
      "node_id": "PRR_kwDOABII586XThzd",
      "url": null,
      "actor": null,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#pullrequestreview-2538478813",
      "submitted_at": "2025-01-08T23:41:20Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
    },
    {
      "event": "commented",
      "id": 2579834709,
      "node_id": "IC_kwDOABII586ZxSdV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2579834709",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-09T10:56:02Z",
      "updated_at": "2025-01-09T11:03:46Z",
      "author_association": "MEMBER",
      "body": "> I also have one last lingering question which is: when does the miner actually construct their coinbase transaction and is that ever compared to the reserved size? \r\n\r\nThis is entirely up to the pool software. They could call `getblocktemplate` in `proposal` mode (or `checkblock` if #31564 lands).\r\n\r\nI think https://github.com/bitcoin/bitcoin/pull/31384/files#r1908533084 should be addressed before merging (and so might as well address the other comments now instead of a followup).\r\n\r\nIf you're going to touch the `getblocktemplate` help text, then consider cherry-picking 4facb94a481ca121a9117e0992799371bb429da1.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#issuecomment-2579834709",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31384"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1863519065",
      "pull_request_review_id": 2469911697,
      "id": 1863519065,
      "node_id": "PRRC_kwDOABII585vEwtZ",
      "diff_hunk": "@@ -37,7 +37,7 @@ struct BlockCreateOptions {\n      * scriptSig, witness and outputs. This must include any additional\n      * weight needed for larger CompactSize encoded lengths.\n      */\n-    size_t coinbase_max_additional_weight{4000};\n+    size_t coinbase_max_additional_weight{0};",
      "path": "src/node/types.h",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think setting `coinbase_max_additional_weight` to `0` is the right approach. Stratum v2 relies on being able to tweak this value.",
      "created_at": "2024-11-29T13:20:51Z",
      "updated_at": "2024-11-29T13:55:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1863519065",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1863519065"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1863522185",
      "pull_request_review_id": 2469916339,
      "id": 1863522185,
      "node_id": "PRRC_kwDOABII585vExeJ",
      "diff_hunk": "@@ -68,7 +68,7 @@ def mine_chain(self):\n         mining_info = self.nodes[0].getmininginfo()\n         assert_equal(mining_info['blocks'], 200)\n         assert_equal(mining_info['currentblocktx'], 0)\n-        assert_equal(mining_info['currentblockweight'], 4000)\n+        assert_equal(mining_info['currentblockweight'], 0)",
      "path": "test/functional/mining_basic.py",
      "position": 16,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't have an opinion on whether `currentblockweight` should include the reservation. But the documentation should be clarified either way.",
      "created_at": "2024-11-29T13:23:34Z",
      "updated_at": "2024-11-29T13:23:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1863522185",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1863522185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1864584708",
      "pull_request_review_id": 2471185201,
      "id": 1864584708,
      "node_id": "PRRC_kwDOABII585vI04E",
      "diff_hunk": "@@ -37,7 +37,7 @@ struct BlockCreateOptions {\n      * scriptSig, witness and outputs. This must include any additional\n      * weight needed for larger CompactSize encoded lengths.\n      */\n-    size_t coinbase_max_additional_weight{4000};\n+    size_t coinbase_max_additional_weight{0};",
      "path": "src/node/types.h",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "in_reply_to_id": 1863519065,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Switched to the approach you suggested.\r\n",
      "created_at": "2024-11-30T22:35:58Z",
      "updated_at": "2024-11-30T22:35:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1864584708",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1864584708"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 40,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1864585362",
      "pull_request_review_id": 2471185809,
      "id": 1864585362,
      "node_id": "PRRC_kwDOABII585vI1CS",
      "diff_hunk": "@@ -68,7 +68,7 @@ def mine_chain(self):\n         mining_info = self.nodes[0].getmininginfo()\n         assert_equal(mining_info['blocks'], 200)\n         assert_equal(mining_info['currentblocktx'], 0)\n-        assert_equal(mining_info['currentblockweight'], 4000)\n+        assert_equal(mining_info['currentblockweight'], 0)",
      "path": "test/functional/mining_basic.py",
      "position": 16,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "in_reply_to_id": 1863522185,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is gone now, thanks.",
      "created_at": "2024-11-30T22:36:13Z",
      "updated_at": "2024-11-30T22:36:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1864585362",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1864585362"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1876176080",
      "pull_request_review_id": 2489138820,
      "id": 1876176080,
      "node_id": "PRRC_kwDOABII585v1CzQ",
      "diff_hunk": "@@ -0,0 +1,7 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where duplicate coinbase transaction weight reservation occurred. The `getblocktemplate` RPC will now correctly creates blocks with a weight of `3,996,000` weight units, reserving `4,000` weight units for the coinbase transaction.",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit:\r\n\r\nThe `getblocktemplate` RPC will now create blocks up to a **maximum** weight of `3,996,000` weight units ...",
      "created_at": "2024-12-09T15:18:49Z",
      "updated_at": "2024-12-09T18:17:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1876176080",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1876176080"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1876441698",
      "pull_request_review_id": 2489138820,
      "id": 1876441698,
      "node_id": "PRRC_kwDOABII585v2Dpi",
      "diff_hunk": "@@ -67,11 +67,11 @@ void RegenerateCommitments(CBlock& block, ChainstateManager& chainman)\n \n static BlockAssembler::Options ClampOptions(BlockAssembler::Options options)\n {\n-    Assert(options.coinbase_max_additional_weight <= DEFAULT_BLOCK_MAX_WEIGHT);\n+    Assert(options.coinbase_max_additional_weight <= MAX_BLOCK_WEIGHT);\n     Assert(options.coinbase_output_max_additional_sigops <= MAX_BLOCK_SIGOPS_COST);\n-    // Limit weight to between coinbase_max_additional_weight and DEFAULT_BLOCK_MAX_WEIGHT for sanity:\n+    // Limit weight to between coinbase_max_additional_weight and MAX_BLOCK_WEIGHT for sanity:\n     // Coinbase (reserved) outputs can safely exceed -blockmaxweight, but the rest of the block template will be empty.\n-    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, options.coinbase_max_additional_weight, DEFAULT_BLOCK_MAX_WEIGHT);\n+    options.nBlockMaxWeight = std::clamp<size_t>(options.nBlockMaxWeight, options.coinbase_max_additional_weight, MAX_BLOCK_WEIGHT);",
      "path": "src/node/miner.cpp",
      "position": 11,
      "original_position": 11,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think you need to change anything but it's kind of a funny comment (the existing line 73) since the coinbase size can only exceed `-blockmaxweight` if it does not also exceed `MAX_BLOCK_WEIGHT`",
      "created_at": "2024-12-09T17:55:53Z",
      "updated_at": "2024-12-09T18:17:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1876441698",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1876441698"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": 72,
      "original_start_line": 72,
      "start_side": "RIGHT",
      "line": 74,
      "original_line": 74,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1877541699",
      "pull_request_review_id": 2491359775,
      "id": 1877541699,
      "node_id": "PRRC_kwDOABII585v6QND",
      "diff_hunk": "@@ -0,0 +1,7 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where duplicate coinbase transaction weight reservation occurred. The `getblocktemplate` RPC will now correctly creates blocks with a weight of `3,996,000` weight units, reserving `4,000` weight units for the coinbase transaction.",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "in_reply_to_id": 1876176080,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks I will change when retouching.",
      "created_at": "2024-12-10T08:08:23Z",
      "updated_at": "2024-12-10T08:08:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1877541699",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1877541699"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903255292",
      "pull_request_review_id": 2530880952,
      "id": 1903255292,
      "node_id": "PRRC_kwDOABII585xcV78",
      "diff_hunk": "@@ -647,7 +649,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n     argsman.AddArg(\"-whitelistrelay\", strprintf(\"Add 'relay' permission to whitelisted peers with default permissions. This will accept relayed transactions even when not relaying transactions (default: %d)\", DEFAULT_WHITELISTRELAY), ArgsManager::ALLOW_ANY, OptionsCategory::NODE_RELAY);\n \n \n-    argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d)\", DEFAULT_BLOCK_MAX_WEIGHT), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\n+    argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d). Note: default policy is to reserve %d weight units for coinbase transaction.\", MAX_BLOCK_WEIGHT, node::BlockCreateOptions{}.coinbase_max_additional_weight), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Typo nit: `s/for coinbase/for the coinbase/`",
      "created_at": "2025-01-05T11:55:38Z",
      "updated_at": "2025-01-05T14:06:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903255292",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903255292"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 652,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903257389",
      "pull_request_review_id": 2530880952,
      "id": 1903257389,
      "node_id": "PRRC_kwDOABII585xcWct",
      "diff_hunk": "@@ -54,6 +55,7 @@\n #include <node/mempool_persist_args.h>\n #include <node/miner.h>\n #include <node/peerman_args.h>\n+#include <node/types.h> // for BlockCreateOptions",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a350a6796091030f90e485da97fa9e7b11023ccf",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nit: I don't think adding these comments after an include is useful. They can become stale easily and it adds to the general inconsistencies of the codebase. Can you remove it again?",
      "created_at": "2025-01-05T12:07:50Z",
      "updated_at": "2025-01-05T14:06:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903257389",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903257389"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903265703",
      "pull_request_review_id": 2530880952,
      "id": 1903265703,
      "node_id": "PRRC_kwDOABII585xcYen",
      "diff_hunk": "@@ -190,6 +192,96 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], Decimal(\"0.0003\"), LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")",
      "path": "test/functional/mining_basic.py",
      "position": 65,
      "original_position": 54,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "abefbd201d40912120332de9b95463ed040e39ed",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nit: Since you are creating a constant for the normal feerate, maybe create one for the fee rate of the large transactions too?",
      "created_at": "2025-01-05T12:55:55Z",
      "updated_at": "2025-01-05T14:06:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903265703",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903265703"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903268301",
      "pull_request_review_id": 2530880952,
      "id": 1903268301,
      "node_id": "PRRC_kwDOABII585xcZHN",
      "diff_hunk": "@@ -190,6 +192,96 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], Decimal(\"0.0003\"), LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")\n+        self.send_transactions(utxos[LARGE_TXS_COUNT:LARGE_TXS_COUNT + 2], NORMAL_FEERATE, NORMAL_VSIZE)\n+\n+        # Check that the mempool contains all transactions\n+        self.log.info(f\"Testing that the mempool contains {LARGE_TXS_COUNT + 2} transactions.\")\n+        assert_equal(len(self.nodes[0].getrawmempool()), LARGE_TXS_COUNT + 2)\n+\n+        # Verify the block template includes only the 10 high-fee transactions\n+        self.log.info(\"Testing that the block template includes only the 10 large transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT,\n+        )\n+\n+        # Test block template creation with custom -blockmaxweight\n+        custom_block_weight = MAX_BLOCK_WEIGHT - 2000\n+        # Reducing the weight by 2000 units will prevent 1 large transaction from fitting into the block.\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\", f\"-blockmaxweight={custom_block_weight}\"])\n+\n+        self.log.info(\"Testing the block template with custom -blockmaxweight to include 9 large and 2 normal transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT + 1,",
      "path": "test/functional/mining_basic.py",
      "position": null,
      "original_position": 75,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "abefbd201d40912120332de9b95463ed040e39ed",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nit: This is a bit confusing, I think something like `(LARGE_TXS_COUNT - 1) + NORMAL_TXS_COUNT` would be more accurate, or just give the number like you do in the next test block.",
      "created_at": "2025-01-05T13:10:16Z",
      "updated_at": "2025-01-05T14:06:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903268301",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903268301"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903271412",
      "pull_request_review_id": 2530880952,
      "id": 1903271412,
      "node_id": "PRRC_kwDOABII585xcZ30",
      "diff_hunk": "@@ -190,6 +192,96 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], Decimal(\"0.0003\"), LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")\n+        self.send_transactions(utxos[LARGE_TXS_COUNT:LARGE_TXS_COUNT + 2], NORMAL_FEERATE, NORMAL_VSIZE)\n+\n+        # Check that the mempool contains all transactions\n+        self.log.info(f\"Testing that the mempool contains {LARGE_TXS_COUNT + 2} transactions.\")\n+        assert_equal(len(self.nodes[0].getrawmempool()), LARGE_TXS_COUNT + 2)\n+\n+        # Verify the block template includes only the 10 high-fee transactions\n+        self.log.info(\"Testing that the block template includes only the 10 large transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT,\n+        )\n+\n+        # Test block template creation with custom -blockmaxweight\n+        custom_block_weight = MAX_BLOCK_WEIGHT - 2000\n+        # Reducing the weight by 2000 units will prevent 1 large transaction from fitting into the block.\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\", f\"-blockmaxweight={custom_block_weight}\"])\n+\n+        self.log.info(\"Testing the block template with custom -blockmaxweight to include 9 large and 2 normal transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT + 1,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT - 2000,\n+        )\n+\n+        # Test that DEFAULT_COINBASE_TX_WEIGHT is always reserved",
      "path": "test/functional/mining_basic.py",
      "position": null,
      "original_position": 79,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "abefbd201d40912120332de9b95463ed040e39ed",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is there a material difference between this test block and the previous one that actually exercises the default coinbase weight? Could more exact weight accounting where the total weight is checked with `assert_equal` instead of `assert_greater_than_or_equal` in `verify_block_template` be useful?",
      "created_at": "2025-01-05T13:26:47Z",
      "updated_at": "2025-01-05T14:06:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903271412",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903271412"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 260,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903276616",
      "pull_request_review_id": 2530880952,
      "id": 1903276616,
      "node_id": "PRRC_kwDOABII585xcbJI",
      "diff_hunk": "@@ -96,12 +96,9 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n void BlockAssembler::resetBlock()\n {\n     inBlock.clear();\n-\n-    // Reserve space for coinbase tx\n-    nBlockWeight = m_options.coinbase_max_additional_weight;\n-    nBlockSigOpsCost = m_options.coinbase_output_max_additional_sigops;\n-\n     // These counters do not include coinbase tx\n+    nBlockWeight = 0;\n+    nBlockSigOpsCost = 0;",
      "path": "src/node/miner.cpp",
      "position": 34,
      "original_position": 11,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "e504d15cfb4c0b6ed67c46f5aecc47980f233bcb",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Does this have an effect on the log line in `miner.cpp::158`? Maybe clarify there that the numbers are given without the coinbase?",
      "created_at": "2025-01-05T13:55:50Z",
      "updated_at": "2025-01-05T14:06:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903276616",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903276616"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903278355",
      "pull_request_review_id": 2530880952,
      "id": 1903278355,
      "node_id": "PRRC_kwDOABII585xcbkT",
      "diff_hunk": "@@ -0,0 +1,11 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+ The fix ensures the reservation happens in one place, but does not change the previous behaviour by setting the default\n+ to the previous value of `8,000`.\n+ However, this PR offers the advantage of overriding the default with a user-desired value and allow creating blocks",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 8,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm a bit confused by this second sentence. How does the behaviour introduced here allow for overriding the default?",
      "created_at": "2025-01-05T14:06:25Z",
      "updated_at": "2025-01-05T14:06:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1903278355",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1903278355"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904402308",
      "pull_request_review_id": 2532569808,
      "id": 1904402308,
      "node_id": "PRRC_kwDOABII585xgt-E",
      "diff_hunk": "@@ -190,6 +192,96 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], Decimal(\"0.0003\"), LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")\n+        self.send_transactions(utxos[LARGE_TXS_COUNT:LARGE_TXS_COUNT + 2], NORMAL_FEERATE, NORMAL_VSIZE)\n+\n+        # Check that the mempool contains all transactions\n+        self.log.info(f\"Testing that the mempool contains {LARGE_TXS_COUNT + 2} transactions.\")\n+        assert_equal(len(self.nodes[0].getrawmempool()), LARGE_TXS_COUNT + 2)\n+\n+        # Verify the block template includes only the 10 high-fee transactions\n+        self.log.info(\"Testing that the block template includes only the 10 large transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT,\n+        )\n+\n+        # Test block template creation with custom -blockmaxweight\n+        custom_block_weight = MAX_BLOCK_WEIGHT - 2000\n+        # Reducing the weight by 2000 units will prevent 1 large transaction from fitting into the block.\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\", f\"-blockmaxweight={custom_block_weight}\"])\n+\n+        self.log.info(\"Testing the block template with custom -blockmaxweight to include 9 large and 2 normal transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT + 1,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT - 2000,\n+        )\n+\n+        # Test that DEFAULT_COINBASE_TX_WEIGHT is always reserved",
      "path": "test/functional/mining_basic.py",
      "position": null,
      "original_position": 79,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "abefbd201d40912120332de9b95463ed040e39ed",
      "in_reply_to_id": 1903271412,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Is there a material difference between this test block and the previous one that actually exercises the default coinbase weight?\r\n\r\nThere is no any material difference, removed.\r\n\r\n>  Could more exact weight accounting where the total weight is checked with assert_equal instead of assert_greater_than_or_equal in verify_block_template be useful?\r\n\r\nIt would be useful, but the reason why I am not is because there is a little disparity between the target weight  and the actual weight.",
      "created_at": "2025-01-06T16:57:27Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904402308",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904402308"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 260,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904447430",
      "pull_request_review_id": 2532569808,
      "id": 1904447430,
      "node_id": "PRRC_kwDOABII585xg4_G",
      "diff_hunk": "@@ -190,6 +192,96 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], Decimal(\"0.0003\"), LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")\n+        self.send_transactions(utxos[LARGE_TXS_COUNT:LARGE_TXS_COUNT + 2], NORMAL_FEERATE, NORMAL_VSIZE)\n+\n+        # Check that the mempool contains all transactions\n+        self.log.info(f\"Testing that the mempool contains {LARGE_TXS_COUNT + 2} transactions.\")\n+        assert_equal(len(self.nodes[0].getrawmempool()), LARGE_TXS_COUNT + 2)\n+\n+        # Verify the block template includes only the 10 high-fee transactions\n+        self.log.info(\"Testing that the block template includes only the 10 large transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT,\n+        )\n+\n+        # Test block template creation with custom -blockmaxweight\n+        custom_block_weight = MAX_BLOCK_WEIGHT - 2000\n+        # Reducing the weight by 2000 units will prevent 1 large transaction from fitting into the block.\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\", f\"-blockmaxweight={custom_block_weight}\"])\n+\n+        self.log.info(\"Testing the block template with custom -blockmaxweight to include 9 large and 2 normal transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT + 1,",
      "path": "test/functional/mining_basic.py",
      "position": null,
      "original_position": 75,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "abefbd201d40912120332de9b95463ed040e39ed",
      "in_reply_to_id": 1903268301,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done.",
      "created_at": "2025-01-06T17:39:44Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904447430",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904447430"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 256,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904447541",
      "pull_request_review_id": 2532569808,
      "id": 1904447541,
      "node_id": "PRRC_kwDOABII585xg5A1",
      "diff_hunk": "@@ -190,6 +192,96 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], Decimal(\"0.0003\"), LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")",
      "path": "test/functional/mining_basic.py",
      "position": 65,
      "original_position": 54,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "abefbd201d40912120332de9b95463ed040e39ed",
      "in_reply_to_id": 1903265703,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2025-01-06T17:39:52Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904447541",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904447541"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 236,
      "original_line": 236,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904495041",
      "pull_request_review_id": 2532569808,
      "id": 1904495041,
      "node_id": "PRRC_kwDOABII585xhEnB",
      "diff_hunk": "@@ -96,12 +96,9 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n void BlockAssembler::resetBlock()\n {\n     inBlock.clear();\n-\n-    // Reserve space for coinbase tx\n-    nBlockWeight = m_options.coinbase_max_additional_weight;\n-    nBlockSigOpsCost = m_options.coinbase_output_max_additional_sigops;\n-\n     // These counters do not include coinbase tx\n+    nBlockWeight = 0;\n+    nBlockSigOpsCost = 0;",
      "path": "src/node/miner.cpp",
      "position": 34,
      "original_position": 11,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "e504d15cfb4c0b6ed67c46f5aecc47980f233bcb",
      "in_reply_to_id": 1903276616,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think it has.\r\n\r\nI've even modified it to also use the correct weight and clarify the log.",
      "created_at": "2025-01-06T18:28:45Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904495041",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904495041"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904495815",
      "pull_request_review_id": 2532569808,
      "id": 1904495815,
      "node_id": "PRRC_kwDOABII585xhEzH",
      "diff_hunk": "@@ -0,0 +1,11 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+ The fix ensures the reservation happens in one place, but does not change the previous behaviour by setting the default\n+ to the previous value of `8,000`.\n+ However, this PR offers the advantage of overriding the default with a user-desired value and allow creating blocks",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 8,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "in_reply_to_id": 1903278355,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is fixed now.",
      "created_at": "2025-01-06T18:29:36Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904495815",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904495815"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 8,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904497231",
      "pull_request_review_id": 2532569808,
      "id": 1904497231,
      "node_id": "PRRC_kwDOABII585xhFJP",
      "diff_hunk": "@@ -54,6 +55,7 @@\n #include <node/mempool_persist_args.h>\n #include <node/miner.h>\n #include <node/peerman_args.h>\n+#include <node/types.h> // for BlockCreateOptions",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a350a6796091030f90e485da97fa9e7b11023ccf",
      "in_reply_to_id": 1903257389,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "fixed",
      "created_at": "2025-01-06T18:31:02Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904497231",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904497231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 58,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904497444",
      "pull_request_review_id": 2532569808,
      "id": 1904497444,
      "node_id": "PRRC_kwDOABII585xhFMk",
      "diff_hunk": "@@ -647,7 +649,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n     argsman.AddArg(\"-whitelistrelay\", strprintf(\"Add 'relay' permission to whitelisted peers with default permissions. This will accept relayed transactions even when not relaying transactions (default: %d)\", DEFAULT_WHITELISTRELAY), ArgsManager::ALLOW_ANY, OptionsCategory::NODE_RELAY);\n \n \n-    argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d)\", DEFAULT_BLOCK_MAX_WEIGHT), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\n+    argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d). Note: default policy is to reserve %d weight units for coinbase transaction.\", MAX_BLOCK_WEIGHT, node::BlockCreateOptions{}.coinbase_max_additional_weight), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 21,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "cd48e2ccaf24c9594f5987a29e02b924573134ed",
      "in_reply_to_id": 1903255292,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is gone now.",
      "created_at": "2025-01-06T18:31:14Z",
      "updated_at": "2025-01-06T18:45:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904497444",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904497444"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 652,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904514447",
      "pull_request_review_id": 2532762241,
      "id": 1904514447,
      "node_id": "PRRC_kwDOABII585xhJWP",
      "diff_hunk": "@@ -0,0 +1,7 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where duplicate coinbase transaction weight reservation occurred. The `getblocktemplate` RPC will now correctly creates blocks with a weight of `3,996,000` weight units, reserving `4,000` weight units for the coinbase transaction.",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "f7a2f125c7b23c4c3c2e5253a6d3e2dcd8d3fe97",
      "in_reply_to_id": 1876176080,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "fixed. thanks @pinheadmz ",
      "created_at": "2025-01-06T18:49:19Z",
      "updated_at": "2025-01-06T18:49:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1904514447",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1904514447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 5,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905127347",
      "pull_request_review_id": 2533761935,
      "id": 1905127347,
      "node_id": "PRRC_kwDOABII585xje-z",
      "diff_hunk": "@@ -0,0 +1,12 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+  The fix ensures that the reservation happens in a single place.\n+\n+- This PR also introduces a new startup option, `-maxcoinbaseweight` (default: `8,000` weight units).\n+  All created block template will reserves the default or specified value for the miner coinbase transaction.",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 9,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "ededdd13f3263df08f7878aa2514d3796436cbfb",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ededdd13f3263df08f7878aa2514d3796436cbfb: maybe replace this line with:\r\n\r\n```md\r\nThis specifies how many weight units to reserve for\r\nthe coinbase transaction.\r\n\r\nUpgrade note: the default of `-maxcoinbaseweight`\r\nensures backward compatibility for users who did\r\nnot override `-blockmaxweight`. If you previously\r\nconfigured `-blockmaxweight=4000000` then you can\r\nsafely set `-maxcoinbaseweight=4000` to maintain\r\nexisting behavior.\r\n```",
      "created_at": "2025-01-07T09:07:40Z",
      "updated_at": "2025-01-07T12:29:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905127347",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905127347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 9,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905363548",
      "pull_request_review_id": 2533761935,
      "id": 1905363548,
      "node_id": "PRRC_kwDOABII585xkYpc",
      "diff_hunk": "@@ -148,9 +148,9 @@ FUZZ_TARGET(mini_miner_selection, .init = initialize_miner)\n             }\n         }\n \n-        // Stop if pool reaches DEFAULT_BLOCK_MAX_WEIGHT because BlockAssembler will stop when the\n+        // Stop if pool reaches MAX_BLOCK_WEIGHT because BlockAssembler will stop when the\n         // block template reaches that, but the MiniMiner will keep going.\n-        if (pool.GetTotalTxSize() + GetVirtualTransactionSize(*tx) >= DEFAULT_BLOCK_MAX_WEIGHT) break;\n+        if (pool.GetTotalTxSize() + GetVirtualTransactionSize(*tx) >= MAX_BLOCK_WEIGHT) break;",
      "path": "src/test/fuzz/mini_miner.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "354f41f5c76f5f43cbfdddb63660cc77c4a76989",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "354f41f5c76f5f43cbfdddb63660cc77c4a76989: I think this should be `MAX_BLOCK_WEIGHT - coinbase_max_additional_weight`, because later on this fuzzer adds a small coinbase transaction.\r\n\r\n(can probably just hardcode something like `- 4000`)",
      "created_at": "2025-01-07T12:09:53Z",
      "updated_at": "2025-01-07T12:29:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905363548",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905363548"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905367911",
      "pull_request_review_id": 2533761935,
      "id": 1905367911,
      "node_id": "PRRC_kwDOABII585xkZtn",
      "diff_hunk": "@@ -1017,6 +1017,13 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n         }\n     }\n \n+    if (args.IsArgSet(\"-blockmaxweight\")) {\n+        const auto customMaxBlockWeight = args.GetIntArg(\"-blockmaxweight\", MAX_BLOCK_WEIGHT);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "6cc658075e1be59ef49a060b36921538acf0edb1",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "6cc658075e1be59ef49a060b36921538acf0edb1 nit: current naming convention uses snake case. Maybe just use `max_block_weight`.",
      "created_at": "2025-01-07T12:14:06Z",
      "updated_at": "2025-01-07T12:29:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905367911",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905367911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1021,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905371266",
      "pull_request_review_id": 2533761935,
      "id": 1905371266,
      "node_id": "PRRC_kwDOABII585xkaiC",
      "diff_hunk": "@@ -158,7 +155,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     pblocktemplate->vchCoinbaseCommitment = m_chainstate.m_chainman.GenerateCoinbaseCommitment(*pblock, pindexPrev);\n     pblocktemplate->vTxFees[0] = -nFees;\n \n-    LogPrintf(\"CreateNewBlock(): block weight: %u txs: %u fees: %ld sigops %d\\n\", GetBlockWeight(*pblock), nBlockTx, nFees, nBlockSigOpsCost);\n+    LogPrintf(\"CreateNewBlock(): block weight: %u txs: %u fees: %ld sigops %d. (excluding coinbase transaction)\\n\", nBlockWeight, nBlockTx, nFees, nBlockSigOpsCost);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46: to keep log lines short, maybe say `(ex. coinbase)`. Maybe also move it left: `CreateNewBlock(): block weight (ex. coinbase): ...`",
      "created_at": "2025-01-07T12:17:08Z",
      "updated_at": "2025-01-07T12:29:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905371266",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905371266"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905381347",
      "pull_request_review_id": 2533761935,
      "id": 1905381347,
      "node_id": "PRRC_kwDOABII585xkc_j",
      "diff_hunk": "@@ -418,8 +418,8 @@ static RPCHelpMan getmininginfo()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM, \"blocks\", \"The current block\"},\n-                        {RPCResult::Type::NUM, \"currentblockweight\", /*optional=*/true, \"The block weight of the last assembled block (only present if a block was ever assembled)\"},\n-                        {RPCResult::Type::NUM, \"currentblocktx\", /*optional=*/true, \"The number of block transactions of the last assembled block (only present if a block was ever assembled)\"},\n+                        {RPCResult::Type::NUM, \"currentblockweight\", /*optional=*/true, \"The block weight (excluding coinbase transaction) of the last assembled block (only present if a block was ever assembled)\"},\n+                        {RPCResult::Type::NUM, \"currentblocktx\", /*optional=*/true, \"The number of block transactions (excluding coinbase transaction) of the last assembled block (only present if a block was ever assembled)\"},",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46 nit: `(excluding coinbase)`, since the description already says \"transactions\"",
      "created_at": "2025-01-07T12:26:00Z",
      "updated_at": "2025-01-07T12:29:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905381347",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905381347"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905948857",
      "pull_request_review_id": 2535210699,
      "id": 1905948857,
      "node_id": "PRRC_kwDOABII585xmni5",
      "diff_hunk": "@@ -0,0 +1,12 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+  The fix ensures that the reservation happens in a single place.\n+\n+- This PR also introduces a new startup option, `-maxcoinbaseweight` (default: `8,000` weight units).\n+  All created block template will reserves the default or specified value for the miner coinbase transaction.",
      "path": "doc/release-notes-31384.md",
      "position": null,
      "original_position": 9,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "ededdd13f3263df08f7878aa2514d3796436cbfb",
      "in_reply_to_id": 1905127347,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-01-07T19:32:22Z",
      "updated_at": "2025-01-07T19:32:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905948857",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905948857"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 9,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905950341",
      "pull_request_review_id": 2535213286,
      "id": 1905950341,
      "node_id": "PRRC_kwDOABII585xmn6F",
      "diff_hunk": "@@ -148,9 +148,9 @@ FUZZ_TARGET(mini_miner_selection, .init = initialize_miner)\n             }\n         }\n \n-        // Stop if pool reaches DEFAULT_BLOCK_MAX_WEIGHT because BlockAssembler will stop when the\n+        // Stop if pool reaches MAX_BLOCK_WEIGHT because BlockAssembler will stop when the\n         // block template reaches that, but the MiniMiner will keep going.\n-        if (pool.GetTotalTxSize() + GetVirtualTransactionSize(*tx) >= DEFAULT_BLOCK_MAX_WEIGHT) break;\n+        if (pool.GetTotalTxSize() + GetVirtualTransactionSize(*tx) >= MAX_BLOCK_WEIGHT) break;",
      "path": "src/test/fuzz/mini_miner.cpp",
      "position": null,
      "original_position": 8,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "354f41f5c76f5f43cbfdddb63660cc77c4a76989",
      "in_reply_to_id": 1905363548,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nice catch, fixed but without hardcoding.\r\nThe comment above also needs to be updated, I did that.",
      "created_at": "2025-01-07T19:34:01Z",
      "updated_at": "2025-01-07T19:34:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905950341",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905950341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 153,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905950486",
      "pull_request_review_id": 2535213507,
      "id": 1905950486,
      "node_id": "PRRC_kwDOABII585xmn8W",
      "diff_hunk": "@@ -1017,6 +1017,13 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n         }\n     }\n \n+    if (args.IsArgSet(\"-blockmaxweight\")) {\n+        const auto customMaxBlockWeight = args.GetIntArg(\"-blockmaxweight\", MAX_BLOCK_WEIGHT);",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "6cc658075e1be59ef49a060b36921538acf0edb1",
      "in_reply_to_id": 1905367911,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done!",
      "created_at": "2025-01-07T19:34:10Z",
      "updated_at": "2025-01-07T19:34:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905950486",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905950486"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1021,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905950615",
      "pull_request_review_id": 2535213788,
      "id": 1905950615,
      "node_id": "PRRC_kwDOABII585xmn-X",
      "diff_hunk": "@@ -418,8 +418,8 @@ static RPCHelpMan getmininginfo()\n                     RPCResult::Type::OBJ, \"\", \"\",\n                     {\n                         {RPCResult::Type::NUM, \"blocks\", \"The current block\"},\n-                        {RPCResult::Type::NUM, \"currentblockweight\", /*optional=*/true, \"The block weight of the last assembled block (only present if a block was ever assembled)\"},\n-                        {RPCResult::Type::NUM, \"currentblocktx\", /*optional=*/true, \"The number of block transactions of the last assembled block (only present if a block was ever assembled)\"},\n+                        {RPCResult::Type::NUM, \"currentblockweight\", /*optional=*/true, \"The block weight (excluding coinbase transaction) of the last assembled block (only present if a block was ever assembled)\"},\n+                        {RPCResult::Type::NUM, \"currentblocktx\", /*optional=*/true, \"The number of block transactions (excluding coinbase transaction) of the last assembled block (only present if a block was ever assembled)\"},",
      "path": "src/rpc/mining.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46",
      "in_reply_to_id": 1905381347,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done!",
      "created_at": "2025-01-07T19:34:21Z",
      "updated_at": "2025-01-07T19:34:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905950615",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905950615"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 422,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905951876",
      "pull_request_review_id": 2535215964,
      "id": 1905951876,
      "node_id": "PRRC_kwDOABII585xmoSE",
      "diff_hunk": "@@ -158,7 +155,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     pblocktemplate->vchCoinbaseCommitment = m_chainstate.m_chainman.GenerateCoinbaseCommitment(*pblock, pindexPrev);\n     pblocktemplate->vTxFees[0] = -nFees;\n \n-    LogPrintf(\"CreateNewBlock(): block weight: %u txs: %u fees: %ld sigops %d\\n\", GetBlockWeight(*pblock), nBlockTx, nFees, nBlockSigOpsCost);\n+    LogPrintf(\"CreateNewBlock(): block weight: %u txs: %u fees: %ld sigops %d. (excluding coinbase transaction)\\n\", nBlockWeight, nBlockTx, nFees, nBlockSigOpsCost);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46",
      "in_reply_to_id": 1905371266,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think ex. is ambiguous so I shortened it by writing tx instead of transaction.\r\n\r\nAlso this is not logged frequently, only by miners I think.",
      "created_at": "2025-01-07T19:35:37Z",
      "updated_at": "2025-01-07T19:35:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1905951876",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1905951876"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1906965234",
      "pull_request_review_id": 2536773726,
      "id": 1906965234,
      "node_id": "PRRC_kwDOABII585xqfry",
      "diff_hunk": "@@ -158,7 +155,7 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock(const CScript& sc\n     pblocktemplate->vchCoinbaseCommitment = m_chainstate.m_chainman.GenerateCoinbaseCommitment(*pblock, pindexPrev);\n     pblocktemplate->vTxFees[0] = -nFees;\n \n-    LogPrintf(\"CreateNewBlock(): block weight: %u txs: %u fees: %ld sigops %d\\n\", GetBlockWeight(*pblock), nBlockTx, nFees, nBlockSigOpsCost);\n+    LogPrintf(\"CreateNewBlock(): block weight: %u txs: %u fees: %ld sigops %d. (excluding coinbase transaction)\\n\", nBlockWeight, nBlockTx, nFees, nBlockSigOpsCost);",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "76a95522b322c1a8ab1594ca8bf5ac99ab379c46",
      "in_reply_to_id": 1905371266,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "With #31283 this will be logged every second (by miners). ",
      "created_at": "2025-01-08T10:30:20Z",
      "updated_at": "2025-01-08T10:30:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1906965234",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1906965234"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1906977462",
      "pull_request_review_id": 2536792956,
      "id": 1906977462,
      "node_id": "PRRC_kwDOABII585xqiq2",
      "diff_hunk": "@@ -0,0 +1,17 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+  The fix ensures that the reservation happens in a single place.\n+",
      "path": "doc/release-notes-31384.md",
      "position": 7,
      "original_position": 7,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "7452638559e8ccbe00db5ef5a53cb21ffe27d337",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You lost a line here:\r\n\r\n```md\r\n- This PR also introduces a new startup option, `-maxcoinbaseweight` (default: `8,000` weight units).\r\n```",
      "created_at": "2025-01-08T10:39:10Z",
      "updated_at": "2025-01-08T10:39:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1906977462",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1906977462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907228559",
      "pull_request_review_id": 2537224113,
      "id": 1907228559,
      "node_id": "PRRC_kwDOABII585xrf-P",
      "diff_hunk": "@@ -0,0 +1,17 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+  The fix ensures that the reservation happens in a single place.\n+",
      "path": "doc/release-notes-31384.md",
      "position": 7,
      "original_position": 7,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "7452638559e8ccbe00db5ef5a53cb21ffe27d337",
      "in_reply_to_id": 1906977462,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed in latest push https://github.com/bitcoin/bitcoin/compare/7452638559e8ccbe00db5ef5a53cb21ffe27d337..2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "created_at": "2025-01-08T13:59:16Z",
      "updated_at": "2025-01-08T13:59:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907228559",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907228559"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 7,
      "original_line": 7,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907760169",
      "pull_request_review_id": 2538119452,
      "id": 1907760169,
      "node_id": "PRRC_kwDOABII585xthwp",
      "diff_hunk": "@@ -190,6 +192,87 @@ def test_pruning(self):\n         assert_equal(result, \"inconclusive\")\n         assert_equal(prune_node.getblock(pruned_blockhash, verbosity=0), pruned_block)\n \n+\n+    def send_transactions(self, utxos, fee_rate, target_vsize):\n+        \"\"\"\n+        Helper to create and send transactions with the specified target virtual size and fee rate.\n+        \"\"\"\n+        for utxo in utxos:\n+            self.wallet.send_self_transfer(\n+                from_node=self.nodes[0],\n+                utxo_to_spend=utxo,\n+                target_vsize=target_vsize,\n+                fee_rate=fee_rate,\n+            )\n+\n+    def verify_block_template(self, expected_tx_count, expected_weight):\n+        \"\"\"\n+        Create a block template and check that it satisfies the expected transaction count and total weight.\n+        \"\"\"\n+        response = self.nodes[0].getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        self.log.info(f\"Testing block template: contains {expected_tx_count} transactions, and total weight <= {expected_weight}\")\n+        assert_equal(len(response[\"transactions\"]), expected_tx_count)\n+        total_weight = sum(transaction[\"weight\"] for transaction in response[\"transactions\"])\n+        assert_greater_than_or_equal(expected_weight, total_weight)\n+\n+    def test_block_max_weight(self):\n+        self.log.info(\"Testing default and custom -blockmaxweight startup options.\")\n+\n+        # Restart the node to allow large transactions\n+        LARGE_TXS_COUNT = 10\n+        LARGE_VSIZE = int(((MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT) / WITNESS_SCALE_FACTOR) / LARGE_TXS_COUNT)\n+        HIGH_FEERATE = Decimal(\"0.0003\")\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\"])\n+\n+        # Ensure the mempool is empty\n+        assert_equal(len(self.nodes[0].getrawmempool()), 0)\n+\n+        # Generate UTXOs and send 10 large transactions with a high fee rate\n+        utxos = [self.wallet.get_utxo(confirmed_only=True) for _ in range(LARGE_TXS_COUNT + 4)] # Add 4 more utxos that will be used in the test later\n+        self.send_transactions(utxos[:LARGE_TXS_COUNT], HIGH_FEERATE, LARGE_VSIZE)\n+\n+        # Send 2 normal transactions with a lower fee rate\n+        NORMAL_VSIZE = int(2000 / WITNESS_SCALE_FACTOR)\n+        NORMAL_FEERATE = Decimal(\"0.0001\")\n+        self.send_transactions(utxos[LARGE_TXS_COUNT:LARGE_TXS_COUNT + 2], NORMAL_FEERATE, NORMAL_VSIZE)\n+\n+        # Check that the mempool contains all transactions\n+        self.log.info(f\"Testing that the mempool contains {LARGE_TXS_COUNT + 2} transactions.\")\n+        assert_equal(len(self.nodes[0].getrawmempool()), LARGE_TXS_COUNT + 2)\n+\n+        # Verify the block template includes only the 10 high-fee transactions\n+        self.log.info(\"Testing that the block template includes only the 10 large transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=LARGE_TXS_COUNT,\n+            expected_weight=MAX_BLOCK_WEIGHT - DEFAULT_COINBASE_TX_WEIGHT,\n+        )\n+\n+        # Test block template creation with custom -blockmaxweight\n+        custom_block_weight = MAX_BLOCK_WEIGHT - 2000\n+        # Reducing the weight by 2000 units will prevent 1 large transaction from fitting into the block.\n+        self.restart_node(0, extra_args=[f\"-datacarriersize={LARGE_VSIZE}\", f\"-blockmaxweight={custom_block_weight}\"])\n+\n+        self.log.info(\"Testing the block template with custom -blockmaxweight to include 9 large and 2 normal transactions.\")\n+        self.verify_block_template(\n+            expected_tx_count=11,",
      "path": "test/functional/mining_basic.py",
      "position": 86,
      "original_position": 76,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b55bb95d8d80175f30d2d4da5c6cfd72e5d8eedd\r\n\r\nnit: could be `LARGE_TXS_COUNT + 1` to make it clear the difference from previous template",
      "created_at": "2025-01-08T20:01:09Z",
      "updated_at": "2025-01-08T20:28:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907760169",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907760169"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 257,
      "original_line": 257,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907807887",
      "pull_request_review_id": 2538119452,
      "id": 1907807887,
      "node_id": "PRRC_kwDOABII585xttaP",
      "diff_hunk": "@@ -650,6 +650,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n \n \n     argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d).\", MAX_BLOCK_WEIGHT), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\n+    argsman.AddArg(\"-maxcoinbaseweight=<n>\", strprintf(\"Set the block maximum reserved coinbase transaction weight (default: %d).\", node::BlockCreateOptions{}.coinbase_max_additional_weight), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);",
      "path": "src/init.cpp",
      "position": 22,
      "original_position": 4,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d\r\n\r\nQuestion about this phrasing: what is \"maximum\" about it? If a user sets `-maxcoinbaseweight=1000` then 1000 weight will always be reserved in block templates, and if the actual coinbase ends up being 50 weight instead of 1000 that extra weight will just be unused and the final block will be smaller than maximum size. ",
      "created_at": "2025-01-08T20:17:39Z",
      "updated_at": "2025-01-08T20:28:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907807887",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907807887"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 653,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907812521",
      "pull_request_review_id": 2538119452,
      "id": 1907812521,
      "node_id": "PRRC_kwDOABII585xtuip",
      "diff_hunk": "@@ -1024,6 +1025,13 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n         }\n     }\n \n+    if (args.IsArgSet(\"-maxcoinbaseweight\")) {\n+        const auto max_coinbase_weight = args.GetIntArg(\"-maxcoinbaseweight\", node::BlockCreateOptions{}.coinbase_max_additional_weight);\n+        if (max_coinbase_weight > MAX_BLOCK_WEIGHT) {",
      "path": "src/init.cpp",
      "position": 39,
      "original_position": 14,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d\r\n\r\nShould this test against `args.GetIntArg(\"-blockmaxweight\", MAX_BLOCK_WEIGHT)` ? Or, what happens if a user sets `-blockmaxweight=1000 -maxcoinbaseweight=4000` ?",
      "created_at": "2025-01-08T20:19:04Z",
      "updated_at": "2025-01-08T20:28:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907812521",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907812521"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1030,
      "original_line": 1030,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907817185",
      "pull_request_review_id": 2538119452,
      "id": 1907817185,
      "node_id": "PRRC_kwDOABII585xtvrh",
      "diff_hunk": "@@ -0,0 +1,16 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+  The fix ensures that the reservation happens in a single place.\n+\n+- This PR also introduces a new startup option, `-maxcoinbaseweight` (default: `8,000` weight units).\n+  This specifies how many weight units to reserve for the coinbase transaction.\n+- Upgrade note: the default of `-maxcoinbaseweight` ensures backward compatibility for users who did\n+  not override `-blockmaxweight`.",
      "path": "doc/release-notes-31384.md",
      "position": 11,
      "original_position": 11,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "in_reply_to_id": null,
      "user": {
        "login": "pinheadmz",
        "id": 2084648,
        "node_id": "MDQ6VXNlcjIwODQ2NDg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2084648?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pinheadmz",
        "html_url": "https://github.com/pinheadmz",
        "followers_url": "https://api.github.com/users/pinheadmz/followers",
        "following_url": "https://api.github.com/users/pinheadmz/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pinheadmz/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pinheadmz/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pinheadmz/subscriptions",
        "organizations_url": "https://api.github.com/users/pinheadmz/orgs",
        "repos_url": "https://api.github.com/users/pinheadmz/repos",
        "events_url": "https://api.github.com/users/pinheadmz/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pinheadmz/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "2fb833e69627a8f9b1c4b14b60d1df9903adf210\r\n\r\nYou might want to mention the old default of `3996000` here. I was staring at `blockmaxweight=4000000` on the following line for a minute trying to figure out what actually changed.",
      "created_at": "2025-01-08T20:22:39Z",
      "updated_at": "2025-01-08T20:28:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907817185",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907817185"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 11,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907983031",
      "pull_request_review_id": 2538478813,
      "id": 1907983031,
      "node_id": "PRRC_kwDOABII585xuYK3",
      "diff_hunk": "@@ -90,18 +90,17 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n     if (const auto blockmintxfee{args.GetArg(\"-blockmintxfee\")}) {\n         if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\n     }\n+\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\n+    options.coinbase_max_additional_weight = args.GetIntArg(\"-maxcoinbaseweight\", options.coinbase_max_additional_weight);\n }\n \n void BlockAssembler::resetBlock()\n {\n     inBlock.clear();\n-\n-    // Reserve space for coinbase tx\n-    nBlockWeight = m_options.coinbase_max_additional_weight;\n-    nBlockSigOpsCost = m_options.coinbase_output_max_additional_sigops;\n-\n     // These counters do not include coinbase tx\n+    nBlockWeight = 0;\n+    nBlockSigOpsCost = 0;",
      "path": "src/node/miner.cpp",
      "position": 34,
      "original_position": 34,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This changes the meaning of `getmininginfo` fields unexpectedly, and forces us to add in the coinbase reserved size over and over. Seems like it would be better to include it here once.",
      "created_at": "2025-01-08T23:39:36Z",
      "updated_at": "2025-01-08T23:41:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907983031",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907983031"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": 102,
      "original_start_line": 102,
      "start_side": "RIGHT",
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907984056",
      "pull_request_review_id": 2538478813,
      "id": 1907984056,
      "node_id": "PRRC_kwDOABII585xuYa4",
      "diff_hunk": "@@ -19,8 +19,6 @@ class CCoinsViewCache;\n class CFeeRate;\n class CScript;\n \n-/** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static constexpr unsigned int DEFAULT_BLOCK_MAX_WEIGHT{MAX_BLOCK_WEIGHT - 4000};",
      "path": "src/policy/policy.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "in_reply_to_id": null,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This should remain logically separate from consensus constant.",
      "created_at": "2025-01-08T23:41:15Z",
      "updated_at": "2025-01-08T23:41:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1907984056",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1907984056"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908512682",
      "pull_request_review_id": 2539497409,
      "id": 1908512682,
      "node_id": "PRRC_kwDOABII585xwZeq",
      "diff_hunk": "@@ -0,0 +1,16 @@\n+- Node and Mining\n+\n+---\n+\n+- PR #31384 fixed an issue where the coinbase transaction weight was being reserved in two different places.\n+  The fix ensures that the reservation happens in a single place.\n+\n+- This PR also introduces a new startup option, `-maxcoinbaseweight` (default: `8,000` weight units).\n+  This specifies how many weight units to reserve for the coinbase transaction.\n+- Upgrade note: the default of `-maxcoinbaseweight` ensures backward compatibility for users who did\n+  not override `-blockmaxweight`.",
      "path": "doc/release-notes-31384.md",
      "position": 11,
      "original_position": 11,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "in_reply_to_id": 1907817185,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good point, maybe add:\r\n\r\n```\r\nThe previous `-blockmaxweight` default was `3,996,000`. The block\r\ntemplate construction code added an additional `4,000` padding.\r\nThe new default `-maxcoinbaseweight` value was chosen to maintain\r\nthat behaviour.\r\n```",
      "created_at": "2025-01-09T10:29:07Z",
      "updated_at": "2025-01-09T10:29:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908512682",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908512682"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 11,
      "original_line": 11,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908514307",
      "pull_request_review_id": 2539501909,
      "id": 1908514307,
      "node_id": "PRRC_kwDOABII585xwZ4D",
      "diff_hunk": "@@ -650,6 +650,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n \n \n     argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d).\", MAX_BLOCK_WEIGHT), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\n+    argsman.AddArg(\"-maxcoinbaseweight=<n>\", strprintf(\"Set the block maximum reserved coinbase transaction weight (default: %d).\", node::BlockCreateOptions{}.coinbase_max_additional_weight), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);",
      "path": "src/init.cpp",
      "position": 22,
      "original_position": 4,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "in_reply_to_id": 1907807887,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Correct.\r\n\r\n\"max\" in the variable name refers to the maximum coinbase weight that a pool can add. So \"maximum reservation\" is perhaps not the best wording. Maybe try:\r\n\r\n```\r\nReserve space to account for the largest coinbase transaction\r\nthat mining software may add to the block.\r\n```",
      "created_at": "2025-01-09T10:30:20Z",
      "updated_at": "2025-01-09T10:34:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908514307",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908514307"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 653,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908522924",
      "pull_request_review_id": 2539526887,
      "id": 1908522924,
      "node_id": "PRRC_kwDOABII585xwb-s",
      "diff_hunk": "@@ -1024,6 +1025,13 @@ bool AppInitParameterInteraction(const ArgsManager& args)\n         }\n     }\n \n+    if (args.IsArgSet(\"-maxcoinbaseweight\")) {\n+        const auto max_coinbase_weight = args.GetIntArg(\"-maxcoinbaseweight\", node::BlockCreateOptions{}.coinbase_max_additional_weight);\n+        if (max_coinbase_weight > MAX_BLOCK_WEIGHT) {",
      "path": "src/init.cpp",
      "position": 39,
      "original_position": 14,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "in_reply_to_id": 1907812521,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Current `ClampOptions` in `node/miner.cpp` has a comment that specifically permits `-maxcoinbaseweight` to exceed `-blockmaxweight`. It just means that all blocks will be empty. This seems like an unrealistic scenario anyway.",
      "created_at": "2025-01-09T10:36:57Z",
      "updated_at": "2025-01-09T10:37:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908522924",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908522924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1030,
      "original_line": 1030,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908533084",
      "pull_request_review_id": 2539553566,
      "id": 1908533084,
      "node_id": "PRRC_kwDOABII585xwedc",
      "diff_hunk": "@@ -90,18 +90,17 @@ void ApplyArgsManOptions(const ArgsManager& args, BlockAssembler::Options& optio\n     if (const auto blockmintxfee{args.GetArg(\"-blockmintxfee\")}) {\n         if (const auto parsed{ParseMoney(*blockmintxfee)}) options.blockMinFeeRate = CFeeRate{*parsed};\n     }\n+\n     options.print_modified_fee = args.GetBoolArg(\"-printpriority\", options.print_modified_fee);\n+    options.coinbase_max_additional_weight = args.GetIntArg(\"-maxcoinbaseweight\", options.coinbase_max_additional_weight);\n }\n \n void BlockAssembler::resetBlock()\n {\n     inBlock.clear();\n-\n-    // Reserve space for coinbase tx\n-    nBlockWeight = m_options.coinbase_max_additional_weight;\n-    nBlockSigOpsCost = m_options.coinbase_output_max_additional_sigops;\n-\n     // These counters do not include coinbase tx\n+    nBlockWeight = 0;\n+    nBlockSigOpsCost = 0;",
      "path": "src/node/miner.cpp",
      "position": 34,
      "original_position": 34,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "in_reply_to_id": 1907983031,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I agree we should not change the `weight`, `currentblockweight` and `sigops` fields in `getblocktemplate` and `getmininginfo`.\r\n\r\nWe could either adjust the value in the RPC code, or as @luke-jr suggests restore the original behavior here.\r\n\r\nAdditionally we should clarify the help text for these RPC methods that they include the coinbase reserved weight.\r\n\r\nIt currently says: \"as counted for purposes of block limits\", which is still a bit ambiguous so maybe add: \", including the coinbase reservation (see -maxcoinbaseweight).\"",
      "created_at": "2025-01-09T10:44:20Z",
      "updated_at": "2025-01-09T10:47:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908533084",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908533084"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": 102,
      "original_start_line": 102,
      "start_side": "RIGHT",
      "line": 103,
      "original_line": 103,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908538059",
      "pull_request_review_id": 2539568049,
      "id": 1908538059,
      "node_id": "PRRC_kwDOABII585xwfrL",
      "diff_hunk": "@@ -650,6 +650,7 @@ void SetupServerArgs(ArgsManager& argsman, bool can_listen_ipc)\n \n \n     argsman.AddArg(\"-blockmaxweight=<n>\", strprintf(\"Set maximum BIP141 block weight (default: %d).\", MAX_BLOCK_WEIGHT), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);\n+    argsman.AddArg(\"-maxcoinbaseweight=<n>\", strprintf(\"Set the block maximum reserved coinbase transaction weight (default: %d).\", node::BlockCreateOptions{}.coinbase_max_additional_weight), ArgsManager::ALLOW_ANY, OptionsCategory::BLOCK_CREATION);",
      "path": "src/init.cpp",
      "position": 22,
      "original_position": 4,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "a45af6af4e7a59cd14ef6e16b8e5e180fa9d564d",
      "in_reply_to_id": 1907807887,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Perhaps `-coinbaseweightreservation` / `-coinbasereservedweight`  is a better name.",
      "created_at": "2025-01-09T10:48:14Z",
      "updated_at": "2025-01-09T10:49:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908538059",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908538059"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 653,
      "original_line": 653,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908542626",
      "pull_request_review_id": 2539575298,
      "id": 1908542626,
      "node_id": "PRRC_kwDOABII585xwgyi",
      "diff_hunk": "@@ -19,8 +19,6 @@ class CCoinsViewCache;\n class CFeeRate;\n class CScript;\n \n-/** Default for -blockmaxweight, which controls the range of block weights the mining code will create **/\n-static constexpr unsigned int DEFAULT_BLOCK_MAX_WEIGHT{MAX_BLOCK_WEIGHT - 4000};",
      "path": "src/policy/policy.h",
      "position": 5,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "in_reply_to_id": 1907984056,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Seems reasonable to keep and just make it `DEFAULT_BLOCK_MAX_WEIGHT{MAX_BLOCK_WEIGHT};`",
      "created_at": "2025-01-09T10:50:57Z",
      "updated_at": "2025-01-09T10:50:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908542626",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908542626"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 23,
      "original_line": 23,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908547490",
      "pull_request_review_id": 2539581767,
      "id": 1908547490,
      "node_id": "PRRC_kwDOABII585xwh-i",
      "diff_hunk": "@@ -68,7 +68,7 @@ def mine_chain(self):\n         mining_info = self.nodes[0].getmininginfo()\n         assert_equal(mining_info['blocks'], 200)\n         assert_equal(mining_info['currentblocktx'], 0)\n-        assert_equal(mining_info['currentblockweight'], 4000)\n+        assert_equal(mining_info['currentblockweight'], 0)",
      "path": "test/functional/mining_basic.py",
      "position": 16,
      "original_position": 5,
      "commit_id": "2fb833e69627a8f9b1c4b14b60d1df9903adf210",
      "original_commit_id": "74a5d7bf4b1d70a51274969a7e74194bf5000e57",
      "in_reply_to_id": 1863522185,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sorry, I think @luke-jr is right and we shouldn't change this: https://github.com/bitcoin/bitcoin/pull/31384/files#r1908533084",
      "created_at": "2025-01-09T10:53:16Z",
      "updated_at": "2025-01-09T10:53:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31384#discussion_r1908547490",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1908547490"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31384"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    }
  ]
}