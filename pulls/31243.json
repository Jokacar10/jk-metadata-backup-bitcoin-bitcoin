{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243",
    "id": 2167890501,
    "node_id": "PR_kwDOABII586BN2JF",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31243",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31243.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31243.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31243",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31243/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/acee5c59e68f31acba111bc4d1892b08243ea5e0",
    "number": 31243,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "descriptor: Move filling of keys from `DescriptorImpl::MakeScripts` to `PubkeyProvider::GetPubKey`",
    "user": {
      "login": "achow101",
      "id": 3782274,
      "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/achow101",
      "html_url": "https://github.com/achow101",
      "followers_url": "https://api.github.com/users/achow101/followers",
      "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
      "organizations_url": "https://api.github.com/users/achow101/orgs",
      "repos_url": "https://api.github.com/users/achow101/repos",
      "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/achow101/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Instead of having `MakeScripts` infer what pubkeys need to go into the output `FlatSigningProvider`, have each of the `PubkeyProviders` that have `GetPubKey` and `GetPrivKey` called fill it directly with relevant keys and origins.\r\n\r\nThis allows for keys and origins to be added that won't directly appear in the output, which is necessary for `musig()` descriptors.\r\n\r\nSplit from #29675",
    "labels": [
      {
        "id": 1482182044,
        "node_id": "MDU6TGFiZWwxNDgyMTgyMDQ0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Descriptors",
        "name": "Descriptors",
        "description": "",
        "color": "e9f76c",
        "default": false
      }
    ],
    "created_at": "2024-11-07T16:56:35Z",
    "updated_at": "2025-04-18T12:02:54Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "62cfa76d0f63b9364c85ba3c209a246f534f9cb8",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "achow101:descriptor-direct-fill",
      "ref": "descriptor-direct-fill",
      "sha": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 45006379,
        "node_id": "MDEwOlJlcG9zaXRvcnk0NTAwNjM3OQ==",
        "name": "bitcoin",
        "full_name": "achow101/bitcoin",
        "owner": {
          "login": "achow101",
          "id": 3782274,
          "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/achow101",
          "html_url": "https://github.com/achow101",
          "followers_url": "https://api.github.com/users/achow101/followers",
          "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
          "organizations_url": "https://api.github.com/users/achow101/orgs",
          "repos_url": "https://api.github.com/users/achow101/repos",
          "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/achow101/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/achow101/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/achow101/bitcoin",
        "archive_url": "https://api.github.com/repos/achow101/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/achow101/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/achow101/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/achow101/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/achow101/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/achow101/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/achow101/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/achow101/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/achow101/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/achow101/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/achow101/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/achow101/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/achow101/bitcoin/events",
        "forks_url": "https://api.github.com/repos/achow101/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/achow101/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/achow101/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/achow101/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/achow101/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/achow101/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/achow101/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/achow101/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/achow101/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/achow101/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/achow101/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/achow101/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/achow101/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/achow101/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/achow101/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/achow101/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:achow101/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/achow101/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/achow101/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/achow101/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/achow101/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/achow101/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/achow101/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/achow101/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/achow101/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/achow101/bitcoin/hooks",
        "svn_url": "https://github.com/achow101/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 8,
        "stargazers_count": 41,
        "watchers_count": 41,
        "size": 293766,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-17T23:32:08Z",
        "created_at": "2015-10-27T00:20:28Z",
        "updated_at": "2025-02-15T19:03:22Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "99a4ddf5ab1b3e514d08b90ad8565827fda7b63b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37075,
        "stargazers_count": 82946,
        "watchers_count": 82946,
        "size": 279879,
        "default_branch": "master",
        "open_issues_count": 703,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-17T17:51:44Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-18T10:19:12Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 94,
    "deletions": 75,
    "changed_files": 4,
    "commits": 5,
    "review_comments": 59,
    "comments": 3
  },
  "events": [
    {
      "event": "commented",
      "id": 2462762854,
      "node_id": "IC_kwDOABII586Sysdm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2462762854",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-11-07T16:56:38Z",
      "updated_at": "2025-04-18T12:01:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31243.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [fjahr](https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2778403152) |\n| Concept ACK | [Sjors](https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2583927266) |\n| Stale ACK | [theStack](https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2624210415) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31244](https://github.com/bitcoin/bitcoin/pull/31244) (descriptors: MuSig2 by achow101)\n* [#29675](https://github.com/bitcoin/bitcoin/pull/29675) (wallet: Be able to receive and spend inputs involving MuSig2 aggregate keys by achow101)\n* [#28710](https://github.com/bitcoin/bitcoin/pull/28710) (Remove the legacy wallet and BDB dependency by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#issuecomment-2462762854",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31243"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15187213450,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAOJOnyK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15187213450",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "f50470e33c1bb51531f3fa08f6d29c54df304d6b",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/f50470e33c1bb51531f3fa08f6d29c54df304d6b",
      "created_at": "2024-11-07T17:11:19Z"
    },
    {
      "event": "reviewed",
      "id": 2436530611,
      "node_id": "PRR_kwDOABII586ROoGz",
      "url": null,
      "actor": null,
      "commit_id": "f50470e33c1bb51531f3fa08f6d29c54df304d6b",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code-review ACK f50470e33c1bb51531f3fa08f6d29c54df304d6b\r\n\r\nTo my understanding, the second and fourth commits (db270fa2a33d7c88e58682ab8a219a2e70503c9e and f50470e33c1bb51531f3fa08f6d29c54df304d6b) are pure refactors, while the third one actually changes behaviour for `Descriptor::Expand` call-sites w.r.t. by returning more public key data than before (stored in the `FlatSigningProvider& out` parameter), so the first commit (d1be90704559da45e4d76171230ecb9f4a6d9cf8) is needed to avoid breaking the `importmulti` RPC call behaviour. Without that, the _\"Imported scripts with pubkeys should not have their pubkeys go into the keypool\"_ sub-test in `wallet_importmulti.py` fails.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2436530611",
      "submitted_at": "2024-11-17T16:31:13Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 15352708850,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAOTF77y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/15352708850",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "186bc75985a0afa96eba3c5bfea09e22fe3ec2c8",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/186bc75985a0afa96eba3c5bfea09e22fe3ec2c8",
      "created_at": "2024-11-19T17:03:34Z"
    },
    {
      "event": "reviewed",
      "id": 2446762914,
      "node_id": "PRR_kwDOABII586R1qOi",
      "url": null,
      "actor": null,
      "commit_id": "186bc75985a0afa96eba3c5bfea09e22fe3ec2c8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 186bc75985a0afa96eba3c5bfea09e22fe3ec2c8 🗒️ ",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2446762914",
      "submitted_at": "2024-11-19T22:15:54Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "labeled",
      "id": 16013449091,
      "node_id": "LE_lADOABII586ddC-CzwAAAAO6edeD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16013449091",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T12:17:51Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2525710496,
      "node_id": "PRR_kwDOABII586Wi0ig",
      "url": null,
      "actor": null,
      "commit_id": "186bc75985a0afa96eba3c5bfea09e22fe3ec2c8",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Apparently I started to review and got pinged now because of the rebase message. Leaving these nits here in case you want to address them in the rebase. Will look at this again soon.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2525710496",
      "submitted_at": "2025-01-21T13:07:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16019710325,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAO62WF1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16019710325",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "created_at": "2025-01-21T20:15:06Z"
    },
    {
      "event": "unlabeled",
      "id": 16020176495,
      "node_id": "UNLE_lADOABII586ddC-CzwAAAAO64H5v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16020176495",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-21T21:03:13Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2583927266,
      "node_id": "PRR_kwDOABII586aA5ni",
      "url": null,
      "actor": null,
      "commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nMostly happy with 1bfabb4f4ec07c8fb0dfc2515d413b5196e01348, but  I'm confused about the key origin handling.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2583927266",
      "submitted_at": "2025-01-30T14:33:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "unsubscribed",
      "id": 16129577140,
      "node_id": "UE_lADOABII586ddC-CzwAAAAPBZdC0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16129577140",
      "actor": {
        "login": "PRADACANDI18",
        "id": 91190628,
        "node_id": "MDQ6VXNlcjkxMTkwNjI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/91190628?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/PRADACANDI18",
        "html_url": "https://github.com/PRADACANDI18",
        "followers_url": "https://api.github.com/users/PRADACANDI18/followers",
        "following_url": "https://api.github.com/users/PRADACANDI18/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/PRADACANDI18/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/PRADACANDI18/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/PRADACANDI18/subscriptions",
        "organizations_url": "https://api.github.com/users/PRADACANDI18/orgs",
        "repos_url": "https://api.github.com/users/PRADACANDI18/repos",
        "events_url": "https://api.github.com/users/PRADACANDI18/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/PRADACANDI18/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T20:15:03Z"
    },
    {
      "event": "reviewed",
      "id": 2588404383,
      "node_id": "PRR_kwDOABII586aR-qf",
      "url": null,
      "actor": null,
      "commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\nEverything besides my `GetPrivKey` question looks good to me. Will do a final pass once I get an answer there.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2588404383",
      "submitted_at": "2025-02-01T21:01:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "reviewed",
      "id": 2624210415,
      "node_id": "PRR_kwDOABII586cakXv",
      "url": null,
      "actor": null,
      "commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2624210415",
      "submitted_at": "2025-02-18T16:37:15Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "review_requested",
      "id": 16351565840,
      "node_id": "RRE_lADOABII586ddC-CzwAAAAPOoRgQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16351565840",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-18T16:37:19Z",
      "requested_reviewer": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 16351566006,
      "node_id": "RRE_lADOABII586ddC-CzwAAAAPOoRi2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16351566006",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-18T16:37:20Z",
      "requested_reviewer": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2701945658,
      "node_id": "IC_kwDOABII586hDGs6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2701945658",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-05T20:04:42Z",
      "updated_at": "2025-03-05T20:04:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "utACK 1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#issuecomment-2701945658",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31243"
    },
    {
      "event": "reviewed",
      "id": 2664201741,
      "node_id": "PRR_kwDOABII586ezH4N",
      "url": null,
      "actor": null,
      "commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Few initial comments, I would like to spend more time on this PR to complete the review.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2664201741",
      "submitted_at": "2025-03-06T13:15:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16620856175,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAPeriNv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16620856175",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4e0de38013035699889db396856200a217c934b2",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/4e0de38013035699889db396856200a217c934b2",
      "created_at": "2025-03-06T17:24:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16620910277,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAPervbF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16620910277",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/72694b8d1a9863771cf1095037caeafb3f1a5635",
      "created_at": "2025-03-06T17:28:32Z"
    },
    {
      "event": "reviewed",
      "id": 2669096676,
      "node_id": "PRR_kwDOABII586fFy7k",
      "url": null,
      "actor": null,
      "commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Few comments, mostly LGTM.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2669096676",
      "submitted_at": "2025-03-10T10:47:34Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "labeled",
      "id": 16899807561,
      "node_id": "LE_lADOABII586ddC-CzwAAAAPvTplJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16899807561",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-20T10:16:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17214089938,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAQCCirS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17214089938",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "2f28f28f845a910e18939455079631f96d69acac",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/2f28f28f845a910e18939455079631f96d69acac",
      "created_at": "2025-04-10T21:38:35Z"
    },
    {
      "event": "unlabeled",
      "id": 17214951757,
      "node_id": "UNLE_lADOABII586ddC-CzwAAAAQCF1FN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17214951757",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-10T22:53:53Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17224090553,
      "node_id": "LE_lADOABII586ddC-CzwAAAAQCosO5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17224090553",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-11T13:38:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 17225215284,
      "node_id": "UNLE_lADOABII586ddC-CzwAAAAQCs-00",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17225215284",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-11T14:52:12Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17225245682,
      "node_id": "LE_lADOABII586ddC-CzwAAAAQCtGPy",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17225245682",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-11T14:54:29Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "unlabeled",
      "id": 17225246732,
      "node_id": "UNLE_lADOABII586ddC-CzwAAAAQCtGgM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17225246732",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-11T14:54:33Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 17225247665,
      "node_id": "LE_lADOABII586ddC-CzwAAAAQCtGux",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17225247665",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-11T14:54:36Z",
      "label": {
        "name": "Descriptors",
        "color": "e9f76c"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBmZjA3MmNhYTE0ZTRkMzJmNmY0MTE4ZjE1ZjRmMzcxOGNlZjFkNmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0ff072caa14e4d32f6f4118f15f4f3718cef1d6a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0ff072caa14e4d32f6f4118f15f4f3718cef1d6a",
      "tree": {
        "sha": "cd055fefde2577224bd5afa7634c3ff180d5a2b7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cd055fefde2577224bd5afa7634c3ff180d5a2b7"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99a4ddf5ab1b3e514d08b90ad8565827fda7b63b",
          "sha": "99a4ddf5ab1b3e514d08b90ad8565827fda7b63b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/99a4ddf5ab1b3e514d08b90ad8565827fda7b63b"
        }
      ],
      "message": "wallet, rpc: Only allow keypool import from single key descriptors\n\nLegacy wallets should only import keys to the keypool if they came in a\nsingle key descriptor. Instead of relying on assumptions about the\ndescriptor based on how many pubkeys show up after expanding the\ndescriptor, explicitly mark descriptors as being single key type and use\nthat for the check.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-04-14T23:32:01Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2024-01-23T00:00:31Z"
      },
      "sha": "0ff072caa14e4d32f6f4118f15f4f3718cef1d6a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDYyNjhiZGUwYWYwYWE5Y2ZiM2RmMDhkNmI5YjY3ZmRmZmEyYTFhMTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6268bde0af0aa9cfb3df08d6b9b67fdffa2a1a12",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6268bde0af0aa9cfb3df08d6b9b67fdffa2a1a12",
      "tree": {
        "sha": "daf79396688d44d15f5ef73bc58c7e94ad2569af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/daf79396688d44d15f5ef73bc58c7e94ad2569af"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0ff072caa14e4d32f6f4118f15f4f3718cef1d6a",
          "sha": "0ff072caa14e4d32f6f4118f15f4f3718cef1d6a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0ff072caa14e4d32f6f4118f15f4f3718cef1d6a"
        }
      ],
      "message": "descriptor: Remove unused parent_info from BIP32PUbKeyProvider::GetPubKey",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-04-14T23:32:01Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-04-10T21:22:20Z"
      },
      "sha": "6268bde0af0aa9cfb3df08d6b9b67fdffa2a1a12"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI1YTNiOWIwZjUyZTYxZTAxODlkNmU3ZTcyN2EwZmZkMmIxZTM5ZmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa",
      "tree": {
        "sha": "0436d5c652452367041ee02c2edd1c59a8618114",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0436d5c652452367041ee02c2edd1c59a8618114"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6268bde0af0aa9cfb3df08d6b9b67fdffa2a1a12",
          "sha": "6268bde0af0aa9cfb3df08d6b9b67fdffa2a1a12",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6268bde0af0aa9cfb3df08d6b9b67fdffa2a1a12"
        }
      ],
      "message": "descriptors: Have GetPubKey fill origins directly\n\nInstead of having ExpandHelper fill in the origins in the\nFlatSigningProvider output, have GetPubKey do it by itself. This reduces\nthe extra variables needed in order to track and set origins in\nExpandHelper.\n\nAlso changes GetPubKey to return a std::optional<CPubKey> rather than\nusing a bool and output parameters.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-04-14T23:32:01Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2024-01-22T22:07:50Z"
      },
      "sha": "25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiMDMwMzE5N2U0MGE1NTZiZWEyZDlkZjc2ZDE0MDc5ODFjMzYxZTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b0303197e40a556bea2d9df76d1407981c361e6",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4b0303197e40a556bea2d9df76d1407981c361e6",
      "tree": {
        "sha": "eb88226ca651114ce225fe7bcc639b18d83501d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/eb88226ca651114ce225fe7bcc639b18d83501d0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa",
          "sha": "25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa"
        }
      ],
      "message": "descriptors: Move FlatSigningProvider pubkey filling to GetPubKey\n\nInstead of MakeScripts inconsistently filling the output\nFlatSigningProvider with the pubkeys involved, just do it in GetPubKey.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-04-14T23:32:01Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2024-01-22T22:23:08Z"
      },
      "sha": "4b0303197e40a556bea2d9df76d1407981c361e6"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFjZWU1YzU5ZTY4ZjMxYWNiYTExMWJjNGQxODkyYjA4MjQzZWE1ZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "tree": {
        "sha": "5801c4b3db83ee4732e349826e4dc98d00f6baff",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5801c4b3db83ee4732e349826e4dc98d00f6baff"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b0303197e40a556bea2d9df76d1407981c361e6",
          "sha": "4b0303197e40a556bea2d9df76d1407981c361e6",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4b0303197e40a556bea2d9df76d1407981c361e6"
        }
      ],
      "message": "descriptors: Have GetPrivKey fill keys directly\n\nInstead of GetPrivKey returning a key and having the caller fill the\nFlatSigningProvider, have GetPrivKey take the FlatSigningProvider and\nfill it by itself. This will be necessary for descriptors such as\nmusig() where there are private keys that need to be added to the\nFlatSigningProvider but do not directly appear in any resulting scripts.\n\nGetPrivKey is now changed to void as the caller no longer cares whether\nit succeeds or fails.",
      "committer": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2025-04-14T23:32:01Z"
      },
      "author": {
        "name": "Ava Chow",
        "email": "github@achow101.com",
        "date": "2024-02-12T22:06:01Z"
      },
      "sha": "acee5c59e68f31acba111bc4d1892b08243ea5e0"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17257593392,
      "node_id": "HRFPE_lADOABII586ddC-CzwAAAAQEofow",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17257593392",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "commit_url": "https://api.github.com/repos/achow101/bitcoin/commits/acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "created_at": "2025-04-14T23:32:09Z"
    },
    {
      "event": "reviewed",
      "id": 2772295124,
      "node_id": "PRR_kwDOABII586lPd3U",
      "url": null,
      "actor": null,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "LGTM, code review acee5c59e68f31acba111bc4d1892b08243ea5e0\r\n\r\nThank you for splitting the middle commit, makes it easier to review!\r\n\r\nBroadly this pull updates the private & public key getters in the `PubkeyProviders` to also fill the passed `SigningProvider out` with the said keys; the effect of which is that it cleans the implementation of the call sites such as `ExpandHelper` in the `Descriptors` classes. This would result in more (than before) keys being set in the `SigningProviders` generally and the direct callers of these functions would need to accordingly adjust. I'm inclining to prefer the filling of the `SigningProviders` with the public key info (origin & key) together instead of having them filled in various functions like it was done previously.\r\n\r\nThere are few other minor improvements as well like highlighting the non-usage of the arguments in the function signature itself. I've started to look at the #29675 PR to find where the updated functionality of `GetPrivKey` is used as stated in the commit description.   \r\n\r\nBefore I ack the PR, asked one question related to the first commit - https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047087551.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2772295124",
      "submitted_at": "2025-04-16T15:43:24Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "reviewed",
      "id": 2778403152,
      "node_id": "PRR_kwDOABII586lmxFQ",
      "url": null,
      "actor": null,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Code review ACK acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2778403152",
      "submitted_at": "2025-04-18T12:01:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
    },
    {
      "event": "review_requested",
      "id": 17319426190,
      "node_id": "RRE_lADOABII586ddC-CzwAAAAQIUXiO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17319426190",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-18T12:01:21Z",
      "requested_reviewer": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2815320668,
      "node_id": "IC_kwDOABII586nzmJc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2815320668",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-18T12:02:53Z",
      "updated_at": "2025-04-18T12:02:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "> LGTM, code review [acee5c5](https://github.com/bitcoin/bitcoin/commit/acee5c59e68f31acba111bc4d1892b08243ea5e0)\r\n\r\nWas that an ACK an you just forgot the word or did you just want to say you reviewed? :)",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#issuecomment-2815320668",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31243"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1842493705",
      "pull_request_review_id": 2436530611,
      "id": 1842493705,
      "node_id": "PRRC_kwDOABII585t0jkJ",
      "diff_hunk": "@@ -212,7 +212,7 @@ struct PubkeyProvider\n     virtual bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const = 0;\n \n     /** Derive a private key, if private data is available in arg. */\n-    virtual bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const = 0;\n+    virtual void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "f50470e33c1bb51531f3fa08f6d29c54df304d6b",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "in commit f50470e33c1bb51531f3fa08f6d29c54df304d6b: nit: could also update the comment here, e.g. add \"... and put it into the passed signing provider.\"",
      "created_at": "2024-11-14T16:07:03Z",
      "updated_at": "2024-11-17T16:31:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1842493705",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1842493705"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 214,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1843938258",
      "pull_request_review_id": 2436530611,
      "id": 1843938258,
      "node_id": "PRRC_kwDOABII585t6EPS",
      "diff_hunk": "@@ -707,16 +706,17 @@ class DescriptorImpl : public Descriptor\n     // NOLINTNEXTLINE(misc-no-recursion)\n     bool ExpandHelper(int pos, const SigningProvider& arg, const DescriptorCache* read_cache, std::vector<CScript>& output_scripts, FlatSigningProvider& out, DescriptorCache* write_cache) const\n     {\n-        std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n-        entries.reserve(m_pubkey_args.size());\n+        FlatSigningProvider subprovider;\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n+        // Construct temporary data in `pks`, `subscripts`, and `subprovider` to avoid producing output in case of failure.",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 155,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "db270fa2a33d7c88e58682ab8a219a2e70503c9e",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "comment nit\r\n```suggestion\r\n        // Construct temporary data in `pubkeys`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\r\n```",
      "created_at": "2024-11-15T14:46:01Z",
      "updated_at": "2024-11-17T16:31:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1843938258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1843938258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1845517262",
      "pull_request_review_id": 2436530611,
      "id": 1845517262,
      "node_id": "PRRC_kwDOABII585uAFvO",
      "diff_hunk": "@@ -111,6 +111,9 @@ struct Descriptor {\n     /** Whether this descriptor will return one scriptPubKey or multiple (aka is or is not combo) */\n     virtual bool IsSingleType() const = 0;\n \n+    /** Whether this descriptor only produces single key scripts (i.e. pk(), pkh(), wpkh(), sh() and wsh() nested of those, and combo() */\n+    virtual bool IsSingleKey() const = 0;",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 5,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "d1be90704559da45e4d76171230ecb9f4a6d9cf8",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: I wonder if this method will still be needed once the legacy wallet (and with that, the `importmulti` RPC call in particular) is gone? If not, could maybe add a TODO here to get rid of it in the future.",
      "created_at": "2024-11-17T16:28:39Z",
      "updated_at": "2024-11-17T16:31:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1845517262",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1845517262"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 114,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 117,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1848737129",
      "pull_request_review_id": 2446089867,
      "id": 1848737129,
      "node_id": "PRRC_kwDOABII585uMX1p",
      "diff_hunk": "@@ -212,7 +212,7 @@ struct PubkeyProvider\n     virtual bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const = 0;\n \n     /** Derive a private key, if private data is available in arg. */\n-    virtual bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const = 0;\n+    virtual void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "f50470e33c1bb51531f3fa08f6d29c54df304d6b",
      "in_reply_to_id": 1842493705,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2024-11-19T17:03:33Z",
      "updated_at": "2024-11-19T17:03:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1848737129",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1848737129"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 214,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1848737236",
      "pull_request_review_id": 2446090418,
      "id": 1848737236,
      "node_id": "PRRC_kwDOABII585uMX3U",
      "diff_hunk": "@@ -707,16 +706,17 @@ class DescriptorImpl : public Descriptor\n     // NOLINTNEXTLINE(misc-no-recursion)\n     bool ExpandHelper(int pos, const SigningProvider& arg, const DescriptorCache* read_cache, std::vector<CScript>& output_scripts, FlatSigningProvider& out, DescriptorCache* write_cache) const\n     {\n-        std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n-        entries.reserve(m_pubkey_args.size());\n+        FlatSigningProvider subprovider;\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n+        // Construct temporary data in `pks`, `subscripts`, and `subprovider` to avoid producing output in case of failure.",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 155,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "db270fa2a33d7c88e58682ab8a219a2e70503c9e",
      "in_reply_to_id": 1843938258,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2024-11-19T17:03:37Z",
      "updated_at": "2024-11-19T17:03:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1848737236",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1848737236"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 713,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1848737391",
      "pull_request_review_id": 2446090706,
      "id": 1848737391,
      "node_id": "PRRC_kwDOABII585uMX5v",
      "diff_hunk": "@@ -111,6 +111,9 @@ struct Descriptor {\n     /** Whether this descriptor will return one scriptPubKey or multiple (aka is or is not combo) */\n     virtual bool IsSingleType() const = 0;\n \n+    /** Whether this descriptor only produces single key scripts (i.e. pk(), pkh(), wpkh(), sh() and wsh() nested of those, and combo() */\n+    virtual bool IsSingleKey() const = 0;",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 5,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "d1be90704559da45e4d76171230ecb9f4a6d9cf8",
      "in_reply_to_id": 1845517262,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Added a TODO",
      "created_at": "2024-11-19T17:03:44Z",
      "updated_at": "2024-11-19T17:03:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1848737391",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1848737391"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 114,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 117,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1899619894",
      "pull_request_review_id": 2525710496,
      "id": 1899619894,
      "node_id": "PRRC_kwDOABII585xOeY2",
      "diff_hunk": "@@ -1091,6 +1091,8 @@ static UniValue ProcessImportDescriptor(ImportData& import_data, std::map<CKeyID\n         std::tie(range_start, range_end) = ParseDescriptorRange(data[\"range\"]);\n     }\n \n+    bool can_keypool = parsed_descs.at(0)->IsSingleKey();",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 5,
      "original_position": 4,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "7c614b15bc31a7d6f7daaa48c046eb2c7cca697e",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Could add a comment here as well, something like\r\n\r\n``` suggestion\r\n    // Only single key descriptors are allowed to be imported into a legacy wallet's keypool\r\n    bool can_keypool = parsed_descs.at(0)->IsSingleKey();\r\n```",
      "created_at": "2024-12-30T15:25:48Z",
      "updated_at": "2025-01-21T13:07:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1899619894",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1899619894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1095,
      "original_line": 1095,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1899620252",
      "pull_request_review_id": 2525710496,
      "id": 1899620252,
      "node_id": "PRRC_kwDOABII585xOeec",
      "diff_hunk": "@@ -807,6 +807,7 @@ class AddressDescriptor final : public DescriptorImpl\n         return OutputTypeFromDestination(m_destination);\n     }\n     bool IsSingleType() const final { return true; }",
      "path": "src/script/descriptor.cpp",
      "position": 283,
      "original_position": 3,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "7c614b15bc31a7d6f7daaa48c046eb2c7cca697e",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Typo in 7c614b15bc31a7d6f7daaa48c046eb2c7cca697e description “or now”",
      "created_at": "2024-12-30T15:26:19Z",
      "updated_at": "2025-01-21T13:07:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1899620252",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1899620252"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 801,
      "original_line": 801,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1935623167",
      "pull_request_review_id": 2583927266,
      "id": 1935623167,
      "node_id": "PRRC_kwDOABII585zX0P_",
      "diff_hunk": "@@ -211,8 +211,8 @@ struct PubkeyProvider\n      */\n     virtual bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const = 0;\n \n-    /** Derive a private key, if private data is available in arg. */\n-    virtual bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const = 0;\n+    /** Derive a private key, if private data is available in arg and put it into out. */\n+    virtual void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 35,
      "original_position": 7,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348: maybe rename to `FillPrivKey`?\r\n\r\n```cpp\r\n/** Try to derive the private key at pos, if private data is available in arg, and fill out with it. */\r\nvirtual void FillPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;\r\n```\r\n\r\nThat also distinguishes it from `ConstPubkeyProvider::GetPrivKey`.",
      "created_at": "2025-01-30T13:35:11Z",
      "updated_at": "2025-01-30T14:33:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1935623167",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1935623167"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 215,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1935646730",
      "pull_request_review_id": 2583927266,
      "id": 1935646730,
      "node_id": "PRRC_kwDOABII585zX6AK",
      "diff_hunk": "@@ -189,7 +187,7 @@ struct PubkeyProvider\n      *  write_cache is the cache to write keys to (if not nullptr)\n      *  Caches are not exclusive but this is not tested. Currently we use them exclusively\n      */\n-    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const = 0;\n+    virtual std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 24,
      "original_position": 21,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "e743d11aae2e459058b1af70b6d19ab90293d1f4",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "e743d11aae2e459058b1af70b6d19ab90293d1f4: maybe rename this to `FillPubKey`. The filling seems more important, and the return value makes it clear enough it also gets it.",
      "created_at": "2025-01-30T13:51:01Z",
      "updated_at": "2025-01-30T14:33:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1935646730",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1935646730"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 190,
      "original_line": 190,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1935702280",
      "pull_request_review_id": 2583927266,
      "id": 1935702280,
      "node_id": "PRRC_kwDOABII585zYHkI",
      "diff_hunk": "@@ -240,12 +238,15 @@ class OriginPubkeyProvider final : public PubkeyProvider\n \n public:\n     OriginPubkeyProvider(uint32_t exp_index, KeyOriginInfo info, std::unique_ptr<PubkeyProvider> provider, bool apostrophe) : PubkeyProvider(exp_index), m_origin(std::move(info)), m_provider(std::move(provider)), m_apostrophe(apostrophe) {}\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n-        if (!m_provider->GetPubKey(pos, arg, key, info, read_cache, write_cache)) return false;\n-        std::copy(std::begin(m_origin.fingerprint), std::end(m_origin.fingerprint), info.fingerprint);\n-        info.path.insert(info.path.begin(), m_origin.path.begin(), m_origin.path.end());\n-        return true;\n+        std::optional<CPubKey> pub = m_provider->GetPubKey(pos, arg, out, read_cache, write_cache);\n+        if (!pub) return std::nullopt;\n+        auto& [pubkey, suborigin] = out.origins[pub->GetID()];\n+        Assert(pubkey == *pub); // All subproviders must be inserting a valid origin already",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "e743d11aae2e459058b1af70b6d19ab90293d1f4",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "e743d11aae2e459058b1af70b6d19ab90293d1f4: I'm confused by this comment. I guess by \"valid\" you mean that a `KeyOriginInfo` field is present, but it can be a dummy?\r\n\r\nIt seems more intuitive if we insert an origin entry ourselves here ... if possible.",
      "created_at": "2025-01-30T14:25:56Z",
      "updated_at": "2025-01-30T14:33:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1935702280",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1935702280"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938074664",
      "pull_request_review_id": 2588028937,
      "id": 1938074664,
      "node_id": "PRRC_kwDOABII585zhKwo",
      "diff_hunk": "@@ -211,8 +211,8 @@ struct PubkeyProvider\n      */\n     virtual bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const = 0;\n \n-    /** Derive a private key, if private data is available in arg. */\n-    virtual bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const = 0;\n+    /** Derive a private key, if private data is available in arg and put it into out. */\n+    virtual void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 35,
      "original_position": 7,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1935623167,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The verb \"fill\" suggests to me that the caller is filling the descriptor with a private key, rather than the descriptor filling something else. I think \"Get\" is still appropriate.",
      "created_at": "2025-01-31T23:07:00Z",
      "updated_at": "2025-01-31T23:07:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1938074664",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938074664"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 215,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938075462",
      "pull_request_review_id": 2588030022,
      "id": 1938075462,
      "node_id": "PRRC_kwDOABII585zhK9G",
      "diff_hunk": "@@ -240,12 +238,15 @@ class OriginPubkeyProvider final : public PubkeyProvider\n \n public:\n     OriginPubkeyProvider(uint32_t exp_index, KeyOriginInfo info, std::unique_ptr<PubkeyProvider> provider, bool apostrophe) : PubkeyProvider(exp_index), m_origin(std::move(info)), m_provider(std::move(provider)), m_apostrophe(apostrophe) {}\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n-        if (!m_provider->GetPubKey(pos, arg, key, info, read_cache, write_cache)) return false;\n-        std::copy(std::begin(m_origin.fingerprint), std::end(m_origin.fingerprint), info.fingerprint);\n-        info.path.insert(info.path.begin(), m_origin.path.begin(), m_origin.path.end());\n-        return true;\n+        std::optional<CPubKey> pub = m_provider->GetPubKey(pos, arg, out, read_cache, write_cache);\n+        if (!pub) return std::nullopt;\n+        auto& [pubkey, suborigin] = out.origins[pub->GetID()];\n+        Assert(pubkey == *pub); // All subproviders must be inserting a valid origin already",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 39,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "e743d11aae2e459058b1af70b6d19ab90293d1f4",
      "in_reply_to_id": 1935702280,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Valid means that the origin is correct. It may not be useful, e.g. the origin of a random key is itself, but it's valid and correct.",
      "created_at": "2025-01-31T23:08:31Z",
      "updated_at": "2025-01-31T23:08:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1938075462",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938075462"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 247,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938345053",
      "pull_request_review_id": 2588404383,
      "id": 1938345053,
      "node_id": "PRRC_kwDOABII585ziMxd",
      "diff_hunk": "@@ -298,6 +298,14 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     CPubKey m_pubkey;\n     bool m_xonly;\n \n+    std::optional<CKey> GetPrivKey(const SigningProvider& arg) const",
      "path": "src/script/descriptor.cpp",
      "position": 77,
      "original_position": 27,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hm, I am not seeing why having two `GetPrivKey`s is better than one. The description of the commit only talks about the other one, not this one. For this one the caller still cares about the return value it seems. Can't they be unified under the `std::optional` returning variant? It seems like the variant using `FlatSigningProvider` is just used in one place in `ExpandPrivate` and the whole benefit is saving us one line there.",
      "created_at": "2025-02-01T21:00:19Z",
      "updated_at": "2025-02-01T21:02:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1938345053",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938345053"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 301,
      "original_line": 301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1949663437",
      "pull_request_review_id": 2606792733,
      "id": 1949663437,
      "node_id": "PRRC_kwDOABII5850NYDN",
      "diff_hunk": "@@ -298,6 +298,14 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     CPubKey m_pubkey;\n     bool m_xonly;\n \n+    std::optional<CKey> GetPrivKey(const SigningProvider& arg) const",
      "path": "src/script/descriptor.cpp",
      "position": 77,
      "original_position": 27,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1938345053,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The benefit is in the MuSig2 PRs where `GetPrivKey` can insert multiple private keys to the `FlatSigningProvider`, none of which are the private key for the MuSig2 aggregate pubkey itself.\r\n\r\nFor the `ConstPubkeyProvider`, it's useful to have another `GetPrivKey` that returns the single private key since this is behavior is used in a few places within this class's member functions. None of the other pubkey providers need this.",
      "created_at": "2025-02-10T18:21:58Z",
      "updated_at": "2025-02-10T18:22:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1949663437",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1949663437"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 301,
      "original_line": 301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1960100489",
      "pull_request_review_id": 2624210415,
      "id": 1960100489,
      "node_id": "PRRC_kwDOABII58501MKJ",
      "diff_hunk": "@@ -111,6 +111,11 @@ struct Descriptor {\n     /** Whether this descriptor will return one scriptPubKey or multiple (aka is or is not combo) */\n     virtual bool IsSingleType() const = 0;\n \n+    /** Whether this descriptor only produces single key scripts (i.e. pk(), pkh(), wpkh(), sh() and wsh() nested of those, and combo()",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 4,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "482e8c60f771deff833c0fb24f8c2fbf1f3a29b6",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: missing paren\r\n```suggestion\r\n    /** Whether this descriptor only produces single key scripts (i.e. pk(), pkh(), wpkh(), sh() and wsh() nested of those, and combo())\r\n```",
      "created_at": "2025-02-18T16:30:02Z",
      "updated_at": "2025-02-18T16:37:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1960100489",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1960100489"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1960103337",
      "pull_request_review_id": 2624210415,
      "id": 1960103337,
      "node_id": "PRRC_kwDOABII58501M2p",
      "diff_hunk": "@@ -971,6 +976,7 @@ class ComboDescriptor final : public DescriptorImpl\n     {\n         return std::make_unique<ComboDescriptor>(m_pubkey_args.at(0)->Clone());\n     }\n+    bool IsSingleKey() const final { return true; }",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "482e8c60f771deff833c0fb24f8c2fbf1f3a29b6",
      "in_reply_to_id": null,
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: could move this up, right below `IsSingleType`, for consistency with other classes",
      "created_at": "2025-02-18T16:31:43Z",
      "updated_at": "2025-02-18T16:37:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1960103337",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1960103337"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 979,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1982113087",
      "pull_request_review_id": 2662365379,
      "id": 1982113087,
      "node_id": "PRRC_kwDOABII5852JKU_",
      "diff_hunk": "@@ -298,6 +298,14 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     CPubKey m_pubkey;\n     bool m_xonly;\n \n+    std::optional<CKey> GetPrivKey(const SigningProvider& arg) const",
      "path": "src/script/descriptor.cpp",
      "position": 77,
      "original_position": 27,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1938345053,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Understood. I think I would have chosen a different name for the one in `ConstPubkeyProvider`, like `GetConstPrivKey` maybe, but completely optional.",
      "created_at": "2025-03-05T20:04:38Z",
      "updated_at": "2025-03-05T20:05:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1982113087",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1982113087"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 301,
      "original_line": 301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1982741716",
      "pull_request_review_id": 2663415087,
      "id": 1982741716,
      "node_id": "PRRC_kwDOABII5852LjzU",
      "diff_hunk": "@@ -111,6 +111,11 @@ struct Descriptor {\n     /** Whether this descriptor will return one scriptPubKey or multiple (aka is or is not combo) */\n     virtual bool IsSingleType() const = 0;\n \n+    /** Whether this descriptor only produces single key scripts (i.e. pk(), pkh(), wpkh(), sh() and wsh() nested of those, and combo()",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 4,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "482e8c60f771deff833c0fb24f8c2fbf1f3a29b6",
      "in_reply_to_id": 1960100489,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If I need to retouch",
      "created_at": "2025-03-06T06:03:14Z",
      "updated_at": "2025-03-06T06:03:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1982741716",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1982741716"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1982741759",
      "pull_request_review_id": 2663415154,
      "id": 1982741759,
      "node_id": "PRRC_kwDOABII5852Ljz_",
      "diff_hunk": "@@ -971,6 +976,7 @@ class ComboDescriptor final : public DescriptorImpl\n     {\n         return std::make_unique<ComboDescriptor>(m_pubkey_args.at(0)->Clone());\n     }\n+    bool IsSingleKey() const final { return true; }",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "482e8c60f771deff833c0fb24f8c2fbf1f3a29b6",
      "in_reply_to_id": 1960103337,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If I need to retouch",
      "created_at": "2025-03-06T06:03:16Z",
      "updated_at": "2025-03-06T06:03:17Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1982741759",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1982741759"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 979,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983212714",
      "pull_request_review_id": 2664201741,
      "id": 1983212714,
      "node_id": "PRRC_kwDOABII5852NWyq",
      "diff_hunk": "@@ -880,7 +883,6 @@ class PKHDescriptor final : public DescriptorImpl\n     std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, Span<const CScript>, FlatSigningProvider& out) const override\n     {\n         CKeyID id = keys[0].GetID();\n-        out.pubkeys.emplace(id, keys[0]);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "b04bce2cd9f8b0f29f06e4c2190a5a1c88881da2",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Now that `out` is not being used in this function.\r\n\r\n```diff\r\n-std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, Span<const CScript>, FlatSigningProvider& out) const override\r\n+std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, Span<const CScript>, FlatSigningProvider&) const override\r\n ```",
      "created_at": "2025-03-06T11:48:14Z",
      "updated_at": "2025-03-06T13:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983212714",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983212714"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 883,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 887,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983252231",
      "pull_request_review_id": 2664201741,
      "id": 1983252231,
      "node_id": "PRRC_kwDOABII5852NgcH",
      "diff_hunk": "@@ -880,7 +883,6 @@ class PKHDescriptor final : public DescriptorImpl\n     std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, Span<const CScript>, FlatSigningProvider& out) const override\n     {\n         CKeyID id = keys[0].GetID();\n-        out.pubkeys.emplace(id, keys[0]);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "b04bce2cd9f8b0f29f06e4c2190a5a1c88881da2",
      "in_reply_to_id": 1983212714,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Same for other `MakeScripts` functions where it's applicable - `WPKHDescriptor`.",
      "created_at": "2025-03-06T12:17:25Z",
      "updated_at": "2025-03-06T13:15:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983252231",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983252231"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 883,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 887,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983271123",
      "pull_request_review_id": 2664201741,
      "id": 1983271123,
      "node_id": "PRRC_kwDOABII5852NlDT",
      "diff_hunk": "@@ -189,7 +187,7 @@ struct PubkeyProvider\n      *  write_cache is the cache to write keys to (if not nullptr)\n      *  Caches are not exclusive but this is not tested. Currently we use them exclusively\n      */\n-    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const = 0;\n+    virtual std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 24,
      "original_position": 21,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "e743d11aae2e459058b1af70b6d19ab90293d1f4",
      "in_reply_to_id": 1935646730,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In the function doc:\r\n\r\n```diff\r\n-/** Derive a public key.\r\n+/** Derive a public key and put it into `out`\r\n```",
      "created_at": "2025-03-06T12:30:23Z",
      "updated_at": "2025-03-06T13:58:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983271123",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983271123"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 190,
      "original_line": 190,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983307885",
      "pull_request_review_id": 2664201741,
      "id": 1983307885,
      "node_id": "PRRC_kwDOABII5852NuBt",
      "diff_hunk": "@@ -740,8 +748,7 @@ class DescriptorImpl : public Descriptor\n     {\n         for (const auto& p : m_pubkey_args) {\n             CKey key;",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This variable is unused now.",
      "created_at": "2025-03-06T12:55:38Z",
      "updated_at": "2025-03-06T13:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983307885",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983307885"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 750,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983318081",
      "pull_request_review_id": 2664201741,
      "id": 1983318081,
      "node_id": "PRRC_kwDOABII5852NwhB",
      "diff_hunk": "@@ -298,6 +298,14 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     CPubKey m_pubkey;\n     bool m_xonly;\n \n+    std::optional<CKey> GetPrivKey(const SigningProvider& arg) const",
      "path": "src/script/descriptor.cpp",
      "position": 77,
      "original_position": 27,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1938345053,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> The benefit is in the MuSig2 PRs where GetPrivKey can insert multiple private keys to the FlatSigningProvider, none of which are the private key for the MuSig2 aggregate pubkey itself.\r\n\r\nSomething around this can be mentioned either in the commit message and/or the PR description.",
      "created_at": "2025-03-06T13:02:40Z",
      "updated_at": "2025-03-06T13:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983318081",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983318081"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 301,
      "original_line": 301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983325137",
      "pull_request_review_id": 2664201741,
      "id": 1983325137,
      "node_id": "PRRC_kwDOABII5852NyPR",
      "diff_hunk": "@@ -305,6 +306,7 @@ class ConstPubkeyProvider final : public PubkeyProvider\n         CKeyID keyid = m_pubkey.GetID();\n         std::copy(keyid.begin(), keyid.begin() + sizeof(info.fingerprint), info.fingerprint);\n         out.origins.emplace(keyid, std::make_pair(m_pubkey, info));\n+        out.pubkeys.emplace(keyid, m_pubkey);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 12,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "b04bce2cd9f8b0f29f06e4c2190a5a1c88881da2",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I agree with filling `out` with `pubkeys` and `origins` together in a function.",
      "created_at": "2025-03-06T13:07:29Z",
      "updated_at": "2025-03-06T13:15:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983325137",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983325137"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 308,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 317,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983393187",
      "pull_request_review_id": 2664509684,
      "id": 1983393187,
      "node_id": "PRRC_kwDOABII5852OC2j",
      "diff_hunk": "@@ -211,8 +211,8 @@ struct PubkeyProvider\n      */\n     virtual bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const = 0;\n \n-    /** Derive a private key, if private data is available in arg. */\n-    virtual bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const = 0;\n+    /** Derive a private key, if private data is available in arg and put it into out. */\n+    virtual void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 35,
      "original_position": 7,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1935623167,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I am inclining to agree with @achow101 here. Although I don't like a function that is prefixed with `Get` returning nothing but at the moment it's a common pattern in the codebase to `Get` something and update a reference passed in one of the function arguments. The confusion, as highlighted above, that might arise with prefixing with `Fill` makes me not to want to use that.",
      "created_at": "2025-03-06T13:51:25Z",
      "updated_at": "2025-03-06T13:51:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983393187",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983393187"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 215,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983402091",
      "pull_request_review_id": 2664524465,
      "id": 1983402091,
      "node_id": "PRRC_kwDOABII5852OFBr",
      "diff_hunk": "@@ -298,6 +298,14 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     CPubKey m_pubkey;\n     bool m_xonly;\n \n+    std::optional<CKey> GetPrivKey(const SigningProvider& arg) const",
      "path": "src/script/descriptor.cpp",
      "position": 77,
      "original_position": 27,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1938345053,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": ">  like GetConstPrivKey maybe\r\n\r\nThis is already inside `ConstPubkeyProvider` class, using `Const` again could feel repetitive. I think the function overloading (with different argument types) is differentiating enough. Though, some documentation for the new function would be helpful for the reader.",
      "created_at": "2025-03-06T13:56:41Z",
      "updated_at": "2025-03-06T13:56:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983402091",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983402091"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 301,
      "original_line": 301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983774339",
      "pull_request_review_id": 2665155121,
      "id": 1983774339,
      "node_id": "PRRC_kwDOABII5852Pf6D",
      "diff_hunk": "@@ -298,6 +298,14 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     CPubKey m_pubkey;\n     bool m_xonly;\n \n+    std::optional<CKey> GetPrivKey(const SigningProvider& arg) const",
      "path": "src/script/descriptor.cpp",
      "position": 77,
      "original_position": 27,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1938345053,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Something around this can be mentioned either in the commit message and/or the PR description.\r\n\r\nAdded to the commit message.",
      "created_at": "2025-03-06T17:25:07Z",
      "updated_at": "2025-03-06T17:25:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983774339",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983774339"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 301,
      "original_line": 301,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983774453",
      "pull_request_review_id": 2665155298,
      "id": 1983774453,
      "node_id": "PRRC_kwDOABII5852Pf71",
      "diff_hunk": "@@ -111,6 +111,11 @@ struct Descriptor {\n     /** Whether this descriptor will return one scriptPubKey or multiple (aka is or is not combo) */\n     virtual bool IsSingleType() const = 0;\n \n+    /** Whether this descriptor only produces single key scripts (i.e. pk(), pkh(), wpkh(), sh() and wsh() nested of those, and combo()",
      "path": "src/script/descriptor.h",
      "position": null,
      "original_position": 4,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "482e8c60f771deff833c0fb24f8c2fbf1f3a29b6",
      "in_reply_to_id": 1960100489,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-03-06T17:25:12Z",
      "updated_at": "2025-03-06T17:25:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983774453",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983774453"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983774561",
      "pull_request_review_id": 2665155473,
      "id": 1983774561,
      "node_id": "PRRC_kwDOABII5852Pf9h",
      "diff_hunk": "@@ -971,6 +976,7 @@ class ComboDescriptor final : public DescriptorImpl\n     {\n         return std::make_unique<ComboDescriptor>(m_pubkey_args.at(0)->Clone());\n     }\n+    bool IsSingleKey() const final { return true; }",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "482e8c60f771deff833c0fb24f8c2fbf1f3a29b6",
      "in_reply_to_id": 1960103337,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-03-06T17:25:16Z",
      "updated_at": "2025-03-06T17:25:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983774561",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983774561"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 979,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983779662",
      "pull_request_review_id": 2665165051,
      "id": 1983779662,
      "node_id": "PRRC_kwDOABII5852PhNO",
      "diff_hunk": "@@ -880,7 +883,6 @@ class PKHDescriptor final : public DescriptorImpl\n     std::vector<CScript> MakeScripts(const std::vector<CPubKey>& keys, Span<const CScript>, FlatSigningProvider& out) const override\n     {\n         CKeyID id = keys[0].GetID();\n-        out.pubkeys.emplace(id, keys[0]);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "b04bce2cd9f8b0f29f06e4c2190a5a1c88881da2",
      "in_reply_to_id": 1983212714,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done",
      "created_at": "2025-03-06T17:28:32Z",
      "updated_at": "2025-03-06T17:28:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983779662",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983779662"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 883,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 887,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983779926",
      "pull_request_review_id": 2665165595,
      "id": 1983779926,
      "node_id": "PRRC_kwDOABII5852PhRW",
      "diff_hunk": "@@ -189,7 +187,7 @@ struct PubkeyProvider\n      *  write_cache is the cache to write keys to (if not nullptr)\n      *  Caches are not exclusive but this is not tested. Currently we use them exclusively\n      */\n-    virtual bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const = 0;\n+    virtual std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 24,
      "original_position": 21,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "e743d11aae2e459058b1af70b6d19ab90293d1f4",
      "in_reply_to_id": 1935646730,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Added the comment.",
      "created_at": "2025-03-06T17:28:45Z",
      "updated_at": "2025-03-06T17:28:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983779926",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983779926"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 190,
      "original_line": 190,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983780182",
      "pull_request_review_id": 2665166216,
      "id": 1983780182,
      "node_id": "PRRC_kwDOABII5852PhVW",
      "diff_hunk": "@@ -740,8 +748,7 @@ class DescriptorImpl : public Descriptor\n     {\n         for (const auto& p : m_pubkey_args) {\n             CKey key;",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 90,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "1bfabb4f4ec07c8fb0dfc2515d413b5196e01348",
      "in_reply_to_id": 1983307885,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed",
      "created_at": "2025-03-06T17:28:54Z",
      "updated_at": "2025-03-06T17:28:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1983780182",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1983780182"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 750,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986049686",
      "pull_request_review_id": 2669096676,
      "id": 1986049686,
      "node_id": "PRRC_kwDOABII5852YLaW",
      "diff_hunk": "@@ -1107,8 +1110,10 @@ static UniValue ProcessImportDescriptor(ImportData& import_data, std::map<CKeyID\n             std::vector<CScript> scripts_temp;\n             parsed_desc->Expand(i, keys, scripts_temp, out_keys);\n             std::copy(scripts_temp.begin(), scripts_temp.end(), std::inserter(script_pub_keys, script_pub_keys.end()));\n-            for (const auto& key_pair : out_keys.pubkeys) {\n-                ordered_pubkeys.emplace_back(key_pair.first, desc_internal);\n+            if (can_keypool) {\n+                for (const auto& key_pair : out_keys.pubkeys) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "6a31eb5dca1f8eb5fd0507852b49c7452031269e",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This new check here makes the flow more robust and avoids relying on implicit assumptions of what's going on inside the `Expand` function.\r\n\r\n> Instead of relying on implicit assumptions about whether pubkeys show up\r\nafter expanding a descriptor, just explicitly allow only single\r\nkey descriptors to import keys into a legacy wallet's keypool.\r\n\r\nThe commit message 6a31eb5dca1f8eb5fd0507852b49c7452031269e, however, was difficult for me to parse. The second clause, which I understand (and made me wonder why), didn't seem to follow the first. Only after reading this https://github.com/bitcoin/bitcoin/pull/31243#pullrequestreview-2436530611 PR comment, I understood the need for this commit that made me want to investigate the `Imported scripts with pubkeys should not have their pubkeys go into the keypool` subtest in `wallet_importmulti` functional test that fails without this new check or relying only on the `out_keys.pubkeys.size() == 1` check (that I thought of trying) as a 1-of-1 multisig scenario ends up passing that test, which is not desired.\r\n\r\nLegacy wallet keypool should not be updated with individual keys from multisig type scripts as per my understanding from this test. Was this the contract in the legacy wallet?\r\n\r\nSome rephrasing of the commit message as per the above mention comment would be helpful.",
      "created_at": "2025-03-08T10:32:10Z",
      "updated_at": "2025-03-10T10:52:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986049686",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986049686"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1114,
      "original_line": 1114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101902",
      "pull_request_review_id": 2669096676,
      "id": 1986101902,
      "node_id": "PRRC_kwDOABII5852YYKO",
      "diff_hunk": "@@ -394,18 +395,17 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     BIP32PubkeyProvider(uint32_t exp_index, const CExtPubKey& extkey, KeyPath path, DeriveType derive, bool apostrophe) : PubkeyProvider(exp_index), m_root_extkey(extkey), m_path(std::move(path)), m_derive(derive), m_apostrophe(apostrophe) {}\n     bool IsRange() const override { return m_derive != DeriveType::NO; }\n     size_t GetSize() const override { return 33; }\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key_out, KeyOriginInfo& final_info_out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n         // Info of parent of the to be derived pubkey",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This comment is vaguely correct now, technically ok but doesn't gel well with the new object name, causes confusion. IMO best to update it.",
      "created_at": "2025-03-08T15:25:35Z",
      "updated_at": "2025-03-10T10:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986101902",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101902"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 400,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101904",
      "pull_request_review_id": 2669096676,
      "id": 1986101904,
      "node_id": "PRRC_kwDOABII5852YYKQ",
      "diff_hunk": "@@ -394,18 +395,17 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     BIP32PubkeyProvider(uint32_t exp_index, const CExtPubKey& extkey, KeyPath path, DeriveType derive, bool apostrophe) : PubkeyProvider(exp_index), m_root_extkey(extkey), m_path(std::move(path)), m_derive(derive), m_apostrophe(apostrophe) {}\n     bool IsRange() const override { return m_derive != DeriveType::NO; }\n     size_t GetSize() const override { return 33; }\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key_out, KeyOriginInfo& final_info_out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n         // Info of parent of the to be derived pubkey\n-        KeyOriginInfo parent_info;\n+        KeyOriginInfo info;",
      "path": "src/script/descriptor.cpp",
      "position": 138,
      "original_position": 76,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Took me some time to gather what's going on here.\r\n\r\nFor reviewing and future reference as well, it would be easier if this commit 070e746c2f72db2cc24b1c267b91fafbcc586736 is split into 2:\r\nUsage of just `info` object and the removal of `parent_info`, `final_info_out_tmp` objects with the changes related to it can be one commit. Rest of the commit changes can be part of the other.",
      "created_at": "2025-03-08T15:25:37Z",
      "updated_at": "2025-03-10T10:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986101904",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 411,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101911",
      "pull_request_review_id": 2669096676,
      "id": 1986101911,
      "node_id": "PRRC_kwDOABII5852YYKX",
      "diff_hunk": "@@ -394,18 +395,17 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     BIP32PubkeyProvider(uint32_t exp_index, const CExtPubKey& extkey, KeyPath path, DeriveType derive, bool apostrophe) : PubkeyProvider(exp_index), m_root_extkey(extkey), m_path(std::move(path)), m_derive(derive), m_apostrophe(apostrophe) {}\n     bool IsRange() const override { return m_derive != DeriveType::NO; }\n     size_t GetSize() const override { return 33; }\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key_out, KeyOriginInfo& final_info_out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n         // Info of parent of the to be derived pubkey\n-        KeyOriginInfo parent_info;\n+        KeyOriginInfo info;\n         CKeyID keyid = m_root_extkey.pubkey.GetID();\n-        std::copy(keyid.begin(), keyid.begin() + sizeof(parent_info.fingerprint), parent_info.fingerprint);\n-        parent_info.path = m_path;\n+        std::copy(keyid.begin(), keyid.begin() + sizeof(info.fingerprint), info.fingerprint);\n+        info.path = m_path;\n \n         // Info of the derived key itself which is copied out upon successful completion",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This comment seems partly outdated now because, as I see, there is no more copying happening.",
      "created_at": "2025-03-08T15:25:39Z",
      "updated_at": "2025-03-10T10:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986101911",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101911"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 406,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101919",
      "pull_request_review_id": 2669096676,
      "id": 1986101919,
      "node_id": "PRRC_kwDOABII5852YYKf",
      "diff_hunk": "",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "original_commit_id": "08d22b4a3ea9b51c15a9d5de6a5086834529f63b",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Overall the update count (in this file atleast) of the members of the class `FlatSigningProvider& out` has decreased now because there are fewer `PubkeyProvider`s and more `DescrImpl`s , which IMO is desirable.",
      "created_at": "2025-03-08T15:25:46Z",
      "updated_at": "2025-03-10T10:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986101919",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101919"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101936",
      "pull_request_review_id": 2669096676,
      "id": 1986101936,
      "node_id": "PRRC_kwDOABII5852YYKw",
      "diff_hunk": "@@ -442,6 +444,7 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n         if (!der) return std::nullopt;\n \n         out.origins.emplace(final_extkey.pubkey.GetID(), std::make_pair(final_extkey.pubkey, info));\n+        out.pubkeys.emplace(final_extkey.pubkey.GetID(), final_extkey.pubkey);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "08d22b4a3ea9b51c15a9d5de6a5086834529f63b",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Coming from previous commit 070e746c2f72db2cc24b1c267b91fafbcc586736 and looking at this function as a whole, there's a lot going on.\r\nNit: A comment here would be quite helpful for the reader letting them know that origins & pubkeys are being appended.",
      "created_at": "2025-03-08T15:25:54Z",
      "updated_at": "2025-03-10T12:35:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986101936",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101936"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 446,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 453,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101951",
      "pull_request_review_id": 2669096676,
      "id": 1986101951,
      "node_id": "PRRC_kwDOABII5852YYK_",
      "diff_hunk": "",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "original_commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "IMO `GetPrivKey` commit 72694b8d1a9863771cf1095037caeafb3f1a5635 changes deserves a mention in the PR description, currently only the pubkey changes are mentioned.",
      "created_at": "2025-03-08T15:26:00Z",
      "updated_at": "2025-03-10T10:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1986101951",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1986101951"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1987014769",
      "pull_request_review_id": 2669096676,
      "id": 1987014769,
      "node_id": "PRRC_kwDOABII5852b3Bx",
      "diff_hunk": "@@ -298,13 +299,13 @@ class ConstPubkeyProvider final : public PubkeyProvider\n \n public:\n     ConstPubkeyProvider(uint32_t exp_index, const CPubKey& pubkey, bool xonly) : PubkeyProvider(exp_index), m_pubkey(pubkey), m_xonly(xonly) {}\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```diff\r\n-const SigningProvider& arg\r\n+const SigningProvider&\r\n```\r\n\r\n`arg` is not used in this function, though not caused by this PR.",
      "created_at": "2025-03-10T10:29:59Z",
      "updated_at": "2025-03-10T10:47:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1987014769",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1987014769"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1987021149",
      "pull_request_review_id": 2669096676,
      "id": 1987021149,
      "node_id": "PRRC_kwDOABII5852b4ld",
      "diff_hunk": "@@ -240,12 +238,15 @@ class OriginPubkeyProvider final : public PubkeyProvider\n \n public:\n     OriginPubkeyProvider(uint32_t exp_index, KeyOriginInfo info, std::unique_ptr<PubkeyProvider> provider, bool apostrophe) : PubkeyProvider(exp_index), m_origin(std::move(info)), m_provider(std::move(provider)), m_apostrophe(apostrophe) {}\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n-        if (!m_provider->GetPubKey(pos, arg, key, info, read_cache, write_cache)) return false;\n-        std::copy(std::begin(m_origin.fingerprint), std::end(m_origin.fingerprint), info.fingerprint);\n-        info.path.insert(info.path.begin(), m_origin.path.begin(), m_origin.path.end());\n-        return true;\n+        std::optional<CPubKey> pub = m_provider->GetPubKey(pos, arg, out, read_cache, write_cache);\n+        if (!pub) return std::nullopt;\n+        auto& [pubkey, suborigin] = out.origins[pub->GetID()];\n+        Assert(pubkey == *pub); // All subproviders must be inserting a valid origin already",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```diff\r\n-// All subproviders must be inserting a valid origin already\r\n+// `m_provider` must be inserting a valid origin already\r\n```\r\n\r\nUsing the word subproviders here removes this function's individuality (to some extent) by bringing in context from its caller. IIUC, at any time, there would just be one subprovider (either `ConstPubkeyProvider` or `BIP32PubkeyProvider`) that is referenced by the `OriginPubkeyProvider` class member `m_provider`.",
      "created_at": "2025-03-10T10:34:02Z",
      "updated_at": "2025-03-10T18:46:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1987021149",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1987021149"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1987033523",
      "pull_request_review_id": 2669096676,
      "id": 1987033523,
      "node_id": "PRRC_kwDOABII5852b7mz",
      "diff_hunk": "@@ -700,16 +699,17 @@ class DescriptorImpl : public Descriptor\n     // NOLINTNEXTLINE(misc-no-recursion)\n     bool ExpandHelper(int pos, const SigningProvider& arg, const DescriptorCache* read_cache, std::vector<CScript>& output_scripts, FlatSigningProvider& out, DescriptorCache* write_cache) const\n     {\n-        std::vector<std::pair<CPubKey, KeyOriginInfo>> entries;\n-        entries.reserve(m_pubkey_args.size());\n+        FlatSigningProvider subprovider;\n+        std::vector<CPubKey> pubkeys;\n+        pubkeys.reserve(m_pubkey_args.size());\n \n-        // Construct temporary data in `entries`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n+        // Construct temporary data in `pubkeys`, `subscripts`, and `subprovider` to avoid producing output in case of failure.\n         for (const auto& p : m_pubkey_args) {\n-            entries.emplace_back();\n-            if (!p->GetPubKey(pos, arg, entries.back().first, entries.back().second, read_cache, write_cache)) return false;\n+            std::optional<CPubKey> pubkey = p->GetPubKey(pos, arg, subprovider, read_cache, write_cache);",
      "path": "src/script/descriptor.cpp",
      "position": 246,
      "original_position": 162,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "+1 for removing the usage of `entries.back().first, entries.back().second` as the output parameters to the `GetPubKey()`, which was not intuitive to read for me.",
      "created_at": "2025-03-10T10:41:55Z",
      "updated_at": "2025-03-10T12:25:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r1987033523",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1987033523"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": 709,
      "original_start_line": 709,
      "start_side": "LEFT",
      "line": 716,
      "original_line": 716,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038378514",
      "pull_request_review_id": 2758483829,
      "id": 2038378514,
      "node_id": "PRRC_kwDOABII5855fzAS",
      "diff_hunk": "@@ -1107,8 +1110,10 @@ static UniValue ProcessImportDescriptor(ImportData& import_data, std::map<CKeyID\n             std::vector<CScript> scripts_temp;\n             parsed_desc->Expand(i, keys, scripts_temp, out_keys);\n             std::copy(scripts_temp.begin(), scripts_temp.end(), std::inserter(script_pub_keys, script_pub_keys.end()));\n-            for (const auto& key_pair : out_keys.pubkeys) {\n-                ordered_pubkeys.emplace_back(key_pair.first, desc_internal);\n+            if (can_keypool) {\n+                for (const auto& key_pair : out_keys.pubkeys) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 17,
      "original_position": 17,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "6a31eb5dca1f8eb5fd0507852b49c7452031269e",
      "in_reply_to_id": 1986049686,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I've rephrased the commit message so that should hopefully be clearer.",
      "created_at": "2025-04-10T21:38:52Z",
      "updated_at": "2025-04-10T21:38:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038378514",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038378514"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1114,
      "original_line": 1114,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379011",
      "pull_request_review_id": 2758484582,
      "id": 2038379011,
      "node_id": "PRRC_kwDOABII5855fzID",
      "diff_hunk": "@@ -394,18 +395,17 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     BIP32PubkeyProvider(uint32_t exp_index, const CExtPubKey& extkey, KeyPath path, DeriveType derive, bool apostrophe) : PubkeyProvider(exp_index), m_root_extkey(extkey), m_path(std::move(path)), m_derive(derive), m_apostrophe(apostrophe) {}\n     bool IsRange() const override { return m_derive != DeriveType::NO; }\n     size_t GetSize() const override { return 33; }\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key_out, KeyOriginInfo& final_info_out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n         // Info of parent of the to be derived pubkey",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 74,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": 1986101902,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed it, I don't think there's anything meaningfully useful to say in a comment here.",
      "created_at": "2025-04-10T21:39:20Z",
      "updated_at": "2025-04-10T21:39:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038379011",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379011"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 400,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379180",
      "pull_request_review_id": 2758484810,
      "id": 2038379180,
      "node_id": "PRRC_kwDOABII5855fzKs",
      "diff_hunk": "@@ -394,18 +395,17 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     BIP32PubkeyProvider(uint32_t exp_index, const CExtPubKey& extkey, KeyPath path, DeriveType derive, bool apostrophe) : PubkeyProvider(exp_index), m_root_extkey(extkey), m_path(std::move(path)), m_derive(derive), m_apostrophe(apostrophe) {}\n     bool IsRange() const override { return m_derive != DeriveType::NO; }\n     size_t GetSize() const override { return 33; }\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key_out, KeyOriginInfo& final_info_out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n         // Info of parent of the to be derived pubkey\n-        KeyOriginInfo parent_info;\n+        KeyOriginInfo info;",
      "path": "src/script/descriptor.cpp",
      "position": 138,
      "original_position": 76,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": 1986101904,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Split into a separate commit.",
      "created_at": "2025-04-10T21:39:30Z",
      "updated_at": "2025-04-10T21:39:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038379180",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379180"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 411,
      "original_line": 411,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379272",
      "pull_request_review_id": 2758484971,
      "id": 2038379272,
      "node_id": "PRRC_kwDOABII5855fzMI",
      "diff_hunk": "@@ -394,18 +395,17 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     BIP32PubkeyProvider(uint32_t exp_index, const CExtPubKey& extkey, KeyPath path, DeriveType derive, bool apostrophe) : PubkeyProvider(exp_index), m_root_extkey(extkey), m_path(std::move(path)), m_derive(derive), m_apostrophe(apostrophe) {}\n     bool IsRange() const override { return m_derive != DeriveType::NO; }\n     size_t GetSize() const override { return 33; }\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key_out, KeyOriginInfo& final_info_out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n         // Info of parent of the to be derived pubkey\n-        KeyOriginInfo parent_info;\n+        KeyOriginInfo info;\n         CKeyID keyid = m_root_extkey.pubkey.GetID();\n-        std::copy(keyid.begin(), keyid.begin() + sizeof(parent_info.fingerprint), parent_info.fingerprint);\n-        parent_info.path = m_path;\n+        std::copy(keyid.begin(), keyid.begin() + sizeof(info.fingerprint), info.fingerprint);\n+        info.path = m_path;\n \n         // Info of the derived key itself which is copied out upon successful completion",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 83,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": 1986101911,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed.",
      "created_at": "2025-04-10T21:39:36Z",
      "updated_at": "2025-04-10T21:39:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038379272",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 406,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379761",
      "pull_request_review_id": 2758485641,
      "id": 2038379761,
      "node_id": "PRRC_kwDOABII5855fzTx",
      "diff_hunk": "@@ -442,6 +444,7 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n         if (!der) return std::nullopt;\n \n         out.origins.emplace(final_extkey.pubkey.GetID(), std::make_pair(final_extkey.pubkey, info));\n+        out.pubkeys.emplace(final_extkey.pubkey.GetID(), final_extkey.pubkey);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "08d22b4a3ea9b51c15a9d5de6a5086834529f63b",
      "in_reply_to_id": 1986101936,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't think a comment is necessary, `emplace()` is fairly self explanatory.",
      "created_at": "2025-04-10T21:40:02Z",
      "updated_at": "2025-04-10T21:40:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038379761",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038379761"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 446,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 453,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038380138",
      "pull_request_review_id": 2758486336,
      "id": 2038380138,
      "node_id": "PRRC_kwDOABII5855fzZq",
      "diff_hunk": "",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "original_commit_id": "72694b8d1a9863771cf1095037caeafb3f1a5635",
      "in_reply_to_id": 1986101951,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-04-10T21:40:26Z",
      "updated_at": "2025-04-10T21:40:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038380138",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038380138"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1,
      "original_line": 1,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038380282",
      "pull_request_review_id": 2758486590,
      "id": 2038380282,
      "node_id": "PRRC_kwDOABII5855fzb6",
      "diff_hunk": "@@ -298,13 +299,13 @@ class ConstPubkeyProvider final : public PubkeyProvider\n \n public:\n     ConstPubkeyProvider(uint32_t exp_index, const CPubKey& pubkey, bool xonly) : PubkeyProvider(exp_index), m_pubkey(pubkey), m_xonly(xonly) {}\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 54,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": 1987014769,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Removed.",
      "created_at": "2025-04-10T21:40:33Z",
      "updated_at": "2025-04-10T21:40:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038380282",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038380282"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 302,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038380540",
      "pull_request_review_id": 2758486964,
      "id": 2038380540,
      "node_id": "PRRC_kwDOABII5855fzf8",
      "diff_hunk": "@@ -240,12 +238,15 @@ class OriginPubkeyProvider final : public PubkeyProvider\n \n public:\n     OriginPubkeyProvider(uint32_t exp_index, KeyOriginInfo info, std::unique_ptr<PubkeyProvider> provider, bool apostrophe) : PubkeyProvider(exp_index), m_origin(std::move(info)), m_provider(std::move(provider)), m_apostrophe(apostrophe) {}\n-    bool GetPubKey(int pos, const SigningProvider& arg, CPubKey& key, KeyOriginInfo& info, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n+    std::optional<CPubKey> GetPubKey(int pos, const SigningProvider& arg, FlatSigningProvider& out, const DescriptorCache* read_cache = nullptr, DescriptorCache* write_cache = nullptr) const override\n     {\n-        if (!m_provider->GetPubKey(pos, arg, key, info, read_cache, write_cache)) return false;\n-        std::copy(std::begin(m_origin.fingerprint), std::end(m_origin.fingerprint), info.fingerprint);\n-        info.path.insert(info.path.begin(), m_origin.path.begin(), m_origin.path.end());\n-        return true;\n+        std::optional<CPubKey> pub = m_provider->GetPubKey(pos, arg, out, read_cache, write_cache);\n+        if (!pub) return std::nullopt;\n+        auto& [pubkey, suborigin] = out.origins[pub->GetID()];\n+        Assert(pubkey == *pub); // All subproviders must be inserting a valid origin already",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 42,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "070e746c2f72db2cc24b1c267b91fafbcc586736",
      "in_reply_to_id": 1987021149,
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Reworded.",
      "created_at": "2025-04-10T21:40:48Z",
      "updated_at": "2025-04-10T21:40:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2038380540",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2038380540"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 246,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2046796010",
      "pull_request_review_id": 2772295124,
      "id": 2046796010,
      "node_id": "PRRC_kwDOABII5855_6Dq",
      "diff_hunk": "@@ -1091,6 +1091,8 @@ static UniValue ProcessImportDescriptor(ImportData& import_data, std::map<CKeyID\n         std::tie(range_start, range_end) = ParseDescriptorRange(data[\"range\"]);\n     }\n \n+    bool can_keypool = parsed_descs.at(0)->IsSingleKey();",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 5,
      "original_position": 4,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "7c614b15bc31a7d6f7daaa48c046eb2c7cca697e",
      "in_reply_to_id": 1899619894,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This^ has been resolved now.",
      "created_at": "2025-04-16T12:14:18Z",
      "updated_at": "2025-04-16T15:43:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2046796010",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2046796010"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1095,
      "original_line": 1095,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047028701",
      "pull_request_review_id": 2772295124,
      "id": 2047028701,
      "node_id": "PRRC_kwDOABII5856Ay3d",
      "diff_hunk": "@@ -314,20 +322,21 @@ class ConstPubkeyProvider final : public PubkeyProvider\n     std::string ToString(StringType type) const override { return m_xonly ? HexStr(m_pubkey).substr(2) : HexStr(m_pubkey); }\n     bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override\n     {\n-        CKey key;\n-        if (!GetPrivKey(/*pos=*/0, arg, key)) return false;\n-        ret = EncodeSecret(key);\n+        std::optional<CKey> key = GetPrivKey(arg);\n+        if (!key) return false;\n+        ret = EncodeSecret(*key);\n         return true;\n     }\n     bool ToNormalizedString(const SigningProvider& arg, std::string& ret, const DescriptorCache* cache) const override\n     {\n         ret = ToString(StringType::PUBLIC);\n         return true;\n     }\n-    bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const override\n+    void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const override",
      "path": "src/script/descriptor.cpp",
      "position": 56,
      "original_position": 56,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nit: Because `pos` is unused.\r\n\r\n```diff\r\n- void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const override\r\n+ void GetPrivKey(int, const SigningProvider& arg, FlatSigningProvider& out) const override\r\n\r\n```",
      "created_at": "2025-04-16T14:11:26Z",
      "updated_at": "2025-04-16T15:43:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047028701",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047028701"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 335,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047063784",
      "pull_request_review_id": 2772295124,
      "id": 2047063784,
      "node_id": "PRRC_kwDOABII5856A7bo",
      "diff_hunk": "@@ -174,22 +174,20 @@ struct PubkeyProvider\n      * Used by the Miniscript descriptors to check for duplicate keys in the script.\n      */\n     bool operator<(PubkeyProvider& other) const {\n-        CPubKey a, b;\n-        SigningProvider dummy;\n-        KeyOriginInfo dummy_info;\n+        FlatSigningProvider dummy;\n \n-        GetPubKey(0, dummy, a, dummy_info);\n-        other.GetPubKey(0, dummy, b, dummy_info);\n+        std::optional<CPubKey> a = GetPubKey(0, dummy, dummy);\n+        std::optional<CPubKey> b = other.GetPubKey(0, dummy, dummy);\n \n         return a < b;\n     }\n \n-    /** Derive a public key.\n+    /** Derive a public key and put it into out.",
      "path": "src/script/descriptor.cpp",
      "position": 18,
      "original_position": 18,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nit:\r\n\r\n```diff\r\n- /** Derive a public key and put it into out.\r\n+ /** Derive a public key and put it into out along with its origin info.\r\n```",
      "created_at": "2025-04-16T14:27:33Z",
      "updated_at": "2025-04-16T15:44:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047063784",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047063784"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 185,
      "original_line": 185,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047069268",
      "pull_request_review_id": 2772295124,
      "id": 2047069268,
      "node_id": "PRRC_kwDOABII5856A8xU",
      "diff_hunk": "@@ -442,6 +444,7 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n         if (!der) return std::nullopt;\n \n         out.origins.emplace(final_extkey.pubkey.GetID(), std::make_pair(final_extkey.pubkey, info));\n+        out.pubkeys.emplace(final_extkey.pubkey.GetID(), final_extkey.pubkey);",
      "path": "src/script/descriptor.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "08d22b4a3ea9b51c15a9d5de6a5086834529f63b",
      "in_reply_to_id": 1986101936,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I realise my suggestion was not clear enough (and confusing). A comment can be present in the documentation of the function declaration instead - I have mentioned in another review comment: https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047063784",
      "created_at": "2025-04-16T14:29:11Z",
      "updated_at": "2025-04-16T15:49:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047069268",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047069268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": 446,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 453,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047087551",
      "pull_request_review_id": 2772295124,
      "id": 2047087551,
      "node_id": "PRRC_kwDOABII5856BBO_",
      "diff_hunk": "@@ -1107,8 +1110,10 @@ static UniValue ProcessImportDescriptor(ImportData& import_data, std::map<CKeyID\n             std::vector<CScript> scripts_temp;\n             parsed_desc->Expand(i, keys, scripts_temp, out_keys);\n             std::copy(scripts_temp.begin(), scripts_temp.end(), std::inserter(script_pub_keys, script_pub_keys.end()));\n-            for (const auto& key_pair : out_keys.pubkeys) {\n-                ordered_pubkeys.emplace_back(key_pair.first, desc_internal);\n+            if (can_keypool) {",
      "path": "src/wallet/rpc/backup.cpp",
      "position": 16,
      "original_position": 16,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "0ff072caa14e4d32f6f4118f15f4f3718cef1d6a",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I'm looking at it after a month and have lost some context here. \r\n\r\nWhat restriction in the previous code was disallowing the addition of public keys in the keypool for non-single-key type descriptors that made the \"Imported scripts with pubkeys should not have their pubkeys go into the keypool\" subtest pass? Sorry if this has been answered earlier but I didn't find it.",
      "created_at": "2025-04-16T14:38:38Z",
      "updated_at": "2025-04-16T15:43:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047087551",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047087551"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1113,
      "original_line": 1113,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047163149",
      "pull_request_review_id": 2772295124,
      "id": 2047163149,
      "node_id": "PRRC_kwDOABII5856BTsN",
      "diff_hunk": "@@ -211,8 +211,8 @@ struct PubkeyProvider\n      */\n     virtual bool ToNormalizedString(const SigningProvider& arg, std::string& out, const DescriptorCache* cache = nullptr) const = 0;\n \n-    /** Derive a private key, if private data is available in arg. */\n-    virtual bool GetPrivKey(int pos, const SigningProvider& arg, CKey& key) const = 0;\n+    /** Derive a private key, if private data is available in arg and put it into out. */\n+    virtual void GetPrivKey(int pos, const SigningProvider& arg, FlatSigningProvider& out) const = 0;",
      "path": "src/script/descriptor.cpp",
      "position": 7,
      "original_position": 7,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Not a suggestion, just thinking out loud.\r\n\r\nFor the sake of having a function signature consistent with the corresponding public key function - I suppose returning the private key from this function is not an option because we'd prefer to have fewer instances of private keys moving around within the codebase?\r\n\r\nThough I'm wondering can there be an use case later where the caller would need to know whether the private key was gotten in which case the boolean return value is needed; seems a bit odd that the caller would need to find the key in the `out` every time even if they don't want to use the key.",
      "created_at": "2025-04-16T15:13:33Z",
      "updated_at": "2025-04-16T15:43:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2047163149",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2047163149"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": 216,
      "original_start_line": 214,
      "start_side": "LEFT",
      "line": 215,
      "original_line": 215,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2050530082",
      "pull_request_review_id": 2778403152,
      "id": 2050530082,
      "node_id": "PRRC_kwDOABII5856OJsi",
      "diff_hunk": "@@ -174,22 +174,20 @@ struct PubkeyProvider\n      * Used by the Miniscript descriptors to check for duplicate keys in the script.\n      */\n     bool operator<(PubkeyProvider& other) const {",
      "path": "src/script/descriptor.cpp",
      "position": 3,
      "original_position": 3,
      "commit_id": "acee5c59e68f31acba111bc4d1892b08243ea5e0",
      "original_commit_id": "25a3b9b0f52e61e0189d6e7e727a0ffd2b1e39fa",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: could make `other` const if you retouch",
      "created_at": "2025-04-18T11:58:44Z",
      "updated_at": "2025-04-18T12:01:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31243#discussion_r2050530082",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2050530082"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31243"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 176,
      "original_line": 176,
      "side": "RIGHT"
    }
  ]
}