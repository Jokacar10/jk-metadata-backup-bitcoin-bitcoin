{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149",
    "id": 2420945586,
    "node_id": "PR_kwDOABII586QTLKy",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32149",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32149.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32149.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
    "number": 32149,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet, migration: Fix empty wallet crash",
    "user": {
      "login": "pablomartin4btc",
      "id": 110166421,
      "node_id": "U_kgDOBpEBlQ",
      "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pablomartin4btc",
      "html_url": "https://github.com/pablomartin4btc",
      "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
      "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
      "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
      "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
      "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Same as with a blank wallet (#28976), wallets with no legacy records (i.e. empty, non-blank, watch-only wallet) do not require to be migrated.\r\n\r\nSteps to reproduce the issue:\r\n\r\n1.- `createwallet \"empty_wo_noblank_legacy_wallet\" true false \"\" false false`\r\n2.- `migratewallet`\r\n\r\n```\r\nwallet/wallet.cpp:4071 GetDescriptorsForLegacy: Assertion `legacy_spkm' failed.\r\nAborted (core dumped)\r\n```",
    "labels": [
      {
        "id": 149424,
        "node_id": "MDU6TGFiZWwxNDk0MjQ=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Wallet",
        "name": "Wallet",
        "color": "08a781",
        "default": false
      }
    ],
    "created_at": "2025-03-27T02:32:08Z",
    "updated_at": "2025-04-02T12:46:30Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "bc58ff9b9eba0b98cd18553285c0e5882a21075b",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "pablomartin4btc:wallet-migration-empty-wallet-crash-fix",
      "ref": "wallet-migration-empty-wallet-crash-fix",
      "sha": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 519258839,
        "node_id": "R_kgDOHvNC1w",
        "name": "bitcoin",
        "full_name": "pablomartin4btc/bitcoin",
        "owner": {
          "login": "pablomartin4btc",
          "id": 110166421,
          "node_id": "U_kgDOBpEBlQ",
          "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/pablomartin4btc",
          "html_url": "https://github.com/pablomartin4btc",
          "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
          "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
          "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
          "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
          "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/pablomartin4btc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/pablomartin4btc/bitcoin",
        "archive_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/pablomartin4btc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:pablomartin4btc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/pablomartin4btc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/hooks",
        "svn_url": "https://github.com/pablomartin4btc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 237860,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-02T10:58:42Z",
        "created_at": "2022-07-29T15:13:24Z",
        "updated_at": "2025-04-02T10:54:23Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "3358b1d105196647230e6f828b8ec820426b96a0",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36994,
        "stargazers_count": 82737,
        "watchers_count": 82737,
        "size": 279319,
        "default_branch": "master",
        "open_issues_count": 691,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-02T06:15:17Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-02T12:12:50Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 48,
    "deletions": 18,
    "changed_files": 5,
    "commits": 2,
    "review_comments": 30,
    "comments": 8
  },
  "events": [
    {
      "event": "commented",
      "id": 2756303351,
      "node_id": "IC_kwDOABII586kSdn3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2756303351",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T02:32:12Z",
      "updated_at": "2025-04-02T12:46:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32149.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [furszy](https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2729454159), [fjahr](https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2766402044), [davidgumberg](https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2770943643) |\n| Concept ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2736045340) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#30343](https://github.com/bitcoin/bitcoin/pull/30343) (wallet, logging: Replace WalletLogPrintf() with LogInfo() by ryanofsky)\n* [#29124](https://github.com/bitcoin/bitcoin/pull/29124) (wallet: Automatically repair corrupted metadata with doubled derivation path by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2756303351",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "labeled",
      "id": 17009095630,
      "node_id": "LE_lADOABII586v6URNzwAAAAP10jPO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17009095630",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T09:40:45Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "reviewed",
      "id": 2721679868,
      "node_id": "PRR_kwDOABII586iOYn8",
      "url": null,
      "actor": null,
      "commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2721679868",
      "submitted_at": "2025-03-27T14:20:09Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "reviewed",
      "id": 2722034324,
      "node_id": "PRR_kwDOABII586iPvKU",
      "url": null,
      "actor": null,
      "commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "added another suggestion",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2722034324",
      "submitted_at": "2025-03-27T14:51:12Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17017108847,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP2THlv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17017108847",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "6adb2aaa33a93aed323bc9a7c4eac1857979aa5d",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/6adb2aaa33a93aed323bc9a7c4eac1857979aa5d",
      "created_at": "2025-03-27T16:09:28Z"
    },
    {
      "event": "labeled",
      "id": 17017760778,
      "node_id": "LE_lADOABII586v6URNzwAAAAP2VmwK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17017760778",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T16:42:48Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17018110537,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP2W8JJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17018110537",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "22f954a3d20e7bdf27e0e4ed03b251696b5fe718",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/22f954a3d20e7bdf27e0e4ed03b251696b5fe718",
      "created_at": "2025-03-27T16:53:57Z"
    },
    {
      "event": "commented",
      "id": 2758766640,
      "node_id": "IC_kwDOABII586kb3Aw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2758766640",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T16:55:18Z",
      "updated_at": "2025-03-27T16:55:18Z",
      "author_association": "MEMBER",
      "body": "_<ins>Updates</ins>:_\r\n- Addressed @furszy's feedback.",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2758766640",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "mentioned",
      "id": 17018148672,
      "node_id": "MEE_lADOABII586v6URNzwAAAAP2XFdA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17018148672",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T16:55:19Z"
    },
    {
      "event": "subscribed",
      "id": 17018148698,
      "node_id": "SE_lADOABII586v6URNzwAAAAP2XFda",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17018148698",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T16:55:20Z"
    },
    {
      "event": "unlabeled",
      "id": 17021074139,
      "node_id": "UNLE_lADOABII586v6URNzwAAAAP2iPrb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17021074139",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T19:47:25Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2725439754,
      "node_id": "PRR_kwDOABII586icukK",
      "url": null,
      "actor": null,
      "commit_id": "22f954a3d20e7bdf27e0e4ed03b251696b5fe718",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2725439754",
      "submitted_at": "2025-03-28T13:00:52Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17035247568,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP3YT_Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17035247568",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c5b28782e58e0a4cb4eafe2e0330de60f63f39b1",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/c5b28782e58e0a4cb4eafe2e0330de60f63f39b1",
      "created_at": "2025-03-28T16:19:41Z"
    },
    {
      "event": "commented",
      "id": 2761858650,
      "node_id": "IC_kwDOABII586knp5a",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2761858650",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T16:28:43Z",
      "updated_at": "2025-03-28T16:28:43Z",
      "author_association": "MEMBER",
      "body": "_<ins>Updates</ins>:_\r\n- Addressed @furszy's [feedback](https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2018614237).",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2761858650",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "mentioned",
      "id": 17035383251,
      "node_id": "MEE_lADOABII586v6URNzwAAAAP3Y1HT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17035383251",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T16:28:45Z"
    },
    {
      "event": "subscribed",
      "id": 17035383309,
      "node_id": "SE_lADOABII586v6URNzwAAAAP3Y1IN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17035383309",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T16:28:45Z"
    },
    {
      "event": "reviewed",
      "id": 2726939032,
      "node_id": "PRR_kwDOABII586iicmY",
      "url": null,
      "actor": null,
      "commit_id": "c5b28782e58e0a4cb4eafe2e0330de60f63f39b1",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2726939032",
      "submitted_at": "2025-03-28T22:11:20Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "unsubscribed",
      "id": 17039785478,
      "node_id": "UE_lADOABII586v6URNzwAAAAP3pn4G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17039785478",
      "actor": {
        "login": "lemons2lemonade",
        "id": 13054140,
        "node_id": "MDQ6VXNlcjEzMDU0MTQw",
        "avatar_url": "https://avatars.githubusercontent.com/u/13054140?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/lemons2lemonade",
        "html_url": "https://github.com/lemons2lemonade",
        "followers_url": "https://api.github.com/users/lemons2lemonade/followers",
        "following_url": "https://api.github.com/users/lemons2lemonade/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/lemons2lemonade/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/lemons2lemonade/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/lemons2lemonade/subscriptions",
        "organizations_url": "https://api.github.com/users/lemons2lemonade/orgs",
        "repos_url": "https://api.github.com/users/lemons2lemonade/repos",
        "events_url": "https://api.github.com/users/lemons2lemonade/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/lemons2lemonade/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T22:14:55Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17042864589,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP31XnN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17042864589",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "aab392923cbce40156f4a7831fe2322304074a80",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/aab392923cbce40156f4a7831fe2322304074a80",
      "created_at": "2025-03-29T11:11:43Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17042869843,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP31Y5T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17042869843",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "created_at": "2025-03-29T11:14:19Z"
    },
    {
      "event": "commented",
      "id": 2763311638,
      "node_id": "IC_kwDOABII586ktMoW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2763311638",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-29T11:38:25Z",
      "updated_at": "2025-03-29T11:38:25Z",
      "author_association": "MEMBER",
      "body": "_<ins>Updates</ins>:_\r\n- Addressed [feedback](https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2019486082).",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2763311638",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "reviewed",
      "id": 2727937771,
      "node_id": "PRR_kwDOABII586imQbr",
      "url": null,
      "actor": null,
      "commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2727937771",
      "submitted_at": "2025-03-30T16:01:19Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17054676649,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP4ibap",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17054676649",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "23ea336ba1b353303ca5ac767516e46941258664",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/23ea336ba1b353303ca5ac767516e46941258664",
      "created_at": "2025-03-31T10:14:56Z"
    },
    {
      "event": "commented",
      "id": 2765810531,
      "node_id": "IC_kwDOABII586k2utj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2765810531",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-31T10:28:08Z",
      "updated_at": "2025-03-31T10:28:08Z",
      "author_association": "MEMBER",
      "body": "_<ins>Updates</ins>:_\r\n- Addressed @fjahr's feedback.",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2765810531",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "mentioned",
      "id": 17054857392,
      "node_id": "MEE_lADOABII586v6URNzwAAAAP4jHiw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17054857392",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-31T10:28:10Z"
    },
    {
      "event": "subscribed",
      "id": 17054857426,
      "node_id": "SE_lADOABII586v6URNzwAAAAP4jHjS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17054857426",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-31T10:28:10Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBkMGE3ZmM3ZWExNmRjMTg1ZTNmNjFlOWZiY2Q0ZTRmODhkNTdhNDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "tree": {
        "sha": "9d317bff0966a4c490d8c3eb4a0a8f0a446d0afc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9d317bff0966a4c490d8c3eb4a0a8f0a446d0afc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c0b7159de47592c95c6db061de682b4af4058102",
          "sha": "c0b7159de47592c95c6db061de682b4af4058102",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c0b7159de47592c95c6db061de682b4af4058102"
        }
      ],
      "message": "wallet, refactor: Decouple into HasLegacyRecords()\n\nThe new helper will be used to fix a crash in the\nwallet migration process (watch-only, non-blank,\nprivate keys disabled, empty wallet - no scripts\nor addresses imported).\n\nCo-authored-by: Matias Furszyfer <mfurszy@protonmail.com>",
      "committer": {
        "name": "pablomartin4btc",
        "email": "pablomartin4btc@gmail.com",
        "date": "2025-03-31T10:35:41Z"
      },
      "author": {
        "name": "pablomartin4btc",
        "email": "pablomartin4btc@gmail.com",
        "date": "2025-03-26T18:44:32Z"
      },
      "sha": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17054961792,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP4jhCA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17054961792",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add",
      "created_at": "2025-03-31T10:36:04Z"
    },
    {
      "event": "reviewed",
      "id": 2729324019,
      "node_id": "PRR_kwDOABII586iri3z",
      "url": null,
      "actor": null,
      "commit_id": "d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "tACK d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add\r\n\r\nChanges look good to me and I confirmed that the new test fails on master.",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2729324019",
      "submitted_at": "2025-03-31T13:36:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "reviewed",
      "id": 2729422482,
      "node_id": "PRR_kwDOABII586ir66S",
      "url": null,
      "actor": null,
      "commit_id": "d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2729422482",
      "submitted_at": "2025-03-31T14:04:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGViNDMzM2M4YWE0YThmMWE2NmVjYmU1YzQ4ZGJlMTU0NjczMzI4NjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "tree": {
        "sha": "207acaea76da0d38eae75a984849251c78ce21cd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/207acaea76da0d38eae75a984849251c78ce21cd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
          "sha": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44"
        }
      ],
      "message": "wallet, migration: Fix crash om empty wallet\n\nSame as with a blank wallet, wallets with no legacy\nrecords (i.e. empty, non-blank, watch-only wallet)\ndo not require to be migrated.",
      "committer": {
        "name": "pablomartin4btc",
        "email": "pablomartin4btc@gmail.com",
        "date": "2025-03-31T14:10:18Z"
      },
      "author": {
        "name": "pablomartin4btc",
        "email": "pablomartin4btc@gmail.com",
        "date": "2025-03-26T22:13:44Z"
      },
      "sha": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17058099720,
      "node_id": "HRFPE_lADOABII586v6URNzwAAAAP4vfII",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17058099720",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "commit_url": "https://api.github.com/repos/pablomartin4btc/bitcoin/commits/eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "created_at": "2025-03-31T14:10:36Z"
    },
    {
      "event": "commented",
      "id": 2766373715,
      "node_id": "IC_kwDOABII586k44NT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2766373715",
      "actor": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-31T14:12:10Z",
      "updated_at": "2025-03-31T14:12:10Z",
      "author_association": "MEMBER",
      "body": "Fixed a typo.",
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2766373715",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "reviewed",
      "id": 2729454159,
      "node_id": "PRR_kwDOABII586isCpP",
      "url": null,
      "actor": null,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Code review ACK eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2729454159",
      "submitted_at": "2025-03-31T14:13:01Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "review_requested",
      "id": 17058146617,
      "node_id": "RRE_lADOABII586v6URNzwAAAAP4vqk5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17058146617",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-31T14:13:05Z",
      "requested_reviewer": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "commented",
      "id": 2766402044,
      "node_id": "IC_kwDOABII586k4_H8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2766402044",
      "actor": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-31T14:21:38Z",
      "updated_at": "2025-03-31T14:21:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2766402044",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "reviewed",
      "id": 2733666580,
      "node_id": "PRR_kwDOABII586i8HEU",
      "url": null,
      "actor": null,
      "commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2733666580",
      "submitted_at": "2025-04-01T18:09:04Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "reviewed",
      "id": 2733710105,
      "node_id": "PRR_kwDOABII586i8RsZ",
      "url": null,
      "actor": null,
      "commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2733710105",
      "submitted_at": "2025-04-01T18:29:08Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "reviewed",
      "id": 2733721671,
      "node_id": "PRR_kwDOABII586i8UhH",
      "url": null,
      "actor": null,
      "commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2733721671",
      "submitted_at": "2025-04-01T18:34:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    },
    {
      "event": "commented",
      "id": 2770943643,
      "node_id": "IC_kwDOABII586lKT6b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2770943643",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-02T00:05:25Z",
      "updated_at": "2025-04-02T00:05:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "ACK eb4333c8aa4a8f1a66ecbe5c48dbe15467332864\r\n\r\nTested that this fixes the issue in the PR description and also fixes another issue, #32112 (see https://github.com/bitcoin/bitcoin/issues/32112#issuecomment-2770913130). Reviewed and manually verified that the test case added here in `test/functional/wallet_migration.py` catches the issue in master. This refactor also improves readability of `LoadLegacyWalletRecords()`.\r\n\r\n",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#issuecomment-2770943643",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32149"
    },
    {
      "event": "reviewed",
      "id": 2736045340,
      "node_id": "PRR_kwDOABII586jFL0c",
      "url": null,
      "actor": null,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK eb4333c8aa4a8f1a66ecbe5c48dbe15467332864\r\n\r\nSuggested changes based on readability.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#pullrequestreview-2736045340",
      "submitted_at": "2025-04-02T12:46:26Z",
      "state": "CHANGES_REQUESTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016751555",
      "pull_request_review_id": 2721679868,
      "id": 2016751555,
      "node_id": "PRRC_kwDOABII5854NS_D",
      "diff_hunk": "@@ -4534,8 +4534,15 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         // First change to using SQLite\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n+        bool empty_wallet{false};\n+        {\n+            // Keep the batch alive only for this call\n+            const auto& db_batch = local_wallet->GetDatabase().MakeBatch();\n+            empty_wallet = !HasLegacyRecords(local_wallet.get(), *db_batch);\n+        }\n+\n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = empty_wallet || local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 9962614b9060:\r\n\r\nI changed my mind here. The blank flag check seems redundant and could even be harmful if it isn't unset after key import or creation for some reason. This could just be a:\r\n```c++\r\nsuccess = empty_wallet;\r\n```",
      "created_at": "2025-03-27T14:05:34Z",
      "updated_at": "2025-03-27T14:20:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016751555",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016751555"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016756786",
      "pull_request_review_id": 2721679868,
      "id": 2016756786,
      "node_id": "PRRC_kwDOABII5854NUQy",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 6,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "the `blank=True` flag is not needed when you disable private keys.",
      "created_at": "2025-03-27T14:07:50Z",
      "updated_at": "2025-03-27T14:20:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016756786",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016756786"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 450,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016767447",
      "pull_request_review_id": 2721679868,
      "id": 2016767447,
      "node_id": "PRRC_kwDOABII5854NW3X",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 11,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/9962614b9060e9713042de91dc04ff5ea6604ae1:\r\n\r\nThe first check is redundant —`create_legacy_wallet()` already performs it. The other two checks are unnecessary. You want to verify migration here, not whether `createwallet()` works as expected, that's something different.",
      "created_at": "2025-03-27T14:12:38Z",
      "updated_at": "2025-03-27T14:20:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016767447",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016767447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 451,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 455,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016770083",
      "pull_request_review_id": 2721679868,
      "id": 2016770083,
      "node_id": "PRRC_kwDOABII5854NXgj",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 16,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/9962614b9060e9713042de91dc04ff5ea6604ae1:\r\n\r\nthis check is redundant, `migrate_and_get_rpc()` already checks it.",
      "created_at": "2025-03-27T14:13:46Z",
      "updated_at": "2025-03-27T14:20:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016770083",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016770083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 457,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016780253",
      "pull_request_review_id": 2721679868,
      "id": 2016780253,
      "node_id": "PRRC_kwDOABII5854NZ_d",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 18,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/9962614b9060e9713042de91dc04ff5ea6604ae1:\r\n\r\nThis is actually asserting the wrong behavior. The migrated wallet should have private keys disabled, just like the legacy wallet.",
      "created_at": "2025-03-27T14:18:12Z",
      "updated_at": "2025-03-27T14:20:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016780253",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016780253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 457,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 462,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016804703",
      "pull_request_review_id": 2721941685,
      "id": 2016804703,
      "node_id": "PRRC_kwDOABII5854Nf9f",
      "diff_hunk": "@@ -4534,8 +4534,15 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         // First change to using SQLite\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n+        bool empty_wallet{false};\n+        {\n+            // Keep the batch alive only for this call\n+            const auto& db_batch = local_wallet->GetDatabase().MakeBatch();\n+            empty_wallet = !HasLegacyRecords(local_wallet.get(), *db_batch);\n+        }\n+\n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = empty_wallet || local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016751555,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ok, I'll check, I've tested already that when you import an address the flag gets unset.",
      "created_at": "2025-03-27T14:28:04Z",
      "updated_at": "2025-03-27T14:28:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016804703",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016804703"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016809896",
      "pull_request_review_id": 2721952900,
      "id": 2016809896,
      "node_id": "PRRC_kwDOABII5854NhOo",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 6,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016756786,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "But wanted to make it explicit that as the wallet is empty, not imported address, the flag will remain the same after migration.",
      "created_at": "2025-03-27T14:30:22Z",
      "updated_at": "2025-03-27T14:30:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016809896",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016809896"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 450,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016810958",
      "pull_request_review_id": 2721954401,
      "id": 2016810958,
      "node_id": "PRRC_kwDOABII5854NhfO",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 11,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016767447,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ok, I'll remove it.",
      "created_at": "2025-03-27T14:30:48Z",
      "updated_at": "2025-03-27T14:30:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016810958",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016810958"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 451,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 455,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016826542",
      "pull_request_review_id": 2721981901,
      "id": 2016826542,
      "node_id": "PRRC_kwDOABII5854NlSu",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 18,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016780253,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> The migrated wallet should have private keys **disabled**\r\n\r\nYes, it's doing that (private_keys_**enabled** = **False**), otherwise it would be failing.",
      "created_at": "2025-03-27T14:37:57Z",
      "updated_at": "2025-03-27T14:37:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016826542",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016826542"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 457,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 462,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016844918",
      "pull_request_review_id": 2722012886,
      "id": 2016844918,
      "node_id": "PRRC_kwDOABII5854Npx2",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 18,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016780253,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ha, I read it in the other way around.. \"private_keys_disabled\".. all good. Can solve this comment.",
      "created_at": "2025-03-27T14:44:17Z",
      "updated_at": "2025-03-27T14:44:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016844918",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016844918"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 457,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 462,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016856942",
      "pull_request_review_id": 2722034324,
      "id": 2016856942,
      "node_id": "PRRC_kwDOABII5854Nstu",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+        self.assert_is_sqlite(\"watchonly2\")\n+\n+        # Migrating a watch-only non-blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly non-blank empty wallet (with no pubkeys)\")\n+        watchonly3 = self.create_legacy_wallet(\"watchonly3\", disable_private_keys=True, blank=False)\n+        # Before migrating\n+        info = watchonly3.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], False)\n+\n+        _, watchonly3 = self.migrate_and_get_rpc(\"watchonly3\")\n+        info = watchonly3.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], False)\n+        self.assert_is_sqlite(\"watchonly3\")\n+",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 36,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Could probably re-write this test in just a few lines:\r\n```python3\r\nself.log.info(\"Test migration of a watch-only empty wallet\")\r\nfor is_blank in [True, False]:\r\n    self.create_legacy_wallet(\"watchonly_empty\", disable_private_keys=True, blank=is_blank)\r\n    _, watchonly_empty = self.migrate_and_get_rpc(\"watchonly_empty\")\r\n    info = watchonly_empty.getwalletinfo()\r\n    assert_equal(info[\"private_keys_enabled\"], False)\r\n    assert_equal(info[\"blank\"], is_blank)\r\n```",
      "created_at": "2025-03-27T14:50:05Z",
      "updated_at": "2025-03-27T14:51:12Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016856942",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016856942"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 448,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 456,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016872082",
      "pull_request_review_id": 2722061675,
      "id": 2016872082,
      "node_id": "PRRC_kwDOABII5854NwaS",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 16,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016770083,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I can see I got confused with other tests that validate it but I see they call `migratewallet` instead (and then `get_wallet_rpc` - I can do a follow-up to clean it up later). Same for `assert_is_sqlite`, I'll remove it, since `migrate_and_get_rpc()` already calls it within. Thanks!",
      "created_at": "2025-03-27T14:57:32Z",
      "updated_at": "2025-03-27T14:57:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016872082",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016872082"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 457,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 460,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016874922",
      "pull_request_review_id": 2722066696,
      "id": 2016874922,
      "node_id": "PRRC_kwDOABII5854NxGq",
      "diff_hunk": "@@ -445,6 +445,39 @@ def test_no_privkeys(self):\n         # After migrating, the \"keypool\" is empty\n         assert_raises_rpc_error(-4, \"Error: This wallet has no available keys\", watchonly1.getnewaddress)\n \n+        # Migrating a watch-only blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly blank empty wallet (with no pubkeys)\")\n+        watchonly2 = self.create_legacy_wallet(\"watchonly2\", disable_private_keys=True, blank=True)\n+        # Before migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+\n+        _, watchonly2 = self.migrate_and_get_rpc(\"watchonly2\")\n+        # After migrating\n+        info = watchonly2.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], True)\n+        self.assert_is_sqlite(\"watchonly2\")\n+\n+        # Migrating a watch-only non-blank empty wallet (with no pubkeys)\n+        self.log.info(\"Test migration of a pure watchonly non-blank empty wallet (with no pubkeys)\")\n+        watchonly3 = self.create_legacy_wallet(\"watchonly3\", disable_private_keys=True, blank=False)\n+        # Before migrating\n+        info = watchonly3.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], False)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], False)\n+\n+        _, watchonly3 = self.migrate_and_get_rpc(\"watchonly3\")\n+        info = watchonly3.getwalletinfo()\n+        assert_equal(info[\"descriptors\"], True)\n+        assert_equal(info[\"private_keys_enabled\"], False)\n+        assert_equal(info[\"blank\"], False)\n+        self.assert_is_sqlite(\"watchonly3\")\n+",
      "path": "test/functional/wallet_migration.py",
      "position": null,
      "original_position": 36,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "9962614b9060e9713042de91dc04ff5ea6604ae1",
      "in_reply_to_id": 2016856942,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yup, much better! Cheers!",
      "created_at": "2025-03-27T14:58:58Z",
      "updated_at": "2025-03-27T14:58:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2016874922",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2016874922"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 448,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 456,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018614237",
      "pull_request_review_id": 2725439754,
      "id": 2018614237,
      "node_id": "PRRC_kwDOABII5854UZvd",
      "diff_hunk": "@@ -48,10 +48,13 @@ BOOST_AUTO_TEST_CASE(walletdb_read_write_deadlock)\n         LOCK(wallet->cs_wallet);\n         auto legacy_spkm = wallet->GetOrCreateLegacyScriptPubKeyMan();\n         BOOST_CHECK(legacy_spkm->SetupGeneration(true));\n+        const auto& db_batch = wallet->GetDatabase().MakeBatch();\n+        BOOST_CHECK(HasLegacyRecords(wallet.get(), *db_batch));",
      "path": "src/wallet/test/walletdb_tests.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "61f0d7908c01198674fd2f7f20d911e543da0014",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This leaves the db batch object alive and could conflict with the `Flush()` and `DeleteRecords()` internals, as both access the db.\r\n\r\nBetter to limit the scope of the db batch object only to this function call.",
      "created_at": "2025-03-28T13:00:10Z",
      "updated_at": "2025-03-28T13:00:52Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2018614237",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018614237"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 51,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 52,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019486082",
      "pull_request_review_id": 2726939032,
      "id": 2019486082,
      "node_id": "PRRC_kwDOABII5854XumC",
      "diff_hunk": "@@ -48,10 +48,16 @@ BOOST_AUTO_TEST_CASE(walletdb_read_write_deadlock)\n         LOCK(wallet->cs_wallet);\n         auto legacy_spkm = wallet->GetOrCreateLegacyScriptPubKeyMan();\n         BOOST_CHECK(legacy_spkm->SetupGeneration(true));\n-        wallet->Flush();\n+        {\n+            // Keep the batch alive only for this call\n+            const auto& db_batch = wallet->GetDatabase().MakeBatch();\n+            BOOST_CHECK(HasLegacyRecords(wallet.get(), *db_batch));\n+            wallet->Flush();\n \n-        // Now delete all records, which performs a read write operation.\n-        BOOST_CHECK(wallet->GetLegacyScriptPubKeyMan()->DeleteRecords());\n+            // Now delete all records, which performs a read write operation.\n+            BOOST_CHECK(wallet->GetLegacyScriptPubKeyMan()->DeleteRecords());\n+            BOOST_CHECK(!HasLegacyRecords(wallet.get(), *db_batch));\n+        }",
      "path": "src/wallet/test/walletdb_tests.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ff7f9bb0b8f33919d540ebdc89a63ab1ab65fc66",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "You didn't change the behavior on the latest push. The `db_batch` object is alive **while** `Flush()` and `DeleteRecords()` are called. My suggestion was to scope each single `HasLegacyRecords()` call so it does not interfere with the other calls who also access db.",
      "created_at": "2025-03-28T22:10:26Z",
      "updated_at": "2025-03-29T00:38:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2019486082",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019486082"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 51,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019776473",
      "pull_request_review_id": 2727344042,
      "id": 2019776473,
      "node_id": "PRRC_kwDOABII5854Y1fZ",
      "diff_hunk": "@@ -48,10 +48,16 @@ BOOST_AUTO_TEST_CASE(walletdb_read_write_deadlock)\n         LOCK(wallet->cs_wallet);\n         auto legacy_spkm = wallet->GetOrCreateLegacyScriptPubKeyMan();\n         BOOST_CHECK(legacy_spkm->SetupGeneration(true));\n-        wallet->Flush();\n+        {\n+            // Keep the batch alive only for this call\n+            const auto& db_batch = wallet->GetDatabase().MakeBatch();\n+            BOOST_CHECK(HasLegacyRecords(wallet.get(), *db_batch));\n+            wallet->Flush();\n \n-        // Now delete all records, which performs a read write operation.\n-        BOOST_CHECK(wallet->GetLegacyScriptPubKeyMan()->DeleteRecords());\n+            // Now delete all records, which performs a read write operation.\n+            BOOST_CHECK(wallet->GetLegacyScriptPubKeyMan()->DeleteRecords());\n+            BOOST_CHECK(!HasLegacyRecords(wallet.get(), *db_batch));\n+        }",
      "path": "src/wallet/test/walletdb_tests.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ff7f9bb0b8f33919d540ebdc89a63ab1ab65fc66",
      "in_reply_to_id": 2019486082,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yup, fixed it, thanks!",
      "created_at": "2025-03-29T11:12:17Z",
      "updated_at": "2025-03-29T11:12:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2019776473",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019776473"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 51,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020189978",
      "pull_request_review_id": 2727937771,
      "id": 2020189978,
      "node_id": "PRRC_kwDOABII5854aaca",
      "diff_hunk": "@@ -4534,8 +4534,15 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         // First change to using SQLite\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n+        bool empty_wallet{false};\n+        {\n+            // Keep the batch alive only for this call\n+            const auto& db_batch = local_wallet->GetDatabase().MakeBatch();\n+            empty_wallet = !HasLegacyRecords(local_wallet.get(), *db_batch);\n+        }\n+\n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = empty_wallet;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Seems like this can be simplified (with maybe an additional comment that an empty wallet means automatic success)\r\n\r\n```suggestion\r\n        {\r\n            // Keep the batch alive only for this call\r\n            const auto& db_batch = local_wallet->GetDatabase().MakeBatch();\r\n            success = !HasLegacyRecords(local_wallet.get(), *db_batch);\r\n        }\r\n\r\n        // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\r\n```",
      "created_at": "2025-03-30T15:56:47Z",
      "updated_at": "2025-03-30T16:01:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2020189978",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020189978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 4537,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 4545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020190409",
      "pull_request_review_id": 2727937771,
      "id": 2020190409,
      "node_id": "PRRC_kwDOABII5854aajJ",
      "diff_hunk": "@@ -4534,8 +4534,15 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         // First change to using SQLite\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n+        bool empty_wallet{false};\n+        {\n+            // Keep the batch alive only for this call",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: I find this comment a bit redundant, especially in the tests. If you rename `db_batch` to `temp_batch` IMO it could be removed.",
      "created_at": "2025-03-30T15:59:23Z",
      "updated_at": "2025-03-30T16:01:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2020190409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020190409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020190503",
      "pull_request_review_id": 2727937771,
      "id": 2020190503,
      "node_id": "PRRC_kwDOABII5854aakn",
      "diff_hunk": "@@ -333,6 +333,9 @@ bool LoadKey(CWallet* pwallet, DataStream& ssKey, DataStream& ssValue, std::stri\n bool LoadCryptedKey(CWallet* pwallet, DataStream& ssKey, DataStream& ssValue, std::string& strErr);\n bool LoadEncryptionKey(CWallet* pwallet, DataStream& ssKey, DataStream& ssValue, std::string& strErr);\n bool LoadHDChain(CWallet* pwallet, DataStream& ssValue, std::string& strErr);\n+\n+//! Returns true if there is any DBKeys::LEGACY_TYPES record in the wallet db",
      "path": "src/wallet/walletdb.h",
      "position": null,
      "original_position": 5,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "in_reply_to_id": null,
      "user": {
        "login": "fjahr",
        "id": 1322187,
        "node_id": "MDQ6VXNlcjEzMjIxODc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1322187?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fjahr",
        "html_url": "https://github.com/fjahr",
        "followers_url": "https://api.github.com/users/fjahr/followers",
        "following_url": "https://api.github.com/users/fjahr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fjahr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fjahr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fjahr/subscriptions",
        "organizations_url": "https://api.github.com/users/fjahr/orgs",
        "repos_url": "https://api.github.com/users/fjahr/repos",
        "events_url": "https://api.github.com/users/fjahr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fjahr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit\r\n\r\n```suggestion\r\n//! Returns true if there are any DBKeys::LEGACY_TYPES records in the wallet db\r\n```",
      "created_at": "2025-03-30T15:59:59Z",
      "updated_at": "2025-03-30T16:04:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2020190503",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020190503"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 337,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020752757",
      "pull_request_review_id": 2728803322,
      "id": 2020752757,
      "node_id": "PRRC_kwDOABII5854cj11",
      "diff_hunk": "@@ -4534,8 +4534,15 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         // First change to using SQLite\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n+        bool empty_wallet{false};\n+        {\n+            // Keep the batch alive only for this call",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "in_reply_to_id": 2020190409,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks! I'll overload `HasLegacyRecords` so it'd make it even cleaner I think.",
      "created_at": "2025-03-31T10:05:33Z",
      "updated_at": "2025-03-31T10:05:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2020752757",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020752757"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4539,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020753904",
      "pull_request_review_id": 2728805152,
      "id": 2020753904,
      "node_id": "PRRC_kwDOABII5854ckHw",
      "diff_hunk": "@@ -4534,8 +4534,15 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         // First change to using SQLite\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n+        bool empty_wallet{false};\n+        {\n+            // Keep the batch alive only for this call\n+            const auto& db_batch = local_wallet->GetDatabase().MakeBatch();\n+            empty_wallet = !HasLegacyRecords(local_wallet.get(), *db_batch);\n+        }\n+\n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = empty_wallet;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "ef994480eaae41bb6f92d4bf9b535c67ef65122e",
      "in_reply_to_id": 2020189978,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah, I'll tweak it a bit. Thanks!",
      "created_at": "2025-03-31T10:06:26Z",
      "updated_at": "2025-03-31T10:06:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2020753904",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2020753904"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": 4537,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 4545,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2021114298",
      "pull_request_review_id": 2729422482,
      "id": 2021114298,
      "node_id": "PRRC_kwDOABII5854d8G6",
      "diff_hunk": "@@ -4535,7 +4535,7 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = !HasLegacyRecords(local_wallet.get());;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "extra ; at the end.",
      "created_at": "2025-03-31T14:03:59Z",
      "updated_at": "2025-03-31T14:04:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2021114298",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2021114298"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4538,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2021126219",
      "pull_request_review_id": 2729442389,
      "id": 2021126219,
      "node_id": "PRRC_kwDOABII5854d_BL",
      "diff_hunk": "@@ -4535,7 +4535,7 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = !HasLegacyRecords(local_wallet.get());;",
      "path": "src/wallet/wallet.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "d4cb6d048b0222cf51c8a56fa56f97dd5d2c9add",
      "in_reply_to_id": 2021114298,
      "user": {
        "login": "pablomartin4btc",
        "id": 110166421,
        "node_id": "U_kgDOBpEBlQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/110166421?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pablomartin4btc",
        "html_url": "https://github.com/pablomartin4btc",
        "followers_url": "https://api.github.com/users/pablomartin4btc/followers",
        "following_url": "https://api.github.com/users/pablomartin4btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/pablomartin4btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/pablomartin4btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/pablomartin4btc/subscriptions",
        "organizations_url": "https://api.github.com/users/pablomartin4btc/orgs",
        "repos_url": "https://api.github.com/users/pablomartin4btc/repos",
        "events_url": "https://api.github.com/users/pablomartin4btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/pablomartin4btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "argh! Thanks!",
      "created_at": "2025-03-31T14:09:35Z",
      "updated_at": "2025-03-31T14:09:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2021126219",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2021126219"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 4538,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023452046",
      "pull_request_review_id": 2733666580,
      "id": 2023452046,
      "node_id": "PRRC_kwDOABII5854m22O",
      "diff_hunk": "@@ -540,30 +540,45 @@ static LoadResult LoadRecords(CWallet* pwallet, DatabaseBatch& batch, const std:\n     return LoadRecords(pwallet, batch, key, prefix, load_func);\n }\n \n+bool HasLegacyRecords(CWallet* pwallet)\n+{\n+    const auto& batch = pwallet->GetDatabase().MakeBatch();\n+    return HasLegacyRecords(pwallet, *batch);\n+}\n+\n+bool HasLegacyRecords(CWallet* pwallet, DatabaseBatch& batch)\n+{\n+    for (const auto& type : DBKeys::LEGACY_TYPES) {\n+        DataStream key;\n+        DataStream value{};\n+        DataStream prefix;\n+\n+        prefix << type;\n+        std::unique_ptr<DatabaseCursor> cursor = batch.GetNewPrefixCursor(prefix);\n+        if (!cursor) {\n+            // Could only happen on a closed db, which means there is an error in the code flow.\n+            pwallet->WalletLogPrintf(\"Error getting database cursor for '%s' records\", type);",
      "path": "src/wallet/walletdb.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Just a question: Why log the same message that gets thrown?",
      "created_at": "2025-04-01T18:09:04Z",
      "updated_at": "2025-04-01T18:09:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2023452046",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023452046"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 560,
      "original_line": 560,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023477440",
      "pull_request_review_id": 2733710105,
      "id": 2023477440,
      "node_id": "PRRC_kwDOABII5854m9DA",
      "diff_hunk": "@@ -48,10 +48,12 @@ BOOST_AUTO_TEST_CASE(walletdb_read_write_deadlock)\n         LOCK(wallet->cs_wallet);\n         auto legacy_spkm = wallet->GetOrCreateLegacyScriptPubKeyMan();",
      "path": "src/wallet/test/walletdb_tests.cpp",
      "position": 2,
      "original_position": 2,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit, if you retouch: \r\n```suggestion\r\n        auto legacy_spkm = wallet->GetOrCreateLegacyScriptPubKeyMan();\r\n        BOOST_CHECK(!HasLegacyRecords(wallet.get()));\r\n```",
      "created_at": "2025-04-01T18:29:07Z",
      "updated_at": "2025-04-01T18:29:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2023477440",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023477440"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 49,
      "original_line": 49,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023484212",
      "pull_request_review_id": 2733721671,
      "id": 2023484212,
      "node_id": "PRRC_kwDOABII5854m-s0",
      "diff_hunk": "@@ -540,30 +540,45 @@ static LoadResult LoadRecords(CWallet* pwallet, DatabaseBatch& batch, const std:\n     return LoadRecords(pwallet, batch, key, prefix, load_func);\n }\n \n+bool HasLegacyRecords(CWallet* pwallet)\n+{\n+    const auto& batch = pwallet->GetDatabase().MakeBatch();\n+    return HasLegacyRecords(pwallet, *batch);\n+}\n+\n+bool HasLegacyRecords(CWallet* pwallet, DatabaseBatch& batch)\n+{\n+    for (const auto& type : DBKeys::LEGACY_TYPES) {\n+        DataStream key;\n+        DataStream value{};\n+        DataStream prefix;\n+\n+        prefix << type;\n+        std::unique_ptr<DatabaseCursor> cursor = batch.GetNewPrefixCursor(prefix);\n+        if (!cursor) {\n+            // Could only happen on a closed db, which means there is an error in the code flow.\n+            pwallet->WalletLogPrintf(\"Error getting database cursor for '%s' records\", type);\n+            throw std::runtime_error(strprintf(\"Error getting database cursor for '%s' records\", type));\n+        }\n+\n+        DatabaseCursor::Status status = cursor->Next(key, value);\n+        if (status != DatabaseCursor::Status::DONE) {",
      "path": "src/wallet/walletdb.cpp",
      "position": 26,
      "original_position": 26,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "maybe this should be: \r\n\r\n```suggestion\r\n        if (status == DatabaseCursor::Status::MORE)\r\n```\r\n\r\nas is done in [`WalletBatch::IsEncrypted()`](https://github.com/bitcoin/bitcoin/blob/1a6fc04d815e45ee895bd7ff0bc1b03685ed96c3/src/wallet/walletdb.cpp#L193-L202). That would more correctly handle `Status::FAIL` which I presume is extremely unlikely here.\r\n\r\nEdit: And out of scope of this refactor commit, feel free to disregard, just an observation.",
      "created_at": "2025-04-01T18:34:35Z",
      "updated_at": "2025-04-01T18:42:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2023484212",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023484212"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 565,
      "original_line": 565,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023540593",
      "pull_request_review_id": 2733820707,
      "id": 2023540593,
      "node_id": "PRRC_kwDOABII5854nMdx",
      "diff_hunk": "@@ -540,30 +540,45 @@ static LoadResult LoadRecords(CWallet* pwallet, DatabaseBatch& batch, const std:\n     return LoadRecords(pwallet, batch, key, prefix, load_func);\n }\n \n+bool HasLegacyRecords(CWallet* pwallet)\n+{\n+    const auto& batch = pwallet->GetDatabase().MakeBatch();\n+    return HasLegacyRecords(pwallet, *batch);\n+}\n+\n+bool HasLegacyRecords(CWallet* pwallet, DatabaseBatch& batch)\n+{\n+    for (const auto& type : DBKeys::LEGACY_TYPES) {\n+        DataStream key;\n+        DataStream value{};\n+        DataStream prefix;\n+\n+        prefix << type;\n+        std::unique_ptr<DatabaseCursor> cursor = batch.GetNewPrefixCursor(prefix);\n+        if (!cursor) {\n+            // Could only happen on a closed db, which means there is an error in the code flow.\n+            pwallet->WalletLogPrintf(\"Error getting database cursor for '%s' records\", type);",
      "path": "src/wallet/walletdb.cpp",
      "position": 21,
      "original_position": 21,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "in_reply_to_id": 2023452046,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Because the caller is not logging it and didn’t want to change the existing behavior in the refactoring commit, the `pwallet` argument could have otherwise been removed.",
      "created_at": "2025-04-01T19:14:59Z",
      "updated_at": "2025-04-01T19:14:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2023540593",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023540593"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 560,
      "original_line": 560,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023549393",
      "pull_request_review_id": 2733835378,
      "id": 2023549393,
      "node_id": "PRRC_kwDOABII5854nOnR",
      "diff_hunk": "@@ -540,30 +540,45 @@ static LoadResult LoadRecords(CWallet* pwallet, DatabaseBatch& batch, const std:\n     return LoadRecords(pwallet, batch, key, prefix, load_func);\n }\n \n+bool HasLegacyRecords(CWallet* pwallet)\n+{\n+    const auto& batch = pwallet->GetDatabase().MakeBatch();\n+    return HasLegacyRecords(pwallet, *batch);\n+}\n+\n+bool HasLegacyRecords(CWallet* pwallet, DatabaseBatch& batch)\n+{\n+    for (const auto& type : DBKeys::LEGACY_TYPES) {\n+        DataStream key;\n+        DataStream value{};\n+        DataStream prefix;\n+\n+        prefix << type;\n+        std::unique_ptr<DatabaseCursor> cursor = batch.GetNewPrefixCursor(prefix);\n+        if (!cursor) {\n+            // Could only happen on a closed db, which means there is an error in the code flow.\n+            pwallet->WalletLogPrintf(\"Error getting database cursor for '%s' records\", type);\n+            throw std::runtime_error(strprintf(\"Error getting database cursor for '%s' records\", type));\n+        }\n+\n+        DatabaseCursor::Status status = cursor->Next(key, value);\n+        if (status != DatabaseCursor::Status::DONE) {",
      "path": "src/wallet/walletdb.cpp",
      "position": 26,
      "original_position": 26,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "0d0a7fc7ea16dc185e3f61e9fbcd4e4f88d57a44",
      "in_reply_to_id": 2023484212,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If it fails, we should abort the process. Probably by throwing an exception. But I would leave that for another PR to avoid mixing it with this crash fix.",
      "created_at": "2025-04-01T19:22:07Z",
      "updated_at": "2025-04-01T19:22:07Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2023549393",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2023549393"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 565,
      "original_line": 565,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2024701300",
      "pull_request_review_id": 2736045340,
      "id": 2024701300,
      "node_id": "PRRC_kwDOABII5854rn10",
      "diff_hunk": "@@ -4535,7 +4535,7 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails",
      "path": "src/wallet/wallet.cpp",
      "position": 3,
      "original_position": 3,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The comment can be updated now to account for empty wallets as well.\r\n\r\n```diff\r\n-        // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\r\n+        // Do the migration of keys and scripts for non-blank and non-empty wallets, and cleanup if it fails\r\n```",
      "created_at": "2025-04-02T12:15:09Z",
      "updated_at": "2025-04-02T12:48:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2024701300",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2024701300"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 4537,
      "original_line": 4537,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2024734496",
      "pull_request_review_id": 2736045340,
      "id": 2024734496,
      "node_id": "PRRC_kwDOABII5854rv8g",
      "diff_hunk": "@@ -4535,7 +4535,7 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\n \n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\n-        success = local_wallet->IsWalletFlagSet(WALLET_FLAG_BLANK_WALLET);\n+        success = !HasLegacyRecords(local_wallet.get());\n         if (!success) {",
      "path": "src/wallet/wallet.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "original_commit_id": "eb4333c8aa4a8f1a66ecbe5c48dbe15467332864",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This has become a double negation now that makes it tougher to read imo. We can get rid of setting the `success` variable here and directly add in the `if` condition. Moreover, setting `success` here seems quite unusual to me, just like it was in the previous code as well. I believe it can be directly updated in the `if` condition.\r\n\r\nI notice that the migration is done only if `success` is false and then updated. But if `success` evaluates to `true` at this line, the migration is skipped and `success` remains `true`. To handle this, `success` can be initially set to `true`. Also, I believe this is an opportunity to narrow the scope of `success` here because it's not used in the previous `if` block at all.\r\n\r\nSo, the overall diff is below, which is more than originally intended but I believe it makes this code block more readable. All the unit tests and the migration functional tests pass.\r\n\r\n```diff\r\n     res.backup_path = backup_path;\r\n \r\n-    bool success = false;\r\n-\r\n     // Unlock the wallet if needed\r\n     if (local_wallet->IsLocked() && !local_wallet->Unlock(passphrase)) {\r\n         if (was_loaded) {\r\n@@ -4529,14 +4527,14 @@ util::Result<MigrationResult> MigrateLegacyToDescriptor(std::shared_ptr<CWallet>\r\n         }\r\n     }\r\n \r\n+    bool success = true;\r\n     {\r\n         LOCK(local_wallet->cs_wallet);\r\n         // First change to using SQLite\r\n         if (!local_wallet->MigrateToSQLite(error)) return util::Error{error};\r\n \r\n         // Do the migration of keys and scripts for non-blank wallets, and cleanup if it fails\r\n-        success = !HasLegacyRecords(local_wallet.get());\r\n-        if (!success) {\r\n+        if (HasLegacyRecords(local_wallet.get())) {\r\n             success = DoMigration(*local_wallet, context, error, res);\r\n         } else {\r\n             // Make sure that descriptors flag is actually set\r\n```",
      "created_at": "2025-04-02T12:35:23Z",
      "updated_at": "2025-04-02T12:46:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32149#discussion_r2024734496",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2024734496"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32149"
        }
      },
      "start_line": 4538,
      "original_start_line": 4538,
      "start_side": "LEFT",
      "line": 4539,
      "original_line": 4539,
      "side": "RIGHT"
    }
  ]
}