{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664",
    "id": 2280235009,
    "node_id": "PR_kwDOABII586H6aAB",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31664",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31664.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31664.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31664",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31664/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/a665ff19acf2a1356b7c2376379a9d265fdc8add",
    "number": 31664,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "Fees:  add Fee rate Forecaster Manager",
    "user": {
      "login": "ismaelsadeeq",
      "id": 48946461,
      "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
      "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ismaelsadeeq",
      "html_url": "https://github.com/ismaelsadeeq",
      "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
      "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
      "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
      "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
      "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "- This PR implements the core component of #30392, introducing a new fee rate forecasting module. \r\nThe primary addition is a `ForecasterManager` that coordinates multiple forecasting strategies to be able to provide better transaction fee rate predictions.\r\n\r\n\r\n### Key Changes  \r\n\r\n1. **Refactoring of `CBlockPolicyEstimator`**  \r\n   - Renames `fees` to `block_policy_estimator` for clarity.  \r\n   - Renames`fees_args` to `block_policy_estimator_args` for clarity\r\n   - Renames `policy_fee_tests` to `feerounder_tests` also for clarity.  \r\n\r\n\r\n2. **Addition of Fee Rate Forecasting Utility Structures**  \r\n   - `Forecaster` abstract class, serving as the base class for all fee rate forecasters.\r\n   - `ForecastResult` (the response from a `Forecaster`) with all metadata.  \r\n   - `ForecastType` enum, identify and distinguish forecasters.    \r\n\r\n3. **Introduce `FeeRateForecasterManager` class**  \r\n   - Adds the `FeeRateForecasterManager` class, responsible for managing all fee rate forecasters, including `CBlockPolicyEstimator`, which is now a forecaster.  \r\n   - Updates the node context to hold a unique pointer to `FeeRateForecasterManager` instead of `CBlockPolicyEstimator`.  \r\n   - Changes `CBlockPolicyEstimator` instance from `unique_ptr` to a `shared_pointer`, allowing it to be registered in the validation interface without requiring explicit unregistration during shutdown (current master behaviour). Registering for `CBlockPolicyEstimator` flushes also get a `shared_pointer`.  \r\n   - Exposes a raw pointer of `CBlockPolicyEstimator` through `FeeRateForecasterManager` for compatibility with `estimateSmartFee`, friends, and node interfaces.  \r\n   -   Modifies `CBlockPolicyEstimator` to inherit from the `Forecaster` class and implement the pure abstract classes\r\n\r\n4. **Introduce `MempoolForecaster` class**  \r\n   - Adds the `MempoolForecaster`, which forecast the fee rate required for a transaction to confirm as soon as possible. It generates a block template and returns the 75th and 50th percentile fee rates  as low-priority and high-priority fee rate forecasts.  \r\n   - Implements caching for the last fee rate forecast, using a 30-second rate limit to avoid frequent block generation via the block assembler.\r\n\r\n\r\nThe `FeeRateForecasterManager` now includes a method `ForecastFeeRateFromForecasters`. This method polls forecasts from all registered forecasters and returns the lowest value. This behavior aligns with discussions and research outlined in [this post](https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703).  But the primary aim of the `FeeRateForecasterManager` is to be able to perform sanity checks and potentially apply heuristics to determine the most appropriate fee rate forecast from polled forecasters, for now it just return the lowest.\r\n\r\nThis PR also add unit tests for the classes.\r\n",
    "labels": [
      {
        "id": 82428251,
        "node_id": "MDU6TGFiZWw4MjQyODI1MQ==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/TX%20fees%20and%20policy",
        "name": "TX fees and policy",
        "color": "5319e7",
        "default": false
      },
      {
        "id": 1648013533,
        "node_id": "MDU6TGFiZWwxNjQ4MDEzNTMz",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Review%20club",
        "name": "Review club",
        "description": "",
        "color": "0052cc",
        "default": false
      }
    ],
    "created_at": "2025-01-15T21:42:52Z",
    "updated_at": "2025-04-15T20:42:04Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "f1b812788cd00e7af2d8af0989986c1776109a24",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "ismaelsadeeq:01-2025-feerate-forecastman",
      "ref": "01-2025-feerate-forecastman",
      "sha": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 577730599,
        "node_id": "R_kgDOIm94Jw",
        "name": "bitcoin",
        "full_name": "ismaelsadeeq/bitcoin",
        "owner": {
          "login": "ismaelsadeeq",
          "id": 48946461,
          "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
          "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ismaelsadeeq",
          "html_url": "https://github.com/ismaelsadeeq",
          "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
          "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
          "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
          "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
          "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ismaelsadeeq/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ismaelsadeeq/bitcoin",
        "archive_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ismaelsadeeq/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ismaelsadeeq/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ismaelsadeeq/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/hooks",
        "svn_url": "https://github.com/ismaelsadeeq/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 275057,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-15T09:59:41Z",
        "created_at": "2022-12-13T11:54:34Z",
        "updated_at": "2023-03-10T09:46:26Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "99a4ddf5ab1b3e514d08b90ad8565827fda7b63b",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37044,
        "stargazers_count": 82899,
        "watchers_count": 82899,
        "size": 279803,
        "default_branch": "master",
        "open_issues_count": 702,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-15T10:07:58Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-15T20:53:11Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 756,
    "deletions": 84,
    "changed_files": 37,
    "commits": 14,
    "review_comments": 12,
    "comments": 4
  },
  "events": [
    {
      "event": "commented",
      "id": 2593999478,
      "node_id": "IC_kwDOABII586anUp2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2593999478",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-15T21:42:56Z",
      "updated_at": "2025-04-15T20:42:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31664.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31382](https://github.com/bitcoin/bitcoin/pull/31382) (kernel: Flush in ChainstateManager destructor by TheCharlatan)\n* [#30079](https://github.com/bitcoin/bitcoin/pull/30079) (Fee Estimation: Ignore all transactions that are CPFP'd by ismaelsadeeq)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#issuecomment-2593999478",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31664"
    },
    {
      "event": "labeled",
      "id": 16034779326,
      "node_id": "LE_lADOABII586mWxXrzwAAAAO7v1C-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16034779326",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T20:57:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16035664389,
      "node_id": "HRFPE_lADOABII586mWxXrzwAAAAO7zNIF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16035664389",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "created_at": "2025-01-22T22:28:33Z"
    },
    {
      "event": "unlabeled",
      "id": 16036017354,
      "node_id": "UNLE_lADOABII586mWxXrzwAAAAO70jTK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16036017354",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-22T23:17:21Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "labeled",
      "id": 16283665927,
      "node_id": "LE_lADOABII586mWxXrzwAAAAPKlQYH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16283665927",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-12T16:15:21Z",
      "label": {
        "name": "TX fees and policy",
        "color": "5319e7"
      }
    },
    {
      "event": "reviewed",
      "id": 2750226421,
      "node_id": "PRR_kwDOABII586j7R_1",
      "url": null,
      "actor": null,
      "commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "frankomosh",
        "id": 33951953,
        "node_id": "MDQ6VXNlcjMzOTUxOTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/33951953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankomosh",
        "html_url": "https://github.com/frankomosh",
        "followers_url": "https://api.github.com/users/frankomosh/followers",
        "following_url": "https://api.github.com/users/frankomosh/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/frankomosh/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/frankomosh/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/frankomosh/subscriptions",
        "organizations_url": "https://api.github.com/users/frankomosh/orgs",
        "repos_url": "https://api.github.com/users/frankomosh/repos",
        "events_url": "https://api.github.com/users/frankomosh/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/frankomosh/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#pullrequestreview-2750226421",
      "submitted_at": "2025-04-08T14:32:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
    },
    {
      "event": "commented",
      "id": 2786767247,
      "node_id": "IC_kwDOABII586mGrGP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2786767247",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-08T15:06:55Z",
      "updated_at": "2025-04-08T15:06:55Z",
      "author_association": "MEMBER",
      "body": "There is going to be a review club tomorrow on this PR\r\nhttps://bitcoincore.reviews/31664 notes and questions are up",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#issuecomment-2786767247",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31664"
    },
    {
      "event": "labeled",
      "id": 17193152254,
      "node_id": "LE_lADOABII586mWxXrzwAAAAQAyq7-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17193152254",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-09T17:05:02Z",
      "label": {
        "name": "Review club",
        "color": "0052cc"
      }
    },
    {
      "event": "reviewed",
      "id": 2754169488,
      "node_id": "PRR_kwDOABII586kKUqQ",
      "url": null,
      "actor": null,
      "commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#pullrequestreview-2754169488",
      "submitted_at": "2025-04-09T18:12:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
    },
    {
      "event": "commented",
      "id": 2792149557,
      "node_id": "IC_kwDOABII586mbNI1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2792149557",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-10T09:35:02Z",
      "updated_at": "2025-04-10T09:35:02Z",
      "author_association": "MEMBER",
      "body": "I will update the PR to address recent comments, I also want to remove some redundancy and restructure the commits.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#issuecomment-2792149557",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31664"
    },
    {
      "event": "reviewed",
      "id": 2757094288,
      "node_id": "PRR_kwDOABII586kVeuQ",
      "url": null,
      "actor": null,
      "commit_id": "5bd2220422af02b20cb94dcd4c0e2c38e0284952",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#pullrequestreview-2757094288",
      "submitted_at": "2025-04-10T14:35:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17238766259,
      "node_id": "HRFPE_lADOABII586mWxXrzwAAAAQDgrKz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238766259",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9455f2f0927014f2cc2495d432be635b58cc8fe2",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/9455f2f0927014f2cc2495d432be635b58cc8fe2",
      "created_at": "2025-04-13T14:19:48Z"
    },
    {
      "event": "commented",
      "id": 2799975088,
      "node_id": "IC_kwDOABII586m5Dqw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2799975088",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:51Z",
      "updated_at": "2025-04-13T14:28:51Z",
      "author_association": "MEMBER",
      "body": "Forced pushed c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69..9455f2f0927014f2cc2495d432be635b58cc8fe2\r\n\r\nI've made the following changes:\r\n1. Rebased on `master`.\r\n2. Reorganized the commits (refactor comes first).\r\n3. Squashed the structure-related commits into one.\r\n4. Addressed comments by @glozow.\r\n5. Removed some redundancy and things that seemed like YAGNI.\r\n6. Comparison of forecast results is now based on fee rate, and we now return `\"economical\"` by default—following comments by @polespinasa and @monlovesmango in the recent review club meeting.\r\n",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#issuecomment-2799975088",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31664"
    },
    {
      "event": "mentioned",
      "id": 17238785941,
      "node_id": "MEE_lADOABII586mWxXrzwAAAAQDgv-V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238785941",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:52Z"
    },
    {
      "event": "subscribed",
      "id": 17238785945,
      "node_id": "SE_lADOABII586mWxXrzwAAAAQDgv-Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238785945",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:53Z"
    },
    {
      "event": "mentioned",
      "id": 17238785948,
      "node_id": "MEE_lADOABII586mWxXrzwAAAAQDgv-c",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238785948",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:53Z"
    },
    {
      "event": "subscribed",
      "id": 17238785950,
      "node_id": "SE_lADOABII586mWxXrzwAAAAQDgv-e",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238785950",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:53Z"
    },
    {
      "event": "mentioned",
      "id": 17238785951,
      "node_id": "MEE_lADOABII586mWxXrzwAAAAQDgv-f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238785951",
      "actor": {
        "login": "monlovesmango",
        "id": 96307647,
        "node_id": "U_kgDOBb2Jvw",
        "avatar_url": "https://avatars.githubusercontent.com/u/96307647?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/monlovesmango",
        "html_url": "https://github.com/monlovesmango",
        "followers_url": "https://api.github.com/users/monlovesmango/followers",
        "following_url": "https://api.github.com/users/monlovesmango/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/monlovesmango/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/monlovesmango/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/monlovesmango/subscriptions",
        "organizations_url": "https://api.github.com/users/monlovesmango/orgs",
        "repos_url": "https://api.github.com/users/monlovesmango/repos",
        "events_url": "https://api.github.com/users/monlovesmango/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/monlovesmango/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:53Z"
    },
    {
      "event": "subscribed",
      "id": 17238785953,
      "node_id": "SE_lADOABII586mWxXrzwAAAAQDgv-h",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17238785953",
      "actor": {
        "login": "monlovesmango",
        "id": 96307647,
        "node_id": "U_kgDOBb2Jvw",
        "avatar_url": "https://avatars.githubusercontent.com/u/96307647?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/monlovesmango",
        "html_url": "https://github.com/monlovesmango",
        "followers_url": "https://api.github.com/users/monlovesmango/followers",
        "following_url": "https://api.github.com/users/monlovesmango/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/monlovesmango/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/monlovesmango/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/monlovesmango/subscriptions",
        "organizations_url": "https://api.github.com/users/monlovesmango/orgs",
        "repos_url": "https://api.github.com/users/monlovesmango/repos",
        "events_url": "https://api.github.com/users/monlovesmango/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/monlovesmango/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-13T14:28:53Z"
    },
    {
      "event": "labeled",
      "id": 17257146883,
      "node_id": "LE_lADOABII586mWxXrzwAAAAQEmyoD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17257146883",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-14T22:50:59Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQxODdhZDE5YzMyZTQwMmFlMDY3NTBiM2JiODYxYTAwZmQ4YjY5NjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4187ad19c32e402ae06750b3bb861a00fd8b6961",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4187ad19c32e402ae06750b3bb861a00fd8b6961",
      "tree": {
        "sha": "668b1cfca8bada06080598927643f3a0a3ddec07",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/668b1cfca8bada06080598927643f3a0a3ddec07"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/99a4ddf5ab1b3e514d08b90ad8565827fda7b63b",
          "sha": "99a4ddf5ab1b3e514d08b90ad8565827fda7b63b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/99a4ddf5ab1b3e514d08b90ad8565827fda7b63b"
        }
      ],
      "message": "fees: refactor: rename policy_fee_tests.cpp to feerounder_tests.cpp\n\n- Also remame the test suite name to match the new name.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:06Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-13T14:58:23Z"
      },
      "sha": "4187ad19c32e402ae06750b3bb861a00fd8b6961"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg3ZjlkNGFmOWQwODUzOTE5MDllYjYxM2ZlNDFhOWIzMjk2ZmZiMTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87f9d4af9d085391909eb613fe41a9b3296ffb12",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/87f9d4af9d085391909eb613fe41a9b3296ffb12",
      "tree": {
        "sha": "51f84566d882eab5ba2f892520880281128240bd",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/51f84566d882eab5ba2f892520880281128240bd"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4187ad19c32e402ae06750b3bb861a00fd8b6961",
          "sha": "4187ad19c32e402ae06750b3bb861a00fd8b6961",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4187ad19c32e402ae06750b3bb861a00fd8b6961"
        }
      ],
      "message": "fees: refactor: rename fees to block_policy_estimator\n\n- Also move it to policy/fees and update the includes",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:44Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-09T22:31:05Z"
      },
      "sha": "87f9d4af9d085391909eb613fe41a9b3296ffb12"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdmN2RhNTlkNjVlNTIwNjc1MDVmNTFiMzg2MDI1YzZlMzc1MWMwNTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f7da59d65e52067505f51b386025c6e3751c050",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7f7da59d65e52067505f51b386025c6e3751c050",
      "tree": {
        "sha": "96cb8f0d5ca8c58240283c0fc4738a0dfa823810",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96cb8f0d5ca8c58240283c0fc4738a0dfa823810"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/87f9d4af9d085391909eb613fe41a9b3296ffb12",
          "sha": "87f9d4af9d085391909eb613fe41a9b3296ffb12",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/87f9d4af9d085391909eb613fe41a9b3296ffb12"
        }
      ],
      "message": "fees: rename fees_args to block_policy_estimator_args\n\n- Also move them to policy/fees/ and update includes\n- Note: the block_policy_estimator_args.h include in block_policy_estimator_args.cpp was done manually.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-15T18:10:55Z"
      },
      "sha": "7f7da59d65e52067505f51b386025c6e3751c050"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ3ZjAxMmRkOWZjNTgxMDNhYWE1MWU1ZmVlYjM3ZTViMzhlNTliYTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/47f012dd9fc58103aaa51e5feeb37e5b38e59ba9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/47f012dd9fc58103aaa51e5feeb37e5b38e59ba9",
      "tree": {
        "sha": "f711b5ae0f19fa9190797c42cacb2ebf6fad0a63",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f711b5ae0f19fa9190797c42cacb2ebf6fad0a63"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f7da59d65e52067505f51b386025c6e3751c050",
          "sha": "7f7da59d65e52067505f51b386025c6e3751c050",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7f7da59d65e52067505f51b386025c6e3751c050"
        }
      ],
      "message": "fees: return current block height in `estimateSmartFee`",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-08-12T14:40:20Z"
      },
      "sha": "47f012dd9fc58103aaa51e5feeb37e5b38e59ba9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNiZjU2OGY1NjQ5ZjJiOWUyOTRmZGY3NDA4OWU2YjAyMDUyZTMyNzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cbf568f5649f2b9e294fdf74089e6b02052e3278",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cbf568f5649f2b9e294fdf74089e6b02052e3278",
      "tree": {
        "sha": "026dea34f216aec295835ef2fbc7f8cc56c2ac80",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/026dea34f216aec295835ef2fbc7f8cc56c2ac80"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/47f012dd9fc58103aaa51e5feeb37e5b38e59ba9",
          "sha": "47f012dd9fc58103aaa51e5feeb37e5b38e59ba9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/47f012dd9fc58103aaa51e5feeb37e5b38e59ba9"
        }
      ],
      "message": "fees: add forecaster structures\n\ni  - Forecaster abstract class is the base class of fee rate forecasters.\n     Derived classes must provide concrete implementation\n     of the virtual methods.\n\nii - ForecastResult struct represent the response returned by\n     a fee rate forecaster.\n\niii - ForecastType will be used to identify forecasters.\n      Each time a new forecaster is added, a corresponding\n      enum value should be added to ForecastType.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-10T08:54:14Z"
      },
      "sha": "cbf568f5649f2b9e294fdf74089e6b02052e3278"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFhYzc5ZmM1YTkxZmJlOTIxOWRhZTNkYzg4YzRhMTk5ZDVhYmY0ZGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ac79fc5a91fbe9219dae3dc88c4a199d5abf4de",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1ac79fc5a91fbe9219dae3dc88c4a199d5abf4de",
      "tree": {
        "sha": "52a25bd96f62762d795adf25c55baf7a7bcc1372",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/52a25bd96f62762d795adf25c55baf7a7bcc1372"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cbf568f5649f2b9e294fdf74089e6b02052e3278",
          "sha": "cbf568f5649f2b9e294fdf74089e6b02052e3278",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cbf568f5649f2b9e294fdf74089e6b02052e3278"
        }
      ],
      "message": "fees: add ForecasterMan class\n\n- Its a module for managing and utilising multiple\n  fee rate forecasters to provide fee rate forecast.\n\n- The ForecasterManager class allows for the registration of\n  multiple fee rate forecasters.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-10T08:35:23Z"
      },
      "sha": "1ac79fc5a91fbe9219dae3dc88c4a199d5abf4de"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI5OTZhMTJjZjQ4OWViODg1ZjZhOWIxOGJlMjY5OWVjMzI2YmNlNjk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b996a12cf489eb885f6a9b18be2699ec326bce69",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b996a12cf489eb885f6a9b18be2699ec326bce69",
      "tree": {
        "sha": "b9eef3fb471e4ed32130c83ccf6901dec575945c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b9eef3fb471e4ed32130c83ccf6901dec575945c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1ac79fc5a91fbe9219dae3dc88c4a199d5abf4de",
          "sha": "1ac79fc5a91fbe9219dae3dc88c4a199d5abf4de",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1ac79fc5a91fbe9219dae3dc88c4a199d5abf4de"
        }
      ],
      "message": "fees: make block_policy_estimator a forecaster",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-13T22:59:06Z"
      },
      "sha": "b996a12cf489eb885f6a9b18be2699ec326bce69"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYzMjBiN2M1MDE3NWJhOWY1MTk1OGUwZDRlYTNkYWZhMGFjY2YzMmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f320b7c50175ba9f51958e0d4ea3dafa0accf32e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f320b7c50175ba9f51958e0d4ea3dafa0accf32e",
      "tree": {
        "sha": "f2cf9296d9d8caf2122cdc3f1217e9d4bca274ea",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f2cf9296d9d8caf2122cdc3f1217e9d4bca274ea"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b996a12cf489eb885f6a9b18be2699ec326bce69",
          "sha": "b996a12cf489eb885f6a9b18be2699ec326bce69",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b996a12cf489eb885f6a9b18be2699ec326bce69"
        }
      ],
      "message": "fees: add block policy estimator to forecaster manager\n\n- This changes `CBlockPolicyEstimator` to a shared pointer\n  this gives us three advantages.\n   - Registering to validation interface using shared pointer\n   - Scheduling block policy estimator flushes using shared pointer\n   - Registering block policy estimator to forecaster_man",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-15T18:44:28Z"
      },
      "sha": "f320b7c50175ba9f51958e0d4ea3dafa0accf32e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZiYjIzYjFjYWU1NjNlYWEyMWQ4NjIyYzA0YWY2YmM3NDkyOTdjYWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6bb23b1cae563eaa21d8622c04af6bc749297cac",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6bb23b1cae563eaa21d8622c04af6bc749297cac",
      "tree": {
        "sha": "68b37b201260a5257a719d50c3c2e1824d27774c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/68b37b201260a5257a719d50c3c2e1824d27774c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f320b7c50175ba9f51958e0d4ea3dafa0accf32e",
          "sha": "f320b7c50175ba9f51958e0d4ea3dafa0accf32e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f320b7c50175ba9f51958e0d4ea3dafa0accf32e"
        }
      ],
      "message": "fees: add `forecastTypeToString` method\n\n- This method converts a ForecastType enum to its\n  string representation.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-02T18:46:32Z"
      },
      "sha": "6bb23b1cae563eaa21d8622c04af6bc749297cac"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk1ZTY3OGQ1NzhjMjM4ZmZhZGZhZGYxMTliNzgzMGNlYjVhM2MzNDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95e678d578c238ffadfadf119b7830ceb5a3c340",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/95e678d578c238ffadfadf119b7830ceb5a3c340",
      "tree": {
        "sha": "28b8d39af9f8cc3de5d25d60316940e9f76236ef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28b8d39af9f8cc3de5d25d60316940e9f76236ef"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6bb23b1cae563eaa21d8622c04af6bc749297cac",
          "sha": "6bb23b1cae563eaa21d8622c04af6bc749297cac",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6bb23b1cae563eaa21d8622c04af6bc749297cac"
        }
      ],
      "message": "fees: add `CalculatePercentiles` function\n\n- The CalculatePercentiles function, given\n  a vector of feerates in the order they were added\n  to the block, will return the 25th, 50th, 75th,\n  and 95th percentile feerates.\n\n- Also add a unit test for this function.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-15T16:26:09Z"
      },
      "sha": "95e678d578c238ffadfadf119b7830ceb5a3c340"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDczZTcyY2MxMjlhZjE2NzlmN2IxODBlZjllZDgxNjhlMTI0ODkwZDE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73e72cc129af1679f7b180ef9ed8168e124890d1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/73e72cc129af1679f7b180ef9ed8168e124890d1",
      "tree": {
        "sha": "4cc518e76192c9ce950a6893affe42d8a5872e36",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4cc518e76192c9ce950a6893affe42d8a5872e36"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/95e678d578c238ffadfadf119b7830ceb5a3c340",
          "sha": "95e678d578c238ffadfadf119b7830ceb5a3c340",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/95e678d578c238ffadfadf119b7830ceb5a3c340"
        }
      ],
      "message": "fees: add `MemPoolForecaster` class\n\n- The mempool forecaster uses the unconfirmed transactions in the mempool\n  to generate a fee rate that a package should have for it to confirm as soon as possible.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-13T18:34:33Z"
      },
      "sha": "73e72cc129af1679f7b180ef9ed8168e124890d1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ4YzJmOGMyZjA4ZjM1OTk4YzNmZTFhMjM3MmY1ZWMzNjhjNzc2NGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d8c2f8c2f08f35998c3fe1a2372f5ec368c7764f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d8c2f8c2f08f35998c3fe1a2372f5ec368c7764f",
      "tree": {
        "sha": "b88aa3b749687e93f59af7fa3c895276e933eb8e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b88aa3b749687e93f59af7fa3c895276e933eb8e"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/73e72cc129af1679f7b180ef9ed8168e124890d1",
          "sha": "73e72cc129af1679f7b180ef9ed8168e124890d1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/73e72cc129af1679f7b180ef9ed8168e124890d1"
        }
      ],
      "message": "test: add mempool forecaster unit test",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-13T18:36:45Z"
      },
      "sha": "d8c2f8c2f08f35998c3fe1a2372f5ec368c7764f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA2M2JlNzViNzk5MWU2NWY3M2I4NjYxM2U5ZTQxNGRlNzkwMDliZGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/063be75b7991e65f73b86613e9e414de79009bdb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/063be75b7991e65f73b86613e9e414de79009bdb",
      "tree": {
        "sha": "6a7b13d4c100cbf00a4a5e3b8309d9d449e40fd1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6a7b13d4c100cbf00a4a5e3b8309d9d449e40fd1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d8c2f8c2f08f35998c3fe1a2372f5ec368c7764f",
          "sha": "d8c2f8c2f08f35998c3fe1a2372f5ec368c7764f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d8c2f8c2f08f35998c3fe1a2372f5ec368c7764f"
        }
      ],
      "message": "fees: cache `MemPoolPolicyEstimator` forecasts\n\n- Provide new forecast only when the time delta from previous\n  forecast is older than 30 seconds.\n\n- This caching helps avoid the high cost of frequently generating block templates.\n\nCo-authored-by: willcl-ark <will@256k1.dev>",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2024-11-13T18:38:17Z"
      },
      "sha": "063be75b7991e65f73b86613e9e414de79009bdb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE2NjVmZjE5YWNmMmExMzU2YjdjMjM3NjM3OWE5ZDI2NWZkYzhhZGQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "tree": {
        "sha": "26f223528e76680d34c5e21caa4aca1748ac438c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/26f223528e76680d34c5e21caa4aca1748ac438c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/063be75b7991e65f73b86613e9e414de79009bdb",
          "sha": "063be75b7991e65f73b86613e9e414de79009bdb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/063be75b7991e65f73b86613e9e414de79009bdb"
        }
      ],
      "message": "fees: add `ForecastFeeRateFromForecasters` method\n\n- Polls all registered forecasters and selects the lowest fee rate.",
      "committer": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-04-15T09:54:47Z"
      },
      "author": {
        "name": "ismaelsadeeq",
        "email": "ask4ismailsadiq@gmail.com",
        "date": "2025-01-15T17:57:02Z"
      },
      "sha": "a665ff19acf2a1356b7c2376379a9d265fdc8add"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17266129161,
      "node_id": "HRFPE_lADOABII586mWxXrzwAAAAQFJDkJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17266129161",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "commit_url": "https://api.github.com/repos/ismaelsadeeq/bitcoin/commits/a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "created_at": "2025-04-15T09:59:42Z"
    },
    {
      "event": "unlabeled",
      "id": 17267517148,
      "node_id": "UNLE_lADOABII586mWxXrzwAAAAQFOWbc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17267517148",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-15T11:31:17Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033340253",
      "pull_request_review_id": 2750226421,
      "id": 2033340253,
      "node_id": "PRRC_kwDOABII5855Mk9d",
      "diff_hunk": "@@ -0,0 +1,67 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <policy/fees/block_policy_estimator.h>\n+#include <policy/fees/forecaster.h>\n+#include <policy/fees/forecaster_man.h>\n+#include <policy/fees/forecaster_util.h>\n+\n+#include <algorithm>\n+#include <utility>\n+\n+void FeeRateForecasterManager::RegisterForecaster(std::shared_ptr<Forecaster> forecaster)\n+{\n+    forecasters.emplace(forecaster->GetForecastType(), forecaster);\n+}\n+\n+CBlockPolicyEstimator* FeeRateForecasterManager::GetBlockPolicyEstimator()\n+{\n+    Assume(forecasters.contains(ForecastType::BLOCK_POLICY));\n+    Forecaster* block_policy_estimator = forecasters.find(ForecastType::BLOCK_POLICY)->second.get();\n+    return dynamic_cast<CBlockPolicyEstimator*>(block_policy_estimator);\n+}\n+\n+std::pair<std::optional<ForecastResult>, std::vector<std::string>> FeeRateForecasterManager::GetFeeRateForecast(ConfirmationTarget& target)\n+{\n+    std::vector<std::string> err_messages;\n+    ForecastResult selected_forecast;\n+\n+    for (const auto& forecaster : forecasters) {\n+        auto curr_forecast = forecaster.second->EstimateFee(target);\n+\n+        if (curr_forecast.GetError().has_value()) {\n+            err_messages.emplace_back(\n+                strprintf(\"%s: %s\", forecastTypeToString(forecaster.first), curr_forecast.GetError().value_or(\"\")));\n+        }\n+\n+        // Handle case where the block policy estimator does not have enough data for fee estimates.\n+        if (curr_forecast.Empty() && forecaster.first == ForecastType::BLOCK_POLICY) {\n+            return {std::nullopt, err_messages};\n+        }\n+\n+        if (!curr_forecast.Empty()) {\n+            if (selected_forecast.Empty()) {\n+                // If there's no selected forecast, choose curr_forecast as selected_forecast.\n+                selected_forecast = curr_forecast;\n+            } else {\n+                // Otherwise, choose the smaller as selected_forecast.\n+                selected_forecast = std::min(selected_forecast, curr_forecast);",
      "path": "src/policy/fees/forecaster_man.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": null,
      "user": {
        "login": "frankomosh",
        "id": 33951953,
        "node_id": "MDQ6VXNlcjMzOTUxOTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/33951953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankomosh",
        "html_url": "https://github.com/frankomosh",
        "followers_url": "https://api.github.com/users/frankomosh/followers",
        "following_url": "https://api.github.com/users/frankomosh/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/frankomosh/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/frankomosh/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/frankomosh/subscriptions",
        "organizations_url": "https://api.github.com/users/frankomosh/orgs",
        "repos_url": "https://api.github.com/users/frankomosh/repos",
        "events_url": "https://api.github.com/users/frankomosh/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/frankomosh/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "from my understanding here, the manager is to always choose a forecast having the lowest high_priority fee rate from\r\n\r\n```bash\r\nbool operator<(const ForecastResult& other) const { return m_response.high_priority << other.m_response.high_priority; }\r\n\r\n```\r\n\r\nassuming we have mempool congestion spikes or other time-sensitive operations, wouldn’t we have a problem with underpayment if we always taking the minimum fee estimate here?",
      "created_at": "2025-04-08T14:32:14Z",
      "updated_at": "2025-04-08T14:32:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2033340253",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033340253"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033410318",
      "pull_request_review_id": 2750348550,
      "id": 2033410318,
      "node_id": "PRRC_kwDOABII5855M2EO",
      "diff_hunk": "@@ -0,0 +1,67 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <policy/fees/block_policy_estimator.h>\n+#include <policy/fees/forecaster.h>\n+#include <policy/fees/forecaster_man.h>\n+#include <policy/fees/forecaster_util.h>\n+\n+#include <algorithm>\n+#include <utility>\n+\n+void FeeRateForecasterManager::RegisterForecaster(std::shared_ptr<Forecaster> forecaster)\n+{\n+    forecasters.emplace(forecaster->GetForecastType(), forecaster);\n+}\n+\n+CBlockPolicyEstimator* FeeRateForecasterManager::GetBlockPolicyEstimator()\n+{\n+    Assume(forecasters.contains(ForecastType::BLOCK_POLICY));\n+    Forecaster* block_policy_estimator = forecasters.find(ForecastType::BLOCK_POLICY)->second.get();\n+    return dynamic_cast<CBlockPolicyEstimator*>(block_policy_estimator);\n+}\n+\n+std::pair<std::optional<ForecastResult>, std::vector<std::string>> FeeRateForecasterManager::GetFeeRateForecast(ConfirmationTarget& target)\n+{\n+    std::vector<std::string> err_messages;\n+    ForecastResult selected_forecast;\n+\n+    for (const auto& forecaster : forecasters) {\n+        auto curr_forecast = forecaster.second->EstimateFee(target);\n+\n+        if (curr_forecast.GetError().has_value()) {\n+            err_messages.emplace_back(\n+                strprintf(\"%s: %s\", forecastTypeToString(forecaster.first), curr_forecast.GetError().value_or(\"\")));\n+        }\n+\n+        // Handle case where the block policy estimator does not have enough data for fee estimates.\n+        if (curr_forecast.Empty() && forecaster.first == ForecastType::BLOCK_POLICY) {\n+            return {std::nullopt, err_messages};\n+        }\n+\n+        if (!curr_forecast.Empty()) {\n+            if (selected_forecast.Empty()) {\n+                // If there's no selected forecast, choose curr_forecast as selected_forecast.\n+                selected_forecast = curr_forecast;\n+            } else {\n+                // Otherwise, choose the smaller as selected_forecast.\n+                selected_forecast = std::min(selected_forecast, curr_forecast);",
      "path": "src/policy/fees/forecaster_man.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": 2033340253,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good question, @frankomosh.\r\n\r\nYou're right to think the lowest fee rate might be an underestimate during instant spikes.\r\n\r\nThis approach was specifically chosen to address the concern raised by @harding here: https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/6.\r\n\r\nAlthough the concern is currently theoretical, @harding raised a valid point, and it seems reasonable to use mempool forecasts to adjust or correct block policy forecasts.\r\n\r\nEmpirical data also shows that this approach maintains around 60% accuracy, which performs better than the current status quo for economical fee rate forecasts: https://delvingbitcoin.org/t/mempool-based-fee-estimation-on-bitcoin-core/703/8?u=ismaelsadeeq.\r\n\r\nMy goal is to fix these issues with the following steps:\r\n\r\n1. Select the lower value between the mempool forecast and the block policy forecast.\r\n2. Return the certainty level of the mempool fee rate forecast based on statistics from previous block data in the next PR after this — see the POC here: https://github.com/bitcoin/bitcoin/pull/30157.\r\n3. Use fee rate forecast from forecaster manager in the wallet \r\n\r\nPotential Next Steps\r\n\r\n1. Ensure the mempool is not being manipulated, and use the mempool forecast even during congestion for ASAP fee rate estimates. / Or expose the mempool state so users can fee bump when congestion persists and they absolutely need to do so.\r\n2. Switch to a more economical fee rate forecaster for the long term, because the current one pays more than necessary, as by quite a large margin see research https://bitcoin.stackexchange.com/questions/124227/utility-of-longterm-fee-estimation/.\r\n",
      "created_at": "2025-04-08T15:06:05Z",
      "updated_at": "2025-04-08T15:06:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2033410318",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033410318"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034696995",
      "pull_request_review_id": 2752429651,
      "id": 2034696995,
      "node_id": "PRRC_kwDOABII5855RwMj",
      "diff_hunk": "@@ -0,0 +1,67 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <policy/fees/block_policy_estimator.h>\n+#include <policy/fees/forecaster.h>\n+#include <policy/fees/forecaster_man.h>\n+#include <policy/fees/forecaster_util.h>\n+\n+#include <algorithm>\n+#include <utility>\n+\n+void FeeRateForecasterManager::RegisterForecaster(std::shared_ptr<Forecaster> forecaster)\n+{\n+    forecasters.emplace(forecaster->GetForecastType(), forecaster);\n+}\n+\n+CBlockPolicyEstimator* FeeRateForecasterManager::GetBlockPolicyEstimator()\n+{\n+    Assume(forecasters.contains(ForecastType::BLOCK_POLICY));\n+    Forecaster* block_policy_estimator = forecasters.find(ForecastType::BLOCK_POLICY)->second.get();\n+    return dynamic_cast<CBlockPolicyEstimator*>(block_policy_estimator);\n+}\n+\n+std::pair<std::optional<ForecastResult>, std::vector<std::string>> FeeRateForecasterManager::GetFeeRateForecast(ConfirmationTarget& target)\n+{\n+    std::vector<std::string> err_messages;\n+    ForecastResult selected_forecast;\n+\n+    for (const auto& forecaster : forecasters) {\n+        auto curr_forecast = forecaster.second->EstimateFee(target);\n+\n+        if (curr_forecast.GetError().has_value()) {\n+            err_messages.emplace_back(\n+                strprintf(\"%s: %s\", forecastTypeToString(forecaster.first), curr_forecast.GetError().value_or(\"\")));\n+        }\n+\n+        // Handle case where the block policy estimator does not have enough data for fee estimates.\n+        if (curr_forecast.Empty() && forecaster.first == ForecastType::BLOCK_POLICY) {\n+            return {std::nullopt, err_messages};\n+        }\n+\n+        if (!curr_forecast.Empty()) {\n+            if (selected_forecast.Empty()) {\n+                // If there's no selected forecast, choose curr_forecast as selected_forecast.\n+                selected_forecast = curr_forecast;\n+            } else {\n+                // Otherwise, choose the smaller as selected_forecast.\n+                selected_forecast = std::min(selected_forecast, curr_forecast);",
      "path": "src/policy/fees/forecaster_man.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": 2033340253,
      "user": {
        "login": "frankomosh",
        "id": 33951953,
        "node_id": "MDQ6VXNlcjMzOTUxOTUz",
        "avatar_url": "https://avatars.githubusercontent.com/u/33951953?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/frankomosh",
        "html_url": "https://github.com/frankomosh",
        "followers_url": "https://api.github.com/users/frankomosh/followers",
        "following_url": "https://api.github.com/users/frankomosh/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/frankomosh/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/frankomosh/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/frankomosh/subscriptions",
        "organizations_url": "https://api.github.com/users/frankomosh/orgs",
        "repos_url": "https://api.github.com/users/frankomosh/repos",
        "events_url": "https://api.github.com/users/frankomosh/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/frankomosh/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thanks, @ismaelsadeeq, for sharing more context on this topic. I now see and understand why you took this approach. I think that the plan for improvement is also solid.\r\n\r\nIn `1. Select the lower value between the mempool forecast and the block policy forecast.` I appreciate the approach of selecting the lower value forecasters to avoid fee overpayment. \r\n\r\nAdditionally,  I would like to ask if we could improve accuracy by implementing a weighted selection strategy based on confirmation targets (this is just theoretical thinking since I haven’t done any tests on it).\r\n\r\nFrom the little context I have tried to gather, I see that different forecasters seem to do well in different scenarios i.e `CBlockPolicyEstimator` likely offers a more reliable estimates during periods of stability and for longer confirmation targets, while the `MempoolForecaster` might offer better predictions during rapid changes and for immediate confirmation targets of like (1-2 blocks).\r\n\r\nWould it, therefore, be worth considering a more targeted approach where we prefer MempoolForecaster for short-term targets and gradually shift to CBlockPolicyEstimator for longer-term targets of 3+ blocks? \r\n\r\nI think this could maintain the fee savings of your current approach while improving accuracy in time-sensitive scenarios where underpayment could have repercussions for users. \r\nEven if not for this PR, it might be something to consider for a future enhancement.\r\n\r\n(Note that I’m making assumptions here and have not looked into the overhead of actually doing this.)",
      "created_at": "2025-04-09T07:41:46Z",
      "updated_at": "2025-04-09T07:41:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2034696995",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034696995"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035021352",
      "pull_request_review_id": 2752914132,
      "id": 2035021352,
      "node_id": "PRRC_kwDOABII5855S_Yo",
      "diff_hunk": "@@ -0,0 +1,67 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license. See the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <logging.h>\n+#include <policy/fees/block_policy_estimator.h>\n+#include <policy/fees/forecaster.h>\n+#include <policy/fees/forecaster_man.h>\n+#include <policy/fees/forecaster_util.h>\n+\n+#include <algorithm>\n+#include <utility>\n+\n+void FeeRateForecasterManager::RegisterForecaster(std::shared_ptr<Forecaster> forecaster)\n+{\n+    forecasters.emplace(forecaster->GetForecastType(), forecaster);\n+}\n+\n+CBlockPolicyEstimator* FeeRateForecasterManager::GetBlockPolicyEstimator()\n+{\n+    Assume(forecasters.contains(ForecastType::BLOCK_POLICY));\n+    Forecaster* block_policy_estimator = forecasters.find(ForecastType::BLOCK_POLICY)->second.get();\n+    return dynamic_cast<CBlockPolicyEstimator*>(block_policy_estimator);\n+}\n+\n+std::pair<std::optional<ForecastResult>, std::vector<std::string>> FeeRateForecasterManager::GetFeeRateForecast(ConfirmationTarget& target)\n+{\n+    std::vector<std::string> err_messages;\n+    ForecastResult selected_forecast;\n+\n+    for (const auto& forecaster : forecasters) {\n+        auto curr_forecast = forecaster.second->EstimateFee(target);\n+\n+        if (curr_forecast.GetError().has_value()) {\n+            err_messages.emplace_back(\n+                strprintf(\"%s: %s\", forecastTypeToString(forecaster.first), curr_forecast.GetError().value_or(\"\")));\n+        }\n+\n+        // Handle case where the block policy estimator does not have enough data for fee estimates.\n+        if (curr_forecast.Empty() && forecaster.first == ForecastType::BLOCK_POLICY) {\n+            return {std::nullopt, err_messages};\n+        }\n+\n+        if (!curr_forecast.Empty()) {\n+            if (selected_forecast.Empty()) {\n+                // If there's no selected forecast, choose curr_forecast as selected_forecast.\n+                selected_forecast = curr_forecast;\n+            } else {\n+                // Otherwise, choose the smaller as selected_forecast.\n+                selected_forecast = std::min(selected_forecast, curr_forecast);",
      "path": "src/policy/fees/forecaster_man.cpp",
      "position": null,
      "original_position": 50,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": 2033340253,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Mempool forecaster only provide fee rate forecast for 1-2 blocks.\r\nsee `MEMPOOL_FORECAST_MAX_TARGET` constant in  https://github.com/bitcoin/bitcoin/pull/31664/commits/c7cdeafd7045c794b289e2438cc60baeee7e6f69\r\n\r\n",
      "created_at": "2025-04-09T10:04:26Z",
      "updated_at": "2025-04-09T10:52:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2035021352",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035021352"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035786192",
      "pull_request_review_id": 2754169488,
      "id": 2035786192,
      "node_id": "PRRC_kwDOABII5855V6HQ",
      "diff_hunk": "@@ -0,0 +1,161 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+#define BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+\n+#include <util/feefrac.h>\n+\n+#include <optional>\n+#include <string>\n+\n+/**\n+ * @enum ForecastType\n+ * Identifier for fee rate forecasters.\n+ */\n+enum class ForecastType {\n+    BLOCK_POLICY,\n+    MEMPOOL_FORECAST,\n+};\n+\n+/**\n+ * @class ForecastResult\n+ * Represents the response returned by a fee rate forecaster.\n+ */\n+class ForecastResult\n+{\n+public:\n+    /**\n+     * @struct ForecastResponse\n+     * Contains fee rate forecast metadata.\n+     */\n+    struct ForecastResponse {\n+        /**\n+         * An estimated fee rate as a result of a forecast for economical transactions.\n+         * This value is sufficient to confirm a package within the specified target.\n+         */\n+        FeeFrac low_priority;\n+\n+        /**\n+         * An estimated fee rate as a result of forecast for high-priority transactions.\n+         * This value is for users willing to pay more to increase the likelihood of\n+         * confirmation within the specified target.\n+         */\n+        FeeFrac high_priority;\n+\n+        /**\n+         * The chain tip at which the forecast was made.\n+         */\n+        unsigned int current_block_height{0};\n+        /* This identifies which forecaster is providing this feerate forecast */\n+        ForecastType forecaster;\n+    };\n+\n+    /**\n+     * Default ForecastResult constructor.\n+     */\n+    ForecastResult() {}\n+\n+    /**\n+     * Constructs a ForecastResult object.\n+     * @param response The forecast response data.\n+     * @param error An optional error message (default: nullopt).\n+     */\n+    ForecastResult(ForecastResponse response, std::optional<std::string> error = std::nullopt)\n+        : m_response(std::move(response)), m_error(std::move(error))\n+    {\n+    }\n+\n+    /**\n+     * Checks if the forecast response is empty.\n+     * @return true if both low and high priority forecast estimates are empty, false otherwise.\n+     */\n+    bool Empty() const\n+    {\n+        return m_response.low_priority.IsEmpty() && m_response.high_priority.IsEmpty();\n+    }\n+\n+    /**\n+     * Overloaded less than operator which compares two ForecastResult objects based on\n+     * their high priority estimates.\n+     * @param other The other ForecastResult object to compare with.\n+     * @return true if the current object's high priority estimate is less than the other, false otherwise.\n+     */\n+    bool operator<(const ForecastResult& other) const\n+    {\n+        return m_response.high_priority << other.m_response.high_priority;\n+    }\n+\n+    /**\n+     * Retrieves the forecast response.\n+     * @return A reference to the forecast response metadata.\n+     */\n+    const ForecastResponse& GetResponse() const\n+    {\n+        return m_response;\n+    }\n+\n+    /**\n+     * Retrieves the error message, if any.\n+     * @return An optional string containing the error message.\n+     */\n+    const std::optional<std::string>& GetError() const\n+    {\n+        return m_error;\n+    }\n+\n+private:\n+    ForecastResponse m_response;        ///< The forecast response data.\n+    std::optional<std::string> m_error; ///< Optional error message.\n+};\n+\n+/**\n+ * @enum ConfirmationTargetType\n+ * Defines the types of confirmation targets for fee rate forecasters.\n+ */\n+enum class ConfirmationTargetType {\n+    BLOCKS, /**< Forecasters providing estimates for a specific number of blocks use this type. */\n+};\n+\n+/**\n+ * @struct ConfirmationTarget\n+ * Represents the input for a parameter of fee rate forecaster.\n+ */\n+struct ConfirmationTarget {\n+    unsigned int value;\n+    ConfirmationTargetType type;\n+};",
      "path": "src/policy/fees/forecaster_util.h",
      "position": null,
      "original_position": 128,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Are there any specific ideas for another `ConfirmationTargetType`? The only type defined here is a number of blocks (which could just be an integer) so I'm wondering why the complexity?",
      "created_at": "2025-04-09T17:04:05Z",
      "updated_at": "2025-04-09T18:12:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2035786192",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035786192"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 117,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035883246",
      "pull_request_review_id": 2754169488,
      "id": 2035883246,
      "node_id": "PRRC_kwDOABII5855WRzu",
      "diff_hunk": "@@ -723,6 +724,29 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget) const\n     return estimateRawFee(confTarget, DOUBLE_SUCCESS_PCT, FeeEstimateHorizon::MED_HALFLIFE);\n }\n \n+ForecastResult CBlockPolicyEstimator::EstimateFee(ConfirmationTarget& target)\n+{\n+    ForecastResult::ForecastResponse response;\n+    response.forecaster = ForecastType::BLOCK_POLICY;\n+    if (target.type != ConfirmationTargetType::BLOCKS) {\n+        return ForecastResult(response, \"Incorrect Confirmation target, expecting blocks\");\n+    }\n+    FeeCalculation feeCalcConservative;\n+    CFeeRate feerate_conservative{estimateSmartFee(target.value, &feeCalcConservative, /**conservative**/ true)};\n+    FeeCalculation feeCalcEconomical;\n+    CFeeRate feerate_economical{estimateSmartFee(target.value, &feeCalcEconomical, /**conservative**/ false)};\n+    response.current_block_height = feeCalcEconomical.bestheight;\n+    if (feerate_conservative == CFeeRate(0) || feerate_economical == CFeeRate(0)) {\n+        return ForecastResult(response, \"Insufficient data or no feerate found\");\n+    }\n+    // Note: size can be any positive non-zero integer; the evaluated fee/size will result in the same fee rate,\n+    // and we only care that the fee rate remains consistent.\n+    int32_t size = 1000;\n+    response.low_priority = FeeFrac(feerate_economical.GetFee(size), size);\n+    response.high_priority = FeeFrac(feerate_conservative.GetFee(size), size);",
      "path": "src/policy/fees/block_policy_estimator.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "9355da6de4a71104dc3319e279047cdc5c90b0aa",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "this might just be a personal opinion, but \"low priority\" and \"high priority\" usually mean different block targets to me. people who are accustomed to the mempool.space wording might say the same. but really, here and in the `MempoolForecaster`, it's a measure of how conservative/confident we are in our estimate no?\r\n\r\n![image](https://github.com/user-attachments/assets/11477535-87d2-4ad7-b9ab-4f3d6b95c86a)\r\n",
      "created_at": "2025-04-09T18:11:13Z",
      "updated_at": "2025-04-09T18:12:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2035883246",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035883246"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 745,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 746,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035947015",
      "pull_request_review_id": 2754452475,
      "id": 2035947015,
      "node_id": "PRRC_kwDOABII5855WhYH",
      "diff_hunk": "@@ -723,6 +724,29 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget) const\n     return estimateRawFee(confTarget, DOUBLE_SUCCESS_PCT, FeeEstimateHorizon::MED_HALFLIFE);\n }\n \n+ForecastResult CBlockPolicyEstimator::EstimateFee(ConfirmationTarget& target)\n+{\n+    ForecastResult::ForecastResponse response;\n+    response.forecaster = ForecastType::BLOCK_POLICY;\n+    if (target.type != ConfirmationTargetType::BLOCKS) {\n+        return ForecastResult(response, \"Incorrect Confirmation target, expecting blocks\");\n+    }\n+    FeeCalculation feeCalcConservative;\n+    CFeeRate feerate_conservative{estimateSmartFee(target.value, &feeCalcConservative, /**conservative**/ true)};\n+    FeeCalculation feeCalcEconomical;\n+    CFeeRate feerate_economical{estimateSmartFee(target.value, &feeCalcEconomical, /**conservative**/ false)};\n+    response.current_block_height = feeCalcEconomical.bestheight;\n+    if (feerate_conservative == CFeeRate(0) || feerate_economical == CFeeRate(0)) {\n+        return ForecastResult(response, \"Insufficient data or no feerate found\");\n+    }\n+    // Note: size can be any positive non-zero integer; the evaluated fee/size will result in the same fee rate,\n+    // and we only care that the fee rate remains consistent.\n+    int32_t size = 1000;\n+    response.low_priority = FeeFrac(feerate_economical.GetFee(size), size);\n+    response.high_priority = FeeFrac(feerate_conservative.GetFee(size), size);",
      "path": "src/policy/fees/block_policy_estimator.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "9355da6de4a71104dc3319e279047cdc5c90b0aa",
      "in_reply_to_id": 2035883246,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good point Yes, it will be better to maintain the conservative and economical name?\r\nHappy to update.",
      "created_at": "2025-04-09T18:54:37Z",
      "updated_at": "2025-04-09T18:54:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2035947015",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035947015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 745,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 746,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035983336",
      "pull_request_review_id": 2754507521,
      "id": 2035983336,
      "node_id": "PRRC_kwDOABII5855WqPo",
      "diff_hunk": "@@ -0,0 +1,161 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+#define BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+\n+#include <util/feefrac.h>\n+\n+#include <optional>\n+#include <string>\n+\n+/**\n+ * @enum ForecastType\n+ * Identifier for fee rate forecasters.\n+ */\n+enum class ForecastType {\n+    BLOCK_POLICY,\n+    MEMPOOL_FORECAST,\n+};\n+\n+/**\n+ * @class ForecastResult\n+ * Represents the response returned by a fee rate forecaster.\n+ */\n+class ForecastResult\n+{\n+public:\n+    /**\n+     * @struct ForecastResponse\n+     * Contains fee rate forecast metadata.\n+     */\n+    struct ForecastResponse {\n+        /**\n+         * An estimated fee rate as a result of a forecast for economical transactions.\n+         * This value is sufficient to confirm a package within the specified target.\n+         */\n+        FeeFrac low_priority;\n+\n+        /**\n+         * An estimated fee rate as a result of forecast for high-priority transactions.\n+         * This value is for users willing to pay more to increase the likelihood of\n+         * confirmation within the specified target.\n+         */\n+        FeeFrac high_priority;\n+\n+        /**\n+         * The chain tip at which the forecast was made.\n+         */\n+        unsigned int current_block_height{0};\n+        /* This identifies which forecaster is providing this feerate forecast */\n+        ForecastType forecaster;\n+    };\n+\n+    /**\n+     * Default ForecastResult constructor.\n+     */\n+    ForecastResult() {}\n+\n+    /**\n+     * Constructs a ForecastResult object.\n+     * @param response The forecast response data.\n+     * @param error An optional error message (default: nullopt).\n+     */\n+    ForecastResult(ForecastResponse response, std::optional<std::string> error = std::nullopt)\n+        : m_response(std::move(response)), m_error(std::move(error))\n+    {\n+    }\n+\n+    /**\n+     * Checks if the forecast response is empty.\n+     * @return true if both low and high priority forecast estimates are empty, false otherwise.\n+     */\n+    bool Empty() const\n+    {\n+        return m_response.low_priority.IsEmpty() && m_response.high_priority.IsEmpty();\n+    }\n+\n+    /**\n+     * Overloaded less than operator which compares two ForecastResult objects based on\n+     * their high priority estimates.\n+     * @param other The other ForecastResult object to compare with.\n+     * @return true if the current object's high priority estimate is less than the other, false otherwise.\n+     */\n+    bool operator<(const ForecastResult& other) const\n+    {\n+        return m_response.high_priority << other.m_response.high_priority;\n+    }\n+\n+    /**\n+     * Retrieves the forecast response.\n+     * @return A reference to the forecast response metadata.\n+     */\n+    const ForecastResponse& GetResponse() const\n+    {\n+        return m_response;\n+    }\n+\n+    /**\n+     * Retrieves the error message, if any.\n+     * @return An optional string containing the error message.\n+     */\n+    const std::optional<std::string>& GetError() const\n+    {\n+        return m_error;\n+    }\n+\n+private:\n+    ForecastResponse m_response;        ///< The forecast response data.\n+    std::optional<std::string> m_error; ///< Optional error message.\n+};\n+\n+/**\n+ * @enum ConfirmationTargetType\n+ * Defines the types of confirmation targets for fee rate forecasters.\n+ */\n+enum class ConfirmationTargetType {\n+    BLOCKS, /**< Forecasters providing estimates for a specific number of blocks use this type. */\n+};\n+\n+/**\n+ * @struct ConfirmationTarget\n+ * Represents the input for a parameter of fee rate forecaster.\n+ */\n+struct ConfirmationTarget {\n+    unsigned int value;\n+    ConfirmationTargetType type;\n+};",
      "path": "src/policy/fees/forecaster_util.h",
      "position": null,
      "original_position": 128,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": 2035786192,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes, as is now, it might seem like overkill (though it will be useful in the future). This is just forward-looking I believe that, realistically, businesses and users care more about time in minutes or hours, etc.\r\n\r\nSo, I envision a fee rate forecaster that accepts input based on time in hours rather than blocks. For example: 'Give me a fee rate that will allow my transaction to confirm within the next 4 hours.'\r\n\r\nthis is a wishful thinking for now; no concrete idea or even reviewable design about it\r\nI don’t have a strong opinion on this we can easily refactor and enable it when needed.\r\n\r\nHappy to remove it if we prefer to keep only structures that are used immediately.",
      "created_at": "2025-04-09T19:07:13Z",
      "updated_at": "2025-04-09T19:07:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2035983336",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035983336"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 117,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036045272",
      "pull_request_review_id": 2754621531,
      "id": 2036045272,
      "node_id": "PRRC_kwDOABII5855W5XY",
      "diff_hunk": "@@ -0,0 +1,161 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+#define BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+\n+#include <util/feefrac.h>\n+\n+#include <optional>\n+#include <string>\n+\n+/**\n+ * @enum ForecastType\n+ * Identifier for fee rate forecasters.\n+ */\n+enum class ForecastType {\n+    BLOCK_POLICY,\n+    MEMPOOL_FORECAST,\n+};\n+\n+/**\n+ * @class ForecastResult\n+ * Represents the response returned by a fee rate forecaster.\n+ */\n+class ForecastResult\n+{\n+public:\n+    /**\n+     * @struct ForecastResponse\n+     * Contains fee rate forecast metadata.\n+     */\n+    struct ForecastResponse {\n+        /**\n+         * An estimated fee rate as a result of a forecast for economical transactions.\n+         * This value is sufficient to confirm a package within the specified target.\n+         */\n+        FeeFrac low_priority;\n+\n+        /**\n+         * An estimated fee rate as a result of forecast for high-priority transactions.\n+         * This value is for users willing to pay more to increase the likelihood of\n+         * confirmation within the specified target.\n+         */\n+        FeeFrac high_priority;\n+\n+        /**\n+         * The chain tip at which the forecast was made.\n+         */\n+        unsigned int current_block_height{0};\n+        /* This identifies which forecaster is providing this feerate forecast */\n+        ForecastType forecaster;\n+    };\n+\n+    /**\n+     * Default ForecastResult constructor.\n+     */\n+    ForecastResult() {}\n+\n+    /**\n+     * Constructs a ForecastResult object.\n+     * @param response The forecast response data.\n+     * @param error An optional error message (default: nullopt).\n+     */\n+    ForecastResult(ForecastResponse response, std::optional<std::string> error = std::nullopt)\n+        : m_response(std::move(response)), m_error(std::move(error))\n+    {\n+    }\n+\n+    /**\n+     * Checks if the forecast response is empty.\n+     * @return true if both low and high priority forecast estimates are empty, false otherwise.\n+     */\n+    bool Empty() const\n+    {\n+        return m_response.low_priority.IsEmpty() && m_response.high_priority.IsEmpty();\n+    }\n+\n+    /**\n+     * Overloaded less than operator which compares two ForecastResult objects based on\n+     * their high priority estimates.\n+     * @param other The other ForecastResult object to compare with.\n+     * @return true if the current object's high priority estimate is less than the other, false otherwise.\n+     */\n+    bool operator<(const ForecastResult& other) const\n+    {\n+        return m_response.high_priority << other.m_response.high_priority;\n+    }\n+\n+    /**\n+     * Retrieves the forecast response.\n+     * @return A reference to the forecast response metadata.\n+     */\n+    const ForecastResponse& GetResponse() const\n+    {\n+        return m_response;\n+    }\n+\n+    /**\n+     * Retrieves the error message, if any.\n+     * @return An optional string containing the error message.\n+     */\n+    const std::optional<std::string>& GetError() const\n+    {\n+        return m_error;\n+    }\n+\n+private:\n+    ForecastResponse m_response;        ///< The forecast response data.\n+    std::optional<std::string> m_error; ///< Optional error message.\n+};\n+\n+/**\n+ * @enum ConfirmationTargetType\n+ * Defines the types of confirmation targets for fee rate forecasters.\n+ */\n+enum class ConfirmationTargetType {\n+    BLOCKS, /**< Forecasters providing estimates for a specific number of blocks use this type. */\n+};\n+\n+/**\n+ * @struct ConfirmationTarget\n+ * Represents the input for a parameter of fee rate forecaster.\n+ */\n+struct ConfirmationTarget {\n+    unsigned int value;\n+    ConfirmationTargetType type;\n+};",
      "path": "src/policy/fees/forecaster_util.h",
      "position": null,
      "original_position": 128,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": 2035786192,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If there aren't any concrete ideas, it seems better to add the extra complexity if/when there is a reason to. fwiw I don't see why translating between hours and blocks would require another target type?",
      "created_at": "2025-04-09T19:48:33Z",
      "updated_at": "2025-04-09T19:48:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2036045272",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036045272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 117,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2037576101",
      "pull_request_review_id": 2757094288,
      "id": 2037576101,
      "node_id": "PRRC_kwDOABII5855cvGl",
      "diff_hunk": "@@ -31,6 +31,13 @@ ForecastResult MemPoolForecaster::EstimateFee(ConfirmationTarget& target)\n                                             target.value, MEMPOOL_FORECAST_MAX_TARGET, MEMPOOL_FORECAST_MAX_TARGET));\n     }\n \n+    const auto cached_estimate = cache.get();",
      "path": "src/policy/fees/mempool_forecaster.cpp",
      "position": 31,
      "original_position": 4,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "5bd2220422af02b20cb94dcd4c0e2c38e0284952",
      "in_reply_to_id": null,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Already commented during the [review club](https://bitcoincore.reviews/31664) but leaving a comment to make it easy to track.\r\n\r\nThe cache should not be returned when there is a chain reorganization. This can be done by simply checking if there was a reorganization during the last `CACHE_LIFE` window or by clearing the cache after a reorganization.\r\n\r\nPersonally, clearing the cache seems to me to be the best option, since the method can also be used for testing, as we may want to call the forecaster several times and do not want the cache to influence it.",
      "created_at": "2025-04-10T14:35:27Z",
      "updated_at": "2025-04-10T14:35:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2037576101",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2037576101"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 31,
      "original_line": 31,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2041135708",
      "pull_request_review_id": 2762770842,
      "id": 2041135708,
      "node_id": "PRRC_kwDOABII5855qUJc",
      "diff_hunk": "@@ -0,0 +1,161 @@\n+// Copyright (c) 2025 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#ifndef BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+#define BITCOIN_POLICY_FEES_FORECASTER_UTIL_H\n+\n+#include <util/feefrac.h>\n+\n+#include <optional>\n+#include <string>\n+\n+/**\n+ * @enum ForecastType\n+ * Identifier for fee rate forecasters.\n+ */\n+enum class ForecastType {\n+    BLOCK_POLICY,\n+    MEMPOOL_FORECAST,\n+};\n+\n+/**\n+ * @class ForecastResult\n+ * Represents the response returned by a fee rate forecaster.\n+ */\n+class ForecastResult\n+{\n+public:\n+    /**\n+     * @struct ForecastResponse\n+     * Contains fee rate forecast metadata.\n+     */\n+    struct ForecastResponse {\n+        /**\n+         * An estimated fee rate as a result of a forecast for economical transactions.\n+         * This value is sufficient to confirm a package within the specified target.\n+         */\n+        FeeFrac low_priority;\n+\n+        /**\n+         * An estimated fee rate as a result of forecast for high-priority transactions.\n+         * This value is for users willing to pay more to increase the likelihood of\n+         * confirmation within the specified target.\n+         */\n+        FeeFrac high_priority;\n+\n+        /**\n+         * The chain tip at which the forecast was made.\n+         */\n+        unsigned int current_block_height{0};\n+        /* This identifies which forecaster is providing this feerate forecast */\n+        ForecastType forecaster;\n+    };\n+\n+    /**\n+     * Default ForecastResult constructor.\n+     */\n+    ForecastResult() {}\n+\n+    /**\n+     * Constructs a ForecastResult object.\n+     * @param response The forecast response data.\n+     * @param error An optional error message (default: nullopt).\n+     */\n+    ForecastResult(ForecastResponse response, std::optional<std::string> error = std::nullopt)\n+        : m_response(std::move(response)), m_error(std::move(error))\n+    {\n+    }\n+\n+    /**\n+     * Checks if the forecast response is empty.\n+     * @return true if both low and high priority forecast estimates are empty, false otherwise.\n+     */\n+    bool Empty() const\n+    {\n+        return m_response.low_priority.IsEmpty() && m_response.high_priority.IsEmpty();\n+    }\n+\n+    /**\n+     * Overloaded less than operator which compares two ForecastResult objects based on\n+     * their high priority estimates.\n+     * @param other The other ForecastResult object to compare with.\n+     * @return true if the current object's high priority estimate is less than the other, false otherwise.\n+     */\n+    bool operator<(const ForecastResult& other) const\n+    {\n+        return m_response.high_priority << other.m_response.high_priority;\n+    }\n+\n+    /**\n+     * Retrieves the forecast response.\n+     * @return A reference to the forecast response metadata.\n+     */\n+    const ForecastResponse& GetResponse() const\n+    {\n+        return m_response;\n+    }\n+\n+    /**\n+     * Retrieves the error message, if any.\n+     * @return An optional string containing the error message.\n+     */\n+    const std::optional<std::string>& GetError() const\n+    {\n+        return m_error;\n+    }\n+\n+private:\n+    ForecastResponse m_response;        ///< The forecast response data.\n+    std::optional<std::string> m_error; ///< Optional error message.\n+};\n+\n+/**\n+ * @enum ConfirmationTargetType\n+ * Defines the types of confirmation targets for fee rate forecasters.\n+ */\n+enum class ConfirmationTargetType {\n+    BLOCKS, /**< Forecasters providing estimates for a specific number of blocks use this type. */\n+};\n+\n+/**\n+ * @struct ConfirmationTarget\n+ * Represents the input for a parameter of fee rate forecaster.\n+ */\n+struct ConfirmationTarget {\n+    unsigned int value;\n+    ConfirmationTargetType type;\n+};",
      "path": "src/policy/fees/forecaster_util.h",
      "position": null,
      "original_position": 128,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "c6b94403bf9d5bf4fe9d5e5360b3d2c30a430d69",
      "in_reply_to_id": 2035786192,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed in recent push.",
      "created_at": "2025-04-13T14:21:45Z",
      "updated_at": "2025-04-13T14:21:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2041135708",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2041135708"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 117,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2041135772",
      "pull_request_review_id": 2762770887,
      "id": 2041135772,
      "node_id": "PRRC_kwDOABII5855qUKc",
      "diff_hunk": "@@ -723,6 +724,29 @@ CFeeRate CBlockPolicyEstimator::estimateFee(int confTarget) const\n     return estimateRawFee(confTarget, DOUBLE_SUCCESS_PCT, FeeEstimateHorizon::MED_HALFLIFE);\n }\n \n+ForecastResult CBlockPolicyEstimator::EstimateFee(ConfirmationTarget& target)\n+{\n+    ForecastResult::ForecastResponse response;\n+    response.forecaster = ForecastType::BLOCK_POLICY;\n+    if (target.type != ConfirmationTargetType::BLOCKS) {\n+        return ForecastResult(response, \"Incorrect Confirmation target, expecting blocks\");\n+    }\n+    FeeCalculation feeCalcConservative;\n+    CFeeRate feerate_conservative{estimateSmartFee(target.value, &feeCalcConservative, /**conservative**/ true)};\n+    FeeCalculation feeCalcEconomical;\n+    CFeeRate feerate_economical{estimateSmartFee(target.value, &feeCalcEconomical, /**conservative**/ false)};\n+    response.current_block_height = feeCalcEconomical.bestheight;\n+    if (feerate_conservative == CFeeRate(0) || feerate_economical == CFeeRate(0)) {\n+        return ForecastResult(response, \"Insufficient data or no feerate found\");\n+    }\n+    // Note: size can be any positive non-zero integer; the evaluated fee/size will result in the same fee rate,\n+    // and we only care that the fee rate remains consistent.\n+    int32_t size = 1000;\n+    response.low_priority = FeeFrac(feerate_economical.GetFee(size), size);\n+    response.high_priority = FeeFrac(feerate_conservative.GetFee(size), size);",
      "path": "src/policy/fees/block_policy_estimator.cpp",
      "position": null,
      "original_position": 40,
      "commit_id": "a665ff19acf2a1356b7c2376379a9d265fdc8add",
      "original_commit_id": "9355da6de4a71104dc3319e279047cdc5c90b0aa",
      "in_reply_to_id": 2035883246,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is fixed now.",
      "created_at": "2025-04-13T14:22:00Z",
      "updated_at": "2025-04-13T14:22:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31664#discussion_r2041135772",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2041135772"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31664"
        }
      },
      "start_line": null,
      "original_start_line": 745,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 746,
      "side": "RIGHT"
    }
  ]
}