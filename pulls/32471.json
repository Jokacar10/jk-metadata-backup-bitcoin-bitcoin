{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471",
    "id": 2513877394,
    "node_id": "PR_kwDOABII586V1rmS",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32471",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32471.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32471.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
    "number": 32471,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "wallet/rpc: fix listdescriptors RPC fails to return descriptors with private key information when wallet contains descriptors missing any key",
    "user": {
      "login": "Eunovo",
      "id": 37949128,
      "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
      "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Eunovo",
      "html_url": "https://github.com/Eunovo",
      "followers_url": "https://api.github.com/users/Eunovo/followers",
      "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
      "organizations_url": "https://api.github.com/users/Eunovo/orgs",
      "repos_url": "https://api.github.com/users/Eunovo/repos",
      "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/Eunovo/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "_TLDR:\r\nCurrently, `listdescriptors [private=true]` will fail for a non-watch-only wallet if any descriptor has a missing private key(e.g `tr()`, `multi()`, etc.). This PR changes that while making sure `listdescriptors [private=true]` still fails if there no private keys. Closes #32078_ \r\n\r\nIn non-watch-only wallets, it's possible to import descriptors as long as at least one private key is included. It's important that users can still view these descriptors when they need to create a backupâ€”even if some private keys are missing ([#32078 (comment)](https://github.com/bitcoin/bitcoin/issues/32078#issuecomment-2781428475)). This change makes it possible to do so.\r\n\r\nThis change also helps prevent `listdescriptors true` from failing completely, because one descriptor is missing some private keys.\r\n\r\n### Notes\r\n- The new behaviour is applied to all descriptors including miniscript descriptors\r\n- `listdescriptors true` still fails for watch-only wallets to preserve existing behaviour https://github.com/bitcoin/bitcoin/pull/24361#discussion_r920801352\r\n- Wallet migration logic previously used `Descriptor::ToPrivateString()` to determine which descriptor was watchonly. This means that modifying the `ToPrivateString()` behaviour caused descriptors that were previously recognized as \"watchonly\" to be \"non-watchonly\". **In order to keep the scope of this PR limited to the RPC behaviour, this PR uses a different method to determine `watchonly` descriptors for the purpose of wallet migration.** A follow-up PR can be opened to update migration logic to exclude descriptors with some private keys from the `watchonly` migration wallet. \r\n\r\n### Relevant PRs\r\nhttps://github.com/bitcoin/bitcoin/pull/24361\r\nhttps://github.com/bitcoin/bitcoin/pull/32186\r\n\r\n### Testing\r\nFunctional tests were added to test the new behaviour\r\n\r\nEDIT\r\n**`listdescriptors [private=true]` will still fail when there are no private keys because non-watchonly wallets must have private keys and calling `listdescriptors [private=true]` for watchonly wallet returns an error**",
    "labels": [],
    "created_at": "2025-05-12T13:26:20Z",
    "updated_at": "2025-07-17T15:19:26Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "653fec0addd5b3753dc0013df355ce315c6b7e67",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "Eunovo:list-descriptors-with-partial-keys",
      "ref": "list-descriptors-with-partial-keys",
      "sha": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 755831492,
        "node_id": "R_kgDOLQ0SxA",
        "name": "bitcoin",
        "full_name": "Eunovo/bitcoin",
        "owner": {
          "login": "Eunovo",
          "id": 37949128,
          "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
          "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/Eunovo",
          "html_url": "https://github.com/Eunovo",
          "followers_url": "https://api.github.com/users/Eunovo/followers",
          "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
          "organizations_url": "https://api.github.com/users/Eunovo/orgs",
          "repos_url": "https://api.github.com/users/Eunovo/repos",
          "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/Eunovo/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/Eunovo/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/Eunovo/bitcoin",
        "archive_url": "https://api.github.com/repos/Eunovo/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/Eunovo/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/Eunovo/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/Eunovo/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/Eunovo/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/Eunovo/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/Eunovo/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/Eunovo/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/Eunovo/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/Eunovo/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/Eunovo/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/Eunovo/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/Eunovo/bitcoin/events",
        "forks_url": "https://api.github.com/repos/Eunovo/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/Eunovo/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/Eunovo/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/Eunovo/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/Eunovo/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/Eunovo/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/Eunovo/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/Eunovo/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/Eunovo/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/Eunovo/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/Eunovo/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/Eunovo/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/Eunovo/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/Eunovo/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/Eunovo/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/Eunovo/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:Eunovo/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/Eunovo/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/Eunovo/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/Eunovo/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/Eunovo/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/Eunovo/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/Eunovo/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/Eunovo/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/Eunovo/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/Eunovo/bitcoin/hooks",
        "svn_url": "https://github.com/Eunovo/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "forks_count": 0,
        "stargazers_count": 0,
        "watchers_count": 0,
        "size": 249962,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": true,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-14T07:03:43Z",
        "created_at": "2024-02-11T07:44:19Z",
        "updated_at": "2025-05-02T08:08:35Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "cbd8e3d51148d29dca576982de4c4398bf3e2f6f",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37529,
        "stargazers_count": 84607,
        "watchers_count": 84607,
        "size": 289148,
        "default_branch": "master",
        "open_issues_count": 756,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-16T12:49:29Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-17T15:54:49Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 146,
    "deletions": 66,
    "changed_files": 9,
    "commits": 4,
    "review_comments": 10,
    "comments": 15
  },
  "events": [
    {
      "event": "commented",
      "id": 2872576131,
      "node_id": "IC_kwDOABII586rOAiD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2872576131",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-12T13:26:23Z",
      "updated_at": "2025-07-16T13:30:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32471.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [achow101](https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877413827), [vicjuma](https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877434573) |\n| Concept ACK | [rkrux](https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-3078633756) |\n\nIf your review is incorrectly listed, please react with ðŸ‘Ž to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32966](https://github.com/bitcoin/bitcoin/pull/32966) (Silent Payments: Receiving by Eunovo)\n* [#32724](https://github.com/bitcoin/bitcoin/pull/32724) (Musig2 tests by w0xlt)\n* [#32489](https://github.com/bitcoin/bitcoin/pull/32489) (wallet: Add `exportwatchonlywallet` RPC to export a watchonly version of a wallet by achow101)\n* [#31734](https://github.com/bitcoin/bitcoin/pull/31734) (miniscript: account for all `StringType` variants in `Miniscriptdescriptor::ToString()` by pythcoiner)\n* [#31713](https://github.com/bitcoin/bitcoin/pull/31713) (miniscript refactor: Remove unique_ptr-indirection (#30866 follow-up) by hodlinator)\n* [#31244](https://github.com/bitcoin/bitcoin/pull/31244) (descriptors: MuSig2 by achow101)\n* [#30243](https://github.com/bitcoin/bitcoin/pull/30243) (descriptors: taproot partial descriptors by Eunovo)\n* [#29675](https://github.com/bitcoin/bitcoin/pull/29675) (wallet: Be able to receive and spend inputs involving MuSig2 aggregate keys by achow101)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2872576131",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2872611218,
      "node_id": "IC_kwDOABII586rOJGS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2872611218",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-12T13:35:50Z",
      "updated_at": "2025-05-12T13:35:50Z",
      "author_association": "MEMBER",
      "body": "```bash\r\n/Users/runner/work/bitcoin/bitcoin/src/test/fuzz/miniscript.cpp:1040:42: error: no matching member function for call to 'ToString'\r\n    std::optional<std::string> str{node->ToString(parser_ctx)};\r\n                                   ~~~~~~^~~~~~~~\r\n/Users/runner/work/bitcoin/bitcoin/src/script/miniscript.h:830:17: note: candidate function template not viable: requires 2 arguments, but 1 was provided\r\n    std::string ToString(const CTx& ctx, bool& has_priv_key) const {\r\n                ^\r\n/Users/runner/work/bitcoin/bitcoin/src/test/fuzz/miniscript.cpp:1248:31: error: no matching member function for call to 'ToString'\r\n    const auto str2 = parsed->ToString(parser_ctx);\r\n                      ~~~~~~~~^~~~~~~~\r\n/Users/runner/work/bitcoin/bitcoin/src/script/miniscript.h:830:17: note: candidate function template not viable: requires 2 arguments, but 1 was provided\r\n    std::string ToString(const CTx& ctx, bool& has_priv_key) const {\r\n                ^\r\n2 errors generated.\r\n```",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2872611218",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "labeled",
      "id": 17617032239,
      "node_id": "LE_lADOABII5862NchizwAAAAQaDpQv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17617032239",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-12T13:38:46Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2872620899,
      "node_id": "IC_kwDOABII586rOLdj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2872620899",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-12T13:38:48Z",
      "updated_at": "2025-05-12T13:38:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\nðŸš§ At least one of the CI tasks failed.\n<sub>Task `tidy`: https://github.com/bitcoin/bitcoin/runs/42059781761</sub>\n<sub>LLM reason (âœ¨ experimental): The CI failure is due to build errors in `miniscript.cpp` related to the `ToString` function call.\n</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2872620899",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "convert_to_draft",
      "id": 17617267965,
      "node_id": "CTDE_lADOABII5862NchizwAAAAQaEiz9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17617267965",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-12T13:50:54Z"
    },
    {
      "event": "commented",
      "id": 2872665572,
      "node_id": "IC_kwDOABII586rOWXk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2872665572",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-12T13:51:15Z",
      "updated_at": "2025-05-12T13:51:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "Putting draft while I fix some issues with the fuzz tests",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2872665572",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17617624693,
      "node_id": "HRFPE_lADOABII5862NchizwAAAAQaF551",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17617624693",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1ff2b0013302b8ceae5901248371e1e478c2e02c",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/1ff2b0013302b8ceae5901248371e1e478c2e02c",
      "created_at": "2025-05-12T14:09:18Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17622447572,
      "node_id": "HRFPE_lADOABII5862NchizwAAAAQaYTXU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17622447572",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4f4ca3a5cfeac3f46af7670c2bd031acb2e37f90",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/4f4ca3a5cfeac3f46af7670c2bd031acb2e37f90",
      "created_at": "2025-05-12T19:14:48Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI1NTFmZGZkZDY2MmRmYjQwNzdjMzA1OWI0MzdhY2Y1NmJkYmFmNWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2551fdfdd662dfb4077c3059b437acf56bdbaf5b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2551fdfdd662dfb4077c3059b437acf56bdbaf5b",
      "tree": {
        "sha": "c8e8f113e3c401f5075b1cd85876a4df098a7fef",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c8e8f113e3c401f5075b1cd85876a4df098a7fef"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59e09e0fb7b4cf8f8db97c2f81a8f6f69fe6cacf",
          "sha": "59e09e0fb7b4cf8f8db97c2f81a8f6f69fe6cacf",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/59e09e0fb7b4cf8f8db97c2f81a8f6f69fe6cacf"
        }
      ],
      "message": "wallet/migration: use count private key count to identify watchonly descs\n\nToPrivateString() behaviour will be modified in the following commits. This change ensures that wallet migration does not break.",
      "committer": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-13T12:32:31Z"
      },
      "author": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-13T12:32:06Z"
      },
      "sha": "2551fdfdd662dfb4077c3059b437acf56bdbaf5b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGEwYTQ1ODk2NWM5NDQ0MzRiMWYzZTRkODMyNzcyNTc3OTM0MzVlZGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a0a458965c944434b1f3e4d83277257793435edb",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a0a458965c944434b1f3e4d83277257793435edb",
      "tree": {
        "sha": "b6c8751a355087b5ccf1ab4e38c16b318231d3ca",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b6c8751a355087b5ccf1ab4e38c16b318231d3ca"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2551fdfdd662dfb4077c3059b437acf56bdbaf5b",
          "sha": "2551fdfdd662dfb4077c3059b437acf56bdbaf5b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2551fdfdd662dfb4077c3059b437acf56bdbaf5b"
        }
      ],
      "message": "descriptor: ToPrivateString() pass if  at least 1 priv key exists\n\n- Refactor Descriptor::ToPrivateString() to allow descriptors with missing private keys to printed. Useful in descriptors with multiple keys e.g tr() etc.\n- The existing behaviour of listdescriptors is preserved as much as possible, if no private keys are availablle ToPrivateString will return false",
      "committer": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-13T12:32:31Z"
      },
      "author": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-11T14:22:15Z"
      },
      "sha": "a0a458965c944434b1f3e4d83277257793435edb"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBlMTIyNWRjMDAxMzQ4NmQwY2I3NmMzODJlZTk4ZDFmOGFmZjI1MjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e1225dc0013486d0cb76c382ee98d1f8aff2524",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0e1225dc0013486d0cb76c382ee98d1f8aff2524",
      "tree": {
        "sha": "16f05db1dc191d3c23c8c35ad559f35435d8bbe1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/16f05db1dc191d3c23c8c35ad559f35435d8bbe1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a0a458965c944434b1f3e4d83277257793435edb",
          "sha": "a0a458965c944434b1f3e4d83277257793435edb",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a0a458965c944434b1f3e4d83277257793435edb"
        }
      ],
      "message": "walletrpc: reject listdes with priv key on w-only wallets",
      "committer": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-13T12:32:31Z"
      },
      "author": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-12T10:55:19Z"
      },
      "sha": "0e1225dc0013486d0cb76c382ee98d1f8aff2524"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJiMTRlOGFjN2QzOGYzNjk4ZDc2ZWEzZDZkY2UwOWUxMzg3ZDU5ZjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "tree": {
        "sha": "6709b17e9ead560066609194df40bee010af06a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6709b17e9ead560066609194df40bee010af06a2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0e1225dc0013486d0cb76c382ee98d1f8aff2524",
          "sha": "0e1225dc0013486d0cb76c382ee98d1f8aff2524",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0e1225dc0013486d0cb76c382ee98d1f8aff2524"
        }
      ],
      "message": "test: Test listdescs with priv works even with missing priv keys",
      "committer": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-13T12:32:31Z"
      },
      "author": {
        "name": "Novo",
        "email": "eunovo9@gmail.com",
        "date": "2025-05-12T12:39:03Z"
      },
      "sha": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17634745559,
      "node_id": "HRFPE_lADOABII5862NchizwAAAAQbHNzX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17634745559",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "commit_url": "https://api.github.com/repos/Eunovo/bitcoin/commits/bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "created_at": "2025-05-13T12:35:59Z"
    },
    {
      "event": "unlabeled",
      "id": 17637726892,
      "node_id": "UNLE_lADOABII5862NchizwAAAAQbSlqs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17637726892",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T15:13:22Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "ready_for_review",
      "id": 17638552615,
      "node_id": "RFRE_lADOABII5862NchizwAAAAQbVvQn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17638552615",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T16:01:31Z"
    },
    {
      "event": "commented",
      "id": 2877123412,
      "node_id": "IC_kwDOABII586rfWtU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877123412",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T16:02:24Z",
      "updated_at": "2025-05-13T16:02:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "cc @rkrux @sipa ",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877123412",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "mentioned",
      "id": 17638567439,
      "node_id": "MEE_lADOABII5862NchizwAAAAQbVy4P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17638567439",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T16:02:25Z"
    },
    {
      "event": "subscribed",
      "id": 17638567460,
      "node_id": "SE_lADOABII5862NchizwAAAAQbVy4k",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17638567460",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T16:02:25Z"
    },
    {
      "event": "mentioned",
      "id": 17638567503,
      "node_id": "MEE_lADOABII5862NchizwAAAAQbVy5P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17638567503",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T16:02:26Z"
    },
    {
      "event": "subscribed",
      "id": 17638567520,
      "node_id": "SE_lADOABII5862NchizwAAAAQbVy5g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17638567520",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T16:02:26Z"
    },
    {
      "event": "commented",
      "id": 2877413827,
      "node_id": "IC_kwDOABII586rgdnD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877413827",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T17:32:49Z",
      "updated_at": "2025-05-13T17:32:49Z",
      "author_association": "MEMBER",
      "body": "Concept NACK\r\n\r\nThe purpose of the `private` argument is to show the private keys. If there are no private keys to show, I think it is a reasonable error to say that, rather than just showing the public descriptors. I think changing the behavior could result in a footgun where people use it thinking that they are being shown private keys when they actually are not.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877413827",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2877434573,
      "node_id": "IC_kwDOABII586rgirN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877434573",
      "actor": {
        "login": "vicjuma",
        "id": 30392363,
        "node_id": "MDQ6VXNlcjMwMzkyMzYz",
        "avatar_url": "https://avatars.githubusercontent.com/u/30392363?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vicjuma",
        "html_url": "https://github.com/vicjuma",
        "followers_url": "https://api.github.com/users/vicjuma/followers",
        "following_url": "https://api.github.com/users/vicjuma/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vicjuma/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vicjuma/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vicjuma/subscriptions",
        "organizations_url": "https://api.github.com/users/vicjuma/orgs",
        "repos_url": "https://api.github.com/users/vicjuma/repos",
        "events_url": "https://api.github.com/users/vicjuma/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vicjuma/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T17:40:20Z",
      "updated_at": "2025-05-13T17:40:20Z",
      "author_association": "NONE",
      "body": "Concept NACK\r\n\r\nIt's unclear why someone should receive public keys with `private=true`. Why not just use the default command, `bitcoin-cli listdescriptors`, which already shows public keys? I assume the user is certain about the nature of the descriptors they have in their wallet. Maybe if I do not fully understand this PR.\r\n",
      "user": {
        "login": "vicjuma",
        "id": 30392363,
        "node_id": "MDQ6VXNlcjMwMzkyMzYz",
        "avatar_url": "https://avatars.githubusercontent.com/u/30392363?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vicjuma",
        "html_url": "https://github.com/vicjuma",
        "followers_url": "https://api.github.com/users/vicjuma/followers",
        "following_url": "https://api.github.com/users/vicjuma/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vicjuma/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vicjuma/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vicjuma/subscriptions",
        "organizations_url": "https://api.github.com/users/vicjuma/orgs",
        "repos_url": "https://api.github.com/users/vicjuma/repos",
        "events_url": "https://api.github.com/users/vicjuma/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vicjuma/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877434573",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2877510396,
      "node_id": "IC_kwDOABII586rg1L8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877510396",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T18:10:25Z",
      "updated_at": "2025-05-13T18:22:17Z",
      "author_association": "CONTRIBUTOR",
      "body": ">  If there are no private keys to show, I think it is a reasonable error to say that, rather than just showing the public descriptors.\r\n\r\nI have not checked this PR yet but the original intention came from this issue: https://github.com/bitcoin/bitcoin/issues/32078#issuecomment-2781428475\r\n\r\nThe idea was to show results for descriptors that don't have _all_ the private keys but do have at least one. This is not for the case when the descriptor doesn't have _any_ private key.\r\n\r\nI do like how the `importdescriptors` RPC returns a warning when the descriptor contains partial private keys: https://github.com/bitcoin/bitcoin/issues/32078#issuecomment-2783608466. Maybe a similar warning can be returned in this case for `listdescriptors true` as well - to avoid the footgun.\r\n```\r\n[\r\n  {\r\n    \"success\": true,\r\n    \"warnings\": [\r\n      \"Not all private keys provided. Some wallet functionality may return unexpected errors\"\r\n    ]\r\n  }\r\n]\r\n```\r\n\r\nAlso, if the `importdescriptors` RPC allows importing a descriptor with partial private keys, then it seems reasonable to me to list that descriptor in the response of `listdescriptors true` with those partial private keys. Is there any other way to see those partial private keys?\r\n\r\nRegardless of the above point, I do feel that preventing `listdescriptors true` from failing completely in the case a descriptor is missing few private keys is helpful for the user as the other descriptors with all the private keys will be returned in the response.\r\n> This change also helps prevent listdescriptors true from failing completely, because one descriptor is missing some private keys.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877510396",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2877558632,
      "node_id": "IC_kwDOABII586rhA9o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877558632",
      "actor": {
        "login": "vicjuma",
        "id": 30392363,
        "node_id": "MDQ6VXNlcjMwMzkyMzYz",
        "avatar_url": "https://avatars.githubusercontent.com/u/30392363?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vicjuma",
        "html_url": "https://github.com/vicjuma",
        "followers_url": "https://api.github.com/users/vicjuma/followers",
        "following_url": "https://api.github.com/users/vicjuma/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vicjuma/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vicjuma/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vicjuma/subscriptions",
        "organizations_url": "https://api.github.com/users/vicjuma/orgs",
        "repos_url": "https://api.github.com/users/vicjuma/repos",
        "events_url": "https://api.github.com/users/vicjuma/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vicjuma/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T18:29:06Z",
      "updated_at": "2025-05-13T18:29:06Z",
      "author_association": "NONE",
      "body": "Maybe `-rpcwallet=<wallet>` will come in handy in this situation where you would have to use a different wallet for these situations to prevent the conflicts. ",
      "user": {
        "login": "vicjuma",
        "id": 30392363,
        "node_id": "MDQ6VXNlcjMwMzkyMzYz",
        "avatar_url": "https://avatars.githubusercontent.com/u/30392363?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vicjuma",
        "html_url": "https://github.com/vicjuma",
        "followers_url": "https://api.github.com/users/vicjuma/followers",
        "following_url": "https://api.github.com/users/vicjuma/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vicjuma/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vicjuma/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vicjuma/subscriptions",
        "organizations_url": "https://api.github.com/users/vicjuma/orgs",
        "repos_url": "https://api.github.com/users/vicjuma/repos",
        "events_url": "https://api.github.com/users/vicjuma/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vicjuma/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877558632",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2877610128,
      "node_id": "IC_kwDOABII586rhNiQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2877610128",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-13T18:50:48Z",
      "updated_at": "2025-05-13T18:50:48Z",
      "author_association": "MEMBER",
      "body": "> The idea was to show results for descriptors that don't have all the private keys but do have at least one.\r\n\r\nI think that's fine to show a result, but I don't think we should show any result if there are no private keys at all.",
      "user": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2877610128",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2878821724,
      "node_id": "IC_kwDOABII586rl1Vc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2878821724",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T06:19:20Z",
      "updated_at": "2025-05-14T06:19:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Concept NACK\r\n> \r\n> The purpose of the `private` argument is to show the private keys. If there are no private keys to show, I think it is a reasonable error to say that, rather than just showing the public descriptors. I think changing the behavior could result in a footgun where people use it thinking that they are being shown private keys when they actually are not.\r\n\r\nI think there has been a misunderstanding. **There are private keys to show.** This  PR doesn't change the behaviour of `listdescriptors true` RPC to show any result when there are no private keys. Non-watchonly wallet descriptors must have at least one private key. The RPC still fails for watch only wallets",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2878821724",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2878828270,
      "node_id": "IC_kwDOABII586rl27u",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2878828270",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T06:22:16Z",
      "updated_at": "2025-05-14T06:22:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I think that's fine to show a result, but I don't think we should show any result if there are no private keys at all.\r\n\r\nNo result is shown if there are no private keys",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2878828270",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 2878844076,
      "node_id": "IC_kwDOABII586rl6ys",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2878844076",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T06:29:49Z",
      "updated_at": "2025-05-14T06:29:49Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It's unclear why someone should receive public keys with `private=true`. Why not just use the default command, `bitcoin-cli listdescriptors`, which already shows public keys? I assume the user is certain about the nature of the descriptors they have in their wallet. Maybe if I do not fully understand this PR.\r\n\r\nIt is possible to have descriptors with missing private keys in a non-watchonly wallet. `importdescriptors` only rejects descriptors without any private keys. Trying `listdescriptors private=true` in such a wallet will throw an error, preventing the user from being able to backup their descriptors. The default command only returns public information, I believe that modifying the default command to return private information sometimes will be the wrong decision.  It's much better to allow `private=true` to work for these descriptors with some missing private keys.",
      "user": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2878844076",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "renamed",
      "id": 17655395246,
      "node_id": "RTE_lADOABII5862NchizwAAAAQcV_Ou",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17655395246",
      "actor": {
        "login": "Eunovo",
        "id": 37949128,
        "node_id": "MDQ6VXNlcjM3OTQ5MTI4",
        "avatar_url": "https://avatars.githubusercontent.com/u/37949128?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Eunovo",
        "html_url": "https://github.com/Eunovo",
        "followers_url": "https://api.github.com/users/Eunovo/followers",
        "following_url": "https://api.github.com/users/Eunovo/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Eunovo/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Eunovo/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Eunovo/subscriptions",
        "organizations_url": "https://api.github.com/users/Eunovo/orgs",
        "repos_url": "https://api.github.com/users/Eunovo/repos",
        "events_url": "https://api.github.com/users/Eunovo/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Eunovo/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-14T14:48:30Z",
      "rename": {
        "from": "Fix listdescriptors true fails with 'Can't get descriptor string' in non-watch-only descriptor wallet",
        "to": "wallet/rpc: fix listdescriptors RPC fails to return descriptors with private key information when wallet contains descriptors missing any key"
      }
    },
    {
      "event": "commented",
      "id": 2897892091,
      "node_id": "IC_kwDOABII586sulL7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2897892091",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-21T13:02:19Z",
      "updated_at": "2025-05-21T13:09:45Z",
      "author_association": "CONTRIBUTOR",
      "body": "A similar problem happens in `gethdkeys private=true` as well and I think it's due to partial private keys when the following error is thrown:\r\n\r\n```\r\nâžœ  bitcoin git:(list-descriptors-with-partial-keys) âœ— bitcoinclireg -named gethdkeys private=true\r\nerror code: -1\r\nerror message:\r\nmap::at:  key not found\r\n```\r\n\r\nIt appears to be coming from here when the `xprv` corresponding to the `xpub` can't be found: https://github.com/bitcoin/bitcoin/blob/7763e86afa045910a14ac9b2cd644927a447370b/src/wallet/rpc/wallet.cpp#L822\r\n\r\nIt's due to mismatch in the count of `wallet_xprvs` and `wallet_xpubs` calculated in the previous loop over `spkms`. \r\nI can create a separate issue later.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-2897892091",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "commented",
      "id": 3078633756,
      "node_id": "IC_kwDOABII5863gDkc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/3078633756",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-16T13:30:09Z",
      "updated_at": "2025-07-16T13:30:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3\r\n\r\nStarted reviewing the PR.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#issuecomment-3078633756",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32471"
    },
    {
      "event": "reviewed",
      "id": 3025316172,
      "node_id": "PRR_kwDOABII5860UqlM",
      "url": null,
      "actor": null,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Partial review bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#pullrequestreview-3025316172",
      "submitted_at": "2025-07-17T15:19:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210625173",
      "pull_request_review_id": 3025316172,
      "id": 2210625173,
      "node_id": "PRRC_kwDOABII586Dw3aV",
      "diff_hunk": "@@ -111,7 +111,12 @@ struct Descriptor {\n     /** Whether this descriptor will return one scriptPubKey or multiple (aka is or is not combo) */\n     virtual bool IsSingleType() const = 0;\n \n-    /** Convert the descriptor to a private string. This fails if the provided provider does not have the relevant private keys. */\n+    /** Convert the descriptor to a private string. This uses public keys if the relevant private keys are not in the SigningProvider.\n+     *  If none of the relevant private keys are available, the output string in the \"out\" parameter will not contain any private key information,\n+     *  and this function will return \"false\".\n+     *  @param[in] provider The SigningProvider to query for private keys.\n+     *  @param[out] out The resulting descriptor string, containing private keys if available.\n+     */",
      "path": "src/script/descriptor.h",
      "position": 10,
      "original_position": 10,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\n```diff\r\n+ @return true if at least one private key available\r\n```",
      "created_at": "2025-07-16T14:37:12Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2210625173",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210625173"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": 118,
      "original_start_line": 118,
      "start_side": "RIGHT",
      "line": 119,
      "original_line": 119,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210641706",
      "pull_request_review_id": 3025316172,
      "id": 2210641706,
      "node_id": "PRRC_kwDOABII586Dw7cq",
      "diff_hunk": "@@ -686,20 +698,23 @@ class DescriptorImpl : public Descriptor\n     std::string ToString(bool compat_format) const final\n     {\n         std::string ret;\n-        ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC);\n+        bool has_priv_key;\n+        ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC, has_priv_key);\n         return AddChecksum(ret);\n     }\n \n     bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n     {\n-        bool ret = ToStringHelper(&arg, out, StringType::PRIVATE);\n+        bool has_priv_key;\n+        assert(ToStringHelper(&arg, out, StringType::PRIVATE, has_priv_key));",
      "path": "src/script/descriptor.cpp",
      "position": 102,
      "original_position": 102,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\nFine to add `assert` here because for all intents and purposes I don't suppose there would ever be a case where `ToStringHelper` returns `false` here. Perhaps we can add a helpful assert message here for debugging purposes?\r\n\r\n```diff\r\n- assert(ToStringHelper(&arg, out, StringType::PRIVATE, has_priv_key));\r\n+ assert(ToStringHelper(&arg, out, StringType::PRIVATE, has_priv_key), \"\");\r\n```",
      "created_at": "2025-07-16T14:43:35Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2210641706",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210641706"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 709,
      "original_line": 709,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210645024",
      "pull_request_review_id": 3025316172,
      "id": 2210645024,
      "node_id": "PRRC_kwDOABII586Dw8Qg",
      "diff_hunk": "@@ -840,10 +841,16 @@ struct Node {\n                     (node.fragment == Fragment::OR_I && node.subs[0]->fragment == Fragment::JUST_0) ||\n                     (node.fragment == Fragment::OR_I && node.subs[1]->fragment == Fragment::JUST_0));\n         };\n+        auto toString = [&ctx, &has_priv_key](Key key) -> std::string {\n+            bool tmp{false};\n+            auto key_str{ctx.ToString(key, tmp)};\n+            has_priv_key |= tmp;",
      "path": "src/script/miniscript.h",
      "position": 17,
      "original_position": 17,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\nNot a bug but `bitwise or` for boolean operations is not ideal.\r\n```diff\r\n- has_priv_key |= tmp;\r\n+ has_priv_key = has_priv_key || tmp;\r\n```",
      "created_at": "2025-07-16T14:44:49Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2210645024",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210645024"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 847,
      "original_line": 847,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210652033",
      "pull_request_review_id": 3025316172,
      "id": 2210652033,
      "node_id": "PRRC_kwDOABII586Dw9-B",
      "diff_hunk": "@@ -126,6 +126,37 @@ def run_test(self):\n         }\n         assert_equal(expected, wallet.listdescriptors())\n \n+        self.log.info('Test descriptor with missing private keys')\n+        node.createwallet(wallet_name='w5', blank=True, descriptors=True)\n+        wallet = node.get_wallet_rpc('w5')\n+        tr_desc = descsum_create('tr(' + node.get_deterministic_priv_key().key +\n+                                 ',{pk(03cdabb7f2dce7bfbd8a0b9570c6fd1e712e5d64045e9d6b517b3d5072251dc204)' +\n+                                 ',pk([d34db33f/44h/0h/0h]tpubD6NzVbkrYhZ4WaWSyoBvQwbpLkojyoTZPRsgXELWz3Popb3qkjcJyJUGLnL4qHHoQvao8ESaAstxYSnhyswJ76uZPStJRJCTKvosUCJZL5B/0)})')\n+        miniscript_desc = descsum_create('wsh(and_v(v:ripemd160(095ff41131e5946f3c85f79e44adbcf8e27e080e),multi(1,' + node.get_deterministic_priv_key().key +\n+                                            ',tpubD6NzVbkrYhZ4WaWSyoBvQwbpLkojyoTZPRsgXELWz3Popb3qkjcJyJUGLnL4qHHoQvao8ESaAstxYSnhyswJ76uZPStJRJCTKvosUCJZL5B/0)))')\n+        wallet.importdescriptors([\n+            {\n+                'desc': tr_desc,\n+                'timestamp': TIME_GENESIS_BLOCK,\n+            },\n+            {\n+                'desc': miniscript_desc,\n+                'timestamp': TIME_GENESIS_BLOCK,\n+            }\n+        ])\n+        expected = {\n+            'wallet_name': 'w5',\n+            'descriptors': [\n+                {'active': False,\n+                 'desc': tr_desc,\n+                 'timestamp': TIME_GENESIS_BLOCK},\n+                {'active': False,\n+                 'desc': miniscript_desc,\n+                 'timestamp': TIME_GENESIS_BLOCK},\n+            ],\n+        }\n+        assert_equal(expected, wallet.listdescriptors(True))",
      "path": "test/functional/wallet_listdescriptors.py",
      "position": 33,
      "original_position": 33,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3 \"test: Test listdescs with priv works even with missing priv keys\"\r\n\r\nNit: I prefer to only check for the data that we really want to assert on, helps in keeping the tests code cleaner as well besides being minutely faster. Checking `desc` for every imported descriptor in this case. ",
      "created_at": "2025-07-16T14:47:30Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2210652033",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210652033"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": 147,
      "original_start_line": 147,
      "start_side": "RIGHT",
      "line": 158,
      "original_line": 158,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210669794",
      "pull_request_review_id": 3025316172,
      "id": 2210669794,
      "node_id": "PRRC_kwDOABII586DxCTi",
      "diff_hunk": "@@ -485,7 +488,10 @@ class BIP32PubkeyProvider final : public PubkeyProvider\n     bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n     {\n         CExtKey key;\n-        if (!GetExtKey(arg, key)) return false;\n+        if (!GetExtKey(arg, key)) {\n+            out = ToString();",
      "path": "src/script/descriptor.cpp",
      "position": 30,
      "original_position": 30,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\nNit: To keep it consistent with the other pubkey providers and to make it explicit here. Though a default is specified in `ToString`.\r\n```diff\r\n- out = ToString();\r\n+ out = ToString(StringType::PUBLIC);\r\n```",
      "created_at": "2025-07-16T14:54:18Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2210669794",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2210669794"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 492,
      "original_line": 492,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213264627",
      "pull_request_review_id": 3025316172,
      "id": 2213264627,
      "node_id": "PRRC_kwDOABII586D67zz",
      "diff_hunk": "@@ -255,9 +255,9 @@ class OriginPubkeyProvider final : public PubkeyProvider\n     bool ToPrivateString(const SigningProvider& arg, std::string& ret) const override",
      "path": "src/script/descriptor.cpp",
      "position": 1,
      "original_position": 1,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\nIt would be helpful to update the function doc in `PubkeyProvider` struct to mention the new behaviour.",
      "created_at": "2025-07-17T12:52:24Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2213264627",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213264627"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 255,
      "original_line": 255,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213293926",
      "pull_request_review_id": 3025316172,
      "id": 2213293926,
      "node_id": "PRRC_kwDOABII586D7C9m",
      "diff_hunk": "@@ -686,20 +698,23 @@ class DescriptorImpl : public Descriptor\n     std::string ToString(bool compat_format) const final\n     {\n         std::string ret;\n-        ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC);\n+        bool has_priv_key;\n+        ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC, has_priv_key);",
      "path": "src/script/descriptor.cpp",
      "position": 94,
      "original_position": 94,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In https://github.com/bitcoin/bitcoin/commit/a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if at least 1 priv key exists\"\r\n\r\n```diff\r\n- bool has_priv_key;\r\n- ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC, has_priv_key);\r\n+ bool dummy;\r\n+ ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC, dummy);\r\n```\r\n\r\nBecause there is no use of this variable in `ToString`.\r\nSame for `ToNormalizedString` function down below.\r\n\r\nAn alternative could be to use a pointer for `has_priv_key` instead of reference because, as noted here, there are use cases for nullptr. The `ToStringHelper` would need to accordingly check for the presence of pointer value though.",
      "created_at": "2025-07-17T13:04:12Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2213293926",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213293926"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": 701,
      "original_start_line": 701,
      "start_side": "RIGHT",
      "line": 702,
      "original_line": 702,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213427874",
      "pull_request_review_id": 3025316172,
      "id": 2213427874,
      "node_id": "PRRC_kwDOABII586D7jqi",
      "diff_hunk": "@@ -840,10 +841,16 @@ struct Node {\n                     (node.fragment == Fragment::OR_I && node.subs[0]->fragment == Fragment::JUST_0) ||\n                     (node.fragment == Fragment::OR_I && node.subs[1]->fragment == Fragment::JUST_0));\n         };\n+        auto toString = [&ctx, &has_priv_key](Key key) -> std::string {\n+            bool tmp{false};\n+            auto key_str{ctx.ToString(key, tmp)};",
      "path": "src/script/miniscript.h",
      "position": 16,
      "original_position": 16,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\n```diff\r\n- bool tmp{false};\r\n- auto key_str{ctx.ToString(key, tmp)};\r\n+ bool fragment_has_private_key{false};\r\n+ auto key_str{ctx.ToString(key, fragment_has_private_key)};",
      "created_at": "2025-07-17T13:58:06Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2213427874",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213427874"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": 845,
      "original_start_line": 845,
      "start_side": "RIGHT",
      "line": 846,
      "original_line": 846,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213439258",
      "pull_request_review_id": 3025316172,
      "id": 2213439258,
      "node_id": "PRRC_kwDOABII586D7mca",
      "diff_hunk": "@@ -1700,8 +1715,9 @@ struct KeyParser {\n         return key;\n     }\n \n-    std::optional<std::string> ToString(const Key& key) const\n+    std::string ToString(const Key& key, bool& has_priv_key) const\n     {\n+        has_priv_key = false;",
      "path": "src/script/descriptor.cpp",
      "position": 178,
      "original_position": 178,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\nMaybe the pointer approach would avoid forcibly setting variables to false?",
      "created_at": "2025-07-17T14:02:27Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2213439258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213439258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": 1718,
      "original_start_line": 1718,
      "start_side": "RIGHT",
      "line": 1720,
      "original_line": 1720,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213477946",
      "pull_request_review_id": 3025316172,
      "id": 2213477946,
      "node_id": "PRRC_kwDOABII586D7v46",
      "diff_hunk": "@@ -686,20 +698,23 @@ class DescriptorImpl : public Descriptor\n     std::string ToString(bool compat_format) const final\n     {\n         std::string ret;\n-        ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC);\n+        bool has_priv_key;\n+        ToStringHelper(nullptr, ret, compat_format ? StringType::COMPAT : StringType::PUBLIC, has_priv_key);\n         return AddChecksum(ret);\n     }\n \n     bool ToPrivateString(const SigningProvider& arg, std::string& out) const override\n     {\n-        bool ret = ToStringHelper(&arg, out, StringType::PRIVATE);\n+        bool has_priv_key;\n+        assert(ToStringHelper(&arg, out, StringType::PRIVATE, has_priv_key));",
      "path": "src/script/descriptor.cpp",
      "position": 102,
      "original_position": 102,
      "commit_id": "bb14e8ac7d38f3698d76ea3d6dce09e1387d59f3",
      "original_commit_id": "a0a458965c944434b1f3e4d83277257793435edb",
      "in_reply_to_id": null,
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In a0a458965c944434b1f3e4d83277257793435edb \"descriptor: ToPrivateString() pass if  at least 1 priv key exists\"\r\n\r\nThis would also aid readability because under no condition `has_priv_key` can be `false` here.\r\n```cpp\r\nAssume(has_priv_key);\r\n```",
      "created_at": "2025-07-17T14:15:00Z",
      "updated_at": "2025-07-17T15:19:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32471#discussion_r2213477946",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2213477946"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32471"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 709,
      "original_line": 709,
      "side": "RIGHT"
    }
  ]
}