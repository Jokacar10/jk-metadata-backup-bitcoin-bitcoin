{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311",
    "id": 1483797808,
    "node_id": "PR_kwDOABII585YcPUw",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/28311",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/28311.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/28311.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/3fda7b30aecc19271e56607d301b697a56ae7b5c",
    "number": 28311,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "[WIP] BIP300 (Drivechains) consensus-level logic",
    "user": {
      "login": "luke-jr",
      "id": 1095675,
      "node_id": "MDQ6VXNlcjEwOTU2NzU=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/luke-jr",
      "html_url": "https://github.com/luke-jr",
      "followers_url": "https://api.github.com/users/luke-jr/followers",
      "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
      "organizations_url": "https://api.github.com/users/luke-jr/orgs",
      "repos_url": "https://api.github.com/users/luke-jr/repos",
      "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/luke-jr/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This is a (rough draft) clean rewrite of BIP300 (Drivechain) consensus-level code.\r\n\r\nInstead of a separate sidechain database (which may be prone to hard-to-review/test consistency issues), instead the unusable 8 MSB of the UTXO index are reserved for non-UTXO database entries, and the existing UTXO db and caching layer is shared. This can be refactored in the future, but I think it is the cleanest and most reviewable approach initially - open to other ideas, though. There's also some ugliness in the undo data to handle restoring the new data, but it's abstracted and shouldn't be too hard to reason about.\r\n\r\nUsing these new primitives, Drivechains can be reimplemented with a UTXO-like model. Note that there is zero activation logic in the current PR: the protocol changes are *always* active. Therefore, this will *not* work (at least not safely) on Bitcoin today, and cannot be deployed without significant additional changes to handle an activation.\r\n\r\nA new `SERIALIZE_TRANSACTION_FOR_WEIGHT` serialization flag is also added, that is meant only for weight counting. This allows for adjusting weight (upward) to fit additional resource requirements by new functionality. In this case, several Drivechain \"messages\" are expected to have a larger burden than their `OP_RETURN` encoding would otherwise weigh. However, the specific adjustments are not implemented in this draft.\r\n\r\nAs a consensus change, this can only be implemented with community support. Many people seem to have opinions, but please keep them to other forums. Despite providing and continuing this implementation, I myself do not thereby endorse or otherwise comment on the proposal itself.\r\n\r\nTherefore, not looking for concept ACKs/NACKs (ie, about Drivechains), just *Approach* ACKs / constructive criticism (ie, about *how* I'm implementing it).",
    "labels": [
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2023-08-22T01:17:13Z",
    "updated_at": "2025-06-01T21:20:43Z",
    "closed_at": "2024-03-06T13:52:36Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged": false,
    "merge_commit_sha": "2cb28f79dd1a31233754ace93bd74d4b1d779989",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "luke-jr:bip300",
      "ref": "bip300",
      "sha": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 2514537,
        "node_id": "MDEwOlJlcG9zaXRvcnkyNTE0NTM3",
        "name": "bitcoin",
        "full_name": "luke-jr/bitcoin",
        "owner": {
          "login": "luke-jr",
          "id": 1095675,
          "node_id": "MDQ6VXNlcjEwOTU2NzU=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/luke-jr",
          "html_url": "https://github.com/luke-jr",
          "followers_url": "https://api.github.com/users/luke-jr/followers",
          "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
          "organizations_url": "https://api.github.com/users/luke-jr/orgs",
          "repos_url": "https://api.github.com/users/luke-jr/repos",
          "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/luke-jr/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/luke-jr/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/luke-jr/bitcoin",
        "archive_url": "https://api.github.com/repos/luke-jr/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/luke-jr/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/luke-jr/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/luke-jr/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/luke-jr/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/luke-jr/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/luke-jr/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/luke-jr/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/luke-jr/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/luke-jr/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/luke-jr/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/luke-jr/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/luke-jr/bitcoin/events",
        "forks_url": "https://api.github.com/repos/luke-jr/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/luke-jr/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/luke-jr/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/luke-jr/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/luke-jr/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/luke-jr/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/luke-jr/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/luke-jr/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/luke-jr/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/luke-jr/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/luke-jr/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/luke-jr/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/luke-jr/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/luke-jr/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/luke-jr/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/luke-jr/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:luke-jr/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/luke-jr/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/luke-jr/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/luke-jr/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/luke-jr/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/luke-jr/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/luke-jr/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/luke-jr/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/luke-jr/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/luke-jr/bitcoin/hooks",
        "svn_url": "https://github.com/luke-jr/bitcoin",
        "homepage": "",
        "language": "C++",
        "forks_count": 10,
        "stargazers_count": 26,
        "watchers_count": 26,
        "size": 307584,
        "default_branch": "readme",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-06-01T21:20:42Z",
        "created_at": "2011-10-04T20:22:23Z",
        "updated_at": "2025-05-15T19:30:10Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "fbcf1029a7ba47d07a4566cf1f9d2e7b4870304a",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37299,
        "stargazers_count": 83921,
        "watchers_count": 83921,
        "size": 283151,
        "default_branch": "master",
        "open_issues_count": 742,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-30T10:33:26Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-06-01T21:53:55Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 814,
    "deletions": 65,
    "changed_files": 25,
    "commits": 21,
    "review_comments": 19,
    "comments": 45
  },
  "events": [
    {
      "event": "commented",
      "id": 1687269373,
      "node_id": "IC_kwDOABII585kka_9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687269373",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T01:17:16Z",
      "updated_at": "2023-11-15T13:37:10Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/28311).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept NACK | [aceofbitcoin](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1697913869), [RicYashiroLee](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1698057367), [amtriorix](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1700913429), [petertodd](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1809045700) |\n| Concept ACK | [psztorc](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688540988), [CheemsCommander](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1690244473), [skydogenet](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1736445209) |\n| Approach ACK | [jaybny](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688825978) |\n| Approach NACK | [russeree](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687311408), [ns-xvrn](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688401439), [ChrisMartl](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1689307554) |\n| Ignored review | [john-light](https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687421696) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28438](https://github.com/bitcoin/bitcoin/pull/28438) (Use serialization parameters for CTransaction by ajtowns)\n* [#28051](https://github.com/bitcoin/bitcoin/pull/28051) (Get rid of shutdown.cpp/shutdown.h, use SignalInterrupt directly by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687269373",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "subscribed",
      "id": 10152231792,
      "node_id": "SE_lADOABII585u40PJzwAAAAJdHsNw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10152231792",
      "actor": {
        "login": "alltheseas",
        "id": 64376233,
        "node_id": "MDQ6VXNlcjY0Mzc2MjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/64376233?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alltheseas",
        "html_url": "https://github.com/alltheseas",
        "followers_url": "https://api.github.com/users/alltheseas/followers",
        "following_url": "https://api.github.com/users/alltheseas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alltheseas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alltheseas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alltheseas/subscriptions",
        "organizations_url": "https://api.github.com/users/alltheseas/orgs",
        "repos_url": "https://api.github.com/users/alltheseas/repos",
        "events_url": "https://api.github.com/users/alltheseas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alltheseas/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T02:13:07Z"
    },
    {
      "event": "commented",
      "id": 1687311408,
      "node_id": "IC_kwDOABII585kklQw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687311408",
      "actor": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T02:15:32Z",
      "updated_at": "2023-08-22T04:26:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach NACK; using bip300 `OP_DRIVECHAIN` to achieve consensus about the validity of a spend is prone to errors or manipulation by miners as to the state of the sidechain thus introducing additional incentives into bitcoin.\r\n\r\nPlease don't take this personally, I love the work you do, personally I want to see a more 'trustless' method of pegouts before adding sidechain communication and spend conditions into Bitcoin Core.",
      "user": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687311408",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "labeled",
      "id": 10152310328,
      "node_id": "LE_lADOABII585u40PJzwAAAAJdH_Y4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10152310328",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T02:30:24Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1588200210,
      "node_id": "PRR_kwDOABII585eqgMS",
      "url": null,
      "actor": null,
      "commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#pullrequestreview-1588200210",
      "submitted_at": "2023-08-22T03:04:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
    },
    {
      "event": "commented",
      "id": 1687421696,
      "node_id": "IC_kwDOABII585klAMA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687421696",
      "actor": {
        "login": "john-light",
        "id": 9424721,
        "node_id": "MDQ6VXNlcjk0MjQ3MjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9424721?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-light",
        "html_url": "https://github.com/john-light",
        "followers_url": "https://api.github.com/users/john-light/followers",
        "following_url": "https://api.github.com/users/john-light/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-light/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-light/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-light/subscriptions",
        "organizations_url": "https://api.github.com/users/john-light/orgs",
        "repos_url": "https://api.github.com/users/john-light/repos",
        "events_url": "https://api.github.com/users/john-light/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-light/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T04:57:50Z",
      "updated_at": "2023-08-22T04:57:50Z",
      "author_association": "NONE",
      "body": "@russeree \r\n\r\n> Approach NACK; using bip300 OP_DRIVECHAIN to achieve consensus about the validity of a spend is prone to errors or manipulation by miners as to the state of the sidechain thus introducing additional incentives into bitcoin... personally I want to see a more 'trustless' method of pegouts before adding sidechain communication and spend conditions into BitcoinCore.\r\n\r\nThis comment seems to me like a \"Concept NACK\", not an \"Approach NACK\". Per @luke-jr's [request](https://github.com/bitcoin/bitcoin/pull/28311#issue-1860387785):\r\n\r\n> Many people seem to have opinions, but please keep them to other forums... not looking for concept ACKs/NACKs, just Approach ACKs / constructive criticism.\r\n\r\nIn case this request was missed, or there was a misunderstanding about the request, by \"just Approach ACK / constructive criticism\" Luke is saying he only wants feedback on his specific _approach_ taken to implement BIP300 in this PR. If a reviewer likes this approach, or does not like this approach and can suggest a better approach to implementing the BIP300 spec, then that is the kind of feedback Luke is looking for. On the other hand, if a reviewer has feedback about the _general concept_ of BIP300 then Luke requests that that feedback be shared elsewhere -- may I suggest the [bitcoin-dev](https://lists.linuxfoundation.org/mailman/listinfo/bitcoin-dev) mailing list or the new [Delving Bitcoin](https://delvingbitcoin.org) forum?",
      "user": {
        "login": "john-light",
        "id": 9424721,
        "node_id": "MDQ6VXNlcjk0MjQ3MjE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/9424721?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/john-light",
        "html_url": "https://github.com/john-light",
        "followers_url": "https://api.github.com/users/john-light/followers",
        "following_url": "https://api.github.com/users/john-light/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/john-light/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/john-light/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/john-light/subscriptions",
        "organizations_url": "https://api.github.com/users/john-light/orgs",
        "repos_url": "https://api.github.com/users/john-light/repos",
        "events_url": "https://api.github.com/users/john-light/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/john-light/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687421696",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10152982336,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJdKjdA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10152982336",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T04:57:50Z"
    },
    {
      "event": "subscribed",
      "id": 10152982346,
      "node_id": "SE_lADOABII585u40PJzwAAAAJdKjdK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10152982346",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T04:57:50Z"
    },
    {
      "event": "mentioned",
      "id": 10152982359,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJdKjdX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10152982359",
      "actor": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T04:57:50Z"
    },
    {
      "event": "subscribed",
      "id": 10152982377,
      "node_id": "SE_lADOABII585u40PJzwAAAAJdKjdp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10152982377",
      "actor": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T04:57:50Z"
    },
    {
      "event": "commented",
      "id": 1687730861,
      "node_id": "IC_kwDOABII585kmLqt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687730861",
      "actor": {
        "login": "ChrisMartl",
        "id": 125733092,
        "node_id": "U_kgDOB36I5A",
        "avatar_url": "https://avatars.githubusercontent.com/u/125733092?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ChrisMartl",
        "html_url": "https://github.com/ChrisMartl",
        "followers_url": "https://api.github.com/users/ChrisMartl/followers",
        "following_url": "https://api.github.com/users/ChrisMartl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ChrisMartl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ChrisMartl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ChrisMartl/subscriptions",
        "organizations_url": "https://api.github.com/users/ChrisMartl/orgs",
        "repos_url": "https://api.github.com/users/ChrisMartl/repos",
        "events_url": "https://api.github.com/users/ChrisMartl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ChrisMartl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T08:35:21Z",
      "updated_at": "2023-08-22T08:35:21Z",
      "author_association": "NONE",
      "body": "@luke-jr:\r\nCould you please provide an analysis statement, which effects or how this proposal could increment the exploit exposure for the Bitcoin system due to the loose flexibility of Bitcoin’s script (predicative processing)?\r\n\r\nBitcoin has this predicate issue (since genesis) and it is necessary to perform a risk analysis about this for every proposed change.",
      "user": {
        "login": "ChrisMartl",
        "id": 125733092,
        "node_id": "U_kgDOB36I5A",
        "avatar_url": "https://avatars.githubusercontent.com/u/125733092?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ChrisMartl",
        "html_url": "https://github.com/ChrisMartl",
        "followers_url": "https://api.github.com/users/ChrisMartl/followers",
        "following_url": "https://api.github.com/users/ChrisMartl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ChrisMartl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ChrisMartl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ChrisMartl/subscriptions",
        "organizations_url": "https://api.github.com/users/ChrisMartl/orgs",
        "repos_url": "https://api.github.com/users/ChrisMartl/repos",
        "events_url": "https://api.github.com/users/ChrisMartl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ChrisMartl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687730861",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1687922922,
      "node_id": "IC_kwDOABII585km6jq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1687922922",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T10:27:41Z",
      "updated_at": "2023-11-13T20:30:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach NACK: given that drivechains has [fundamental flaws unrelated to the exact implementation](https://petertodd.org/2023/drivechains), there's no reason to distract Bitcoin Core development with this pull-req, even in draft form. What's holding Drivechains back is the idea itself, not the code.\r\n\r\nYou haven't even bothered to write or link a high-level BIP-style overview of this take on the idea. Writing a bunch of detailed code is a waste of time.",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1687922922",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1688160759,
      "node_id": "IC_kwDOABII585kn0n3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688160759",
      "actor": {
        "login": "Gudnessuche",
        "id": 120573631,
        "node_id": "U_kgDOBy_Ovw",
        "avatar_url": "https://avatars.githubusercontent.com/u/120573631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Gudnessuche",
        "html_url": "https://github.com/Gudnessuche",
        "followers_url": "https://api.github.com/users/Gudnessuche/followers",
        "following_url": "https://api.github.com/users/Gudnessuche/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Gudnessuche/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Gudnessuche/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Gudnessuche/subscriptions",
        "organizations_url": "https://api.github.com/users/Gudnessuche/orgs",
        "repos_url": "https://api.github.com/users/Gudnessuche/repos",
        "events_url": "https://api.github.com/users/Gudnessuche/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Gudnessuche/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T13:10:36Z",
      "updated_at": "2023-08-22T13:10:36Z",
      "author_association": "NONE",
      "body": "I refute the claim by Storkz and his fan boys that there are no risks or that all MEV risks are solved by Blind Merge Mining. \r\n\r\nPlus the peg out reintroduces having to trust, doesn't that seem scammy?",
      "user": {
        "login": "Gudnessuche",
        "id": 120573631,
        "node_id": "U_kgDOBy_Ovw",
        "avatar_url": "https://avatars.githubusercontent.com/u/120573631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Gudnessuche",
        "html_url": "https://github.com/Gudnessuche",
        "followers_url": "https://api.github.com/users/Gudnessuche/followers",
        "following_url": "https://api.github.com/users/Gudnessuche/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Gudnessuche/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Gudnessuche/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Gudnessuche/subscriptions",
        "organizations_url": "https://api.github.com/users/Gudnessuche/orgs",
        "repos_url": "https://api.github.com/users/Gudnessuche/repos",
        "events_url": "https://api.github.com/users/Gudnessuche/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Gudnessuche/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688160759",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "unsubscribed",
      "id": 10158436908,
      "node_id": "UE_lADOABII585u40PJzwAAAAJdfXIs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10158436908",
      "actor": {
        "login": "sipa",
        "id": 548488,
        "node_id": "MDQ6VXNlcjU0ODQ4OA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/548488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sipa",
        "html_url": "https://github.com/sipa",
        "followers_url": "https://api.github.com/users/sipa/followers",
        "following_url": "https://api.github.com/users/sipa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/sipa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/sipa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/sipa/subscriptions",
        "organizations_url": "https://api.github.com/users/sipa/orgs",
        "repos_url": "https://api.github.com/users/sipa/repos",
        "events_url": "https://api.github.com/users/sipa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/sipa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T13:11:53Z"
    },
    {
      "event": "commented",
      "id": 1688166989,
      "node_id": "IC_kwDOABII585kn2JN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688166989",
      "actor": {
        "login": "Gudnessuche",
        "id": 120573631,
        "node_id": "U_kgDOBy_Ovw",
        "avatar_url": "https://avatars.githubusercontent.com/u/120573631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Gudnessuche",
        "html_url": "https://github.com/Gudnessuche",
        "followers_url": "https://api.github.com/users/Gudnessuche/followers",
        "following_url": "https://api.github.com/users/Gudnessuche/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Gudnessuche/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Gudnessuche/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Gudnessuche/subscriptions",
        "organizations_url": "https://api.github.com/users/Gudnessuche/orgs",
        "repos_url": "https://api.github.com/users/Gudnessuche/repos",
        "events_url": "https://api.github.com/users/Gudnessuche/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Gudnessuche/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T13:14:19Z",
      "updated_at": "2023-08-22T13:14:19Z",
      "author_association": "NONE",
      "body": "\"Despite providing and continuing this implementation, I myself do not thereby endorse or otherwise comment on the proposal itself.\"\r\n\r\nHow do you reconcile this statement Luke. Pls don't support this misallocation of time, funds and energy. FUCK SYNTHETIC BITCOIN!!!",
      "user": {
        "login": "Gudnessuche",
        "id": 120573631,
        "node_id": "U_kgDOBy_Ovw",
        "avatar_url": "https://avatars.githubusercontent.com/u/120573631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Gudnessuche",
        "html_url": "https://github.com/Gudnessuche",
        "followers_url": "https://api.github.com/users/Gudnessuche/followers",
        "following_url": "https://api.github.com/users/Gudnessuche/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Gudnessuche/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Gudnessuche/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Gudnessuche/subscriptions",
        "organizations_url": "https://api.github.com/users/Gudnessuche/orgs",
        "repos_url": "https://api.github.com/users/Gudnessuche/repos",
        "events_url": "https://api.github.com/users/Gudnessuche/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Gudnessuche/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688166989",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "reviewed",
      "id": 1589433555,
      "node_id": "PRR_kwDOABII585evNTT",
      "url": null,
      "actor": null,
      "commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "handful of questions and comment",
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#pullrequestreview-1589433555",
      "submitted_at": "2023-08-22T13:46:38Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
    },
    {
      "event": "commented",
      "id": 1688401439,
      "node_id": "IC_kwDOABII585kovYf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688401439",
      "actor": {
        "login": "nsvrn",
        "id": 120062368,
        "node_id": "U_kgDOBygBoA",
        "avatar_url": "https://avatars.githubusercontent.com/u/120062368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nsvrn",
        "html_url": "https://github.com/nsvrn",
        "followers_url": "https://api.github.com/users/nsvrn/followers",
        "following_url": "https://api.github.com/users/nsvrn/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nsvrn/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nsvrn/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nsvrn/subscriptions",
        "organizations_url": "https://api.github.com/users/nsvrn/orgs",
        "repos_url": "https://api.github.com/users/nsvrn/repos",
        "events_url": "https://api.github.com/users/nsvrn/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nsvrn/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T15:21:46Z",
      "updated_at": "2023-08-22T15:22:13Z",
      "author_association": "CONTRIBUTOR",
      "body": "Approach NACK\r\n\r\nYou yourself have said that this will not work \"without significant additional changes to handle an activation\". So what's the point of writing, reviewing and merging this code without completely knowing those \"significant changes\" ahead of time?\r\n\r\nAnd surely people have opinions about Drivechain in general because the big debate around it is about mining pool centralization and valid perverse incentives(and since this will lead a way for that to happen on the Bitcoin system instead of an independent sidechain implementation those opinions are also somewhat valid given this is incomplete work).",
      "user": {
        "login": "nsvrn",
        "id": 120062368,
        "node_id": "U_kgDOBygBoA",
        "avatar_url": "https://avatars.githubusercontent.com/u/120062368?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nsvrn",
        "html_url": "https://github.com/nsvrn",
        "followers_url": "https://api.github.com/users/nsvrn/followers",
        "following_url": "https://api.github.com/users/nsvrn/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nsvrn/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nsvrn/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nsvrn/subscriptions",
        "organizations_url": "https://api.github.com/users/nsvrn/orgs",
        "repos_url": "https://api.github.com/users/nsvrn/repos",
        "events_url": "https://api.github.com/users/nsvrn/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nsvrn/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688401439",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1688540988,
      "node_id": "IC_kwDOABII585kpRc8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688540988",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T16:26:25Z",
      "updated_at": "2023-08-22T16:26:25Z",
      "author_association": "NONE",
      "body": "> Approach NACK: given that drivechains has fundamental flaws unrelated to the exact implementation, there's no reason to distract Bitcoin Core development with this pull-req, even in draft form. What's holding Drivechains back is the idea itself, not the code.\r\n\r\nI have engaged Peter (and compensated him financially) to write a report on these \"fundamental flaws\", but I have not yet heard or seen anything.\r\n\r\nPeter, until you publish these flaws, we have no way of evaluating them. (Nor would this be the place to do that, even if you had. Per Luke's comment on Concept ACK/NACKs.)",
      "user": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688540988",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "subscribed",
      "id": 10161052542,
      "node_id": "SE_lADOABII585u40PJzwAAAAJdpVt-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10161052542",
      "actor": {
        "login": "capitalist42",
        "id": 68190719,
        "node_id": "MDQ6VXNlcjY4MTkwNzE5",
        "avatar_url": "https://avatars.githubusercontent.com/u/68190719?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/capitalist42",
        "html_url": "https://github.com/capitalist42",
        "followers_url": "https://api.github.com/users/capitalist42/followers",
        "following_url": "https://api.github.com/users/capitalist42/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/capitalist42/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/capitalist42/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/capitalist42/subscriptions",
        "organizations_url": "https://api.github.com/users/capitalist42/orgs",
        "repos_url": "https://api.github.com/users/capitalist42/repos",
        "events_url": "https://api.github.com/users/capitalist42/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/capitalist42/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T17:00:08Z"
    },
    {
      "event": "unsubscribed",
      "id": 10161261310,
      "node_id": "UE_lADOABII585u40PJzwAAAAJdqIr-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10161261310",
      "actor": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T17:25:08Z"
    },
    {
      "event": "subscribed",
      "id": 10161261589,
      "node_id": "SE_lADOABII585u40PJzwAAAAJdqIwV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10161261589",
      "actor": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T17:25:10Z"
    },
    {
      "event": "commented",
      "id": 1688790502,
      "node_id": "IC_kwDOABII585kqOXm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688790502",
      "actor": {
        "login": "jaybny",
        "id": 777326,
        "node_id": "MDQ6VXNlcjc3NzMyNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/777326?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jaybny",
        "html_url": "https://github.com/jaybny",
        "followers_url": "https://api.github.com/users/jaybny/followers",
        "following_url": "https://api.github.com/users/jaybny/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jaybny/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jaybny/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jaybny/subscriptions",
        "organizations_url": "https://api.github.com/users/jaybny/orgs",
        "repos_url": "https://api.github.com/users/jaybny/repos",
        "events_url": "https://api.github.com/users/jaybny/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jaybny/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T19:21:00Z",
      "updated_at": "2023-08-22T19:46:48Z",
      "author_association": "NONE",
      "body": "> I want to see a more 'trustless' method of pegouts\r\n\r\nwhat exactly do you mean by trustless? what can be more trustless than hash-rate escrow? After years of research, all other approaches rely on actual centralized custodians like liquid does. Hash rate escrow leverages the assumption that sha256 hash rate is sufficiently distributed for bitcoin censorship resistance properties. \r\n",
      "user": {
        "login": "jaybny",
        "id": 777326,
        "node_id": "MDQ6VXNlcjc3NzMyNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/777326?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jaybny",
        "html_url": "https://github.com/jaybny",
        "followers_url": "https://api.github.com/users/jaybny/followers",
        "following_url": "https://api.github.com/users/jaybny/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jaybny/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jaybny/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jaybny/subscriptions",
        "organizations_url": "https://api.github.com/users/jaybny/orgs",
        "repos_url": "https://api.github.com/users/jaybny/repos",
        "events_url": "https://api.github.com/users/jaybny/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jaybny/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688790502",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1688825978,
      "node_id": "IC_kwDOABII585kqXB6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1688825978",
      "actor": {
        "login": "jaybny",
        "id": 777326,
        "node_id": "MDQ6VXNlcjc3NzMyNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/777326?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jaybny",
        "html_url": "https://github.com/jaybny",
        "followers_url": "https://api.github.com/users/jaybny/followers",
        "following_url": "https://api.github.com/users/jaybny/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jaybny/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jaybny/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jaybny/subscriptions",
        "organizations_url": "https://api.github.com/users/jaybny/orgs",
        "repos_url": "https://api.github.com/users/jaybny/repos",
        "events_url": "https://api.github.com/users/jaybny/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jaybny/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-22T19:45:25Z",
      "updated_at": "2023-08-22T19:45:25Z",
      "author_association": "NONE",
      "body": "Meta Approach ACK - i like the approach of developing an implementation, independent of the concept ack/nack \r\n\r\nhaving said that, regarding the concept.. We need to be laser focused (no pun intended) on scaling bitcoins utxo p2p money utility, and while the idea of a 2way peg sidechains using hash rate escrow via `bip300` is one such solution, (in addition to larger block size,` bip119` and other covenants), the abstract bling merged mining in `bip301`, opens bitcoin incentives to things other than p2p money bitcoin. \r\n\r\nthe solution here is to \"_limit_\" sidechains to the p2p money utility. this will keep miner incentives as is, and scale bitcoin with bitcoin script. such a solution can be achieved, but first requires this explicit social consensus intent and explicit designer and implementor intent. \r\n\r\nwith such intent in place, the miners _Nash_ equilibrium is to follow intent, due to the implied `UASF` which already implicitly secures `bip300` in the first place. ",
      "user": {
        "login": "jaybny",
        "id": 777326,
        "node_id": "MDQ6VXNlcjc3NzMyNg==",
        "avatar_url": "https://avatars.githubusercontent.com/u/777326?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jaybny",
        "html_url": "https://github.com/jaybny",
        "followers_url": "https://api.github.com/users/jaybny/followers",
        "following_url": "https://api.github.com/users/jaybny/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jaybny/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jaybny/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jaybny/subscriptions",
        "organizations_url": "https://api.github.com/users/jaybny/orgs",
        "repos_url": "https://api.github.com/users/jaybny/repos",
        "events_url": "https://api.github.com/users/jaybny/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jaybny/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1688825978",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1689307554,
      "node_id": "IC_kwDOABII585ksMmi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1689307554",
      "actor": {
        "login": "ChrisMartl",
        "id": 125733092,
        "node_id": "U_kgDOB36I5A",
        "avatar_url": "https://avatars.githubusercontent.com/u/125733092?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ChrisMartl",
        "html_url": "https://github.com/ChrisMartl",
        "followers_url": "https://api.github.com/users/ChrisMartl/followers",
        "following_url": "https://api.github.com/users/ChrisMartl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ChrisMartl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ChrisMartl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ChrisMartl/subscriptions",
        "organizations_url": "https://api.github.com/users/ChrisMartl/orgs",
        "repos_url": "https://api.github.com/users/ChrisMartl/repos",
        "events_url": "https://api.github.com/users/ChrisMartl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ChrisMartl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-23T05:33:30Z",
      "updated_at": "2023-08-23T05:33:30Z",
      "author_association": "NONE",
      "body": "Approach NACK\r\n\r\nMissing analysis statement, which effects or how this proposal could increment the exploit exposure for the Bitcoin system due to the loose flexibility of Bitcoin’s script (predicative processing).\r\n\r\nMissing statement how this proposal will affect the Nash equilibrium between the distribution of affordable archival full nodes and affordable mining devices.\r\n\r\nConcerns, that equilibrium is reached by highly capitalized and centralized original node (storage + mining) entities neither addressed nor mitigated.",
      "user": {
        "login": "ChrisMartl",
        "id": 125733092,
        "node_id": "U_kgDOB36I5A",
        "avatar_url": "https://avatars.githubusercontent.com/u/125733092?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ChrisMartl",
        "html_url": "https://github.com/ChrisMartl",
        "followers_url": "https://api.github.com/users/ChrisMartl/followers",
        "following_url": "https://api.github.com/users/ChrisMartl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ChrisMartl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ChrisMartl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ChrisMartl/subscriptions",
        "organizations_url": "https://api.github.com/users/ChrisMartl/orgs",
        "repos_url": "https://api.github.com/users/ChrisMartl/repos",
        "events_url": "https://api.github.com/users/ChrisMartl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ChrisMartl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1689307554",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1690244473,
      "node_id": "IC_kwDOABII585kvxV5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1690244473",
      "actor": {
        "login": "CheemsCommander",
        "id": 138122743,
        "node_id": "U_kgDOCDuV9w",
        "avatar_url": "https://avatars.githubusercontent.com/u/138122743?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CheemsCommander",
        "html_url": "https://github.com/CheemsCommander",
        "followers_url": "https://api.github.com/users/CheemsCommander/followers",
        "following_url": "https://api.github.com/users/CheemsCommander/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CheemsCommander/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CheemsCommander/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CheemsCommander/subscriptions",
        "organizations_url": "https://api.github.com/users/CheemsCommander/orgs",
        "repos_url": "https://api.github.com/users/CheemsCommander/repos",
        "events_url": "https://api.github.com/users/CheemsCommander/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CheemsCommander/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-23T16:11:50Z",
      "updated_at": "2023-08-23T16:11:50Z",
      "author_association": "NONE",
      "body": "Cheemsburger ACK!",
      "user": {
        "login": "CheemsCommander",
        "id": 138122743,
        "node_id": "U_kgDOCDuV9w",
        "avatar_url": "https://avatars.githubusercontent.com/u/138122743?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CheemsCommander",
        "html_url": "https://github.com/CheemsCommander",
        "followers_url": "https://api.github.com/users/CheemsCommander/followers",
        "following_url": "https://api.github.com/users/CheemsCommander/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CheemsCommander/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CheemsCommander/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CheemsCommander/subscriptions",
        "organizations_url": "https://api.github.com/users/CheemsCommander/orgs",
        "repos_url": "https://api.github.com/users/CheemsCommander/repos",
        "events_url": "https://api.github.com/users/CheemsCommander/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CheemsCommander/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1690244473",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "unsubscribed",
      "id": 10172132516,
      "node_id": "UE_lADOABII585u40PJzwAAAAJeTmyk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10172132516",
      "actor": {
        "login": "alltheseas",
        "id": 64376233,
        "node_id": "MDQ6VXNlcjY0Mzc2MjMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/64376233?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/alltheseas",
        "html_url": "https://github.com/alltheseas",
        "followers_url": "https://api.github.com/users/alltheseas/followers",
        "following_url": "https://api.github.com/users/alltheseas/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/alltheseas/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/alltheseas/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/alltheseas/subscriptions",
        "organizations_url": "https://api.github.com/users/alltheseas/orgs",
        "repos_url": "https://api.github.com/users/alltheseas/repos",
        "events_url": "https://api.github.com/users/alltheseas/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/alltheseas/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-23T16:15:15Z"
    },
    {
      "event": "subscribed",
      "id": 10208057926,
      "node_id": "SE_lADOABII585u40PJzwAAAAJgcppG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10208057926",
      "actor": {
        "login": "nakamotocryptocard",
        "id": 129814842,
        "node_id": "U_kgDOB7zROg",
        "avatar_url": "https://avatars.githubusercontent.com/u/129814842?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/nakamotocryptocard",
        "html_url": "https://github.com/nakamotocryptocard",
        "followers_url": "https://api.github.com/users/nakamotocryptocard/followers",
        "following_url": "https://api.github.com/users/nakamotocryptocard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/nakamotocryptocard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/nakamotocryptocard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/nakamotocryptocard/subscriptions",
        "organizations_url": "https://api.github.com/users/nakamotocryptocard/orgs",
        "repos_url": "https://api.github.com/users/nakamotocryptocard/repos",
        "events_url": "https://api.github.com/users/nakamotocryptocard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/nakamotocryptocard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-28T11:26:01Z"
    },
    {
      "event": "commented",
      "id": 1697913869,
      "node_id": "IC_kwDOABII585lNBwN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1697913869",
      "actor": {
        "login": "aceofbitcoin",
        "id": 16897964,
        "node_id": "MDQ6VXNlcjE2ODk3OTY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/16897964?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aceofbitcoin",
        "html_url": "https://github.com/aceofbitcoin",
        "followers_url": "https://api.github.com/users/aceofbitcoin/followers",
        "following_url": "https://api.github.com/users/aceofbitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aceofbitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aceofbitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aceofbitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/aceofbitcoin/orgs",
        "repos_url": "https://api.github.com/users/aceofbitcoin/repos",
        "events_url": "https://api.github.com/users/aceofbitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aceofbitcoin/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:11:16Z",
      "updated_at": "2023-08-29T18:31:56Z",
      "author_association": "NONE",
      "body": "NACK.  I say NJET, NADA, NIENTE, NOPE, NO, いいえ  I quote @__B__T__C__  \"... the miners mine on the layer based & hold it & the users get some shit tokens or shit coins on the drive... \"  personally I totally agree with Pete Todd This BIP300 should not be accepted for several reasons.  Another reason, the rewards system looks like a pyramid scheme if this get through.  This will have technical, legal and ethical implications.  This is a trojan horse code injection to fundamental things of bitcoin.  And yes, belief what You want who I am.  Satoshin",
      "user": {
        "login": "aceofbitcoin",
        "id": 16897964,
        "node_id": "MDQ6VXNlcjE2ODk3OTY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/16897964?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/aceofbitcoin",
        "html_url": "https://github.com/aceofbitcoin",
        "followers_url": "https://api.github.com/users/aceofbitcoin/followers",
        "following_url": "https://api.github.com/users/aceofbitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/aceofbitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/aceofbitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/aceofbitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/aceofbitcoin/orgs",
        "repos_url": "https://api.github.com/users/aceofbitcoin/repos",
        "events_url": "https://api.github.com/users/aceofbitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/aceofbitcoin/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1697913869",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1697942392,
      "node_id": "IC_kwDOABII585lNIt4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1697942392",
      "actor": {
        "login": "Satoshin-Btc",
        "id": 60997115,
        "node_id": "MDQ6VXNlcjYwOTk3MTE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/60997115?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Satoshin-Btc",
        "html_url": "https://github.com/Satoshin-Btc",
        "followers_url": "https://api.github.com/users/Satoshin-Btc/followers",
        "following_url": "https://api.github.com/users/Satoshin-Btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Satoshin-Btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Satoshin-Btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Satoshin-Btc/subscriptions",
        "organizations_url": "https://api.github.com/users/Satoshin-Btc/orgs",
        "repos_url": "https://api.github.com/users/Satoshin-Btc/repos",
        "events_url": "https://api.github.com/users/Satoshin-Btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Satoshin-Btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:34:16Z",
      "updated_at": "2023-08-29T18:34:16Z",
      "author_association": "NONE",
      "body": "Look drivechains are good for only a couple of things such as security, and\r\ndeploying a token possibly while being backed by Bitcoin. It's not a good\r\nidea as a side chain to run simultaneously because it would slow\r\ntransactions as well as screw with the parsing and verification. How ever\r\ncreating a personal drive chain can add a layer of security but can be\r\nmessed up if you don't pay attention to how the drive chain is configured.\r\n\r\nOn Mon, Aug 21, 2023, 6:20 PM Luke Dashjr ***@***.***> wrote:\r\n\r\n> This is a (rough draft) clean rewrite of BIP300 (Drivechain)\r\n> consensus-level code.\r\n>\r\n> Instead of a separate sidechain database (which may be prone to\r\n> hard-to-review/test consistency issues), instead the unusable 8 MSB of the\r\n> UTXO index are reserved for non-UTXO database entries, and the existing\r\n> UTXO db and caching layer is shared. This can be refactored in the future,\r\n> but I think it is the cleanest and most reviewable approach initially -\r\n> open to other ideas, though. There's also some ugliness in the undo data to\r\n> handle restoring the new data, but it's abstracted and shouldn't be too\r\n> hard to reason about.\r\n>\r\n> Using these new primitives, Drivechains can be reimplemented with a\r\n> UTXO-like model. Note that there is zero activation logic in the current\r\n> PR: the protocol changes are *always* active. Therefore, this will *not*\r\n> work (at least not safely) on Bitcoin today, and cannot be deployed without\r\n> significant additional changes to handle an activation.\r\n>\r\n> A new SERIALIZE_TRANSACTION_FOR_WEIGHT serialization flag is also added,\r\n> that is meant only for weight counting. This allows for adjusting weight\r\n> (upward) to fit additional resource requirements by new functionality. In\r\n> this case, several Drivechain \"messages\" are expected to have a larger\r\n> burden than their OP_RETURN encoding would otherwise weigh. However, the\r\n> specific adjustments are not implemented in this draft.\r\n>\r\n> As a consensus change, this can only be implemented with community\r\n> support. Many people seem to have opinions, but please keep them to other\r\n> forums. Despite providing and continuing this implementation, I myself do\r\n> not thereby endorse or otherwise comment on the proposal itself.\r\n>\r\n> Therefore, not looking for concept ACKs/NACKs, just *Approach* ACKs /\r\n> constructive criticism.\r\n> ------------------------------\r\n> You can view, comment on, or merge this pull request online at:\r\n>\r\n>   https://github.com/bitcoin/bitcoin/pull/28311\r\n> Commit Summary\r\n>\r\n>    - 7ee7f6e\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/7ee7f6e615e55f94c6f1453ed8a7cd6c2c30c623>\r\n>    dbwrapper: Restore `CDBIterator::GetValueSize()`\r\n>    - bc6a2e1\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/bc6a2e14b380906ce3eb7db28ac3e1d05bf0ec4c>\r\n>    txdb: Support for flags which prevent opening with incompatible software\r\n>    - e0a51eb\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/e0a51ebde49fb37ca5baa3cfd129b5d8b0dab605>\r\n>    Hide COutPoint with n > 0x00ffffff from consensus/transaction handling\r\n>    - df2c012\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/df2c01207f1ba1bd93492e3d00b6e84015f36278>\r\n>    WIP Drivechain via UTXOs\r\n>    - eca69c4\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/eca69c4affeb26ee6f596f96ed51b667d08cdf7f>\r\n>    primitives/transaction: Implement CTxIn::SetNull\r\n>    - d4eb444\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/d4eb444f6ba630f0ef009999b73282c5068ef4fd>\r\n>    Implement OP_DRIVECHAIN-based sidechain deposits/withdraws\r\n>    - 2493b15\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/2493b15cb096393789932c7ca2370fe8cfb310f3>\r\n>    Add SERIALIZE_TRANSACTION_FOR_WEIGHT flag\r\n>    - ecd75f5\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/ecd75f55cfefdd441bc1505208cfc5b6da5ce035>\r\n>    primitives/transaction: Stub weight increases for drivechains\r\n>    - 4c02190\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/4c02190487910c416ab3423213e867d26dbbd83f>\r\n>    sidechain: Expire sidechain/withdraw proposals\r\n>    - 04783a9\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/04783a9b0f7376dd1d2aa6aa05f4ba8dccd70df2>\r\n>    fixups, simplify record_id confusion in various places\r\n>    - d886713\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/d88671327a869f03a3eec82c891c45d6e2f1b9d9>\r\n>    sidechain: Hash blinded withdraw hashes with the sidechain id to avoid\r\n>    conflicts\r\n>    - 7c8d7e2\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/7c8d7e2d65f3601b6b859698cec85cd667c1ed49>\r\n>    sidechain: INCOMPLETE sidechain activation\r\n>    - f544581\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/f54458150cd27343f8842b4fe50953d4c341b7f5>\r\n>    fixups, cast changes to avoid narrowing conversion warnings\r\n>    - 2192ba1\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/2192ba123d283fee199ed59a240a2ab80275240e>\r\n>    sidechain: Detect several invalid conditions\r\n>    - ff9815a\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/ff9815a98da2c1f4dbdd9c75295b0650e9b19101>\r\n>    Add push1[sidechain id] OP_TRUE after OP_DRIVECHAIN\r\n>    - ea8c1a9\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/ea8c1a960445bd2529e39d58b00be136ccdf34d9>\r\n>    sidechain: Setup DBIDX_SIDECHAIN_CTIP_INFO\r\n>    - afc975b\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/commits/afc975bb6029e982e2bd5420d18e7ca0d4f4413e>\r\n>    sidechain: Detect more edge cases and document TODOs\r\n>\r\n> File Changes\r\n>\r\n> (23 files <https://github.com/bitcoin/bitcoin/pull/28311/files>)\r\n>\r\n>    - *M* src/Makefile.am\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-4cb884d03ebb901069e4ee5de5d02538c40dd9b39919c615d8eaa9d364bbbd77>\r\n>    (3)\r\n>    - *M* src/coins.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-f0ed73d62dae6ca28ebd3045e5fc0d5d02eaaacadb4c2a292985a3fbd7e1c77c>\r\n>    (24)\r\n>    - *M* src/coins.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-095ce1081a930998a10b37358fae5499ac47f8cb6f25f5df5d88e920a54e0341>\r\n>    (26)\r\n>    - *M* src/consensus/validation.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-829bb21fff2a0d0648adb348a52928b2227f1cd05a54f44ce78d84091f8060d4>\r\n>    (6)\r\n>    - *M* src/dbwrapper.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-44bef8fa93d168379ef331d9e11d333be06ce98a8f37ec65f8a987846b90a151>\r\n>    (5)\r\n>    - *M* src/dbwrapper.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-ac5fbeb5de6f28370bc348a579fc465fe7f7b91df0e0483c6edbf10273278c0d>\r\n>    (3)\r\n>    - *M* src/primitives/transaction.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-32f83e93b123235079fbadc3f68f8158c56c67d031a579475e16c6857edbecbf>\r\n>    (30)\r\n>    - *M* src/rpc/blockchain.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-decae4be02fb8a47ab4557fe74a9cb853bdfa3ec0fa1b515c0a1e5de91f4ad0b>\r\n>    (1)\r\n>    - *M* src/script/interpreter.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-a0337ffd7259e8c7c9a7786d6dbd420c80abfa1afdb34ebae3261109d9ae3c19>\r\n>    (2)\r\n>    - *M* src/script/script.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-6da39bed8a76fcaae51f021f0cdd906748aa99fdbf2d41981947f6a1b18fbe7b>\r\n>    (11)\r\n>    - *M* src/script/script.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-93c5ddf703879287802d651b68c9c6199644afe23db0dd3ff77e8d1ce3c20045>\r\n>    (4)\r\n>    - *A* src/sidechain.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-068cca671b293f3ee6f24c0a950c8357fc42518631e8409876c810da7c03ebb9>\r\n>    (466)\r\n>    - *A* src/sidechain.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-c5edaee37a176f59597dc09ce65d926090bca357709bcfd7466f4c239ceb5d6c>\r\n>    (65)\r\n>    - *M* src/test/coins_tests.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-3d0856e8b7f136c588b229e0cbd3b2e2c309cd097ade0879521daba4e1bb2a33>\r\n>    (29)\r\n>    - *M* src/test/fuzz/coins_view.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-1ef3b6a1936b50f3d5ec4a1786d9e2d63d1a3e1815b103e67f20601995f355b4>\r\n>    (14)\r\n>    - *M* src/test/fuzz/coinscache_sim.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-a8f78513bc27f9bf679eead54819a8e5be720401c6ae40858da226a66ca002e2>\r\n>    (10)\r\n>    - *M* src/test/fuzz/tx_pool.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-07fe07ecfff4dd7c233a453006567140ff20d226fd73a20406df14982b1e415b>\r\n>    (2)\r\n>    - *M* src/txdb.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-cafbe1353eff6084b73fd3b6c3dee603e0827348fdd2fe12dfad1e01003a84ed>\r\n>    (36)\r\n>    - *M* src/txdb.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-d102b6032635ce90158c1e6e614f03b50e4449aa46ce23370da5387a658342fd>\r\n>    (6)\r\n>    - *M* src/txmempool.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-c065d4cd2398ad0dbcef393c5dfc53f465bf44723348892395fffd2fb3bac522>\r\n>    (4)\r\n>    - *M* src/txmempool.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-8a2230436880b65a205db9299ab2e4e4adb1d4069146791b5db566f3fb752ada>\r\n>    (2)\r\n>    - *M* src/undo.h\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-75c400fd71ce89e9dab36f9fc4d079746981836b474c2e868135c37eb5139555>\r\n>    (2)\r\n>    - *M* src/validation.cpp\r\n>    <https://github.com/bitcoin/bitcoin/pull/28311/files#diff-97c3a52bc5fad452d82670a7fd291800bae20c7bc35bb82686c2c0a4ea7b5b98>\r\n>    (51)\r\n>\r\n> Patch Links:\r\n>\r\n>    - https://github.com/bitcoin/bitcoin/pull/28311.patch\r\n>    - https://github.com/bitcoin/bitcoin/pull/28311.diff\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/28311>, or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AORL367L5NQUE7TACLIEHOTXWQCODANCNFSM6AAAAAA3ZE4L3M>\r\n> .\r\n> You are receiving this because you are subscribed to this thread.Message\r\n> ID: ***@***.***>\r\n>\r\n",
      "user": {
        "login": "Satoshin-Btc",
        "id": 60997115,
        "node_id": "MDQ6VXNlcjYwOTk3MTE1",
        "avatar_url": "https://avatars.githubusercontent.com/u/60997115?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Satoshin-Btc",
        "html_url": "https://github.com/Satoshin-Btc",
        "followers_url": "https://api.github.com/users/Satoshin-Btc/followers",
        "following_url": "https://api.github.com/users/Satoshin-Btc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Satoshin-Btc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Satoshin-Btc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Satoshin-Btc/subscriptions",
        "organizations_url": "https://api.github.com/users/Satoshin-Btc/orgs",
        "repos_url": "https://api.github.com/users/Satoshin-Btc/repos",
        "events_url": "https://api.github.com/users/Satoshin-Btc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Satoshin-Btc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1697942392",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1697964685,
      "node_id": "IC_kwDOABII585lNOKN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1697964685",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:51:52Z",
      "updated_at": "2023-08-29T18:51:52Z",
      "author_association": "NONE",
      "body": "@luke-jr @petertodd As someone that can claim to be your technical peer and with experience in consensus development, I would appreciate if you can publish on the communication space of your convenience the contractual commitment excerpts linking your work on drivechain to the proposal authors themselves . The amount and all personal matters are no public business, though at the very least I hope you have minimal provisions protecting the autonomy of your creative work or ensuring the intellectual outcome respect FOSS licenses.\r\n\r\nWith all my respect, I’m not questioning the legitimacy as an independent technical expert who has accumulated years of hard works of being paid to offer a grounded and in-depth technical opinion on a subject in the scope of its competence. Here I’m just asking for transparency on potential conflict of interest that one would request in all walk of life (law, health, energy) when experts are expressing themselves on a complex subject with potential large-scale and serious impact on the end-users (financial) life.\r\n\r\nPersonally, I have the competence and knowledge to evaluate the proposal both in code and its associated documentation without relying on “domain experts”, though I think other folks in the community would appreciate the ethical effort. \r\n\r\nI understand it’s delicate as a remark though as Rusty Russell [observed](https://rusty-lightning.medium.com/the-corrosion-of-ethics-in-cryptocurrencies-f7ba77e9dfc3) a while back in matters of open-source cryptocurrency development ethics, we’re keeping each other in check as peers. I’ve been in the same situation early last year when I’ve been approached to do a paid security review of the CTV soft-fork and I politely declined. My professional policy for years have been to decline any work commitment related to consensus changes to preserve the independence of my views.\r\n\r\nIf you would like feedback on how to construct ethically and legally such agreement, I’m staying available out of band to provide my viewpoint and relevant information. I don’t think the discussion is appropriate for the GH repository. I’m staying available to discuss the ethics and ideal development process of consensus changes on the mailing list or other forum of discussions. As a community, I think we’re still paying the trauma of a group of Bitcoin dev experts raising millions in VC-funding almost a decade ago to promise new technology and corresponding consensus changes and finding themselves in a massive situation of conflict of interests with the rest of the ecosystem, whatever the great achievements they have realized on a lot of significant fronts.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1697964685",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10224706104,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJhcKI4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10224706104",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:51:52Z"
    },
    {
      "event": "subscribed",
      "id": 10224706112,
      "node_id": "SE_lADOABII585u40PJzwAAAAJhcKJA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10224706112",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:51:52Z"
    },
    {
      "event": "mentioned",
      "id": 10224706122,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJhcKJK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10224706122",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:51:52Z"
    },
    {
      "event": "subscribed",
      "id": 10224706131,
      "node_id": "SE_lADOABII585u40PJzwAAAAJhcKJT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10224706131",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T18:51:52Z"
    },
    {
      "event": "commented",
      "id": 1698057367,
      "node_id": "IC_kwDOABII585lNkyX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1698057367",
      "actor": {
        "login": "RicYashiroLee",
        "id": 111360343,
        "node_id": "U_kgDOBqM5Vw",
        "avatar_url": "https://avatars.githubusercontent.com/u/111360343?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RicYashiroLee",
        "html_url": "https://github.com/RicYashiroLee",
        "followers_url": "https://api.github.com/users/RicYashiroLee/followers",
        "following_url": "https://api.github.com/users/RicYashiroLee/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RicYashiroLee/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RicYashiroLee/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RicYashiroLee/subscriptions",
        "organizations_url": "https://api.github.com/users/RicYashiroLee/orgs",
        "repos_url": "https://api.github.com/users/RicYashiroLee/repos",
        "events_url": "https://api.github.com/users/RicYashiroLee/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RicYashiroLee/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T20:06:25Z",
      "updated_at": "2023-08-29T20:06:25Z",
      "author_association": "NONE",
      "body": "> This is a (rough draft) clean rewrite of BIP300 (Drivechain) consensus-level code.\r\n> \r\n> Instead of a separate sidechain database (which may be prone to hard-to-review/test consistency issues), instead the unusable 8 MSB of the UTXO index are reserved for non-UTXO database entries, and the existing UTXO db and caching layer is shared. This can be refactored in the future, but I think it is the cleanest and most reviewable approach initially - open to other ideas, though. There's also some ugliness in the undo data to handle restoring the new data, but it's abstracted and shouldn't be too hard to reason about.\r\n> \r\n> Using these new primitives, Drivechains can be reimplemented with a UTXO-like model. Note that there is zero activation logic in the current PR: the protocol changes are _always_ active. Therefore, this will _not_ work (at least not safely) on Bitcoin today, and cannot be deployed without significant additional changes to handle an activation.\r\n> \r\n> A new `SERIALIZE_TRANSACTION_FOR_WEIGHT` serialization flag is also added, that is meant only for weight counting. This allows for adjusting weight (upward) to fit additional resource requirements by new functionality. In this case, several Drivechain \"messages\" are expected to have a larger burden than their `OP_RETURN` encoding would otherwise weigh. However, the specific adjustments are not implemented in this draft.\r\n> \r\n> As a consensus change, this can only be implemented with community support. Many people seem to have opinions, but please keep them to other forums. Despite providing and continuing this implementation, I myself do not thereby endorse or otherwise comment on the proposal itself.\r\n> \r\n> Therefore, not looking for concept ACKs/NACKs (ie, about Drivechains), just _Approach_ ACKs / constructive criticism (ie, about _how_ I'm implementing it).\r\n\r\nNACK, concept, approach, all. IMV Bitcoin is NOT made for the BIP/PR mania, Core Devs profit absolutely from. Any Core Devs, are by definition, not the ones to decide anything due to lack of exemption as service providers in Bitcoin, not unbiased customers/node operators(the only unbiased who must decide about their OWN property). It is for long been that Devs keep pushing node operators out of the decisions that belong solely to them as owners of Bitcoin, NOT to Devs, NOT to miners. Instead of coding every time an OPTION in full nodes software to allow (UN)SUPPORT for each non-stop new BIP/PR mania non-bug fixing CHANGE to Bitcoin, they discretely discuss things in a 'only for the experts central Hub' environment, like this one in GitHub and less user friendly, MS-DOS/command prompt like and as geeky as possible, JUST LIKE ALTCOINERS DID when inventing a lot of weird new jargon for things that always existed, so that all the idiots could eat their very shady technical jargon in speculative marvel and fiat dollar signs in their eyes.",
      "user": {
        "login": "RicYashiroLee",
        "id": 111360343,
        "node_id": "U_kgDOBqM5Vw",
        "avatar_url": "https://avatars.githubusercontent.com/u/111360343?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RicYashiroLee",
        "html_url": "https://github.com/RicYashiroLee",
        "followers_url": "https://api.github.com/users/RicYashiroLee/followers",
        "following_url": "https://api.github.com/users/RicYashiroLee/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RicYashiroLee/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RicYashiroLee/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RicYashiroLee/subscriptions",
        "organizations_url": "https://api.github.com/users/RicYashiroLee/orgs",
        "repos_url": "https://api.github.com/users/RicYashiroLee/repos",
        "events_url": "https://api.github.com/users/RicYashiroLee/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RicYashiroLee/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1698057367",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1698069523,
      "node_id": "IC_kwDOABII585lNnwT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1698069523",
      "actor": {
        "login": "curly60e",
        "id": 55191248,
        "node_id": "MDQ6VXNlcjU1MTkxMjQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/55191248?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/curly60e",
        "html_url": "https://github.com/curly60e",
        "followers_url": "https://api.github.com/users/curly60e/followers",
        "following_url": "https://api.github.com/users/curly60e/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/curly60e/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/curly60e/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/curly60e/subscriptions",
        "organizations_url": "https://api.github.com/users/curly60e/orgs",
        "repos_url": "https://api.github.com/users/curly60e/repos",
        "events_url": "https://api.github.com/users/curly60e/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/curly60e/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-29T20:17:11Z",
      "updated_at": "2023-08-29T20:17:11Z",
      "author_association": "NONE",
      "body": "I emphatically do not support this Pull request.",
      "user": {
        "login": "curly60e",
        "id": 55191248,
        "node_id": "MDQ6VXNlcjU1MTkxMjQ4",
        "avatar_url": "https://avatars.githubusercontent.com/u/55191248?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/curly60e",
        "html_url": "https://github.com/curly60e",
        "followers_url": "https://api.github.com/users/curly60e/followers",
        "following_url": "https://api.github.com/users/curly60e/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/curly60e/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/curly60e/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/curly60e/subscriptions",
        "organizations_url": "https://api.github.com/users/curly60e/orgs",
        "repos_url": "https://api.github.com/users/curly60e/repos",
        "events_url": "https://api.github.com/users/curly60e/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/curly60e/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1698069523",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1698560268,
      "node_id": "IC_kwDOABII585lPfkM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1698560268",
      "actor": {
        "login": "amtriorix",
        "id": 39158975,
        "node_id": "MDQ6VXNlcjM5MTU4OTc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/39158975?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amtriorix",
        "html_url": "https://github.com/amtriorix",
        "followers_url": "https://api.github.com/users/amtriorix/followers",
        "following_url": "https://api.github.com/users/amtriorix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amtriorix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amtriorix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amtriorix/subscriptions",
        "organizations_url": "https://api.github.com/users/amtriorix/orgs",
        "repos_url": "https://api.github.com/users/amtriorix/repos",
        "events_url": "https://api.github.com/users/amtriorix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amtriorix/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T06:21:27Z",
      "updated_at": "2023-08-30T06:21:27Z",
      "author_association": "NONE",
      "body": "Approach NACK.  Also the promotor does block people who debate on this issue on twitter.  If You propose a BIP You defend it with arguments, not with money and propaganda.  This proposal paves the way to abuse the reward system.  People who contribute to mine bitcoin have the right to receive real bitcoin not some reward on a sidechain.  And what happens if the sidechain gets issues with the mainchain to merge etc.  This idea is totally unsafe and my eye is on stratum.",
      "user": {
        "login": "amtriorix",
        "id": 39158975,
        "node_id": "MDQ6VXNlcjM5MTU4OTc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/39158975?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amtriorix",
        "html_url": "https://github.com/amtriorix",
        "followers_url": "https://api.github.com/users/amtriorix/followers",
        "following_url": "https://api.github.com/users/amtriorix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amtriorix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amtriorix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amtriorix/subscriptions",
        "organizations_url": "https://api.github.com/users/amtriorix/orgs",
        "repos_url": "https://api.github.com/users/amtriorix/repos",
        "events_url": "https://api.github.com/users/amtriorix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amtriorix/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1698560268",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1698616829,
      "node_id": "IC_kwDOABII585lPtX9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1698616829",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T07:09:29Z",
      "updated_at": "2023-08-30T07:09:29Z",
      "author_association": "NONE",
      "body": "I thought that this part was admirably clear:\n\n> Many people seem to have opinions, but please keep them to other forums. Despite providing and continuing this implementation, I myself do not thereby endorse or otherwise comment on the proposal itself.\n> \n> Therefore, not looking for concept ACKs/NACKs (ie, about Drivechains), just Approach ACKs / constructive criticism (ie, about how I'm implementing it).\n\nThis area is for discussing the Approach/Implementation. Everything else is off-topic.\n\nAny skeptics or opponents of DC should at least pretend to want to see a real implementation, before dismissing it. After all, pre-implementation the idea is inherently unfinished.",
      "user": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1698616829",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1699442534,
      "node_id": "IC_kwDOABII585lS29m",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699442534",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T15:56:43Z",
      "updated_at": "2023-08-30T15:56:43Z",
      "author_association": "NONE",
      "body": "@psztorc\r\n\r\n> This area is for discussing the Approach/Implementation. Everything else is off-topic.\r\n\r\nThere is an uncertainty on the open-source status of the technical contributions due to the apparent mode of financial compensation of the \"champions\" developers, among other issues. While this might be acceptable for a lot of contributions in other areas of the Bitcoin ecosystem, here we're talking about consensus changes in a $500B ecosystem, any exposure due to uncertain license on key components might taint the rest of the open-source Bitcoin software. I think we've already enough issues with CSW lawsuits from now on to minimize the legal exposure of all ecosystem stakeholders, in my reasonable opinion.\r\n\r\nThis type of discussion happens, among other forums, on the Github repository. E.g #28175.\r\n\r\n> Any skeptics or opponents of DC should at least pretend to want to see a real implementation, before dismissing it. After all, pre-implementation the idea is inherently unfinished.\r\n\r\nI've never seen any Bitcoin Core commit or substantial review on delicate critical components realized under your pseudonym, or even substantial technical contributions on deployed and with real-world usage multi-party applications or contracting protocols (e.g payment channels), so I don't know your level of understanding of the Bitcoin network, protocols architecture and ecosystem. Even when an idea is fully fleshed out in code and once it deployed you have unmeasurable security, safety and compatibility maintenance costs beared by the whole ecosystem ad vitam aeternam (i.e\r\nas long as Bitcoin is around for the next decaces/centuries hopefully). Additionally, it also increases the development cost on all the affected Bitcoin systems: miner stack, mempool and transaction-relay, lightning, vaults, data carriage cost as investigating for the lack or the finding of potentially harmful interactions due to modified miner incentives is a very high technical bar.\r\n\r\nPersonally, I don't have strong technical opinion on DC / sidechains, as with any complex technical matter this is far from being a \"binary\" subject. All I know is we're Aug 30 (depending your timezone) and there is far enough hard technical issues to review and test for the coming year (package relay, assumeutxo, libitcoinkernel, bip324, _maybe maybe_ APO, transaction-relay policy improvement for data carriage usage). Speaking for myself and myself only, this is not worthy to allocate high-caliber technical review time (in a pure FOSS fashion without financial compensation to preserve independence of my judgement) on a consensus changes project with that level of uncertainty in its development process, at the very least until next year Aug 30 2024. By then, I hope project champions will have clarified the development and technical evaluation process of DC.\r\n\r\nIf you would like to discuss in depth the ethics of Bitcoin consensus changes, what lessons can be sketched out from the failed activation of CTV by its champion Jeremy Rubin last year or the best development practices of critical Bitcoin components, I'm staying available to discuss it during in person at a panel or another public format at a Bitcoin conference during the coming years.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1699442534",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10234874799,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJiC8uv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10234874799",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T15:56:44Z"
    },
    {
      "event": "subscribed",
      "id": 10234874814,
      "node_id": "SE_lADOABII585u40PJzwAAAAJiC8u-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10234874814",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T15:56:44Z"
    },
    {
      "event": "commented",
      "id": 1699618656,
      "node_id": "IC_kwDOABII585lTh9g",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1699618656",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-30T18:02:07Z",
      "updated_at": "2023-08-30T18:02:07Z",
      "author_association": "NONE",
      "body": "> There is an uncertainty on the open-source status...\r\n\r\nNot to me. The source code is in the pull request.\r\n\r\n> ....due to the apparent mode of financial compensation of the \"champions\" developers\r\n\r\nYou are referring to *disclosed* financial compensation, only. But everyone here may have undisclosed financial compensation, including [you](https://blog.okcoin.com/okcoin-bitcoin-developer-grant-antoine-riard/). Plus, we all own different amounts of Bitcoin.\r\n\r\nThe appropriate way to handle such un-resolv-able issues, is to discuss the idea on its merits only.\r\n\r\n>  I think we've already enough issues with CSW lawsuits \r\n\r\nFYI I personally donated thousands of $ to fight such lawsuits, some of which provably so -- in public at Bitcoin events.\r\n\r\n> Speaking for myself and myself only, this is not worthy to allocate high-caliber technical review time\r\n\r\nWhy not speak openly, of whatever is really on your mind? Clearly we don't expect a review from every single person on Earth -- as you must know. So either say whatever it is you want to say, or go back to reviewing whatever you think is important.",
      "user": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1699618656",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1700913429,
      "node_id": "IC_kwDOABII585lYeEV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1700913429",
      "actor": {
        "login": "amtriorix",
        "id": 39158975,
        "node_id": "MDQ6VXNlcjM5MTU4OTc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/39158975?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amtriorix",
        "html_url": "https://github.com/amtriorix",
        "followers_url": "https://api.github.com/users/amtriorix/followers",
        "following_url": "https://api.github.com/users/amtriorix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amtriorix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amtriorix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amtriorix/subscriptions",
        "organizations_url": "https://api.github.com/users/amtriorix/orgs",
        "repos_url": "https://api.github.com/users/amtriorix/repos",
        "events_url": "https://api.github.com/users/amtriorix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amtriorix/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T12:06:42Z",
      "updated_at": "2023-08-31T12:46:51Z",
      "author_association": "NONE",
      "body": "> > There is an uncertainty on the open-source status...\r\n> \r\n> Not to me. The source code is in the pull request.\r\n\r\nAnyone who can read your code can see this is pretty dangerous for bitcoin.\r\n\r\nBitcoin is not only about the award system for miners.  In future mining will be done for a big part by pools.\r\nCreating drivechains and give them the possibility to create their own chain, pegged on the mainchain,\r\ncan create huge legal implications.  Pools can also ask contributing miners to cooperate, give them a reward\r\non their sidechain but hodl the bitcoin for themselves.  Then about voting.  A minority of them can just push changes\r\nthrough on their chain.  This is pretty much centralisation.\r\n\r\nYou are clearly affiliated with RogerVer having bitcoincash.  Well You have another path to go with this altcoin imo\r\n\r\n> \r\n> > ....due to the apparent mode of financial compensation of the \"champions\" developers\r\n> \r\n> You are referring to _disclosed_ financial compensation, only. But everyone here may have undisclosed financial compensation, including [you](https://blog.okcoin.com/okcoin-bitcoin-developer-grant-antoine-riard/). Plus, we all own different amounts of Bitcoin.\r\n> \r\n> The appropriate way to handle such un-resolv-able issues, is to discuss the idea on its merits only.\r\n> \r\n> > I think we've already enough issues with CSW lawsuits\r\n> \r\n> FYI I personally donated thousands of $ to fight such lawsuits, some of which provably so -- in public at Bitcoin events.\r\n\r\nThis is not a free ticket or a BUY IN so to speak to push your own agenda through the bitcoin core project.\r\nBitcoin is not for sale it is an open source project.  Refering to this can be translated as, look I donated in the defensive\r\ncase against faketoshi CSW.\r\n\r\nWe all know that Craig Wright does hoax.  Clearly not Satoshi Nakamoto, because he lacks not only the technical skills but also he has NO SINGLE private key related to the genesisblock (block 0), block 1 and not even the PGP key.  \r\nSigning is key.  And he has for sure not the mentality of an open source developer...\r\n\r\nIt was very generous of You to help that teacher in the trails seen he was clearly bullied by CSW who's intention is clearly to grab income from legal pursuits, while the same time he seems not to pay his lawyers or when he loses his case.\r\nThat all is possible in the UK, maybe the USA, but I want to see that happen in West-Europe...\r\n\r\nBut that does not mean You can push through, imo, a pretty dirty hack to centralise bitcoin, to peg on the blockchain and to leak away bitcoin in a sidechain.\r\n\r\nThat is like to use a cherry trunk, branch other fruit on it...when the fruit is rotten or the branch is rot....cut.\r\nAnd those on the branch end up with a trash reward...\r\n\r\nEveryone can fork bitcoin and create their own altcoin.  But to create drivechains, to have indirectly an altcoin,\r\nown rules, own power, own votes, piggy backing on bitcoin...until there is a huge issue and they will all claim. it's bitcoin core that made the error.... I am totally against that idea\r\n\r\n\r\n> \r\n> > Speaking for myself and myself only, this is not worthy to allocate high-caliber technical review time\r\n> \r\n> Why not speak openly, of whatever is really on your mind? Clearly we don't expect a review from every single person on Earth -- as you must know. So either say whatever it is you want to say, or go back to reviewing whatever you think is important.\r\n\r\nFirst **Stratum** improvement....  \r\n\r\nBTW why all those people like You want always change things and 'improve' things?!  Currently bitcoin is safe, robust and all those new idea's clearly not well thought through, experimental, **unsafe** like Peter Todd said, we can miss this totally.\r\n\r\nPersonally I also see this as a very dangerous way to ruin bitcoin.  I explain in detail.\r\n\r\nAnd I quote Satoshi (whatever you think about this claim, and it's not CSW)\r\n\r\n_They can create a #drivechain, convince, force (by law) people to move their bitcoin to the sidechain.  Now their terms.  That's like creating fiat backed by gold so to speak, an altcoin or CBDC.  Then force people by law or defacto to use theirs ?!_\r\n\r\nBTW You did block that account on twitter, i hope there will be no digital sign or You will look like a...,  including a big amount of people inside the bitcoin  community. You push like a merchant with full force propaganda your idea...\r\nMany did state already...this is stinky.\r\n\r\nSo is your purpose to leak out bitcoin to a sidechain to finally have your own terms, control, tracking, whatever?\r\nThis is IMO a major attack (again) on bitcoin just like the blocksize war was, reason Satoshi did revoke his repo key at that time, if nobody did notice.\r\n\r\nI warn you personnally, if bitcoin is again attacked in such way, some will not deal with the ridiculous claims of\r\nCraig Wright but You will have your answer in text SIGNED with the genesis block. And when this need to happen,\r\nyou and those people should provide a huge budget to defend their case because the whale wallet of the early blocks is pretty useful in such case to defend bitcoin.\r\n\r\n**Bitcoin is not to hijack for commercial reasons**, to soft or hard fork in a centralised solution **to finally leak out bitcoin** to an alternative form of an altcoin, but now on a drivechain.\r\n\r\nThanks for your proposal but my vote is, as you know, **NACK** including the one of Ace of Bitcoin You did block btw.\r\n\r\nBtw when You mine have a full node... **`bitcoin-cli -generate 1 2147483647`**\r\n\r\n\r\n\r\n\r\n",
      "user": {
        "login": "amtriorix",
        "id": 39158975,
        "node_id": "MDQ6VXNlcjM5MTU4OTc1",
        "avatar_url": "https://avatars.githubusercontent.com/u/39158975?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/amtriorix",
        "html_url": "https://github.com/amtriorix",
        "followers_url": "https://api.github.com/users/amtriorix/followers",
        "following_url": "https://api.github.com/users/amtriorix/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/amtriorix/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/amtriorix/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/amtriorix/subscriptions",
        "organizations_url": "https://api.github.com/users/amtriorix/orgs",
        "repos_url": "https://api.github.com/users/amtriorix/repos",
        "events_url": "https://api.github.com/users/amtriorix/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/amtriorix/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1700913429",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1700949928,
      "node_id": "IC_kwDOABII585lYm-o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1700949928",
      "actor": {
        "login": "krisgrm",
        "id": 96443776,
        "node_id": "U_kgDOBb-dgA",
        "avatar_url": "https://avatars.githubusercontent.com/u/96443776?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/krisgrm",
        "html_url": "https://github.com/krisgrm",
        "followers_url": "https://api.github.com/users/krisgrm/followers",
        "following_url": "https://api.github.com/users/krisgrm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/krisgrm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/krisgrm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/krisgrm/subscriptions",
        "organizations_url": "https://api.github.com/users/krisgrm/orgs",
        "repos_url": "https://api.github.com/users/krisgrm/repos",
        "events_url": "https://api.github.com/users/krisgrm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/krisgrm/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T12:32:57Z",
      "updated_at": "2023-08-31T12:32:57Z",
      "author_association": "NONE",
      "body": "How do I run/test on my local machine using local chain ? ",
      "user": {
        "login": "krisgrm",
        "id": 96443776,
        "node_id": "U_kgDOBb-dgA",
        "avatar_url": "https://avatars.githubusercontent.com/u/96443776?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/krisgrm",
        "html_url": "https://github.com/krisgrm",
        "followers_url": "https://api.github.com/users/krisgrm/followers",
        "following_url": "https://api.github.com/users/krisgrm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/krisgrm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/krisgrm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/krisgrm/subscriptions",
        "organizations_url": "https://api.github.com/users/krisgrm/orgs",
        "repos_url": "https://api.github.com/users/krisgrm/repos",
        "events_url": "https://api.github.com/users/krisgrm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/krisgrm/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1700949928",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1701006485,
      "node_id": "IC_kwDOABII585lY0yV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1701006485",
      "actor": {
        "login": "JackJin2014",
        "id": 1982447,
        "node_id": "MDQ6VXNlcjE5ODI0NDc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1982447?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JackJin2014",
        "html_url": "https://github.com/JackJin2014",
        "followers_url": "https://api.github.com/users/JackJin2014/followers",
        "following_url": "https://api.github.com/users/JackJin2014/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JackJin2014/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JackJin2014/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JackJin2014/subscriptions",
        "organizations_url": "https://api.github.com/users/JackJin2014/orgs",
        "repos_url": "https://api.github.com/users/JackJin2014/repos",
        "events_url": "https://api.github.com/users/JackJin2014/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JackJin2014/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T13:06:48Z",
      "updated_at": "2023-08-31T13:12:27Z",
      "author_association": "NONE",
      "body": "> How do I run/test on my local machine using local chain ?\r\n* https://layertwolabs.com/download\r\n* https://github.com/LayerTwo-Labs/bitcoin/tree/drivechain",
      "user": {
        "login": "JackJin2014",
        "id": 1982447,
        "node_id": "MDQ6VXNlcjE5ODI0NDc=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1982447?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/JackJin2014",
        "html_url": "https://github.com/JackJin2014",
        "followers_url": "https://api.github.com/users/JackJin2014/followers",
        "following_url": "https://api.github.com/users/JackJin2014/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/JackJin2014/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/JackJin2014/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/JackJin2014/subscriptions",
        "organizations_url": "https://api.github.com/users/JackJin2014/orgs",
        "repos_url": "https://api.github.com/users/JackJin2014/repos",
        "events_url": "https://api.github.com/users/JackJin2014/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/JackJin2014/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1701006485",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1701043860,
      "node_id": "IC_kwDOABII585lY96U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1701043860",
      "actor": {
        "login": "krisgrm",
        "id": 96443776,
        "node_id": "U_kgDOBb-dgA",
        "avatar_url": "https://avatars.githubusercontent.com/u/96443776?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/krisgrm",
        "html_url": "https://github.com/krisgrm",
        "followers_url": "https://api.github.com/users/krisgrm/followers",
        "following_url": "https://api.github.com/users/krisgrm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/krisgrm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/krisgrm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/krisgrm/subscriptions",
        "organizations_url": "https://api.github.com/users/krisgrm/orgs",
        "repos_url": "https://api.github.com/users/krisgrm/repos",
        "events_url": "https://api.github.com/users/krisgrm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/krisgrm/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T13:30:18Z",
      "updated_at": "2023-08-31T13:30:18Z",
      "author_association": "NONE",
      "body": "But the code here is a new implementation of the same thing ? I'd like to\r\nrun both and compare\r\n\r\nOn Thu, Aug 31, 2023, 15:07 JackJin ***@***.***> wrote:\r\n\r\n> How do I run/test on my local machine using local chain ?\r\n> https://layertwolabs.com/download\r\n>\r\n> —\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1701006485>,\r\n> or unsubscribe\r\n> <https://github.com/notifications/unsubscribe-auth/AW7Z3AFMHBP4AQB6GIXSQBTXYCD7RANCNFSM6AAAAAA3ZE4L3M>\r\n> .\r\n> You are receiving this because you commented.Message ID:\r\n> ***@***.***>\r\n>\r\n\r\n-- \r\nCONFIDENTIAL: The information and any files contained in this e-mail are \r\nconfidential and intended solely for the addressee. If you have received it \r\nin error, please notify us immediately by reply e-mail and then delete this \r\nmessage from your system. Please do not copy it or use it for any purposes, \r\nor disclose its contents to any other person. If you are not the intended \r\nrecipient you are notified that disclosing, copying, distributing or taking \r\naction in reliance on the contents of this information is strictly \r\nprohibited. Thank you for your cooperation.\r\n",
      "user": {
        "login": "krisgrm",
        "id": 96443776,
        "node_id": "U_kgDOBb-dgA",
        "avatar_url": "https://avatars.githubusercontent.com/u/96443776?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/krisgrm",
        "html_url": "https://github.com/krisgrm",
        "followers_url": "https://api.github.com/users/krisgrm/followers",
        "following_url": "https://api.github.com/users/krisgrm/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/krisgrm/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/krisgrm/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/krisgrm/subscriptions",
        "organizations_url": "https://api.github.com/users/krisgrm/orgs",
        "repos_url": "https://api.github.com/users/krisgrm/repos",
        "events_url": "https://api.github.com/users/krisgrm/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/krisgrm/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1701043860",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1701566509,
      "node_id": "IC_kwDOABII585la9gt",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1701566509",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T18:34:34Z",
      "updated_at": "2023-08-31T18:34:34Z",
      "author_association": "NONE",
      "body": "@psztorc \r\n\r\n> Not to me. The source code is in the pull request.\r\n\r\nPublishing the code is in the open does not minimize intellectual property hostile claims towards the project in the future. Whatever one think about the philosophical legitimacy of patent and intellectual property, especially in the Internet world, under US patent law, software _might_ sadly be eligible_ to patent protection. If this consensus change and the corresponding source code has been funded by incorporated entities they can very claim resulting licensing to enter into their corporate assets, and from then make a lot of claims. I don’t assume hostile intentions, though in case of future dispute with shareholders in this DC project, it’s hard to predict what can happen.\r\n\r\nAt the very least, I think a reasonable and ethical practice could be for any affiliated corporate entity sponsoring the project to pledge any intellectual rights arising from DC development to be pledged in an open patent organization, e.g https://www.opencrypto.org/about/\r\n\r\n> You are referring to disclosed financial compensation, only. But everyone here may have undisclosed financial\r\n> compensation, including [you](https://blog.okcoin.com/okcoin-bitcoin-developer-grant-antoine-riard/). Plus, we all own\r\n> different amounts of Bitcoin.\r\n\r\n_Undisclosed_ financial compensation is the ethical issue at stake. If you’re have or expect financial compensation (equity valuation or capital investment) from the successful deployment of DC (which might have technical and economics risks on the stability of the Bitcoin network and therefore the value of the coins themselves), I think you're in a situation of _conflict of interests_ with all the _passive_ intelligent Bitcoin investors, of which the financial portfolio strategy can be to wait a slow appreciation of their Bitcoin digital assets. Without playing wizardry with the fundamentals of the system.\r\n\r\nOn the past okcoin funding grant, this contract framework explicitly includes a provision of technical autonomy in the area of Bitcoin consensus changes, on the model of Bitmex bitcoin developer grant agreement (cf. 2.2): https://github.com/jonathanbier/Bitcoin-Developer-Grant-Agreement/blob/master/Bitcoin-Developer-Grant-Agreement.md \r\nThough I can take opportunity to say, in matters of technical neutrality open-source funding, from the viewpoint of a developer I can only recommend to work with the set of historical people I’ve been collaborating with at okcoin as part of their open-source funding program. From my knowledge some historical developers at Blockstream had a similar legal provision of autonomy in their employment agreement.\r\n\r\nEthics and integrity of scientific research are quite well understood in established scientific and software engineering practice. The IETF has rules on [conflict of interests](https://www.ietf.org/about/administration/policies-procedures/conflict-interest/), the NASA has guidelines for promoting [scientific and research integrity](https://www.nasa.gov/sites/default/files/atoms/files/nasa_guidelines_for_promoting_scientific_and_research_integrity-july_2018.pdf) and the ACM has a pretty well-reasoned [code of ethics](https://www.acm.org/code-of-ethics).  Of course ethics is evolutionary, and there is always a sense of proportion and contextualization to keep.\r\n\r\n> The appropriate way to handle such un-resolv-able issues, is to discuss the idea on its merits only.\r\n\r\nI think this is a hard issue where we’re diverging. While those issues are \"un-resolv-able” (“Men are not angels” - James Madison iirc), though it doesn’t mean principles and ethics have nevertheless been developed and nurtured by technical and scientific communities all around the world, as decades of history is showing it (cf. examples above).\r\n\r\nDiscussing in depth an idea as complex as a Bitcoin consensus changes related to miners incentives would consume hundreds of hours of review time, if you have high-caliber technical eyes and you do not wish to give a simple “binary” answer. A displayed low-level of ethics by a technical idea propoent is not appealing and it appears as a hint of a potential waste of time, when such open-source time could be invested in the review of other sensible technical projects such as package relay, bip324 or libbitcoinkernel.\r\n\r\n> FYI I personally donated thousands of $ to fight such lawsuits, some of which provably so -- in public at Bitcoin events.\r\n\r\nI think this is appreciated by the community and you have my own thanks for it, sincerely. I’m not defendant on the CSW lawsuits (at least for now - fingers crossed) though from my looking on the database rights case this is crazy how someone can make such dubious claims on weak materials. And this is a reason of concern from my point above establishing clear open-source and no-patent/defensive patent status of all technical contributions on critical areas like consensus changes.\r\n\r\nAnd as it sounds you have been in Bitcoin since a while, I think you also remember the [ASICBOOST scandal](https://bitcoinmagazine.com/business/breaking-down-bitcoins-asicboost-scandal-solutions), and related issues about patent.\r\n\r\n> Why not speak openly, of whatever is really on your mind? Clearly we don't expect a review from every single person on\r\n> Earth -- as you must know. So either say whatever it is you want to say, or go back to reviewing whatever you think is\r\n> important.\r\n \r\nI would appreciate a more respectful tone from someone (to the best of my knowledge) who has never contributed a line of cpp or find a noteworthy bug in the sensible areas of Bitcoin Core, or equivalent full-node software so far.\r\n\r\nTo speak my mind, I think this will be more efficient in term of review, testing and quality assurance of the proposed consensus changes to have this BIP300 PR be opened in bitcoin-inquisition fork: https://github.com/bitcoin-inquisition/bitcoin/wiki Bitcoin inquisition purpose as a community R&D platform has been discussed here: https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-September/020921.html\r\n\r\nAdditionally, about reviewing Bitcoin consensus changes in 2023, I think this is pointless to review only the consensus primitives changes, without proof-of-concept on associated application software (at least an experimental side-chain, wallet, nodes) to enable giving a judgement on the whole end-to-end usage. Such end-to-end technical bar is at least experimentally followed for APO: https://github.com/instagibbs/lightning/commits/eltoo_support\r\n\r\nBeyond on the ethics of Bitcoin consensus changes, and a wish in the community to have a flat development from centralized companies and their own time agenda ensuring we “give a chance and time” to maybe-not-every-single-person -on-Earth though to as much people has we can to have their say on a consensus change, I think it has been discussed here: \r\nhttps://lists.linuxfoundation.org/pipermail/bitcoin-dev/2022-August/020819.html\r\n\r\nAll that said, I’m maintaining that personally I won’t have time to review proposed DC consensus changes before August 2024 as doing it correctly would take at least 3 months of intense review work, and I think this is quite invariant for any skilled Bitcoin reviewers I know. From my appreciation, there has been a trend to have a more public list (package relay / bip324 / libbitcoinkernel) of shared technical priorities in Bitcoin Core and an aim to follow them. I think this is a waste of time and the door towards _real_ ossification of the protocol if skilled technical eyes have to interrupt their monthly-long review cycle every time someone shows up with a consensus change idea, neither build serenity of conservations.\r\n\r\nMy invitation to discuss in person about the topic of Bitcoin consensus change at a conference during the coming years stays open, or on the mailing list if it’s a communication medium you think it’s better suited. I won’t have time to comment or reply further on this PR at least until December of this year.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1701566509",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10248583303,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJi3PiH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10248583303",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T18:34:35Z"
    },
    {
      "event": "subscribed",
      "id": 10248583311,
      "node_id": "SE_lADOABII585u40PJzwAAAAJi3PiP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10248583311",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T18:34:35Z"
    },
    {
      "event": "mentioned",
      "id": 10248987927,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJi4yUX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10248987927",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T19:17:25Z"
    },
    {
      "event": "subscribed",
      "id": 10248987946,
      "node_id": "SE_lADOABII585u40PJzwAAAAJi4yUq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10248987946",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T19:17:25Z"
    },
    {
      "event": "mentioned",
      "id": 10249670739,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJi7ZBT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10249670739",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T20:27:23Z"
    },
    {
      "event": "subscribed",
      "id": 10249670759,
      "node_id": "SE_lADOABII585u40PJzwAAAAJi7ZBn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10249670759",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T20:27:23Z"
    },
    {
      "event": "mentioned",
      "id": 10249828358,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJi7_gG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10249828358",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T20:42:15Z"
    },
    {
      "event": "subscribed",
      "id": 10249828379,
      "node_id": "SE_lADOABII585u40PJzwAAAAJi7_gb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10249828379",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-08-31T20:42:15Z"
    },
    {
      "event": "commented",
      "id": 1704406417,
      "node_id": "IC_kwDOABII585lly2R",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1704406417",
      "actor": {
        "login": "melvincarvalho",
        "id": 65864,
        "node_id": "MDQ6VXNlcjY1ODY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/65864?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/melvincarvalho",
        "html_url": "https://github.com/melvincarvalho",
        "followers_url": "https://api.github.com/users/melvincarvalho/followers",
        "following_url": "https://api.github.com/users/melvincarvalho/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/melvincarvalho/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/melvincarvalho/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/melvincarvalho/subscriptions",
        "organizations_url": "https://api.github.com/users/melvincarvalho/orgs",
        "repos_url": "https://api.github.com/users/melvincarvalho/repos",
        "events_url": "https://api.github.com/users/melvincarvalho/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/melvincarvalho/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-03T21:18:53Z",
      "updated_at": "2023-09-03T21:19:45Z",
      "author_association": "NONE",
      "body": "Thank you for the proposed BIP on drivechains. I have some concerns regarding the approach:\r\n\r\n1. Coins held in hashrate escrow might become enticing for miners as time progresses.\r\n2. Over time, users could develop a misplaced confidence when seeing drive chain coins in BTC denomination. Any coin losses might prompt calls for forks, with users naturally wanting to recover their funds.\r\n\r\nA potentially more robust solution could be inspired by the demurrage concept from @petertodd. Consider incorporating an escrow fee of 0.01% per day (144 blocks) into the coinbase, possibly emulated as a transaction self-spent with FLOOR(satoshis / 10000). This could ensure:\r\n\r\n- A consistent income stream for miners, enhancing the coinbase indefinitely without favoring individual miners.\r\n- Managed user expectations, promoting chain utility and transaction volume. A reduced market cap on the chain could also yield a more game-theoretically stable environment. Moreover, users might be inclined to transact with their coins on the sidechain and regard L1 as a secure value store.\r\n\r\nJust a suggestion. Appreciate the work being done here!",
      "user": {
        "login": "melvincarvalho",
        "id": 65864,
        "node_id": "MDQ6VXNlcjY1ODY0",
        "avatar_url": "https://avatars.githubusercontent.com/u/65864?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/melvincarvalho",
        "html_url": "https://github.com/melvincarvalho",
        "followers_url": "https://api.github.com/users/melvincarvalho/followers",
        "following_url": "https://api.github.com/users/melvincarvalho/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/melvincarvalho/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/melvincarvalho/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/melvincarvalho/subscriptions",
        "organizations_url": "https://api.github.com/users/melvincarvalho/orgs",
        "repos_url": "https://api.github.com/users/melvincarvalho/repos",
        "events_url": "https://api.github.com/users/melvincarvalho/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/melvincarvalho/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1704406417",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10267392846,
      "node_id": "MEE_lADOABII585u40PJzwAAAAJj-_tO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10267392846",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-03T21:18:53Z"
    },
    {
      "event": "subscribed",
      "id": 10267392851,
      "node_id": "SE_lADOABII585u40PJzwAAAAJj-_tT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10267392851",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-03T21:18:53Z"
    },
    {
      "event": "labeled",
      "id": 10282520458,
      "node_id": "LE_lADOABII585u40PJzwAAAAJk4s-K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10282520458",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-05T11:36:58Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1614445702,
      "node_id": "PRR_kwDOABII585gOnyG",
      "url": null,
      "actor": null,
      "commit_id": "d4eb444f6ba630f0ef009999b73282c5068ef4fd",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "MurrMcK",
        "id": 34688989,
        "node_id": "MDQ6VXNlcjM0Njg4OTg5",
        "avatar_url": "https://avatars.githubusercontent.com/u/34688989?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MurrMcK",
        "html_url": "https://github.com/MurrMcK",
        "followers_url": "https://api.github.com/users/MurrMcK/followers",
        "following_url": "https://api.github.com/users/MurrMcK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MurrMcK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MurrMcK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MurrMcK/subscriptions",
        "organizations_url": "https://api.github.com/users/MurrMcK/orgs",
        "repos_url": "https://api.github.com/users/MurrMcK/repos",
        "events_url": "https://api.github.com/users/MurrMcK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MurrMcK/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#pullrequestreview-1614445702",
      "submitted_at": "2023-09-07T01:42:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
    },
    {
      "event": "reviewed",
      "id": 1615286414,
      "node_id": "PRR_kwDOABII585gR1CO",
      "url": null,
      "actor": null,
      "commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#pullrequestreview-1615286414",
      "submitted_at": "2023-09-07T12:12:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
    },
    {
      "event": "comment_deleted",
      "id": 10361407221,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplob1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361407221",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:42:29Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361409721,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplpC5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361409721",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:42:43Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361410834,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplpUS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361410834",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:42:49Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361412335,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplprv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361412335",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:42:57Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361413397,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplp8V",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361413397",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:03Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361413979,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplqFb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361413979",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:07Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361414725,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplqRF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361414725",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:11Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361416383,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplqq_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361416383",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:21Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361416908,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplqzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361416908",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:24Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361417744,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplrAQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361417744",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:29Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361418557,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplrM9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361418557",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:43:34Z"
    },
    {
      "event": "comment_deleted",
      "id": 10361424485,
      "node_id": "CDE_lADOABII585u40PJzwAAAAJplspl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10361424485",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-13T15:44:07Z"
    },
    {
      "event": "commented",
      "id": 1736445209,
      "node_id": "IC_kwDOABII585ngA0Z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1736445209",
      "actor": {
        "login": "skydogenet",
        "id": 87064980,
        "node_id": "MDQ6VXNlcjg3MDY0OTgw",
        "avatar_url": "https://avatars.githubusercontent.com/u/87064980?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/skydogenet",
        "html_url": "https://github.com/skydogenet",
        "followers_url": "https://api.github.com/users/skydogenet/followers",
        "following_url": "https://api.github.com/users/skydogenet/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/skydogenet/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/skydogenet/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/skydogenet/subscriptions",
        "organizations_url": "https://api.github.com/users/skydogenet/orgs",
        "repos_url": "https://api.github.com/users/skydogenet/repos",
        "events_url": "https://api.github.com/users/skydogenet/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/skydogenet/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-09-26T23:39:53Z",
      "updated_at": "2023-09-26T23:39:53Z",
      "author_association": "NONE",
      "body": "As the first mainnet implementation of Drivechain, we are proud to say that we support BIP300 and BIP301 activation on Bitcoin!\r\n\r\nCheemsburgerking ACK!",
      "user": {
        "login": "skydogenet",
        "id": 87064980,
        "node_id": "MDQ6VXNlcjg3MDY0OTgw",
        "avatar_url": "https://avatars.githubusercontent.com/u/87064980?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/skydogenet",
        "html_url": "https://github.com/skydogenet",
        "followers_url": "https://api.github.com/users/skydogenet/followers",
        "following_url": "https://api.github.com/users/skydogenet/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/skydogenet/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/skydogenet/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/skydogenet/subscriptions",
        "organizations_url": "https://api.github.com/users/skydogenet/orgs",
        "repos_url": "https://api.github.com/users/skydogenet/repos",
        "events_url": "https://api.github.com/users/skydogenet/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/skydogenet/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1736445209",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI0YzdkZmQ3NmMwMGZhNjU4NTY3NDMyYThiYjY2ZmM0YjE2MjVkMmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b4c7dfd76c00fa658567432a8bb66fc4b1625d2d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b4c7dfd76c00fa658567432a8bb66fc4b1625d2d",
      "tree": {
        "sha": "28876be84000503666141cd3bacba3eab43022ba",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/28876be84000503666141cd3bacba3eab43022ba"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/738ef44abb6895dad016d8f32f7d7fa1c251b354",
          "sha": "738ef44abb6895dad016d8f32f7d7fa1c251b354",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/738ef44abb6895dad016d8f32f7d7fa1c251b354"
        }
      ],
      "message": "dbwrapper: Restore `CDBIterator::GetValueSize()`\n\nThis partially reverts commit fb38c6e21f064e23b63a46d15adb873029463cff.\nOriginal code written in 3499ce1e1ad87a86598d00b7124072c91ddad833.",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T15:48:29Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-08-22T00:58:47Z"
      },
      "sha": "b4c7dfd76c00fa658567432a8bb66fc4b1625d2d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1YTViYjA3YjI5NDU0MWE3Njc1MzUzZWRjODE5NTBmY2M4OWY4YzE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5a5bb07b294541a7675353edc81950fcc89f8c1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5a5bb07b294541a7675353edc81950fcc89f8c1",
      "tree": {
        "sha": "7af39f55e375f9c54e74ad4035da4a9623956a75",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7af39f55e375f9c54e74ad4035da4a9623956a75"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b4c7dfd76c00fa658567432a8bb66fc4b1625d2d",
          "sha": "b4c7dfd76c00fa658567432a8bb66fc4b1625d2d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b4c7dfd76c00fa658567432a8bb66fc4b1625d2d"
        }
      ],
      "message": "txdb: Support for flags which prevent opening with incompatible software",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T16:56:13Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-05-10T00:37:17Z"
      },
      "sha": "d5a5bb07b294541a7675353edc81950fcc89f8c1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgzNWE4NjlkYmZhMzFlMGEzNzNlNDQ1YjEyZGExZGZkNTBjODIyNGY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/835a869dbfa31e0a373e445b12da1dfd50c8224f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/835a869dbfa31e0a373e445b12da1dfd50c8224f",
      "tree": {
        "sha": "284213d4886e0978edf4762234db13e4c599b04f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/284213d4886e0978edf4762234db13e4c599b04f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5a5bb07b294541a7675353edc81950fcc89f8c1",
          "sha": "d5a5bb07b294541a7675353edc81950fcc89f8c1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d5a5bb07b294541a7675353edc81950fcc89f8c1"
        }
      ],
      "message": "Hide COutPoint with n > 0x00ffffff from consensus/transaction handling\n\nThis should be safe since it is impossible for transactions to have more than ~0x0001c000 outputs.\n0xffffffff is used for the coinbase COutPoint n, but wouldn't be looked up in the coins db.",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:41Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-05-10T16:36:37Z"
      },
      "sha": "835a869dbfa31e0a373e445b12da1dfd50c8224f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM0ZDc4NjVmNTVkMzBhYWE3N2U0YTE3MTA2NTBlOGUwMzBjMzZkYmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4d7865f55d30aaa77e4a1710650e8e030c36dbe",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c4d7865f55d30aaa77e4a1710650e8e030c36dbe",
      "tree": {
        "sha": "efb82b8a7b0743571275ed0b416dfed6ff95576d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/efb82b8a7b0743571275ed0b416dfed6ff95576d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/835a869dbfa31e0a373e445b12da1dfd50c8224f",
          "sha": "835a869dbfa31e0a373e445b12da1dfd50c8224f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/835a869dbfa31e0a373e445b12da1dfd50c8224f"
        }
      ],
      "message": "WIP Drivechain via UTXOs",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:43Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-10T22:54:43Z"
      },
      "sha": "c4d7865f55d30aaa77e4a1710650e8e030c36dbe"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDliNzZlMTk1MzkwZDg4OWE5YTI1YjYyZWZkZTBkYTVlOGU3OGRkNmQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b76e195390d889a9a25b62efde0da5e8e78dd6d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9b76e195390d889a9a25b62efde0da5e8e78dd6d",
      "tree": {
        "sha": "86d43135f877db836ce9d5bbd1f6714d0df004a9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/86d43135f877db836ce9d5bbd1f6714d0df004a9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c4d7865f55d30aaa77e4a1710650e8e030c36dbe",
          "sha": "c4d7865f55d30aaa77e4a1710650e8e030c36dbe",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c4d7865f55d30aaa77e4a1710650e8e030c36dbe"
        }
      ],
      "message": "primitives/transaction: Implement CTxIn::SetNull",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:43Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T01:02:29Z"
      },
      "sha": "9b76e195390d889a9a25b62efde0da5e8e78dd6d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE0NGFmNjc3M2ZmNzI0OGU2NGYwMGRmN2NjYmRkYWM5MmQ4MGJhMGM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/144af6773ff7248e64f00df7ccbddac92d80ba0c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/144af6773ff7248e64f00df7ccbddac92d80ba0c",
      "tree": {
        "sha": "845869d69f2abef200e9ca77a45a2e55228aaafa",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/845869d69f2abef200e9ca77a45a2e55228aaafa"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9b76e195390d889a9a25b62efde0da5e8e78dd6d",
          "sha": "9b76e195390d889a9a25b62efde0da5e8e78dd6d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9b76e195390d889a9a25b62efde0da5e8e78dd6d"
        }
      ],
      "message": "Implement OP_DRIVECHAIN-based sidechain deposits/withdraws",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:43Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T01:03:28Z"
      },
      "sha": "144af6773ff7248e64f00df7ccbddac92d80ba0c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI2YWI0NDcxZTdlNThhM2UyMzgzYTE0NzQ1ZmQ1NDZjNDMwYmUwZDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b6ab4471e7e58a3e2383a14745fd546c430be0d9",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b6ab4471e7e58a3e2383a14745fd546c430be0d9",
      "tree": {
        "sha": "1a154b6caa70e893aa2f0b442898ffe7894f2bc9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a154b6caa70e893aa2f0b442898ffe7894f2bc9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/144af6773ff7248e64f00df7ccbddac92d80ba0c",
          "sha": "144af6773ff7248e64f00df7ccbddac92d80ba0c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/144af6773ff7248e64f00df7ccbddac92d80ba0c"
        }
      ],
      "message": "Add SERIALIZE_TRANSACTION_FOR_WEIGHT flag",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:43Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T01:20:23Z"
      },
      "sha": "b6ab4471e7e58a3e2383a14745fd546c430be0d9"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUwYTY4YWVmZjYxODk5NDIwYmRmOGFhMjI0MzQ4MTQ0NmU4NWNkMzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0a68aeff61899420bdf8aa2243481446e85cd33",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e0a68aeff61899420bdf8aa2243481446e85cd33",
      "tree": {
        "sha": "aded7ba9151a7b790b0771c34e3d843b807aa229",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/aded7ba9151a7b790b0771c34e3d843b807aa229"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b6ab4471e7e58a3e2383a14745fd546c430be0d9",
          "sha": "b6ab4471e7e58a3e2383a14745fd546c430be0d9",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b6ab4471e7e58a3e2383a14745fd546c430be0d9"
        }
      ],
      "message": "primitives/transaction: Stub weight increases for drivechains",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:43Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T01:42:35Z"
      },
      "sha": "e0a68aeff61899420bdf8aa2243481446e85cd33"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNhNjQ4MDA5OTM2NzQ4ZDgxMjUyNWZiZWFkMDZmYjQ5MzVkYWMwYTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a648009936748d812525fbead06fb4935dac0a3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3a648009936748d812525fbead06fb4935dac0a3",
      "tree": {
        "sha": "433f0edaaf44ca5b4654bf68542b792900da5a49",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/433f0edaaf44ca5b4654bf68542b792900da5a49"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e0a68aeff61899420bdf8aa2243481446e85cd33",
          "sha": "e0a68aeff61899420bdf8aa2243481446e85cd33",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e0a68aeff61899420bdf8aa2243481446e85cd33"
        }
      ],
      "message": "sidechain: Expire sidechain/withdraw proposals",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T17:48:05Z"
      },
      "sha": "3a648009936748d812525fbead06fb4935dac0a3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiODAzMThmNDA1MmNlYmI0Njg3NjY0ZDQ4ZDhhYjhjOWZiYjM0YzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b80318f4052cebb4687664d48d8ab8c9fbb34c0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4b80318f4052cebb4687664d48d8ab8c9fbb34c0",
      "tree": {
        "sha": "758eb1ab4c7d1ddd690d9688d4256e4e34297d32",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/758eb1ab4c7d1ddd690d9688d4256e4e34297d32"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3a648009936748d812525fbead06fb4935dac0a3",
          "sha": "3a648009936748d812525fbead06fb4935dac0a3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3a648009936748d812525fbead06fb4935dac0a3"
        }
      ],
      "message": "fixups, simplify record_id confusion in various places",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T18:04:20Z"
      },
      "sha": "4b80318f4052cebb4687664d48d8ab8c9fbb34c0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ2Zjc4YTQ5MmFhYzI4Njg1MzkzMTQwOGZkZjhjZjliMTU0ODk4MmM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6f78a492aac286853931408fdf8cf9b1548982c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d6f78a492aac286853931408fdf8cf9b1548982c",
      "tree": {
        "sha": "a46f17344660f68f12b3a5f9d9ace03a3466476a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a46f17344660f68f12b3a5f9d9ace03a3466476a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4b80318f4052cebb4687664d48d8ab8c9fbb34c0",
          "sha": "4b80318f4052cebb4687664d48d8ab8c9fbb34c0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4b80318f4052cebb4687664d48d8ab8c9fbb34c0"
        }
      ],
      "message": "sidechain: Hash blinded withdraw hashes with the sidechain id to avoid conflicts",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T18:41:32Z"
      },
      "sha": "d6f78a492aac286853931408fdf8cf9b1548982c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDk0NThjNzdkMjM3NjFhMjMxMDAxOTMzNjkwYWJmZmMwOGI1MTdjYzc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9458c77d23761a231001933690abffc08b517cc7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/9458c77d23761a231001933690abffc08b517cc7",
      "tree": {
        "sha": "ef90f1f94f6283531e8acae04c30358e04284c8a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ef90f1f94f6283531e8acae04c30358e04284c8a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d6f78a492aac286853931408fdf8cf9b1548982c",
          "sha": "d6f78a492aac286853931408fdf8cf9b1548982c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d6f78a492aac286853931408fdf8cf9b1548982c"
        }
      ],
      "message": "sidechain: INCOMPLETE sidechain activation",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T22:51:05Z"
      },
      "sha": "9458c77d23761a231001933690abffc08b517cc7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBhOWZlMWViOGU0NGZmMmRiNmViYmUyMjczNDlhNGE5NDUxYWVjM2M",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0a9fe1eb8e44ff2db6ebbe227349a4a9451aec3c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0a9fe1eb8e44ff2db6ebbe227349a4a9451aec3c",
      "tree": {
        "sha": "b42dfbc20d05f9affbf976493ed8af0e96a1e14f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b42dfbc20d05f9affbf976493ed8af0e96a1e14f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/9458c77d23761a231001933690abffc08b517cc7",
          "sha": "9458c77d23761a231001933690abffc08b517cc7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/9458c77d23761a231001933690abffc08b517cc7"
        }
      ],
      "message": "fixups, cast changes to avoid narrowing conversion warnings",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T22:54:24Z"
      },
      "sha": "0a9fe1eb8e44ff2db6ebbe227349a4a9451aec3c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIwMTE4ZTgzNDg3ZjRjNzU2ZmVlYWQ1YTk2YmM0OTM5NmNhN2NiMDc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20118e83487f4c756feead5a96bc49396ca7cb07",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/20118e83487f4c756feead5a96bc49396ca7cb07",
      "tree": {
        "sha": "155aad71c0222aa17ef66a42bdd548346e156ca2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/155aad71c0222aa17ef66a42bdd548346e156ca2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0a9fe1eb8e44ff2db6ebbe227349a4a9451aec3c",
          "sha": "0a9fe1eb8e44ff2db6ebbe227349a4a9451aec3c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0a9fe1eb8e44ff2db6ebbe227349a4a9451aec3c"
        }
      ],
      "message": "sidechain: Detect several invalid conditions",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-20T23:35:19Z"
      },
      "sha": "20118e83487f4c756feead5a96bc49396ca7cb07"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhkNWY2ODE2NDlkZjE2YTBjYTE2YmIxNmY5MzM0NjJlYTYyMzMwNWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d5f681649df16a0ca16bb16f933462ea623305b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8d5f681649df16a0ca16bb16f933462ea623305b",
      "tree": {
        "sha": "cc6d9f67c76338a37ffe024b9c4f6a62c81b2994",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/cc6d9f67c76338a37ffe024b9c4f6a62c81b2994"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/20118e83487f4c756feead5a96bc49396ca7cb07",
          "sha": "20118e83487f4c756feead5a96bc49396ca7cb07",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/20118e83487f4c756feead5a96bc49396ca7cb07"
        }
      ],
      "message": "Add push1[sidechain id] OP_TRUE after OP_DRIVECHAIN",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-21T00:47:29Z"
      },
      "sha": "8d5f681649df16a0ca16bb16f933462ea623305b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg0MjBlZjgzYzc2NjkxYTkzNWVkNjdmZjYzNzhmNDJjYzQ3NDc0NzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8420ef83c76691a935ed67ff6378f42cc4747470",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8420ef83c76691a935ed67ff6378f42cc4747470",
      "tree": {
        "sha": "8ffd41d15fd9d40eceaa7468a76e70be29be5033",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8ffd41d15fd9d40eceaa7468a76e70be29be5033"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8d5f681649df16a0ca16bb16f933462ea623305b",
          "sha": "8d5f681649df16a0ca16bb16f933462ea623305b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8d5f681649df16a0ca16bb16f933462ea623305b"
        }
      ],
      "message": "sidechain: Setup DBIDX_SIDECHAIN_CTIP_INFO",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-21T00:47:47Z"
      },
      "sha": "8420ef83c76691a935ed67ff6378f42cc4747470"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDkyNGUzNDVjM2E2ODhhYWU1YjFlMTU2MWQ1ZTcyYTg1YjBkMDNkYzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/924e345c3a688aae5b1e1561d5e72a85b0d03dc3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/924e345c3a688aae5b1e1561d5e72a85b0d03dc3",
      "tree": {
        "sha": "38ce5235eb479767ae2e1eca78bd706e8ead8e5c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/38ce5235eb479767ae2e1eca78bd706e8ead8e5c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8420ef83c76691a935ed67ff6378f42cc4747470",
          "sha": "8420ef83c76691a935ed67ff6378f42cc4747470",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8420ef83c76691a935ed67ff6378f42cc4747470"
        }
      ],
      "message": "sidechain: Detect more edge cases and document TODOs",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T18:57:44Z"
      },
      "author": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-07-21T01:28:11Z"
      },
      "sha": "924e345c3a688aae5b1e1561d5e72a85b0d03dc3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg0NWZhODk2YmQ1N2I3YTEwY2RlMDgyOWIwMzYzYTAwNzI1MWE5MzA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/845fa896bd57b7a10cde0829b0363a007251a930",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/845fa896bd57b7a10cde0829b0363a007251a930",
      "tree": {
        "sha": "8b641d58e39cbd992473a24f4389951a3d1ebd64",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8b641d58e39cbd992473a24f4389951a3d1ebd64"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/924e345c3a688aae5b1e1561d5e72a85b0d03dc3",
          "sha": "924e345c3a688aae5b1e1561d5e72a85b0d03dc3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/924e345c3a688aae5b1e1561d5e72a85b0d03dc3"
        }
      ],
      "message": "Assert undo data record id > MAX_INDEX vs <=\n\n* Change sidechain.cpp CreateDBUndoData record_id.n assertion\nto record_id.n > COutPoint::MAX_INDEX from <= COutPoint::MAX_INDEX",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T19:24:32Z"
      },
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@localhost.localdomain",
        "date": "2023-10-02T22:58:40Z"
      },
      "sha": "845fa896bd57b7a10cde0829b0363a007251a930"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZmOGVmMTZmOWRiNjg0MDM2NGZlM2Y2NGNmODJiZTM3NWJhNmQxOWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f8ef16f9db6840364fe3f64cf82be375ba6d19b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6f8ef16f9db6840364fe3f64cf82be375ba6d19b",
      "tree": {
        "sha": "4213cd73b23419e0f64c3d170810e71de25b1ce0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4213cd73b23419e0f64c3d170810e71de25b1ce0"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/845fa896bd57b7a10cde0829b0363a007251a930",
          "sha": "845fa896bd57b7a10cde0829b0363a007251a930",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/845fa896bd57b7a10cde0829b0363a007251a930"
        }
      ],
      "message": "Create sidechain proposal db entry with valid data\n\n* CDataStream is invalidated by test reading the sidechain proposal so\n  create a new stream for CreateDBEntry",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T19:25:49Z"
      },
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@localhost.localdomain",
        "date": "2023-10-02T23:02:07Z"
      },
      "sha": "6f8ef16f9db6840364fe3f64cf82be375ba6d19b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVkNjhmZDJiYjFkYjJhYzUyZDY1MTA3NzE5ZGJhNDA2YjZmZTQ2NTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5d68fd2bb1db2ac52d65107719dba406b6fe4650",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5d68fd2bb1db2ac52d65107719dba406b6fe4650",
      "tree": {
        "sha": "2e3715c30153d6abb272db09d0896a938f412600",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2e3715c30153d6abb272db09d0896a938f412600"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f8ef16f9db6840364fe3f64cf82be375ba6d19b",
          "sha": "6f8ef16f9db6840364fe3f64cf82be375ba6d19b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6f8ef16f9db6840364fe3f64cf82be375ba6d19b"
        }
      ],
      "message": "Sidechain activation fixes\n\n* Fix CDataStream handling bug\n\n* Remove sidechain number from new_sidechains_activated set after\n  activation",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T19:26:24Z"
      },
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@gmail.com",
        "date": "2023-10-07T01:40:46Z"
      },
      "sha": "5d68fd2bb1db2ac52d65107719dba406b6fe4650"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNmZGE3YjMwYWVjYzE5MjcxZTU2NjA3ZDMwMWI2OTdhNTZhZTdiNWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "tree": {
        "sha": "329565d9f4eb331e8e711d1368300c7a7af45f30",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/329565d9f4eb331e8e711d1368300c7a7af45f30"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5d68fd2bb1db2ac52d65107719dba406b6fe4650",
          "sha": "5d68fd2bb1db2ac52d65107719dba406b6fe4650",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5d68fd2bb1db2ac52d65107719dba406b6fe4650"
        }
      ],
      "message": "CScript functions to check for drivechain headers\n\n* Add functions to CScript to check for drivechain coinbase commitment\n  script headers\n\n* Use new functions in sidechain coindb",
      "committer": {
        "name": "Luke Dashjr",
        "email": "luke-jr+git@utopios.org",
        "date": "2023-10-17T19:30:16Z"
      },
      "author": {
        "name": "CryptAxe",
        "email": "cryptaxe@localhost.localdomain",
        "date": "2023-10-02T23:07:02Z"
      },
      "sha": "3fda7b30aecc19271e56607d301b697a56ae7b5c"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 10683054068,
      "node_id": "HRFPE_lADOABII585u40PJzwAAAAJ8wnf0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10683054068",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "commit_url": "https://api.github.com/repos/luke-jr/bitcoin/commits/3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "created_at": "2023-10-17T19:50:07Z"
    },
    {
      "event": "commented",
      "id": 1767143205,
      "node_id": "IC_kwDOABII585pVHcl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1767143205",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T20:42:36Z",
      "updated_at": "2023-10-17T20:42:36Z",
      "author_association": "MEMBER",
      "body": "Rebased and added some fixes",
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1767143205",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "unlabeled",
      "id": 10684248854,
      "node_id": "UNLE_lADOABII585u40PJzwAAAAJ81LMW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10684248854",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-10-17T21:46:41Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "unsubscribed",
      "id": 10863230764,
      "node_id": "UE_lADOABII585u40PJzwAAAAKHf78s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10863230764",
      "actor": {
        "login": "portlandhodl",
        "id": 3104223,
        "node_id": "MDQ6VXNlcjMxMDQyMjM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3104223?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/portlandhodl",
        "html_url": "https://github.com/portlandhodl",
        "followers_url": "https://api.github.com/users/portlandhodl/followers",
        "following_url": "https://api.github.com/users/portlandhodl/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/portlandhodl/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/portlandhodl/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/portlandhodl/subscriptions",
        "organizations_url": "https://api.github.com/users/portlandhodl/orgs",
        "repos_url": "https://api.github.com/users/portlandhodl/repos",
        "events_url": "https://api.github.com/users/portlandhodl/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/portlandhodl/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-04T17:03:57Z"
    },
    {
      "event": "commented",
      "id": 1809045700,
      "node_id": "IC_kwDOABII585r09jE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809045700",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-13T20:33:20Z",
      "updated_at": "2023-11-13T20:33:20Z",
      "author_association": "CONTRIBUTOR",
      "body": "Note that BIP-301 suffers from an [equivocation attack](https://petertodd.org/2023/drivechains#equivocation-attack). While there are [many other reasons](https://petertodd.org/2023/drivechains) to NACK this pull-req, at minimum the equivocation attack is a sufficient reason alone.",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1809045700",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1809311749,
      "node_id": "IC_kwDOABII585r1-gF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809311749",
      "actor": {
        "login": "CryptAxe",
        "id": 8107318,
        "node_id": "MDQ6VXNlcjgxMDczMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptAxe",
        "html_url": "https://github.com/CryptAxe",
        "followers_url": "https://api.github.com/users/CryptAxe/followers",
        "following_url": "https://api.github.com/users/CryptAxe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptAxe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptAxe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
        "repos_url": "https://api.github.com/users/CryptAxe/repos",
        "events_url": "https://api.github.com/users/CryptAxe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-13T23:46:06Z",
      "updated_at": "2023-11-13T23:46:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Note that BIP-301 suffers from an [equivocation attack](https://petertodd.org/2023/drivechains#equivocation-attack). While there are [many other reasons](https://petertodd.org/2023/drivechains) to NACK this pull-req, at minimum the equivocation attack is a sufficient reason alone.\r\n\r\nIf that was an issue then we would add 1 byte... as you mention yourself \"An obvious solution would be to tag the OP_Return outputs with some kind of merge-mined chain identifier, and implement a strict rule consensus rule in the blind-merge-mined chain where the first matching tag wins.\"  It isn't an issue though. h* can and in our examples does include information about which chain it belongs to. ",
      "user": {
        "login": "CryptAxe",
        "id": 8107318,
        "node_id": "MDQ6VXNlcjgxMDczMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptAxe",
        "html_url": "https://github.com/CryptAxe",
        "followers_url": "https://api.github.com/users/CryptAxe/followers",
        "following_url": "https://api.github.com/users/CryptAxe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptAxe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptAxe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
        "repos_url": "https://api.github.com/users/CryptAxe/repos",
        "events_url": "https://api.github.com/users/CryptAxe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1809311749",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1809545337,
      "node_id": "IC_kwDOABII585r23h5",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809545337",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T04:49:46Z",
      "updated_at": "2023-11-14T04:49:46Z",
      "author_association": "CONTRIBUTOR",
      "body": "> It isn't an issue though. h* can and in our examples does include information about which chain it belongs to.\r\n\r\nAs BIP-301 states, h* is a 32 byte hash digest. The problem is you can have two valid h*'s in the same coinbase, for the same chain, and without access to the data behind h*, you have no way of detecting that.",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1809545337",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1809556633,
      "node_id": "IC_kwDOABII585r26SZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809556633",
      "actor": {
        "login": "CryptAxe",
        "id": 8107318,
        "node_id": "MDQ6VXNlcjgxMDczMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptAxe",
        "html_url": "https://github.com/CryptAxe",
        "followers_url": "https://api.github.com/users/CryptAxe/followers",
        "following_url": "https://api.github.com/users/CryptAxe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptAxe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptAxe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
        "repos_url": "https://api.github.com/users/CryptAxe/repos",
        "events_url": "https://api.github.com/users/CryptAxe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T05:07:55Z",
      "updated_at": "2023-11-14T05:07:55Z",
      "author_association": "CONTRIBUTOR",
      "body": "The sidechains have access to the data behind h*. The mainchain doesn't care but it can also tell: https://github.com/LayerTwo-Labs/mainchain/blob/3f4d632a90ebd5eb5f94dba24384235043c34a69/src/validation.cpp#L3952-L3990 This is an example of one part of the BMM h* validation from the old version of our code but you get the idea.",
      "user": {
        "login": "CryptAxe",
        "id": 8107318,
        "node_id": "MDQ6VXNlcjgxMDczMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptAxe",
        "html_url": "https://github.com/CryptAxe",
        "followers_url": "https://api.github.com/users/CryptAxe/followers",
        "following_url": "https://api.github.com/users/CryptAxe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptAxe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptAxe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
        "repos_url": "https://api.github.com/users/CryptAxe/repos",
        "events_url": "https://api.github.com/users/CryptAxe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1809556633",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1809586628,
      "node_id": "IC_kwDOABII585r3BnE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1809586628",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-14T05:49:23Z",
      "updated_at": "2023-11-14T05:49:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "> The sidechains have access to the data behind h*. The mainchain doesn't care but it can also tell: https://github.com/LayerTwo-Labs/mainchain/blob/3f4d632a90ebd5eb5f94dba24384235043c34a69/src/validation.cpp#L3952-L3990 This is an example of one part of the BMM h* validation from the old version of our code but you get the idea.\r\n\r\nThat code allows for additional OP_Returns with the special BMM marker to be put in the set of coinbase outputs, beyond the set of BMMs that should be present due to txs in the block itself. ",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1809586628",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "labeled",
      "id": 10968936538,
      "node_id": "LE_lADOABII585u40PJzwAAAAKNzLBa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10968936538",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-15T15:33:04Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1812756954,
      "node_id": "IC_kwDOABII585sDHna",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1812756954",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-15T15:33:05Z",
      "updated_at": "2023-11-15T15:33:05Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1812756954",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1813260102,
      "node_id": "IC_kwDOABII585sFCdG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813260102",
      "actor": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-15T21:04:59Z",
      "updated_at": "2023-11-15T21:04:59Z",
      "author_association": "NONE",
      "body": "Peter's \"equivocation attack\" is just him misunderstanding BMM -- specifically wrongly assuming it is like Namecoin (as he says in his linked article).\n\nUnlike Namecoin, which is its own Blockchain and can survive on its own, BMM assumes that L1 can be found -- the L2 therefore has full access to all of L1 already. L2 already sees everything on L1, and its order. \n\n(L2, of course, already sees everything on L2. And it knows what sidechain number it is.)\n\nUnfortunately, I don't think there's anything anyone can do, to actually get Peter to spend 5 minutes engaging with Bip300/301. Instead he is determined to:\n\n1) misunderstand the idea\n2) make something else up, that is inaccurate\n3) criticize that\n4) pat himself on the back and call it a day\n\nHis comments at Baltic Honeybadger indicate he had never visited the top of the project site drivechain.info at all in the past 4+ years. And his tweets before TabConf indicate that he had not yet any rudimentary familiarity with how the idea worked, but was going to declare it broken anyway. Even after paying him for his time, he couldn't be bothered to actually look at the idea, he has to just fabricate something instead -- the writeup is full to the brim of these errors and fabrications.\n\nNot sure what else there is to say.",
      "user": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1813260102",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1813734556,
      "node_id": "IC_kwDOABII585sG2Sc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1813734556",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T03:29:01Z",
      "updated_at": "2023-11-16T03:29:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "On Wed, Nov 15, 2023 at 01:05:13PM -0800, Paul Sztorc wrote:\n> Peter's \"equivocation attack\" is just him misunderstanding BMM -- specifically wrongly assuming it is like Namecoin (as he says in his linked article).\n> \n> Unlike Namecoin, which is its own Blockchain and can survive on its own, BMM assumes that L1 can be found -- the L2 therefore has full access to all of L1 already. L2 already sees everything on L1, and its order. \n\nIf that is your design assumption, forcing BMM commitments to be put in the\ncoinbase is redundant and accomplishes nothing. The only reason to do that is\nfor the sake of SPV-type validation, in which case there is a equivocation\nattack.\n\nNote that large coinbase transactions have caused a number of problems before,\nincluding issues with ASIC compatibility and p2pool. We should not inflate\ncoinbase transaction size needlessly.\n\n> (L2, of course, already sees everything on L2. And it knows what sidechain number it is.)\n> \n> Unfortunately, I don't think there's anything anyone can do, to actually get Peter to spend 5 minutes engaging with Bip300/301. Instead he is determined to:\n> \n> 1) misunderstand the idea\n> 2) make something else up, that is inaccurate\n> 3) criticize that\n> 4) pat himself on the back and call it a day\n> \n> His comments at Baltic Honeybadger indicate he had never visited the top of the project site drivechain.info at all in the past 4+ years. And his tweets before TabConf indicate that he had not yet any rudimentary familiarity with how the idea worked, but was going to declare it broken anyway. Even after paying him for his time, he couldn't be bothered to actually look at the idea, he has to just fabricate something instead -- the writeup is full to the brim of these errors and fabrications.\n\nGiven that I'm far from the only person who believes Drivechains are a broken\nidea, I'd suggest you take a step back and reconsider what you are saying here.\n",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1813734556",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1814884903,
      "node_id": "IC_kwDOABII585sLPIn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1814884903",
      "actor": {
        "login": "miketwenty1",
        "id": 7761473,
        "node_id": "MDQ6VXNlcjc3NjE0NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7761473?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/miketwenty1",
        "html_url": "https://github.com/miketwenty1",
        "followers_url": "https://api.github.com/users/miketwenty1/followers",
        "following_url": "https://api.github.com/users/miketwenty1/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/miketwenty1/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/miketwenty1/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/miketwenty1/subscriptions",
        "organizations_url": "https://api.github.com/users/miketwenty1/orgs",
        "repos_url": "https://api.github.com/users/miketwenty1/repos",
        "events_url": "https://api.github.com/users/miketwenty1/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/miketwenty1/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:14:42Z",
      "updated_at": "2023-11-16T17:14:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "@petertodd \r\n> Note that large coinbase transactions have caused a number of problems before,\r\nincluding issues with ASIC compatibility and p2pool. We should not inflate\r\ncoinbase transaction size needlessly.\r\n\r\nWhat responsibilities going forward do devs have with asic compatibility? Seems like a potential conflict of interest in some situations.",
      "user": {
        "login": "miketwenty1",
        "id": 7761473,
        "node_id": "MDQ6VXNlcjc3NjE0NzM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7761473?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/miketwenty1",
        "html_url": "https://github.com/miketwenty1",
        "followers_url": "https://api.github.com/users/miketwenty1/followers",
        "following_url": "https://api.github.com/users/miketwenty1/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/miketwenty1/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/miketwenty1/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/miketwenty1/subscriptions",
        "organizations_url": "https://api.github.com/users/miketwenty1/orgs",
        "repos_url": "https://api.github.com/users/miketwenty1/repos",
        "events_url": "https://api.github.com/users/miketwenty1/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/miketwenty1/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1814884903",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10983664617,
      "node_id": "MEE_lADOABII585u40PJzwAAAAKOrWvp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10983664617",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:14:42Z"
    },
    {
      "event": "subscribed",
      "id": 10983664642,
      "node_id": "SE_lADOABII585u40PJzwAAAAKOrWwC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10983664642",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:14:42Z"
    },
    {
      "event": "commented",
      "id": 1814924908,
      "node_id": "IC_kwDOABII585sLY5s",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1814924908",
      "actor": {
        "login": "CryptAxe",
        "id": 8107318,
        "node_id": "MDQ6VXNlcjgxMDczMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptAxe",
        "html_url": "https://github.com/CryptAxe",
        "followers_url": "https://api.github.com/users/CryptAxe/followers",
        "following_url": "https://api.github.com/users/CryptAxe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptAxe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptAxe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
        "repos_url": "https://api.github.com/users/CryptAxe/repos",
        "events_url": "https://api.github.com/users/CryptAxe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:38:09Z",
      "updated_at": "2023-11-16T17:38:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concern over 33 bytes of data being added per block for blind merged mining seems disingenuous to me. ",
      "user": {
        "login": "CryptAxe",
        "id": 8107318,
        "node_id": "MDQ6VXNlcjgxMDczMTg=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8107318?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/CryptAxe",
        "html_url": "https://github.com/CryptAxe",
        "followers_url": "https://api.github.com/users/CryptAxe/followers",
        "following_url": "https://api.github.com/users/CryptAxe/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/CryptAxe/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/CryptAxe/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/CryptAxe/subscriptions",
        "organizations_url": "https://api.github.com/users/CryptAxe/orgs",
        "repos_url": "https://api.github.com/users/CryptAxe/repos",
        "events_url": "https://api.github.com/users/CryptAxe/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/CryptAxe/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1814924908",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1814963622,
      "node_id": "IC_kwDOABII585sLiWm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1814963622",
      "actor": {
        "login": "RicYashiroLee",
        "id": 111360343,
        "node_id": "U_kgDOBqM5Vw",
        "avatar_url": "https://avatars.githubusercontent.com/u/111360343?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RicYashiroLee",
        "html_url": "https://github.com/RicYashiroLee",
        "followers_url": "https://api.github.com/users/RicYashiroLee/followers",
        "following_url": "https://api.github.com/users/RicYashiroLee/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RicYashiroLee/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RicYashiroLee/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RicYashiroLee/subscriptions",
        "organizations_url": "https://api.github.com/users/RicYashiroLee/orgs",
        "repos_url": "https://api.github.com/users/RicYashiroLee/repos",
        "events_url": "https://api.github.com/users/RicYashiroLee/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RicYashiroLee/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:56:22Z",
      "updated_at": "2023-11-16T18:05:57Z",
      "author_association": "NONE",
      "body": "> @petertodd\r\n> \r\n> > Note that large coinbase transactions have caused a number of problems before,\r\n> > including issues with ASIC compatibility and p2pool. We should not inflate\r\n> > coinbase transaction size needlessly.\r\n> \r\n> What responsibilities going forward do devs have with asic compatibility? Seems like a potential conflict of interest in some situations.\r\n\r\nThe reviewers of this and other PRs/BIPs also are in a position of high risk of conflict of interests. Every Dev wants to merge more needless op_code complexity to Bitcoin, 'world computer' alike, but no Dev is ever proposing to ALSO code the respective OPT-OUT script to Full Nodes Core Software, so that the only people unbiased in this mess, the node operators, could sovereignly (UN)support by themselves every new altcoin alike 'scaling' (altcoiners fav word) feature and non-bug fixing CHANGE to Bitcoin. Running an old node, less and less supported is NOT a decentralizing option either at some point, but much less a centralized Bitcoin filled with code complexity and consequently easier data dumping out of Bitcoin's sole goal (=ONE!) = tyranically (SN's terminology) tiny scope.",
      "user": {
        "login": "RicYashiroLee",
        "id": 111360343,
        "node_id": "U_kgDOBqM5Vw",
        "avatar_url": "https://avatars.githubusercontent.com/u/111360343?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/RicYashiroLee",
        "html_url": "https://github.com/RicYashiroLee",
        "followers_url": "https://api.github.com/users/RicYashiroLee/followers",
        "following_url": "https://api.github.com/users/RicYashiroLee/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/RicYashiroLee/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/RicYashiroLee/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/RicYashiroLee/subscriptions",
        "organizations_url": "https://api.github.com/users/RicYashiroLee/orgs",
        "repos_url": "https://api.github.com/users/RicYashiroLee/repos",
        "events_url": "https://api.github.com/users/RicYashiroLee/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/RicYashiroLee/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1814963622",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 10984186181,
      "node_id": "MEE_lADOABII585u40PJzwAAAAKOtWFF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10984186181",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:56:22Z"
    },
    {
      "event": "subscribed",
      "id": 10984186196,
      "node_id": "SE_lADOABII585u40PJzwAAAAKOtWFU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/10984186196",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-16T17:56:22Z"
    },
    {
      "event": "commented",
      "id": 1824382711,
      "node_id": "IC_kwDOABII585svd73",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1824382711",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T12:52:44Z",
      "updated_at": "2023-11-23T12:52:44Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @petertodd\r\n> \r\n> > Note that large coinbase transactions have caused a number of problems before,\r\n> > including issues with ASIC compatibility and p2pool. We should not inflate\r\n> > coinbase transaction size needlessly.\r\n> \r\n> What responsibilities going forward do devs have with asic compatibility? Seems like a potential conflict of interest in some situations.\r\n\r\nObviously we should not do things that are incompatible with existing ASICs without a *very* good reason. A feature that doesn't actually work is clearly not a good reason.",
      "user": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1824382711",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "mentioned",
      "id": 11047367740,
      "node_id": "MEE_lADOABII585u40PJzwAAAAKSeXQ8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11047367740",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T12:52:45Z"
    },
    {
      "event": "subscribed",
      "id": 11047367756,
      "node_id": "SE_lADOABII585u40PJzwAAAAKSeXRM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11047367756",
      "actor": {
        "login": "petertodd",
        "id": 7042,
        "node_id": "MDQ6VXNlcjcwNDI=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7042?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/petertodd",
        "html_url": "https://github.com/petertodd",
        "followers_url": "https://api.github.com/users/petertodd/followers",
        "following_url": "https://api.github.com/users/petertodd/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/petertodd/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/petertodd/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/petertodd/subscriptions",
        "organizations_url": "https://api.github.com/users/petertodd/orgs",
        "repos_url": "https://api.github.com/users/petertodd/repos",
        "events_url": "https://api.github.com/users/petertodd/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/petertodd/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-11-23T12:52:45Z"
    },
    {
      "event": "commented",
      "id": 1849045560,
      "node_id": "IC_kwDOABII585uNjI4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1849045560",
      "actor": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2023-12-10T18:37:47Z",
      "updated_at": "2023-12-10T18:37:47Z",
      "author_association": "NONE",
      "body": "> > My invitation to discuss in person about the topic of Bitcoin consensus change at a conference during the coming years stays open, or on the mailing list if it’s a communication medium you think it’s better suited.\r\n\r\nHeld my words here. A twitter space did happen end of last week between one of the PR author and myself, which was pleasant overall.\r\n\r\nI made it clear I didn’t have any strong thoughts on drivechain, though I took time to express 2 generic concerns I think affecting all bitcoin second-layers designed and developed for scalability or extend use-case expressivity.\r\n\r\nLack of common metrics on L2s performance on multiple dimensions. E.g onboarding scaling (how many users can co-exist off-chain ?), transactional scaling (how many transfers can be performed off-chain per-on-chain transaction ?), fees cost scaling (what is the average / worst-case on-chain fees / off-chain fees on end-user ?), user computing ressources assumptions (e.g what is the average bandwidth cost ?). For now, it sounds to me people are comparing apples with oranges when talking about Bitcoin L2s.\r\n\r\nPartial risks and security analysis. Since side-chains have been proposed almost a decade ago, I think the community knowledge in term of L2 vector of attacks has growth a lot, especially from the deployment of Lightning. It sounds very plausible that new vectors e.g things like flood-and-loot, pinning, eclipse and time-dilation attacks, liquidity griefing are affecting all constructions in minor or major ways. E.g the 2014 sidechain paper made the observation that most users might use atomic swaps for coins transfers, a time-sensitive L2 protocol.\r\n\r\nMy personal flavor in term of bitcoin consensus changes stay the same. Fix old consensus technical debt such as the timewarp attack, or the thundering herd issue affecting all time-sensitive second-layers.",
      "user": {
        "login": "ariard",
        "id": 23310655,
        "node_id": "MDQ6VXNlcjIzMzEwNjU1",
        "avatar_url": "https://avatars.githubusercontent.com/u/23310655?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ariard",
        "html_url": "https://github.com/ariard",
        "followers_url": "https://api.github.com/users/ariard/followers",
        "following_url": "https://api.github.com/users/ariard/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ariard/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ariard/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ariard/subscriptions",
        "organizations_url": "https://api.github.com/users/ariard/orgs",
        "repos_url": "https://api.github.com/users/ariard/repos",
        "events_url": "https://api.github.com/users/ariard/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ariard/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1849045560",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1878462792,
      "node_id": "IC_kwDOABII585v9xFI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1878462792",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-05T10:39:39Z",
      "updated_at": "2024-01-05T10:39:39Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--13523179cfe9479db18ec6c5d236f789-->\r\nThere hasn't been much activity lately and the patch still needs rebase. What is the status here?\r\n\r\n* Is it still relevant? ➡️ Please solve the conflicts to make it ready for review and to ensure the CI passes.\r\n* Is it no longer relevant? ➡️ Please close.\r\n* Did the author lose interest or time to work on this? ➡️ Please close it and mark it 'Up for grabs' with the label, so that it can be picked up in the future.\r\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1878462792",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "commented",
      "id": 1980924073,
      "node_id": "IC_kwDOABII5852EoCp",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1980924073",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-06T13:52:36Z",
      "updated_at": "2024-03-06T13:52:36Z",
      "author_association": "MEMBER",
      "body": "Closing. The discussion here has run it's course, and it ultimately turned non-technical (this isn't the correct forum for that).",
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#issuecomment-1980924073",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/28311"
    },
    {
      "event": "closed",
      "id": 12028258258,
      "node_id": "CE_lADOABII585u40PJzwAAAALM8KfS",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/12028258258",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-06T13:52:36Z"
    },
    {
      "event": "locked",
      "id": 16612491852,
      "node_id": "LOE_lADOABII585u40PJzwAAAAPeLoJM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16612491852",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-06T07:36:36Z"
    },
    {
      "event": "head_ref_deleted",
      "id": 17918268351,
      "node_id": "HRDE_lADOABII585u40PJzwAAAAQsAxO_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17918268351",
      "actor": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-06-01T21:20:43Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300852973",
      "pull_request_review_id": 1588200210,
      "id": 1300852973,
      "node_id": "PRRC_kwDOABII585NiXDt",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];\n+            // TODO: Implement formats 3+? Or at least validate\n+                // NOTE data_format 2 changed to 0 FIXME\n+                // TODO: (new) data format 2 sets it to the ACKs from the previous block - but those aren't known, have the same cost, and encourages blind upvoting; so can we get rid of it?\n+                // TODO: data format 3 upvotes any bundle leading its rivals by at least 50 ACKs -- also encourages blind upvoting :/\n+            // TODO: How is vote vector actually encoded?\n+            // TODO: Block is invalid if there are no bundles proposed at all\n+            // FIXME: Presumably blocks should only be able to vote once - this is missing in the BIP\n+            for (int sidechain_id = 0; sidechain_id < 0x100; ++sidechain_id) {\n+                // FIXME: bounds checking\n+                // FIXME: skip votes for sidechains with no proposals\n+                uint16_t vote = out.scriptPubKey[6 + (sidechain_id * data_format)];\n+                if (data_format == 2) {\n+                    vote |= uint16_t{out.scriptPubKey[6 + (sidechain_id * data_format) + 1]} << 8;\n+                } else if (vote >= 0xfe) {\n+                    vote |= 0xff00;\n+                }\n+\n+                if (vote == 0xffff) continue;  // abstain\n+\n+                // FIXME: what if it's missing?\n+                CDataStream withdraw_proposals = GetDBEntry(view, {uint256{(uint8_t)sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST});\n+                uint256 bundle_hash;\n+                bool found_bundle{false};\n+                for (uint16_t bundle_hash_num = 0; !withdraw_proposals.eof(); ++bundle_hash_num) {\n+                    withdraw_proposals >> bundle_hash;\n+                    if (bundle_hash_num == vote) found_bundle = true;\n+                    IncrementDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, (bundle_hash_num == vote) ? 1 : -1);\n+                }\n+                if ((!found_bundle) && vote != 0xfffe) {\n+                    return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-ack-nonexistent\");\n+                }\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_PROPOSE)) {\n+            if (out.scriptPubKey.size() != 0x26) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            uint256 bundle_hash;\n+            uint8_t sidechain_id;\n+            try {\n+                s >> bundle_hash;\n+                s >> sidechain_id;\n+            } catch (...) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+\n+            if (GetDBEntry(view, {uint256{sidechain_id}, DBIDX_SIDECHAIN_DATA}).empty()) {\n+                // \"M3 is ignored...if it is for a sidechain that doesn't exist.\"\n+                continue;\n+            }\n+\n+            // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+            // TODO: maybe define this in the BIP and M3 ?\n+            bundle_hash = CalculateDrivechainWithdrawInternalHash(bundle_hash, sidechain_id);\n+\n+            // \"M3 is invalid if...This block already has an M3 for that nSidechain.\"\n+            if (saw_withdraw_proposed_for_sidechain.find(sidechain_id) != saw_withdraw_proposed_for_sidechain.end()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-multiple\");\n+            }\n+            saw_withdraw_proposed_for_sidechain.insert(sidechain_id);\n+\n+            // FIXME: \"M3 is invalid if...A bundle with this hash already paid out. A bundle with this hash was rejected in the past.\" is not practical to track!\n+\n+            if (!GetDBEntry(view, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}).empty()) {\n+                // Withdraw has already been proposed, invalid\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-duplicate\");\n+            }\n+\n+            ModifyDBEntry(view, txundo, block_height, {uint256{sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST}, [&bundle_hash](CDataStream& withdraw_proposals){\n+                withdraw_proposals << bundle_hash;\n+            });\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, s);\n+\n+            withdraw_proposal_list.resize(withdraw_proposal_list.size() + bundle_hash.size());\n+            memcpy(&withdraw_proposal_list.data()[withdraw_proposal_list.size() - bundle_hash.size()], bundle_hash.data(), bundle_hash.size());  // FIXME: C++ify\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_ACK)) {\n+            if (saw_sidechain_acks) {\n+                // FIXME: shouldn't it be possible to ACK multiple proposals for different sidechain ids??\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-multiple\");\n+            }\n+            saw_sidechain_acks = true;\n+\n+            if (out.scriptPubKey.size() != 0x25) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unparsable\");\n+            }\n+            const uint256 sidechain_proposal_hash{Span{&out.scriptPubKey[5], 0x20}};\n+            try {\n+                IncrementDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, 1);\n+            } catch (...) {  // TODO: make this explicitly for a non-existent entry\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unknown\");\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_PROPOSE)) {\n+            if (proposed_a_sidechain) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-multiple\");\n+            }\n+            proposed_a_sidechain = true;\n+\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            Sidechain proposed;\n+            try {\n+                s >> proposed;\n+            } catch (...) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-unparsable\");\n+            }\n+\n+            // TODO: block is invalid if proposed matches the current sidechain\n+\n+            uint256 sidechain_proposal_hash;\n+            CSHA256().Write(out.scriptPubKey.data() + 5, out.scriptPubKey.size() - 5).Finalize(sidechain_proposal_hash.data());\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL}, s);\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, s);\n+\n+            sidechain_proposal_list.resize(sidechain_proposal_list.size() + sidechain_proposal_hash.size());\n+            memcpy(&sidechain_proposal_list.data()[sidechain_proposal_list.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+        }\n+    }\n+\n+    if (!(sidechain_proposal_list.empty() && withdraw_proposal_list.empty())) {\n+        CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+        proposal_list << sidechain_proposal_list;\n+        proposal_list << withdraw_proposal_list;\n+        CreateDBEntry(view, txundo, block_height, {ArithToUint256(arith_uint256{(uint64_t)block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST}, proposal_list);\n+    }\n+\n+    // Perform sidechain overwriting/expiry and withdraw expiry\n+    int completed_block_height = block_height - (SIDECHAIN_WITHDRAW_PERIOD - 1);\n+    COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+    CDataStream completed_proposal_list = GetDBEntry(view, record_id);\n+    if (!completed_proposal_list.empty()) {\n+        DeleteDBEntry(view, txundo, record_id);\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_WITHDRAW_THRESHOLD) {\n+                // Overwrite an existing sidechain with a new one\n+                CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+                Assert(!proposal_s.empty());\n+                Sidechain proposal;\n+                proposal_s >> proposal;\n+\n+                COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+                DeleteDBEntry(view, txundo, sidechain_record_id);\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        for (size_t i = 0; i < withdraw_proposal_list.size(); i += uint256::size()) {\n+            uint256 withdraw_proposal_hash{Span{&withdraw_proposal_list[i], uint256::size()}};\n+            // FIXME: remove from DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST\n+            DeleteDBEntry(view, txundo, {withdraw_proposal_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS});\n+        }\n+    }\n+\n+    // New sidechain activation\n+    completed_block_height = block_height - (SIDECHAIN_ACTIVATION_PERIOD - 1);\n+    completed_proposal_list = GetDBEntry(view, {ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST});\n+    if (!completed_proposal_list.empty()) {\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        std::vector<unsigned char> sidechain_proposal_list_new;\n+        std::set<uint8_t> new_sidechains_activated;\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+            Assert(!proposal_s.empty());\n+            Sidechain proposal;\n+            proposal_s >> proposal;\n+\n+            COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+            CDataStream old_sidechain_s = GetDBEntry(view, sidechain_record_id);\n+            if (!old_sidechain_s.empty()) {\n+                // This would be an overwrite, so it must wait for the final completion after SIDECHAIN_WITHDRAW_PERIOD\n+                sidechain_proposal_list_new.resize(sidechain_proposal_list_new.size() + sidechain_proposal_hash.size());\n+                memcpy(&sidechain_proposal_list_new.data()[sidechain_proposal_list_new.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+                continue;\n+            }\n+\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_ACTIVATION_THRESHOLD) {\n+                // Activate new sidechain\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+                new_sidechains_activated.insert(proposal.idnum);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        if (!new_sidechains_activated.empty()) {\n+            Assume(sidechain_proposal_list.size() != sidechain_proposal_list_new.size());\n+            // Assign CTIPs\n+            for (size_t output_index = 0; output_index < tx.vout.size(); ++output_index) {\n+                if (!tx.vout[output_index].scriptPubKey.IsDrivechain()) continue;\n+\n+                const uint8_t sidechain_id = tx.vout[output_index].scriptPubKey[DRIVECHAIN_SCRIPT_SIDECHAIN_ID_OFFSET];\n+                if (new_sidechains_activated.find(sidechain_id) == new_sidechains_activated.end()) {\n+                    // TODO: OP_DRIVECHAIN (or OP_NOP5) for a non-activating sidechain id; should this be invalid??\n+                    continue;\n+                }\n+\n+                CDataStream ctip_info(SER_NETWORK, PROTOCOL_VERSION);\n+                ctip_info << sidechain_id;\n+                CreateDBEntry(view, txundo, block_height, {tx.GetHash(), DBIDX_SIDECHAIN_CTIP_INFO}, ctip_info);\n+            }\n+            if (!new_sidechains_activated.empty()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-activated-without-ctip\");\n+            }\n+        }\n+\n+        if (sidechain_proposal_list.size() != sidechain_proposal_list_new.size()) {\n+            Assume(!new_sidechains_activated.empty());\n+            COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+            DeleteDBEntry(view, txundo, record_id);\n+\n+            if (!(sidechain_proposal_list_new.empty() && withdraw_proposal_list.empty())) {\n+                CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+                proposal_list << sidechain_proposal_list_new;\n+                proposal_list << withdraw_proposal_list;\n+                CreateDBEntry(view, txundo, block_height, record_id, proposal_list);\n+            }\n+        }\n+    }\n+\n+    return true;\n+}\n+\n+bool VerifyDrivechainSpend(const CTransaction& tx, const unsigned int sidechain_input_n, const std::vector<CTxOut>& spent_outputs, const CCoinsViewCache& view, TxValidationState& state) {\n+    const CTxIn& sidechain_input = tx.vin[sidechain_input_n];\n+    // TODO: Do we want to verify there's only one sidechain involved? BIP300 says yes, but why?\n+\n+    // Lookup sidechain number from CTIP and ensure this is in fact a CTIP to begin with\n+    // FIXME: It might be a good idea to include the sidechain # in the tx itself somewhere?",
      "path": "src/sidechain.cpp",
      "position": 367,
      "original_position": 363,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "if you had the tx commit to the sidechain number somewhere, I think you could remove it from `CalculateDrivechainWithdrawInternalHash`? ",
      "created_at": "2023-08-22T03:04:05Z",
      "updated_at": "2023-08-22T03:04:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1300852973",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1300852973"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 367,
      "original_line": 367,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301640710",
      "pull_request_review_id": 1589433555,
      "id": 1301640710,
      "node_id": "PRRC_kwDOABII585NlXYG",
      "diff_hunk": "@@ -591,6 +591,8 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n                     break;\n                 }\n \n+                // NOTE: OP_DRIVECHAIN (OP_NOP5) is enforced in VerifyDrivechainSpend\n+\n                 case OP_NOP1: case OP_NOP4: case OP_NOP5:",
      "path": "src/script/interpreter.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "OP_NOP2 is no longer here because of CLTV. should we have the `case OP_NOP5:` in the same arm of the switch as `OP_DRIVECHAIN`? Would make it more clear to future readers that OP_NOP5 is the same",
      "created_at": "2023-08-22T13:21:36Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301640710",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301640710"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 596,
      "original_line": 596,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301644600",
      "pull_request_review_id": 1589433555,
      "id": 1301644600,
      "node_id": "PRRC_kwDOABII585NlYU4",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {",
      "path": "src/sidechain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "do we also need to unwind sidechain db operations (like incrementing of `DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS`) in the undo data?",
      "created_at": "2023-08-22T13:24:24Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301644600",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301644600"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 19,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301649645",
      "pull_request_review_id": 1589433555,
      "id": 1301649645,
      "node_id": "PRRC_kwDOABII585NlZjt",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1",
      "path": "src/sidechain.cpp",
      "position": 64,
      "original_position": 64,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I read the intent here as: the counter will never be < 0. If that's an important correctness property for the sidechain voting, would be nice to spell it out in a comment and/or reify it in an assert after the counter change on line 65",
      "created_at": "2023-08-22T13:27:53Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301649645",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301649645"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 64,
      "original_line": 64,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301656272",
      "pull_request_review_id": 1589433555,
      "id": 1301656272,
      "node_id": "PRRC_kwDOABII585NlbLQ",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains",
      "path": "src/sidechain.cpp",
      "position": 79,
      "original_position": 79,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "between this comment and the fact that the first in/out of the tx are nulled for computing the hash, it sounds like the same withdrawal tx could be provided for multiple sidechains. Is that desired?",
      "created_at": "2023-08-22T13:32:24Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301656272",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301656272"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301660385",
      "pull_request_review_id": 1589433555,
      "id": 1301660385,
      "node_id": "PRRC_kwDOABII585NlcLh",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];\n+            // TODO: Implement formats 3+? Or at least validate\n+                // NOTE data_format 2 changed to 0 FIXME\n+                // TODO: (new) data format 2 sets it to the ACKs from the previous block - but those aren't known, have the same cost, and encourages blind upvoting; so can we get rid of it?\n+                // TODO: data format 3 upvotes any bundle leading its rivals by at least 50 ACKs -- also encourages blind upvoting :/\n+            // TODO: How is vote vector actually encoded?\n+            // TODO: Block is invalid if there are no bundles proposed at all\n+            // FIXME: Presumably blocks should only be able to vote once - this is missing in the BIP\n+            for (int sidechain_id = 0; sidechain_id < 0x100; ++sidechain_id) {\n+                // FIXME: bounds checking",
      "path": "src/sidechain.cpp",
      "position": 107,
      "original_position": 111,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "probably something like `out.scriptPubKey.size() >= 6 + (0x100 * data_format)`  before we start counting votes",
      "created_at": "2023-08-22T13:35:20Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301660385",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301660385"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 107,
      "original_line": 107,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301663764",
      "pull_request_review_id": 1589433555,
      "id": 1301663764,
      "node_id": "PRRC_kwDOABII585NldAU",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];",
      "path": "src/sidechain.cpp",
      "position": 98,
      "original_position": 102,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "why is `data_format` variable? if it was something fixed, we could statically determine the block weight increase and also check the size of the scriptpubkey above (after line 94) and bail early if ifs not well-formed",
      "created_at": "2023-08-22T13:37:46Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301663764",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301663764"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301667255",
      "pull_request_review_id": 1589433555,
      "id": 1301667255,
      "node_id": "PRRC_kwDOABII585Nld23",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {",
      "path": "src/sidechain.cpp",
      "position": 19,
      "original_position": 19,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": 1301644600,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "ah, I see now that `CreateDbEntry` and `DeleteDbEntry` create undo data, and `ModifyDbEntry` calls both of them. Nevermind. Leaving this comment here for future reviewers",
      "created_at": "2023-08-22T13:40:10Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301667255",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301667255"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 19,
      "original_line": 19,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301673754",
      "pull_request_review_id": 1589433555,
      "id": 1301673754,
      "node_id": "PRRC_kwDOABII585Nlfca",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];\n+            // TODO: Implement formats 3+? Or at least validate\n+                // NOTE data_format 2 changed to 0 FIXME\n+                // TODO: (new) data format 2 sets it to the ACKs from the previous block - but those aren't known, have the same cost, and encourages blind upvoting; so can we get rid of it?\n+                // TODO: data format 3 upvotes any bundle leading its rivals by at least 50 ACKs -- also encourages blind upvoting :/\n+            // TODO: How is vote vector actually encoded?\n+            // TODO: Block is invalid if there are no bundles proposed at all\n+            // FIXME: Presumably blocks should only be able to vote once - this is missing in the BIP\n+            for (int sidechain_id = 0; sidechain_id < 0x100; ++sidechain_id) {\n+                // FIXME: bounds checking\n+                // FIXME: skip votes for sidechains with no proposals\n+                uint16_t vote = out.scriptPubKey[6 + (sidechain_id * data_format)];\n+                if (data_format == 2) {\n+                    vote |= uint16_t{out.scriptPubKey[6 + (sidechain_id * data_format) + 1]} << 8;\n+                } else if (vote >= 0xfe) {\n+                    vote |= 0xff00;\n+                }\n+\n+                if (vote == 0xffff) continue;  // abstain\n+\n+                // FIXME: what if it's missing?\n+                CDataStream withdraw_proposals = GetDBEntry(view, {uint256{(uint8_t)sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST});\n+                uint256 bundle_hash;\n+                bool found_bundle{false};\n+                for (uint16_t bundle_hash_num = 0; !withdraw_proposals.eof(); ++bundle_hash_num) {\n+                    withdraw_proposals >> bundle_hash;\n+                    if (bundle_hash_num == vote) found_bundle = true;\n+                    IncrementDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, (bundle_hash_num == vote) ? 1 : -1);\n+                }\n+                if ((!found_bundle) && vote != 0xfffe) {\n+                    return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-ack-nonexistent\");\n+                }\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_PROPOSE)) {\n+            if (out.scriptPubKey.size() != 0x26) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            uint256 bundle_hash;\n+            uint8_t sidechain_id;\n+            try {\n+                s >> bundle_hash;\n+                s >> sidechain_id;\n+            } catch (...) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+\n+            if (GetDBEntry(view, {uint256{sidechain_id}, DBIDX_SIDECHAIN_DATA}).empty()) {\n+                // \"M3 is ignored...if it is for a sidechain that doesn't exist.\"\n+                continue;\n+            }\n+\n+            // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+            // TODO: maybe define this in the BIP and M3 ?\n+            bundle_hash = CalculateDrivechainWithdrawInternalHash(bundle_hash, sidechain_id);\n+\n+            // \"M3 is invalid if...This block already has an M3 for that nSidechain.\"\n+            if (saw_withdraw_proposed_for_sidechain.find(sidechain_id) != saw_withdraw_proposed_for_sidechain.end()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-multiple\");\n+            }\n+            saw_withdraw_proposed_for_sidechain.insert(sidechain_id);\n+\n+            // FIXME: \"M3 is invalid if...A bundle with this hash already paid out. A bundle with this hash was rejected in the past.\" is not practical to track!\n+\n+            if (!GetDBEntry(view, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}).empty()) {\n+                // Withdraw has already been proposed, invalid\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-duplicate\");\n+            }\n+\n+            ModifyDBEntry(view, txundo, block_height, {uint256{sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST}, [&bundle_hash](CDataStream& withdraw_proposals){\n+                withdraw_proposals << bundle_hash;\n+            });\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, s);\n+\n+            withdraw_proposal_list.resize(withdraw_proposal_list.size() + bundle_hash.size());\n+            memcpy(&withdraw_proposal_list.data()[withdraw_proposal_list.size() - bundle_hash.size()], bundle_hash.data(), bundle_hash.size());  // FIXME: C++ify\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_ACK)) {\n+            if (saw_sidechain_acks) {\n+                // FIXME: shouldn't it be possible to ACK multiple proposals for different sidechain ids??\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-multiple\");\n+            }\n+            saw_sidechain_acks = true;\n+\n+            if (out.scriptPubKey.size() != 0x25) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unparsable\");\n+            }\n+            const uint256 sidechain_proposal_hash{Span{&out.scriptPubKey[5], 0x20}};\n+            try {\n+                IncrementDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, 1);\n+            } catch (...) {  // TODO: make this explicitly for a non-existent entry\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unknown\");\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_PROPOSE)) {\n+            if (proposed_a_sidechain) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-multiple\");\n+            }\n+            proposed_a_sidechain = true;\n+\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            Sidechain proposed;\n+            try {\n+                s >> proposed;\n+            } catch (...) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-unparsable\");\n+            }\n+\n+            // TODO: block is invalid if proposed matches the current sidechain\n+\n+            uint256 sidechain_proposal_hash;\n+            CSHA256().Write(out.scriptPubKey.data() + 5, out.scriptPubKey.size() - 5).Finalize(sidechain_proposal_hash.data());\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL}, s);\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, s);\n+\n+            sidechain_proposal_list.resize(sidechain_proposal_list.size() + sidechain_proposal_hash.size());\n+            memcpy(&sidechain_proposal_list.data()[sidechain_proposal_list.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+        }\n+    }\n+\n+    if (!(sidechain_proposal_list.empty() && withdraw_proposal_list.empty())) {\n+        CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+        proposal_list << sidechain_proposal_list;\n+        proposal_list << withdraw_proposal_list;\n+        CreateDBEntry(view, txundo, block_height, {ArithToUint256(arith_uint256{(uint64_t)block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST}, proposal_list);\n+    }\n+\n+    // Perform sidechain overwriting/expiry and withdraw expiry\n+    int completed_block_height = block_height - (SIDECHAIN_WITHDRAW_PERIOD - 1);\n+    COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+    CDataStream completed_proposal_list = GetDBEntry(view, record_id);\n+    if (!completed_proposal_list.empty()) {\n+        DeleteDBEntry(view, txundo, record_id);\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_WITHDRAW_THRESHOLD) {\n+                // Overwrite an existing sidechain with a new one",
      "path": "src/sidechain.cpp",
      "position": 255,
      "original_position": 255,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "do we want to also explicitly delete any lingering `DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST` entries for the deleted sidechain?",
      "created_at": "2023-08-22T13:44:47Z",
      "updated_at": "2023-08-22T13:46:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1301673754",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1301673754"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 255,
      "original_line": 255,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302103707",
      "pull_request_review_id": 1590185947,
      "id": 1302103707,
      "node_id": "PRRC_kwDOABII585NnIab",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];",
      "path": "src/sidechain.cpp",
      "position": 98,
      "original_position": 102,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": 1301663764,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I agree. I'm not sure what the intent is for it. It seems to be based on a mistaken assumption that serialized bytes are a resource to minimise. But for now, this implements [most of] the current BIP draft.",
      "created_at": "2023-08-22T19:32:30Z",
      "updated_at": "2023-08-22T19:32:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1302103707",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1302103707"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 98,
      "original_line": 98,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1317992472",
      "pull_request_review_id": 1614445702,
      "id": 1317992472,
      "node_id": "PRRC_kwDOABII585OjvgY",
      "diff_hunk": "@@ -171,4 +179,116 @@ void UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &t\n     proposal_list << withdraw_proposal_list;\n     COutPoint record_id{ArithToUint256(arith_uint256{uint64_t{block_height}}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n     CreateDBEntry(view, txundo, block_height, record_id, MakeByteSpan(proposal_list));\n+\n+    // TODO: clean up expiring stuff\n+    // TODO: activate sidechains and assign CTIPs\n+}\n+\n+bool VerifyDrivechainSpend(const CTransaction& tx, const unsigned int sidechain_input_n, const std::vector<CTxOut>& spent_outputs, const CCoinsViewCache& view, TxValidationState& state) {",
      "path": "src/sidechain.cpp",
      "position": 362,
      "original_position": 48,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "d4eb444f6ba630f0ef009999b73282c5068ef4fd",
      "in_reply_to_id": null,
      "user": {
        "login": "MurrMcK",
        "id": 34688989,
        "node_id": "MDQ6VXNlcjM0Njg4OTg5",
        "avatar_url": "https://avatars.githubusercontent.com/u/34688989?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/MurrMcK",
        "html_url": "https://github.com/MurrMcK",
        "followers_url": "https://api.github.com/users/MurrMcK/followers",
        "following_url": "https://api.github.com/users/MurrMcK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/MurrMcK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/MurrMcK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/MurrMcK/subscriptions",
        "organizations_url": "https://api.github.com/users/MurrMcK/orgs",
        "repos_url": "https://api.github.com/users/MurrMcK/repos",
        "events_url": "https://api.github.com/users/MurrMcK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/MurrMcK/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It seems here that one has to spend the CTIP in order to deposit to a sidechain. And if there are multiple deposits in a block then each deposit after the first one must spend the previous unconfirmed CTIP in order to be accepted.\r\n\r\nIf the fee rate required to be included in a block is higher than the minimum fee to be included in miner mempools, this seems to open the door for \"freeloaders\" who pay the minimum fee to be included in the mempool, hoping to be subsidised by subsequent depositors within the same block - as subsequent depositors are forced to spend the freeloader's unconfirmed CTIP in order to be accepted into mempools. This seems like it could result in a bad user experience.\r\n\r\nIs it not possible to make it so that deposits do not have to spend the CTIP, but rather make an additional output to the sidechain address? Then, when a block is mined, there can be a different rule where the miner is forced to make a consolidation transaction merging all the sidechain UTXOs into one. So essentially, the \"only one CTIP allowed\" rule is only checked based on the final state once all transactions in the block are accounted for.\r\n\r\nI'm not sure how this would affect the overall size of the deposits, but it seems that it would be minimal. There'd be 1 more transaction, 1 more input and 1 more output in total compared to the current method. We could also allow both methods of depositing and users can choose based on the circumstances.",
      "created_at": "2023-09-07T01:42:05Z",
      "updated_at": "2023-09-07T01:42:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1317992472",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1317992472"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 362,
      "original_line": 362,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318512848",
      "pull_request_review_id": 1615286414,
      "id": 1318512848,
      "node_id": "PRRC_kwDOABII585OlujQ",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];\n+            // TODO: Implement formats 3+? Or at least validate\n+                // NOTE data_format 2 changed to 0 FIXME\n+                // TODO: (new) data format 2 sets it to the ACKs from the previous block - but those aren't known, have the same cost, and encourages blind upvoting; so can we get rid of it?\n+                // TODO: data format 3 upvotes any bundle leading its rivals by at least 50 ACKs -- also encourages blind upvoting :/\n+            // TODO: How is vote vector actually encoded?\n+            // TODO: Block is invalid if there are no bundles proposed at all\n+            // FIXME: Presumably blocks should only be able to vote once - this is missing in the BIP\n+            for (int sidechain_id = 0; sidechain_id < 0x100; ++sidechain_id) {\n+                // FIXME: bounds checking\n+                // FIXME: skip votes for sidechains with no proposals\n+                uint16_t vote = out.scriptPubKey[6 + (sidechain_id * data_format)];\n+                if (data_format == 2) {\n+                    vote |= uint16_t{out.scriptPubKey[6 + (sidechain_id * data_format) + 1]} << 8;\n+                } else if (vote >= 0xfe) {\n+                    vote |= 0xff00;\n+                }\n+\n+                if (vote == 0xffff) continue;  // abstain\n+\n+                // FIXME: what if it's missing?\n+                CDataStream withdraw_proposals = GetDBEntry(view, {uint256{(uint8_t)sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST});\n+                uint256 bundle_hash;\n+                bool found_bundle{false};\n+                for (uint16_t bundle_hash_num = 0; !withdraw_proposals.eof(); ++bundle_hash_num) {\n+                    withdraw_proposals >> bundle_hash;\n+                    if (bundle_hash_num == vote) found_bundle = true;\n+                    IncrementDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, (bundle_hash_num == vote) ? 1 : -1);\n+                }\n+                if ((!found_bundle) && vote != 0xfffe) {\n+                    return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-ack-nonexistent\");\n+                }\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_PROPOSE)) {\n+            if (out.scriptPubKey.size() != 0x26) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            uint256 bundle_hash;\n+            uint8_t sidechain_id;\n+            try {\n+                s >> bundle_hash;\n+                s >> sidechain_id;\n+            } catch (...) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+\n+            if (GetDBEntry(view, {uint256{sidechain_id}, DBIDX_SIDECHAIN_DATA}).empty()) {\n+                // \"M3 is ignored...if it is for a sidechain that doesn't exist.\"\n+                continue;\n+            }\n+\n+            // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+            // TODO: maybe define this in the BIP and M3 ?\n+            bundle_hash = CalculateDrivechainWithdrawInternalHash(bundle_hash, sidechain_id);\n+\n+            // \"M3 is invalid if...This block already has an M3 for that nSidechain.\"\n+            if (saw_withdraw_proposed_for_sidechain.find(sidechain_id) != saw_withdraw_proposed_for_sidechain.end()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-multiple\");\n+            }\n+            saw_withdraw_proposed_for_sidechain.insert(sidechain_id);\n+\n+            // FIXME: \"M3 is invalid if...A bundle with this hash already paid out. A bundle with this hash was rejected in the past.\" is not practical to track!\n+\n+            if (!GetDBEntry(view, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}).empty()) {\n+                // Withdraw has already been proposed, invalid\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-duplicate\");\n+            }\n+\n+            ModifyDBEntry(view, txundo, block_height, {uint256{sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST}, [&bundle_hash](CDataStream& withdraw_proposals){\n+                withdraw_proposals << bundle_hash;\n+            });\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, s);\n+\n+            withdraw_proposal_list.resize(withdraw_proposal_list.size() + bundle_hash.size());\n+            memcpy(&withdraw_proposal_list.data()[withdraw_proposal_list.size() - bundle_hash.size()], bundle_hash.data(), bundle_hash.size());  // FIXME: C++ify\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_ACK)) {\n+            if (saw_sidechain_acks) {\n+                // FIXME: shouldn't it be possible to ACK multiple proposals for different sidechain ids??\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-multiple\");\n+            }\n+            saw_sidechain_acks = true;\n+\n+            if (out.scriptPubKey.size() != 0x25) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unparsable\");\n+            }\n+            const uint256 sidechain_proposal_hash{Span{&out.scriptPubKey[5], 0x20}};\n+            try {\n+                IncrementDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, 1);\n+            } catch (...) {  // TODO: make this explicitly for a non-existent entry\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unknown\");\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_PROPOSE)) {\n+            if (proposed_a_sidechain) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-multiple\");\n+            }\n+            proposed_a_sidechain = true;\n+\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            Sidechain proposed;\n+            try {\n+                s >> proposed;\n+            } catch (...) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-unparsable\");\n+            }\n+\n+            // TODO: block is invalid if proposed matches the current sidechain\n+\n+            uint256 sidechain_proposal_hash;\n+            CSHA256().Write(out.scriptPubKey.data() + 5, out.scriptPubKey.size() - 5).Finalize(sidechain_proposal_hash.data());\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL}, s);\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, s);\n+\n+            sidechain_proposal_list.resize(sidechain_proposal_list.size() + sidechain_proposal_hash.size());\n+            memcpy(&sidechain_proposal_list.data()[sidechain_proposal_list.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+        }\n+    }\n+\n+    if (!(sidechain_proposal_list.empty() && withdraw_proposal_list.empty())) {\n+        CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+        proposal_list << sidechain_proposal_list;\n+        proposal_list << withdraw_proposal_list;\n+        CreateDBEntry(view, txundo, block_height, {ArithToUint256(arith_uint256{(uint64_t)block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST}, proposal_list);\n+    }\n+\n+    // Perform sidechain overwriting/expiry and withdraw expiry\n+    int completed_block_height = block_height - (SIDECHAIN_WITHDRAW_PERIOD - 1);\n+    COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+    CDataStream completed_proposal_list = GetDBEntry(view, record_id);\n+    if (!completed_proposal_list.empty()) {\n+        DeleteDBEntry(view, txundo, record_id);\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_WITHDRAW_THRESHOLD) {\n+                // Overwrite an existing sidechain with a new one\n+                CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+                Assert(!proposal_s.empty());\n+                Sidechain proposal;\n+                proposal_s >> proposal;\n+\n+                COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+                DeleteDBEntry(view, txundo, sidechain_record_id);\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        for (size_t i = 0; i < withdraw_proposal_list.size(); i += uint256::size()) {\n+            uint256 withdraw_proposal_hash{Span{&withdraw_proposal_list[i], uint256::size()}};\n+            // FIXME: remove from DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST\n+            DeleteDBEntry(view, txundo, {withdraw_proposal_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS});\n+        }\n+    }\n+\n+    // New sidechain activation\n+    completed_block_height = block_height - (SIDECHAIN_ACTIVATION_PERIOD - 1);\n+    completed_proposal_list = GetDBEntry(view, {ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST});\n+    if (!completed_proposal_list.empty()) {\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        std::vector<unsigned char> sidechain_proposal_list_new;\n+        std::set<uint8_t> new_sidechains_activated;\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+            Assert(!proposal_s.empty());\n+            Sidechain proposal;\n+            proposal_s >> proposal;\n+\n+            COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+            CDataStream old_sidechain_s = GetDBEntry(view, sidechain_record_id);\n+            if (!old_sidechain_s.empty()) {\n+                // This would be an overwrite, so it must wait for the final completion after SIDECHAIN_WITHDRAW_PERIOD\n+                sidechain_proposal_list_new.resize(sidechain_proposal_list_new.size() + sidechain_proposal_hash.size());\n+                memcpy(&sidechain_proposal_list_new.data()[sidechain_proposal_list_new.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+                continue;\n+            }\n+\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_ACTIVATION_THRESHOLD) {\n+                // Activate new sidechain\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+                new_sidechains_activated.insert(proposal.idnum);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        if (!new_sidechains_activated.empty()) {\n+            Assume(sidechain_proposal_list.size() != sidechain_proposal_list_new.size());\n+            // Assign CTIPs\n+            for (size_t output_index = 0; output_index < tx.vout.size(); ++output_index) {\n+                if (!tx.vout[output_index].scriptPubKey.IsDrivechain()) continue;\n+\n+                const uint8_t sidechain_id = tx.vout[output_index].scriptPubKey[DRIVECHAIN_SCRIPT_SIDECHAIN_ID_OFFSET];\n+                if (new_sidechains_activated.find(sidechain_id) == new_sidechains_activated.end()) {\n+                    // TODO: OP_DRIVECHAIN (or OP_NOP5) for a non-activating sidechain id; should this be invalid??\n+                    continue;\n+                }\n+\n+                CDataStream ctip_info(SER_NETWORK, PROTOCOL_VERSION);\n+                ctip_info << sidechain_id;\n+                CreateDBEntry(view, txundo, block_height, {tx.GetHash(), DBIDX_SIDECHAIN_CTIP_INFO}, ctip_info);\n+            }\n+            if (!new_sidechains_activated.empty()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-activated-without-ctip\");\n+            }\n+        }\n+\n+        if (sidechain_proposal_list.size() != sidechain_proposal_list_new.size()) {\n+            Assume(!new_sidechains_activated.empty());\n+            COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+            DeleteDBEntry(view, txundo, record_id);\n+\n+            if (!(sidechain_proposal_list_new.empty() && withdraw_proposal_list.empty())) {\n+                CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+                proposal_list << sidechain_proposal_list_new;\n+                proposal_list << withdraw_proposal_list;\n+                CreateDBEntry(view, txundo, block_height, record_id, proposal_list);\n+            }\n+        }\n+    }\n+\n+    return true;\n+}\n+\n+bool VerifyDrivechainSpend(const CTransaction& tx, const unsigned int sidechain_input_n, const std::vector<CTxOut>& spent_outputs, const CCoinsViewCache& view, TxValidationState& state) {\n+    const CTxIn& sidechain_input = tx.vin[sidechain_input_n];\n+    // TODO: Do we want to verify there's only one sidechain involved? BIP300 says yes, but why?\n+\n+    // Lookup sidechain number from CTIP and ensure this is in fact a CTIP to begin with\n+    // FIXME: It might be a good idea to include the sidechain # in the tx itself somewhere?\n+    uint8_t sidechain_id;\n+    {\n+        CDataStream ctip_info = GetDBEntry(view, {sidechain_input.prevout.hash, DBIDX_SIDECHAIN_CTIP_INFO});",
      "path": "src/sidechain.cpp",
      "position": 370,
      "original_position": 366,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": null,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think we need to update DBIDX_SIDECHAIN_CTIP_INFO with the new CTIP identified below either after deposit (L409) or withdrawal (L464). Otherwise we won't get the `ctip_info` here. \r\n\r\nAlso, if we spend the current ctip to do a deposit, then that would mean a deposit would invalidate any current withdrawals in-flight because the withdrawal also has to spend the ctip?",
      "created_at": "2023-09-07T12:11:59Z",
      "updated_at": "2023-09-07T12:12:00Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1318512848",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318512848"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 370,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318523328",
      "pull_request_review_id": 1615301275,
      "id": 1318523328,
      "node_id": "PRRC_kwDOABII585OlxHA",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];\n+            // TODO: Implement formats 3+? Or at least validate\n+                // NOTE data_format 2 changed to 0 FIXME\n+                // TODO: (new) data format 2 sets it to the ACKs from the previous block - but those aren't known, have the same cost, and encourages blind upvoting; so can we get rid of it?\n+                // TODO: data format 3 upvotes any bundle leading its rivals by at least 50 ACKs -- also encourages blind upvoting :/\n+            // TODO: How is vote vector actually encoded?\n+            // TODO: Block is invalid if there are no bundles proposed at all\n+            // FIXME: Presumably blocks should only be able to vote once - this is missing in the BIP\n+            for (int sidechain_id = 0; sidechain_id < 0x100; ++sidechain_id) {\n+                // FIXME: bounds checking\n+                // FIXME: skip votes for sidechains with no proposals\n+                uint16_t vote = out.scriptPubKey[6 + (sidechain_id * data_format)];\n+                if (data_format == 2) {\n+                    vote |= uint16_t{out.scriptPubKey[6 + (sidechain_id * data_format) + 1]} << 8;\n+                } else if (vote >= 0xfe) {\n+                    vote |= 0xff00;\n+                }\n+\n+                if (vote == 0xffff) continue;  // abstain\n+\n+                // FIXME: what if it's missing?\n+                CDataStream withdraw_proposals = GetDBEntry(view, {uint256{(uint8_t)sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST});\n+                uint256 bundle_hash;\n+                bool found_bundle{false};\n+                for (uint16_t bundle_hash_num = 0; !withdraw_proposals.eof(); ++bundle_hash_num) {\n+                    withdraw_proposals >> bundle_hash;\n+                    if (bundle_hash_num == vote) found_bundle = true;\n+                    IncrementDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, (bundle_hash_num == vote) ? 1 : -1);\n+                }\n+                if ((!found_bundle) && vote != 0xfffe) {\n+                    return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-ack-nonexistent\");\n+                }\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_PROPOSE)) {\n+            if (out.scriptPubKey.size() != 0x26) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            uint256 bundle_hash;\n+            uint8_t sidechain_id;\n+            try {\n+                s >> bundle_hash;\n+                s >> sidechain_id;\n+            } catch (...) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+\n+            if (GetDBEntry(view, {uint256{sidechain_id}, DBIDX_SIDECHAIN_DATA}).empty()) {\n+                // \"M3 is ignored...if it is for a sidechain that doesn't exist.\"\n+                continue;\n+            }\n+\n+            // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+            // TODO: maybe define this in the BIP and M3 ?\n+            bundle_hash = CalculateDrivechainWithdrawInternalHash(bundle_hash, sidechain_id);\n+\n+            // \"M3 is invalid if...This block already has an M3 for that nSidechain.\"\n+            if (saw_withdraw_proposed_for_sidechain.find(sidechain_id) != saw_withdraw_proposed_for_sidechain.end()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-multiple\");\n+            }\n+            saw_withdraw_proposed_for_sidechain.insert(sidechain_id);\n+\n+            // FIXME: \"M3 is invalid if...A bundle with this hash already paid out. A bundle with this hash was rejected in the past.\" is not practical to track!\n+\n+            if (!GetDBEntry(view, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}).empty()) {\n+                // Withdraw has already been proposed, invalid\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-duplicate\");\n+            }\n+\n+            ModifyDBEntry(view, txundo, block_height, {uint256{sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST}, [&bundle_hash](CDataStream& withdraw_proposals){\n+                withdraw_proposals << bundle_hash;\n+            });\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, s);\n+\n+            withdraw_proposal_list.resize(withdraw_proposal_list.size() + bundle_hash.size());\n+            memcpy(&withdraw_proposal_list.data()[withdraw_proposal_list.size() - bundle_hash.size()], bundle_hash.data(), bundle_hash.size());  // FIXME: C++ify\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_ACK)) {\n+            if (saw_sidechain_acks) {\n+                // FIXME: shouldn't it be possible to ACK multiple proposals for different sidechain ids??\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-multiple\");\n+            }\n+            saw_sidechain_acks = true;\n+\n+            if (out.scriptPubKey.size() != 0x25) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unparsable\");\n+            }\n+            const uint256 sidechain_proposal_hash{Span{&out.scriptPubKey[5], 0x20}};\n+            try {\n+                IncrementDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, 1);\n+            } catch (...) {  // TODO: make this explicitly for a non-existent entry\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unknown\");\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_PROPOSE)) {\n+            if (proposed_a_sidechain) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-multiple\");\n+            }\n+            proposed_a_sidechain = true;\n+\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            Sidechain proposed;\n+            try {\n+                s >> proposed;\n+            } catch (...) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-unparsable\");\n+            }\n+\n+            // TODO: block is invalid if proposed matches the current sidechain\n+\n+            uint256 sidechain_proposal_hash;\n+            CSHA256().Write(out.scriptPubKey.data() + 5, out.scriptPubKey.size() - 5).Finalize(sidechain_proposal_hash.data());\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL}, s);\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, s);\n+\n+            sidechain_proposal_list.resize(sidechain_proposal_list.size() + sidechain_proposal_hash.size());\n+            memcpy(&sidechain_proposal_list.data()[sidechain_proposal_list.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+        }\n+    }\n+\n+    if (!(sidechain_proposal_list.empty() && withdraw_proposal_list.empty())) {\n+        CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+        proposal_list << sidechain_proposal_list;\n+        proposal_list << withdraw_proposal_list;\n+        CreateDBEntry(view, txundo, block_height, {ArithToUint256(arith_uint256{(uint64_t)block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST}, proposal_list);\n+    }\n+\n+    // Perform sidechain overwriting/expiry and withdraw expiry\n+    int completed_block_height = block_height - (SIDECHAIN_WITHDRAW_PERIOD - 1);\n+    COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+    CDataStream completed_proposal_list = GetDBEntry(view, record_id);\n+    if (!completed_proposal_list.empty()) {\n+        DeleteDBEntry(view, txundo, record_id);\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_WITHDRAW_THRESHOLD) {\n+                // Overwrite an existing sidechain with a new one\n+                CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+                Assert(!proposal_s.empty());\n+                Sidechain proposal;\n+                proposal_s >> proposal;\n+\n+                COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+                DeleteDBEntry(view, txundo, sidechain_record_id);\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        for (size_t i = 0; i < withdraw_proposal_list.size(); i += uint256::size()) {\n+            uint256 withdraw_proposal_hash{Span{&withdraw_proposal_list[i], uint256::size()}};\n+            // FIXME: remove from DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST\n+            DeleteDBEntry(view, txundo, {withdraw_proposal_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS});\n+        }\n+    }\n+\n+    // New sidechain activation\n+    completed_block_height = block_height - (SIDECHAIN_ACTIVATION_PERIOD - 1);\n+    completed_proposal_list = GetDBEntry(view, {ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST});\n+    if (!completed_proposal_list.empty()) {\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        std::vector<unsigned char> sidechain_proposal_list_new;\n+        std::set<uint8_t> new_sidechains_activated;\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+            Assert(!proposal_s.empty());\n+            Sidechain proposal;\n+            proposal_s >> proposal;\n+\n+            COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+            CDataStream old_sidechain_s = GetDBEntry(view, sidechain_record_id);\n+            if (!old_sidechain_s.empty()) {\n+                // This would be an overwrite, so it must wait for the final completion after SIDECHAIN_WITHDRAW_PERIOD\n+                sidechain_proposal_list_new.resize(sidechain_proposal_list_new.size() + sidechain_proposal_hash.size());\n+                memcpy(&sidechain_proposal_list_new.data()[sidechain_proposal_list_new.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+                continue;\n+            }\n+\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_ACTIVATION_THRESHOLD) {\n+                // Activate new sidechain\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+                new_sidechains_activated.insert(proposal.idnum);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        if (!new_sidechains_activated.empty()) {\n+            Assume(sidechain_proposal_list.size() != sidechain_proposal_list_new.size());\n+            // Assign CTIPs\n+            for (size_t output_index = 0; output_index < tx.vout.size(); ++output_index) {\n+                if (!tx.vout[output_index].scriptPubKey.IsDrivechain()) continue;\n+\n+                const uint8_t sidechain_id = tx.vout[output_index].scriptPubKey[DRIVECHAIN_SCRIPT_SIDECHAIN_ID_OFFSET];\n+                if (new_sidechains_activated.find(sidechain_id) == new_sidechains_activated.end()) {\n+                    // TODO: OP_DRIVECHAIN (or OP_NOP5) for a non-activating sidechain id; should this be invalid??\n+                    continue;\n+                }\n+\n+                CDataStream ctip_info(SER_NETWORK, PROTOCOL_VERSION);\n+                ctip_info << sidechain_id;\n+                CreateDBEntry(view, txundo, block_height, {tx.GetHash(), DBIDX_SIDECHAIN_CTIP_INFO}, ctip_info);\n+            }\n+            if (!new_sidechains_activated.empty()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-activated-without-ctip\");\n+            }\n+        }\n+\n+        if (sidechain_proposal_list.size() != sidechain_proposal_list_new.size()) {\n+            Assume(!new_sidechains_activated.empty());\n+            COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+            DeleteDBEntry(view, txundo, record_id);\n+\n+            if (!(sidechain_proposal_list_new.empty() && withdraw_proposal_list.empty())) {\n+                CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+                proposal_list << sidechain_proposal_list_new;\n+                proposal_list << withdraw_proposal_list;\n+                CreateDBEntry(view, txundo, block_height, record_id, proposal_list);\n+            }\n+        }\n+    }\n+\n+    return true;\n+}\n+\n+bool VerifyDrivechainSpend(const CTransaction& tx, const unsigned int sidechain_input_n, const std::vector<CTxOut>& spent_outputs, const CCoinsViewCache& view, TxValidationState& state) {\n+    const CTxIn& sidechain_input = tx.vin[sidechain_input_n];\n+    // TODO: Do we want to verify there's only one sidechain involved? BIP300 says yes, but why?\n+\n+    // Lookup sidechain number from CTIP and ensure this is in fact a CTIP to begin with\n+    // FIXME: It might be a good idea to include the sidechain # in the tx itself somewhere?\n+    uint8_t sidechain_id;\n+    {\n+        CDataStream ctip_info = GetDBEntry(view, {sidechain_input.prevout.hash, DBIDX_SIDECHAIN_CTIP_INFO});",
      "path": "src/sidechain.cpp",
      "position": 370,
      "original_position": 366,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": 1318512848,
      "user": {
        "login": "psztorc",
        "id": 3165891,
        "node_id": "MDQ6VXNlcjMxNjU4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3165891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/psztorc",
        "html_url": "https://github.com/psztorc",
        "followers_url": "https://api.github.com/users/psztorc/followers",
        "following_url": "https://api.github.com/users/psztorc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/psztorc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/psztorc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/psztorc/subscriptions",
        "organizations_url": "https://api.github.com/users/psztorc/orgs",
        "repos_url": "https://api.github.com/users/psztorc/repos",
        "events_url": "https://api.github.com/users/psztorc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/psztorc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "No, to the second question. The withdrawal has a version of APO (called the \"blinded hash\", with the CTIP input zeroed out).",
      "created_at": "2023-09-07T12:20:39Z",
      "updated_at": "2023-09-07T12:20:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1318523328",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318523328"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 370,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318534420",
      "pull_request_review_id": 1615320096,
      "id": 1318534420,
      "node_id": "PRRC_kwDOABII585Olz0U",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+    uint256 internal_hash;\n+    CSHA256().Write(blinded_hash.data(), blinded_hash.size()).Write(&sidechain_id, sizeof(sidechain_id)).Finalize(internal_hash.data());\n+    return internal_hash;\n+}\n+\n+bool UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &txundo, int block_height, BlockValidationState& state)\n+{\n+    Assert(tx.IsCoinBase());\n+\n+    std::vector<unsigned char> sidechain_proposal_list, withdraw_proposal_list;\n+    std::set<uint8_t> saw_withdraw_proposed_for_sidechain;\n+    bool proposed_a_sidechain{false}, saw_sidechain_acks{false};\n+\n+    for (auto& out : tx.vout) {\n+        if (out.scriptPubKey.size() < 5) continue;\n+        if (out.scriptPubKey[0] != OP_RETURN) continue;\n+        // FIXME: The rest should probably be serialised, but neither BIP300 nor its reference implementation does that\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_PROPOSE[] = {0xd5, 0xe0, 0xc4, 0xaf};  // n.b. 20 sigops\n+        static constexpr uint8_t BIP300_HEADER_SIDECHAIN_ACK[]     = {0xd6, 0xe1, 0xc5, 0xbf};\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_PROPOSE[]  = {0xd4, 0x5a, 0xa9, 0x43};  // n.b. 67 byte push followed by only 32 bytes\n+        static constexpr uint8_t BIP300_HEADER_WITHDRAW_ACK[]      = {0xd7, 0x7d, 0x17, 0x76};  // n.b. 23-byte push followed by variable bytes\n+        if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_ACK)) {\n+            const uint8_t data_format = out.scriptPubKey[6];\n+            // TODO: Implement formats 3+? Or at least validate\n+                // NOTE data_format 2 changed to 0 FIXME\n+                // TODO: (new) data format 2 sets it to the ACKs from the previous block - but those aren't known, have the same cost, and encourages blind upvoting; so can we get rid of it?\n+                // TODO: data format 3 upvotes any bundle leading its rivals by at least 50 ACKs -- also encourages blind upvoting :/\n+            // TODO: How is vote vector actually encoded?\n+            // TODO: Block is invalid if there are no bundles proposed at all\n+            // FIXME: Presumably blocks should only be able to vote once - this is missing in the BIP\n+            for (int sidechain_id = 0; sidechain_id < 0x100; ++sidechain_id) {\n+                // FIXME: bounds checking\n+                // FIXME: skip votes for sidechains with no proposals\n+                uint16_t vote = out.scriptPubKey[6 + (sidechain_id * data_format)];\n+                if (data_format == 2) {\n+                    vote |= uint16_t{out.scriptPubKey[6 + (sidechain_id * data_format) + 1]} << 8;\n+                } else if (vote >= 0xfe) {\n+                    vote |= 0xff00;\n+                }\n+\n+                if (vote == 0xffff) continue;  // abstain\n+\n+                // FIXME: what if it's missing?\n+                CDataStream withdraw_proposals = GetDBEntry(view, {uint256{(uint8_t)sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST});\n+                uint256 bundle_hash;\n+                bool found_bundle{false};\n+                for (uint16_t bundle_hash_num = 0; !withdraw_proposals.eof(); ++bundle_hash_num) {\n+                    withdraw_proposals >> bundle_hash;\n+                    if (bundle_hash_num == vote) found_bundle = true;\n+                    IncrementDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, (bundle_hash_num == vote) ? 1 : -1);\n+                }\n+                if ((!found_bundle) && vote != 0xfffe) {\n+                    return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-ack-nonexistent\");\n+                }\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_WITHDRAW_PROPOSE)) {\n+            if (out.scriptPubKey.size() != 0x26) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            uint256 bundle_hash;\n+            uint8_t sidechain_id;\n+            try {\n+                s >> bundle_hash;\n+                s >> sidechain_id;\n+            } catch (...) {\n+                // \"M3 is ignored if it does not parse\"\n+                continue;\n+            }\n+\n+            if (GetDBEntry(view, {uint256{sidechain_id}, DBIDX_SIDECHAIN_DATA}).empty()) {\n+                // \"M3 is ignored...if it is for a sidechain that doesn't exist.\"\n+                continue;\n+            }\n+\n+            // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains\n+            // TODO: maybe define this in the BIP and M3 ?\n+            bundle_hash = CalculateDrivechainWithdrawInternalHash(bundle_hash, sidechain_id);\n+\n+            // \"M3 is invalid if...This block already has an M3 for that nSidechain.\"\n+            if (saw_withdraw_proposed_for_sidechain.find(sidechain_id) != saw_withdraw_proposed_for_sidechain.end()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-multiple\");\n+            }\n+            saw_withdraw_proposed_for_sidechain.insert(sidechain_id);\n+\n+            // FIXME: \"M3 is invalid if...A bundle with this hash already paid out. A bundle with this hash was rejected in the past.\" is not practical to track!\n+\n+            if (!GetDBEntry(view, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}).empty()) {\n+                // Withdraw has already been proposed, invalid\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-withdraw-propose-duplicate\");\n+            }\n+\n+            ModifyDBEntry(view, txundo, block_height, {uint256{sidechain_id}, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST}, [&bundle_hash](CDataStream& withdraw_proposals){\n+                withdraw_proposals << bundle_hash;\n+            });\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {bundle_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS}, s);\n+\n+            withdraw_proposal_list.resize(withdraw_proposal_list.size() + bundle_hash.size());\n+            memcpy(&withdraw_proposal_list.data()[withdraw_proposal_list.size() - bundle_hash.size()], bundle_hash.data(), bundle_hash.size());  // FIXME: C++ify\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_ACK)) {\n+            if (saw_sidechain_acks) {\n+                // FIXME: shouldn't it be possible to ACK multiple proposals for different sidechain ids??\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-multiple\");\n+            }\n+            saw_sidechain_acks = true;\n+\n+            if (out.scriptPubKey.size() != 0x25) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unparsable\");\n+            }\n+            const uint256 sidechain_proposal_hash{Span{&out.scriptPubKey[5], 0x20}};\n+            try {\n+                IncrementDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, 1);\n+            } catch (...) {  // TODO: make this explicitly for a non-existent entry\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-ack-unknown\");\n+            }\n+        } else if (std::equal(&out.scriptPubKey[1], &out.scriptPubKey[5], BIP300_HEADER_SIDECHAIN_PROPOSE)) {\n+            if (proposed_a_sidechain) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-multiple\");\n+            }\n+            proposed_a_sidechain = true;\n+\n+            CDataStream s(MakeByteSpan(out.scriptPubKey).subspan(5), SER_NETWORK, PROTOCOL_VERSION);\n+            Sidechain proposed;\n+            try {\n+                s >> proposed;\n+            } catch (...) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-sidechain-propose-unparsable\");\n+            }\n+\n+            // TODO: block is invalid if proposed matches the current sidechain\n+\n+            uint256 sidechain_proposal_hash;\n+            CSHA256().Write(out.scriptPubKey.data() + 5, out.scriptPubKey.size() - 5).Finalize(sidechain_proposal_hash.data());\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL}, s);\n+\n+            s.clear();\n+            s << uint16_t{0};\n+            CreateDBEntry(view, txundo, block_height, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL_ACKS}, s);\n+\n+            sidechain_proposal_list.resize(sidechain_proposal_list.size() + sidechain_proposal_hash.size());\n+            memcpy(&sidechain_proposal_list.data()[sidechain_proposal_list.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+        }\n+    }\n+\n+    if (!(sidechain_proposal_list.empty() && withdraw_proposal_list.empty())) {\n+        CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+        proposal_list << sidechain_proposal_list;\n+        proposal_list << withdraw_proposal_list;\n+        CreateDBEntry(view, txundo, block_height, {ArithToUint256(arith_uint256{(uint64_t)block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST}, proposal_list);\n+    }\n+\n+    // Perform sidechain overwriting/expiry and withdraw expiry\n+    int completed_block_height = block_height - (SIDECHAIN_WITHDRAW_PERIOD - 1);\n+    COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+    CDataStream completed_proposal_list = GetDBEntry(view, record_id);\n+    if (!completed_proposal_list.empty()) {\n+        DeleteDBEntry(view, txundo, record_id);\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_WITHDRAW_THRESHOLD) {\n+                // Overwrite an existing sidechain with a new one\n+                CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+                Assert(!proposal_s.empty());\n+                Sidechain proposal;\n+                proposal_s >> proposal;\n+\n+                COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+                DeleteDBEntry(view, txundo, sidechain_record_id);\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        for (size_t i = 0; i < withdraw_proposal_list.size(); i += uint256::size()) {\n+            uint256 withdraw_proposal_hash{Span{&withdraw_proposal_list[i], uint256::size()}};\n+            // FIXME: remove from DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_LIST\n+            DeleteDBEntry(view, txundo, {withdraw_proposal_hash, DBIDX_SIDECHAIN_WITHDRAW_PROPOSAL_ACKS});\n+        }\n+    }\n+\n+    // New sidechain activation\n+    completed_block_height = block_height - (SIDECHAIN_ACTIVATION_PERIOD - 1);\n+    completed_proposal_list = GetDBEntry(view, {ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST});\n+    if (!completed_proposal_list.empty()) {\n+        completed_proposal_list >> sidechain_proposal_list;\n+        completed_proposal_list >> withdraw_proposal_list;\n+\n+        std::vector<unsigned char> sidechain_proposal_list_new;\n+        std::set<uint8_t> new_sidechains_activated;\n+        for (size_t i = 0; i < sidechain_proposal_list.size(); i += uint256::size()) {\n+            uint256 sidechain_proposal_hash{Span{&sidechain_proposal_list[i], uint256::size()}};\n+            CDataStream proposal_s = GetDBEntry(view, {sidechain_proposal_hash, DBIDX_SIDECHAIN_PROPOSAL});\n+            Assert(!proposal_s.empty());\n+            Sidechain proposal;\n+            proposal_s >> proposal;\n+\n+            COutPoint sidechain_record_id{uint256{proposal.idnum}, DBIDX_SIDECHAIN_DATA};\n+            CDataStream old_sidechain_s = GetDBEntry(view, sidechain_record_id);\n+            if (!old_sidechain_s.empty()) {\n+                // This would be an overwrite, so it must wait for the final completion after SIDECHAIN_WITHDRAW_PERIOD\n+                sidechain_proposal_list_new.resize(sidechain_proposal_list_new.size() + sidechain_proposal_hash.size());\n+                memcpy(&sidechain_proposal_list_new.data()[sidechain_proposal_list_new.size() - sidechain_proposal_hash.size()], sidechain_proposal_hash.data(), sidechain_proposal_hash.size());  // FIXME: C++ify\n+                continue;\n+            }\n+\n+            record_id.hash = sidechain_proposal_hash;\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL_ACKS;\n+            uint16_t acks;\n+            {\n+                CDataStream acks_s = GetDBEntry(view, record_id);\n+                Assert(!acks_s.empty());\n+                acks_s >> acks;\n+            }\n+            if (acks >= SIDECHAIN_ACTIVATION_THRESHOLD) {\n+                // Activate new sidechain\n+                CreateDBEntry(view, txundo, block_height, sidechain_record_id, proposal_s);\n+                new_sidechains_activated.insert(proposal.idnum);\n+            }\n+            DeleteDBEntry(view, txundo, record_id);\n+            record_id.n = DBIDX_SIDECHAIN_PROPOSAL;\n+            DeleteDBEntry(view, txundo, record_id);\n+        }\n+\n+        if (!new_sidechains_activated.empty()) {\n+            Assume(sidechain_proposal_list.size() != sidechain_proposal_list_new.size());\n+            // Assign CTIPs\n+            for (size_t output_index = 0; output_index < tx.vout.size(); ++output_index) {\n+                if (!tx.vout[output_index].scriptPubKey.IsDrivechain()) continue;\n+\n+                const uint8_t sidechain_id = tx.vout[output_index].scriptPubKey[DRIVECHAIN_SCRIPT_SIDECHAIN_ID_OFFSET];\n+                if (new_sidechains_activated.find(sidechain_id) == new_sidechains_activated.end()) {\n+                    // TODO: OP_DRIVECHAIN (or OP_NOP5) for a non-activating sidechain id; should this be invalid??\n+                    continue;\n+                }\n+\n+                CDataStream ctip_info(SER_NETWORK, PROTOCOL_VERSION);\n+                ctip_info << sidechain_id;\n+                CreateDBEntry(view, txundo, block_height, {tx.GetHash(), DBIDX_SIDECHAIN_CTIP_INFO}, ctip_info);\n+            }\n+            if (!new_sidechains_activated.empty()) {\n+                return state.Invalid(BlockValidationResult::BLOCK_CONSENSUS, \"bad-drivechain-activated-without-ctip\");\n+            }\n+        }\n+\n+        if (sidechain_proposal_list.size() != sidechain_proposal_list_new.size()) {\n+            Assume(!new_sidechains_activated.empty());\n+            COutPoint record_id{ArithToUint256(arith_uint256{(uint64_t)completed_block_height}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n+            DeleteDBEntry(view, txundo, record_id);\n+\n+            if (!(sidechain_proposal_list_new.empty() && withdraw_proposal_list.empty())) {\n+                CDataStream proposal_list(SER_NETWORK, PROTOCOL_VERSION);\n+                proposal_list << sidechain_proposal_list_new;\n+                proposal_list << withdraw_proposal_list;\n+                CreateDBEntry(view, txundo, block_height, record_id, proposal_list);\n+            }\n+        }\n+    }\n+\n+    return true;\n+}\n+\n+bool VerifyDrivechainSpend(const CTransaction& tx, const unsigned int sidechain_input_n, const std::vector<CTxOut>& spent_outputs, const CCoinsViewCache& view, TxValidationState& state) {\n+    const CTxIn& sidechain_input = tx.vin[sidechain_input_n];\n+    // TODO: Do we want to verify there's only one sidechain involved? BIP300 says yes, but why?\n+\n+    // Lookup sidechain number from CTIP and ensure this is in fact a CTIP to begin with\n+    // FIXME: It might be a good idea to include the sidechain # in the tx itself somewhere?\n+    uint8_t sidechain_id;\n+    {\n+        CDataStream ctip_info = GetDBEntry(view, {sidechain_input.prevout.hash, DBIDX_SIDECHAIN_CTIP_INFO});",
      "path": "src/sidechain.cpp",
      "position": 370,
      "original_position": 366,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": 1318512848,
      "user": {
        "login": "rot13maxi",
        "id": 115941166,
        "node_id": "U_kgDOBukfLg",
        "avatar_url": "https://avatars.githubusercontent.com/u/115941166?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rot13maxi",
        "html_url": "https://github.com/rot13maxi",
        "followers_url": "https://api.github.com/users/rot13maxi/followers",
        "following_url": "https://api.github.com/users/rot13maxi/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rot13maxi/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rot13maxi/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rot13maxi/subscriptions",
        "organizations_url": "https://api.github.com/users/rot13maxi/orgs",
        "repos_url": "https://api.github.com/users/rot13maxi/repos",
        "events_url": "https://api.github.com/users/rot13maxi/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rot13maxi/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yep, you’re right",
      "created_at": "2023-09-07T12:30:10Z",
      "updated_at": "2023-09-07T12:30:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1318534420",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1318534420"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 370,
      "original_line": 370,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362660430",
      "pull_request_review_id": 1683212571,
      "id": 1362660430,
      "node_id": "PRRC_kwDOABII585ROIxO",
      "diff_hunk": "@@ -591,6 +591,8 @@ bool EvalScript(std::vector<std::vector<unsigned char> >& stack, const CScript&\n                     break;\n                 }\n \n+                // NOTE: OP_DRIVECHAIN (OP_NOP5) is enforced in VerifyDrivechainSpend\n+\n                 case OP_NOP1: case OP_NOP4: case OP_NOP5:",
      "path": "src/script/interpreter.cpp",
      "position": 6,
      "original_position": 6,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": 1301640710,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "There is no OP_DRIVECHAIN in the switch, and nothing different to be done here. The comment is added simply to ensure clarity in this code.",
      "created_at": "2023-10-17T19:32:40Z",
      "updated_at": "2023-10-17T19:32:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1362660430",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362660430"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 596,
      "original_line": 596,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362668494",
      "pull_request_review_id": 1683225326,
      "id": 1362668494,
      "node_id": "PRRC_kwDOABII585ROKvO",
      "diff_hunk": "@@ -0,0 +1,466 @@\n+// Copyright (c) 2017-2023 The Bitcoin Core developers\n+// Distributed under the MIT software license, see the accompanying\n+// file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\n+#include <sidechain.h>\n+\n+#include <arith_uint256.h>\n+#include <coins.h>\n+#include <consensus/validation.h>\n+#include <hash.h>\n+#include <primitives/transaction.h>\n+#include <streams.h>\n+#include <undo.h>\n+#include <util/check.h>\n+\n+#include <algorithm>\n+#include <cstdint>\n+\n+void CreateDBUndoData(CTxUndo &txundo, const uint8_t type, const COutPoint& record_id, const Coin& encoded_data) {\n+    Assert(record_id.n <= COutPoint::MAX_INDEX);\n+    Coin& undo = txundo.vprevout.emplace_back();\n+    undo = encoded_data;\n+    CDataStream s(SER_NETWORK, PROTOCOL_VERSION);\n+    s << record_id;\n+    Assert(s.size() == 0x24);\n+    auto& undo_data = undo.out.scriptPubKey;\n+    undo_data.insert(undo_data.begin(), 1 + s.size(), type);\n+    memcpy(&undo_data[1], &s[0], s.size());  // TODO: figure out how to jump through C++'s hoops to do this right\n+}\n+\n+void CreateDBEntry(CCoinsViewCache& cache, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const Span<const std::byte>& record_data) {\n+    CScript scriptPubKey(UCharCast(record_data.begin()), UCharCast(record_data.end()));\n+    cache.AddCoin(record_id, Coin(CTxOut{0, scriptPubKey}, block_height, /*fCoinbase=*/false), /*overwrite=*/false);\n+\n+    // Create undo data to tell DisconnectBlock to delete it\n+    Coin undo;\n+    CreateDBUndoData(txundo, 1, record_id, undo);\n+}\n+\n+void DeleteDBEntry(CCoinsViewCache& inputs, CTxUndo &txundo, const COutPoint& record_id) {\n+    Coin undo;\n+    bool is_spent = inputs.SpendCoin(record_id, &undo);\n+    assert(is_spent);\n+    CreateDBUndoData(txundo, 0, record_id, undo);\n+}\n+\n+CDataStream GetDBEntry(const CCoinsViewCache& inputs, const COutPoint& record_id) {\n+    const Coin& coin = inputs.AccessCoin(record_id);\n+    return CDataStream(MakeByteSpan(coin.out.scriptPubKey), SER_NETWORK, PROTOCOL_VERSION);\n+}\n+\n+void ModifyDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const std::function<void(CDataStream&)>& modify_func) {\n+    CDataStream s = GetDBEntry(view, record_id);\n+    const bool new_entry = s.empty();\n+    modify_func(s);\n+    if (!new_entry) DeleteDBEntry(view, txundo, record_id);\n+    CreateDBEntry(view, txundo, block_height, record_id, s);\n+}\n+\n+void IncrementDBEntry(CCoinsViewCache& view, CTxUndo &txundo, const int block_height, const COutPoint& record_id, const int change) {\n+    ModifyDBEntry(view, txundo, block_height, record_id, [change](CDataStream& s){\n+        uint16_t counter;\n+        s >> counter;\n+        if (change < 0 && !counter) return;  // may be surprising if change is <-1\n+        counter += change;\n+        s.clear();\n+        s << counter;\n+    });\n+}\n+\n+uint256 CalculateDrivechainWithdrawBlindedHash(const CTransaction& tx) {\n+    CMutableTransaction mtx(tx);\n+    mtx.vin[0].SetNull();\n+    mtx.vout[0].SetNull();\n+    return mtx.GetHash();\n+}\n+\n+uint256 CalculateDrivechainWithdrawInternalHash(const uint256& blinded_hash, const uint8_t sidechain_id) {\n+    // Internally, we hash the bundle_hash with the sidechain_id to avoid conflicts between sidechains",
      "path": "src/sidechain.cpp",
      "position": 79,
      "original_position": 79,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "afc975bb6029e982e2bd5420d18e7ca0d4f4413e",
      "in_reply_to_id": 1301656272,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It could be voted on because we only see the hash at that stage. But it would never be valid for more than one.",
      "created_at": "2023-10-17T19:41:47Z",
      "updated_at": "2023-10-17T19:41:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1362668494",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362668494"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 79,
      "original_line": 79,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362676263",
      "pull_request_review_id": 1683237820,
      "id": 1362676263,
      "node_id": "PRRC_kwDOABII585ROMon",
      "diff_hunk": "@@ -171,4 +179,116 @@ void UpdateDrivechains(const CTransaction& tx, CCoinsViewCache& view, CTxUndo &t\n     proposal_list << withdraw_proposal_list;\n     COutPoint record_id{ArithToUint256(arith_uint256{uint64_t{block_height}}), DBIDX_SIDECHAIN_PROPOSAL_LIST};\n     CreateDBEntry(view, txundo, block_height, record_id, MakeByteSpan(proposal_list));\n+\n+    // TODO: clean up expiring stuff\n+    // TODO: activate sidechains and assign CTIPs\n+}\n+\n+bool VerifyDrivechainSpend(const CTransaction& tx, const unsigned int sidechain_input_n, const std::vector<CTxOut>& spent_outputs, const CCoinsViewCache& view, TxValidationState& state) {",
      "path": "src/sidechain.cpp",
      "position": 362,
      "original_position": 48,
      "commit_id": "3fda7b30aecc19271e56607d301b697a56ae7b5c",
      "original_commit_id": "d4eb444f6ba630f0ef009999b73282c5068ef4fd",
      "in_reply_to_id": 1317992472,
      "user": {
        "login": "luke-jr",
        "id": 1095675,
        "node_id": "MDQ6VXNlcjEwOTU2NzU=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1095675?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/luke-jr",
        "html_url": "https://github.com/luke-jr",
        "followers_url": "https://api.github.com/users/luke-jr/followers",
        "following_url": "https://api.github.com/users/luke-jr/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/luke-jr/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/luke-jr/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/luke-jr/subscriptions",
        "organizations_url": "https://api.github.com/users/luke-jr/orgs",
        "repos_url": "https://api.github.com/users/luke-jr/repos",
        "events_url": "https://api.github.com/users/luke-jr/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/luke-jr/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I believe the end goal, if Bitcoin moves forward with this, is to have miners rewrite deposits on the fly to update the CTIP as appropriate.",
      "created_at": "2023-10-17T19:48:58Z",
      "updated_at": "2023-10-17T19:48:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/28311#discussion_r1362676263",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1362676263"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/28311"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 362,
      "original_line": 362,
      "side": "RIGHT"
    }
  ]
}