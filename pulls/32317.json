{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317",
    "id": 2471245988,
    "node_id": "PR_kwDOABII586TTDik",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32317",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32317.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32317.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/16a695fbff4a92eba3eb72ec6aa766e71c52f773",
    "number": 32317,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "kernel: Separate UTXO set access from validation functions",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API.",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2025-04-21T13:15:46Z",
    "updated_at": "2025-05-10T16:21:26Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "f5ad773e7161a0c5b3c077d91c4c272ca9f23f21",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "TheCharlatan:spendblock",
      "ref": "spendblock",
      "sha": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 94456368,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NDQ1NjM2OA==",
        "name": "bitcoin",
        "full_name": "TheCharlatan/bitcoin",
        "owner": {
          "login": "TheCharlatan",
          "id": 8421793,
          "node_id": "MDQ6VXNlcjg0MjE3OTM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheCharlatan",
          "html_url": "https://github.com/TheCharlatan",
          "followers_url": "https://api.github.com/users/TheCharlatan/followers",
          "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
          "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
          "repos_url": "https://api.github.com/users/TheCharlatan/repos",
          "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/TheCharlatan/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/TheCharlatan/bitcoin",
        "archive_url": "https://api.github.com/repos/TheCharlatan/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheCharlatan/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheCharlatan/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheCharlatan/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheCharlatan/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheCharlatan/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheCharlatan/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheCharlatan/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheCharlatan/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheCharlatan/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheCharlatan/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheCharlatan/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheCharlatan/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheCharlatan/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheCharlatan/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheCharlatan/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheCharlatan/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheCharlatan/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/hooks",
        "svn_url": "https://github.com/TheCharlatan/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 261658,
        "default_branch": "master",
        "open_issues_count": 4,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-10T16:20:50Z",
        "created_at": "2017-06-15T16:03:35Z",
        "updated_at": "2025-05-07T18:23:14Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "746ab19d5a13c98ae7492f9b6fb7bd6a2103c65d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37193,
        "stargazers_count": 83482,
        "watchers_count": 83482,
        "size": 281573,
        "default_branch": "master",
        "open_issues_count": 720,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-05-10T14:50:05Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-05-10T15:59:50Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 425,
    "deletions": 195,
    "changed_files": 14,
    "commits": 8,
    "review_comments": 17,
    "comments": 4
  },
  "events": [
    {
      "event": "commented",
      "id": 2818389716,
      "node_id": "IC_kwDOABII586n_TbU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2818389716",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:15:49Z",
      "updated_at": "2025-05-10T16:21:14Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32317.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [w0xlt](https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2785006540) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32427](https://github.com/bitcoin/bitcoin/pull/32427) ((RFC) kernel: Replace leveldb-based BlockTreeDB with flat-file based store by TheCharlatan)\n* [#32379](https://github.com/bitcoin/bitcoin/pull/32379) (p2p: stop special-casing witness-stripped error for unconfirmed transactions by darosior)\n* [#32080](https://github.com/bitcoin/bitcoin/pull/32080) (OP_CHECKCONTRACTVERIFY by bigspider)\n* [#31981](https://github.com/bitcoin/bitcoin/pull/31981) (Add checkBlock() to Mining interface by Sjors)\n* [#29641](https://github.com/bitcoin/bitcoin/pull/29641) (scripted-diff: Use LogInfo over LogPrintf [WIP, NOMERGE, DRAFT] by maflcko)\n* [#29060](https://github.com/bitcoin/bitcoin/pull/29060) (Policy: Report reason inputs are non standard by ismaelsadeeq)\n* [#19463](https://github.com/bitcoin/bitcoin/pull/19463) (Prune locks by luke-jr)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\nPossible typos and grammar issues:\n\n- `+ * Return a vector of references to Coins in the cache, or coinEmpty if`\n`+ * the Coin is not found.` -> `* Return a vector of references to Coins in the cache.Throws if a Coin is not found.` [Function throws if coin is not found, does not return `coinEmpty`]\n- `+ * @param[in] coins Sorted span of Coins containing previous transaction outputs we're spending` -> `@param[in] coins Span of Coins corresponding to transaction inputs` [\"Sorted\" is inaccurate as coins are ordered by transaction inputs, not sorted by value or other property]\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2818389716",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "labeled",
      "id": 17338317960,
      "node_id": "LE_lADOABII586zUH0-zwAAAAQJcbyI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17338317960",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:15:57Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "renamed",
      "id": 17338318896,
      "node_id": "RTE_lADOABII586zUH0-zwAAAAQJccAw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17338318896",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:16:03Z",
      "rename": {
        "from": "kernel: Seperate UTXO set access from validation functions",
        "to": "kernel: Separate UTXO set access from validation functions"
      }
    },
    {
      "event": "reviewed",
      "id": 2781269268,
      "node_id": "PRR_kwDOABII586lxs0U",
      "url": null,
      "actor": null,
      "commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2781269268",
      "submitted_at": "2025-04-21T13:44:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    },
    {
      "event": "labeled",
      "id": 17339331403,
      "node_id": "LE_lADOABII586zUH0-zwAAAAQJgTNL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17339331403",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T14:43:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2818629708,
      "node_id": "IC_kwDOABII586oAOBM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2818629708",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T14:43:48Z",
      "updated_at": "2025-04-21T14:43:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40876609750</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2818629708",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17340461844,
      "node_id": "HRFPE_lADOABII586zUH0-zwAAAAQJknMU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17340461844",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "created_at": "2025-04-21T16:14:43Z"
    },
    {
      "event": "reviewed",
      "id": 2781806044,
      "node_id": "PRR_kwDOABII586lzv3c",
      "url": null,
      "actor": null,
      "commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2781806044",
      "submitted_at": "2025-04-21T17:14:05Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17342804772,
      "node_id": "HRFPE_lADOABII586zUH0-zwAAAAQJtjMk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17342804772",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "76a8f22c5c5cf48a9c36cc40db9224f0454917d0",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/76a8f22c5c5cf48a9c36cc40db9224f0454917d0",
      "created_at": "2025-04-21T19:50:40Z"
    },
    {
      "event": "unlabeled",
      "id": 17344092807,
      "node_id": "UNLE_lADOABII586zUH0-zwAAAAQJydqH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17344092807",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T22:11:15Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 2785006540,
      "node_id": "PRR_kwDOABII586l_9PM",
      "url": null,
      "actor": null,
      "commit_id": "76a8f22c5c5cf48a9c36cc40db9224f0454917d0",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, as this PR increases the decoupling of components.\r\n\r\nnit: The name `SpendBlock` may not be clear (unless this concept is already known and I'm missing the point).\r\nMaybe `BIP30Validation`, something like that, would be clearer.",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2785006540",
      "submitted_at": "2025-04-22T18:32:32Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    },
    {
      "event": "commented",
      "id": 2858043588,
      "node_id": "IC_kwDOABII586qWkjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2858043588",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-07T10:30:53Z",
      "updated_at": "2025-05-07T10:30:53Z",
      "author_association": "CONTRIBUTOR",
      "body": "Re https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2785006540\r\n\r\n> nit: The name SpendBlock may not be clear (unless this concept is already known and I'm missing the point).\r\nMaybe BIP30Validation, something like that, would be clearer.\r\n\r\n\r\nIt is doing more than BIP-30 validation, so I don't think that would accurate either. I thought the name was pretty clear for what it does, but I'd be open to other suggestions.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2858043588",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "reviewed",
      "id": 2823102316,
      "node_id": "PRR_kwDOABII586oRR9s",
      "url": null,
      "actor": null,
      "commit_id": "a7e41326234d3a381fdde0924af74c6561b10798",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2823102316",
      "submitted_at": "2025-05-07T20:15:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    },
    {
      "event": "reviewed",
      "id": 2830723082,
      "node_id": "PRR_kwDOABII586ouWgK",
      "url": null,
      "actor": null,
      "commit_id": "76a8f22c5c5cf48a9c36cc40db9224f0454917d0",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2830723082",
      "submitted_at": "2025-05-10T10:51:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE5Njc5NTcxYmI1NDhhNjI0NDkwNjBmOGRkOWM2OTQ5MTJlZDNiOTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9679571bb548a62449060f8dd9c694912ed3b98",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a9679571bb548a62449060f8dd9c694912ed3b98",
      "tree": {
        "sha": "f1d6978a64b2dee7d884988c478925d3d1893d27",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f1d6978a64b2dee7d884988c478925d3d1893d27"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f1d6978a64b2dee7d884988c478925d3d1893d27\nparent d91a746815e4428c738f1a096a950292cbdb5469\nauthor TheCharlatan <seb.kung@gmail.com> 1744967374 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882095 +0200\n\nconsensus: Use Coin span in GetP2SHSigOpCount\n\nMove the responsibility of retrieving coins from GetP2SHSigOpCount to\nits caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTjAACgkQm3m0VpHb\nQXM3qBAAxAwUTmG15Vnq8/TgK4jgFFnF9HfCkQLmYPLFlRIciub31a2C5BNk35iR\nzVM+TX72cXtIwDeQGCMmQQbdpsBmARCdCvEmTUHQCeejuB+8iJmzLZ5W8sNcHNLF\n3RfC4p2roq/RG+e2Nupuw7ZkBLoGZs7UBPT3nPDFB7arpEp0FnrY8/dcZdljTmgs\n/YKzOEibZCyIB0me7rlLgWjc28NO1fYKRQeOeLtg7GMJkH22m0+XvOwgKWcjHEnm\nqj+OkmvZNvxGbKV9ri2fAY1GmucTO8iZBELju6kLRdwsj9Jj2m0nLx+lnpHDI7sn\nb86mpaFN5zXPNBE/eRJ/2L3kjccfuZICfkBvpf3HQF81TH0w07u13+czLAsk+80K\nj3VWp+jVnQ9GCM37E1aF1KkYD02aGoDpbJbDjWtrITFtcGeK++zlsnoPV4RNduTC\nH3VmUeXZeFqcmUgLwIoN5qTb3TNTddIzU7sEFzEzGwBaquW54R299YjbTsYEyQRc\nAnvQiE9GGVYjc39CgkaxdI5GLykSt17XAm02K8lz2hN4UonSPhMsAc9HkMtFl5lN\n6ZwzBDoBhFAhTvnmTsqhYG4jm65I1fZ14uJJZhmN2eqiHHMPE5sAusJCzJmZ5tVs\nyezMuSxEXeSWKP5YpAp6UeiOX2gXSlFRr3tq+Pr7v+zssvmxl04=\n=ZOES\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d91a746815e4428c738f1a096a950292cbdb5469",
          "sha": "d91a746815e4428c738f1a096a950292cbdb5469",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d91a746815e4428c738f1a096a950292cbdb5469"
        }
      ],
      "message": "consensus: Use Coin span in GetP2SHSigOpCount\n\nMove the responsibility of retrieving coins from GetP2SHSigOpCount to\nits caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:35Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T09:09:34Z"
      },
      "sha": "a9679571bb548a62449060f8dd9c694912ed3b98"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGM1ZDA3YTQ2YTExMGIyYjA2YjYwMmVhMzNiODRhMjE1ZDRhMGRiMTk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5d07a46a110b2b06b602ea33b84a215d4a0db19",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c5d07a46a110b2b06b602ea33b84a215d4a0db19",
      "tree": {
        "sha": "1a8fb497c16e6c5280c894965a29adf56178c633",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1a8fb497c16e6c5280c894965a29adf56178c633"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 1a8fb497c16e6c5280c894965a29adf56178c633\nparent a9679571bb548a62449060f8dd9c694912ed3b98\nauthor TheCharlatan <seb.kung@gmail.com> 1744973491 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882101 +0200\n\nconsensus: Use Coin span in GetTransactionSigOpCost\n\nMove the responsibility of retrieving coins from GetTransactionSigOpCost\nto its caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTjUACgkQm3m0VpHb\nQXPs2xAAjgUpDZ7b0WadcChMkEQ5x7FWgM5Asot67YzGIMmFMN1LpM3L5lyCDhI5\nELIF/s5fYAWi6gpeoXImjDkTlvbBfHPiVLV4rbByNiIL+E++dMEr+1BINSALDADK\nzR/EumCir2qQUFtgZGuSmb4utqz3B70II6IGQTRdCxUVNirEIh+Udl3Qy0ktvVoQ\n1M27//KTsiWEA8wITOgc6DrTJkkV3AawnrJcMMjRPA5nDDem/rOLhYnlyUQdydXc\nv0VklTBP3P/RIisB8slPnJx+Hu9O/Otdn6Jz5+9ftmceMQ0VzP3vOxhRNMIOOw7v\nKyvMmcozZ/70PnQkrKP9gfJFBOTnLHfCAA/D+8Oyc4uRVKQS2KLgmHrc3eAHr0ip\nzn7aTr2iNhYF+pF7flJVN1D0v+MOeU/PtWMYKFOPccVs1GSPplvTYHMcYkgg1TCU\nLjvh1Mt8rIQliOEWJ+x9UVvq67XsRaiYdb2WQkV8yppXYXc2ZTjClF5MhUCURbQi\n3zubEYWkZf1BuizpFf4jy6XBf5fyd17mM1W+EUgEO3sgcsFSNVOVapDtnf9pk+a1\nNVYVFbv1sQCtlas+Q+LB57o70r1G/evgU30UT+nJoQfECu7+CwZ8oDQMaT5kW3VZ\nfCdtAkMbnsH0TDSVtfk+LVgUBJ8HCjBu8rRmYvg0hScqOtCj5Rw=\n=wPCW\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a9679571bb548a62449060f8dd9c694912ed3b98",
          "sha": "a9679571bb548a62449060f8dd9c694912ed3b98",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a9679571bb548a62449060f8dd9c694912ed3b98"
        }
      ],
      "message": "consensus: Use Coin span in GetTransactionSigOpCost\n\nMove the responsibility of retrieving coins from GetTransactionSigOpCost\nto its caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:41Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T10:51:31Z"
      },
      "sha": "c5d07a46a110b2b06b602ea33b84a215d4a0db19"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY0YTVjYzkyYzU4NDA3MjY1M2YwNDk4NTVkMmQ0OGYzY2UyYzJmN2U",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4a5cc92c584072653f049855d2d48f3ce2c2f7e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f4a5cc92c584072653f049855d2d48f3ce2c2f7e",
      "tree": {
        "sha": "4d0e39ca09626ae75a2c6eb224bf975b1564dcfe",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/4d0e39ca09626ae75a2c6eb224bf975b1564dcfe"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 4d0e39ca09626ae75a2c6eb224bf975b1564dcfe\nparent c5d07a46a110b2b06b602ea33b84a215d4a0db19\nauthor TheCharlatan <seb.kung@gmail.com> 1744981165 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882103 +0200\n\nconsensus: Use Coin span in CheckTxInputs\n\nMove the responsibility of retrieving coins from CheckTxInputs\nto its caller. The missing inputs check will be moved in an upcoming\ncommit.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTjcACgkQm3m0VpHb\nQXPU0A/+PV6lR46F3YbdsFRFLhbcrGMeqcTLTm+F0TSGX9BYet8YgxCVbqz4pQuP\nXpfJVoY0V5NZFBnuf7VJjiOGHpyYk58bjY+KvDeRU6KOxjFLi8FmAoKmuJRcyGpZ\nAGamhuvrRd7Bp2SXcC0ZLL5A12zdq7WydnZjVH0kXozG21lRp8sZCP+tTsW8lbqM\nnNmO5FQPZsFL/1JgVYlSR/tMFCZcUP9Oc8CpQsnneg6URJsLiV5D2qrmjrDJlhcb\nd7xO1Acg4XbuIMV6fSDseZXNUF6xyvkfXXzNzUQTX0KZ4jXo9EKzWUC5EI63WqKE\nCs6eFtAPRu4f53FmT/mckVj8ahwya57leffwqwwj63bb88N2tQ0nxNdqSy2hS8Zt\nadawsWa3HYIfHKGROVQoiDfYYJytoUpybT77PrzZnTNmKugQB4nhhHopdMoEjdxz\n6ZuJ2HHKMmqTa3ULiLsukTOH8so9moqX+IjayGiUeJ0DoB0StqgpIjdzeEzmg3g7\nd2K4BLrKIQKnkYo3n/5FQo/uTJVyqiDTEJauNMms640pgqusrLJQDKf50kJF4WiG\nqZemKpO32v3NLxURmF+K7C//I55/Ev8tKnXUQJ4W2WfLQGvBx7HiU+k2EyeQaUAp\nQhGxFk00g9tE9o54o7ecU5nmBecyDngcHodcg7r7HjAxhhJPM8A=\n=YFZJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c5d07a46a110b2b06b602ea33b84a215d4a0db19",
          "sha": "c5d07a46a110b2b06b602ea33b84a215d4a0db19",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c5d07a46a110b2b06b602ea33b84a215d4a0db19"
        }
      ],
      "message": "consensus: Use Coin span in CheckTxInputs\n\nMove the responsibility of retrieving coins from CheckTxInputs\nto its caller. The missing inputs check will be moved in an upcoming\ncommit.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:43Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T12:59:25Z"
      },
      "sha": "f4a5cc92c584072653f049855d2d48f3ce2c2f7e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDMyMThjODdjZTQwMWQzZjQzNzU5ZjkzY2VmYmNlY2MyZWNlYTU3Yzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3218c87ce401d3f43759f93cefbcecc2ecea57c8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3218c87ce401d3f43759f93cefbcecc2ecea57c8",
      "tree": {
        "sha": "3a1c9b6026f66a4d951b4451224d18841e09492b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3a1c9b6026f66a4d951b4451224d18841e09492b"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3a1c9b6026f66a4d951b4451224d18841e09492b\nparent f4a5cc92c584072653f049855d2d48f3ce2c2f7e\nauthor TheCharlatan <seb.kung@gmail.com> 1745007843 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882105 +0200\n\nvalidation: Use vector of outputs instead of CCoinsViewCache in CheckInputScripts\n\nMove the responsibility of retrieving coins from the CCoinsViewCache\nin CheckInputScripts to its caller.\n\nAdd a helper method in CCoinsViewCache to collect all Coin's outputs\nspent by a transaction's inputs.\n\nCallers of CCoinsViewCache are updated to either pre-fetch the spent\noutputs, or pass in an empty vector if the precomputed transaction data\nhas already been initialized with the required outputs.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTjkACgkQm3m0VpHb\nQXPi6w/+I+CYRwn2Ar/cqfZDJPJ3u62st0Z+YGtZX1kU4ShUizviLZPi9uMF9a/9\nNbohMnCfA2XS5qEJkMdtgdCZ405Bo49NHcwg67FPQ3qd9RED7MbqVjG5tQxYYGsU\nh+bwAt/xnksfhW72s7Y6rcBhdOT4VLi8BPiB5QelPGRivU1SNRCtf2y4JIWbiE+8\nqvwQXISGrFcLNP9H6XBHYm/bCypRcK5/aLoQ2fyKIF3WU3LpijcluEarAOftSuSL\nWpIH96XknddG4elZA4CLcvjHjE3a1s85P74jpsx+u/rekBnlQluxV31fn5nr07Xe\nYsXq+nDsRFQy5UYqqXhOkN21x+kg1l+OV4ZXA+hEeSe4OI0hQdDMeo3lz0V2ra19\n/xC3VTOmwo3KLTg6PTsSEF6VJfD64kJkfIuuESSYGVhmfH9u0jSgQMhoBR5V4wXZ\n77iK26f+jaXGGfmYyUtnGW9h+n0kSe3SW+X2P1l9oGNvNJmAMRLWY5lDYXZaokzz\nZVI/rv9rTBeatkC9QX9Px4GgkkIeQaXz0+13tfNoCPEvb3HGi4z4w05f7Wayq5qX\nBTma1iQrounk5cFYpvwQYQxgpyxFhm+nL+WhVOJ0RdU6l4o6oC7D+rJaPne3Hska\nTzYLBCLoDFIbF/aFY7DNLaczzoSaiFR2OBabUgU1goJ/oAdwWmo=\n=wao3\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4a5cc92c584072653f049855d2d48f3ce2c2f7e",
          "sha": "f4a5cc92c584072653f049855d2d48f3ce2c2f7e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f4a5cc92c584072653f049855d2d48f3ce2c2f7e"
        }
      ],
      "message": "validation: Use vector of outputs instead of CCoinsViewCache in CheckInputScripts\n\nMove the responsibility of retrieving coins from the CCoinsViewCache\nin CheckInputScripts to its caller.\n\nAdd a helper method in CCoinsViewCache to collect all Coin's outputs\nspent by a transaction's inputs.\n\nCallers of CCoinsViewCache are updated to either pre-fetch the spent\noutputs, or pass in an empty vector if the precomputed transaction data\nhas already been initialized with the required outputs.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:45Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T20:24:03Z"
      },
      "sha": "3218c87ce401d3f43759f93cefbcecc2ecea57c8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDU5MDg2ODAxZDE3NmIwODFlYjIxNmI0YzY1NDA4ZDRjYWNlMDE0NWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59086801d176b081eb216b4c65408d4cace0145e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/59086801d176b081eb216b4c65408d4cace0145e",
      "tree": {
        "sha": "a41d77febb8da1d71d4ce1aac048fe9d3fc63a87",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/a41d77febb8da1d71d4ce1aac048fe9d3fc63a87"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree a41d77febb8da1d71d4ce1aac048fe9d3fc63a87\nparent 3218c87ce401d3f43759f93cefbcecc2ecea57c8\nauthor TheCharlatan <seb.kung@gmail.com> 1745096159 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882106 +0200\n\nvalidation: Add SpendBlock function\n\nMove the BIP30 checks from ConnectBlock to a new SpendBlock method.\nThis is a move-only change, more content to SpendBlock is added in the\nnext commits. The goal is to move logic requiring access to the\nCCoinsViewCache out of ConnectBlock and to the new SpendBlock method.\nSpendBlock will in future handle all UTXO set interactions that\npreviously took place in ConnectBlock.\n\nBy returning early in case of a BIP30 validation failure, an\nadditional failure check for an invalid block reward in case of its\nfailure is left out.\n\nCallers of ConnectBlock now also need to call SpendBlock before. This is\nenforced in a future commit by adding a CBlockUndo argument that needs\nto be passed to both.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTjoACgkQm3m0VpHb\nQXNb6A/8Cs1trZOroH2qIqwtK+E4ptJ9iexDGDTyDV9QMLA+8fPJWIAmnr1CYHpg\ndWnT1hu5n0EE3tDSwrXlzgx3tUrVUkgvhX+DrZK9/fojRi/P0AQJfGfhSOo4LfeO\nF35dcJeeNiqpbVojyTjR5vc2/JbVIimsnonnU9LM3sZQG7fI83uQp6FDaWxZkTuo\n6r6XU+DNT3Alcd8OQFtboOVunL3lYqpIRfRT1U+RK6Lc+2LdCo+7R9Fmyv6j1Lgb\nM0l92X35rUZE0cH0bPT76K7nF9t1ybs6cg5R5n/7K71qKeMHM2FiSRluDBK86v0U\nwoJfPfU6uE4gvikYAsSdumP6WFfojFrG5oPhlee6/JXHUV1tdZT0rTgNq8l0/XOr\nze8vhjEtA7hGgsk6a2r2+9YW+66my24/R/uF4ITyraNHbwdzN3s0+V0UYyizmpZb\nKOF5OfgFbJoU7IAB2bUGLiW7fh60hRRGA8/GxH+VSwp8FtihxJdmfKizCelMfHUt\nTYxb1cnJhThLsII3AK/mYWXBJilSouQfdedb2O/zS8ASlINvU/Gv1KcTVG5s7I2E\nrGDqbdng8HxRP5UuFnJdsBBSM3WVjoqt4dVD8/JEDwdlQp9cQNMi1N+ajRlURm+R\n6wur5KeHTCd+9PA2hITfIeOFkQvxOPn9PKebiJte7+Pm53UAy6I=\n=HZve\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3218c87ce401d3f43759f93cefbcecc2ecea57c8",
          "sha": "3218c87ce401d3f43759f93cefbcecc2ecea57c8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3218c87ce401d3f43759f93cefbcecc2ecea57c8"
        }
      ],
      "message": "validation: Add SpendBlock function\n\nMove the BIP30 checks from ConnectBlock to a new SpendBlock method.\nThis is a move-only change, more content to SpendBlock is added in the\nnext commits. The goal is to move logic requiring access to the\nCCoinsViewCache out of ConnectBlock and to the new SpendBlock method.\nSpendBlock will in future handle all UTXO set interactions that\npreviously took place in ConnectBlock.\n\nBy returning early in case of a BIP30 validation failure, an\nadditional failure check for an invalid block reward in case of its\nfailure is left out.\n\nCallers of ConnectBlock now also need to call SpendBlock before. This is\nenforced in a future commit by adding a CBlockUndo argument that needs\nto be passed to both.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:46Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-19T20:55:59Z"
      },
      "sha": "59086801d176b081eb216b4c65408d4cace0145e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGJhYzUxY2ZjOTVmNmUzZjFjNDY0Mjk2OWQwOGFmNDVmMmZlYzAyMzU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bac51cfc95f6e3f1c4642969d08af45f2fec0235",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/bac51cfc95f6e3f1c4642969d08af45f2fec0235",
      "tree": {
        "sha": "70ed58e58abda163484cb93d747d04afcaf3280d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/70ed58e58abda163484cb93d747d04afcaf3280d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 70ed58e58abda163484cb93d747d04afcaf3280d\nparent 59086801d176b081eb216b4c65408d4cace0145e\nauthor TheCharlatan <seb.kung@gmail.com> 1745146123 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882108 +0200\n\nvalidation: Move SetBestBlock out of ConnectBlock\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTjwACgkQm3m0VpHb\nQXPKvg/9F5FHIsKT0CIlBCcI6siqNVtyEu3FAbapDpG1U1AV1dMmEdZI2ghJlP1a\n6CemZ6On9VVfOgDSKpH1+wv9Fy/fOKPSXBMJUnxNwkG/bzOIqr6DFFAE87wLefW/\nAQBSVcZnMET4+U7Sik3/dhJgd2JYhLzAq9EPpGBJPELblHmb1cg9WEZBQ2C2X0NB\nEwaWcH6J0I9UtKbYYT15WcidTd6pknXjLUjOFQzyWDKTNWoLCv8gkFsEDd3JOuuQ\nXN57GRq46us0wufMCA69/69QSU9e8KZ7BXf10XLK7qLoGFaG54HuC+mFwLAeUpRJ\ni7rfe5KITaDD+xj+xUN9HB3hnoBNlmTlz/kUYcxKBUts2w7yCntSCZ5XOyBShymT\nuZRn1hL2ShDpbcaHUdkzDa4pdsdqZinOng9WdzZQiKKN/DmQzZg1VXvSvNb28n4n\nnwl0RSepFQtXdxc+hjMYPLZrzTa1t35EbbgGj7OrHW4ac+p0MUArNu0Pqsfikxit\n19T2e9VUjPfwJJq0/wQKmZ3IFuQ1V5l4j4d32xltZ20JeZrPIbd3/11tiEsNi4yC\nVnVVLtDoysNejxh1pJWSu/PdugIPlGGn2xpO0I5ra0sNFSRV5vM3OlXfWQtDOJVm\nKMotyndqUk0xe5P1TlG/6sA2S8442Wsdp69wmMJLb24u/5IX6v8=\n=MeYT\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/59086801d176b081eb216b4c65408d4cace0145e",
          "sha": "59086801d176b081eb216b4c65408d4cace0145e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/59086801d176b081eb216b4c65408d4cace0145e"
        }
      ],
      "message": "validation: Move SetBestBlock out of ConnectBlock\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:48Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-20T10:48:43Z"
      },
      "sha": "bac51cfc95f6e3f1c4642969d08af45f2fec0235"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDViYzRhN2VkNTE5N2Q1MGU5ZWRlZGVkOTE4MmZmNmM0NmFjNTA3MmI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5bc4a7ed5197d50e9ededed9182ff6c46ac5072b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5bc4a7ed5197d50e9ededed9182ff6c46ac5072b",
      "tree": {
        "sha": "49e889878d122c5d557d53bd9b3a985bfea03858",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/49e889878d122c5d557d53bd9b3a985bfea03858"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 49e889878d122c5d557d53bd9b3a985bfea03858\nparent bac51cfc95f6e3f1c4642969d08af45f2fec0235\nauthor TheCharlatan <seb.kung@gmail.com> 1744977596 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882109 +0200\n\nvalidation: Move coin existence and spend check to SpendBlock\n\nMove the remaining UTXO-related operations from ConnectBlock to\nSpendBlock. This includes moving the existence check, the UpdateCoins\ncall, and CBlockUndo generation.\n\nConnectBlock now takes a pre-populated CBlockUndo as an argument and no\nlonger accesses or manipulates the UTXO set.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTj0ACgkQm3m0VpHb\nQXM3xxAAmDLymVXSk/3RCbAAcRO0oQ+RD3KLYPDwuVL65dnPWp/XqIlcYt8lENN/\n0aNd6RzeKQ3OJpeVwl8KLvjneky9XXBAqzYDiZ71v3lvWS5Ok80YNicQKRstXj1Z\n0DxpsL48ror9tk0UhLdiuJ7qiPny1oQ3mEMvI9Yr+Z/sh1G1bxxub++Bera30RSX\ndaF8r10v2QcPYzrQ2u2jpLQkRn88tZdlIrtfrnZ/ezvzbKddWazip4Nmz6TQsSJc\n9kHh3iygys1W8I6T0BA/Ba1YNMIHYSZucavw5LGfIDkRy4e8Oinf2DnKjyG+HPex\ngN0UfdU1QfherCYakPrspeSnzeEnp7EX5qpoY8J+55dbLAfIBra8OZaapYwMd+EG\nbw/w5CSVS8gJYqrclXJp7wnJ+a/V8LIgI40ELuEfLiMPxgkUm77X53qyD8yoHK3e\ns5dhUtyqQ2I/u5/M/kqq3dlYCB5irNoPrvFk+YlgO5RlsOXTLgYIlnX+i9LdcXVV\nnPEi5mSjsDvGUfK+sW8Wjn4aZsw4icoC9jj7dzhf53duiTjg/OU16MLCDXw31YJL\noP+n2kFEbR+SY67hULJR2uYvaeStmR/HgfR08IDWNwe6dcHF+Ll+MmrjwGQtz6LD\nycW1nrKdjSqy/WgZVDKKcHxkAigyQ9LDM8dG131+Mf7IxA95sbk=\n=0RhV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/bac51cfc95f6e3f1c4642969d08af45f2fec0235",
          "sha": "bac51cfc95f6e3f1c4642969d08af45f2fec0235",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/bac51cfc95f6e3f1c4642969d08af45f2fec0235"
        }
      ],
      "message": "validation: Move coin existence and spend check to SpendBlock\n\nMove the remaining UTXO-related operations from ConnectBlock to\nSpendBlock. This includes moving the existence check, the UpdateCoins\ncall, and CBlockUndo generation.\n\nConnectBlock now takes a pre-populated CBlockUndo as an argument and no\nlonger accesses or manipulates the UTXO set.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:49Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T11:59:56Z"
      },
      "sha": "5bc4a7ed5197d50e9ededed9182ff6c46ac5072b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE2YTY5NWZiZmY0YTkyZWJhM2ViNzJlYzZhYTc2NmU3MWM1MmY3NzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "tree": {
        "sha": "3b65038f7d3379d36779fae26c73c14da1d57829",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3b65038f7d3379d36779fae26c73c14da1d57829"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 3b65038f7d3379d36779fae26c73c14da1d57829\nparent 5bc4a7ed5197d50e9ededed9182ff6c46ac5072b\nauthor TheCharlatan <seb.kung@gmail.com> 1745264216 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1746882110 +0200\n\ndoc: Add docstrings for ConnectBlock and SpendBlock\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgfTj4ACgkQm3m0VpHb\nQXP+Bg//W6dYysPNOdzZYagLkBx6kU+Gs9rOjmvJ8t0v3yxLCz/0HnkEJmZLLTt0\n+2nUjCWzeip6YOdU/mrqnztFGJHi3pnknSjUz6/ugw0egvP/T6OxHm/2rh+bGwMA\nS4jAYJga+y6/ZmVM1gH2akhHcQVMWW3OSXlf6rX7Tv+C71GZHIDdcUx/4iS19Gke\ncVWd31oCJt2Yu5eGmFi/jhwupgRQbXH6pAxyUIuRry54Uj1/btMyaXQlkztub18A\nEXlUf3j7tE1CDXmU803W/u5/M7qxZK5iDa4OjHvhvBEKcY6h9JTMSO2e93+jR2me\nNu9p6WqI03PRZcypYwpLlw/COGpDbJPjOnc9FRCvzhLhdABf+Yaj5QCbctZoTxxC\nvviiLwQY1RbovAxlLFLrtFEpx22Zu0S+90DbiIpFE+WKB6/f0Qnv79DBq9/KtiST\nrcCh0FF2ULatcWYRbWfkcBlMkptzZyfvK9ceIuqOVUgg7+UdcPojcslDgJMp7e9f\nRFHc/LOMwMPrbD93gMZd4Ji9Z0fl/xDOFzoVJN+wcEXG8EZlk2kKWsxmeG2vdPmf\nV3oG1EWh669mqg3JkgWcx5GFci0dDqsm7VHGP1gV+UrpZBFzaDb709OBf6rVkZjY\nFRQnnnKt8MU8ps/Nymb+GTn1qyn3NF+u5KecTQajVwp/NccMj8s=\n=N5p/\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5bc4a7ed5197d50e9ededed9182ff6c46ac5072b",
          "sha": "5bc4a7ed5197d50e9ededed9182ff6c46ac5072b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5bc4a7ed5197d50e9ededed9182ff6c46ac5072b"
        }
      ],
      "message": "doc: Add docstrings for ConnectBlock and SpendBlock",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-05-10T13:01:50Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T19:36:56Z"
      },
      "sha": "16a695fbff4a92eba3eb72ec6aa766e71c52f773"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17602733675,
      "node_id": "HRFPE_lADOABII586zUH0-zwAAAAQZNGZr",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17602733675",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "created_at": "2025-05-10T16:20:51Z"
    },
    {
      "event": "commented",
      "id": 2869001802,
      "node_id": "IC_kwDOABII586rAX5K",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2869001802",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-10T16:21:25Z",
      "updated_at": "2025-05-10T16:21:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Updated 76a8f22c5c5cf48a9c36cc40db9224f0454917d0 -> 16a695fbff4a92eba3eb72ec6aa766e71c52f773 ([spendblock_0](https://github.com/TheCharlatan/bitcoin/tree/spendblock_0) -> [spendblock_1](https://github.com/TheCharlatan/bitcoin/tree/spendblock_1), [compare](https://github.com/TheCharlatan/bitcoin/compare/spendblock_0..spendblock_1))\r\n\r\n* Addressed @stringintech's [comment](https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2078426205), now using `std::span<T>` as templated argument.",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2869001802",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "mentioned",
      "id": 17602735661,
      "node_id": "MEE_lADOABII586zUH0-zwAAAAQZNG4t",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17602735661",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-10T16:21:26Z"
    },
    {
      "event": "subscribed",
      "id": 17602735667,
      "node_id": "SE_lADOABII586zUH0-zwAAAAQZNG4z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17602735667",
      "actor": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-10T16:21:26Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052401069",
      "pull_request_review_id": 2781269268,
      "id": 2052401069,
      "node_id": "PRRC_kwDOABII5856VSet",
      "diff_hunk": "@@ -709,6 +709,9 @@ class Chainstate\n     bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n                       CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    bool SpendBlock(const CBlock& block, const CBlockIndex* pindex, const uint256& block_hash,",
      "path": "src/validation.h",
      "position": 34,
      "original_position": 4,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 2be3c59151bcb840eb8cbd045a3dada6775ebc9e \"validation: Add SpendBlock function\": this or the final commit would be a good time to document both `SpendBlock` and `ConnectBlock`.\r\n\r\nIIUC `SpendBlock`:\r\n\r\n1. Checks that all spent coins existed\r\n i) including coins created and spent within the block, in that order\r\n3. Optimistically updates the UTXO set with newly created coins\r\n i) checks BIP30 (not in this order, but conceptually)\r\n4. Populates Undo data\r\n\r\nAnd then `ConnectBlock` does all the other consensus checks (like verifying the input scripts). It uses the Undo data populated by `SpendBlock` and does _not_ need the UTXO set.",
      "created_at": "2025-04-21T13:44:14Z",
      "updated_at": "2025-04-21T14:05:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052401069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052401069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 737,
      "original_line": 737,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052668744",
      "pull_request_review_id": 2781698127,
      "id": 2052668744,
      "node_id": "PRRC_kwDOABII5856WT1I",
      "diff_hunk": "@@ -709,6 +709,9 @@ class Chainstate\n     bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n                       CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    bool SpendBlock(const CBlock& block, const CBlockIndex* pindex, const uint256& block_hash,",
      "path": "src/validation.h",
      "position": 34,
      "original_position": 4,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "in_reply_to_id": 2052401069,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes, that is the gist of it. Will add a commit at the end to add some documentation in the header. ",
      "created_at": "2025-04-21T16:15:45Z",
      "updated_at": "2025-04-21T16:15:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052668744",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052668744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 737,
      "original_line": 737,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052733269",
      "pull_request_review_id": 2781806044,
      "id": 2052733269,
      "node_id": "PRRC_kwDOABII5856WjlV",
      "diff_hunk": "@@ -706,8 +706,11 @@ class Chainstate\n     // Block (dis)connection on a given view:\n     DisconnectResult DisconnectBlock(const CBlock& block, const CBlockIndex* pindex, CCoinsViewCache& view)\n         EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n-    bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n-                      CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+    bool ConnectBlock(const CBlock& block, const uint256& block_hash, BlockValidationState& state, CBlockIndex* pindex,\n+                      CBlockUndo& blockundo, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);",
      "path": "src/validation.h",
      "position": null,
      "original_position": 7,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "in_reply_to_id": null,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think it would be clearer to take a vector of spent `Coin`s directly? Or even a span?",
      "created_at": "2025-04-21T17:14:05Z",
      "updated_at": "2025-04-21T17:14:05Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052733269",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052733269"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052869871",
      "pull_request_review_id": 2782028456,
      "id": 2052869871,
      "node_id": "PRRC_kwDOABII5856XE7v",
      "diff_hunk": "@@ -706,8 +706,11 @@ class Chainstate\n     // Block (dis)connection on a given view:\n     DisconnectResult DisconnectBlock(const CBlock& block, const CBlockIndex* pindex, CCoinsViewCache& view)\n         EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n-    bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n-                      CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+    bool ConnectBlock(const CBlock& block, const uint256& block_hash, BlockValidationState& state, CBlockIndex* pindex,\n+                      CBlockUndo& blockundo, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);",
      "path": "src/validation.h",
      "position": null,
      "original_position": 7,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "in_reply_to_id": 2052733269,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I might be missing something, but it would have to be a span of `CTxUndo`, and you'd have to move `WriteBlockUndo` to `ConnectTip` too, no? I wasn't quite sure about doing that change here though. The implications of separately writing the undo data and raising the `BlockIndex` validity level are not quite clear to me yet. There is always a question where to draw the scope line with these refactors. While it might not be useful to write undo data if we ever get to the alternative kernel API client use cases, there might be other ways to handle that.",
      "created_at": "2025-04-21T19:02:33Z",
      "updated_at": "2025-04-21T19:02:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052869871",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052869871"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052906047",
      "pull_request_review_id": 2782088168,
      "id": 2052906047,
      "node_id": "PRRC_kwDOABII5856XNw_",
      "diff_hunk": "@@ -706,8 +706,11 @@ class Chainstate\n     // Block (dis)connection on a given view:\n     DisconnectResult DisconnectBlock(const CBlock& block, const CBlockIndex* pindex, CCoinsViewCache& view)\n         EXCLUSIVE_LOCKS_REQUIRED(::cs_main);\n-    bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n-                      CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n+    bool ConnectBlock(const CBlock& block, const uint256& block_hash, BlockValidationState& state, CBlockIndex* pindex,\n+                      CBlockUndo& blockundo, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);",
      "path": "src/validation.h",
      "position": null,
      "original_position": 7,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "in_reply_to_id": 2052733269,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Oh, i was just reading the diff and overlooked `WriteBlockUndo`! Yes that makes sense.",
      "created_at": "2025-04-21T19:37:42Z",
      "updated_at": "2025-04-21T19:37:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052906047",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052906047"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 710,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053511978",
      "pull_request_review_id": 2783110836,
      "id": 2053511978,
      "node_id": "PRRC_kwDOABII5856Zhsq",
      "diff_hunk": "@@ -709,6 +709,9 @@ class Chainstate\n     bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n                       CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    bool SpendBlock(const CBlock& block, const CBlockIndex* pindex, const uint256& block_hash,",
      "path": "src/validation.h",
      "position": 34,
      "original_position": 4,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "in_reply_to_id": 2052401069,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Added a commit.",
      "created_at": "2025-04-22T07:33:03Z",
      "updated_at": "2025-04-22T07:33:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2053511978",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053511978"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 737,
      "original_line": 737,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2078426205",
      "pull_request_review_id": 2823102316,
      "id": 2078426205,
      "node_id": "PRRC_kwDOABII58574kRd",
      "diff_hunk": "@@ -39,11 +40,12 @@ unsigned int GetLegacySigOpCount(const CTransaction& tx);\n /**\n  * Count ECDSA signature operations in pay-to-script-hash inputs.\n  *\n- * @param[in] mapInputs Map of previous transactions that have outputs we're spending\n+ * @param[in] coins Sorted span of Coins containing previous transaction outputs we're spending\n  * @return maximum number of sigops required to validate this transaction's inputs\n  * @see CTransaction::FetchInputs\n  */\n-unsigned int GetP2SHSigOpCount(const CTransaction& tx, const CCoinsViewCache& mapInputs);\n+template <typename T>\n+unsigned int GetP2SHSigOpCount(const CTransaction& tx, const T coins);",
      "path": "src/consensus/tx_verify.h",
      "position": null,
      "original_position": 19,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "a7e41326234d3a381fdde0924af74c6561b10798",
      "in_reply_to_id": null,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Small nit: I was thinking maybe we could make the template parameter more specific like:\r\n\r\n```cpp\r\ntemplate <typename T>\r\nunsigned int GetP2SHSigOpCount(const CTransaction& tx, const std::span<T> coins)\r\n```\r\n\r\nThis might better align with the \"Sorted span\" mentioned in the docs, where T would then be either `const Coin` or `std::reference_wrapper<const Coin>`. It might also make the implementation slightly more readable when calling iterator methods on the `coins` parameter.",
      "created_at": "2025-05-07T20:15:47Z",
      "updated_at": "2025-05-07T20:28:13Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2078426205",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2078426205"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": 43,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2083107119",
      "pull_request_review_id": 2830723082,
      "id": 2083107119,
      "node_id": "PRRC_kwDOABII5858KbEv",
      "diff_hunk": "@@ -2161,7 +2172,7 @@ ValidationCache::ValidationCache(const size_t script_execution_cache_bytes, cons\n  * Non-static (and redeclared) in src/test/txvalidationcache_tests.cpp\n  */\n bool CheckInputScripts(const CTransaction& tx, TxValidationState& state,\n-                       const CCoinsViewCache& inputs, unsigned int flags, bool cacheSigStore,\n+                       std::vector<CTxOut>&& spent_outputs, unsigned int flags, bool cacheSigStore,\n                        bool cacheFullScriptStore, PrecomputedTransactionData& txdata,",
      "path": "src/validation.cpp",
      "position": 79,
      "original_position": 79,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "76a8f22c5c5cf48a9c36cc40db9224f0454917d0",
      "in_reply_to_id": null,
      "user": {
        "login": "stringintech",
        "id": 157148846,
        "node_id": "U_kgDOCV3mrg",
        "avatar_url": "https://avatars.githubusercontent.com/u/157148846?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/stringintech",
        "html_url": "https://github.com/stringintech",
        "followers_url": "https://api.github.com/users/stringintech/followers",
        "following_url": "https://api.github.com/users/stringintech/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/stringintech/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/stringintech/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/stringintech/subscriptions",
        "organizations_url": "https://api.github.com/users/stringintech/orgs",
        "repos_url": "https://api.github.com/users/stringintech/repos",
        "events_url": "https://api.github.com/users/stringintech/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/stringintech/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is there a reason we keep passing the `spent_outputs` instead of removing it (to simplify the API) and requiring callers to initialize `txdata` before calling `CheckInputScripts`?",
      "created_at": "2025-05-10T10:51:13Z",
      "updated_at": "2025-05-10T10:51:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2083107119",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2083107119"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": 2174,
      "original_start_line": 2174,
      "start_side": "RIGHT",
      "line": 2176,
      "original_line": 2176,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2083129268",
      "pull_request_review_id": 2830768309,
      "id": 2083129268,
      "node_id": "PRRC_kwDOABII5858Kge0",
      "diff_hunk": "@@ -39,11 +40,12 @@ unsigned int GetLegacySigOpCount(const CTransaction& tx);\n /**\n  * Count ECDSA signature operations in pay-to-script-hash inputs.\n  *\n- * @param[in] mapInputs Map of previous transactions that have outputs we're spending\n+ * @param[in] coins Sorted span of Coins containing previous transaction outputs we're spending\n  * @return maximum number of sigops required to validate this transaction's inputs\n  * @see CTransaction::FetchInputs\n  */\n-unsigned int GetP2SHSigOpCount(const CTransaction& tx, const CCoinsViewCache& mapInputs);\n+template <typename T>\n+unsigned int GetP2SHSigOpCount(const CTransaction& tx, const T coins);",
      "path": "src/consensus/tx_verify.h",
      "position": null,
      "original_position": 19,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "a7e41326234d3a381fdde0924af74c6561b10798",
      "in_reply_to_id": 2078426205,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah, that seems better. I had another version of this that tried to enforce everything through concepts, but thought that didn't really help with keeping things clear, so just dropped all the fancy type hints altogether.",
      "created_at": "2025-05-10T12:16:17Z",
      "updated_at": "2025-05-10T12:38:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2083129268",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2083129268"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": 43,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2083133917",
      "pull_request_review_id": 2830768309,
      "id": 2083133917,
      "node_id": "PRRC_kwDOABII5858Khnd",
      "diff_hunk": "@@ -2161,7 +2172,7 @@ ValidationCache::ValidationCache(const size_t script_execution_cache_bytes, cons\n  * Non-static (and redeclared) in src/test/txvalidationcache_tests.cpp\n  */\n bool CheckInputScripts(const CTransaction& tx, TxValidationState& state,\n-                       const CCoinsViewCache& inputs, unsigned int flags, bool cacheSigStore,\n+                       std::vector<CTxOut>&& spent_outputs, unsigned int flags, bool cacheSigStore,\n                        bool cacheFullScriptStore, PrecomputedTransactionData& txdata,",
      "path": "src/validation.cpp",
      "position": 79,
      "original_position": 79,
      "commit_id": "16a695fbff4a92eba3eb72ec6aa766e71c52f773",
      "original_commit_id": "76a8f22c5c5cf48a9c36cc40db9224f0454917d0",
      "in_reply_to_id": 2083107119,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "My read is that the call to `txdata.Init` is delayed to after checking the script execution cache for performance reasons. Calling `Init` does some hashing, that would not be required if it is already in the cache. Moving the `spent_outputs` vector construction is already a potential performance downside for potential cache hits, though I think that is more acceptable in the grand scheme of things.",
      "created_at": "2025-05-10T12:38:40Z",
      "updated_at": "2025-05-10T12:38:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2083133917",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2083133917"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": 2174,
      "original_start_line": 2174,
      "start_side": "RIGHT",
      "line": 2176,
      "original_line": 2176,
      "side": "RIGHT"
    }
  ]
}