{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317",
    "id": 2471245988,
    "node_id": "PR_kwDOABII586TTDik",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32317",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32317.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32317.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/c1b36c4554c486f77e2d64e23465aadd4d20c552",
    "number": 32317,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "kernel: Separate UTXO set access from validation functions",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API.",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2025-04-21T13:15:46Z",
    "updated_at": "2025-04-21T16:15:45Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "c85b7eac9421afd43e3b23c447e57a4134acf6cb",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "TheCharlatan:spendblock",
      "ref": "spendblock",
      "sha": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 94456368,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NDQ1NjM2OA==",
        "name": "bitcoin",
        "full_name": "TheCharlatan/bitcoin",
        "owner": {
          "login": "TheCharlatan",
          "id": 8421793,
          "node_id": "MDQ6VXNlcjg0MjE3OTM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheCharlatan",
          "html_url": "https://github.com/TheCharlatan",
          "followers_url": "https://api.github.com/users/TheCharlatan/followers",
          "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
          "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
          "repos_url": "https://api.github.com/users/TheCharlatan/repos",
          "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/TheCharlatan/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/TheCharlatan/bitcoin",
        "archive_url": "https://api.github.com/repos/TheCharlatan/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheCharlatan/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheCharlatan/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheCharlatan/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheCharlatan/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheCharlatan/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheCharlatan/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheCharlatan/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheCharlatan/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheCharlatan/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheCharlatan/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheCharlatan/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheCharlatan/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheCharlatan/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheCharlatan/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheCharlatan/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheCharlatan/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheCharlatan/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/hooks",
        "svn_url": "https://github.com/TheCharlatan/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 260389,
        "default_branch": "master",
        "open_issues_count": 4,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-21T16:14:42Z",
        "created_at": "2017-06-15T16:03:35Z",
        "updated_at": "2025-04-21T16:14:20Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "d91a746815e4428c738f1a096a950292cbdb5469",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37095,
        "stargazers_count": 82994,
        "watchers_count": 82994,
        "size": 279932,
        "default_branch": "master",
        "open_issues_count": 705,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-19T11:56:22Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-21T16:13:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 396,
    "deletions": 194,
    "changed_files": 14,
    "commits": 7,
    "review_comments": 2,
    "comments": 2
  },
  "events": [
    {
      "event": "commented",
      "id": 2818389716,
      "node_id": "IC_kwDOABII586n_TbU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2818389716",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:15:49Z",
      "updated_at": "2025-04-21T16:15:01Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32317.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2818389716",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "labeled",
      "id": 17338317960,
      "node_id": "LE_lADOABII586zUH0-zwAAAAQJcbyI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17338317960",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:15:57Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "renamed",
      "id": 17338318896,
      "node_id": "RTE_lADOABII586zUH0-zwAAAAQJccAw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17338318896",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:16:03Z",
      "rename": {
        "from": "kernel: Seperate UTXO set access from validation functions",
        "to": "kernel: Separate UTXO set access from validation functions"
      }
    },
    {
      "event": "reviewed",
      "id": 2781269268,
      "node_id": "PRR_kwDOABII586lxs0U",
      "url": null,
      "actor": null,
      "commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2781269268",
      "submitted_at": "2025-04-21T13:44:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    },
    {
      "event": "labeled",
      "id": 17339331403,
      "node_id": "LE_lADOABII586zUH0-zwAAAAQJgTNL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17339331403",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T14:43:47Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2818629708,
      "node_id": "IC_kwDOABII586oAOBM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2818629708",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T14:43:48Z",
      "updated_at": "2025-04-21T14:43:48Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40876609750</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2818629708",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGE3ZTQxMzI2MjM0ZDNhMzgxZmRkZTA5MjRhZjc0YzY1NjFiMTA3OTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7e41326234d3a381fdde0924af74c6561b10798",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/a7e41326234d3a381fdde0924af74c6561b10798",
      "tree": {
        "sha": "966fc1d6d23150bdb14a4f106031794a5affd722",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/966fc1d6d23150bdb14a4f106031794a5affd722"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 966fc1d6d23150bdb14a4f106031794a5affd722\nparent d91a746815e4428c738f1a096a950292cbdb5469\nauthor TheCharlatan <seb.kung@gmail.com> 1744967374 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252062 +0200\n\nconsensus: Use Coin span in GetP2SHSigOpCount\n\nMove the responsibility of retrieving coins from GetP2SHSigOpCount to\nits caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbt4ACgkQm3m0VpHb\nQXOEiA//aaa48hA9Gt/l6SI65RVKe78zjuYHF+GhHKU79LtbCnb37nQxTFe9yaTT\ndu+RN0Ikbsj406I02BwU4nhI+ydwtw5Zh21GdTYTuhDzhwv3BmGmq2+BIYvC0CL1\n0ie+C//gT0s4cz04hDvw6sk1bxQ7V0pwcs9ra3AyJjJTfYZNRvDghYJlx0prCX59\nXdpmiMZNE66GLVZvDNuUd05I+MPfkli6T3zAvIukDre6yiy+4M9gjpUkeM4VBWN+\nhJfUkiBkuzFhW9PBA1DxeN3wXwNfEF4+WoZVaZPP+7n1q/E9BlaP3CNidFfdo4YD\ncN/qdb2A6KkwTgB8RQft2JJ6SW6gwZWWPI4fwfuEF21dQWVpbDhLzSeyW5W+XCKA\n0L1QddNoqN2eK9UmKKm3ALk7ExS+D9FSIfrHCLsHsqo2La2b+lbj0U5rQyGRP3w2\nV5lTLoNxnODWR8i7LlaAICnTHI4vdLa/b23/6xq2a5R6UULRJ7PCnZ7R4RG99g9A\ne8Q4GsCMGLyfKflrlEIYJufEBRBDN36ABt4pIiAsNbA/Sx0KqnCYDLiWW0hPd9cW\nYS4cYODA/eFNZZtFbpYlUactAhgL+xG3P2NWNCLvrMcJUfNtBabmLkqWzw+cBwd4\n6AzfSzhmZ/umedIvYTbeqXXw7FUvmK4Z/LkE/CoH4KfYrdHpkWg=\n=GdDb\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d91a746815e4428c738f1a096a950292cbdb5469",
          "sha": "d91a746815e4428c738f1a096a950292cbdb5469",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d91a746815e4428c738f1a096a950292cbdb5469"
        }
      ],
      "message": "consensus: Use Coin span in GetP2SHSigOpCount\n\nMove the responsibility of retrieving coins from GetP2SHSigOpCount to\nits caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:22Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T09:09:34Z"
      },
      "sha": "a7e41326234d3a381fdde0924af74c6561b10798"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc4MTY2OGI2ZTgwNzhhZDc2YWEzMDNmODlmMTY5YmM5ZWQwNDBlNjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/781668b6e8078ad76aa303f89f169bc9ed040e65",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/781668b6e8078ad76aa303f89f169bc9ed040e65",
      "tree": {
        "sha": "2cb081695ec689c5c2fe66b3863dea5b976aa570",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2cb081695ec689c5c2fe66b3863dea5b976aa570"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2cb081695ec689c5c2fe66b3863dea5b976aa570\nparent a7e41326234d3a381fdde0924af74c6561b10798\nauthor TheCharlatan <seb.kung@gmail.com> 1744973491 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252064 +0200\n\nconsensus: Use Coin span in GetTransactionSigOpCost\n\nMove the responsibility of retrieving coins from GetTransactionSigOpCost\nto its caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbuAACgkQm3m0VpHb\nQXPtsA/+M+IomXvk6qkvYY+jkCBDKSqQyAHCuVZCK0IX0j4+uCovVl96o8mZlF4p\nF29wm/Etd+e7V3UqhjZ616RKpJ0oACJ9QQG7la1w2o2sTLxZgFDzSEolA/Jt7L8A\nOKsb0eSldtfAMm66cHJBaONMKDht99Fs29DfSI+m1JSYItyztmx8F29aQN9hDCYv\nIqY5c9Ohs06Nm2ct7/5ZPIIXKgJ7pzuLRcyxssjQnb9QeUigcpji6Qqt9B+56iRJ\ncx/nQVM3+CKuPBdxOCFJy8+3gveb0qqJWWMJQ/CMck4MGg/6h6ytwclEUcUjJ3c5\nLVFp3S/V61rjqlx/kkMQpc7jeq4UOwLFJimoX4wsRYqtZuh8ihXRlUgNC5JNz6nZ\nIKLGf8me2STHoQR9skqtOw1svI+4adzXSuxU7qgehVinlHMajs1QgwqfpkpvlzZG\ny7t6KPZellFw8CLkCIwBdsxTxRdHiv+CNLch8I7nW04OdGqQfGCM8eAiZmmrhH8q\ngTm820VNHcxm1IkgbOO7uCdUr/lsRuWkF28BsJPCDrXPhE4njvXFaDW02qm4X7AO\no+uO+Ex0jVzCmWQH0vob3fed05FxzxriLupLp0QpCziyHwAprYl8lZBeDsBREXFV\n+erQFdV3wsb/W6WbnQw8ABRPn6URBcTduMbIe9rlD1dvTp+i+FQ=\n=VLOE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/a7e41326234d3a381fdde0924af74c6561b10798",
          "sha": "a7e41326234d3a381fdde0924af74c6561b10798",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/a7e41326234d3a381fdde0924af74c6561b10798"
        }
      ],
      "message": "consensus: Use Coin span in GetTransactionSigOpCost\n\nMove the responsibility of retrieving coins from GetTransactionSigOpCost\nto its caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:24Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T10:51:31Z"
      },
      "sha": "781668b6e8078ad76aa303f89f169bc9ed040e65"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY3ZjhiZjFkOWZkMjAzYzg0NDFkNjgyYzY2ZDRkYmYxYWE3MjA4NjU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7f8bf1d9fd203c8441d682c66d4dbf1aa720865",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f7f8bf1d9fd203c8441d682c66d4dbf1aa720865",
      "tree": {
        "sha": "f628bb3bc62ff49090222c96eb49ae85ad378dc7",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f628bb3bc62ff49090222c96eb49ae85ad378dc7"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f628bb3bc62ff49090222c96eb49ae85ad378dc7\nparent 781668b6e8078ad76aa303f89f169bc9ed040e65\nauthor TheCharlatan <seb.kung@gmail.com> 1744981165 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252066 +0200\n\nconsensus: Use Coin span in CheckTxInputs\n\nMove the responsibility of retrieving coins from CheckTxInputs\nto its caller. The missing inputs check will be moved in an upcoming\ncommit.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbuIACgkQm3m0VpHb\nQXMjbg//dab9FyaFJlsK+VOAgOiXFIMGjYGan7ISPQjGsf0E7oKOSyjreL/q826P\nAnh7fATiwxBme/tQXUST1PwO2IIaLD20fF2lAUu6V1bcLQVwqLmvXehsQ7nTu/yy\n7LLk+8rS6D5zUZmCMn/3UYGFmZgYJjgJEIxA332yzfdYoiAEjpKAlwDOO4grL060\nspF8fQxqfMS9Jkd7LM1teUOcY5mPZiBTInmMp5lDEXx6heluPTqXVWpktqdeni0S\nj/8KwjZ9P7dpKBVfgg4TdgIH3eXAlCA7vUyQs1X5ZO+xFakp5ZK4cQRt3AzQUa1b\nnb0WaFwj5PL2PfPF6aTeQ/z/XzBoeaNcXROmbj8KPlv10bDYJ32j0sf8WxoNVJve\nYvXlJJ/y/QmaDS2SkC7kFKuZuz5IQDLITtsiPZmd/9ZZ+4L9OzGFfHCTUg1wYSAN\nAuKoDakbWVYvt7x7PaSiQjphuUeEEalQgIeXf6aFqvw+AQdabiasLEGhvK/7yphK\n/+FFbQPihi8rJngBWNcb0mScg7eQVK8c1HhactCrE+73+42sBU4lSjWNiqzxNkDy\not69f8A6FMk/JUc+e24U69nCJi8/egQey6p2B9Y0ESwtzL5FnsejQSIjgBA5JHef\nGG3RZXlSMhwCcsZNHRWKM+YnSb46/MZ2r/ma9c+OJWFr4OQsdzY=\n=wBRJ\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/781668b6e8078ad76aa303f89f169bc9ed040e65",
          "sha": "781668b6e8078ad76aa303f89f169bc9ed040e65",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/781668b6e8078ad76aa303f89f169bc9ed040e65"
        }
      ],
      "message": "consensus: Use Coin span in CheckTxInputs\n\nMove the responsibility of retrieving coins from CheckTxInputs\nto its caller. The missing inputs check will be moved in an upcoming\ncommit.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:26Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T12:59:25Z"
      },
      "sha": "f7f8bf1d9fd203c8441d682c66d4dbf1aa720865"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFhMGNhNGI5NGU2ODJkOGQ2ODQwZmJmNGFkODYwNTE4M2VhMTllZTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0",
      "tree": {
        "sha": "d5ff6a777cde04ccd51a8227566e2021384e6028",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d5ff6a777cde04ccd51a8227566e2021384e6028"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree d5ff6a777cde04ccd51a8227566e2021384e6028\nparent f7f8bf1d9fd203c8441d682c66d4dbf1aa720865\nauthor TheCharlatan <seb.kung@gmail.com> 1745007843 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252068 +0200\n\nvalidation: Use vector of outputs instead of CCoinsViewCache in CheckInputScripts\n\nMove the responsibility of retrieving coins from the CCoinsViewCache\nin CheckInputScripts to its caller.\n\nAdd a helper method in CCoinsViewCache to collect all Coin's outputs\nspent by a transaction's inputs.\n\nCallers of CCoinsViewCache are updated to either pre-fetch the spent\noutputs, or pass in an empty vector if the precomputed transaction data\nhas already been initialized with the required outputs.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbuQACgkQm3m0VpHb\nQXMbPhAAgIVXx1FvCx0zz20HoQz87TYy/fku6eh4hKhPy2PUXIm/yGgB24KspOVy\nCSxPV0js7EVn3zHDIlYbXFcdLyF0AEof4j+dxg6nk2fHvbDbuVvpMQqVt5MzN/af\n4bZVOjmwEwyB9VgjlkhrgRKHL90YSeMCYrPfIM4RFESHcz+vlN8Dla6LIMQ7l/aV\noM6k5ik+pP22R7J31BU4PiQeDQtcaIHIGjDZcRcMR4JmNxJzEytMAnGYBkslPYUp\nr6sUEBmLxA8IlpE0pGu5jqZtTqWNXi42mea+vz8DgNbsy9iisZJx+UCtUGmR4T6c\n0+WZW+FTDEbKXOtetM/bO5vR9Bha2KzN+y2qX/kSWweXIDYyxUWaa3APTSGa5N7n\ny3r3LVdHPK8hRa3gk9HDecwulS5BF+SIjgrT0qsVAPMHJCQtu7Fy52UtToOlrnoz\nNnrAH5eaWlXGzwo8JiEGBIgA/FMiRVypJN5WdyKwGc9atIPFeRRUoJ+E4ClTNafK\n4F5ZvCDPThAht1gVWA+fk9YZFN+erNGgrGPu6QaKr482SPn2k2ViEKOXjp8WwhHb\nzldXdGBxEXSRJoj3egbJLBLb69l6xZYo4dVGHL/NTNXixGVe4z7ZG/QFKT5UTHie\nF/wPXAnFBdBmkimWaLx4y/q8Mb+80GY3VdRF/UH4GhGvVyHPkfU=\n=eY2m\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f7f8bf1d9fd203c8441d682c66d4dbf1aa720865",
          "sha": "f7f8bf1d9fd203c8441d682c66d4dbf1aa720865",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f7f8bf1d9fd203c8441d682c66d4dbf1aa720865"
        }
      ],
      "message": "validation: Use vector of outputs instead of CCoinsViewCache in CheckInputScripts\n\nMove the responsibility of retrieving coins from the CCoinsViewCache\nin CheckInputScripts to its caller.\n\nAdd a helper method in CCoinsViewCache to collect all Coin's outputs\nspent by a transaction's inputs.\n\nCallers of CCoinsViewCache are updated to either pre-fetch the spent\noutputs, or pass in an empty vector if the precomputed transaction data\nhas already been initialized with the required outputs.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:28Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T20:24:03Z"
      },
      "sha": "1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMwMzVmZjRkYjg4Mzg2NjE5MWNiOWMzMGMxZWViY2ZhNWViMjU0YjM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c035ff4db883866191cb9c30c1eebcfa5eb254b3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c035ff4db883866191cb9c30c1eebcfa5eb254b3",
      "tree": {
        "sha": "456fb7c34553e66a548589f58c7c4a3589123d0d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/456fb7c34553e66a548589f58c7c4a3589123d0d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 456fb7c34553e66a548589f58c7c4a3589123d0d\nparent 1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0\nauthor TheCharlatan <seb.kung@gmail.com> 1745096159 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252069 +0200\n\nvalidation: Add SpendBlock function\n\nMove the BIP30 checks from ConnectBlock to a new SpendBlock method.\nThis is a move-only change, more content to SpendBlock is added in the\nnext commits. The goal is to move logic requiring access to the\nCCoinsViewCache out of ConnectBlock and to the new SpendBlock method.\nSpendBlock will in future handle all UTXO set interactions that\npreviously took place in ConnectBlock.\n\nBy returning early in case of a BIP30 validation failure, an\nadditional failure check for an invalid block reward in case of its\nfailure is left out.\n\nCallers of ConnectBlock now also need to call SpendBlock before. This is\nenforced in a future commit by adding a CBlockUndo argument that needs\nto be passed to both.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbuUACgkQm3m0VpHb\nQXNvMg//Y75txXYgirByA26A+xByb7cuHavxCAXN7EzlUwfpaQ+M/4XNbWJXSpvl\nJuOdGmhjeAbZsb1GrXxWDVTG4nJRL7sCRJangSWUsb5EmTh1ULpL/1wXyLVGdBgM\noVVDTyxXKbK6HlqiLc1NWDXrXm3mfWdG4NuE1/kJAmdomZlxYIVKATN5V91sz1UQ\n2VT61i9jdUlhKSIpUC307IG08++zs2zjbJ+c0heepBxrO+rgdngzPEmR+23bZZH5\nX8w/M8Kxc2hl4tjRSVPUqURjr1pEmeKewzZLlOmjKn8nL5DM1dPsC1dWYRidX/Pp\nSRlqcPa281NXyQgRf7/uDwPrXsKa4goimrEIFRu+HBk9ThJOpeKZ1Q6jD8YF0iXK\nK+tSI5c0qmI6KBTrTsSmKli6QTnFoBaI1xhJYx9wWBXkERUZ/92z5D0TfxDKTV+U\nYc0eT/fJ99kcCpvpMR6cMl3vAoLykwBdSj7Bmlik0LvgxwXQBEAxkXyUzmHd+e0o\nSeFemkn+xr1AUlYZTbCzWQTTgKOG4r0jkBB9rUMCrneGrkYcDfmdVKaDh93+Dg7R\nq5DggM8BBl7TQVtsNBCqvU+IzYczo1b8VYAXWjbEyTy11SmOmS0sdVdYLuZ5xIid\nIETIrHY/4XCUxjgfVEuJraRhPmQQy2wtCmdsowtzfpqXQOUlzs8=\n=s+kq\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0",
          "sha": "1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/1a0ca4b94e682d8d6840fbf4ad8605183ea19ee0"
        }
      ],
      "message": "validation: Add SpendBlock function\n\nMove the BIP30 checks from ConnectBlock to a new SpendBlock method.\nThis is a move-only change, more content to SpendBlock is added in the\nnext commits. The goal is to move logic requiring access to the\nCCoinsViewCache out of ConnectBlock and to the new SpendBlock method.\nSpendBlock will in future handle all UTXO set interactions that\npreviously took place in ConnectBlock.\n\nBy returning early in case of a BIP30 validation failure, an\nadditional failure check for an invalid block reward in case of its\nfailure is left out.\n\nCallers of ConnectBlock now also need to call SpendBlock before. This is\nenforced in a future commit by adding a CBlockUndo argument that needs\nto be passed to both.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:29Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-19T20:55:59Z"
      },
      "sha": "c035ff4db883866191cb9c30c1eebcfa5eb254b3"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDEwMzY1MzU1Njg3NjY2NWNlMjk3YWQxODA1Y2JjOWZkNzQ2ODNhMWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/103653556876665ce297ad1805cbc9fd74683a1b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/103653556876665ce297ad1805cbc9fd74683a1b",
      "tree": {
        "sha": "f55279f89c94b040d6a5c786c4265c768989dfc4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f55279f89c94b040d6a5c786c4265c768989dfc4"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f55279f89c94b040d6a5c786c4265c768989dfc4\nparent c035ff4db883866191cb9c30c1eebcfa5eb254b3\nauthor TheCharlatan <seb.kung@gmail.com> 1745146123 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252070 +0200\n\nvalidation: Move SetBestBlock out of ConnectBlock\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbuYACgkQm3m0VpHb\nQXPiCBAAgel0+ZUckZQlNvRhO59BZN+j/aInpYeE0Tcc87N1057LdflLG6a1rnMK\nT8gaWcQy17zZrVeiT0+KN0QyyYGZXDPUEyL9lBC5sZ3s/1T1iCfoZ+qOmmBjbZNN\nY+THnQLJQ1a0ARSDUTTeIQWU8SxTVks0dsBX/2Gco5f+j0Xc2Wuo8C4ahL8Mw7t/\nsQpOdFx3fYbdfrlTRm0SPiN8tiXnvUFy+bHyvGY3jFfkcocFcq2UA7LpDimW9F56\npgD6tfURrBjapjG9mc8bphzBpWOh9j/vrM0f96CTCZS60EvC1uD3z1jVJXI2PD+G\nLFU08jXVl1DpkfDKVXDyQsOh52DdviRBraKuvNgXnUOGLIt/4hPI15GgMqzusGdQ\nHM5EFjQ0A7Rq3ITpLowvKxgR6/h6u8UrFEEhxsUqSEDqxGY0K/VU10UKmrnJr1+c\nEdODo0f42aVYVGSvhgJ4roQapSN/2ih0XqUFW24dPpnPh3UuoU04iZ/vLQV0Za5y\nvQ7g2NvUV/x0O1avy8/IC6HOQnpJx3DV7QvByhSl9gWE/JhR0dhsGTA6qkRfEjMG\nHxq4adEOKPEG1/2xAciLbmtTs23JYeFmyqo/gQgyAekcvyKqKfu/RnGFHp2vZ3Pu\n5rR4FUTAC84Bzyl3xIaSoytntiWq9xPEiA5nwStWcEUPWG55YMw=\n=JIXw\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c035ff4db883866191cb9c30c1eebcfa5eb254b3",
          "sha": "c035ff4db883866191cb9c30c1eebcfa5eb254b3",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c035ff4db883866191cb9c30c1eebcfa5eb254b3"
        }
      ],
      "message": "validation: Move SetBestBlock out of ConnectBlock\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:30Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-20T10:48:43Z"
      },
      "sha": "103653556876665ce297ad1805cbc9fd74683a1b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMxYjM2YzQ1NTRjNDg2Zjc3ZTJkNjRlMjM0NjVhYWRkNGQyMGM1NTI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "tree": {
        "sha": "333b63bff3215cebf56ef87757268bcd5560bf65",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/333b63bff3215cebf56ef87757268bcd5560bf65"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 333b63bff3215cebf56ef87757268bcd5560bf65\nparent 103653556876665ce297ad1805cbc9fd74683a1b\nauthor TheCharlatan <seb.kung@gmail.com> 1744977596 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745252072 +0200\n\nvalidation: Move coin existence and spend check to SpendBlock\n\nMove the remaining UTXO-related operations from ConnectBlock to\nSpendBlock. This includes moving the existence check, the UpdateCoins\ncall, and CBlockUndo generation.\n\nConnectBlock now takes a pre-populated CBlockUndo as an argument and no\nlonger accesses or manipulates the UTXO set.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGbugACgkQm3m0VpHb\nQXP4BBAAnrUZ4CP+RUjaOJqDoQ/tXmtYob3C5mJ9jGd4pXmUnr1cd9Gq2xfSNBMD\nDyXAamKkegmN5CbJQ9Jwcv2UQccniO2S3zmckDG6srzoYRGFzlh70NnT86O4XAGy\nt7NN6vpQgpG5oe+yC1RNoVnDDakPl25jZRo8KmvJQSnvYi6hSwezAhnpWf3eZ6XQ\nANLqQHGyzCmyqz2brWuXywZCF0nZ/Nx0jpb16RtwhQD3lp64DnoNDSFGpBHwMBu5\nZIhuzBD4qfiYJSddsjLXWiLj7G58/0VSRvYhkRJVXxPI2Ueoiw+6DW3hEPIZOoWV\nJkIqdS2R1ady+MgfGiW7pzyONDxEJZi8jQDFQnWvw4J0IG9jvA6S3HTUGtjkK5rh\nnB/sxiHisGrtxcGO31BCTBPjLDmgI3absX4ZA8ZDnFzjhPlxCzIHgRZ0ccPWcduZ\nsDeafZpPdJcF0iYq1okEuUqDReTwEDUzHHgp46B/2hb2x0Kuqj97yUi81AzoQA1u\nXaCheTxgreYapHYPUmKyQWBobFgzuu5UnFxOMHejtBPn6w/kfBOOOclwvKv3AYTr\ngsxCbyjsSLNbjkwqAujVWXDjmJ6vgLrFd94KKOJXVuhELmiWkAg80HMf/Xe//STa\n6z2wehqUj8gF++9VbnQYSwptbliTZ05mr3ceBV8L6A+mgPe+OP0=\n=ewk8\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/103653556876665ce297ad1805cbc9fd74683a1b",
          "sha": "103653556876665ce297ad1805cbc9fd74683a1b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/103653556876665ce297ad1805cbc9fd74683a1b"
        }
      ],
      "message": "validation: Move coin existence and spend check to SpendBlock\n\nMove the remaining UTXO-related operations from ConnectBlock to\nSpendBlock. This includes moving the existence check, the UpdateCoins\ncall, and CBlockUndo generation.\n\nConnectBlock now takes a pre-populated CBlockUndo as an argument and no\nlonger accesses or manipulates the UTXO set.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T16:14:32Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T11:59:56Z"
      },
      "sha": "c1b36c4554c486f77e2d64e23465aadd4d20c552"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17340461844,
      "node_id": "HRFPE_lADOABII586zUH0-zwAAAAQJknMU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17340461844",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "commit_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits/c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "created_at": "2025-04-21T16:14:43Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052401069",
      "pull_request_review_id": 2781269268,
      "id": 2052401069,
      "node_id": "PRRC_kwDOABII5856VSet",
      "diff_hunk": "@@ -709,6 +709,9 @@ class Chainstate\n     bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n                       CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    bool SpendBlock(const CBlock& block, const CBlockIndex* pindex, const uint256& block_hash,",
      "path": "src/validation.h",
      "position": 9,
      "original_position": 4,
      "commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "original_commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 2be3c59151bcb840eb8cbd045a3dada6775ebc9e \"validation: Add SpendBlock function\": this or the final commit would be a good time to document both `SpendBlock` and `ConnectBlock`.\r\n\r\nIIUC `SpendBlock`:\r\n\r\n1. Checks that all spent coins existed\r\n i) including coins created and spent within the block, in that order\r\n3. Optimistically updates the UTXO set with newly created coins\r\n i) checks BIP30 (not in this order, but conceptually)\r\n4. Populates Undo data\r\n\r\nAnd then `ConnectBlock` does all the other consensus checks (like verifying the input scripts). It uses the Undo data populated by `SpendBlock` and does _not_ need the UTXO set.",
      "created_at": "2025-04-21T13:44:14Z",
      "updated_at": "2025-04-21T14:05:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052401069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052401069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 712,
      "original_line": 712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052668744",
      "pull_request_review_id": 2781698127,
      "id": 2052668744,
      "node_id": "PRRC_kwDOABII5856WT1I",
      "diff_hunk": "@@ -709,6 +709,9 @@ class Chainstate\n     bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n                       CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    bool SpendBlock(const CBlock& block, const CBlockIndex* pindex, const uint256& block_hash,",
      "path": "src/validation.h",
      "position": 9,
      "original_position": 4,
      "commit_id": "c1b36c4554c486f77e2d64e23465aadd4d20c552",
      "original_commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "in_reply_to_id": 2052401069,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes, that is the gist of it. Will add a commit at the end to add some documentation in the header. ",
      "created_at": "2025-04-21T16:15:45Z",
      "updated_at": "2025-04-21T16:15:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052668744",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052668744"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 712,
      "original_line": 712,
      "side": "RIGHT"
    }
  ]
}