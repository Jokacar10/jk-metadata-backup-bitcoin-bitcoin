{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317",
    "id": 2471245988,
    "node_id": "PR_kwDOABII586TTDik",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32317",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32317.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32317.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/7492904cfd6e045ad69df12c7a6ad2b6c605fe74",
    "number": 32317,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "kernel: Separate UTXO set access from validation functions",
    "user": {
      "login": "TheCharlatan",
      "id": 8421793,
      "node_id": "MDQ6VXNlcjg0MjE3OTM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/TheCharlatan",
      "html_url": "https://github.com/TheCharlatan",
      "followers_url": "https://api.github.com/users/TheCharlatan/followers",
      "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
      "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
      "repos_url": "https://api.github.com/users/TheCharlatan/repos",
      "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The current code makes it hard to call functions for checking the consensus-correctness of a block without having a full UTXO set at hand. This makes implementing features such as Utreexo and non-assumevalid swiftsync, where maintaining a full UTXO set defeats their purpose, through the kernel API difficult. Checks like the coinbase subsidy, or block sigops are only available through `ConnectBlock`, which requires a complete coins cache.\r\n\r\nSolve this by moving accessing coins and the responsibility of spending them out of `ConnectBlock` and into a new separate function called `SpendBlock`. Pass a block's spent coins through the existing `CBlockUndo` data structure to `ConnectBlock`. \r\n\r\nWhile the change is largely a refactor, some smaller behaviour changes were unavoidable. These should be highlighted in the commit messages. The last commit contains the most important part of the coins logic move, the commits before attempt to prepare it piecemeal.\r\n\r\nThis pull request was benchmarked on [benchcoin](https://github.com/bitcoin-dev-tools/benchcoin/pull/162), which showed no performance regression. While discussing this pull request it was noted that pre-fetching and eliminating the need for some additional map lookups might improve performance a bit, but this does not make a measurable difference in the grand scheme of things and was not the motivation for this pull request.\r\n\r\nIn future changes, ConnectBlock could be made even more self contained, accessing the coins from the internal map could be further optimized by consolidating existence checking and spending, and the function eventually exposed in an external kernel API.",
    "labels": [
      {
        "id": 118379652,
        "node_id": "MDU6TGFiZWwxMTgzNzk2NTI=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Validation",
        "name": "Validation",
        "color": "6060aa",
        "default": false
      }
    ],
    "created_at": "2025-04-21T13:15:46Z",
    "updated_at": "2025-04-21T13:44:14Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "33c8cda3815be9175b70f945ed14cf50bb4b751b",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "TheCharlatan:spendblock",
      "ref": "spendblock",
      "sha": "7492904cfd6e045ad69df12c7a6ad2b6c605fe74",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 94456368,
        "node_id": "MDEwOlJlcG9zaXRvcnk5NDQ1NjM2OA==",
        "name": "bitcoin",
        "full_name": "TheCharlatan/bitcoin",
        "owner": {
          "login": "TheCharlatan",
          "id": 8421793,
          "node_id": "MDQ6VXNlcjg0MjE3OTM=",
          "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/TheCharlatan",
          "html_url": "https://github.com/TheCharlatan",
          "followers_url": "https://api.github.com/users/TheCharlatan/followers",
          "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
          "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
          "repos_url": "https://api.github.com/users/TheCharlatan/repos",
          "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/TheCharlatan/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/TheCharlatan/bitcoin",
        "archive_url": "https://api.github.com/repos/TheCharlatan/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/TheCharlatan/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/TheCharlatan/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/TheCharlatan/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/TheCharlatan/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/TheCharlatan/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/TheCharlatan/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/events",
        "forks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/TheCharlatan/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/TheCharlatan/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/TheCharlatan/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/TheCharlatan/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/TheCharlatan/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/TheCharlatan/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/TheCharlatan/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/TheCharlatan/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/TheCharlatan/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/TheCharlatan/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:TheCharlatan/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/TheCharlatan/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/TheCharlatan/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/TheCharlatan/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/TheCharlatan/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/TheCharlatan/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/TheCharlatan/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/TheCharlatan/bitcoin/hooks",
        "svn_url": "https://github.com/TheCharlatan/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 5,
        "watchers_count": 5,
        "size": 260389,
        "default_branch": "master",
        "open_issues_count": 4,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-21T12:48:30Z",
        "created_at": "2017-06-15T16:03:35Z",
        "updated_at": "2025-04-17T19:08:06Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "d91a746815e4428c738f1a096a950292cbdb5469",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37096,
        "stargazers_count": 82993,
        "watchers_count": 82993,
        "size": 279932,
        "default_branch": "master",
        "open_issues_count": 704,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-19T11:56:22Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-21T13:35:03Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 396,
    "deletions": 194,
    "changed_files": 14,
    "commits": 7,
    "review_comments": 1,
    "comments": 1
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZkMmQ2M2Q4OWMxZGIxNTQ0OTBmMjVkNzM0YWRjMGFhZmUxNTgwYTc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd2d63d89c1db154490f25d734adc0aafe1580a7",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fd2d63d89c1db154490f25d734adc0aafe1580a7",
      "tree": {
        "sha": "e23fb71cf28dae1a59b439982a09dbba3347bf9e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e23fb71cf28dae1a59b439982a09dbba3347bf9e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e23fb71cf28dae1a59b439982a09dbba3347bf9e\nparent 247e9de62228bd1cb0e2fb5e3bd9a906b3056167\nauthor TheCharlatan <seb.kung@gmail.com> 1744967374 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233217 +0200\n\nconsensus: Use Coin span in GetP2SHSigOpCount\n\nMove the responsibility of retrieving coins from GetP2SHSigOpCount to\nits caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJUEACgkQm3m0VpHb\nQXPbjw//d8PkzFvuheDFpTEZNz4o5Zh9o6RICyktoh8TMwO7DcGq/+uuu6LFaOai\n8mFwwhUOkJMdR2MtIJxQTSXO0fHOfNA92U8VriRarkcADDDaVvIhY3HaESMKCTjM\nflWnomQteJX5Xe7OZx4gAi9jJ66ZRUi7FzjQdNr/bDmPMyH+pcdSA2gFOPe6zwmg\nJgtGX9Ew/YXV4R5dHoyNGqr1aPa6JlvjhK3lNnIl6A5vQU7HB8D+/FDpc4uyt681\n6IZnqIOsrUYVRMC6+g/m/101Uvnp/zW1rWuT0Odrkv9xtnnrgvYOEdi9MaCdGzBR\nkcVIH8BCV9n/8FvNWeBomcqpQ0vFwIObHhmeR0H/genelcOzDzoUJJhMv4jkZx/3\nIF+8YpCv/PsqSOA04bZtZ9clCE9JEiHxSNqeyucnZJdSUvV2e32fX14gHIh2Z2tK\ngHajsFoYdmxdjcrL3LZS1IhqMIc7ZRJpBgt5Gj0fUw9bFHJF3AuBAr6aXQ5Yo6Ro\nyJ1xB8jF6LV6VyP6/i4aXLQL7bdT7yCWT+XDDmrvHDfI4zqfc+axKEEqiyaZvIwm\nIB9GsdPwI8CeGRbLRflqCpz4CmEbRzhhxupA0Ytx98JrJTWpUzywhrsh1M9017xE\nWty11EqHHxS02O5kLN90I6CdGYg6V9QpGhD6dNDKvSsbvBDUTME=\n=Wm2L\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/247e9de62228bd1cb0e2fb5e3bd9a906b3056167",
          "sha": "247e9de62228bd1cb0e2fb5e3bd9a906b3056167",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/247e9de62228bd1cb0e2fb5e3bd9a906b3056167"
        }
      ],
      "message": "consensus: Use Coin span in GetP2SHSigOpCount\n\nMove the responsibility of retrieving coins from GetP2SHSigOpCount to\nits caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:00:17Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T09:09:34Z"
      },
      "sha": "fd2d63d89c1db154490f25d734adc0aafe1580a7"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiZTNkNGMyMWQyOWUzOWIxYTJjNGFlYWFkMGNiN2UwZGQ1NWE1ODg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588",
      "tree": {
        "sha": "f8c3f1d4479f3f1f9a377e0ac59b6be32a67219f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f8c3f1d4479f3f1f9a377e0ac59b6be32a67219f"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree f8c3f1d4479f3f1f9a377e0ac59b6be32a67219f\nparent fd2d63d89c1db154490f25d734adc0aafe1580a7\nauthor TheCharlatan <seb.kung@gmail.com> 1744973491 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233247 +0200\n\nconsensus: Use Coin span in GetTransactionSigOpCost\n\nMove the responsibility of retrieving coins from GetTransactionSigOpCost\nto its caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJWAACgkQm3m0VpHb\nQXOx5xAAvQRQSGoaZxeAsq+lBMw0JBrsAJnp6Pfk702AtWuc35YWVNdMjTv2amsV\nT9ff6TVatxAsg/uYyhZiq/XLZvsL+8LuLQlFvGuXFEeKwQ83ndLrJTdE90tnuGlD\nMix3mhu9MHqLzRBlNCPrMkruiGmCRjKiRjSwXzqJcoNyYoAIrjPQGSGf232O9XuB\nYr1rsX6IItfXs7yKdniESMAEQ4dOiqnVJvaSq1oWxwjLOQYwuNbZu+1gwHbT0iYy\nnufqXgAVxvbPp7ZmnLT8Bk3VWrQ3zd90sqGtCTTaYhnikK9TcIUFuyvSlbCZrxB5\n/Wp+fXXHNmcUTcIV1Enqg4ExhP8d5EvEPcEgf/hWUh0g9Xb/w9w1B8KZWiAmRs9z\n8bc+b0SM0VncdJnyT7kCcyuv7p4tJW+YrsALk28glr7Er/0YRtJ0SGeHX2F3jvyb\nsk5CFT6hRO4cCb2sVwsMq9C2U7nOdTM372iBFMDj3WP5GAdJmUzRflmvFHUkXutR\nQRMN7H5sykR3MU926N57yxPP1M/5/Jmi4W/kRl4zD2S4TDZI3+0Fs0eBvbWb5McS\noq+OmdxlnbQ4ER4A2Yr8UjU0CD0Q8bcsmBTioyjInakGHvvQwZxdFlPnG4C8cX7b\nIRMV6NIH8ExgCTYgaGCicgUdceRWdWELFCTKZ1vfn3PoIq5pWyI=\n=c8dH\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fd2d63d89c1db154490f25d734adc0aafe1580a7",
          "sha": "fd2d63d89c1db154490f25d734adc0aafe1580a7",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fd2d63d89c1db154490f25d734adc0aafe1580a7"
        }
      ],
      "message": "consensus: Use Coin span in GetTransactionSigOpCost\n\nMove the responsibility of retrieving coins from GetTransactionSigOpCost\nto its caller.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:00:47Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T10:51:31Z"
      },
      "sha": "abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg1YTJkZmY3OWZkNDdjNDYxM2U4ZThmOWYyOTJhMmM3OGZjNmJiZTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5",
      "tree": {
        "sha": "7412d6bdae9c61725bd3784c53b926cec31ef14e",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/7412d6bdae9c61725bd3784c53b926cec31ef14e"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 7412d6bdae9c61725bd3784c53b926cec31ef14e\nparent abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588\nauthor TheCharlatan <seb.kung@gmail.com> 1744981165 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233268 +0200\n\nconsensus: Use Coin span in CheckTxInputs\n\nMove the responsibility of retrieving coins from CheckTxInputs\nto its caller. The missing inputs check will be moved in an upcoming\ncommit.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJXQACgkQm3m0VpHb\nQXPR1xAAjoaV1YhZACipAgaHff1d+PSsnZgnwGk8OWH19d1XMHtfXa1swndrmAkS\nNi3i6dWRKsleHDXi/5ZdOy6bSxFKOVOHL8yhoneOqPL4tdL6M+6yY6HxyDKmaO2F\nQcEkQdhCFEs+Zkgr7v5j+poiTtyLWBzDt/C8Bo0Zkjz1c1a+fGPFM3Em9p8e1JB2\nZzoNCxECopljLHHqE6y9tl1ompjr7dyXDqQa6Nr0lm2AH07tz0kZ92F/ogQYh8o+\n6gdKoVtCdGvRxuMSBDiA4ROIJ2DUB1nav2fbDfZTE/YXGhW3p1KUCqyg7+V6/itJ\nHfv0eEQ2M11sxGdoFZQ73qklo3s6f08edqcm+tImiUx65aOvj+jcaAmjq8WNdoCi\nHaiiefb8tV/osDmLYVWtMi65wIsHjq5tMeDm960d0a/fUBFeDRiuCXA+o7MXXOL/\nmphrnJ4ZgnCZR4z8v1wFYcb2PHgw369gqmWlHiYOzf7knh8+cCacDcPQBbudVDf9\nmApT3XeFvKzNU1KwTwdrBhMddGdZcif6XRO7fiRSSPXlJYbbkpZy/k21UYOuDwvi\nYXUVP/oIyOJmwfzK2fx9G9G3wcPai+ND1OpYEB7kSClpY4rU/xNbN9Vf+90xgGxl\nhCjzQCCsyYAtFl64magpfX0NBMi0ynqAnhn/EIXb4R3jbSFcCkA=\n=cZuE\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588",
          "sha": "abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/abe3d4c21d29e39b1a2c4aeaad0cb7e0dd55a588"
        }
      ],
      "message": "consensus: Use Coin span in CheckTxInputs\n\nMove the responsibility of retrieving coins from CheckTxInputs\nto its caller. The missing inputs check will be moved in an upcoming\ncommit.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n\nDefine two explicit template specializations for both a span of\nreferences to coins and a span of coins. This allows using it for both\nCoin entries referenced from the CCoinsViewCache, and from contiguous\nmemory, like the vector in CBlockUndo.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:01:08Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T12:59:25Z"
      },
      "sha": "85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDNkNTdiYzExNWM2ZWM4NTY0MTQ5Y2ZiZGUyZWUzMmVjNDY0NGM2Yzg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d57bc115c6ec8564149cfbde2ee32ec4644c6c8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3d57bc115c6ec8564149cfbde2ee32ec4644c6c8",
      "tree": {
        "sha": "07090395bac4dbeee593338521fc16c6d0cf08e6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/07090395bac4dbeee593338521fc16c6d0cf08e6"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 07090395bac4dbeee593338521fc16c6d0cf08e6\nparent 85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5\nauthor TheCharlatan <seb.kung@gmail.com> 1745007843 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233272 +0200\n\nvalidation: Use vector of outputs instead of CCoinsViewCache in CheckInputScripts\n\nMove the responsibility of retrieving coins from the CCoinsViewCache\nin CheckInputScripts to its caller.\n\nAdd a helper method in CCoinsViewCache to collect all Coin's outputs\nspent by a transaction's inputs.\n\nCallers of CCoinsViewCache are updated to either pre-fetch the spent\noutputs, or pass in an empty vector if the precomputed transaction data\nhas already been initialized with the required outputs.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJXgACgkQm3m0VpHb\nQXOB9A/+N82mVCfvnHo1BebRPjXEwn1iqYX1HKCOdQ+EghPMk1oal1W+g0Ic8yMF\nbn43TVUZ26dXzSbGdnOqMXBK5SmgraOTC66bbtwKmWkkXE0yHwJEvJHfeTNez4bU\nXVjbkCii6AvzXtEC3W04SpWRVuhpncIOUxMhWVQqbQM3MJ2/5PPiHkwblNrrKc7W\nXzjbstc1085XOqwtiafIaqj7ZUQwH2HRS879XDux5R4h+OBlB9s88UkZHooU16P/\ns4JHuG23hSFAD+JRvZ7Ee0ni+jzNGa8+o9tSr5hIVUeG0Sp0mgQkdgUBfSaoy2Rt\n2PnJEoPf66dKw3r4dv2/nrLtMMe9qPgbSx+1PROgXz69dIijS/WvOsN7oj7FvMfb\nQ7Wsk77sjydVU0YR305amlOUnTUB5tXrDZ92wzr1AnMETwRv304Jn7UoDYviATfg\nQlJEj/wIGVpypP49DYlebvtpAOZBrzXQJ9saHn67KUtTjXuiw//8OMEgVsEEmm1w\nO4B3AlS37FqFtPbo/+nJQTtmK8KwvUSL0Mx8f5fRrqNROTGiHQSzHj3jAWmbL1K0\nhj2JK2K/RBWVqyXCt1jcM6RdK4QwdDkhWlExwLIylj1kpXrMz7+Zo/0tkyzsl8nO\ne22KqL432aYc/K3DmznWlylnf1zoLt567OI6KmcM7hhQ/KRSCRU=\n=yF6v\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5",
          "sha": "85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/85a2dff79fd47c4613e8e8f9f292a2c78fc6bbe5"
        }
      ],
      "message": "validation: Use vector of outputs instead of CCoinsViewCache in CheckInputScripts\n\nMove the responsibility of retrieving coins from the CCoinsViewCache\nin CheckInputScripts to its caller.\n\nAdd a helper method in CCoinsViewCache to collect all Coin's outputs\nspent by a transaction's inputs.\n\nCallers of CCoinsViewCache are updated to either pre-fetch the spent\noutputs, or pass in an empty vector if the precomputed transaction data\nhas already been initialized with the required outputs.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:01:12Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T20:24:03Z"
      },
      "sha": "3d57bc115c6ec8564149cfbde2ee32ec4644c6c8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJiZTNjNTkxNTFiY2I4NDBlYjhjYmQwNDVhM2RhZGE2Nzc1ZWJjOWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "tree": {
        "sha": "b129fdef1d2edb529577a004133f1dc8a64584b5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b129fdef1d2edb529577a004133f1dc8a64584b5"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree b129fdef1d2edb529577a004133f1dc8a64584b5\nparent 3d57bc115c6ec8564149cfbde2ee32ec4644c6c8\nauthor TheCharlatan <seb.kung@gmail.com> 1745096159 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233276 +0200\n\nvalidation: Add SpendBlock function\n\nMove the BIP30 checks from ConnectBlock to a new SpendBlock method.\nThis is a move-only change, more content to SpendBlock is added in the\nnext commits. The goal is to move logic requiring access to the\nCCoinsViewCache out of ConnectBlock and to the new SpendBlock method.\nSpendBlock will in future handle all UTXO set interactions that\npreviously took place in ConnectBlock.\n\nBy returning early in case of a BIP30 validation failure, an\nadditional failure check for an invalid block reward in case of its\nfailure is left out.\n\nCallers of ConnectBlock now also need to call SpendBlock before. This is\nenforced in a future commit by adding a CBlockUndo argument that needs\nto be passed to both.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJXwACgkQm3m0VpHb\nQXPluxAArNdz2TOjXbmROpyEkrxeBEnGG6Zi04UpeGOkAjfSzU3mc10hH5/R0NRO\nLL1kYLailYyB4zKNNc87y9IpLQBRttmMX7dPvl8jyda5ydzLc+nrLJeoMFJyrXwh\n/HT8C9boJ+OVzptUmnBhugkyyMjzjOwNssDdCCPlx3H8bZn7gxtH9HH+9Ovm4nwL\nTWBYtjDDWl5dnAmZPZKq0/wgBpCqwCTZTMZoCsScDfasxVMMbyzk3hxj7811Ho4L\nLmsWlib8PAQBHKbnIIcuNbxH7bccib1PLhrN7thAfQLs4cAPJ5jJATvwCNll+Lhc\nuM8xuszhBhIGdVo0t1ukKQlpV4LjKG0JW04EGUBNeOaU5vT4JouxJ/BPsKB6Xx7u\nZJM0DoRUhWp94PV49ng/p69JBBworOXYW1FO3PWRDZx10/mog9pfW/LU1UgJdDjT\nWfjgBVt4fZo+xNtBuXfNsgas2ciW3LT3CAuzbdFFVJb38jlfhzIEZFgsNEws6SsF\n3mfQOHEgOtmhoRllIEtYHDqFOE+q8xmZxgbC0g1re0UxrS8sYPA4Ip3DDfmIuXSY\n3OUMkh8tHvYnjFOYbpWSiyptloJq+7fVmpHQ4Ur3YvHXiugPjsScwcpXvojf+ccs\nKGTaKJw/MYaV/N0OmUvRwOAekMcenzUYOjb2vw9xU6lMa4x7AGU=\n=rwlj\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3d57bc115c6ec8564149cfbde2ee32ec4644c6c8",
          "sha": "3d57bc115c6ec8564149cfbde2ee32ec4644c6c8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3d57bc115c6ec8564149cfbde2ee32ec4644c6c8"
        }
      ],
      "message": "validation: Add SpendBlock function\n\nMove the BIP30 checks from ConnectBlock to a new SpendBlock method.\nThis is a move-only change, more content to SpendBlock is added in the\nnext commits. The goal is to move logic requiring access to the\nCCoinsViewCache out of ConnectBlock and to the new SpendBlock method.\nSpendBlock will in future handle all UTXO set interactions that\npreviously took place in ConnectBlock.\n\nBy returning early in case of a BIP30 validation failure, an\nadditional failure check for an invalid block reward in case of its\nfailure is left out.\n\nCallers of ConnectBlock now also need to call SpendBlock before. This is\nenforced in a future commit by adding a CBlockUndo argument that needs\nto be passed to both.\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:01:16Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-19T20:55:59Z"
      },
      "sha": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGMxOWVmMTMzOGRjZmY3NDRkOGM2NTYxNjRkZDQ4YjBmOTcyNDFhN2I",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c19ef1338dcff744d8c656164dd48b0f97241a7b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/c19ef1338dcff744d8c656164dd48b0f97241a7b",
      "tree": {
        "sha": "c824f7ea898c5398c36651fa4de11b7820ff7f2d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c824f7ea898c5398c36651fa4de11b7820ff7f2d"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree c824f7ea898c5398c36651fa4de11b7820ff7f2d\nparent 2be3c59151bcb840eb8cbd045a3dada6775ebc9e\nauthor TheCharlatan <seb.kung@gmail.com> 1745146123 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233278 +0200\n\nvalidation: Move SetBestBlock out of ConnectBlock\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJX4ACgkQm3m0VpHb\nQXP2MA//X8CvoQ+rWLidpAksAeHuAp5GILupaorLg0TWDPr5IXEckh4gn+JzIJ5c\nbKXFy/X8M162SFgozzmZ4arRPk2XRelUejphQZM4xzQMS15ScVLtx1ImhSX0JRS8\npoFwjveqnI3ZqL9m65KorpEkjawYjLdVFadG3ImauxMAm6VpSWn6SK2Nn18c+t2t\n1o3QKuxQDn+CZFLhCkHtBlRqFcX1S5vjlCif6WcablR+gztl0mOs67LQkOuqV7iL\n5qnN+fdvPx6yzVYOFBjdvU2Yx5AQIzuxYiNMh7cDkmunB2oZZVpnvJ89MQcFhTWZ\nFYzeXqwFH7RSKXqsVPhc0YW3CJzJB4f0/ruXSpNboOl/Aym9e+SLVNO6GtPhGYe/\nmpbuglRRqd6FARWStajlEdR/YJQNDtZxZMfjSYeDAZJfwP1XW2hNjXYzO8pVvi2t\nhDy1AD18n6cZVNEnMWlE6Lue3Hq34iwIt2StDbuVkc84//E2GT0H6yD8RciL2bwC\n+w502uwSM8lFdU+F9p9dZdUPnS8MDKAhUuhBc1Qv11Dj+DlZiGyq2nrj0cDIhgKy\nXQj5gi5sQdNsYn4vknHpmd27k/pLA/PYa+NpXnO9F67yo6VL/j0LScdD5jZD6EbN\nt+wSbZ5jO9oS5i5mqCTbLimQMok97n2RmwY9Wo8I5eCZpueCPGU=\n=R5fN\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
          "sha": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2be3c59151bcb840eb8cbd045a3dada6775ebc9e"
        }
      ],
      "message": "validation: Move SetBestBlock out of ConnectBlock\n\nThis is a part of a series of commits for removing access to the\nCCoinsViewCache in consensus verification functions. The goal is to\nallow calling verification functions with pre-fetched, or a user-defined\nset of coins.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:01:18Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-20T10:48:43Z"
      },
      "sha": "c19ef1338dcff744d8c656164dd48b0f97241a7b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc0OTI5MDRjZmQ2ZTA0NWFkNjlkZjEyYzdhNmFkMmI2YzYwNWZlNzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7492904cfd6e045ad69df12c7a6ad2b6c605fe74",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7492904cfd6e045ad69df12c7a6ad2b6c605fe74",
      "tree": {
        "sha": "bd65663caf0770fddd96768f1a3640331c758f29",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bd65663caf0770fddd96768f1a3640331c758f29"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree bd65663caf0770fddd96768f1a3640331c758f29\nparent c19ef1338dcff744d8c656164dd48b0f97241a7b\nauthor TheCharlatan <seb.kung@gmail.com> 1744977596 +0200\ncommitter TheCharlatan <seb.kung@gmail.com> 1745233281 +0200\n\nvalidation: Move coin existence and spend check to SpendBlock\n\nMove the remaining UTXO-related operations from ConnectBlock to\nSpendBlock. This includes moving the existence check, the UpdateCoins\ncall, and CBlockUndo generation.\n\nConnectBlock now takes a pre-populated CBlockUndo as an argument and no\nlonger accesses or manipulates the UTXO set.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCgAdFiEE8s/Eq9C5nYN+67fQm3m0VpHbQXMFAmgGJYEACgkQm3m0VpHb\nQXPPOxAAr20+LBWmhPfOOkU969gclgQFTwkXufX8XWQDDAlNSWkoVBygxkjuy4l+\n4FJfKPfCW5eCh6uCwlA/QedgTZbX13xtSol/F+Gynl1BHmYbS40dbU/qf6Vb8DcK\nuN3ob42fOrJerPwaWf02+yVApeXKsNpF6og59FU78WWpTVVXpbzapcK+6rp3uqJ0\nwAZKX8QYPUVc1SwE7VibXzRI5hGZjtRtkBa1bA615odEpYjbJoVGFUcRNp536Wvu\nZ3QarXzM9VOgFkdrWyoYYF3+vBK0qgm2Co/snTlEQSv0lziYlrwREpUs8SPcqS23\nTxkgaDnc4g6re3RRB5MkKlZaNd0M3hxmO1ggrqR906J+PdFw89IP9S9LmxS7fj+n\nsRZ+v++6G9zQluNR8Jajy8h4ZGkTsGOlw7iHPtzKtellOjUgjPImWvmyNjofvxuU\nniKHIQEtHIjsQv8sP493K8Uv868qeG6wZnb6Jpxppzmcgogj9WBaUNFYhxUV9v3w\nvR9c+zC4JauAuy0n8nScYDXl1vkRIflvZKd9Iubil0IE0jtcqji9TcNr4AuSfKpT\nKpkpBBui+6EhtRAlQZ5/FiOzFhIdeNu2zrLhCFKJQ5XFZd0WVxnqhHbqQYDpiu/T\nzNtBedgiMkyf2UHh3IbjjPIqL0C11IbHUkoQpq+lHLdT+VU3ddI=\n=p3NV\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c19ef1338dcff744d8c656164dd48b0f97241a7b",
          "sha": "c19ef1338dcff744d8c656164dd48b0f97241a7b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c19ef1338dcff744d8c656164dd48b0f97241a7b"
        }
      ],
      "message": "validation: Move coin existence and spend check to SpendBlock\n\nMove the remaining UTXO-related operations from ConnectBlock to\nSpendBlock. This includes moving the existence check, the UpdateCoins\ncall, and CBlockUndo generation.\n\nConnectBlock now takes a pre-populated CBlockUndo as an argument and no\nlonger accesses or manipulates the UTXO set.",
      "committer": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-21T11:01:21Z"
      },
      "author": {
        "name": "TheCharlatan",
        "email": "seb.kung@gmail.com",
        "date": "2025-04-18T11:59:56Z"
      },
      "sha": "7492904cfd6e045ad69df12c7a6ad2b6c605fe74"
    },
    {
      "event": "commented",
      "id": 2818389716,
      "node_id": "IC_kwDOABII586n_TbU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2818389716",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:15:49Z",
      "updated_at": "2025-04-21T13:15:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32317.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#issuecomment-2818389716",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32317"
    },
    {
      "event": "labeled",
      "id": 17338317960,
      "node_id": "LE_lADOABII586zUH0-zwAAAAQJcbyI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17338317960",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:15:57Z",
      "label": {
        "name": "Validation",
        "color": "6060aa"
      }
    },
    {
      "event": "renamed",
      "id": 17338318896,
      "node_id": "RTE_lADOABII586zUH0-zwAAAAQJccAw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17338318896",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T13:16:03Z",
      "rename": {
        "from": "kernel: Seperate UTXO set access from validation functions",
        "to": "kernel: Separate UTXO set access from validation functions"
      }
    },
    {
      "event": "reviewed",
      "id": 2781269268,
      "node_id": "PRR_kwDOABII586lxs0U",
      "url": null,
      "actor": null,
      "commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#pullrequestreview-2781269268",
      "submitted_at": "2025-04-21T13:44:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052401069",
      "pull_request_review_id": 2781269268,
      "id": 2052401069,
      "node_id": "PRRC_kwDOABII5856VSet",
      "diff_hunk": "@@ -709,6 +709,9 @@ class Chainstate\n     bool ConnectBlock(const CBlock& block, BlockValidationState& state, CBlockIndex* pindex,\n                       CCoinsViewCache& view, bool fJustCheck = false) EXCLUSIVE_LOCKS_REQUIRED(cs_main);\n \n+    bool SpendBlock(const CBlock& block, const CBlockIndex* pindex, const uint256& block_hash,",
      "path": "src/validation.h",
      "position": 9,
      "original_position": 4,
      "commit_id": "7492904cfd6e045ad69df12c7a6ad2b6c605fe74",
      "original_commit_id": "2be3c59151bcb840eb8cbd045a3dada6775ebc9e",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 2be3c59151bcb840eb8cbd045a3dada6775ebc9e \"validation: Add SpendBlock function\": this or the final commit would be a good time to document both `SpendBlock` and `ConnectBlock`.",
      "created_at": "2025-04-21T13:44:14Z",
      "updated_at": "2025-04-21T13:44:43Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32317#discussion_r2052401069",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052401069"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32317"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 712,
      "original_line": 712,
      "side": "RIGHT"
    }
  ]
}