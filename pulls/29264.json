{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264",
    "id": 1683625342,
    "node_id": "PR_kwDOABII585kWhV-",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/29264",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/29264.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/29264.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ee36a888bea63f8987bdde101b7b69eb614d78be",
    "number": 29264,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "Add max_tx_weight to transaction funding options",
    "user": {
      "login": "instagibbs",
      "id": 5767891,
      "node_id": "MDQ6VXNlcjU3Njc4OTE=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/instagibbs",
      "html_url": "https://github.com/instagibbs",
      "followers_url": "https://api.github.com/users/instagibbs/followers",
      "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
      "organizations_url": "https://api.github.com/users/instagibbs/orgs",
      "repos_url": "https://api.github.com/users/instagibbs/repos",
      "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/instagibbs/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This allows a transaction's weight to be bound under\r\n a certain weight if possible an desired. This\r\ncan be beneficial for future RBF attempts, or\r\nwhenever a more restricted spend topology is\r\ndesired.\r\n\r\nSee https://delvingbitcoin.org/t/lightning-transactions-with-v3-and-ephemeral-anchors/418/11?u=instagibbs for more discussion.\r\n\r\nSeeking concept ACK and maybe some help on approach for testing.",
    "labels": [
      {
        "id": 955867938,
        "node_id": "MDU6TGFiZWw5NTU4Njc5Mzg=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Needs%20rebase",
        "name": "Needs rebase",
        "description": "",
        "color": "cccccc",
        "default": false
      },
      {
        "id": 5334691551,
        "node_id": "LA_kwDOABII588AAAABPfju3w",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/CI%20failed",
        "name": "CI failed",
        "description": "",
        "color": "cccccc",
        "default": false
      }
    ],
    "created_at": "2024-01-17T20:24:10Z",
    "updated_at": "2025-03-08T07:37:11Z",
    "closed_at": "2024-03-01T14:54:50Z",
    "mergeable": false,
    "mergeable_state": "dirty",
    "merged": false,
    "merge_commit_sha": "dd88342147df15f84a1c2100dfbb297164e8a2cf",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "instagibbs:2024-01-max-tx-weight",
      "ref": "2024-01-max-tx-weight",
      "sha": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 13910191,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMzkxMDE5MQ==",
        "name": "bitcoin",
        "full_name": "instagibbs/bitcoin",
        "owner": {
          "login": "instagibbs",
          "id": 5767891,
          "node_id": "MDQ6VXNlcjU3Njc4OTE=",
          "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/instagibbs",
          "html_url": "https://github.com/instagibbs",
          "followers_url": "https://api.github.com/users/instagibbs/followers",
          "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
          "organizations_url": "https://api.github.com/users/instagibbs/orgs",
          "repos_url": "https://api.github.com/users/instagibbs/repos",
          "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/instagibbs/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/instagibbs/bitcoin",
        "description": "Bitcoin integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/instagibbs/bitcoin",
        "archive_url": "https://api.github.com/repos/instagibbs/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/instagibbs/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/instagibbs/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/instagibbs/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/instagibbs/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/instagibbs/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/instagibbs/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/instagibbs/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/instagibbs/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/instagibbs/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/instagibbs/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/instagibbs/bitcoin/events",
        "forks_url": "https://api.github.com/repos/instagibbs/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/instagibbs/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/instagibbs/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/instagibbs/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/instagibbs/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/instagibbs/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/instagibbs/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/instagibbs/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/instagibbs/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/instagibbs/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/instagibbs/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/instagibbs/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/instagibbs/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/instagibbs/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/instagibbs/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:instagibbs/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/instagibbs/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/instagibbs/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/instagibbs/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/instagibbs/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/instagibbs/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/instagibbs/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/instagibbs/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/instagibbs/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/instagibbs/bitcoin/hooks",
        "svn_url": "https://github.com/instagibbs/bitcoin",
        "homepage": "http://www.bitcoin.org",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 3,
        "watchers_count": 3,
        "size": 254531,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-03T16:43:22Z",
        "created_at": "2013-10-27T20:56:53Z",
        "updated_at": "2025-01-06T10:52:54Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "03752444cd54df05a731557968d5a9f33a55c55c",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36890,
        "stargazers_count": 82373,
        "watchers_count": 82373,
        "size": 276250,
        "default_branch": "master",
        "open_issues_count": 680,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-07T14:08:28Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-03-08T07:40:42Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
      }
    },
    "author_association": "MEMBER",
    "draft": true,
    "additions": 102,
    "deletions": 24,
    "changed_files": 8,
    "commits": 2,
    "review_comments": 49,
    "comments": 6
  },
  "events": [
    {
      "event": "commented",
      "id": 1896633814,
      "node_id": "IC_kwDOABII585xDFXW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896633814",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-17T20:24:13Z",
      "updated_at": "2024-01-23T22:22:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/29264).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Stale ACK | [murchandamus](https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1833400688) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#28985](https://github.com/bitcoin/bitcoin/pull/28985) (Avoid changeless input sets when SFFO is active by murchandamus)\n* [#28560](https://github.com/bitcoin/bitcoin/pull/28560) (wallet, rpc: `FundTransaction` refactor by josibake)\n* [#28201](https://github.com/bitcoin/bitcoin/pull/28201) (Silent Payments: sending by josibake)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1896633814",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264"
    },
    {
      "event": "labeled",
      "id": 11516810195,
      "node_id": "LE_lADOABII5858Y-NyzwAAAAKudJPT",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11516810195",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-17T21:44:28Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 1896912004,
      "node_id": "IC_kwDOABII585xEJSE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1896912004",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-17T21:44:29Z",
      "updated_at": "2024-01-17T21:44:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n\n🚧 At least one of the CI tasks failed. Make sure to run all tests locally, according to the\ndocumentation.\n\nPossibly this is due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/20589487266</sub>",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1896912004",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264"
    },
    {
      "event": "review_requested",
      "id": 11522869878,
      "node_id": "RRE_lADOABII5858Y-NyzwAAAAKu0Qp2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11522869878",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T09:48:08Z",
      "requested_reviewer": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 11522870615,
      "node_id": "RRE_lADOABII5858Y-NyzwAAAAKu0Q1X",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11522870615",
      "actor": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-18T09:48:12Z",
      "requested_reviewer": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 1829286044,
      "node_id": "PRR_kwDOABII585tCLCc",
      "url": null,
      "actor": null,
      "commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1829286044",
      "submitted_at": "2024-01-18T10:00:16Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "reviewed",
      "id": 1829800323,
      "node_id": "PRR_kwDOABII585tEImD",
      "url": null,
      "actor": null,
      "commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK, but instead of bailing immediately, it would be better to extend the conditions that immediately return a result to also require adhering to the max_weight.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1829800323",
      "submitted_at": "2024-01-18T14:26:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "reviewed",
      "id": 1830384740,
      "node_id": "PRR_kwDOABII585tGXRk",
      "url": null,
      "actor": null,
      "commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Continuing…\r\n\r\nGot some more suggestions how you can give Knapsack a bit of a fighting chance, although we should get rid of Knapsack instead of improving it. \r\n\r\nAlso, Knapsack initializes its result with returning the entire UTXO pool, so you might want need to change that in case that’s more than `max_weight` to either be empty or fail before returning.",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1830384740",
      "submitted_at": "2024-01-18T19:24:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11540294628,
      "node_id": "HRFPE_lADOABII5858Y-NyzwAAAAKv2uvk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11540294628",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "35bc6494d3fd8f8e4e84701d035871289ef46099",
      "commit_url": "https://api.github.com/repos/instagibbs/bitcoin/commits/35bc6494d3fd8f8e4e84701d035871289ef46099",
      "created_at": "2024-01-19T17:38:32Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11540352662,
      "node_id": "HRFPE_lADOABII5858Y-NyzwAAAAKv286W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11540352662",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "commit_url": "https://api.github.com/repos/instagibbs/bitcoin/commits/069c1652ed22b5e22537f63946cedd6c68487b22",
      "created_at": "2024-01-19T17:43:55Z"
    },
    {
      "event": "reviewed",
      "id": 1833400688,
      "node_id": "PRR_kwDOABII585tR3lw",
      "url": null,
      "actor": null,
      "commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 069c1652ed22b5e22537f63946cedd6c68487b22\r\n\r\nThanks for cleanly distinguishing `max_tx_weight` and `max_input_weight`!",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1833400688",
      "submitted_at": "2024-01-19T18:50:51Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdiZmM4MGI3MGUzOTU1YzJjM2I2ZjgyMGY1MWE3ZDhkNDVhYWZmOGU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "tree": {
        "sha": "c75a80b0993112f623b0df3e297a8411321832af",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c75a80b0993112f623b0df3e297a8411321832af"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/c818607ed59eb87be65b558f34bd6df049f6b238",
          "sha": "c818607ed59eb87be65b558f34bd6df049f6b238",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/c818607ed59eb87be65b558f34bd6df049f6b238"
        }
      ],
      "message": "Add max_tx_weight to transaction funding options\n\nThis allows a transaction's weight to be bound under\n a certain weight if possible an desired. This\ncan be beneficial for future RBF attempts, or\nwhenever a more restricted spend topology is\ndesired.",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-01-19T19:57:06Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-01-17T20:21:21Z"
      },
      "sha": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 11541584024,
      "node_id": "HRFPE_lADOABII5858Y-NyzwAAAAKv7piY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11541584024",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "commit_url": "https://api.github.com/repos/instagibbs/bitcoin/commits/7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "created_at": "2024-01-19T19:57:17Z"
    },
    {
      "event": "commented",
      "id": 1901026758,
      "node_id": "IC_kwDOABII585xT13G",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1901026758",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-19T19:58:54Z",
      "updated_at": "2024-01-19T19:58:54Z",
      "author_association": "MEMBER",
      "body": "fixed up the fuzz test, which was attempting larger than `MAX_STANDARD_TX_WEIGHT` coins and not actually rejecting them as they should have previously, causing fuzz failure. Invariants in test should work now.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1901026758",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264"
    },
    {
      "event": "reviewed",
      "id": 1833647335,
      "node_id": "PRR_kwDOABII585tSzzn",
      "url": null,
      "actor": null,
      "commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1833647335",
      "submitted_at": "2024-01-19T20:38:36Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGVlMzZhODg4YmVhNjNmODk4N2JkZGUxMDFiN2I2OWViNjE0ZDc4YmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ee36a888bea63f8987bdde101b7b69eb614d78be",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ee36a888bea63f8987bdde101b7b69eb614d78be",
      "tree": {
        "sha": "330c29a5d37bbeb1d2fd39438af2b46ce6e345d4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/330c29a5d37bbeb1d2fd39438af2b46ce6e345d4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
          "sha": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e"
        }
      ],
      "message": "fixups",
      "committer": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-01-23T20:02:27Z"
      },
      "author": {
        "name": "Greg Sanders",
        "email": "gsanders87@gmail.com",
        "date": "2024-01-23T20:02:27Z"
      },
      "sha": "ee36a888bea63f8987bdde101b7b69eb614d78be"
    },
    {
      "event": "reviewed",
      "id": 1839834283,
      "node_id": "PRR_kwDOABII585tqaSr",
      "url": null,
      "actor": null,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1839834283",
      "submitted_at": "2024-01-23T20:09:47Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "reviewed",
      "id": 1839842692,
      "node_id": "PRR_kwDOABII585tqcWE",
      "url": null,
      "actor": null,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "",
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1839842692",
      "submitted_at": "2024-01-23T20:29:28Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "commented",
      "id": 1907087784,
      "node_id": "IC_kwDOABII585xq9mo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1907087784",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-23T23:30:04Z",
      "updated_at": "2024-01-23T23:30:04Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--cf906140f33d8803c4a75a2196329ecb-->\n🐙 This pull request conflicts with the target branch and [needs rebase](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#rebasing-changes).\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1907087784",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264"
    },
    {
      "event": "labeled",
      "id": 11577186499,
      "node_id": "LE_lADOABII5858Y-NyzwAAAAKyDdjD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11577186499",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-23T23:30:04Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "reviewed",
      "id": 1840770591,
      "node_id": "PRR_kwDOABII585tt-4f",
      "url": null,
      "actor": null,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1840770591",
      "submitted_at": "2024-01-24T08:42:44Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "reviewed",
      "id": 1843034369,
      "node_id": "PRR_kwDOABII585t2nkB",
      "url": null,
      "actor": null,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1843034369",
      "submitted_at": "2024-01-25T07:55:02Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "reviewed",
      "id": 1847260453,
      "node_id": "PRR_kwDOABII585uGvUl",
      "url": null,
      "actor": null,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1847260453",
      "submitted_at": "2024-01-27T20:32:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "reviewed",
      "id": 1851319667,
      "node_id": "PRR_kwDOABII585uWOVz",
      "url": null,
      "actor": null,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#pullrequestreview-1851319667",
      "submitted_at": "2024-01-30T14:33:00Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
    },
    {
      "event": "convert_to_draft",
      "id": 11777654925,
      "node_id": "CTDE_lADOABII5858Y-NyzwAAAAK-AMCN",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11777654925",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-12T17:27:08Z"
    },
    {
      "event": "commented",
      "id": 1939199159,
      "node_id": "IC_kwDOABII585zldS3",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1939199159",
      "actor": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-02-12T17:27:33Z",
      "updated_at": "2024-02-12T17:27:33Z",
      "author_association": "MEMBER",
      "body": "I'm not looking to push this forward for now, if someone wants to take it over be my guest. Draft for now.",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1939199159",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264"
    },
    {
      "event": "commented",
      "id": 1972848345,
      "node_id": "IC_kwDOABII5851l0bZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/1972848345",
      "actor": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T09:41:23Z",
      "updated_at": "2024-03-08T09:20:13Z",
      "author_association": "MEMBER",
      "body": "> I'm not looking to push this forward for now, if someone wants to take it over be my guest. Draft for now.\r\n\r\nI opened #29523, which took over from this, and addressed the review comments here.",
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#issuecomment-1972848345",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29264"
    },
    {
      "event": "closed",
      "id": 11980516686,
      "node_id": "CE_lADOABII5858Y-NyzwAAAALKGC1O",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/11980516686",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-03-01T14:54:51Z"
    },
    {
      "event": "referenced",
      "id": 13544263831,
      "node_id": "REFE_lADOABII5858Y-NyzwAAAAMnTRCX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13544263831",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "efbf4e71ce8e3cd49ccdfb5e55e14fa4b338453c",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/efbf4e71ce8e3cd49ccdfb5e55e14fa4b338453c",
      "created_at": "2024-07-17T22:28:09Z"
    },
    {
      "event": "locked",
      "id": 16641476608,
      "node_id": "LOE_lADOABII5858Y-NyzwAAAAPf6MgA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16641476608",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-08T07:37:11Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322",
      "pull_request_review_id": 1829286044,
      "id": 1457194322,
      "node_id": "PRRC_kwDOABII585W2wVS",
      "diff_hunk": "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 and 400000\"));",
      "path": "src/wallet/rpc/spend.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: replace magic number with `MAX_STANDARD_TX_WEIGHT`",
      "created_at": "2024-01-18T09:52:56Z",
      "updated_at": "2024-01-18T10:00:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457194322",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457194322"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1497,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003",
      "pull_request_review_id": 1829286044,
      "id": 1457200003,
      "node_id": "PRRC_kwDOABII585W2xuD",
      "diff_hunk": "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": null,
      "user": {
        "login": "glozow",
        "id": 25183001,
        "node_id": "MDQ6VXNlcjI1MTgzMDAx",
        "avatar_url": "https://avatars.githubusercontent.com/u/25183001?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/glozow",
        "html_url": "https://github.com/glozow",
        "followers_url": "https://api.github.com/users/glozow/followers",
        "following_url": "https://api.github.com/users/glozow/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/glozow/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/glozow/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/glozow/subscriptions",
        "organizations_url": "https://api.github.com/users/glozow/orgs",
        "repos_url": "https://api.github.com/users/glozow/repos",
        "events_url": "https://api.github.com/users/glozow/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/glozow/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Would this be giving up too early? We could still find a different solution further down the function, no?",
      "created_at": "2024-01-18T09:57:18Z",
      "updated_at": "2024-01-18T10:00:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457200003",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457200003"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 341,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457506894",
      "pull_request_review_id": 1829787097,
      "id": 1457506894,
      "node_id": "PRRC_kwDOABII585W38pO",
      "diff_hunk": "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457200003,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "yeah I was mostly hot-patching here, making sure it never returns too big(because it did very often)",
      "created_at": "2024-01-18T14:18:19Z",
      "updated_at": "2024-01-18T14:18:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457506894",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457506894"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 341,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457513036",
      "pull_request_review_id": 1829800323,
      "id": 1457513036,
      "node_id": "PRRC_kwDOABII585W3-JM",
      "diff_hunk": "@@ -322,6 +322,8 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     for (const OutputGroup& group : groups) {\n         if (group.GetSelectionAmount() == nTargetValue) {\n             result.AddInput(group);\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Instead, how about:\r\n\r\n```diff\r\n-       if (group.GetSelectionAmount() == nTargetValue) {\r\n+       if (group.GetSelectionAmount() == nTargetValue && group.m_weight <= max_weight) {\r\n```",
      "created_at": "2024-01-18T14:22:22Z",
      "updated_at": "2024-01-18T14:26:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457513036",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457513036"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": 322,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 326,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457871015",
      "pull_request_review_id": 1830384740,
      "id": 1457871015,
      "node_id": "PRRC_kwDOABII585W5Vin",
      "diff_hunk": "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In line 331:\r\n\r\n```diff\r\n-        } else if (!lowest_larger || group.GetSelectionAmount() < lowest_larger->GetSelectionAmount()) {\r\n+        } else if (group.m_weight <= max_weight && (!lowest_larger || group.GetSelectionAmount() < lowest_larger->GetSelectionAmount())) {      \r\n```",
      "created_at": "2024-01-18T19:05:57Z",
      "updated_at": "2024-01-18T19:24:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457871015",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457871015"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457876258",
      "pull_request_review_id": 1830384740,
      "id": 1457876258,
      "node_id": "PRRC_kwDOABII585W5W0i",
      "diff_hunk": "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 67,
      "original_position": 67,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Does 0 even ever make sense?",
      "created_at": "2024-01-18T19:11:43Z",
      "updated_at": "2024-01-18T19:24:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457876258",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457876258"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1496,
      "original_line": 1496,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457887218",
      "pull_request_review_id": 1830384740,
      "id": 1457887218,
      "node_id": "PRRC_kwDOABII585W5Zfy",
      "diff_hunk": "@@ -359,6 +367,9 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I would suggest that you pass the `max_weight` as an additional parameter to `ApproximateBestSubset(…)` and keep track of the current weight (e.g. `nTotalWeight`) in parallel to `nTotal` and only designate a new `nBest` and `vfBest` if it’s not just better but also a permitted weight:\r\n\r\n```diff\r\n-                        if (nTotal < nBest)\r\n+                        if (nTotal < nBest && nTotalWeight <= max_weight)                        \r\n```\r\n\r\nfor extra credit you could also deselect not just after exceeding the target but also when you exceed max_weight",
      "created_at": "2024-01-18T19:23:08Z",
      "updated_at": "2024-01-18T19:24:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1457887218",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1457887218"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459376293",
      "pull_request_review_id": 1833294195,
      "id": 1459376293,
      "node_id": "PRRC_kwDOABII585W_FCl",
      "diff_hunk": "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 67,
      "original_position": 67,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457876258,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "as much a sense as \"1\". Could have minimal relay size here instead?",
      "created_at": "2024-01-19T17:14:35Z",
      "updated_at": "2024-01-19T17:14:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459376293",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459376293"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1496,
      "original_line": 1496,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420366",
      "pull_request_review_id": 1833338577,
      "id": 1459420366,
      "node_id": "PRRC_kwDOABII585W_PzO",
      "diff_hunk": "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 14,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457200003,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "should be mitigated?",
      "created_at": "2024-01-19T17:38:34Z",
      "updated_at": "2024-01-19T17:38:34Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420366",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420366"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 341,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420447",
      "pull_request_review_id": 1833338654,
      "id": 1459420447,
      "node_id": "PRRC_kwDOABII585W_P0f",
      "diff_hunk": "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 and 400000\"));",
      "path": "src/wallet/rpc/spend.cpp",
      "position": null,
      "original_position": 68,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457194322,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2024-01-19T17:38:37Z",
      "updated_at": "2024-01-19T17:38:37Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420447",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420447"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1497,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420556",
      "pull_request_review_id": 1833338744,
      "id": 1459420556,
      "node_id": "PRRC_kwDOABII585W_P2M",
      "diff_hunk": "@@ -322,6 +322,8 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     for (const OutputGroup& group : groups) {\n         if (group.GetSelectionAmount() == nTargetValue) {\n             result.AddInput(group);\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457513036,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "done",
      "created_at": "2024-01-19T17:38:41Z",
      "updated_at": "2024-01-19T17:38:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420556",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420556"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": 322,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 326,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420625",
      "pull_request_review_id": 1833338870,
      "id": 1459420625,
      "node_id": "PRRC_kwDOABII585W_P3R",
      "diff_hunk": "@@ -335,12 +337,18 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n+        // We may still fail if max is low",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 13,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457871015,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "taken",
      "created_at": "2024-01-19T17:38:44Z",
      "updated_at": "2024-01-19T17:38:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420625",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420625"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 340,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420739",
      "pull_request_review_id": 1833339041,
      "id": 1459420739,
      "node_id": "PRRC_kwDOABII585W_P5D",
      "diff_hunk": "@@ -359,6 +367,9 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 32,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457887218,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "did the minimal suggested work to give knapsack a fighting chance",
      "created_at": "2024-01-19T17:38:49Z",
      "updated_at": "2024-01-19T17:38:49Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459420739",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459420739"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459477415",
      "pull_request_review_id": 1833394346,
      "id": 1459477415,
      "node_id": "PRRC_kwDOABII585W_dun",
      "diff_hunk": "@@ -1472,6 +1490,18 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 67,
      "original_position": 67,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "8ac0dcdeadd84aefe11e5ce62f591e9a8d404e55",
      "in_reply_to_id": 1457876258,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "At second glance, lemme retract my comment. It doesn’t really hurt to allow values down to 0, even if that is less than a sensible use of that parameter. Might be helpful in tests to be able to restrict it fairly low.",
      "created_at": "2024-01-19T18:12:09Z",
      "updated_at": "2024-01-19T18:12:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459477415",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459477415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1496,
      "original_line": 1496,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459483691",
      "pull_request_review_id": 1833400688,
      "id": 1459483691,
      "node_id": "PRRC_kwDOABII585W_fQr",
      "diff_hunk": "@@ -74,7 +74,7 @@ struct {\n static const size_t TOTAL_TRIES = 100000;\n \n util::Result<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change,\n-                                             int max_weight)\n+                                             int max_input_weight)",
      "path": "src/wallet/coinselection.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ah, yeah `max_input_weight` is a much better name. Thanks!",
      "created_at": "2024-01-19T18:15:41Z",
      "updated_at": "2024-01-19T18:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459483691",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459483691"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 77,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459526141",
      "pull_request_review_id": 1833400688,
      "id": 1459526141,
      "node_id": "PRRC_kwDOABII585W_pn9",
      "diff_hunk": "@@ -335,30 +338,39 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n         if (!lowest_larger) return util::Error();\n         result.AddInput(*lowest_larger);\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     // Solve subset sum by stochastic approximation\n     std::sort(applicable_groups.begin(), applicable_groups.end(), descending);\n     std::vector<char> vfBest;\n     CAmount nBest;\n \n-    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest);\n+    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest, max_input_weight);\n     if (nBest != nTargetValue && nTotalLower >= nTargetValue + change_target) {\n-        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest);\n+        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest, max_input_weight);\n     }\n \n     // If we have a bigger coin and (either the stochastic approximation didn't find a good solution,\n     //                                   or the next bigger coin is closer), return the bigger coin\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 142,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don’t think we can ever hit this `if` block since we only set `lowest_larger` when it’s weight is less than the max_input_weight.",
      "created_at": "2024-01-19T18:36:16Z",
      "updated_at": "2024-01-19T18:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459526141",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459526141"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 373,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459539171",
      "pull_request_review_id": 1833400688,
      "id": 1459539171,
      "node_id": "PRRC_kwDOABII585W_szj",
      "diff_hunk": "@@ -367,13 +379,16 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         }\n \n         // If the result exceeds the maximum allowed size, return closest UTXO above the target\n-        if (result.GetWeight() > max_weight) {\n+        if (result.GetWeight() > max_input_weight) {\n             // No coin above target, nothing to do.\n             if (!lowest_larger) return ErrorMaxWeightExceeded();\n \n             // Return closest UTXO above target\n             result.Clear();\n             result.AddInput(*lowest_larger);\n+\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 160,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don’t think this condition can be hit. \r\n\r\nAFAICT, there is only be a single scenario in which `vfBest` can contain an input selection that is in excess of the `max_input_weight`: `ApproximateBestSubset` initializes `vfBest` with all of `applicable_groups` without checking the weight. If it then never finds a better input selection throughout the exploration, it would be possible that it returns an overweight `vfBest`. Since `lowest_larger` is only set when it adheres to the weight limit, we either have replaced `vfBest` with an adequate `lowest_larger` at this point, or have already returned `ErrorMaxWeightExceeded`.",
      "created_at": "2024-01-19T18:44:09Z",
      "updated_at": "2024-01-19T18:50:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459539171",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459539171"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": 390,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665430",
      "pull_request_review_id": 1833584025,
      "id": 1459665430,
      "node_id": "PRRC_kwDOABII585XALoW",
      "diff_hunk": "@@ -335,30 +338,39 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n         if (!lowest_larger) return util::Error();\n         result.AddInput(*lowest_larger);\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     // Solve subset sum by stochastic approximation\n     std::sort(applicable_groups.begin(), applicable_groups.end(), descending);\n     std::vector<char> vfBest;\n     CAmount nBest;\n \n-    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest);\n+    ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue, vfBest, nBest, max_input_weight);\n     if (nBest != nTargetValue && nTotalLower >= nTargetValue + change_target) {\n-        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest);\n+        ApproximateBestSubset(rng, applicable_groups, nTotalLower, nTargetValue + change_target, vfBest, nBest, max_input_weight);\n     }\n \n     // If we have a bigger coin and (either the stochastic approximation didn't find a good solution,\n     //                                   or the next bigger coin is closer), return the bigger coin\n     if (lowest_larger &&\n         ((nBest != nTargetValue && nBest < nTargetValue + change_target) || lowest_larger->GetSelectionAmount() <= nBest)) {\n         result.AddInput(*lowest_larger);\n+\n+        // We may still fail if max is low\n+        if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 142,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": 1459526141,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "makes sense, removed",
      "created_at": "2024-01-19T19:57:32Z",
      "updated_at": "2024-01-19T19:57:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459665430",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665430"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 373,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665529",
      "pull_request_review_id": 1833584158,
      "id": 1459665529,
      "node_id": "PRRC_kwDOABII585XALp5",
      "diff_hunk": "@@ -367,13 +379,16 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         }\n \n         // If the result exceeds the maximum allowed size, return closest UTXO above the target\n-        if (result.GetWeight() > max_weight) {\n+        if (result.GetWeight() > max_input_weight) {\n             // No coin above target, nothing to do.\n             if (!lowest_larger) return ErrorMaxWeightExceeded();\n \n             // Return closest UTXO above target\n             result.Clear();\n             result.AddInput(*lowest_larger);\n+\n+            // We may still fail if max is low\n+            if (result.GetWeight() > max_input_weight) return ErrorMaxWeightExceeded();",
      "path": "src/wallet/coinselection.cpp",
      "position": null,
      "original_position": 160,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": 1459539171,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "makes sense, removed",
      "created_at": "2024-01-19T19:57:35Z",
      "updated_at": "2024-01-19T19:57:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459665529",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459665529"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": 390,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 391,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459729161",
      "pull_request_review_id": 1833647335,
      "id": 1459729161,
      "node_id": "PRRC_kwDOABII585XAbMJ",
      "diff_hunk": "@@ -112,22 +112,25 @@ FUZZ_TARGET(coinselection)\n     std::vector<OutputGroup> group_all;\n     GroupCoins(fuzzed_data_provider, utxo_pool, coin_params, /*positive_only=*/false, group_all);\n \n+    // Calculate upperbound of given input weight, allow all to be selected\n+    int total_input_weight{0};",
      "path": "src/wallet/test/fuzz/coinselection.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It would be better to make `max_input_weight` a fuzzed value.",
      "created_at": "2024-01-19T20:38:36Z",
      "updated_at": "2024-01-19T20:38:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1459729161",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1459729161"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 116,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463935963",
      "pull_request_review_id": 1839834283,
      "id": 1463935963,
      "node_id": "PRRC_kwDOABII585XQePb",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": null,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "hmmm, this change to give a useful error message seems to break tests; I start getting failures in rpc_psbt.py\r\n\r\nCan I get some assistance on how this stuff is supposed to bubble up @murchandamus ",
      "created_at": "2024-01-23T20:09:47Z",
      "updated_at": "2024-01-23T20:09:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463935963",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463935963"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942221",
      "pull_request_review_id": 1839842692,
      "id": 1463942221,
      "node_id": "PRRC_kwDOABII585XQfxN",
      "diff_hunk": "@@ -799,6 +808,8 @@ RPCHelpMan fundrawtransaction()\n                                     },\n                                 },\n                              },\n+                            {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                          \"Transaction selection will fail if this can not be satisfied.\"},",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 28,
      "original_position": 28,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think you meant either \"Transaction building\" or \"Coin selection\" here:\r\n\r\n```suggestion\r\n                                                          \"Transaction building will fail if this can not be satisfied.\"},\r\n```\r\n\r\n```suggestion\r\n                                                          \"Coin selection will fail if this can not be satisfied.\"},\r\n```",
      "created_at": "2024-01-23T20:15:37Z",
      "updated_at": "2024-01-23T20:29:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463942221",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942221"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 812,
      "original_line": 812,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942824",
      "pull_request_review_id": 1839842692,
      "id": 1463942824,
      "node_id": "PRRC_kwDOABII585XQf6o",
      "diff_hunk": "@@ -1239,6 +1250,8 @@ RPCHelpMan send()\n                             {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                         },\n                     },\n+                    {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                  \"Transaction selection will fail if this can not be satisfied.\"},",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 37,
      "original_position": 37,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "As above",
      "created_at": "2024-01-23T20:16:17Z",
      "updated_at": "2024-01-23T20:29:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463942824",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463942824"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1254,
      "original_line": 1254,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463943149",
      "pull_request_review_id": 1839842692,
      "id": 1463943149,
      "node_id": "PRRC_kwDOABII585XQf_t",
      "diff_hunk": "@@ -1337,6 +1353,8 @@ RPCHelpMan sendall()\n                         {\"send_max\", RPCArg::Type::BOOL, RPCArg::Default{false}, \"When true, only use UTXOs that can pay for their own fees to maximize the output amount. When 'false' (default), no UTXO is left behind. send_max is incompatible with providing specific inputs.\"},\n                         {\"minconf\", RPCArg::Type::NUM, RPCArg::Default{0}, \"Require inputs with at least this many confirmations.\"},\n                         {\"maxconf\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"Require inputs with at most this many confirmations.\"},\n+                        {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                      \"Transaction selection will fail if this can not be satisfied.\"},",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 56,
      "original_position": 56,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "As above",
      "created_at": "2024-01-23T20:16:39Z",
      "updated_at": "2024-01-23T20:29:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463943149",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463943149"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1357,
      "original_line": 1357,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463944668",
      "pull_request_review_id": 1839842692,
      "id": 1463944668,
      "node_id": "PRRC_kwDOABII585XQgXc",
      "diff_hunk": "@@ -1679,6 +1708,8 @@ RPCHelpMan walletcreatefundedpsbt()\n                                     {\"vout_index\", RPCArg::Type::NUM, RPCArg::Optional::OMITTED, \"The zero-based output index, before a change output is added.\"},\n                                 },\n                             },\n+                            {\"max_tx_weight\", RPCArg::Type::NUM, RPCArg::Default{MAX_STANDARD_TX_WEIGHT}, \"The maximum acceptable transaction weight.\\n\"\n+                                                          \"Transaction selection will fail if this can not be satisfied.\"},",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 83,
      "original_position": 83,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "As above",
      "created_at": "2024-01-23T20:18:11Z",
      "updated_at": "2024-01-23T20:29:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463944668",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463944668"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 1712,
      "original_line": 1712,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463947916",
      "pull_request_review_id": 1839842692,
      "id": 1463947916,
      "node_id": "PRRC_kwDOABII585XQhKM",
      "diff_hunk": "@@ -112,22 +112,25 @@ FUZZ_TARGET(coinselection)\n     std::vector<OutputGroup> group_all;\n     GroupCoins(fuzzed_data_provider, utxo_pool, coin_params, /*positive_only=*/false, group_all);\n \n+    // Calculate upperbound of given input weight, allow all to be selected\n+    int total_input_weight{0};",
      "path": "src/wallet/test/fuzz/coinselection.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": 1459729161,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If you do, please also add an `assert` that checks whether the fuzzed value is greater than or equal to the result’s weight.",
      "created_at": "2024-01-23T20:21:46Z",
      "updated_at": "2024-01-23T20:29:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463947916",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463947916"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 116,
      "original_line": 116,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463954606",
      "pull_request_review_id": 1839842692,
      "id": 1463954606,
      "node_id": "PRRC_kwDOABII585XQiyu",
      "diff_hunk": "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "path": "test/functional/rpc_psbt.py",
      "position": 30,
      "original_position": 25,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "My first thought would be that we are perhaps not counting the empty witness stack of a non-witness input? :thinking: \r\n\r\nIs this a blocker that needs to be addressed first?",
      "created_at": "2024-01-23T20:28:20Z",
      "updated_at": "2024-01-23T20:29:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1463954606",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1463954606"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 209,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464525381",
      "pull_request_review_id": 1840770591,
      "id": 1464525381,
      "node_id": "PRRC_kwDOABII585XSuJF",
      "diff_hunk": "@@ -320,13 +323,13 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     Shuffle(groups.begin(), groups.end(), rng);\n \n     for (const OutputGroup& group : groups) {\n-        if (group.GetSelectionAmount() == nTargetValue) {",
      "path": "src/wallet/coinselection.cpp",
      "position": 95,
      "original_position": 95,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": null,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "suggestion, add \r\n\r\n```cpp\r\nif (group.m_weight <= max_input_weight) continue;\r\n```\r\non top of the for loop instead of checking within each condition.\r\n\r\nCurrently, you add groups that are above weight to `applicable_groups`",
      "created_at": "2024-01-24T08:42:43Z",
      "updated_at": "2024-01-24T08:42:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464525381",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464525381"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464835996",
      "pull_request_review_id": 1841248742,
      "id": 1464835996,
      "node_id": "PRRC_kwDOABII585XT5-c",
      "diff_hunk": "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "path": "test/functional/rpc_psbt.py",
      "position": 30,
      "original_position": 25,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": 1463954606,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "if this is a bit of overcounting, that's probably ok?",
      "created_at": "2024-01-24T12:21:41Z",
      "updated_at": "2024-01-24T12:21:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464835996",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464835996"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 209,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464840653",
      "pull_request_review_id": 1841256155,
      "id": 1464840653,
      "node_id": "PRRC_kwDOABII585XT7HN",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is the breakage not an actual issue: https://cirrus-ci.com/task/6124189116006400?logs=ci#L3274\r\n```bash\r\ntest_framework.authproxy.JSONRPCException: Only 4999872180 coins to cover target value of 5100000840 (-4)\r\n```",
      "created_at": "2024-01-24T12:25:42Z",
      "updated_at": "2024-01-24T12:25:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464840653",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464840653"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464842951",
      "pull_request_review_id": 1841259702,
      "id": 1464842951,
      "node_id": "PRRC_kwDOABII585XT7rH",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I can turn the error on and off locally by adding/removing the string from the error.",
      "created_at": "2024-01-24T12:27:38Z",
      "updated_at": "2024-01-24T12:27:38Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464842951",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464842951"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464860895",
      "pull_request_review_id": 1841289213,
      "id": 1464860895,
      "node_id": "PRRC_kwDOABII585XUADf",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The wallet code seems to be the only place where this pattern of `util::Error()` is used. Everywhere actual error strings are always provided.",
      "created_at": "2024-01-24T12:43:04Z",
      "updated_at": "2024-01-24T12:43:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464860895",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464860895"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464899774",
      "pull_request_review_id": 1841351906,
      "id": 1464899774,
      "node_id": "PRRC_kwDOABII585XUJi-",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The empty `util::Error()` is used to retrieve a \"no solution found for the provided inputs set\". If you specify an error message, then the wallet coin selection procedure treats it as a real error and bubble it up when no other selection algorithm succeeded.\r\n\r\nThe goal of this distinction is to differentiate between errors that should be bubbled up and coin selection algorithms' partial solutions. Remember that we are running each coin selection algorithm up to 7 times, extending the input set on every round. The \"no solution found\" return isn't definitive; it varies depending on the algorithm and the filtered coin set. That's why other errors, like the max weight exceeded, are stored and take precedence if no solution is found after running all selection rounds.\r\n\r\nI haven't gone deeper over this PR yet but the message you are adding here doesn't seems like an error. It is just describing the \"no solution found for the provided input set\" transient situation.",
      "created_at": "2024-01-24T13:16:38Z",
      "updated_at": "2024-01-24T13:39:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464899774",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464899774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464933701",
      "pull_request_review_id": 1841408077,
      "id": 1464933701,
      "node_id": "PRRC_kwDOABII585XUR1F",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> The empty util::Error() is used to retrieve a \"no solution found for the provided inputs set\". If you specify an error message, then the wallet coin selection procedure treats it as a real error and bubble it up when no other selection algorithm succeeded.\r\n\r\nOk. So then this is just a (confusing) misuse of the `Util::` API, where the wallet code is shoehorning non-error handling into an error handler.",
      "created_at": "2024-01-24T13:43:56Z",
      "updated_at": "2024-01-24T13:43:56Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464933701",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464933701"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464960277",
      "pull_request_review_id": 1841452044,
      "id": 1464960277,
      "node_id": "PRRC_kwDOABII585XUYUV",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> > The empty util::Error() is used to retrieve a \"no solution found for the provided inputs set\". If you specify an error message, then the wallet coin selection procedure treats it as a real error and bubble it up when no other selection algorithm succeeded.\r\n> \r\n> Ok. So then this is just a (confusing) misuse of the `Util::` API, where the wallet code is shoehorning non-error handling into an error handler.\r\n\r\nIdeally, we should retrieve more info within the \"no solution found\" return path and not just the string message. I was waiting until we expand the result class functionality to accept a generic error return type. E.g. having `util::Result<M, E>` would let us do something like `util::Result<SelectionResult, SelectionError>`, where `SelectionError` would contain the string msg and a severity level int value. Which would help us differentiate the different outcomes and bubble up the highest severity error (if any). I actually left a comment for this in the [code](https://github.com/bitcoin/bitcoin/blob/e69796c79c0aa202087a13ba62d9fbcc1c8754d4/src/wallet/spend.cpp#L867).",
      "created_at": "2024-01-24T14:02:50Z",
      "updated_at": "2024-01-24T14:03:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464960277",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464960277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464970743",
      "pull_request_review_id": 1841469884,
      "id": 1464970743,
      "node_id": "PRRC_kwDOABII585XUa33",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I haven't gone deeper over this PR yet but the message you are adding here doesn't seems like an error. It is just describing the \"no solution found for the provided input set\" transient situation.\r\n\r\nAre you saying it's not confusing to give insufficient funds message on failure to stay within the weight limits given? I guess that's fine for now?",
      "created_at": "2024-01-24T14:10:47Z",
      "updated_at": "2024-01-24T14:10:47Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464970743",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1464970743"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465002873",
      "pull_request_review_id": 1841522726,
      "id": 1465002873,
      "node_id": "PRRC_kwDOABII585XUit5",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> > I haven't gone deeper over this PR yet but the message you are adding here doesn't seems like an error. It is just describing the \"no solution found for the provided input set\" transient situation.\r\n> \r\n> Are you saying it's not confusing to give insufficient funds message on failure to stay within the weight limits given? I guess that's fine for now?\r\n\r\nNot really. I was only referring to this line in question. Which, in a first glance, isn't retrieving an exceeded weight limit error. Still, give me a day to review the PR in-detail and will join the efforts here.",
      "created_at": "2024-01-24T14:32:51Z",
      "updated_at": "2024-01-24T14:32:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465002873",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465002873"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465052341",
      "pull_request_review_id": 1841607229,
      "id": 1465052341,
      "node_id": "PRRC_kwDOABII585XUuy1",
      "diff_hunk": "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "path": "test/functional/rpc_psbt.py",
      "position": 30,
      "original_position": 25,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": 1463954606,
      "user": {
        "login": "murchandamus",
        "id": 4060799,
        "node_id": "MDQ6VXNlcjQwNjA3OTk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/4060799?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/murchandamus",
        "html_url": "https://github.com/murchandamus",
        "followers_url": "https://api.github.com/users/murchandamus/followers",
        "following_url": "https://api.github.com/users/murchandamus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/murchandamus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/murchandamus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/murchandamus/subscriptions",
        "organizations_url": "https://api.github.com/users/murchandamus/orgs",
        "repos_url": "https://api.github.com/users/murchandamus/repos",
        "events_url": "https://api.github.com/users/murchandamus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/murchandamus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Mh, it’s a bit of a smell if we cannot explain this.\r\nI considered input counter, empty witness stack, that we might estimate for a high-R signature in a PSBT, because we didn’t sign it, and that we sometimes get a lower `r` value in the signature and therefore one of the two values is a byte shorter. But our default address type would be at least wrapped segwit, so that would only explain a weight difference of 1. I don’t have a good idea at the moment. @achow101: Do you perhaps have an idea why this is happening?",
      "created_at": "2024-01-24T15:02:58Z",
      "updated_at": "2024-01-24T15:02:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465052341",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465052341"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 209,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465966822",
      "pull_request_review_id": 1843034369,
      "id": 1465966822,
      "node_id": "PRRC_kwDOABII585XYODm",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};\n         result.AddInput(*lowest_larger);\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;",
      "path": "src/wallet/coinselection.cpp",
      "position": 123,
      "original_position": 123,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": null,
      "user": {
        "login": "S3RK",
        "id": 1466284,
        "node_id": "MDQ6VXNlcjE0NjYyODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1466284?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/S3RK",
        "html_url": "https://github.com/S3RK",
        "followers_url": "https://api.github.com/users/S3RK/followers",
        "following_url": "https://api.github.com/users/S3RK/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/S3RK/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/S3RK/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/S3RK/subscriptions",
        "organizations_url": "https://api.github.com/users/S3RK/orgs",
        "repos_url": "https://api.github.com/users/S3RK/repos",
        "events_url": "https://api.github.com/users/S3RK/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/S3RK/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: `lowest_larger` can't be above `max_input_weight`. You already checked it above. And in other similar cases below you don't check it second time.\r\n\r\nI prefer if we filter above weight inputs once at the top of the function.",
      "created_at": "2024-01-25T07:55:02Z",
      "updated_at": "2024-01-25T07:56:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1465966822",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1465966822"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 350,
      "original_line": 350,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468635643",
      "pull_request_review_id": 1847260453,
      "id": 1468635643,
      "node_id": "PRRC_kwDOABII585XiZn7",
      "diff_hunk": "@@ -1472,6 +1490,17 @@ RPCHelpMan sendall()\n             const CAmount fee_from_size{fee_rate.GetFee(tx_size.vsize)};\n             const CAmount effective_value{total_input_value - fee_from_size};\n \n+            // Cap tx weight based on estimated size if requested\n+            if (options.exists(\"max_tx_weight\")) {\n+                const auto max_tx_weight =  options[\"max_tx_weight\"].getInt<int>();\n+                if (max_tx_weight < 0 || max_tx_weight > MAX_STANDARD_TX_WEIGHT) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Invalid parameter, max tx weight must be between 0 %d\", MAX_STANDARD_TX_WEIGHT));\n+                }\n+                if (max_tx_weight < tx_size.weight) {\n+                    throw JSONRPCError(RPC_WALLET_ERROR, strprintf(\"Requested max tx weight exceeded: %d vs %s\", options[\"max_tx_weight\"].getInt<int>(), tx_size.weight));\n+                }\n+            }",
      "path": "src/wallet/rpc/spend.cpp",
      "position": 73,
      "original_position": 73,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This does not seem to be necessary. As `sendall()` doesn't make use of the internal coin selection procedures, wouldn't make more sense to return the weight in the command result and let the user decide whether to broadcast the tx based on it?",
      "created_at": "2024-01-27T20:31:10Z",
      "updated_at": "2024-01-27T20:32:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1468635643",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1468635643"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": 1493,
      "original_start_line": 1493,
      "start_side": "RIGHT",
      "line": 1502,
      "original_line": 1502,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470160697",
      "pull_request_review_id": 1849689186,
      "id": 1470160697,
      "node_id": "PRRC_kwDOABII585XoN85",
      "diff_hunk": "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "path": "test/functional/rpc_psbt.py",
      "position": 30,
      "original_position": 25,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": 1463954606,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "would still like a good explanation for this",
      "created_at": "2024-01-29T20:20:51Z",
      "updated_at": "2024-01-29T20:20:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1470160697",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470160697"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 209,
      "original_line": 204,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470161011",
      "pull_request_review_id": 1849689644,
      "id": 1470161011,
      "node_id": "PRRC_kwDOABII585XoOBz",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "still waiting on some feedback on this point before moving forward with the PR",
      "created_at": "2024-01-29T20:21:11Z",
      "updated_at": "2024-01-29T20:21:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1470161011",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1470161011"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471245338",
      "pull_request_review_id": 1851319667,
      "id": 1471245338,
      "node_id": "PRRC_kwDOABII585XsWwa",
      "diff_hunk": "@@ -115,6 +116,8 @@ class CCoinControl\n     std::optional<uint32_t> m_locktime;\n     //! Version\n     std::optional<uint32_t> m_version;\n+    //! Caps weight of resulting tx\n+    int m_max_tx_weight{MAX_STANDARD_TX_WEIGHT};",
      "path": "src/wallet/coincontrol.h",
      "position": 13,
      "original_position": 13,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "To not add `policy/policy.h` dependency, which comes with other dependencies (`script/interpreter.h`, `script/solver.h`, etc..), would suggest to make this field optional. Treating `std::nullopt` as `MAX_STANDARD_TX_WEIGHT` internally. This is what we already do for other default values.",
      "created_at": "2024-01-30T13:46:36Z",
      "updated_at": "2024-01-30T14:33:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471245338",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471245338"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": 119,
      "original_start_line": 119,
      "start_side": "RIGHT",
      "line": 120,
      "original_line": 120,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471255355",
      "pull_request_review_id": 1851319667,
      "id": 1471255355,
      "node_id": "PRRC_kwDOABII585XsZM7",
      "diff_hunk": "@@ -174,10 +175,15 @@ struct CoinSelectionParams {\n      * 1) Received from other wallets, 2) replacing other txs, 3) that have been replaced.\n      */\n     bool m_include_unsafe_inputs = false;\n+    /**\n+     * The maximally sized transaction we are willing to make.\n+     */\n+    int32_t m_max_tx_weight{MAX_STANDARD_TX_WEIGHT};\n \n     CoinSelectionParams(FastRandomContext& rng_fast, size_t change_output_size, size_t change_spend_size,\n                         CAmount min_change_target, CFeeRate effective_feerate,\n-                        CFeeRate long_term_feerate, CFeeRate discard_feerate, size_t tx_noinputs_size, bool avoid_partial)\n+                        CFeeRate long_term_feerate, CFeeRate discard_feerate, size_t tx_noinputs_size, bool avoid_partial,\n+                        int32_t max_tx_weight=MAX_STANDARD_TX_WEIGHT)",
      "path": "src/wallet/coinselection.h",
      "position": 21,
      "original_position": 21,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": null,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Same as above, the `policy.h` dependency generates some noise on me. Would suggest to not default initialize `m_max_tx_weight`. Callers are already forced to provide the weight in the constructor.",
      "created_at": "2024-01-30T13:52:03Z",
      "updated_at": "2024-01-30T14:33:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471255355",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471255355"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": 181,
      "original_start_line": 181,
      "start_side": "RIGHT",
      "line": 186,
      "original_line": 186,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471278057",
      "pull_request_review_id": 1851319667,
      "id": 1471278057,
      "node_id": "PRRC_kwDOABII585Xsevp",
      "diff_hunk": "@@ -74,7 +74,7 @@ struct {\n static const size_t TOTAL_TRIES = 100000;\n \n util::Result<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change,\n-                                             int max_weight)\n+                                             int max_input_weight)",
      "path": "src/wallet/coinselection.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": 1459483691,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "@murchandamus, I'm not entirely sure about this naming change. At this point, we are placed at the coin selection algos level, which are situated a level below the transaction creation process. There is no concept of transaction weight here; only selection weight.",
      "created_at": "2024-01-30T14:04:36Z",
      "updated_at": "2024-01-30T14:33:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471278057",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471278057"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 77,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471333943",
      "pull_request_review_id": 1851319667,
      "id": 1471333943,
      "node_id": "PRRC_kwDOABII585XssY3",
      "diff_hunk": "@@ -335,23 +338,29 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n         for (const auto& group : applicable_groups) {\n             result.AddInput(group);\n         }\n-        return result;\n+        if (result.GetWeight() <= max_input_weight) return result;\n+\n+        // Try something else\n+        result.Clear();\n     }\n \n     if (nTotalLower < nTargetValue) {\n-        if (!lowest_larger) return util::Error();\n+        if (!lowest_larger) return util::Error{Untranslated(strprintf(\"Only %d coins to cover target value of %d\", nTotalLower, nTargetValue))};",
      "path": "src/wallet/coinselection.cpp",
      "position": 120,
      "original_position": 120,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1463935963,
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> still waiting on some feedback on this point before moving forward with the PR\r\n\r\n@instagibbs, see https://github.com/furszy/bitcoin-core/commit/b2d3ac32cb51a1f350b5a4005e6da39d712b8fa9. It makes the process consistent, returning the same \"weight exceeded\" error message when such scenario occurs. \r\n\r\nStill, I would like to revisit this PR further after you tackle https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1464525381 and most other comments.",
      "created_at": "2024-01-30T14:32:53Z",
      "updated_at": "2024-01-30T14:34:57Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1471333943",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1471333943"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 348,
      "original_line": 348,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1484756018",
      "pull_request_review_id": 1873120380,
      "id": 1484756018,
      "node_id": "PRRC_kwDOABII585Yf5Qy",
      "diff_hunk": "@@ -74,7 +74,7 @@ struct {\n static const size_t TOTAL_TRIES = 100000;\n \n util::Result<SelectionResult> SelectCoinsBnB(std::vector<OutputGroup>& utxo_pool, const CAmount& selection_target, const CAmount& cost_of_change,\n-                                             int max_weight)\n+                                             int max_input_weight)",
      "path": "src/wallet/coinselection.cpp",
      "position": 5,
      "original_position": 5,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "069c1652ed22b5e22537f63946cedd6c68487b22",
      "in_reply_to_id": 1459483691,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "max_selection_weight is also fine I think, both are better than status quo",
      "created_at": "2024-02-09T20:05:33Z",
      "updated_at": "2024-02-09T20:05:33Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1484756018",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1484756018"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 77,
      "original_line": 77,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506395741",
      "pull_request_review_id": 1906969070,
      "id": 1506395741,
      "node_id": "PRRC_kwDOABII585ZycZd",
      "diff_hunk": "@@ -320,13 +323,13 @@ util::Result<SelectionResult> KnapsackSolver(std::vector<OutputGroup>& groups, c\n     Shuffle(groups.begin(), groups.end(), rng);\n \n     for (const OutputGroup& group : groups) {\n-        if (group.GetSelectionAmount() == nTargetValue) {",
      "path": "src/wallet/coinselection.cpp",
      "position": 95,
      "original_position": 95,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "in_reply_to_id": 1464525381,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think you mean\r\n```cpp\r\nif (group.m_weight > max_input_weight) continue;\r\n```\r\nThis way we jusk skip group whose weight is larger than `max_input_weight` and avoid checking the weight limit for all the conditional branches below.",
      "created_at": "2024-02-28T18:24:49Z",
      "updated_at": "2024-02-28T18:36:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1506395741",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1506395741"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 323,
      "original_line": 323,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508751507",
      "pull_request_review_id": 1910740858,
      "id": 1508751507,
      "node_id": "PRRC_kwDOABII585Z7biT",
      "diff_hunk": "@@ -187,6 +188,21 @@ def run_test(self):\n         # Create and fund a raw tx for sending 10 BTC\n         psbtx1 = self.nodes[0].walletcreatefundedpsbt([], {self.nodes[2].getnewaddress():10})['psbt']\n \n+        self.log.info(\"Test that max_tx_weight option is sanity checked and fails when expected\")\n+        dest_arg = [{self.nodes[0].getnewaddress(): 1}]\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": -1})\n+        assert_raises_rpc_error(-8, \"Invalid parameter, max tx weight must be between 0 and 400000\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": 400001})\n+\n+        self.log.info(\"Test that a funded PSBT is always faithful to max_tx_weight option\")\n+        for weight in [0, 1, MIN_STANDARD_TX_NONWITNESS_SIZE * WITNESS_SCALE_FACTOR]:\n+            assert_raises_rpc_error(-4, \"The inputs size exceeds the maximum weight\", self.nodes[0].walletcreatefundedpsbt, [], dest_arg, 0, {\"max_tx_weight\": weight})\n+\n+        sendall_dest = [self.nodes[0].getnewaddress()]\n+        max_send_psbt_result = self.nodes[0].sendall(sendall_dest, options={\"psbt\": True})\n+        max_send_weight = self.nodes[0].decoderawtransaction(max_send_psbt_result[\"hex\"])['weight']\n+        assert_raises_rpc_error(-4, \"Requested max tx weight exceeded:\", self.nodes[0].sendall, sendall_dest, options={\"max_tx_weight\": max_send_weight - 1, \"psbt\": True})\n+        self.nodes[0].sendall(sendall_dest, options={\"max_tx_weight\": max_send_weight + 4, \"psbt\": True}) # off by 4 sometimes?",
      "path": "test/functional/rpc_psbt.py",
      "position": 30,
      "original_position": 25,
      "commit_id": "ee36a888bea63f8987bdde101b7b69eb614d78be",
      "original_commit_id": "7bfc80b70e3955c2c3b6f820f51a7d8d45aaff8e",
      "in_reply_to_id": 1463954606,
      "user": {
        "login": "ismaelsadeeq",
        "id": 48946461,
        "node_id": "MDQ6VXNlcjQ4OTQ2NDYx",
        "avatar_url": "https://avatars.githubusercontent.com/u/48946461?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ismaelsadeeq",
        "html_url": "https://github.com/ismaelsadeeq",
        "followers_url": "https://api.github.com/users/ismaelsadeeq/followers",
        "following_url": "https://api.github.com/users/ismaelsadeeq/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ismaelsadeeq/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ismaelsadeeq/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ismaelsadeeq/subscriptions",
        "organizations_url": "https://api.github.com/users/ismaelsadeeq/orgs",
        "repos_url": "https://api.github.com/users/ismaelsadeeq/repos",
        "events_url": "https://api.github.com/users/ismaelsadeeq/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ismaelsadeeq/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I verified that this behavior happened, intermittently I get the weight of the transaction off by 4 bytes.\r\nI spent sometime debugging but did not figure why yet.\r\n\r\n---\r\nGoing by this suggestion https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1468635643 the test is now gone in the new PR https://github.com/bitcoin/bitcoin/pull/29523 , I believe the issue is unrelated.\r\n\r\nShould I open an issue for this?\r\n\r\n",
      "created_at": "2024-03-01T09:54:10Z",
      "updated_at": "2024-03-01T09:54:10Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/29264#discussion_r1508751507",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1508751507"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/29264"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 209,
      "original_line": 204,
      "side": "RIGHT"
    }
  ]
}