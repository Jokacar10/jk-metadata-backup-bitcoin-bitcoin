{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32043",
    "id": 2388629186,
    "node_id": "PR_kwDOABII586OX5bC",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32043",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32043.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32043.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32043",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32043/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32043/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32043/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/6f0ac8b6436c3a5d68b3858c9e5f57e7f62e70d5",
    "number": 32043,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "[IBD] Tracking PR for speeding up Initial Block Download",
    "user": {
      "login": "l0rinc",
      "id": 1841944,
      "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/l0rinc",
      "html_url": "https://github.com/l0rinc",
      "followers_url": "https://api.github.com/users/l0rinc/followers",
      "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
      "organizations_url": "https://api.github.com/users/l0rinc/orgs",
      "repos_url": "https://api.github.com/users/l0rinc/repos",
      "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/l0rinc/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "During the last Core Dev meeting, it was proposed to create a tracking PR aggregating the individual IBD optimizations - to illustrate how these changes contribute to the broader performance improvement efforts.\r\n\r\n## Summary: **18%** full IBD speedup\r\nWe don't have many low-hanging fruits anymore, but big speed improvements can also be achieved by many small, focused changes.\r\nMany optimization opportunities are hiding in consensus critical code - this tracking PR provides justification for why those should also be considered.\r\nThe unmerged changes here collectively achieve a **~18%** speedup for full IBD (measured by multiple real runs until 886'000 blocks using 5GiB in-memory cache): from **8.59 hours** on master to **7.25 hours** for the PR.\r\n\r\nAnyone can (and is encouraged to) reproduce the results by following this guide: https://gist.github.com/l0rinc/83d2bdfce378ad7396610095ceb7bed5\r\n\r\n## Changing trends\r\nThe UTXO count and average block size have drastically increased in the past few years, providing a better overall picture of how Bitcoin behaves under real load.\r\n[<img width=\"500\" alt=\"image\" src=\"https://github.com/user-attachments/assets/d257b864-d9de-4f9d-b61b-acc6835f384f\" />](https://www.blockchain.com/explorer/charts/avg-block-size)\r\nProfiling IBD, given these circumstances, revealed many new optimization opportunities.\r\n\r\n## Similar efforts in the past years\r\n\r\nThere were many efforts to make sure Bitcoin Core remains performant in light of these new trends, a few recent notable examples include:\r\n* https://github.com/bitcoin/bitcoin/pull/25325 - use specialized pool allocator for in-memory cache (~21% faster IBD)\r\n* https://github.com/bitcoin/bitcoin/pull/28358 - allow the full UTXO set to fit into memory\r\n* https://github.com/bitcoin/bitcoin/pull/28280#issuecomment-2273368482 - fine-grained in-memory cache eviction for pruned nodes (~30% IBD speedup on pruned nodes)\r\n* https://github.com/bitcoin/bitcoin/pull/30039#issuecomment-2397229720 - reduce LevelDB writes, compactions and open files (~30% faster IBD for small in-memory cache)\r\n* https://github.com/bitcoin/bitcoin/pull/31490, https://github.com/bitcoin/bitcoin/pull/30849, https://github.com/bitcoin/bitcoin/pull/30906 - refactors derisking/enabling follow-up optimizations\r\n* https://github.com/bitcoin/bitcoin/pull/30326 - favor the happy path for cache misses (~2% IBD speedup)\r\n* https://github.com/bitcoin/bitcoin/pull/30884 - Windows regression fix\r\n\r\n## Reliable macro benchmarks\r\n\r\nThe measurements here were done on a high-end Intel i9-9900K CPU (8 cores/16 threads, 3.6GHz base, 5.0GHz boost), 64GB RAM, and a RAID configuration with multiple NVMe drives (total ~1.4TB fast storage), a dedicated Hetzner Auction box running latest Ubuntu. Sometimes a lower-end i7 was used with an HDD for comparison.\r\n\r\nTo make sure the setup reflected a real user's experience, we ran multiple full IBDs per commit (connecting to real nodes), until block 886'000 with a 5GiB in-memory cache where hyperfine was used to measure the final time (assuming normal distribution, stabilizing the final result via statistical methods), producing reliable results even when individual measurements varied (when hyperfine indicated that the measurements were all over the place we reran the whole benchmark).\r\nTo reduce the instability of headers synchronization and peer acquisition, we first started `bitcoind` until block 1, followed by the actual benchmarks until block 886'000.\r\n\r\nThe AutoFile batching with obfuscation batching changes (top 2 PRs) were measured my multiple people with different setting:\r\n* @andrewtoth in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2585403343 - 9% speedup with GCC\r\n* @hodlinator in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2588220255 - 11.9% speedup with GCC\r\n* @mlori in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2664077362 - 12% faster with GCC\r\n* @Sjors in https://github.com/bitcoin/bitcoin/pull/31144#issuecomment-2575279833 - 3% speedup with Clang\r\n\r\nAlso note that there is a separate effort to [add a reliable macro-benchmarking suite](https://github.com/bitcoin/bitcoin/pull/31996) to track the performance of the most critical usecases end-to-end (including IBD, compact blocks, UTXO iteration) - still WIP, not yet used here.\r\n\r\n## Current changes (in order of importance, reviews and reproducers are welcome):\r\n\r\nPlotting the performance of the blocks from the produced `debug.log` files shows (from the last run, can differ slightly from the normalized average shown below) the effect of each commit:\r\n\r\n<details>\r\n<summary>debug.log visualizer</summary>\r\n\r\n```python\r\nimport os\r\nimport sys\r\nimport re\r\nfrom datetime import datetime\r\nimport matplotlib.pyplot as plt\r\nimport numpy as np\r\n\r\n\r\ndef process_log_files_and_plot(log_dir, output_file=\"block_height_progress.png\"):\r\n    if not os.path.exists(log_dir):\r\n        print(f\"Error: Directory '{log_dir}' does not exist\", file=sys.stderr)\r\n        return\r\n\r\n    if not os.path.isdir(log_dir):\r\n        print(f\"Error: '{log_dir}' is not a directory\", file=sys.stderr)\r\n        return\r\n\r\n    files = os.listdir(log_dir)\r\n    debug_files = [f for f in files if f.startswith('debug-')]\r\n\r\n    if not debug_files:\r\n        print(f\"Warning: No files starting with 'debug-' found in '{log_dir}'\", file=sys.stderr)\r\n        print(f\"Files found: {files[:10]}{'...' if len(files) > 10 else ''}\", file=sys.stderr)\r\n        return\r\n\r\n    timestamp_format = \"%Y-%m-%dT%H:%M:%SZ\"\r\n    height_pattern = re.compile(r'UpdateTip:.+height=(\\d+)')\r\n\r\n    results = {}\r\n\r\n    for filename in debug_files:\r\n        filepath = os.path.join(log_dir, filename)\r\n        if not os.path.isfile(filepath):\r\n            print(f\"Skipping '{filename}' as it's not a file\", file=sys.stderr)\r\n            continue\r\n\r\n        print(f\"Processing {filename}...\", file=sys.stderr)\r\n\r\n        update_tips = []\r\n        first_timestamp = None\r\n        line_count = 0\r\n        tip_count = 0\r\n        found_shutdown_done = False\r\n\r\n        try:\r\n            with open(filepath, 'r', errors='ignore') as file:\r\n                for line_number, line in enumerate(file, 1):\r\n                    line_count += 1\r\n                    if line_count % 100000 == 0:\r\n                        print(f\"  Processed {line_count} lines, found {tip_count} UpdateTips...\", file=sys.stderr)\r\n\r\n                    if not found_shutdown_done:\r\n                        if \"Shutdown: done\" in line:\r\n                            found_shutdown_done = True\r\n                            print(f\"  Found 'Shutdown: done' at line {line_number}, starting to record\",\r\n                                  file=sys.stderr)\r\n                        continue\r\n\r\n                    if \"UpdateTip:\" not in line:\r\n                        continue\r\n\r\n                    try:\r\n                        timestamp = datetime.strptime(line[:20], timestamp_format)\r\n\r\n                        height_match = height_pattern.search(line)\r\n                        if not height_match:\r\n                            continue\r\n\r\n                        height = int(height_match.group(1))\r\n\r\n                        if first_timestamp is None:\r\n                            first_timestamp = timestamp\r\n\r\n                        elapsed_seconds = int((timestamp - first_timestamp).total_seconds())\r\n\r\n                        update_tips.append((elapsed_seconds, height))\r\n                        tip_count += 1\r\n\r\n                    except ValueError:\r\n                        continue\r\n        except Exception as e:\r\n            print(f\"Error processing file '{filename}': {e}\", file=sys.stderr)\r\n            continue\r\n\r\n        print(f\"Finished processing {filename}: {line_count} lines, {tip_count} UpdateTips\", file=sys.stderr)\r\n\r\n        if update_tips:\r\n            elapsed_time_to_height = {}\r\n            for elapsed_time, height in update_tips:\r\n                elapsed_time_to_height[elapsed_time] = height\r\n\r\n            time_height_pairs = sorted(elapsed_time_to_height.items())\r\n\r\n            results[filename[6:14]] = time_height_pairs\r\n        else:\r\n            print(f\"Warning: No valid UpdateTip entries found in '{filename}'\", file=sys.stderr)\r\n\r\n    if not results:\r\n        print(\"No results to plot. No valid UpdateTip entries found in any files.\", file=sys.stderr)\r\n        return\r\n\r\n    print(f\"Creating plot with data from {len(results)} files\", file=sys.stderr)\r\n\r\n    plt.figure(figsize=(12, 8))\r\n\r\n    sorted_results = []\r\n    for short_name, time_height_pairs in results.items():\r\n        if time_height_pairs:\r\n            last_time = time_height_pairs[-1][0] / 60 / 60\r\n            sorted_results.append((short_name, last_time, time_height_pairs))\r\n\r\n    sorted_results.sort(key=lambda x: x[1], reverse=True)\r\n\r\n    colors = plt.cm.tab10(np.linspace(0, 1, len(sorted_results)))\r\n\r\n    final_points = []\r\n\r\n    for idx, (short_name, last_time_hours, time_height_pairs) in enumerate(sorted_results):\r\n        times = [t for t, h in time_height_pairs]\r\n        heights = [h for t, h in time_height_pairs]\r\n\r\n        times_hours = [t / 60 / 60 for t in times]\r\n\r\n        last_height = heights[-1] if heights else 0\r\n\r\n        plt.plot(times_hours, heights, label=f\"{short_name} ({last_time_hours:.2f}h)\", color=colors[idx], linewidth=1)\r\n\r\n        if times_hours and heights:\r\n            final_points.append((last_time_hours, last_height, colors[idx]))\r\n\r\n    for last_time, last_height, color in final_points:\r\n        plt.axhline(y=last_height, color=color, linestyle='--', alpha=0.3)\r\n\r\n        plt.axvline(x=last_time, color=color, linestyle='--', alpha=0.3)\r\n\r\n    plt.title('Block Height Progress Over Time')\r\n    plt.xlabel('Elapsed Time (hours)')\r\n    plt.ylabel('Block Height')\r\n    plt.grid(True, linestyle='--', alpha=0.7)\r\n\r\n    plt.legend(loc='lower right')\r\n\r\n    plt.tight_layout()\r\n\r\n    plt.savefig(output_file, dpi=300)\r\n    print(f\"Plot saved to {output_file}\", file=sys.stderr)\r\n\r\n    with open(output_file.replace('.png', '.csv'), 'w') as f:\r\n        for short_name, last_time, time_height_pairs in sorted_results:\r\n            time_height_str = \",\".join(f\"{time}:{height}\" for time, height in time_height_pairs)\r\n            f.write(f\"{short_name},{time_height_str}\\n\")\r\n\r\n    plt.show()\r\n\r\n\r\nif __name__ == \"__main__\":\r\n    log_dir = sys.argv[1] if len(sys.argv) > 1 else \".\"\r\n    output_file = sys.argv[2] if len(sys.argv) > 2 else \"block_height_progress.png\"\r\n    print(f\"Searching for log files in: {log_dir}\", file=sys.stderr)\r\n    process_log_files_and_plot(log_dir, output_file)\r\n```\r\n\r\n</details>\r\n\r\n<img width=\"1000\" alt=\"image\" src=\"https://github.com/user-attachments/assets/9f13e4d7-6232-4a69-81b7-0b0d0cdbd9a2\" />\r\n\r\n### Baseline\r\nBase commit was 88debb3e42.\r\n\r\n<details>\r\n<summary>8.59 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=88debb3e4297ef4ebc8966ffe599359bc7b231d0 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     30932.610 s ± 156.891 s    [User: 58248.505 s, System: 2142.974 s]\r\n  Range (min … max):   30821.671 s … 31043.549 s    2 runs\r\n  ```\r\n\r\n</details>\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31551\r\n\r\n<details>\r\n<summary>7.91 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=6a8ce46e32dae2ffef2a73d2314ca33a2039186e ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     28501.588 s ± 119.886 s    [User: 56419.060 s, System: 1833.126 s]\r\n  Range (min … max):   28416.815 s … 28586.361 s    2 runs\r\n```\r\n</details>\r\n\r\nWe can serialize the blocks and undos to any `Stream` which implements the appropriate read/write methods.\r\n`AutoFile` is one of these, writing the results \"directly\" to disk (through the OS file cache). Batching these in memory first and reading/writing these to disk is measurably faster (likely because of fewer native fread calls or less locking, as [observed](https://github.com/bitcoin/bitcoin/pull/28226#issuecomment-1666842501) by @martinus in a similar change).\r\n\r\nDifferential flame graphs indicate that the before/after speed change is because of fewer `AutoFile` reads and writes:\r\n![writes](https://github.com/user-attachments/assets/c5e45ddf-3a94-4c5b-999a-94a139d5776d)\r\n![reads](https://github.com/user-attachments/assets/f11982ea-f2dc-4fc6-afce-faa132724658)\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31144\r\n\r\n<details>\r\n<summary>7.60 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=c5cc54d10187c9cb3a6cba8cc10f652b4f882e2a ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     27394.210 s ± 565.877 s    [User: 54902.315 s, System: 1891.951 s]\r\n  Range (min … max):   26994.075 s … 27794.346 s    2 runs\r\n```\r\n</details>\r\n\r\nCurrent block obfuscations are done byte-by-byte, this PR batches them to 64 bit primitives to speed up obfuscating bigger memory batches.\r\nThis is especially relevant after https://github.com/bitcoin/bitcoin/pull/31551 where we end up with bigger obfuscatable chunks.\r\n\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31645\r\n\r\n<details>\r\n<summary>7.50 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=9b4be912d20222b3b275ef056c1494a15ccde3f5 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     27019.086 s ± 112.340 s    [User: 54927.344 s, System: 1652.376 s]\r\n  Range (min … max):   26939.649 s … 27098.522 s    2 runs\r\n```\r\n\r\n</details>\r\n\r\nThe final UTXO set is [written to disk in batches](https://github.com/bitcoin/bitcoin/blob/master/src/txdb.cpp#L130-L133) to avoid a gigantic spike at flush time.\r\nThere is already a [-dbbatchsize](https://github.com/bitcoin/bitcoin/blob/master/src/init.cpp#L490) config option to change this value, this PR adjusts the default only.\r\nBy increasing the default batch size, we can reduce overhead from repeated compaction cycles, minimize constant overhead per batch, and achieve more sequential writes.\r\n\r\n<img width=\"500\" alt=\"image\" src=\"https://github.com/user-attachments/assets/93ab3fff-385b-4093-8016-ab2a251cf92a\" />\r\n\r\nNote that this PR mainly optimizes a critical section of IBD - even if the effect on overall speed is small.\r\n\r\n\r\n-----\r\n\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31868\r\n\r\n<details>\r\n<summary>7.41 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=817d7ac0767a3984295aa3cf6c961dcc5f29d571 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     26711.460 s ± 244.118 s    [User: 54654.348 s, System: 1652.087 s]\r\n  Range (min … max):   26538.843 s … 26884.077 s    2 runs\r\n```\r\n</details>\r\n\r\nThis PR is draft since it relies on other PRs (e.g. https://github.com/bitcoin/bitcoin/pull/31519 and can be affected by the previous ones here).\r\n\r\nThe commits merge similar (de)serialization methods, and separates them internally with if constexpr - similarly to how it has been https://github.com/bitcoin/bitcoin/pull/28203. This enabled further SizeComputer optimizations as well.\r\n\r\nOther than these, since single byte writes are used very often (used for every (u)int8_t or std::byte or bool and for every VarInt's first byte which is also needed for every (pre)Vector), it makes sense to avoid unnecessary generalized serialization infrastructure.\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/31682\r\n\r\n<details>\r\n<summary>7.31 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=182745cec4c0baf2f3c8cff2f74f847eac3c4330 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     26326.867 s ± 45.887 s    [User: 54367.156 s, System: 1619.348 s]\r\n  Range (min … max):   26294.420 s … 26359.314 s    2 runs\r\n```\r\n</details>\r\n\r\n`CheckBlock`'s latency is critical for efficiently validating correct inputs during transaction validation, including mempool acceptance and new block creation.\r\n\r\nThis PR improves performance and maintainability by introducing the following changes:\r\n* Simplified checks for the most common cases (1 or 2 inputs - [70-90% of transactions have a single input](https://transactionfee.info/charts/transactions-1in)).\r\n* Optimized the general case by replacing `std::set` with sorted `std::vector` for improved locality.\r\n* Simplified Null prevout checks from linear to constant time.\r\n\r\n-----\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/30442\r\n\r\n<details>\r\n<summary>7.25 hour IBD time</summary>\r\n\r\n```bash\r\nCOMPILER=gcc COMMIT=47d377bd0bb88dae6b34553a7789400170e0ccf6 ./build/src/bitcoind -datadir=/mnt/my_storage/BitcoinData -stopatheight=886000 -dbcache=5000 -blocksonly -printtoconsole=0\r\n  Time (mean ± σ):     26084.429 s ± 473.611 s    [User: 54310.780 s, System: 1815.967 s]\r\n  Range (min … max):   25749.536 s … 26419.323 s    2 runs\r\n```\r\n\r\n</details>\r\n\r\nThe in-memory representation of the UTXO set uses [(salted) SipHash](https://github.com/bitcoin/bitcoin/blob/master/src/coins.h#L226) for avoiding key collision attacks.\r\n\r\nHashing a `uint256` key is done so often that a specialized optimization was extracted to [SipHashUint256Extra](https://github.com/bitcoin/bitcoin/blob/master/src/crypto/siphash.cpp#L135). The constant salting operations were already extracted in the [general case](https://github.com/bitcoin/bitcoin/blob/master/src/crypto/siphash.cpp#L20-L23), this PR adjusts the main specialization similarly.\r\n\r\n-----\r\n\r\n## Other similar efforts waiting for reviews or  revives (not included in this tracking PR):\r\n* https://github.com/bitcoin/bitcoin/pull/31132 - pre-warms the in-memory cache on multiple threads (10% IBD speedup for small in-memory caches)\r\n* https://github.com/bitcoin/bitcoin/pull/30611 - for very big in-memory caches make sure we still flush to disk regularly (no significant IBD speed change)\r\n* https://github.com/bitcoin/bitcoin/pull/28945 - was meant to preallocate the memory of recreated caches (~6% IBD speedup for small caches)\r\n* https://github.com/bitcoin/bitcoin/pull/31102 - was meant to try to evict entries selectively instead of dropping the whole cache when full\r\n\r\n-----\r\n\r\nThis PR is meant to stay in draft (not meant to be merged directly), to continually change based on comments received here and in the PRs.\r\nComments, reproducers and high-level discussions are welcome here - code reviews should rather be done in the individual PRs.\r\n",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      },
      {
        "id": 219890555,
        "node_id": "MDU6TGFiZWwyMTk4OTA1NTU=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Block%20storage",
        "name": "Block storage",
        "color": "000000",
        "default": false
      }
    ],
    "created_at": "2025-03-12T16:20:16Z",
    "updated_at": "2025-03-12T17:28:33Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "0b4eecbfd4d7649c2f4ebc86ce9da02952640b0a",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "l0rinc:l0rinc/IBD-optimizations",
      "ref": "l0rinc/IBD-optimizations",
      "sha": "6f0ac8b6436c3a5d68b3858c9e5f57e7f62e70d5",
      "user": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 674169038,
        "node_id": "R_kgDOKC8Azg",
        "name": "bitcoin",
        "full_name": "l0rinc/bitcoin",
        "owner": {
          "login": "l0rinc",
          "id": 1841944,
          "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
          "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/l0rinc",
          "html_url": "https://github.com/l0rinc",
          "followers_url": "https://api.github.com/users/l0rinc/followers",
          "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
          "organizations_url": "https://api.github.com/users/l0rinc/orgs",
          "repos_url": "https://api.github.com/users/l0rinc/repos",
          "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/l0rinc/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/l0rinc/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/l0rinc/bitcoin",
        "archive_url": "https://api.github.com/repos/l0rinc/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/l0rinc/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/l0rinc/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/l0rinc/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/l0rinc/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/l0rinc/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/l0rinc/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/l0rinc/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/l0rinc/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/l0rinc/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/l0rinc/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/l0rinc/bitcoin/events",
        "forks_url": "https://api.github.com/repos/l0rinc/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/l0rinc/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/l0rinc/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/l0rinc/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/l0rinc/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/l0rinc/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/l0rinc/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/l0rinc/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/l0rinc/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/l0rinc/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/l0rinc/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/l0rinc/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/l0rinc/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/l0rinc/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/l0rinc/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:l0rinc/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/l0rinc/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/l0rinc/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/l0rinc/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/l0rinc/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/l0rinc/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/l0rinc/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/l0rinc/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/l0rinc/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/l0rinc/bitcoin/hooks",
        "svn_url": "https://github.com/l0rinc/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 255172,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-11T16:41:52Z",
        "created_at": "2023-08-03T09:49:12Z",
        "updated_at": "2024-07-18T12:40:18Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "aa68ed27b89493cd862555c79f8c90d5f49ce2ce",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36915,
        "stargazers_count": 82443,
        "watchers_count": 82443,
        "size": 277874,
        "default_branch": "master",
        "open_issues_count": 682,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-03-12T15:03:57Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-03-12T17:58:27Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32043"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": true,
    "additions": 985,
    "deletions": 326,
    "changed_files": 29,
    "commits": 24,
    "review_comments": 0,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgwZGZjZTNhMGM1ZDM1MzY5ZjZkOGI5ZGVhNzg5ZTFkNGQ2N2NkMDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80dfce3a0c5d35369f6d8b9dea789e1d4d67cd06",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/80dfce3a0c5d35369f6d8b9dea789e1d4d67cd06",
      "tree": {
        "sha": "5bd5d6c57b88c8faea8207fbd64d00e675cf380d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5bd5d6c57b88c8faea8207fbd64d00e675cf380d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/45719390a1434ad7377a5ed05dcd73028130cf2d",
          "sha": "45719390a1434ad7377a5ed05dcd73028130cf2d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/45719390a1434ad7377a5ed05dcd73028130cf2d"
        }
      ],
      "message": "optimization: Bulk serialization reads in `UndoRead` and `ReadBlock`\n\nThe Obfuscation (XOR) operations are currently done byte-by-byte during serialization, buffering the reads will enable batching the obfuscation operations later (not yet done here).\n\nAlso, different operating systems seem to handle file caching differently, so reading bigger batches (and processing those from memory) is also a bit faster (likely because of fewer native fread calls or less locking).\n\nSince `ReadBlock[Undo]` is called with the file position being set after the [undo]block size, we have to start by backtracking 4 bytes to be able to read the expected size first.\nAs a consequence, the `FlatFilePos pos` parameter in `ReadBlock` is copied now.\n\n`HashVerifier` was included in the try/catch to include the `undo_size` serialization there as well since the try is about `Deserialize` errors. This is why the final checksum verification was also included in the try.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='ReadBlockBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\nBefore:\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        2,289,743.62 |              436.73 |    0.3% |     11.03 | `ReadBlockBench`\n\nAfter:\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        1,724,703.14 |              579.81 |    0.4% |     11.06 | `ReadBlockBench`\n\n> C++ compiler .......................... GNU 13.3.0\n\nBefore:\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        7,786,309.20 |              128.43 |    0.0% |   70,832,812.80 |   23,803,523.16 |  2.976 |   5,073,002.56 |    0.4% |     10.72 | `ReadBlockBench`\n\nAfter:\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        6,272,557.28 |              159.42 |    0.0% |   63,251,231.42 |   19,739,780.92 |  3.204 |   3,589,886.66 |    0.3% |     10.57 | `ReadBlockBench`\n\nCo-authored-by: Cory Fields <cory-nospam-@coryfields.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2024-12-17T12:05:13Z"
      },
      "sha": "80dfce3a0c5d35369f6d8b9dea789e1d4d67cd06"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdjZTY0ZGQyNzJhMmZiZjJlYTUxMmMyZGVlZGU2OWZmMDIyN2Q4ZjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ce64dd272a2fbf2ea512c2deede69ff0227d8f0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7ce64dd272a2fbf2ea512c2deede69ff0227d8f0",
      "tree": {
        "sha": "f8825b33c9f7c2c30bd238830a43c3e99465280c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/f8825b33c9f7c2c30bd238830a43c3e99465280c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/80dfce3a0c5d35369f6d8b9dea789e1d4d67cd06",
          "sha": "80dfce3a0c5d35369f6d8b9dea789e1d4d67cd06",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/80dfce3a0c5d35369f6d8b9dea789e1d4d67cd06"
        }
      ],
      "message": "Add `AutoFile::write_large` for batching obfuscation operations\n\nInstead of copying the data and doing the xor in a 4096 byte array, we're doing it directly on the input.\n\n`DataStream` constructor was also added to enable presized serialization and writing in a single command.",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-26T18:44:03Z"
      },
      "sha": "7ce64dd272a2fbf2ea512c2deede69ff0227d8f0"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZkNTZkZWNkN2MxN2MyODk5YTRjZjlhZDI1OTJhYWE5NTBjNDhiMDQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d56decd7c17c2899a4cf9ad2592aaa950c48b04",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6d56decd7c17c2899a4cf9ad2592aaa950c48b04",
      "tree": {
        "sha": "82d862073fd50d16adf9e7bab609833db679120f",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/82d862073fd50d16adf9e7bab609833db679120f"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7ce64dd272a2fbf2ea512c2deede69ff0227d8f0",
          "sha": "7ce64dd272a2fbf2ea512c2deede69ff0227d8f0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7ce64dd272a2fbf2ea512c2deede69ff0227d8f0"
        }
      ],
      "message": "optimization: Bulk serialization writes in `SaveBlockUndo` and `SaveBlock`\n\nSimilarly to the serialization reads, buffered writes will enable batched xor calculations - especially since currently we need to copy the write inputs Span to do the obfuscation on it, batching enables doing the xor on the internal buffer instead.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='SaveBlockBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\nBefore:\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        5,267,613.94 |              189.84 |    1.0% |     11.05 | `SaveBlockBench`\n\nAfter:\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        1,767,367.40 |              565.81 |    1.6% |     10.86 | `SaveBlockBench`\n\n> C++ compiler .......................... GNU 13.3.0\n\nBefore:\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,128,530.90 |              242.22 |    3.8% |   19,358,001.33 |    8,601,983.31 |  2.250 |   3,079,334.76 |    0.4% |     10.64 | `SaveBlockBench`\n\nAfter:\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        3,130,556.05 |              319.43 |    4.7% |   17,305,378.56 |    6,457,946.37 |  2.680 |   2,579,854.87 |    0.3% |     10.83 | `SaveBlockBench`\n\nCo-authored-by: Cory Fields <cory-nospam-@coryfields.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-26T16:22:47Z"
      },
      "sha": "6d56decd7c17c2899a4cf9ad2592aaa950c48b04"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM3ZDk1MjY1ODExMDhkYjdjNTc5MzgwYzBhOWUyNDFmMjQ1NTJkNjY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37d9526581108db7c579380c0a9e241f24552d66",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/37d9526581108db7c579380c0a9e241f24552d66",
      "tree": {
        "sha": "2f61014e9ef91816b9f900403e7849cf39a6e19b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2f61014e9ef91816b9f900403e7849cf39a6e19b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6d56decd7c17c2899a4cf9ad2592aaa950c48b04",
          "sha": "6d56decd7c17c2899a4cf9ad2592aaa950c48b04",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/6d56decd7c17c2899a4cf9ad2592aaa950c48b04"
        }
      ],
      "message": "log: unify error messages for (read/write)[undo]block\n\nCo-authored-by: maflcko <6399679+maflcko@users.noreply.github.com>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-24T14:12:28Z"
      },
      "sha": "37d9526581108db7c579380c0a9e241f24552d66"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDJmNWIzN2I3MGUwYTBlNTJiYmNjMzE2MTgzY2UyNGJlNWE0YzlhNWM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f5b37b70e0a0e52bbcc316183ce24be5a4c9a5c",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2f5b37b70e0a0e52bbcc316183ce24be5a4c9a5c",
      "tree": {
        "sha": "71526567e64598bbd61b7adb4838a3b1925efac8",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/71526567e64598bbd61b7adb4838a3b1925efac8"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/37d9526581108db7c579380c0a9e241f24552d66",
          "sha": "37d9526581108db7c579380c0a9e241f24552d66",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/37d9526581108db7c579380c0a9e241f24552d66"
        }
      ],
      "message": "test: Compare util::Xor with randomized inputs against simple impl\n\nSince production code only uses keys of length 8, we're not testing with other values anymore",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2024-10-24T06:37:57Z"
      },
      "sha": "2f5b37b70e0a0e52bbcc316183ce24be5a4c9a5c"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM0MjdmNDA3ZGZhMWI4ZmI3ZTEwOWFjNzg4MDc2MTgwMjM4ZDNhNTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3427f407dfa1b8fb7e109ac788076180238d3a58",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/3427f407dfa1b8fb7e109ac788076180238d3a58",
      "tree": {
        "sha": "bbf36dec9d5071368fc57cd5f4d13d89a4f5ffbc",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/bbf36dec9d5071368fc57cd5f4d13d89a4f5ffbc"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2f5b37b70e0a0e52bbcc316183ce24be5a4c9a5c",
          "sha": "2f5b37b70e0a0e52bbcc316183ce24be5a4c9a5c",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2f5b37b70e0a0e52bbcc316183ce24be5a4c9a5c"
        }
      ],
      "message": "bench: Make Xor benchmark more representative\n\nTo make the benchmarks representative, I've collected the write-vector's sizes during IBD for every invocation of `util::Xor` until 860k blocks, and used it as a basis for the micro-benchmarks, having a similar distribution of random data (taking the 1000 most frequent ones, making sure the very big ones are also covered).\n\nAnd even though we already have serialization tests, `AutoFileXor` was added to serializing 1 MB via the provided key_bytes.\nThis was used to test the effect of disabling obfuscation.\n\n>  cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release \\\n&& cmake --build build -j$(nproc) \\\n&& build/src/bench/bench_bitcoin -filter='XorHistogram|AutoFileXor' -min-time=10000\n\nC++ compiler .......................... AppleClang 16.0.0.16000026\n\n|             ns/byte |              byte/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|                1.07 |      937,527,289.88 |    0.4% |     10.24 | `AutoFileXor`\n|                0.87 |    1,149,859,017.49 |    0.3% |     10.80 | `XorHistogram`\n\nC++ compiler .......................... GNU 13.2.0\n\n|             ns/byte |              byte/s |    err% |        ins/byte |        cyc/byte |    IPC |       bra/byte |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|                1.87 |      535,253,389.72 |    0.0% |            9.20 |            3.45 |  2.669 |           1.03 |    0.1% |     11.02 | `AutoFileXor`\n|                1.70 |      587,844,715.57 |    0.0% |            9.35 |            5.41 |  1.729 |           1.05 |    1.7% |     10.95 | `XorHistogram`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2024-12-06T15:18:03Z"
      },
      "sha": "3427f407dfa1b8fb7e109ac788076180238d3a58"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDQ2MGEwNmFmYWUwODdkYWE2ODlhZGIwYWIwYTViNzYxZTgyYjczZmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/460a06afae087daa689adb0ab0a5b761e82b73ff",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/460a06afae087daa689adb0ab0a5b761e82b73ff",
      "tree": {
        "sha": "fae71ed0e6a08c0c240f80e8658a47e1a6018e70",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fae71ed0e6a08c0c240f80e8658a47e1a6018e70"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/3427f407dfa1b8fb7e109ac788076180238d3a58",
          "sha": "3427f407dfa1b8fb7e109ac788076180238d3a58",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/3427f407dfa1b8fb7e109ac788076180238d3a58"
        }
      ],
      "message": "optimization: Xor 64 bits together instead of byte-by-byte\n\n`util::Xor` method was split out into more focused parts:\n* one which assumes tha the `uint64_t` key is properly aligned, doing the first few xors as 64 bits (the memcpy is eliminated in most compilers), and the last iteration is optimized for 8/16/32 bytes.\n* an unaligned `uint64_t` key with a `key_offset` parameter which is rotated to accommodate the data (adjusting for endianness).\n* a legacy `std::vector<std::byte>` key with an asserted 8 byte size, converted to `uint64_t`.\n\nNote that the default statement alone would pass the tests, but would be very slow, since the 1, 2 and 4 byte versions won't be specialized by the compiler, hence the switch.\n\nAsserts were added throughout the code to make sure every such vector has length 8, since in the next commit we're converting all of them to `uint64_t`.\n\nrefactor: Migrate fixed-size obfuscation end-to-end from `std::vector<std::byte>` to `uint64_t`\n\nSince `util::Xor` accepts `uint64_t` values, we're eliminating any repeated vector-to-uint64_t conversions going back to the loading/saving of these values (we're still serializing them as vectors, but converting as soon as possible to `uint64_t`). This is the reason the tests still generate vector values and convert to `uint64_t` later instead of generating it directly.\n\nWe're also short-circuit `Xor` calls with 0 key values early to avoid unnecessary calculations (e.g. `MakeWritableByteSpan`) - even assuming that XOR is never called for 0.\n\n>  cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release \\\n&& cmake --build build -j$(nproc) \\\n&& build/src/bench/bench_bitcoin -filter='XorHistogram|AutoFileXor' -min-time=10000\n\nC++ compiler .......................... AppleClang 16.0.0.16000026\n\n|             ns/byte |              byte/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|                0.09 |   10,799,585,470.46 |    1.3% |     11.00 | `AutoFileXor`\n|                0.14 |    7,144,743,097.97 |    0.2% |     11.01 | `XorHistogram`\n\nC++ compiler .......................... GNU 13.2.0\n\n|             ns/byte |              byte/s |    err% |        ins/byte |        cyc/byte |    IPC |       bra/byte |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|                0.59 |    1,706,433,032.76 |    0.1% |            0.00 |            0.00 |  0.620 |           0.00 |    1.8% |     11.01 | `AutoFileXor`\n|                0.47 |    2,145,375,849.71 |    0.0% |            0.95 |            1.48 |  0.642 |           0.20 |    9.6% |     10.93 | `XorHistogram`\n\n----\n\nA few other benchmarks that seem to have improved as well (tested with Clang only):\nBefore:\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        2,237,168.64 |              446.99 |    0.3% |     10.91 | `ReadBlockFromDiskTest`\n|          748,837.59 |            1,335.40 |    0.2% |     10.68 | `ReadRawBlockFromDiskTest`\n\nAfter:\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        1,827,436.12 |              547.21 |    0.7% |     10.95 | `ReadBlockFromDiskTest`\n|           49,276.48 |           20,293.66 |    0.2% |     10.99 | `ReadRawBlockFromDiskTest`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2024-12-21T15:15:04Z"
      },
      "sha": "460a06afae087daa689adb0ab0a5b761e82b73ff"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDhmYzk0ZDkxYjM5OTM5YzM5NGM1MzUxMDAzMjA5MTVlNDcyNDA4MDA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8fc94d91b39939c394c535100320915e47240800",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8fc94d91b39939c394c535100320915e47240800",
      "tree": {
        "sha": "c4f988348af0d63968ff82abef1938fc5f62de87",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c4f988348af0d63968ff82abef1938fc5f62de87"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/460a06afae087daa689adb0ab0a5b761e82b73ff",
          "sha": "460a06afae087daa689adb0ab0a5b761e82b73ff",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/460a06afae087daa689adb0ab0a5b761e82b73ff"
        }
      ],
      "message": "bench: measure block (size)serialization speed\n\nThe SizeComputer is a special serializer which returns what the exact final size will be of the serialized content.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='SizeComputerBlock|SerializeBlock|DeserializeBlock' --min-time=10000\n\n> C compiler ............................ AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          936,285.45 |            1,068.05 |    0.1% |     11.01 | `DeserializeBlock`\n|          194,330.04 |            5,145.88 |    0.2% |     10.97 | `SerializeBlock`\n|           12,215.05 |           81,866.19 |    0.0% |     11.00 | `SizeComputerBlock`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,447,243.87 |              224.86 |    0.0% |   53,689,737.58 |   15,966,336.86 |  3.363 |   2,409,315.46 |    0.5% |     11.01 | `DeserializeBlock`\n|          869,833.14 |            1,149.65 |    0.0% |    8,015,883.90 |    3,123,013.80 |  2.567 |   1,517,035.87 |    0.5% |     10.81 | `SerializeBlock`\n|           26,535.51 |           37,685.36 |    0.0% |      225,261.03 |       95,278.40 |  2.364 |      53,037.03 |    0.6% |     11.00 | `SizeComputerBlock`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2024-11-19T15:11:56Z"
      },
      "sha": "8fc94d91b39939c394c535100320915e47240800"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc3ZTFmMmQ2OTE0M2U3MDlhZjE3MzA3NTM0NjdlZWQzNGI5ZTk3YzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77e1f2d69143e709af1730753467eed34b9e97c4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/77e1f2d69143e709af1730753467eed34b9e97c4",
      "tree": {
        "sha": "6d3556bb6bc4ff2b2342c7da61e9a88aa0509d31",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6d3556bb6bc4ff2b2342c7da61e9a88aa0509d31"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8fc94d91b39939c394c535100320915e47240800",
          "sha": "8fc94d91b39939c394c535100320915e47240800",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/8fc94d91b39939c394c535100320915e47240800"
        }
      ],
      "message": "refactor: reduce template bloat in primitive serialization\n\nMerged multiple template methods into single constexpr-delimited implementation to reduce template bloat (i.e. related functionality is grouped into a single method, but can be optimized because of C++20 constexpr conditions).\nThis unifies related methods that were only bound before by similar signatures - and enables `SizeComputer` optimizations later",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-17T13:29:33Z"
      },
      "sha": "77e1f2d69143e709af1730753467eed34b9e97c4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGQ1ZTdjYjIzMGY5Y2YzZTQ5MDY2Yzk2ZGFiYzA1NzMwOTQ1ZDRlMmY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5e7cb230f9cf3e49066c96dabc05730945d4e2f",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/d5e7cb230f9cf3e49066c96dabc05730945d4e2f",
      "tree": {
        "sha": "9be357e37f06ec2b8996afbc13187c15123da0f1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9be357e37f06ec2b8996afbc13187c15123da0f1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/77e1f2d69143e709af1730753467eed34b9e97c4",
          "sha": "77e1f2d69143e709af1730753467eed34b9e97c4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/77e1f2d69143e709af1730753467eed34b9e97c4"
        }
      ],
      "message": "cleanup: remove unused `ser_writedata16be` and `ser_readdata16be`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-02-13T21:49:51Z"
      },
      "sha": "d5e7cb230f9cf3e49066c96dabc05730945d4e2f"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGUyZTliZTBkZmI3NTg5NTVmZjY5ZGUyNWU3NmFhZmUyMzA1OGY4ZmE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e2e9be0dfb758955ff69de25e76aafe23058f8fa",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e2e9be0dfb758955ff69de25e76aafe23058f8fa",
      "tree": {
        "sha": "b6beca2667ccc3ead9a73c46f7bc5043bf98937c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/b6beca2667ccc3ead9a73c46f7bc5043bf98937c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/d5e7cb230f9cf3e49066c96dabc05730945d4e2f",
          "sha": "d5e7cb230f9cf3e49066c96dabc05730945d4e2f",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/d5e7cb230f9cf3e49066c96dabc05730945d4e2f"
        }
      ],
      "message": "optimization: Add single byte write\n\nSingle byte writes are used very often (used for every (u)int8_t or std::byte or bool and for every VarInt's first byte which is also needed for every (pre)Vector).\nIt makes sense to avoid the generalized serialization infrastructure that isn't needed:\n* AutoFile write doesn't need to allocate 4k buffer for a single byte now;\n* `VectorWriter` and `DataStream` avoids memcpy/insert calls.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='SizeComputerBlock|SerializeBlock|DeserializeBlock' --min-time=10000\n\n> C compiler ............................ AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          934,120.45 |            1,070.53 |    0.2% |     11.01 | `DeserializeBlock`\n|          170,719.27 |            5,857.57 |    0.1% |     10.99 | `SerializeBlock`\n|           12,048.40 |           82,998.58 |    0.2% |     11.01 | `SizeComputerBlock`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,433,835.04 |              225.54 |    0.0% |   53,688,481.60 |   15,918,730.23 |  3.373 |   2,409,056.47 |    0.5% |     11.01 | `DeserializeBlock`\n|          563,663.10 |            1,774.11 |    0.0% |    7,386,775.59 |    2,023,525.77 |  3.650 |   1,385,368.57 |    0.5% |     11.00 | `SerializeBlock`\n|           27,351.60 |           36,560.93 |    0.1% |      225,261.03 |       98,209.77 |  2.294 |      53,037.03 |    0.9% |     11.00 | `SizeComputerBlock`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-02-13T23:53:11Z"
      },
      "sha": "e2e9be0dfb758955ff69de25e76aafe23058f8fa"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDc3M2NlYjUzMjc1NWViZWI0NmM2MThhZGEwZDZlMDlmYzI2OTUzMmU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/773ceb532755ebeb46c618ada0d6e09fc269532e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/773ceb532755ebeb46c618ada0d6e09fc269532e",
      "tree": {
        "sha": "3337734eb9b3f3d81cfde30ccd54e23bafe65a04",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3337734eb9b3f3d81cfde30ccd54e23bafe65a04"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e2e9be0dfb758955ff69de25e76aafe23058f8fa",
          "sha": "e2e9be0dfb758955ff69de25e76aafe23058f8fa",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e2e9be0dfb758955ff69de25e76aafe23058f8fa"
        }
      ],
      "message": "optimization: merge SizeComputer specializations + add new ones\n\nEndianness doesn't affect the final size, we can skip it for `SizeComputer`.\nWe can `if constexpr` previous calls into existing method, short-circuiting existing logic when we only need their serialized sizes.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='SizeComputerBlock|SerializeBlock|DeserializeBlock' --min-time=10000\n\n> C compiler ............................ AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          888,859.82 |            1,125.04 |    0.4% |     10.87 | `DeserializeBlock`\n|          168,502.88 |            5,934.62 |    0.1% |     10.99 | `SerializeBlock`\n|           10,200.88 |           98,030.75 |    0.1% |     11.00 | `SizeComputerBlock`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,460,428.52 |              224.19 |    0.0% |   53,692,507.13 |   16,015,347.97 |  3.353 |   2,410,105.48 |    0.5% |     11.01 | `DeserializeBlock`\n|          567,042.65 |            1,763.54 |    0.0% |    7,386,775.59 |    2,035,613.84 |  3.629 |   1,385,368.57 |    0.5% |     11.01 | `SerializeBlock`\n|           25,728.56 |           38,867.32 |    0.0% |      172,750.03 |       92,366.64 |  1.870 |      42,131.03 |    1.7% |     11.00 | `SizeComputerBlock`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-02-14T12:54:57Z"
      },
      "sha": "773ceb532755ebeb46c618ada0d6e09fc269532e"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY0YjdhN2Y3MDFhZGE5NDExNTkyY2QxNDU0ZDA5NWZlZTJiNDQ1NWE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4b7a7f701ada9411592cd1454d095fee2b4455a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f4b7a7f701ada9411592cd1454d095fee2b4455a",
      "tree": {
        "sha": "9966311cc9e44db15754489ce13f1d817ed589e4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/9966311cc9e44db15754489ce13f1d817ed589e4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/773ceb532755ebeb46c618ada0d6e09fc269532e",
          "sha": "773ceb532755ebeb46c618ada0d6e09fc269532e",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/773ceb532755ebeb46c618ada0d6e09fc269532e"
        }
      ],
      "message": "test: validate duplicate detection in `CheckTransaction`\n\nThe `CheckTransaction` validation function in https://github.com/bitcoin/bitcoin/blob/master/src/consensus/tx_check.cpp#L41-L45 relies on a correct ordering relation for detecting duplicate transaction inputs.\n\nThis update to the tests ensures that:\n* Accurate detection of duplicates: Beyond trivial cases (e.g., two identical inputs), duplicates are detected correctly in more complex scenarios.\n* Consistency across methods: Both sorted sets and hash-based sets behave identically when detecting duplicates for `COutPoint` and related values.\n* Robust ordering and equality relations: The function maintains expected behavior for ordering and equality checks.\n\nUsing randomized testing with shuffled inputs (to avoid any remaining bias introduced), the enhanced test validates that `CheckTransaction` remains robust and reliable across various input configurations. It confirms identical behavior to a hashing-based duplicate detection mechanism, ensuring consistency and correctness.\n\nTo make sure the new branches in the follow-up commits will be covered, `basic_transaction_tests` was extended a randomized test one comparing against the old implementation (and also an alternative duplicate). The iterations and ranges were chosen such that every new branch is expected to be hit once.",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-18T14:37:08Z"
      },
      "sha": "f4b7a7f701ada9411592cd1454d095fee2b4455a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDgxM2RkMDkzZjMwNDNhNjZjYTk1ZGI0NDFiYTcyN2MzY2NkZjFlYjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/813dd093f3043a66ca95db441ba727c3ccdf1eb4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/813dd093f3043a66ca95db441ba727c3ccdf1eb4",
      "tree": {
        "sha": "8803de6d56670e0e6ba904e1ee77b1443b3fc62c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/8803de6d56670e0e6ba904e1ee77b1443b3fc62c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f4b7a7f701ada9411592cd1454d095fee2b4455a",
          "sha": "f4b7a7f701ada9411592cd1454d095fee2b4455a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f4b7a7f701ada9411592cd1454d095fee2b4455a"
        }
      ],
      "message": "bench: measure `CheckBlock` speed separately from serialization\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          372,743.63 |            2,682.81 |    1.1% |     10.99 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,304,694.54 |              302.60 |    0.5% |     11.05 | `DuplicateInputs`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        1,096,261.84 |              912.19 |    0.1% |    7,963,390.88 |    3,487,375.26 |  2.283 |   1,266,941.00 |    1.8% |     11.03 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        8,366,309.48 |              119.53 |    0.0% |   23,865,177.67 |   26,620,160.23 |  0.897 |   5,972,887.41 |    4.0% |     10.78 | `DuplicateInputs`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-18T10:43:26Z"
      },
      "sha": "813dd093f3043a66ca95db441ba727c3ccdf1eb4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI2ZmJkOWQ0ZDg4MGIxMzc3YjczZDVhYTU4MWQwMzI0ZDk2N2ZlN2Q",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/26fbd9d4d880b1377b73d5aa581d0324d967fe7d",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/26fbd9d4d880b1377b73d5aa581d0324d967fe7d",
      "tree": {
        "sha": "d655a0de091275020bac33d4c55f9e6645ea770d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d655a0de091275020bac33d4c55f9e6645ea770d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/813dd093f3043a66ca95db441ba727c3ccdf1eb4",
          "sha": "813dd093f3043a66ca95db441ba727c3ccdf1eb4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/813dd093f3043a66ca95db441ba727c3ccdf1eb4"
        }
      ],
      "message": "bench: add `ProcessTransactionBench` to measure `CheckBlock` in context\n\nThe newly introduced `ProcessTransactionBench` incorporates multiple steps in the validation pipeline, offering a more comprehensive view of `CheckBlock` performance within a realistic transaction validation context.\n\nPrevious microbenchmarks, such as DeserializeAndCheckBlockTest and DuplicateInputs, focused on isolated aspects of transaction and block validation. While these tests provided valuable insights for targeted profiling, they lacked context regarding the broader validation process, where interactions between components play a critical role.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|            9,585.10 |          104,328.55 |    0.1% |     11.03 | `ProcessTransactionBench`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|           56,199.57 |           17,793.73 |    0.1% |      229,263.01 |      178,766.31 |  1.282 |      15,509.97 |    0.5% |     10.91 | `ProcessTransactionBench`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-21T13:01:31Z"
      },
      "sha": "26fbd9d4d880b1377b73d5aa581d0324d967fe7d"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGIzOTQzZmQ4ZmQwZjUyNTVjMjY4OGMwMTI1Zjg3NDMyMjEyZDQ2MGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3943fd8fd0f5255c2688c0125f87432212d460b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b3943fd8fd0f5255c2688c0125f87432212d460b",
      "tree": {
        "sha": "19db48a3ec9a27037f3efb2dae663453a540cd6c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/19db48a3ec9a27037f3efb2dae663453a540cd6c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/26fbd9d4d880b1377b73d5aa581d0324d967fe7d",
          "sha": "26fbd9d4d880b1377b73d5aa581d0324d967fe7d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/26fbd9d4d880b1377b73d5aa581d0324d967fe7d"
        }
      ],
      "message": "optimization: move duplicate checks outside of coinbase branch\n\n`IsCoinBase` means single input with NULL prevout, so it makes sense to restrict duplicate check to non-coinbase transactions only.\nThe behavior is the same as before, except that single-input-transactions aren't checked for duplicates anymore (~70-90% of the cases, see https://transactionfee.info/charts/transactions-1in).\nI've added braces to the conditions and loops to simplify review of followup commits.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          335,917.12 |            2,976.92 |    1.3% |     11.01 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,286,337.42 |              304.29 |    1.1% |     10.90 | `DuplicateInputs`\n|            9,561.02 |          104,591.35 |    0.2% |     11.02 | `ProcessTransactionBench`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-25T13:07:24Z"
      },
      "sha": "b3943fd8fd0f5255c2688c0125f87432212d460b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDA3OTEzYTExYjI4NTQ1MTgwZWYwMDg1YWZmMjkyYjgzZDc2ZmMzOGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/07913a11b28545180ef0085aff292b83d76fc38a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/07913a11b28545180ef0085aff292b83d76fc38a",
      "tree": {
        "sha": "c690f32a81298ccd59fe4729ba79c23ab6fadb09",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/c690f32a81298ccd59fe4729ba79c23ab6fadb09"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b3943fd8fd0f5255c2688c0125f87432212d460b",
          "sha": "b3943fd8fd0f5255c2688c0125f87432212d460b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b3943fd8fd0f5255c2688c0125f87432212d460b"
        }
      ],
      "message": "optimization: simplify duplicate checks for trivial inputs\n\nNo need to create a set for checking duplicates for two-input-transactions.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          314,137.30 |            3,183.32 |    1.2% |     11.04 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|        3,220,592.73 |              310.50 |    1.3% |     10.92 | `DuplicateInputs`\n|            9,425.98 |          106,089.77 |    0.3% |     11.00 | `ProcessTransactionBench`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-17T21:39:59Z"
      },
      "sha": "07913a11b28545180ef0085aff292b83d76fc38a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGY1ZjA3YjE1ODZmMTM5MWFkMGUxN2I0Zjc1MmZlOGZjNmJkNmQ3OTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5f07b1586f1391ad0e17b4f752fe8fc6bd6d796",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f5f07b1586f1391ad0e17b4f752fe8fc6bd6d796",
      "tree": {
        "sha": "fd5ca164adaaeb2180a94ba59b932f67de3f8b1a",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/fd5ca164adaaeb2180a94ba59b932f67de3f8b1a"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/07913a11b28545180ef0085aff292b83d76fc38a",
          "sha": "07913a11b28545180ef0085aff292b83d76fc38a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/07913a11b28545180ef0085aff292b83d76fc38a"
        }
      ],
      "message": "optimization: replace tree with sorted vector\n\nA pre-sized vector retains locality (enabling SIMD operations), speeding up sorting and equality checks.\nIt's also simpler (therefore more reliable) than a sorted set. It also causes less memory fragmentation.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          181,922.54 |            5,496.85 |    0.2% |     10.98 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          997,739.30 |            1,002.27 |    1.0% |     10.94 | `DuplicateInputs`\n|            9,449.28 |          105,828.15 |    0.3% |     10.99 | `ProcessTransactionBench`\n\nCo-authored-by: Pieter Wuille <pieter@wuille.net>",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-18T10:54:47Z"
      },
      "sha": "f5f07b1586f1391ad0e17b4f752fe8fc6bd6d796"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGI5ZDljYzJiNmNiNzc5NmUyODQwODYwYTNlMGRlY2UwMzkwZTdkMTE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9d9cc2b6cb7796e2840860a3e0dece0390e7d11",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/b9d9cc2b6cb7796e2840860a3e0dece0390e7d11",
      "tree": {
        "sha": "d42d2a00eb453677d984bdb45de38c10dbda3647",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d42d2a00eb453677d984bdb45de38c10dbda3647"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f5f07b1586f1391ad0e17b4f752fe8fc6bd6d796",
          "sha": "f5f07b1586f1391ad0e17b4f752fe8fc6bd6d796",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f5f07b1586f1391ad0e17b4f752fe8fc6bd6d796"
        }
      ],
      "message": "optimization: look for NULL prevouts in the sorted values\n\nFor the 2 input case we simply check them both, like we did with equality.\n\nFor the general case, we take advantage of sorting, making invalid value detection constant time instead of linear in the worst case.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='CheckBlockBench|DuplicateInputs|ProcessTransactionBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|            ns/block |             block/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          179,971.00 |            5,556.45 |    0.3% |     11.02 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|          963,177.98 |            1,038.23 |    1.7% |     10.92 | `DuplicateInputs`\n|            9,410.90 |          106,259.75 |    0.3% |     11.01 | `ProcessTransactionBench`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|            ns/block |             block/s |    err% |       ins/block |       cyc/block |    IPC |      bra/block |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|          834,855.94 |            1,197.81 |    0.0% |    6,518,548.86 |    2,656,039.78 |  2.454 |     919,160.84 |    1.5% |     10.78 | `CheckBlockBench`\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|        4,261,492.75 |              234.66 |    0.0% |   17,379,823.40 |   13,559,793.33 |  1.282 |   4,265,714.28 |    3.4% |     11.00 | `DuplicateInputs`\n|           55,819.53 |           17,914.88 |    0.1% |      227,828.15 |      177,520.09 |  1.283 |      15,184.36 |    0.4% |     10.91 | `ProcessTransactionBench`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-25T13:24:02Z"
      },
      "sha": "b9d9cc2b6cb7796e2840860a3e0dece0390e7d11"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGZlMzNmMmI4YjljNTU5MmQyYmExZGZiZDg2ZTEzYzQyZGFlOGFjYTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe33f2b8b9c5592d2ba1dfbd86e13c42dae8aca5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/fe33f2b8b9c5592d2ba1dfbd86e13c42dae8aca5",
      "tree": {
        "sha": "726fa15eb9bf73573aae3fa9855c553616a1033d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/726fa15eb9bf73573aae3fa9855c553616a1033d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/b9d9cc2b6cb7796e2840860a3e0dece0390e7d11",
          "sha": "b9d9cc2b6cb7796e2840860a3e0dece0390e7d11",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/b9d9cc2b6cb7796e2840860a3e0dece0390e7d11"
        }
      ],
      "message": "coins: bump default LevelDB write batch size to 64 MiB\n\nThe UTXO set has grown significantly, and flushing it from memory to LevelDB often takes over 20 minutes after a successful IBD with large dbcache values.\nThe final UTXO set is written to disk in batches, which LevelDB sorts into SST files.\nBy increasing the default batch size, we can reduce overhead from repeated compaction cycles, minimize constant overhead per batch, and achieve more sequential writes.\n\nExperiments with different batch sizes (loaded via assumeutxo at block 840k, then measuring final flush time) show that 64 MiB batches significantly reduce flush time without notably increasing memory usage:\n\n| dbbatchsize | flush_sum (ms) |\n|-------------|----------------|\n| 8 MiB       | ~240,000       |\n| 16 MiB      | ~220,000       |\n| 32 MiB      | ~200,000       |\n| *64 MiB*    | *~150,000*     |\n| 128 MiB     | ~156,000       |\n| 256 MiB     | ~166,000       |\n| 512 MiB     | ~186,000       |\n| 1 GiB       | ~186,000       |\n\nChecking the impact of a `-reindex-chainstate` with `-stopatheight=878000` and `-dbcache=30000` gives:\n16 << 20\n```\n2025-01-12T07:31:05Z Flushed fee estimates to fee_estimates.dat.\n2025-01-12T07:31:05Z [warning] Flushing large (26 GiB) UTXO set to disk, it may take several minutes\n2025-01-12T07:53:51Z Shutdown: done\n```\nFlush time: 22 minutes and 46 seconds\n\n64 >> 20\n```\n2025-01-12T18:30:00Z Flushed fee estimates to fee_estimates.dat.\n2025-01-12T18:30:00Z [warning] Flushing large (26 GiB) UTXO set to disk, it may take several minutes\n2025-01-12T18:44:43Z Shutdown: done\n```\nFlush time: ~14 minutes 43 seconds.",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-01-05T20:44:27Z"
      },
      "sha": "fe33f2b8b9c5592d2ba1dfbd86e13c42dae8aca5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDRiZDg0NzAxOTk2NmM1NmE4YjJkYzlhZGY5MWUyZTI1YWU1M2RhYjQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4bd847019966c56a8b2dc9adf91e2e25ae53dab4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/4bd847019966c56a8b2dc9adf91e2e25ae53dab4",
      "tree": {
        "sha": "0860137b9f3e02786a453d009388ebf0291dc315",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0860137b9f3e02786a453d009388ebf0291dc315"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/fe33f2b8b9c5592d2ba1dfbd86e13c42dae8aca5",
          "sha": "fe33f2b8b9c5592d2ba1dfbd86e13c42dae8aca5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/fe33f2b8b9c5592d2ba1dfbd86e13c42dae8aca5"
        }
      ],
      "message": "bench: Add COutPoint and SaltedOutpointHasher benchmarks\n\nThis commit introduces new benchmarks to measure the performance of various operations using\nSaltedOutpointHasher, including hash computation, set operations, and set creation.\n\nThese benchmarks are intended to provide insights about coin caching performance (e.g. during IBD).\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='SaltedOutpointHasherBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|               58.60 |       17,065,922.04 |    0.3% |     11.02 | `SaltedOutpointHasherBench_create_set`\n|               11.97 |       83,576,684.83 |    0.1% |     11.01 | `SaltedOutpointHasherBench_hash`\n|               14.50 |       68,985,850.12 |    0.3% |     10.96 | `SaltedOutpointHasherBench_match`\n|               13.90 |       71,942,033.47 |    0.4% |     11.03 | `SaltedOutpointHasherBench_mismatch`\n\n> C++ compiler .......................... GNU 13.3.0\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|              136.76 |        7,312,133.16 |    0.0% |        1,086.67 |          491.12 |  2.213 |         119.54 |    1.1% |     11.01 | `SaltedOutpointHasherBench_create_set`\n|               23.82 |       41,978,882.62 |    0.0% |          252.01 |           85.57 |  2.945 |           4.00 |    0.0% |     11.00 | `SaltedOutpointHasherBench_hash`\n|               60.42 |       16,549,695.42 |    0.1% |          460.51 |          217.04 |  2.122 |          21.00 |    1.4% |     10.99 | `SaltedOutpointHasherBench_match`\n|               78.66 |       12,713,595.35 |    0.1% |          555.59 |          282.52 |  1.967 |          20.19 |    2.2% |     10.74 | `SaltedOutpointHasherBench_mismatch`",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2024-06-21T16:00:14Z"
      },
      "sha": "4bd847019966c56a8b2dc9adf91e2e25ae53dab4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUzMTllNmI3ZTk5ZGU2YzNmNmY4ZWUxZDM3ZTUwZjExMjBkOThmZjE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5319e6b7e99de6c3f6f8ee1d37e50f1120d98ff1",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5319e6b7e99de6c3f6f8ee1d37e50f1120d98ff1",
      "tree": {
        "sha": "197c4ff9904b17118ebc89c9d677abb6c5b5e330",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/197c4ff9904b17118ebc89c9d677abb6c5b5e330"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/4bd847019966c56a8b2dc9adf91e2e25ae53dab4",
          "sha": "4bd847019966c56a8b2dc9adf91e2e25ae53dab4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/4bd847019966c56a8b2dc9adf91e2e25ae53dab4"
        }
      ],
      "message": "test: Rename k1/k2 to k0/k1 for consistency",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-02-01T18:01:36Z"
      },
      "sha": "5319e6b7e99de6c3f6f8ee1d37e50f1120d98ff1"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDI2MDNhYTFkMmIyYWZkNzgyMGI2Y2E2NDhiNDQzZmIyYTcwMmNlYzQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2603aa1d2b2afd7820b6ca648b443fb2a702cec4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/2603aa1d2b2afd7820b6ca648b443fb2a702cec4",
      "tree": {
        "sha": "3c973243679954082d4ff898fabe254987609475",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3c973243679954082d4ff898fabe254987609475"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5319e6b7e99de6c3f6f8ee1d37e50f1120d98ff1",
          "sha": "5319e6b7e99de6c3f6f8ee1d37e50f1120d98ff1",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5319e6b7e99de6c3f6f8ee1d37e50f1120d98ff1"
        }
      ],
      "message": "refactor: Extract C0-C3 Siphash constants",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-02-01T18:16:17Z"
      },
      "sha": "2603aa1d2b2afd7820b6ca648b443fb2a702cec4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDZmMGFjOGI2NDM2YzNhNWQ2OGIzODU4YzllNWY1N2U3ZjYyZTcwZDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/6f0ac8b6436c3a5d68b3858c9e5f57e7f62e70d5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/6f0ac8b6436c3a5d68b3858c9e5f57e7f62e70d5",
      "tree": {
        "sha": "5e5d8db3294fe38599a9d379592f520f98ce00c9",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/5e5d8db3294fe38599a9d379592f520f98ce00c9"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/2603aa1d2b2afd7820b6ca648b443fb2a702cec4",
          "sha": "2603aa1d2b2afd7820b6ca648b443fb2a702cec4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/2603aa1d2b2afd7820b6ca648b443fb2a702cec4"
        }
      ],
      "message": "optimization: refactor: Introduce Uint256ExtraSipHasher to cache SipHash constant state\n\nPreviously, only k0 and k1 were stored, causing the constant xor operations to be recomputed in every call to `SipHashUint256Extra`.\nThis commit adds a dedicated `Uint256ExtraSipHasher` class that caches the initial state (v0-v3) and to perform the `SipHash` computation on a `uint256` (with an extra parameter), hiding the constant computation details from higher-level code and improving efficiency.\nThis basically brings the precalculations in the `CSipHasher` constructor to the `uint256` specialized SipHash implementation.\n\n> cmake -B build -DBUILD_BENCH=ON -DCMAKE_BUILD_TYPE=Release && cmake --build build -j$(nproc) && build/src/bench/bench_bitcoin -filter='SaltedOutpointHasherBench' -min-time=10000\n\n> C++ compiler .......................... AppleClang 16.0.0.16000026\n\n|               ns/op |                op/s |    err% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------:|:----------\n|               57.27 |       17,462,299.19 |    0.1% |     11.02 | `SaltedOutpointHasherBench_create_set`\n|               11.24 |       88,997,888.48 |    0.3% |     11.04 | `SaltedOutpointHasherBench_hash`\n|               13.91 |       71,902,014.20 |    0.2% |     11.01 | `SaltedOutpointHasherBench_match`\n|               13.29 |       75,230,390.31 |    0.1% |     11.00 | `SaltedOutpointHasherBench_mismatch`\n\ncompared to master:\ncreate_set - 17,462,299.19/17,065,922.04 - 2.3% faster\nhash       - 88,997,888.48/83,576,684.83 - 6.4% faster\nmatch      - 71,902,014.20/68,985,850.12 - 4.2% faster\nmismatch   - 75,230,390.31/71,942,033.47 - 4.5% faster\n\n> C++ compiler .......................... GNU 13.3.0\n\n|               ns/op |                op/s |    err% |          ins/op |          cyc/op |    IPC |         bra/op |   miss% |     total | benchmark\n|--------------------:|--------------------:|--------:|----------------:|----------------:|-------:|---------------:|--------:|----------:|:----------\n|              135.38 |        7,386,349.49 |    0.0% |        1,078.19 |          486.16 |  2.218 |         119.56 |    1.1% |     11.00 | `SaltedOutpointHasherBench_create_set`\n|               23.67 |       42,254,558.08 |    0.0% |          247.01 |           85.01 |  2.906 |           4.00 |    0.0% |     11.00 | `SaltedOutpointHasherBench_hash`\n|               58.95 |       16,962,220.14 |    0.1% |          446.55 |          211.74 |  2.109 |          20.86 |    1.4% |     11.01 | `SaltedOutpointHasherBench_match`\n|               76.98 |       12,991,047.69 |    0.1% |          548.93 |          276.50 |  1.985 |          20.25 |    2.3% |     10.72 | `SaltedOutpointHasherBench_mismatch`\n\ncompared to master:\ncreate_set -  7,386,349.49/7,312,133.16  - 1% faster\nhash       - 42,254,558.08/41,978,882.62 - 0.6% faster\nmatch      - 16,962,220.14/16,549,695.42 - 2.4% faster\nmismatch   - 12,991,047.69/12,713,595.35 - 2% faster",
      "committer": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-03-11T12:46:28Z"
      },
      "author": {
        "name": "Lőrinc",
        "email": "pap.lorinc@gmail.com",
        "date": "2025-02-01T18:21:34Z"
      },
      "sha": "6f0ac8b6436c3a5d68b3858c9e5f57e7f62e70d5"
    },
    {
      "event": "mentioned",
      "id": 16717009146,
      "node_id": "MEE_lADOABII586tt8Q0zwAAAAPkaVD6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009146",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:17Z"
    },
    {
      "event": "subscribed",
      "id": 16717009173,
      "node_id": "SE_lADOABII586tt8Q0zwAAAAPkaVEV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009173",
      "actor": {
        "login": "andrewtoth",
        "id": 237213,
        "node_id": "MDQ6VXNlcjIzNzIxMw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/237213?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/andrewtoth",
        "html_url": "https://github.com/andrewtoth",
        "followers_url": "https://api.github.com/users/andrewtoth/followers",
        "following_url": "https://api.github.com/users/andrewtoth/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/andrewtoth/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/andrewtoth/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/andrewtoth/subscriptions",
        "organizations_url": "https://api.github.com/users/andrewtoth/orgs",
        "repos_url": "https://api.github.com/users/andrewtoth/repos",
        "events_url": "https://api.github.com/users/andrewtoth/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/andrewtoth/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:17Z"
    },
    {
      "event": "mentioned",
      "id": 16717009198,
      "node_id": "MEE_lADOABII586tt8Q0zwAAAAPkaVEu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009198",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:17Z"
    },
    {
      "event": "subscribed",
      "id": 16717009217,
      "node_id": "SE_lADOABII586tt8Q0zwAAAAPkaVFB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009217",
      "actor": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:17Z"
    },
    {
      "event": "mentioned",
      "id": 16717009243,
      "node_id": "MEE_lADOABII586tt8Q0zwAAAAPkaVFb",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009243",
      "actor": {
        "login": "mlori",
        "id": 5552611,
        "node_id": "MDQ6VXNlcjU1NTI2MTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5552611?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mlori",
        "html_url": "https://github.com/mlori",
        "followers_url": "https://api.github.com/users/mlori/followers",
        "following_url": "https://api.github.com/users/mlori/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mlori/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mlori/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mlori/subscriptions",
        "organizations_url": "https://api.github.com/users/mlori/orgs",
        "repos_url": "https://api.github.com/users/mlori/repos",
        "events_url": "https://api.github.com/users/mlori/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mlori/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:18Z"
    },
    {
      "event": "subscribed",
      "id": 16717009270,
      "node_id": "SE_lADOABII586tt8Q0zwAAAAPkaVF2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009270",
      "actor": {
        "login": "mlori",
        "id": 5552611,
        "node_id": "MDQ6VXNlcjU1NTI2MTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5552611?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mlori",
        "html_url": "https://github.com/mlori",
        "followers_url": "https://api.github.com/users/mlori/followers",
        "following_url": "https://api.github.com/users/mlori/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mlori/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mlori/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mlori/subscriptions",
        "organizations_url": "https://api.github.com/users/mlori/orgs",
        "repos_url": "https://api.github.com/users/mlori/repos",
        "events_url": "https://api.github.com/users/mlori/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mlori/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:18Z"
    },
    {
      "event": "mentioned",
      "id": 16717009288,
      "node_id": "MEE_lADOABII586tt8Q0zwAAAAPkaVGI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009288",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:18Z"
    },
    {
      "event": "subscribed",
      "id": 16717009313,
      "node_id": "SE_lADOABII586tt8Q0zwAAAAPkaVGh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009313",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:18Z"
    },
    {
      "event": "mentioned",
      "id": 16717009343,
      "node_id": "MEE_lADOABII586tt8Q0zwAAAAPkaVG_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009343",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:18Z"
    },
    {
      "event": "subscribed",
      "id": 16717009367,
      "node_id": "SE_lADOABII586tt8Q0zwAAAAPkaVHX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717009367",
      "actor": {
        "login": "martinus",
        "id": 14386,
        "node_id": "MDQ6VXNlcjE0Mzg2",
        "avatar_url": "https://avatars.githubusercontent.com/u/14386?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/martinus",
        "html_url": "https://github.com/martinus",
        "followers_url": "https://api.github.com/users/martinus/followers",
        "following_url": "https://api.github.com/users/martinus/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/martinus/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/martinus/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/martinus/subscriptions",
        "organizations_url": "https://api.github.com/users/martinus/orgs",
        "repos_url": "https://api.github.com/users/martinus/repos",
        "events_url": "https://api.github.com/users/martinus/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/martinus/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:18Z"
    },
    {
      "event": "commented",
      "id": 2718430956,
      "node_id": "IC_kwDOABII586iB_bs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2718430956",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:20Z",
      "updated_at": "2025-03-12T16:20:21Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32043.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\nA summary of reviews will appear here.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32043#issuecomment-2718430956",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32043"
    },
    {
      "event": "renamed",
      "id": 16717010545,
      "node_id": "RTE_lADOABII586tt8Q0zwAAAAPkaVZx",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717010545",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:20:23Z",
      "rename": {
        "from": "[IBD] - Tracking PR for speeding up Initial Block Download ",
        "to": "[IBD] - Tracking PR for speeding up Initial Block Download"
      }
    },
    {
      "event": "renamed",
      "id": 16717450799,
      "node_id": "RTE_lADOABII586tt8Q0zwAAAAPkcA4v",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16717450799",
      "actor": {
        "login": "l0rinc",
        "id": 1841944,
        "node_id": "MDQ6VXNlcjE4NDE5NDQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1841944?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/l0rinc",
        "html_url": "https://github.com/l0rinc",
        "followers_url": "https://api.github.com/users/l0rinc/followers",
        "following_url": "https://api.github.com/users/l0rinc/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/l0rinc/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/l0rinc/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/l0rinc/subscriptions",
        "organizations_url": "https://api.github.com/users/l0rinc/orgs",
        "repos_url": "https://api.github.com/users/l0rinc/repos",
        "events_url": "https://api.github.com/users/l0rinc/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/l0rinc/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T16:44:01Z",
      "rename": {
        "from": "[IBD] - Tracking PR for speeding up Initial Block Download",
        "to": "[IBD] Tracking PR for speeding up Initial Block Download"
      }
    },
    {
      "event": "commented",
      "id": 2718577789,
      "node_id": "IC_kwDOABII586iCjR9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2718577789",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T17:14:11Z",
      "updated_at": "2025-03-12T17:14:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for creating this. This should make it easier to navigate the other PRs and discuss the overall topic of IBD performance and benchmarking without needing to necessarily repeat it in the individual PRs.\r\n\r\nWould be useful to have concept ACKs/NACKs here from others who know more about performance and benchmarking. But from from what I can tell the individual optimizations do not seem very complicated and seem like they should be justified.\r\n\r\n---\r\n\r\nOne suggestion for the PR description above would be to directly link to the PRs comprising this change in the summary, maybe pointing out any where review should be focused. Current list seems to be:\r\n\r\n- [ ] #31551 \r\n- [ ] #31144\r\n- [ ] #31645\r\n- [ ] #31868\r\n- [ ] #31682\r\n- [ ] #30442",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32043#issuecomment-2718577789",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32043"
    },
    {
      "event": "labeled",
      "id": 16718109911,
      "node_id": "LE_lADOABII586tt8Q0zwAAAAPkehzX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16718109911",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T17:28:18Z",
      "label": {
        "name": "Block storage",
        "color": "000000"
      }
    },
    {
      "event": "labeled",
      "id": 16718114354,
      "node_id": "LE_lADOABII586tt8Q0zwAAAAPkei4y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16718114354",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-12T17:28:33Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    }
  ],
  "comments": []
}