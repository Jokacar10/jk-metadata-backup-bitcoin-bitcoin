{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326",
    "id": 2473809437,
    "node_id": "PR_kwDOABII586Tc1Yd",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32326",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32326.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32326.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
    "number": 32326,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "net: improve the interface around FindNode() and avoid a recursive mutex lock",
    "user": {
      "login": "vasild",
      "id": 266751,
      "node_id": "MDQ6VXNlcjI2Njc1MQ==",
      "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vasild",
      "html_url": "https://github.com/vasild",
      "followers_url": "https://api.github.com/users/vasild/followers",
      "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
      "organizations_url": "https://api.github.com/users/vasild/orgs",
      "repos_url": "https://api.github.com/users/vasild/repos",
      "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/vasild/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "`CConnman::FindNode()` would lock `m_nodes_mutex`, find the node in `m_nodes`, release the mutex and return the node. The current code is safe but it is a dangerous interface where a caller may end up using the node returned from `FindNode()` without owning `m_nodes_mutex` and without having that node's reference count incremented.\r\n\r\nChange `FindNode()` to return a boolean since all but one of its callers used its return value to check whether a node exists and did not do anything else with the return value.\r\n\r\nRemove a recursive lock on `m_nodes_mutex`.\r\n\r\nRename `FindNode()` to better describe what it does.\r\n\r\n",
    "labels": [
      {
        "id": 98298007,
        "node_id": "MDU6TGFiZWw5ODI5ODAwNw==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/P2P",
        "name": "P2P",
        "color": "006b75",
        "default": false
      }
    ],
    "created_at": "2025-04-22T14:36:28Z",
    "updated_at": "2025-07-03T01:25:16Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "9a26786a33166dca9860a4b82eeed2b0f2a38c80",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      {
        "login": "shahsb",
        "id": 20738488,
        "node_id": "MDQ6VXNlcjIwNzM4NDg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20738488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shahsb",
        "html_url": "https://github.com/shahsb",
        "followers_url": "https://api.github.com/users/shahsb/followers",
        "following_url": "https://api.github.com/users/shahsb/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shahsb/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shahsb/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shahsb/subscriptions",
        "organizations_url": "https://api.github.com/users/shahsb/orgs",
        "repos_url": "https://api.github.com/users/shahsb/repos",
        "events_url": "https://api.github.com/users/shahsb/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shahsb/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "vasild:findnode",
      "ref": "findnode",
      "sha": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 120608826,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMjA2MDg4MjY=",
        "name": "bitcoin",
        "full_name": "vasild/bitcoin",
        "owner": {
          "login": "vasild",
          "id": 266751,
          "node_id": "MDQ6VXNlcjI2Njc1MQ==",
          "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/vasild",
          "html_url": "https://github.com/vasild",
          "followers_url": "https://api.github.com/users/vasild/followers",
          "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
          "organizations_url": "https://api.github.com/users/vasild/orgs",
          "repos_url": "https://api.github.com/users/vasild/repos",
          "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/vasild/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/vasild/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/vasild/bitcoin",
        "archive_url": "https://api.github.com/repos/vasild/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/vasild/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/vasild/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/vasild/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/vasild/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/vasild/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/vasild/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/vasild/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/vasild/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/vasild/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/vasild/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/vasild/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/vasild/bitcoin/events",
        "forks_url": "https://api.github.com/repos/vasild/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/vasild/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/vasild/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/vasild/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/vasild/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/vasild/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/vasild/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/vasild/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/vasild/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/vasild/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/vasild/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/vasild/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/vasild/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/vasild/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/vasild/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/vasild/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:vasild/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/vasild/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/vasild/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/vasild/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/vasild/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/vasild/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/vasild/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/vasild/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/vasild/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/vasild/bitcoin/hooks",
        "svn_url": "https://github.com/vasild/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 1,
        "stargazers_count": 7,
        "watchers_count": 7,
        "size": 259103,
        "default_branch": "master",
        "open_issues_count": 2,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-06-26T07:17:07Z",
        "created_at": "2018-02-07T11:52:47Z",
        "updated_at": "2025-06-20T07:58:07Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "5af757bb78411f71c7b63cca069be11c4f184990",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37458,
        "stargazers_count": 84383,
        "watchers_count": 84383,
        "size": 288636,
        "default_branch": "master",
        "open_issues_count": 741,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-02T23:01:53Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-02T23:03:54Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 38,
    "deletions": 53,
    "changed_files": 4,
    "commits": 3,
    "review_comments": 33,
    "comments": 15
  },
  "events": [
    {
      "event": "commented",
      "id": 2821549480,
      "node_id": "IC_kwDOABII586oLW2o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2821549480",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T14:36:32Z",
      "updated_at": "2025-07-03T01:25:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32326.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [hodlinator](https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2845962709) |\n| Concept ACK | [shahsb](https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2790763507), [theuni](https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2831361039) |\n| Stale ACK | [jonatack](https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2822019017) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#32394](https://github.com/bitcoin/bitcoin/pull/32394) (net: make m_nodes_mutex non-recursive by vasild)\n* [#32015](https://github.com/bitcoin/bitcoin/pull/32015) (net: replace manual reference counting of CNode with shared_ptr by vasild)\n* [#30988](https://github.com/bitcoin/bitcoin/pull/30988) (Split CConnman by vasild)\n* [#29415](https://github.com/bitcoin/bitcoin/pull/29415) (Broadcast own transactions only via short-lived Tor or I2P connections by vasild)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2821549480",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "labeled",
      "id": 17355212893,
      "node_id": "LE_lADOABII586zfK20zwAAAAQKc4hd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17355212893",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T14:36:43Z",
      "label": {
        "name": "P2P",
        "color": "006b75"
      }
    },
    {
      "event": "labeled",
      "id": 17355559777,
      "node_id": "LE_lADOABII586zfK20zwAAAAQKeNNh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17355559777",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T14:57:02Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2821611865,
      "node_id": "IC_kwDOABII586oLmFZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2821611865",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T14:57:03Z",
      "updated_at": "2025-04-22T14:57:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/40947126551</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2821611865",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "reviewed",
      "id": 2784433178,
      "node_id": "PRR_kwDOABII586l9xQa",
      "url": null,
      "actor": null,
      "commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2784433178",
      "submitted_at": "2025-04-22T14:59:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "reviewed",
      "id": 2784459702,
      "node_id": "PRR_kwDOABII586l93u2",
      "url": null,
      "actor": null,
      "commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2784459702",
      "submitted_at": "2025-04-22T15:07:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "commented",
      "id": 2821655105,
      "node_id": "IC_kwDOABII586oLwpB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2821655105",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T15:11:36Z",
      "updated_at": "2025-04-22T15:11:36Z",
      "author_association": "MEMBER",
      "body": "Review ACK 1e415d2cb703fcd1b622e5343fa264425601c8d modulo CI fixup\r\n\r\nHappy to see these methods see an update.\r\n\r\nI tried adding `EXCLUSIVE_LOCKS_REQUIRED(!m_nodes_mutex)` to the declarations, but it looks like that lock is already held by some of their callers.",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2821655105",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17356131421,
      "node_id": "HRFPE_lADOABII586zfK20zwAAAAQKgYxd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17356131421",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "commit_url": "https://api.github.com/repos/vasild/bitcoin/commits/cc8f239663a0874c307efa30815b40d9ef40badb",
      "created_at": "2025-04-22T15:32:39Z"
    },
    {
      "event": "commented",
      "id": 2821716161,
      "node_id": "IC_kwDOABII586oL_jB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2821716161",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T15:33:19Z",
      "updated_at": "2025-04-22T15:33:19Z",
      "author_association": "CONTRIBUTOR",
      "body": "`1e415d2cb7...cc8f239663`: fix CI tidy",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2821716161",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "unlabeled",
      "id": 17357512957,
      "node_id": "UNLE_lADOABII586zfK20zwAAAAQKlqD9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17357512957",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T17:13:37Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2822019017,
      "node_id": "IC_kwDOABII586oNJfJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2822019017",
      "actor": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-22T17:32:58Z",
      "updated_at": "2025-04-22T17:32:58Z",
      "author_association": "MEMBER",
      "body": "ACK cc8f239663a0874c307efa30815b40d9ef40badb",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2822019017",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "reviewed",
      "id": 2785043300,
      "node_id": "PRR_kwDOABII586mAGNk",
      "url": null,
      "actor": null,
      "commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2785043300",
      "submitted_at": "2025-04-22T18:48:18Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "reviewed",
      "id": 2790161149,
      "node_id": "PRR_kwDOABII586mTnr9",
      "url": null,
      "actor": null,
      "commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK cc8f239663a0874c307efa30815b40d9ef40badb\r\n\r\nFixes thread-unsafe pattern (originally?) raised by me here: https://github.com/bitcoin/bitcoin/pull/32015#discussion_r1988127685\r\n(Even though current master is not susceptible to the found `CNode` being deleted randomly on another thread).",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2790161149",
      "submitted_at": "2025-04-24T09:56:16Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "reviewed",
      "id": 2790763507,
      "node_id": "PRR_kwDOABII586mV6vz",
      "url": null,
      "actor": null,
      "commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "commit_url": null,
      "created_at": null,
      "author_association": "NONE",
      "body": "Concept ACK",
      "user": {
        "login": "shahsb",
        "id": 20738488,
        "node_id": "MDQ6VXNlcjIwNzM4NDg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20738488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shahsb",
        "html_url": "https://github.com/shahsb",
        "followers_url": "https://api.github.com/users/shahsb/followers",
        "following_url": "https://api.github.com/users/shahsb/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shahsb/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shahsb/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shahsb/subscriptions",
        "organizations_url": "https://api.github.com/users/shahsb/orgs",
        "repos_url": "https://api.github.com/users/shahsb/repos",
        "events_url": "https://api.github.com/users/shahsb/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shahsb/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2790763507",
      "submitted_at": "2025-04-24T11:34:54Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "commented",
      "id": 2831361039,
      "node_id": "IC_kwDOABII586owyQP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2831361039",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-25T20:21:30Z",
      "updated_at": "2025-04-25T20:21:30Z",
      "author_association": "MEMBER",
      "body": "Is making `m_nodes_mutex` non-recursive a goal? That sounds nice to me and I'm not opposed, but I'd rather not make changes just to get halfway there.\r\n\r\nConcept ACK on turning the `FindNode`s into bools, though. That's a nice improvement.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2831361039",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "commented",
      "id": 2832116385,
      "node_id": "IC_kwDOABII586ozqqh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2832116385",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-26T12:35:06Z",
      "updated_at": "2025-04-26T12:35:06Z",
      "author_association": "MEMBER",
      "body": "> Is making `m_nodes_mutex` non-recursive a goal? That sounds nice to me and I'm not opposed, but I'd rather not make changes just to get halfway there.\r\n\r\nI'm curious how far we are from a non-recursive `m_nodes_mutex`?",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2832116385",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "commented",
      "id": 2835048806,
      "node_id": "IC_kwDOABII586o-2lm",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2835048806",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-28T12:14:58Z",
      "updated_at": "2025-04-28T12:14:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Is making `m_nodes_mutex` non-recursive a goal?\r\n\r\nNo, I did not think about that before you mentioned it. The goal here is to make the interface around `FindNode()` safer and simpler (don't return a possibly dangling pointer and don't return a pointer at all since callers can do with a boolean).\r\n\r\nI did mention dropping the recursive lock because I think less recursive locking is good, even if the mutex remains recursive.\r\n\r\n> I'm curious how far we are from a non-recursive `m_nodes_mutex`?\r\n\r\nThis far away:\r\n\r\n<details>\r\n<summary>[patch] make m_nodes_mutex non-recursive</summary>\r\n\r\n```diff\r\n--- i/src/net_processing.cpp\r\n+++ w/src/net_processing.cpp\r\n@@ -1284,29 +1284,29 @@ void PeerManagerImpl::MaybeSetPeerAsAnnouncingHeaderAndIDs(NodeId nodeid)\r\n                 std::swap(lNodesAnnouncingHeaderAndIDs.front(), *std::next(lNodesAnnouncingHeaderAndIDs.begin()));\r\n             }\r\n         }\r\n     }\r\n     m_connman.ForNode(nodeid, [this](CNode* pfrom) EXCLUSIVE_LOCKS_REQUIRED(::cs_main) {\r\n         AssertLockHeld(::cs_main);\r\n-        if (lNodesAnnouncingHeaderAndIDs.size() >= 3) {\r\n-            // As per BIP152, we only get 3 of our peers to announce\r\n-            // blocks using compact encodings.\r\n-            m_connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [this](CNode* pnodeStop){\r\n-                MakeAndPushMessage(*pnodeStop, NetMsgType::SENDCMPCT, /*high_bandwidth=*/false, /*version=*/CMPCTBLOCKS_VERSION);\r\n-                // save BIP152 bandwidth state: we select peer to be low-bandwidth\r\n-                pnodeStop->m_bip152_highbandwidth_to = false;\r\n-                return true;\r\n-            });\r\n-            lNodesAnnouncingHeaderAndIDs.pop_front();\r\n-        }\r\n         MakeAndPushMessage(*pfrom, NetMsgType::SENDCMPCT, /*high_bandwidth=*/true, /*version=*/CMPCTBLOCKS_VERSION);\r\n         // save BIP152 bandwidth state: we select peer to be high-bandwidth\r\n         pfrom->m_bip152_highbandwidth_to = true;\r\n         lNodesAnnouncingHeaderAndIDs.push_back(pfrom->GetId());\r\n         return true;\r\n     });\r\n+    if (lNodesAnnouncingHeaderAndIDs.size() > 3) {\r\n+        // As per BIP152, we only get 3 of our peers to announce\r\n+        // blocks using compact encodings.\r\n+        m_connman.ForNode(lNodesAnnouncingHeaderAndIDs.front(), [this](CNode* pnodeStop){\r\n+            MakeAndPushMessage(*pnodeStop, NetMsgType::SENDCMPCT, /*high_bandwidth=*/false, /*version=*/CMPCTBLOCKS_VERSION);\r\n+            // save BIP152 bandwidth state: we select peer to be low-bandwidth\r\n+            pnodeStop->m_bip152_highbandwidth_to = false;\r\n+            return true;\r\n+        });\r\n+        lNodesAnnouncingHeaderAndIDs.pop_front();\r\n+    }\r\n }\r\n \r\n bool PeerManagerImpl::TipMayBeStale()\r\n {\r\n     AssertLockHeld(cs_main);\r\n     const Consensus::Params& consensusParams = m_chainparams.GetConsensus();\r\n```\r\n</details>\r\n\r\nOn top of this PR, plus a pile of `EXCLUSIVE_LOCKS_REQUIRED(!m_nodes_mutex)` additions in `net.h`. Should I PR that (separately from the current PR)?",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2835048806",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "commented",
      "id": 2835177926,
      "node_id": "IC_kwDOABII586o_WHG",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2835177926",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-28T13:04:43Z",
      "updated_at": "2025-04-28T13:04:43Z",
      "author_association": "MEMBER",
      "body": "> On top of this PR, plus a pile of `EXCLUSIVE_LOCKS_REQUIRED(!m_nodes_mutex)` additions in `net.h`. Should I PR that (separately from the current PR)?\r\n\r\nI'd appreciate it. It would be good to cross `m_nodes_mutex` off the [list](https://github.com/bitcoin/bitcoin/issues/19303).",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2835177926",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "commented",
      "id": 2835618558,
      "node_id": "IC_kwDOABII586pBBr-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2835618558",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-28T15:21:27Z",
      "updated_at": "2025-04-28T15:21:27Z",
      "author_association": "MEMBER",
      "body": "> I'd appreciate it. It would be good to cross `m_nodes_mutex` off the [list](https://github.com/bitcoin/bitcoin/issues/19303).\r\n\r\nYeah, agreed. That's a good justification for the change to non-recursive here.\r\n\r\nLooking at that diff, it's not clear to me if it's safe to move that hunk out of `cs_main`, but we can review/test/argue about it in a new PR.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2835618558",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "convert_to_draft",
      "id": 17449016692,
      "node_id": "CTDE_lADOABII586zfK20zwAAAAQQCt10",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17449016692",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-29T06:47:01Z"
    },
    {
      "event": "commented",
      "id": 2837679823,
      "node_id": "IC_kwDOABII586pI47P",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2837679823",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-29T06:52:58Z",
      "updated_at": "2025-04-29T06:52:58Z",
      "author_association": "CONTRIBUTOR",
      "body": "Converted to draft, waiting for:\r\n\r\n* https://github.com/bitcoin/bitcoin/pull/32338 to make it\r\n* then change this PR to use naming as in https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2063650801\r\n\r\nFurther improvements away from this PR:\r\n* make `m_nodes_mutex` non-recursive, https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2835048806\r\n* assess all the checks that compare just the address or address+port and remove redundant ones and make the calls consistent regardless of whether `pzsDest` is set or not, https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2065614037",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2837679823",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "labeled",
      "id": 17463738241,
      "node_id": "LE_lADOABII586zfK20zwAAAAQQ63-B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17463738241",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-29T22:57:04Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17485426920,
      "node_id": "HRFPE_lADOABII586zfK20zwAAAAQSNnDo",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17485426920",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8ef769cc2d4a8a2cea47a2ea3835df91f669a85f",
      "commit_url": "https://api.github.com/repos/vasild/bitcoin/commits/8ef769cc2d4a8a2cea47a2ea3835df91f669a85f",
      "created_at": "2025-05-01T09:05:08Z"
    },
    {
      "event": "commented",
      "id": 2844423967,
      "node_id": "IC_kwDOABII586pincf",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2844423967",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-01T09:07:26Z",
      "updated_at": "2025-05-01T09:07:26Z",
      "author_association": "CONTRIBUTOR",
      "body": "`cc8f239663...8ef769cc2d`: rebase and use the naming:\r\n\r\n```cpp\r\nbool IsConnectedToAddrPort(const std::string& addr_port);\r\nbool IsConnectedToAddrPort(const CService& addr_port);\r\nbool IsConnectedToAddr(const CNetAddr& addr);\r\n```",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2844423967",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17485496211,
      "node_id": "HRFPE_lADOABII586zfK20zwAAAAQSN3-T",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17485496211",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "commit_url": "https://api.github.com/repos/vasild/bitcoin/commits/4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "created_at": "2025-05-01T09:13:22Z"
    },
    {
      "event": "commented",
      "id": 2844434880,
      "node_id": "IC_kwDOABII586piqHA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2844434880",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-01T09:13:54Z",
      "updated_at": "2025-05-01T09:13:54Z",
      "author_association": "CONTRIBUTOR",
      "body": "`8ef769cc2d...4f635d100d`: make the methods `const`",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2844434880",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "ready_for_review",
      "id": 17485501110,
      "node_id": "RFRE_lADOABII586zfK20zwAAAAQSN5K2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17485501110",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-01T09:13:56Z"
    },
    {
      "event": "unlabeled",
      "id": 17486298165,
      "node_id": "UNLE_lADOABII586zfK20zwAAAAQSQ7w1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17486298165",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-01T10:54:04Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2844725476,
      "node_id": "IC_kwDOABII586pjxDk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2844725476",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-01T12:13:11Z",
      "updated_at": "2025-05-01T12:13:11Z",
      "author_association": "CONTRIBUTOR",
      "body": "Made `m_nodes_mutex` non-recursive in https://github.com/bitcoin/bitcoin/pull/32394 which is this PR + one more commit.",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2844725476",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "reviewed",
      "id": 2811932998,
      "node_id": "PRR_kwDOABII586nmrFG",
      "url": null,
      "actor": null,
      "commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 4f635d100dd1ab5e83bb392d8fbee4a3f4400315\r\n\r\nConcept unchanged since [first ACK](https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2790161149).\r\n\r\nChanges since then:\r\n* Includes now merged #32338 which simplified `AlreadyConnectedToAddress()` (spawned from this PR: https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058384454)\r\n* Changed from `OutboundConnectedTo(Str|Service)` -> `IsConnectedToAddr(|Port) const` and `str_addr` -> `addr_port`, nice!\r\n* `AlreadyConnectedToAddress(const CAddress&)` -> `IsConnectedToAddr(const CNetAddr&) const`.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2811932998",
      "submitted_at": "2025-05-02T12:49:12Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "review_requested",
      "id": 17499570908,
      "node_id": "RRE_lADOABII586zfK20zwAAAAQTDkLc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17499570908",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-02T12:49:17Z",
      "requested_reviewer": {
        "login": "shahsb",
        "id": 20738488,
        "node_id": "MDQ6VXNlcjIwNzM4NDg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/20738488?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/shahsb",
        "html_url": "https://github.com/shahsb",
        "followers_url": "https://api.github.com/users/shahsb/followers",
        "following_url": "https://api.github.com/users/shahsb/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/shahsb/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/shahsb/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/shahsb/subscriptions",
        "organizations_url": "https://api.github.com/users/shahsb/orgs",
        "repos_url": "https://api.github.com/users/shahsb/repos",
        "events_url": "https://api.github.com/users/shahsb/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/shahsb/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 17499571109,
      "node_id": "RRE_lADOABII586zfK20zwAAAAQTDkOl",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17499571109",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-02T12:49:18Z",
      "requested_reviewer": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 17499571278,
      "node_id": "RRE_lADOABII586zfK20zwAAAAQTDkRO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17499571278",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-02T12:49:19Z",
      "requested_reviewer": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2813283415,
      "node_id": "PRR_kwDOABII586nr0xX",
      "url": null,
      "actor": null,
      "commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2813283415",
      "submitted_at": "2025-05-03T18:30:07Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    },
    {
      "event": "review_requested",
      "id": 17508434350,
      "node_id": "RRE_lADOABII586zfK20zwAAAAQTlYGu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17508434350",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-03T18:30:11Z",
      "requested_reviewer": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDIyZWQxMGUyNWViOTAwMDQ5ZjQ4YzJlOWYzMmE1Y2QzZmZmODM5YTg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22ed10e25eb900049f48c2e9f32a5cd3fff839a8",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/22ed10e25eb900049f48c2e9f32a5cd3fff839a8",
      "tree": {
        "sha": "2a762352d99ee84e4b157fa502757b4c8936ea60",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2a762352d99ee84e4b157fa502757b4c8936ea60"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 2a762352d99ee84e4b157fa502757b4c8936ea60\nparent 68ac9f116c0228a277f18f60ba2278b56356e6ac\nauthor Vasil Dimov <vd@FreeBSD.org> 1745316932 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1747384164 +0200\n\nnet: merge AlreadyConnectedToAddress() and FindNode(CNetAddr)\n\n`CConnman::AlreadyConnectedToAddress()` is the only caller of\n`CConnman::FindNode(CNetAddr)`, so merge the two in one function.\n\nThe unit test that checked whether `AlreadyConnectedToAddress()` ignores\nthe port is now unnecessary because now the function takes a `CNetAddr`\nargument. It has no access to the port.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQyBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmgm93oACgkQVN8G9ktV\ny78rsR/48mJu0NKyZSOaZBhA/NAXXbNbdZdgR2jLo3QYQzJOkx+lf5wz3BZXRiF1\nQ9Yow2c5SVdUKwaZL2y+O4IgqKuOUorXU9LK6DUO1LWUaEM+QS9jdCO63IUP0XZ4\n3KHZwYScoKOArTtiyqh2YzG4is5ZhKXyIxpDEgz81CP8YGdI54eoaH7CUPvT7SS7\nrcg5JwivMc7nmNTWH2pF/ZtOLPX6npBxF/XUGuV0VBcmzpGkpjS7+q1vT3BJhKPs\ncmoQxA+PoCICd4+xD/RrAfH2pec8tsMD3yGsJ92xQLBVzdKQIGzp0rWJvAwb6irB\nLz5I/w5XB0Z1MABapj9GsJ2dD8+46+kkZXGjNdZVXEsWvI1bakz/mYOQoBQPJ/j4\nEU62aP273bqOo0b0fuf8HqezouiNAFV9XPlHrJ0B/n9O9EAn5E1G0LpT0Znyq9VS\nArUyJPW4dU7BDXk/UPfRbHC3DP3QAnYQf4i1wrlD1D7mzmNQIoucPMZRRtwaKbap\nBTpMXdDjMmcH3iOBhiRDzAQ70dQ4ZqBZTEf7FXJUbcnU05PptBV2Ff5CZp+TIlFC\n/vOOT+/wiAgRH47fcDHlOQSzmXa2GbkhP8QSjZT5bLlkxsaEaJ/opssD2jA9iglw\nBDTM7z4+wSsaaVecoAvHoXaSY7+iHPIDmtO8uNHr2JUQMUs61i0SaSZIsPFweMoS\nbYc0L36k7jvzgZ+P4C03ZUblyS5INJNe4FbbjNs+1Wv+4S5Kg6k6fIWMPQSsmTy7\nMrQMx+/s9bzECWamtaahvlmPmobbYqt4M45uiVXlqHfP8C+RprYVZxpvhOAao/9b\ncawlBt8QD5DQUBSOcSU/gm4zDtKkIuyDhG8qq/lYDKiLCmPWUMqLOS65Wf9Qmoyk\nZhdfx1o4x03QM0SxHC6xx+1m/eKyqLdnGnZFntGLg5k4sZQT619aUmdgKgAKiM87\nm+xeJLPdRH09t5NFZ+HAgLxDGu8Zy5P/MqSJPWd0U6BZtCTyON4r/EU6pee3239g\nOuSL5ATe9I6+/lz1s1ku3J8i3hJuBkgM218t3+qTFoczRgAVzcNU+3Eayuap+4Qc\nO9XC2X5P0joan2tf9fZN4bNdYXzx1JKIJ8ewvGvDKZm8nSGvh8g3Q0MIPNyK66qQ\nHh/AVcL6iAOs8Q8UowlYTkIAnQtaI1NGKmN9JHZwbqumZTfCs2xqeo3vGOidivfx\nI34qinZknq94WUeI4oFTYwvJSIWar4sY5K8mmdum+PNYyc//UOqcntfJ+NCOfTOA\n4B5+SX9PNJm42vW4wbmpH3jKndy0ZoxxWCYF4pz30TxMAxMAu+1vV1FiHYUyKc61\n6XI5gjTvZj5IkZ/T1xNJ2+pYmlMK\n=IxQz\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/68ac9f116c0228a277f18f60ba2278b56356e6ac",
          "sha": "68ac9f116c0228a277f18f60ba2278b56356e6ac",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/68ac9f116c0228a277f18f60ba2278b56356e6ac"
        }
      ],
      "message": "net: merge AlreadyConnectedToAddress() and FindNode(CNetAddr)\n\n`CConnman::AlreadyConnectedToAddress()` is the only caller of\n`CConnman::FindNode(CNetAddr)`, so merge the two in one function.\n\nThe unit test that checked whether `AlreadyConnectedToAddress()` ignores\nthe port is now unnecessary because now the function takes a `CNetAddr`\nargument. It has no access to the port.",
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-05-16T08:29:24Z"
      },
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-04-22T10:15:32Z"
      },
      "sha": "22ed10e25eb900049f48c2e9f32a5cd3fff839a8"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg1ZTIwNDYxZGYxOTJkZmZjNzRhN2E1ZWRjNzVmNDk0YmNlNjYyYTQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85e20461df192dffc74a7a5edc75f494bce662a4",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/85e20461df192dffc74a7a5edc75f494bce662a4",
      "tree": {
        "sha": "e13cef55c852651af3814dc8a7ab960b93e3f3d0",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/e13cef55c852651af3814dc8a7ab960b93e3f3d0"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree e13cef55c852651af3814dc8a7ab960b93e3f3d0\nparent 22ed10e25eb900049f48c2e9f32a5cd3fff839a8\nauthor Vasil Dimov <vd@FreeBSD.org> 1745317954 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1747384222 +0200\n\nnet: avoid recursive m_nodes_mutex lock in DisconnectNode()\n\nHave `CConnman::DisconnectNode()` iterate `m_nodes` itself instead of\nusing `FindNode()`. This avoids recursive mutex lock and drops the only\ncaller of `FindNode()` which used the return value for something else\nthan a boolean found/notfound.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmgm954ACgkQVN8G9ktV\ny7/BcR//SXijUTP1st1uK5n4QjORyCrjUk6VqQvRwF8/qWAYaWpvrDjfPgUeLw0x\nvuikvp1uhkxNlXQKS0fRH0WpkhguThfUQDJjeR+zBgoeJ1Ozgx1RpEY3IOdsfl8E\ntzP3IIYrMklJCwh1V/ssZWj8TlfatyAkgfh5drVmX4RxY3kbQnjdBNgRipMuEQPD\nMgjNbzaI9cZQ/7UCf21m5Lxl58UPUNGGoMbj2NH77mHfnQjSEeu7A8CemnRZnRjs\nZhQSCy69QYb+1sHcDFm++PF64A6N0B97VR0WRKP3G0u89jKU0EXt1T4a+fvbC6YB\neLDmFwAF1dvqmievGjazk915JDTvMJhg9JS2QGBlK3QDLCw9+lcZGdOMhGERtBuC\na8HdGuHHdjEm/1Ibw6Me8gJLG1JC6qrHG/+TIF6fe3aDbsEu2iNhcbly2JCyCMPo\nLHapr2Ke4DjOMA4NJ1WGD2DkgFIe3FhVY7P+eX4xhKWFuebVk93hhWLGArLD4Izy\nDfajMBN1foU3w7GOvk5ni59oX92RteWatvZp/j6YWSXjr95FHjy8p7Y/hJxh4WIP\nB7qLTfkYMbFu9eiJ1rtdrcd932fkNSt7GhtKDCd1e6qKLAO5E1gIzsEz8iRF0boX\nKqqy3cdy4pTqPmv1fnT2FaIDZJRmoEp7C/Ha3m5medMFzX6OgclnUhwE3wRavC6t\nRFi/44SobN6sAtR6dvWEvhGubjdd/iNh9zV7tsiIbmcbWPlBa29udTD7sfP5fvMF\n8lC3ezV39rlv2gnD7o9UA4+Z3pOzAa++HC+cllRDIRCQsvzwt2yBo84mz51U8kPC\n2d6hgRHeN4/hkunW6+94l8x9xJH07A/wLHbPhANRXf91UY4VuGrp8KN+ljy1NEMC\nX27+RAo5QBJVsHAu1U1TlK6hLiO4TjClu4ynT0letEj9SPSeiF/on3TDW0/Tptwo\nBx5NCYpMXYC9r5OIzc1/f+wd73E4e8g/M5XSZ6oPFtaLhduE4uqqHq38JTFxAHR3\naq2ZlWnT0Fv0TswUvxT7r9NFRQTsWvbxcGBZFD1kFzZtubDMYAgsRdaHwqVBvehu\nCd+uJXeJVwIxBLYwCVQcpQOfn1RKze2UYxOzrKsIH8LPN7y4oCpahgS/XejDjyiD\nL26B+aKRnVKCAWo/GzEQrd6H+pe6S4tfdrTtggwk+yONIt4AL+fw5YEux6steAD0\n4xUMN8lIfXmq72Qa05v/k4c6I+ftZSjCtooIThzacEQ9tStGq8MYyAy3oW1rPa5D\nNu21ok2INPLx9tsqRCxcnn/9po0HiNbg5qugrGwdVOdQIFRdBCe43YUKplvBgX3D\ndV5F+i711/DL8zWcjYLIsc1udwfq2g==\n=3V4w\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/22ed10e25eb900049f48c2e9f32a5cd3fff839a8",
          "sha": "22ed10e25eb900049f48c2e9f32a5cd3fff839a8",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/22ed10e25eb900049f48c2e9f32a5cd3fff839a8"
        }
      ],
      "message": "net: avoid recursive m_nodes_mutex lock in DisconnectNode()\n\nHave `CConnman::DisconnectNode()` iterate `m_nodes` itself instead of\nusing `FindNode()`. This avoids recursive mutex lock and drops the only\ncaller of `FindNode()` which used the return value for something else\nthan a boolean found/notfound.",
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-05-16T08:30:22Z"
      },
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-04-22T10:32:34Z"
      },
      "sha": "85e20461df192dffc74a7a5edc75f494bce662a4"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDg2NjhiMGM2NGQ1OWQ0ZGQ3MjA3YmY4MzQ3YjIzYjhiNTBhZWI3YzM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "tree": {
        "sha": "622b62c91e8deeeccbfd32d5ae34568d53400910",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/622b62c91e8deeeccbfd32d5ae34568d53400910"
      },
      "verification": {
        "verified": true,
        "reason": "valid",
        "payload": "tree 622b62c91e8deeeccbfd32d5ae34568d53400910\nparent 85e20461df192dffc74a7a5edc75f494bce662a4\nauthor Vasil Dimov <vd@FreeBSD.org> 1745327856 +0200\ncommitter Vasil Dimov <vd@FreeBSD.org> 1747384480 +0200\n\nnet: change FindNode() to not return a node and rename it\n\nAll callers of `CConnman::FindNode()` use its return value `CNode*` only\nas a boolean null/notnull. So change that method to return `bool`.\n\nThis removes the dangerous pattern of handling a `CNode` object (the\nreturn value of `FindNode()`) without holding `CConnman::m_nodes_mutex`\nand without having that object's reference count incremented for the\nduration of the usage.\n\nAlso rename the method to better describe what it does.\n",
        "signature": "-----BEGIN PGP SIGNATURE-----\n\niQQzBAABCAAdFiEE5k2NRWFNsHVF2czBVN8G9ktVy78FAmgm+KMACgkQVN8G9ktV\ny7+y3h//Y+8X3srJsytfrHPsXfqCnScllC41VhTPT9egjDhBVy2r/A497qthZhUw\nw7bHYQ4hAcWzSyAY2eNWTVchMkmGU8bJ4MBnN7v4B6l1V1y2ndvNxH7BdjueJFvx\nTPMUpj0A7VmTXP4dD2qDs7SOcxqq1FpgQ+2n0UXindON8mPmn971x99OttMFav4R\n+4S//AYx4kNpJwL4mtWMJ2MY0uqx0fDFhIImGWobq8i9D2S9Ap5gqT6WS44iO13U\nNj1m9zL6ytP6GPVl3r0WsYZMIWT+EO1e8wZIvNqh5j08FSPlk5hijhBXsUk/0z0h\nNSMR2p8wkEuW7o7wHUSmjxHuUqetykgGGS09RuTekiE5k7kGbbsNhmZixAHT2d5+\nwVUB45T6KtD40fy9ZgkJJHu+gWtDT/m9F3L+V9xPokbag9wH7j5rN1Qd7V6eJS7S\nz2CtQEyjhm5AZA/eQu91Z0YDD3AcWe6WFrBzmjci4AGjAvn9zoXNn4K6xOiYi/rM\nUscLKhw4GVn1ZXyAFSvtI7gjh5qLhhCHr2lTfujE9VxiTUvKdjPqFQ3j0JHn850Q\nCtWX/yPkM76OFKGJr4e2ub3h4Cq9Bef3s/74FOtC4lgblrfS2Y8x31KUq2DhKJ/x\n62NUl5lm7tDUftd/TExUW5Ym2dJRggmlTn8oVdc6/zOPsRqnoxdITTSJHbjcGNcf\n4A1kKA6KnAFWg7BaqWegmvwUfDXxR0ZWB998//4Qtl2qGGfd38VoBsrduo4RAeQx\nPSPTwkJcd+fluW/G1id7/SK8a7zDA82x8U4so8OIi3a6AWYa9S727z0Spz1/vMV8\n+PaoS6G2ovVmaMbsePWLegtX32YKLS4I1GqgW3G1LrgddqXku3B2mvhCxD9ndAP0\nUKzEsoKgFhJQnxaet6EJnCHhXa0yJy5RhBziCJHtj4mdkNiXxzBpXOUrknKO7l+q\nt5uTTZDNgczNH3nlDUSJAhcjsrGQM5yeexCxTSARMmegkrzrz5qslKtj3P6oCcP9\nDxt1bmkufu/XJVzXmlZDm4XocIB2mOkTwmHaPEl8AZ3cxGcaSEuLj6MvK9jKHBUJ\n3jHp88c5G4mKg1qyeCofb8cS76etpKhAGUVkmcF6A9Ac8z0+aknh+6RDZxX+2WGt\nSN4Xge2qH71iMv6R8FsPvx0Xmyc4h/YUTvGSYZgBj++VUOPocS1Y5snXd/xY3sxl\ndpRg6gwKOKRspIXPG74etC7mcjyRJpwEb4Mdx9/51u8CddnaNhWkLW2zs6YdPeVG\nEsqVV0+BeFfy1/GU5rqEXBg55l6FjBxHcQ8TFEAIKHCi4KKZzpeQFcXbFycZwcQL\nyiPb46aDVnBfUX4Z1Jraoa1kEKH4Pw==\n=Wwyj\n-----END PGP SIGNATURE-----"
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/85e20461df192dffc74a7a5edc75f494bce662a4",
          "sha": "85e20461df192dffc74a7a5edc75f494bce662a4",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/85e20461df192dffc74a7a5edc75f494bce662a4"
        }
      ],
      "message": "net: change FindNode() to not return a node and rename it\n\nAll callers of `CConnman::FindNode()` use its return value `CNode*` only\nas a boolean null/notnull. So change that method to return `bool`.\n\nThis removes the dangerous pattern of handling a `CNode` object (the\nreturn value of `FindNode()`) without holding `CConnman::m_nodes_mutex`\nand without having that object's reference count incremented for the\nduration of the usage.\n\nAlso rename the method to better describe what it does.",
      "committer": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-05-16T08:34:40Z"
      },
      "author": {
        "name": "Vasil Dimov",
        "email": "vd@FreeBSD.org",
        "date": "2025-04-22T13:17:36Z"
      },
      "sha": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17685040267,
      "node_id": "HRFPE_lADOABII586zfK20zwAAAAQeHEyL",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17685040267",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "commit_url": "https://api.github.com/repos/vasild/bitcoin/commits/8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "created_at": "2025-05-16T08:36:13Z"
    },
    {
      "event": "commented",
      "id": 2886037713,
      "node_id": "IC_kwDOABII586sBXDR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2886037713",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-05-16T08:36:40Z",
      "updated_at": "2025-05-16T08:36:40Z",
      "author_association": "CONTRIBUTOR",
      "body": "`4f635d100d...8668b0c64d`: address https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2072443916",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#issuecomment-2886037713",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32326"
    },
    {
      "event": "reviewed",
      "id": 2845962709,
      "node_id": "PRR_kwDOABII586pofHV",
      "url": null,
      "actor": null,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "re-ACK 8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3\r\n\r\nJust changed prefixes from `Is-` -> `Already-` and nicely simplified message in initial commit as per https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2072443916.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#pullrequestreview-2845962709",
      "submitted_at": "2025-05-16T08:52:10Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054309204",
      "pull_request_review_id": 2784433178,
      "id": 2054309204,
      "node_id": "PRRC_kwDOABII5856ckVU",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": null,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This rename makes obvious that maybe something is wrong in the current code in `master`. Is the intention really to ignore inbound connections when, according to the comment we intent to \"Look for an existing connection\"?\r\n\r\nFor example, if `1.1.1.1` connects to `2.2.2.2:8333`, then the TCP connection will look like:\r\n`1.1.1.1:53481 <-> 2.2.2.2:8333` where `53481` is a random port picked by the initiator's OS. Now, if `2.2.2.2` intends to connect to `1.1.1.1:8333` then this check will return false because `1.1.1.1:53481` is not `1.1.1.1:8333` and the code will proceed with connecting.\r\n\r\nIs this really the intention? Shouldn't this check ignore the port?",
      "created_at": "2025-04-22T14:59:28Z",
      "updated_at": "2025-04-22T14:59:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054309204",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054309204"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054324859",
      "pull_request_review_id": 2784459702,
      "id": 2054324859,
      "node_id": "PRRC_kwDOABII5856coJ7",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In 9e657358271e7a045c, to make the CI happy \r\n```suggestion\r\n    const CNetAddr& net_addr{addr};\r\n```",
      "created_at": "2025-04-22T15:07:54Z",
      "updated_at": "2025-04-22T15:07:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054324859",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054324859"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054336652",
      "pull_request_review_id": 2784479267,
      "id": 2054336652,
      "node_id": "PRRC_kwDOABII5856crCM",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I ought to resuscitate some of https://github.com/bitcoin/bitcoin/pull/28248 that was looking at this (or will review if you do).",
      "created_at": "2025-04-22T15:14:35Z",
      "updated_at": "2025-04-22T15:14:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054336652",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054336652"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054341299",
      "pull_request_review_id": 2784486721,
      "id": 2054341299,
      "node_id": "PRRC_kwDOABII5856csKz",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "mzumsande",
        "id": 48763452,
        "node_id": "MDQ6VXNlcjQ4NzYzNDUy",
        "avatar_url": "https://avatars.githubusercontent.com/u/48763452?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/mzumsande",
        "html_url": "https://github.com/mzumsande",
        "followers_url": "https://api.github.com/users/mzumsande/followers",
        "following_url": "https://api.github.com/users/mzumsande/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/mzumsande/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/mzumsande/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/mzumsande/subscriptions",
        "organizations_url": "https://api.github.com/users/mzumsande/orgs",
        "repos_url": "https://api.github.com/users/mzumsande/repos",
        "events_url": "https://api.github.com/users/mzumsande/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/mzumsande/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I don't know if this is intentional, or a bug or something in betweeen.\r\n\r\nIf I remember correctly , #28248 suggested to change that, or something very similar. \r\nBut changing it is a bit scary to review, because sometimes IP addresses are shared - especially local IPs such as 127.0.0.1. So just changing it to ignore the port would have the potential to make local setups that probably exist out there not work any longer.\r\n",
      "created_at": "2025-04-22T15:17:04Z",
      "updated_at": "2025-04-22T15:17:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054341299",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054341299"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054365166",
      "pull_request_review_id": 2784525433,
      "id": 2054365166,
      "node_id": "PRRC_kwDOABII5856cx_u",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes, I see review feedback on that in https://github.com/bitcoin/bitcoin/pull/28248#issuecomment-1789702441 and https://github.com/bitcoin/bitcoin/pull/28248#discussion_r1370747413.",
      "created_at": "2025-04-22T15:30:24Z",
      "updated_at": "2025-04-22T15:30:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054365166",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054365166"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054370924",
      "pull_request_review_id": 2784534877,
      "id": 2054370924,
      "node_id": "PRRC_kwDOABII5856czZs",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054324859,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Fixed, thanks!",
      "created_at": "2025-04-22T15:33:42Z",
      "updated_at": "2025-04-22T15:33:42Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054370924",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054370924"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054383490",
      "pull_request_review_id": 2784554940,
      "id": 2054383490,
      "node_id": "PRRC_kwDOABII5856c2eC",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Love how you deciphered this at an instant! :heart:\r\n\r\nI will look into adding a comment to the call sites about this.",
      "created_at": "2025-04-22T15:40:54Z",
      "updated_at": "2025-04-22T15:40:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054383490",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054383490"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054408043",
      "pull_request_review_id": 2784594674,
      "id": 2054408043,
      "node_id": "PRRC_kwDOABII5856c8dr",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Hmm, in `CConnman::OpenNetworkConnection()` the code does:\r\n\r\n* if `pszDest` is not set then use `AlreadyConnectedToAddress(addrConnect)` which ignores the port\r\n* if `pszDest` is set then `OutboundConnectedToStr(pszDest)` which compares the port as well.\r\n\r\nChanging that logic is, I guess, out of the scope of this non-functional refactor PR. If to be done it would better be assessed in isolation in its own PR.",
      "created_at": "2025-04-22T15:55:21Z",
      "updated_at": "2025-04-22T15:55:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054408043",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054408043"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054434566",
      "pull_request_review_id": 2784638131,
      "id": 2054434566,
      "node_id": "PRRC_kwDOABII5856dC8G",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I will look into adding a comment to the call sites about this.\r\n\r\nCan't come up with a good comment. Leaving it as it is, unless somebody has suggestions.",
      "created_at": "2025-04-22T16:12:22Z",
      "updated_at": "2025-04-22T16:12:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054434566",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054434566"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054679774",
      "pull_request_review_id": 2785043300,
      "id": 2054679774,
      "node_id": "PRRC_kwDOABII5856d-ze",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": null,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "```suggestion\r\nbool CConnman::OutboundConnectedToAddress(const std::string& str_addr)\r\n```\r\n\r\n\r\nThe caller already knows that the parameter is a string type, but clarifying what the string represents (a network address) seems better to me.",
      "created_at": "2025-04-22T18:48:11Z",
      "updated_at": "2025-04-22T18:48:18Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054679774",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054679774"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2055412943",
      "pull_request_review_id": 2786207269,
      "id": 2055412943,
      "node_id": "PRRC_kwDOABII5856gxzP",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2054679774,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Alright, I agree `OutboundConnectedToStr()` is a bit odd. If it is renamed to `OutboundConnectedToAddress()`, then what about `OutboundConnectedToService()`? Leave it like this? Then it would be confusing because we have the `CAddress` type and the `...Address()` suffix would imply such an argument. I wanted to avoid overload (two different methods with the same name) because that is not grep-friendly. Should I drop that and have an overload?\r\n\r\nMaybe:\r\n* `ConnectedToAddrPort(string)` and `ConnectedToAddrPort(CService)` (overload), or\r\n* `ConnectedToAddrPortStr()` and `ConnectedToAddrPortService()`?\r\n\r\nThere is this old rule that \"if you cannot find a good name for a method, something is wrong with that method\", but this method already exists as it is. Leave its name to `FindNode()`?",
      "created_at": "2025-04-23T07:21:30Z",
      "updated_at": "2025-04-23T07:21:31Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2055412943",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2055412943"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2056499667",
      "pull_request_review_id": 2788091653,
      "id": 2056499667,
      "node_id": "PRRC_kwDOABII5856k7HT",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2054679774,
      "user": {
        "login": "w0xlt",
        "id": 94266259,
        "node_id": "U_kgDOBZ5jkw",
        "avatar_url": "https://avatars.githubusercontent.com/u/94266259?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/w0xlt",
        "html_url": "https://github.com/w0xlt",
        "followers_url": "https://api.github.com/users/w0xlt/followers",
        "following_url": "https://api.github.com/users/w0xlt/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/w0xlt/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/w0xlt/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/w0xlt/subscriptions",
        "organizations_url": "https://api.github.com/users/w0xlt/orgs",
        "repos_url": "https://api.github.com/users/w0xlt/repos",
        "events_url": "https://api.github.com/users/w0xlt/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/w0xlt/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`FindNode()` is not bad, but I personally like `ConnectedToAddrPort()`. This name makes the purpose of the function very clear.\r\nThe parameter type (`CService` and `str`) makes the difference clear. It is not necessary for the function name to describe the parameter (except in Rust).",
      "created_at": "2025-04-23T16:50:10Z",
      "updated_at": "2025-04-23T16:57:40Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2056499667",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2056499667"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2057808141",
      "pull_request_review_id": 2790161149,
      "id": 2057808141,
      "node_id": "PRRC_kwDOABII5856p6kN",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr& net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: It is somewhat opaque what is going on here. Would be good to add comment:\r\n```suggestion\r\n    // Downcast to CNetAddr as we don't care to match on port or other parts of CAddress.\r\n    const CNetAddr& net_addr{addr};\r\n```\r\nAn even clearer alternative would be to take `CNetAddr` as the function argument and instead clarify this behavior in the comment of the header.",
      "created_at": "2025-04-24T08:11:17Z",
      "updated_at": "2025-04-24T09:56:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2057808141",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2057808141"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2057829305",
      "pull_request_review_id": 2790161149,
      "id": 2057829305,
      "node_id": "PRRC_kwDOABII5856p_u5",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {\n+            LogPrintf(\"Failed to open new connection to %s, already connected\", addrConnect.ToStringAddrPort());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit: Should avoid deprecated macro:\r\n```suggestion\r\n            LogInfo(\"Failed to open new connection to %s, already connected\", addrConnect.ToStringAddrPort());\r\n```",
      "created_at": "2025-04-24T08:19:53Z",
      "updated_at": "2025-04-24T09:56:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2057829305",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2057829305"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 393,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2057856277",
      "pull_request_review_id": 2790161149,
      "id": 2057856277,
      "node_id": "PRRC_kwDOABII5856qGUV",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Interesting aspect. Agree current name makes sense - inbound nodes, if they are already connected to us would *not* be using their listening port (even if behind NAT/router). So we could be attempting to establish an outbound connection to a *different* node behind the same IP.\r\n\r\nBut even if `ConnectNode` here distinguishes between ports, the only caller may override and filter out connections without regard for port, as pointed out above (https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2054408043). That part of that other function seems like a bug, that needn't be fixed in this PR.\r\n\r\n---\r\n\r\nI assume addr-gossip only contains address+port from *outbound* peers (unless gossip is spoofed), otherwise we would be gossiping non-listening ports, which are pretty useless. Maybe inbound nodes already share their listening port with us upon connection, for us to be able to gossip about it? (Pointers to RTFM/code with links are welcome!).",
      "created_at": "2025-04-24T08:35:26Z",
      "updated_at": "2025-04-24T09:56:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2057856277",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2057856277"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058207242",
      "pull_request_review_id": 2790816343,
      "id": 2058207242,
      "node_id": "PRRC_kwDOABII5856rcAK",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I assume addr-gossip only contains address+port from _outbound_ peers ...\r\n\r\nThe origin of the gossip is the self-announcement done by each node:\r\n\r\nhttps://github.com/bitcoin/bitcoin/blob/458720e5e98c6e9103aea1fdfcd39bafc26c27bb/src/net_processing.cpp#L5286-L5300\r\n\r\nthen as this address is received by a node, it is further relayed to other nodes. Eventually everybody stores it in their addrman. Then [`GETADDR` requests](https://developer.bitcoin.org/reference/p2p_networking.html#getaddr) are served from addrman. Outbound connections are made to addresses that are already in addrman.",
      "created_at": "2025-04-24T11:54:44Z",
      "updated_at": "2025-04-24T11:54:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058207242",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058207242"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058288419",
      "pull_request_review_id": 2790944774,
      "id": 2058288419,
      "node_id": "PRRC_kwDOABII5856rv0j",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2054679774,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "So this:\r\n\r\n<details>\r\n<summary>[patch] rename</summary>\r\n\r\n```diff\r\n--- i/src/net.h\r\n+++ w/src/net.h\r\n@@ -1355,24 +1355,24 @@ private:\r\n     /**\r\n      * Determine whether we're already connected to a given \"address:port\".\r\n      * Note that for inbound connections, the peer is likely using a random outbound\r\n      * port on their side, so this will likely not match any inbound connections.\r\n      * @param[in] str_addr String of the form \"address:port\", e.g. \"1.2.3.4:8333\".\r\n      * @return true if connected to addrName.\r\n      */\r\n-    bool OutboundConnectedToStr(const std::string& str_addr);\r\n+    bool ConnectedToAddrPort(const std::string& str_addr);\r\n \r\n     /**\r\n      * Determine whether we're already connected to a given address:port.\r\n      * Note that for inbound connections, the peer is likely using a random outbound\r\n      * port on their side, so this will likely not match any inbound connections.\r\n      * @param[in] addr Address and port to check.\r\n      * @return true if connected to addr.\r\n      */\r\n-    bool OutboundConnectedToService(const CService& addr);\r\n+    bool ConnectedToAddrPort(const CService& addr);\r\n \r\n     /**\r\n      * Determine whether we're already connected to a given address, in order to\r\n      * avoid initiating duplicate connections.\r\n      */\r\n     bool AlreadyConnectedToAddress(const CAddress& addr);\r\n \r\n```\r\n</details>\r\n\r\n?\r\n\r\nNote the similar function that has an \"Already\" prefix. Make all 3 consistent, either all with or all without an \"Already\" prefix?\r\n\r\n@jonatack, @hodlinator, you already ACKed the current naming, what do you think?",
      "created_at": "2025-04-24T12:30:59Z",
      "updated_at": "2025-04-24T12:30:59Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058288419",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058288419"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058384454",
      "pull_request_review_id": 2791097305,
      "id": 2058384454,
      "node_id": "PRRC_kwDOABII5856sHRG",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr& net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2057808141,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "but, but, but... :) this function does care to compare the port as it compares `node->m_addr_name` to `addr.ToStringAddrPort()`. If the argument is changed from `CAddress` to `CNetAddr`, then it would need another argument - the string \"addr:port\". This oddness is the same in `master`. Now I wonder if this condition:\r\n\r\n```cpp\r\nnode->addr == net_addr || node->m_addr_name == str_addr\r\n\r\n// or in master, which is the same:\r\n// FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort())\r\n```\r\n\r\nis not the same as:\r\n\r\n```cpp\r\nnode->addr == net_addr\r\n```\r\n\r\nI think it is...",
      "created_at": "2025-04-24T13:03:08Z",
      "updated_at": "2025-04-24T13:03:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058384454",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058384454"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058445224",
      "pull_request_review_id": 2791193429,
      "id": 2058445224,
      "node_id": "PRRC_kwDOABII5856sWGo",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2054679774,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "These are the best I could come up with:\r\n* `IsConnectedToStrAddr`\r\n* {`IsConnectedToService` |  `IsConnectedToAddrPort`}\r\n* `IsConnectedToAddress`\r\n\r\n`Is`-prefix == short way to signify boolean query function.",
      "created_at": "2025-04-24T13:24:24Z",
      "updated_at": "2025-04-24T13:25:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058445224",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058445224"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058477569",
      "pull_request_review_id": 2791251428,
      "id": 2058477569,
      "node_id": "PRRC_kwDOABII5856seAB",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr& net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2057808141,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Inconsistency seems to have been introduced when we started checking for string-version in 9bab521df895c149579b9e64931405c56b008afb in April of 2012. Not on purpose I would wager.",
      "created_at": "2025-04-24T13:39:29Z",
      "updated_at": "2025-04-24T13:39:29Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058477569",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058477569"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058523521",
      "pull_request_review_id": 2791328047,
      "id": 2058523521,
      "node_id": "PRRC_kwDOABII5856spOB",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good that we advertise our listening port for outbound peers! Seems kind of unnecessary to tell inbound peers about the address they report as seeing us as (`CService{node.GetAddrLocal()}`):\r\nhttps://github.com/bitcoin/bitcoin/blob/458720e5e98c6e9103aea1fdfcd39bafc26c27bb/src/net.cpp#L246-L266\r\nBut I guess it simplifies the addrman-logic a little bit, not having to populate/refresh it from the local outbound connections.",
      "created_at": "2025-04-24T13:59:52Z",
      "updated_at": "2025-04-24T13:59:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058523521",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058523521"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058610798",
      "pull_request_review_id": 2791472640,
      "id": 2058610798,
      "node_id": "PRRC_kwDOABII5856s-hu",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr& net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2057808141,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Opened https://github.com/bitcoin/bitcoin/pull/32338 with this single change, dropping the `|| FindNode(addr.ToStringAddrPort())` condition.",
      "created_at": "2025-04-24T14:39:11Z",
      "updated_at": "2025-04-24T14:39:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058610798",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2058610798"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2063650801",
      "pull_request_review_id": 2799289459,
      "id": 2063650801,
      "node_id": "PRRC_kwDOABII5857AM_x",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2054679774,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I think this:\r\n\r\nAfter https://github.com/bitcoin/bitcoin/pull/32338 makes it, then here in this PR:\r\n\r\n* rename `AlreadyConnectedToAddress()` to `IsConnectedToAddr()`, compare just the address\r\n* rename the two remaining `FindNode()` to `IsConnectedToAddrPort()`, overload, one taking a string and the other taking a `CService`, both comparing the address and the port.",
      "created_at": "2025-04-28T13:22:46Z",
      "updated_at": "2025-04-28T13:22:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2063650801",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2063650801"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2064139694",
      "pull_request_review_id": 2800093042,
      "id": 2064139694,
      "node_id": "PRRC_kwDOABII5857CEWu",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Hmm, in `CConnman::OpenNetworkConnection()` the code does:\r\n> \r\n>     * if `pszDest` is not set then use `AlreadyConnectedToAddress(addrConnect)` which ignores the port\r\n> \r\n>     * if `pszDest` is set then `OutboundConnectedToStr(pszDest)` which compares the port as well.\r\n> \r\n> \r\n> Changing that logic is, I guess, out of the scope of this non-functional refactor PR. If to be done it would better be assessed in isolation in its own PR.\r\n\r\nAlso, later on in `ConnectNode()`:\r\n\r\n```c++\r\n    if (pszDest == nullptr) {\r\n        if (IsLocal(addrConnect))\r\n            return nullptr;\r\n\r\n        // Look for an existing connection\r\n        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\r\n        if (pnode)\r\n        {\r\n            LogPrintf(\"Failed to open new connection, already connected\\n\");\r\n            return nullptr;\r\n        }\r\n```\r\n\r\nWhich seems to be redundant, as it's a strictly narrower check because of the port?",
      "created_at": "2025-04-28T17:20:50Z",
      "updated_at": "2025-04-28T17:20:51Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2064139694",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2064139694"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2065614037",
      "pull_request_review_id": 2802226986,
      "id": 2065614037,
      "node_id": "PRRC_kwDOABII5857HsTV",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 62,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "1e415d2cb703fcd1b622e5343fa264425601c8df",
      "in_reply_to_id": 2054309204,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "True, and `ConnectNode()` is only called from `OpenNetworkConnection()`. Looks like another room for improvement.\r\n\r\nWhile this may seem minor, the amount of developers' time spent on grasping it is not. In the past I have stared at these calls disproportionally long. Would be nice if this is spared to future developers. I will go after that separately from this PR.",
      "created_at": "2025-04-29T06:45:18Z",
      "updated_at": "2025-04-29T06:45:19Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2065614037",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2065614037"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": 391,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 392,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2070021226",
      "pull_request_review_id": 2809409397,
      "id": 2070021226,
      "node_id": "PRRC_kwDOABII5857YgRq",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 5,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2054679774,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-05-01T09:08:04Z",
      "updated_at": "2025-05-01T09:08:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2070021226",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2070021226"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 335,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2070024083",
      "pull_request_review_id": 2809413683,
      "id": 2070024083,
      "node_id": "PRRC_kwDOABII5857Yg-T",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr& net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2057808141,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "#32338 was merged and these variables are not necessary now.",
      "created_at": "2025-05-01T09:09:08Z",
      "updated_at": "2025-05-01T09:09:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2070024083",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2070024083"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2070059886",
      "pull_request_review_id": 2809470003,
      "id": 2070059886,
      "node_id": "PRRC_kwDOABII5857Yptu",
      "diff_hunk": "@@ -404,10 +389,8 @@ CNode* CConnman::ConnectNode(CAddress addrConnect, const char *pszDest, bool fCo\n             return nullptr;\n \n         // Look for an existing connection\n-        CNode* pnode = FindNode(static_cast<CService>(addrConnect));\n-        if (pnode)\n-        {\n-            LogPrintf(\"Failed to open new connection, already connected\\n\");\n+        if (OutboundConnectedToService(addrConnect)) {\n+            LogPrintf(\"Failed to open new connection to %s, already connected\", addrConnect.ToStringAddrPort());",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 63,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2057829305,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done in latest push.",
      "created_at": "2025-05-01T09:20:46Z",
      "updated_at": "2025-05-01T09:20:46Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2070059886",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2070059886"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 393,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2071517155",
      "pull_request_review_id": 2811854085,
      "id": 2071517155,
      "node_id": "PRRC_kwDOABII5857eNfj",
      "diff_hunk": "@@ -332,42 +332,27 @@ bool IsLocal(const CService& addr)\n     return mapLocalHost.count(addr) > 0;\n }\n \n-CNode* CConnman::FindNode(const CNetAddr& ip)\n+bool CConnman::OutboundConnectedToStr(const std::string& str_addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-      if (static_cast<CNetAddr>(pnode->addr) == ip) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n-}\n-\n-CNode* CConnman::FindNode(const std::string& addrName)\n-{\n-    LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (pnode->m_addr_name == addrName) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&str_addr](CNode* node) { return node->m_addr_name == str_addr; });\n }\n \n-CNode* CConnman::FindNode(const CService& addr)\n+bool CConnman::OutboundConnectedToService(const CService& addr)\n {\n     LOCK(m_nodes_mutex);\n-    for (CNode* pnode : m_nodes) {\n-        if (static_cast<CService>(pnode->addr) == addr) {\n-            return pnode;\n-        }\n-    }\n-    return nullptr;\n+    return std::ranges::any_of(m_nodes, [&addr](CNode* node) { return node->addr == addr; });\n }\n \n bool CConnman::AlreadyConnectedToAddress(const CAddress& addr)\n {\n-    return FindNode(static_cast<CNetAddr>(addr)) || FindNode(addr.ToStringAddrPort());\n+    const CNetAddr& net_addr{addr};",
      "path": "src/net.cpp",
      "position": null,
      "original_position": 44,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "cc8f239663a0874c307efa30815b40d9ef40badb",
      "in_reply_to_id": 2057808141,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Nice!",
      "created_at": "2025-05-02T12:04:44Z",
      "updated_at": "2025-05-02T12:04:45Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2071517155",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2071517155"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 349,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2072443916",
      "pull_request_review_id": 2813283415,
      "id": 2072443916,
      "node_id": "PRRC_kwDOABII5857hvwM",
      "diff_hunk": "@@ -1352,15 +1352,28 @@ class CConnman\n \n     uint64_t CalculateKeyedNetGroup(const CNetAddr& ad) const;\n \n-    CNode* FindNode(const CNetAddr& ip);\n-    CNode* FindNode(const std::string& addrName);\n-    CNode* FindNode(const CService& addr);\n+    /**\n+     * Determine whether we're already connected to a given \"address:port\".\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port String of the form \"address:port\", e.g. \"1.2.3.4:8333\".\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const std::string& addr_port) const;\n+\n+    /**\n+     * Determine whether we're already connected to a given address:port.\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port Address and port to check.\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const CService& addr_port) const;\n \n     /**\n-     * Determine whether we're already connected to a given address, in order to\n-     * avoid initiating duplicate connections.\n+     * Determine whether we're already connected to a given address.\n      */\n-    bool AlreadyConnectedToAddress(const CAddress& addr);\n+    bool IsConnectedToAddr(const CNetAddr& addr) const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 31,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "in_reply_to_id": null,
      "user": {
        "login": "jonatack",
        "id": 2415484,
        "node_id": "MDQ6VXNlcjI0MTU0ODQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2415484?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jonatack",
        "html_url": "https://github.com/jonatack",
        "followers_url": "https://api.github.com/users/jonatack/followers",
        "following_url": "https://api.github.com/users/jonatack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jonatack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jonatack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jonatack/subscriptions",
        "organizations_url": "https://api.github.com/users/jonatack/orgs",
        "repos_url": "https://api.github.com/users/jonatack/repos",
        "events_url": "https://api.github.com/users/jonatack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jonatack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Note the similar function that has an \"Already\" prefix. Make all 3 consistent, either all with or all without an \"Already\" prefix?\r\n\r\nI prefer the original function naming `AlreadyConnectedToAddress` and it looks like retaining it would also reduce the diff here.\r\n\r\nIn alignment, `IsConnectedToAddrPort` could be named `AlreadyConnectedToAddressPort`.",
      "created_at": "2025-05-03T18:30:07Z",
      "updated_at": "2025-05-03T18:36:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2072443916",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2072443916"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1376,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2089109680",
      "pull_request_review_id": 2840472999,
      "id": 2089109680,
      "node_id": "PRRC_kwDOABII5858hUiw",
      "diff_hunk": "@@ -1352,15 +1352,28 @@ class CConnman\n \n     uint64_t CalculateKeyedNetGroup(const CNetAddr& ad) const;\n \n-    CNode* FindNode(const CNetAddr& ip);\n-    CNode* FindNode(const std::string& addrName);\n-    CNode* FindNode(const CService& addr);\n+    /**\n+     * Determine whether we're already connected to a given \"address:port\".\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port String of the form \"address:port\", e.g. \"1.2.3.4:8333\".\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const std::string& addr_port) const;\n+\n+    /**\n+     * Determine whether we're already connected to a given address:port.\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port Address and port to check.\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const CService& addr_port) const;\n \n     /**\n-     * Determine whether we're already connected to a given address, in order to\n-     * avoid initiating duplicate connections.\n+     * Determine whether we're already connected to a given address.\n      */\n-    bool AlreadyConnectedToAddress(const CAddress& addr);\n+    bool IsConnectedToAddr(const CNetAddr& addr) const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 31,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "in_reply_to_id": 2072443916,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "That would mean change from:\r\n\r\n```cpp\r\nbool IsConnectedToAddrPort(const std::string& addr_port);\r\nbool IsConnectedToAddrPort(const CService& addr_port);\r\nbool IsConnectedToAddr(const CNetAddr& addr);\r\n```\r\n\r\nto:\r\n\r\n```cpp\r\nbool AlreadyConnectedToAddressPort(const std::string& addr_port);\r\nbool AlreadyConnectedToAddressPort(const CService& addr_port);\r\nbool AlreadyConnectedToAddress(const CNetAddr& addr);\r\n```\r\n\r\nI am fine either way. @hodlinator, what do you think?",
      "created_at": "2025-05-14T14:37:28Z",
      "updated_at": "2025-05-14T14:37:28Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2089109680",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2089109680"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1376,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2090691276",
      "pull_request_review_id": 2842916084,
      "id": 2090691276,
      "node_id": "PRRC_kwDOABII5858nWrM",
      "diff_hunk": "@@ -1352,15 +1352,28 @@ class CConnman\n \n     uint64_t CalculateKeyedNetGroup(const CNetAddr& ad) const;\n \n-    CNode* FindNode(const CNetAddr& ip);\n-    CNode* FindNode(const std::string& addrName);\n-    CNode* FindNode(const CService& addr);\n+    /**\n+     * Determine whether we're already connected to a given \"address:port\".\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port String of the form \"address:port\", e.g. \"1.2.3.4:8333\".\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const std::string& addr_port) const;\n+\n+    /**\n+     * Determine whether we're already connected to a given address:port.\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port Address and port to check.\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const CService& addr_port) const;\n \n     /**\n-     * Determine whether we're already connected to a given address, in order to\n-     * avoid initiating duplicate connections.\n+     * Determine whether we're already connected to a given address.\n      */\n-    bool AlreadyConnectedToAddress(const CAddress& addr);\n+    bool IsConnectedToAddr(const CNetAddr& addr) const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 31,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "in_reply_to_id": 2072443916,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Previous thread: https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2058445224\r\n\r\n`AlreadyConnectedToAddressPort` is significantly more verbose than master's `FindNode`. Checked for uses of `Is[A-Z]\\w`-prefix and the `Already`-prefix seems to rarely work, meaning `Already` is more specific in this case. This convinced me that `Already` might be fine. :+1: \r\n\r\n(And Addr/Address difference is negligible).",
      "created_at": "2025-05-15T09:15:30Z",
      "updated_at": "2025-05-15T09:16:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2090691276",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2090691276"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1376,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2092602639",
      "pull_request_review_id": 2845922417,
      "id": 2092602639,
      "node_id": "PRRC_kwDOABII5858upUP",
      "diff_hunk": "@@ -1352,15 +1352,28 @@ class CConnman\n \n     uint64_t CalculateKeyedNetGroup(const CNetAddr& ad) const;\n \n-    CNode* FindNode(const CNetAddr& ip);\n-    CNode* FindNode(const std::string& addrName);\n-    CNode* FindNode(const CService& addr);\n+    /**\n+     * Determine whether we're already connected to a given \"address:port\".\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port String of the form \"address:port\", e.g. \"1.2.3.4:8333\".\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const std::string& addr_port) const;\n+\n+    /**\n+     * Determine whether we're already connected to a given address:port.\n+     * Note that for inbound connections, the peer is likely using a random outbound\n+     * port on their side, so this will likely not match any inbound connections.\n+     * @param[in] addr_port Address and port to check.\n+     * @return true if connected to addr_port.\n+     */\n+    bool IsConnectedToAddrPort(const CService& addr_port) const;\n \n     /**\n-     * Determine whether we're already connected to a given address, in order to\n-     * avoid initiating duplicate connections.\n+     * Determine whether we're already connected to a given address.\n      */\n-    bool AlreadyConnectedToAddress(const CAddress& addr);\n+    bool IsConnectedToAddr(const CNetAddr& addr) const;",
      "path": "src/net.h",
      "position": null,
      "original_position": 31,
      "commit_id": "8668b0c64d59d4dd7207bf8347b23b8b50aeb7c3",
      "original_commit_id": "4f635d100dd1ab5e83bb392d8fbee4a3f4400315",
      "in_reply_to_id": 2072443916,
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Changed to\r\n\r\n```cpp\r\nbool AlreadyConnectedToAddressPort(const std::string& addr_port);\r\nbool AlreadyConnectedToAddressPort(const CService& addr_port);\r\nbool AlreadyConnectedToAddress(const CNetAddr& addr);\r\n```\r\n",
      "created_at": "2025-05-16T08:37:21Z",
      "updated_at": "2025-05-16T08:37:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32326#discussion_r2092602639",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2092602639"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32326"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 1376,
      "side": "RIGHT"
    }
  ]
}