{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155",
    "id": 2423590082,
    "node_id": "PR_kwDOABII586QdQzC",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/32155",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/32155.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/32155.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
    "number": 32155,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "miner: timelock the coinbase to the mined block's height",
    "user": {
      "login": "darosior",
      "id": 22457751,
      "node_id": "MDQ6VXNlcjIyNDU3NzUx",
      "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/darosior",
      "html_url": "https://github.com/darosior",
      "followers_url": "https://api.github.com/users/darosior/followers",
      "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
      "organizations_url": "https://api.github.com/users/darosior/orgs",
      "repos_url": "https://api.github.com/users/darosior/repos",
      "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/darosior/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "The Consensus Cleanup soft fork proposal includes enforcing that coinbase transactions set their\r\nnLockTime field to the block height minus 1, as well as their nSequence such as to not disable the\r\ntimelock. If such a fork were to be activated by Bitcoin users, miners need to be ready to produce\r\ncompliant blocks at the risk of losing substantial amounts mining would-be invalid blocks. As miners\r\nare unfamously slow to upgrade, it's good to make this change as early as possible.\r\n\r\nAlthough Bitcoin Core's GBT implementation does not provide the `coinbasetxn` field, and mining\r\npool software crafts the coinbase on its own, updating the Bitcoin Core mining code is a first step\r\ntoward convincing pools to update their (often closed source) code. A possible followup is also to\r\nintroduce new fields to GBT. In addition, this first step also makes it possible to test future\r\nConsensus Cleanup changes.\r\n\r\nThe commit making the change also updates a bunch of seemingly-unrelated tests. This is because those tests were asserting error messages based on the txid of transactions involved, and changing the coinbase transaction structure necessarily changes the txid of all tests' transactions.",
    "labels": [
      {
        "id": 118378960,
        "node_id": "MDU6TGFiZWwxMTgzNzg5NjA=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Mining",
        "name": "Mining",
        "color": "c7def8",
        "default": false
      }
    ],
    "created_at": "2025-03-27T19:30:36Z",
    "updated_at": "2025-04-22T19:41:36Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "fff433e4d254c418e8ea15e7fe14d55c9c8d9d6d",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "darosior:2502_height_in_cb_locktime",
      "ref": "2502_height_in_cb_locktime",
      "sha": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 168868367,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNjg4NjgzNjc=",
        "name": "bitcoin",
        "full_name": "darosior/bitcoin",
        "owner": {
          "login": "darosior",
          "id": 22457751,
          "node_id": "MDQ6VXNlcjIyNDU3NzUx",
          "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/darosior",
          "html_url": "https://github.com/darosior",
          "followers_url": "https://api.github.com/users/darosior/followers",
          "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
          "organizations_url": "https://api.github.com/users/darosior/orgs",
          "repos_url": "https://api.github.com/users/darosior/repos",
          "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/darosior/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/darosior/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/darosior/bitcoin",
        "archive_url": "https://api.github.com/repos/darosior/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/darosior/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/darosior/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/darosior/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/darosior/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/darosior/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/darosior/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/darosior/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/darosior/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/darosior/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/darosior/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/darosior/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/darosior/bitcoin/events",
        "forks_url": "https://api.github.com/repos/darosior/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/darosior/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/darosior/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/darosior/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/darosior/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/darosior/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/darosior/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/darosior/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/darosior/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/darosior/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/darosior/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/darosior/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/darosior/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/darosior/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/darosior/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/darosior/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:darosior/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/darosior/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/darosior/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/darosior/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/darosior/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/darosior/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/darosior/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/darosior/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/darosior/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/darosior/bitcoin/hooks",
        "svn_url": "https://github.com/darosior/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 0,
        "stargazers_count": 2,
        "watchers_count": 2,
        "size": 260932,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-22T13:32:19Z",
        "created_at": "2019-02-02T19:20:27Z",
        "updated_at": "2024-11-20T13:45:57Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "96a5cd8000d2b500585834277cc5f5e23181a6f3",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37098,
        "stargazers_count": 83003,
        "watchers_count": 83003,
        "size": 280231,
        "default_branch": "master",
        "open_issues_count": 701,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-04-22T16:42:41Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-04-22T17:17:53Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 90,
    "deletions": 58,
    "changed_files": 22,
    "commits": 6,
    "review_comments": 36,
    "comments": 9
  },
  "events": [
    {
      "event": "commented",
      "id": 2759206878,
      "node_id": "IC_kwDOABII586kdife",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2759206878",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T19:30:39Z",
      "updated_at": "2025-04-22T13:32:42Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/32155.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Approach ACK | [ajtowns](https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2782594487) |\n| Stale ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2782260132) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nNo conflicts as of last run.\n<!--5faf32d7da4f0f540f40219e4f7537a3-->\n### LLM Linter (✨ experimental)\n\nPossible typos and grammar issues:\n\nBad snapshot format or truncated snapshot after deserializing 1 coins. → Bad snapshot format or truncated snapshot after deserializing 1 coin.\n\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2759206878",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "labeled",
      "id": 17020867766,
      "node_id": "LE_lADOABII586wFgg0zwAAAAP2hdS2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17020867766",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-27T19:30:41Z",
      "label": {
        "name": "Mining",
        "color": "c7def8"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17020873679,
      "node_id": "HRFPE_lADOABII586wFgg0zwAAAAP2hevP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17020873679",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "a122b4a6b69050dbbdb6025ab20c96d128adad6f",
      "commit_url": "https://api.github.com/repos/darosior/bitcoin/commits/a122b4a6b69050dbbdb6025ab20c96d128adad6f",
      "created_at": "2025-03-27T19:31:11Z"
    },
    {
      "event": "commented",
      "id": 2760609125,
      "node_id": "IC_kwDOABII586ki41l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2760609125",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T09:01:48Z",
      "updated_at": "2025-03-28T09:01:48Z",
      "author_association": "MEMBER",
      "body": "Tested with Stratum v2 (https://github.com/Sjors/bitcoin/pull/68 + first commit here, SRI pool role connected to their custom signet, sv2 -> sv1 translator and a BitAxe). Indeed I'm seeing blocks at height N with `locktime` values of N-1 and `sequence` of 4294967294 (`0xFFFFFFFE`). I explained below why this just works(tm), unlike with Stratum v1.\r\n\r\nThere's a question about sequencing here, since it's a preparatory step towards the Great Consensus Cleanup proposal https://github.com/bitcoin/bips/pull/1800.\r\n\r\nIn a way it's similiar to #30681 and other PRs that prepared our mining code for the timewarp fix from that same BIP. But it's also different. Taking account of the timewarp fix only potentially impacts the timestamp of the first block in a retarget period, i.e. push it a bit in the future. This only happens under circumstances that are common on testnet4 but rare on mainnet. Whereas this PR impacts every mined block.\r\n\r\nMore specifically, for Stratum v1 this PR changes nothing, because `getblocktemplate` does not echo coinbase `nLockTime`. It will require expanding BIP22 / BIP23 and further changes downstream. But the Stratum v2 Template Provider (see #31098) does pass on this information, so any Stratum v2 pool out there will start doing this once it's in a release.\r\n\r\nThe fact that Stratum v1 support requires downstream changes is a good reason to get started early. Moreover, because deploying this soft fork is more involved than simply updating Bitcoin Core, it's potentially less safe. By changing the default mining behavior long before the fork activates (or even signals) the actual deployment would be a lot safer.\r\n\r\nHowever the BIP is brand new, so we shouldn't make these (specific) mining changes a fait accompli. Although nothing would break if we later abandon this approach in favor of another BIP30 fix, it still seems better to wait before doing this on mainnet until the BIP has been out there for a while.\r\n\r\nArguably, waiting for the v30 release is long enough and we can simply revert this PR if needed.\r\n\r\nAnother approach could be to make this testnet only, and then decide if we want to apply it to mainnet a bit closer to the release.\r\n\r\nI do think we should have this in v30 to at least enable downstream testing, along with any changes to `getblocktemplate`. And some people may prefer to test on mainnet. So yet another approach could be to put it behind a flag (default true for test networks).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2760609125",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "reviewed",
      "id": 2724722238,
      "node_id": "PRR_kwDOABII586iZ_Y-",
      "url": null,
      "actor": null,
      "commit_id": "a122b4a6b69050dbbdb6025ab20c96d128adad6f",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ack\r\nDid a simple test with regtest and the blocks are correctly mined with a coinbase tx setting `nLockTime=heigh-1` and `nSequence=4294967294`.\r\n\r\nI agree adding this before the soft-fork is good so we give time to miners.\r\nI have one question although, if I'm not wrong the node miner code is no longer used in mainnet so this PR only affects to test networks?",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2724722238",
      "submitted_at": "2025-03-28T11:29:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "commented",
      "id": 2761158943,
      "node_id": "IC_kwDOABII586kk_Ef",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2761158943",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T11:58:53Z",
      "updated_at": "2025-03-28T11:59:07Z",
      "author_association": "MEMBER",
      "body": "> Did a simple test with regtest\r\n\r\n> so this PR only affects to test networks?\r\n\r\nUnfortunately regtest is not representative here. It's the only network for which Bitcoin Core will mine by itself. For all other networks, including testnet (3 and 4), you need to use external software.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2761158943",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "commented",
      "id": 2761190738,
      "node_id": "IC_kwDOABII586klG1S",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2761190738",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T12:14:15Z",
      "updated_at": "2025-03-28T12:14:15Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Unfortunately regtest is not representative here. It's the only network for which Bitcoin Core will mine by itself. For all other networks, including testnet (3 and 4), you need to use external software.\r\n\r\nThis is what I though. So how does this change \"help\" or \"put pressure\" to add this new rule to miners software? Wouldn't help more implement the code that will check if a block is following it? Obviously code that would never be ran without another change to add an activation date.",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2761190738",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "commented",
      "id": 2761301569,
      "node_id": "IC_kwDOABII586klh5B",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2761301569",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T13:00:50Z",
      "updated_at": "2025-03-28T13:00:50Z",
      "author_association": "MEMBER",
      "body": "> Wouldn't help more implement the code that will check if a block is following it?\r\n\r\nThat's what activating the soft-fork does. But there's a chicken-egg problem, because one reason to delay activating a soft fork is because part of the ecosystem isn't ready.\r\n\r\n> So how does this change \"help\" or \"put pressure\" to add this new rule to miners software? \r\n\r\nAs I explained in my first comment, for Stratum v2 this just works(tm). For Stratum v1 additional changes are needed in other software. Not sure what the best approach is there. For them the change here is a bit like the proverbial tree in the forest.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2761301569",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "reviewed",
      "id": 2726051010,
      "node_id": "PRR_kwDOABII586ifDzC",
      "url": null,
      "actor": null,
      "commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2726051010",
      "submitted_at": "2025-03-28T16:16:26Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "reviewed",
      "id": 2726052639,
      "node_id": "PRR_kwDOABII586ifEMf",
      "url": null,
      "actor": null,
      "commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2726052639",
      "submitted_at": "2025-03-28T16:16:56Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "commented",
      "id": 2762061412,
      "node_id": "IC_kwDOABII586kobZk",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2762061412",
      "actor": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T17:56:25Z",
      "updated_at": "2025-03-28T17:56:25Z",
      "author_association": "CONTRIBUTOR",
      "body": "> That's what activating the soft-fork does. But there's a chicken-egg problem, because one reason to delay activating a soft fork is because part of the ecosystem isn't ready\r\n\r\nSorry maybe I didn't explain myself. I meant to introduce the code, but without activating it and without activation date. So if this consensus change doesn't go forward, we make sure that we will not have hard fork because of nodes running a version with the check code implemented. Just put it there to say: \"Here it is this new condition, at some point this is going to have an activation date, start implementing it\". Maybe that's not the way to do it, just dropping ideas. \r\n\r\nAs @darosior said:\r\n> updating the Bitcoin Core mining code is a first step toward convincing pools to update their (often closed source) code\r\n\r\nSo I think that this is a more \"aggressive\" (or convincing 😉) way to convince them.",
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2762061412",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "mentioned",
      "id": 17036494423,
      "node_id": "MEE_lADOABII586wFgg0zwAAAAP3dEZX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17036494423",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T17:56:26Z"
    },
    {
      "event": "subscribed",
      "id": 17036494447,
      "node_id": "SE_lADOABII586wFgg0zwAAAAP3dEZv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17036494447",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-03-28T17:56:27Z"
    },
    {
      "event": "labeled",
      "id": 17080476442,
      "node_id": "LE_lADOABII586wFgg0zwAAAAP6E2Ma",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17080476442",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-01T18:20:14Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17175859188,
      "node_id": "HRFPE_lADOABII586wFgg0zwAAAAP_ws_0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17175859188",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "c872728e5260890584f4db6742aefcd98be92643",
      "commit_url": "https://api.github.com/repos/darosior/bitcoin/commits/c872728e5260890584f4db6742aefcd98be92643",
      "created_at": "2025-04-08T18:10:33Z"
    },
    {
      "event": "unlabeled",
      "id": 17176813683,
      "node_id": "UNLE_lADOABII586wFgg0zwAAAAP_0WBz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17176813683",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-08T19:27:43Z",
      "label": {
        "name": "Needs rebase",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2787639280,
      "node_id": "IC_kwDOABII586mJ__w",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2787639280",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-08T20:54:25Z",
      "updated_at": "2025-04-08T20:54:25Z",
      "author_association": "MEMBER",
      "body": "Rebased.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2787639280",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "reviewed",
      "id": 2752800995,
      "node_id": "PRR_kwDOABII586kFGjj",
      "url": null,
      "actor": null,
      "commit_id": "c872728e5260890584f4db6742aefcd98be92643",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2752800995",
      "submitted_at": "2025-04-09T10:24:23Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "reviewed",
      "id": 2754672647,
      "node_id": "PRR_kwDOABII586kMPgH",
      "url": null,
      "actor": null,
      "commit_id": "c872728e5260890584f4db6742aefcd98be92643",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2754672647",
      "submitted_at": "2025-04-09T20:03:41Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "reviewed",
      "id": 2754718241,
      "node_id": "PRR_kwDOABII586kMaoh",
      "url": null,
      "actor": null,
      "commit_id": "c872728e5260890584f4db6742aefcd98be92643",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "The churn in the first commit is pretty annoying.\r\n\r\nMaybe with a `MakeCoinbase` helper the change can split across more than one commit? E.g. the first commit could set `with_lock_time` to `false` for `ChainType::REGTEST` and `height < 300` so the assume valid blocks don't change.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2754718241",
      "submitted_at": "2025-04-09T20:34:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17196241993,
      "node_id": "HRFPE_lADOABII586wFgg0zwAAAAQA-dRJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17196241993",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "21f450a8b21920d020672abc57de6b83d52f1c22",
      "commit_url": "https://api.github.com/repos/darosior/bitcoin/commits/21f450a8b21920d020672abc57de6b83d52f1c22",
      "created_at": "2025-04-09T21:20:27Z"
    },
    {
      "event": "reviewed",
      "id": 2779926919,
      "node_id": "PRR_kwDOABII586lslGH",
      "url": null,
      "actor": null,
      "commit_id": "21f450a8b21920d020672abc57de6b83d52f1c22",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2779926919",
      "submitted_at": "2025-04-19T10:03:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17341682000,
      "node_id": "HRFPE_lADOABII586wFgg0zwAAAAQJpRFQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17341682000",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ce5f4eafb57ee75a63ed5b0c67d4c950ba7991aa",
      "commit_url": "https://api.github.com/repos/darosior/bitcoin/commits/ce5f4eafb57ee75a63ed5b0c67d4c950ba7991aa",
      "created_at": "2025-04-21T18:07:56Z"
    },
    {
      "event": "commented",
      "id": 2819200264,
      "node_id": "IC_kwDOABII586oCZUI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2819200264",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T18:23:33Z",
      "updated_at": "2025-04-21T18:23:33Z",
      "author_association": "MEMBER",
      "body": "Do people think i should change the value of the coinbase transaction used in the fuzz test here as well? I previously kept it along with the PR introducing validation for those fields, but since i change this in unit tests already it might make sense to do it here.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2819200264",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdmMzY4ZWE2MmNkODllNmZmNDIzOGVjNDllZmEyZWFkZGQwZTUwNDY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
      "tree": {
        "sha": "1abf91d6e4c8eb4bc78faa9d7a73f4da1d27e2b6",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/1abf91d6e4c8eb4bc78faa9d7a73f4da1d27e2b6"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cfe025ff0e1dcf984179a5a9b01dc8b865d95409",
          "sha": "cfe025ff0e1dcf984179a5a9b01dc8b865d95409",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cfe025ff0e1dcf984179a5a9b01dc8b865d95409"
        }
      ],
      "message": "qa: timelock coinbase transactions created in functional tests",
      "committer": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-21T19:24:26Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-21T19:12:48Z"
      },
      "sha": "7f368ea62cd89e6ff4238ec49efa2eaddd0e5046"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFhMGFlMTA1YjIzZTQ4YzNkY2YyMDkxMDUyYWQ5N2I5YWUyODljYTA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa0ae105b23e48c3dcf2091052ad97b9ae289ca0",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/aa0ae105b23e48c3dcf2091052ad97b9ae289ca0",
      "tree": {
        "sha": "3e7a7218c18149af55614b761ce7c991905d5697",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3e7a7218c18149af55614b761ce7c991905d5697"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
          "sha": "7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7f368ea62cd89e6ff4238ec49efa2eaddd0e5046"
        }
      ],
      "message": "contrib: timelock coinbase transactions in signet miner",
      "committer": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-21T19:53:09Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-21T19:53:09Z"
      },
      "sha": "aa0ae105b23e48c3dcf2091052ad97b9ae289ca0"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17342840744,
      "node_id": "HRFPE_lADOABII586wFgg0zwAAAAQJtr-o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17342840744",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "commit_url": "https://api.github.com/repos/darosior/bitcoin/commits/895beb30b375c04804e9596ed798ab56730dcae1",
      "created_at": "2025-04-21T19:54:00Z"
    },
    {
      "event": "commented",
      "id": 2819380673,
      "node_id": "IC_kwDOABII586oDFXB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2819380673",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T19:58:08Z",
      "updated_at": "2025-04-21T19:58:08Z",
      "author_association": "MEMBER",
      "body": "I have added a commit to also set nLocktime / nSequence for coinbase transactions created in fuzz targets.\r\n\r\n> The churn in the first commit is pretty annoying.\r\n\r\n@Sjors (from this and in-person discussions) i have split as much as possible of the changes from this commit into preparatory commits. Now there is in the main commit only the necessary churn to keep commits hygienic. Hopefully it helps.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#issuecomment-2819380673",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/32155"
    },
    {
      "event": "mentioned",
      "id": 17342881499,
      "node_id": "MEE_lADOABII586wFgg0zwAAAAQJt17b",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17342881499",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T19:58:09Z"
    },
    {
      "event": "subscribed",
      "id": 17342881524,
      "node_id": "SE_lADOABII586wFgg0zwAAAAQJt170",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17342881524",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-04-21T19:58:09Z"
    },
    {
      "event": "reviewed",
      "id": 2782260132,
      "node_id": "PRR_kwDOABII586l1euk",
      "url": null,
      "actor": null,
      "commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 895beb30b375c04804e9596ed798ab56730dcae1",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2782260132",
      "submitted_at": "2025-04-21T21:16:03Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "reviewed",
      "id": 2782594487,
      "node_id": "PRR_kwDOABII586l2wW3",
      "url": null,
      "actor": null,
      "commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Approach ACK 895beb30b375c04804e9596ed798ab56730dcae1",
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2782594487",
      "submitted_at": "2025-04-22T04:32:03Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGU3OGU5MmY2MzYzYzRlYTFjYmVkZDY2MzFmZTU2YzBjZDhlMTY0ZDU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5",
      "tree": {
        "sha": "96142d586155ef96f0908a2258bf97a8453b802c",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/96142d586155ef96f0908a2258bf97a8453b802c"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/aa0ae105b23e48c3dcf2091052ad97b9ae289ca0",
          "sha": "aa0ae105b23e48c3dcf2091052ad97b9ae289ca0",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/aa0ae105b23e48c3dcf2091052ad97b9ae289ca0"
        }
      ],
      "message": "qa: timelock coinbase transactions created in fuzz targets",
      "committer": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-22T13:28:52Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-21T18:47:39Z"
      },
      "sha": "e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDdiMjVkZTkyYWVmMzEzMzdhYjBkYTIwYmQyZDUxYTZmMTQzMzcxMGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7b25de92aef31337ab0da20bd2d51a6f1433710a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/7b25de92aef31337ab0da20bd2d51a6f1433710a",
      "tree": {
        "sha": "6583f6e99d743db3bf8daf5cb9115e6ecc06df55",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/6583f6e99d743db3bf8daf5cb9115e6ecc06df55"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5",
          "sha": "e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5"
        }
      ],
      "message": "qa: use prev height as nLockTime for coinbase txs created in unit tests\n\nWe don't set the nSequence as it will be set directly in the block template generator in a following\ncommit.",
      "committer": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-22T13:28:52Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-21T19:16:28Z"
      },
      "sha": "7b25de92aef31337ab0da20bd2d51a6f1433710a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDUxZTM1YmEwZWUxZDFiYWI2ZDZlNGI3ZTA1ZjA5ZTQ0OTlmMjEzNjA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/51e35ba0ee1d1bab6d6e4b7e05f09e4499f21360",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/51e35ba0ee1d1bab6d6e4b7e05f09e4499f21360",
      "tree": {
        "sha": "d1f79e4bddb5a8cff5bbf0e617d59fa6078e95f5",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/d1f79e4bddb5a8cff5bbf0e617d59fa6078e95f5"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/7b25de92aef31337ab0da20bd2d51a6f1433710a",
          "sha": "7b25de92aef31337ab0da20bd2d51a6f1433710a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/7b25de92aef31337ab0da20bd2d51a6f1433710a"
        }
      ],
      "message": "miner: timelock coinbase transactions\n\nThe Consensus Cleanup soft fork proposal includes enforcing that coinbase transactions set their\nlocktime field to the block height, minus 1 (as well as their nSequence such as to not disable the\ntimelock). If such a fork were to be activated by Bitcoin users, miners need to be ready to produce\ncompliant blocks at the risk of losing substantial amounts mining would-be invalid blocks. As miners\nare unfamously slow to upgrade, it's good to make this change as early as possible.\n\nAlthough Bitcoin Core's GBT implementation does not provide the \"coinbasetxn\" field, and mining\npool software crafts the coinbase on its own, updating the Bitcoin Core mining code is a first step\ntoward convincing pools to update their (often closed source) code. A possible followup is also to\nintroduce new fields to GBT. In addition, this first step also makes it possible to test future\nConsensus Cleanup changes.\n\nThe changes to the seemingly-unrelated RBF tests is because these tests assert an error message\nwhich may vary depending on the txid of the transactions used in the test. This commit changes the\ncoinbase transaction structure and therefore impact the txid of transactions in all tests.\n\nThe change to the \"Bad snapshot\" error message in the assumeutxo functional test is because this\nspecific test case reads into the txid of the next transaction in the snapshot and asserts the error\nmessage based it gets on deserializing this txid as a coin for the previous transaction. As this\ncommit changes this txid it impacts the deserialization error raised.",
      "committer": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-22T13:28:52Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-02-19T15:26:50Z"
      },
      "sha": "51e35ba0ee1d1bab6d6e4b7e05f09e4499f21360"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDFiMDg3OGM1ZGMyZWUwYzg0Y2U4MDBmMDNlOGM5NTNjZjMxYjkxMWU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "tree": {
        "sha": "80d31f65dab1e6e6489201f7a12746cb078f244d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/80d31f65dab1e6e6489201f7a12746cb078f244d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/51e35ba0ee1d1bab6d6e4b7e05f09e4499f21360",
          "sha": "51e35ba0ee1d1bab6d6e4b7e05f09e4499f21360",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/51e35ba0ee1d1bab6d6e4b7e05f09e4499f21360"
        }
      ],
      "message": "qa: sanity check mined block have their coinbase timelocked to height",
      "committer": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-04-22T13:28:52Z"
      },
      "author": {
        "name": "Antoine Poinsot",
        "email": "darosior@protonmail.com",
        "date": "2025-03-27T18:41:49Z"
      },
      "sha": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 17354098160,
      "node_id": "HRFPE_lADOABII586wFgg0zwAAAAQKYoXw",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/17354098160",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "commit_url": "https://api.github.com/repos/darosior/bitcoin/commits/1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "created_at": "2025-04-22T13:32:20Z"
    },
    {
      "event": "reviewed",
      "id": 2785039520,
      "node_id": "PRR_kwDOABII586mAFSg",
      "url": null,
      "actor": null,
      "commit_id": "7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2785039520",
      "submitted_at": "2025-04-22T18:46:21Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    },
    {
      "event": "reviewed",
      "id": 2785135934,
      "node_id": "PRR_kwDOABII586mAc0-",
      "url": null,
      "actor": null,
      "commit_id": "e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#pullrequestreview-2785135934",
      "submitted_at": "2025-04-22T19:32:53Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018171982",
      "pull_request_review_id": 2724722238,
      "id": 2018171982,
      "node_id": "PRRC_kwDOABII5854StxO",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    Assert(nHeight > 0);",
      "path": "src/node/miner.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": null,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is this Assert necessary? Is it even possible to reach this code with `nHeight<=0`? Genesis block is hardcoded, so this value at list will be 1, right?",
      "created_at": "2025-03-28T08:53:43Z",
      "updated_at": "2025-03-28T11:30:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2018171982",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018171982"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 166,
      "original_line": 166,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018964740",
      "pull_request_review_id": 2726051010,
      "id": 2018964740,
      "node_id": "PRRC_kwDOABII5854VvUE",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Note to reviewers: `IsFinal()` has been present since the first commit as a way to ignore the sequence number, hence the need to avoid `SEQUENCE_FINAL`.\r\n\r\nThe proposed consensus rule doesn't require `MAX_SEQUENCE_NONFINAL`, anything other than `SEQUENCE_FINAL` is allowed. Maybe that's good to say in a comment.",
      "created_at": "2025-03-28T16:16:26Z",
      "updated_at": "2025-03-28T16:16:26Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2018964740",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018964740"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018965668",
      "pull_request_review_id": 2726052639,
      "id": 2018965668,
      "node_id": "PRRC_kwDOABII5854Vvik",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    Assert(nHeight > 0);\n+    coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "As a sanity check, I changed this to just `nHeight`, which immediately triggers:\r\n\r\n```\r\nTestBlockValidity: Consensus::ContextualCheckBlock: bad-txns-nonfinal, non-final transaction\r\n```\r\n\r\n(either when calling `getblocktemplate` or in sv2 as soon as the Template Provider tries to build a template)\r\n\r\nDropping the `nSequence` line makes that error go away.\r\n\r\nIn other words, this guarantees that the coinbase transaction can't have been present in an older block. But as the BIP points out, nLockTime wasn't enforced until block 36,000 or so. \r\nhttps://bitcoin.stackexchange.com/questions/90229/nlocktime-in-bitcoin-core\r\n\r\nWe can then manually verify that all these old blocks have `nLockTime` set to 0:\r\n\r\n```sh\r\nbitcoin % for i in {1..36001}\r\ndo\r\nbitcoin-cli getblock `bitcoin-cli getblockhash $i` 2 | jq '.tx[0].locktime'\r\ndone | grep -v 0\r\n```\r\n\r\nNote that any alien reorg shenanigans (now that checkpoints are gone) can't cheat with nLockTime because the rule is now enforced from genesis.",
      "created_at": "2025-03-28T16:16:56Z",
      "updated_at": "2025-03-28T16:32:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2018965668",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2018965668"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 167,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019460884",
      "pull_request_review_id": 2726906137,
      "id": 2019460884,
      "node_id": "PRRC_kwDOABII5854XocU",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    Assert(nHeight > 0);\n+    coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": 2018965668,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I was discussing with @hodlinator  and @Prabhat1308 that a Coinbase UTXO cannot be spent until 100 blocks have been added after it. Wouldn't it be better to set this to `static_cast<uint32_t>(nHeight +99 );`? This could simplify the logic for the Coinbase spend condition and potentially make mempool and transaction validation more efficient",
      "created_at": "2025-03-28T21:50:41Z",
      "updated_at": "2025-03-28T21:51:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2019460884",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019460884"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 167,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019840095",
      "pull_request_review_id": 2727418073,
      "id": 2019840095,
      "node_id": "PRRC_kwDOABII5854ZFBf",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    Assert(nHeight > 0);\n+    coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": 2018965668,
      "user": {
        "login": "polespinasa",
        "id": 57642229,
        "node_id": "MDQ6VXNlcjU3NjQyMjI5",
        "avatar_url": "https://avatars.githubusercontent.com/u/57642229?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/polespinasa",
        "html_url": "https://github.com/polespinasa",
        "followers_url": "https://api.github.com/users/polespinasa/followers",
        "following_url": "https://api.github.com/users/polespinasa/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/polespinasa/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/polespinasa/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/polespinasa/subscriptions",
        "organizations_url": "https://api.github.com/users/polespinasa/orgs",
        "repos_url": "https://api.github.com/users/polespinasa/repos",
        "events_url": "https://api.github.com/users/polespinasa/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/polespinasa/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Wouldn't it be better to set this to `static_cast<uint32_t>(nHeight +99 );`?\r\n\r\nThat would make the transaction invalid and unable to be included in a block until the `nHeight + 99` block. It isn't a condition on when it can be spent, but when it is valid (therefore it can be mined).\r\n",
      "created_at": "2025-03-29T16:26:31Z",
      "updated_at": "2025-03-29T16:28:11Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2019840095",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019840095"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 167,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019842504",
      "pull_request_review_id": 2727422571,
      "id": 2019842504,
      "node_id": "PRRC_kwDOABII5854ZFnI",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    Assert(nHeight > 0);\n+    coinbaseTx.nLockTime = static_cast<uint32_t>(nHeight - 1);",
      "path": "src/node/miner.cpp",
      "position": 10,
      "original_position": 10,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": 2018965668,
      "user": {
        "login": "arejula27",
        "id": 46299278,
        "node_id": "MDQ6VXNlcjQ2Mjk5Mjc4",
        "avatar_url": "https://avatars.githubusercontent.com/u/46299278?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arejula27",
        "html_url": "https://github.com/arejula27",
        "followers_url": "https://api.github.com/users/arejula27/followers",
        "following_url": "https://api.github.com/users/arejula27/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/arejula27/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/arejula27/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/arejula27/subscriptions",
        "organizations_url": "https://api.github.com/users/arejula27/orgs",
        "repos_url": "https://api.github.com/users/arejula27/repos",
        "events_url": "https://api.github.com/users/arejula27/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/arejula27/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "That's true, I confused it with CLTV.",
      "created_at": "2025-03-29T16:39:23Z",
      "updated_at": "2025-03-29T16:39:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2019842504",
      "author_association": "NONE",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2019842504"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 167,
      "original_line": 167,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033762765",
      "pull_request_review_id": 2750944566,
      "id": 2033762765,
      "node_id": "PRRC_kwDOABII5855OMHN",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;\n     coinbaseTx.vout.resize(1);\n     coinbaseTx.vout[0].scriptPubKey = m_options.coinbase_output_script;\n     coinbaseTx.vout[0].nValue = nFees + GetBlockSubsidy(nHeight, chainparams.GetConsensus());\n     coinbaseTx.vin[0].scriptSig = CScript() << nHeight << OP_0;\n+    Assert(nHeight > 0);",
      "path": "src/node/miner.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": 2018171982,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This is documenting that it isn't possible.",
      "created_at": "2025-04-08T18:01:23Z",
      "updated_at": "2025-04-08T18:01:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2033762765",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2033762765"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 166,
      "original_line": 166,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034941939",
      "pull_request_review_id": 2752800995,
      "id": 2034941939,
      "node_id": "PRRC_kwDOABII5855Sr_z",
      "diff_hunk": "@@ -81,7 +81,9 @@ CBlock BuildChainTestingSetup::CreateBlock(const CBlockIndex* prev,\n     }\n     {\n         CMutableTransaction tx_coinbase{*block.vtx.at(0)};\n+        tx_coinbase.nLockTime = static_cast<uint32_t>(prev->nHeight);\n         tx_coinbase.vin.at(0).scriptSig = CScript{} << prev->nHeight + 1;\n+        tx_coinbase.vin.at(0).nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "What do you think about adding a dedicated `MakeCoinbase` function to encapsulate all of this a bit better and share its behaviour between the tests and production code? There is already a similar function in the functional test framework after all.",
      "created_at": "2025-04-09T09:34:50Z",
      "updated_at": "2025-04-09T10:24:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2034941939",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2034941939"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035025409",
      "pull_request_review_id": 2752800995,
      "id": 2035025409,
      "node_id": "PRRC_kwDOABII5855TAYB",
      "diff_hunk": "@@ -63,6 +64,9 @@ def mine(self, height, prev_hash, blocks, node, fees=0):\n         block.nBits = DIFF_1_N_BITS\n         block.nNonce = blocks['nonces'][height - 1]\n         block.vtx = [create_coinbase(height=height, script_pubkey=bytes.fromhex(COINBASE_SCRIPT_PUBKEY), retarget_period=2016)]\n+        block.vtx[0].nLockTime = 0\n+        block.vtx[0].vin[0].nSequence = SEQUENCE_FINAL\n+        block.vtx[0].rehash()",
      "path": "test/functional/mining_mainnet.py",
      "position": 15,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Just a comment, but I also don't think it would be worth it to re-generate this alternative mainnet chain.",
      "created_at": "2025-04-09T10:06:23Z",
      "updated_at": "2025-04-09T10:24:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2035025409",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035025409"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035069481",
      "pull_request_review_id": 2752800995,
      "id": 2035069481,
      "node_id": "PRRC_kwDOABII5855TLIp",
      "diff_hunk": "@@ -384,7 +384,7 @@ def test_wrong_conflict_cluster_size_parents_child(self):\n         # Now make conflicting packages for each coin\n         package_hex1, _package_txns1 = self.create_simple_package(coin1, DEFAULT_FEE, DEFAULT_CHILD_FEE)\n         package_result = node.submitpackage(package_hex1)\n-        assert_equal(f\"package RBF failed: {child_result['tx'].rehash()} has 2 ancestors, max 1 allowed\", package_result[\"package_msg\"])\n+        assert_equal(f\"package RBF failed: {parent1_result['tx'].rehash()} is not the only parent of child {child_result['tx'].rehash()}\", package_result[\"package_msg\"])",
      "path": "test/functional/mempool_package_rbf.py",
      "position": 5,
      "original_position": 5,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": null,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> The changes to the seemingly-unrelated RBF tests is because these tests assert an error message\r\nwhich may vary depending on the txid of the transactions used in the test.\r\n\r\nThis is still confusing to me. Shouldn't this just continue working with the decrementing counter for the sequence number? Or is that entirely unrelated?",
      "created_at": "2025-04-09T10:23:32Z",
      "updated_at": "2025-04-09T10:24:23Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2035069481",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2035069481"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 387,
      "original_line": 387,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036065160",
      "pull_request_review_id": 2754672647,
      "id": 2036065160,
      "node_id": "PRRC_kwDOABII5855W-OI",
      "diff_hunk": "@@ -362,6 +363,12 @@ def test_block_max_weight(self):\n             expected_msg=f\"Error: Specified -blockmaxweight ({MAX_BLOCK_WEIGHT + 1}) exceeds consensus maximum block weight ({MAX_BLOCK_WEIGHT})\",\n         )\n \n+    def test_height_in_locktime(self):",
      "path": "test/functional/mining_basic.py",
      "position": 16,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "c872728e5260890584f4db6742aefcd98be92643",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "c872728e5260890584f4db6742aefcd98be92643: nothing is calling this function",
      "created_at": "2025-04-09T20:03:41Z",
      "updated_at": "2025-04-09T20:03:41Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2036065160",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036065160"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 366,
      "original_line": 366,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036086631",
      "pull_request_review_id": 2754718241,
      "id": 2036086631,
      "node_id": "PRRC_kwDOABII5855XDdn",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "2c10f93d0bd920f20e91f1be7c82e66af2a52919 nit: can you move this down next to `nLockTime`? This line is what makes the `nLockTime` bit work, so makes sense to have them together. Also, in https://github.com/Sjors/bitcoin/pull/49 I put this behavior behind a startup flag.",
      "created_at": "2025-04-09T20:19:39Z",
      "updated_at": "2025-04-09T20:34:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2036086631",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036086631"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036092474",
      "pull_request_review_id": 2754718241,
      "id": 2036092474,
      "node_id": "PRRC_kwDOABII5855XE46",
      "diff_hunk": "@@ -63,6 +64,9 @@ def mine(self, height, prev_hash, blocks, node, fees=0):\n         block.nBits = DIFF_1_N_BITS\n         block.nNonce = blocks['nonces'][height - 1]\n         block.vtx = [create_coinbase(height=height, script_pubkey=bytes.fromhex(COINBASE_SCRIPT_PUBKEY), retarget_period=2016)]\n+        block.vtx[0].nLockTime = 0\n+        block.vtx[0].vin[0].nSequence = SEQUENCE_FINAL\n+        block.vtx[0].rehash()",
      "path": "test/functional/mining_mainnet.py",
      "position": 15,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2035025409,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Would be good to add a comment here to explain.\r\n\r\nWe can always regenerate it later.",
      "created_at": "2025-04-09T20:24:27Z",
      "updated_at": "2025-04-09T20:34:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2036092474",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036092474"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036095417",
      "pull_request_review_id": 2754718241,
      "id": 2036095417,
      "node_id": "PRRC_kwDOABII5855XFm5",
      "diff_hunk": "@@ -81,7 +81,9 @@ CBlock BuildChainTestingSetup::CreateBlock(const CBlockIndex* prev,\n     }\n     {\n         CMutableTransaction tx_coinbase{*block.vtx.at(0)};\n+        tx_coinbase.nLockTime = static_cast<uint32_t>(prev->nHeight);\n         tx_coinbase.vin.at(0).scriptSig = CScript{} << prev->nHeight + 1;\n+        tx_coinbase.vin.at(0).nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2034941939,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Maybe `MakeCoinbase(bool with_lock_time = true)`.",
      "created_at": "2025-04-09T20:26:46Z",
      "updated_at": "2025-04-09T20:34:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2036095417",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036095417"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036160131",
      "pull_request_review_id": 2754841040,
      "id": 2036160131,
      "node_id": "PRRC_kwDOABII5855XVaD",
      "diff_hunk": "@@ -362,6 +363,12 @@ def test_block_max_weight(self):\n             expected_msg=f\"Error: Specified -blockmaxweight ({MAX_BLOCK_WEIGHT + 1}) exceeds consensus maximum block weight ({MAX_BLOCK_WEIGHT})\",\n         )\n \n+    def test_height_in_locktime(self):",
      "path": "test/functional/mining_basic.py",
      "position": 16,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "c872728e5260890584f4db6742aefcd98be92643",
      "in_reply_to_id": 2036065160,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Looks like this slipped through at some point. Fixed now, thanks.",
      "created_at": "2025-04-09T21:21:08Z",
      "updated_at": "2025-04-09T21:21:08Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2036160131",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2036160131"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 366,
      "original_line": 366,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052746710",
      "pull_request_review_id": 2781827520,
      "id": 2052746710,
      "node_id": "PRRC_kwDOABII5856Wm3W",
      "diff_hunk": "@@ -81,7 +81,9 @@ CBlock BuildChainTestingSetup::CreateBlock(const CBlockIndex* prev,\n     }\n     {\n         CMutableTransaction tx_coinbase{*block.vtx.at(0)};\n+        tx_coinbase.nLockTime = static_cast<uint32_t>(prev->nHeight);\n         tx_coinbase.vin.at(0).scriptSig = CScript{} << prev->nHeight + 1;\n+        tx_coinbase.vin.at(0).nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2034941939,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "So i looked into this and i don't think there is a clean way of doing it that would help here. What this function is doing is really a hack, creating a block assembler for a specific tip and mining a block with `prev` that does not correspond to it. However one thing is the `nSequence` doesn't change from one block to another. I added here for clarity but i now think it's unnecessarily confusing, so i removed it.",
      "created_at": "2025-04-21T17:25:35Z",
      "updated_at": "2025-04-21T17:25:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052746710",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052746710"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052783821",
      "pull_request_review_id": 2781891000,
      "id": 2052783821,
      "node_id": "PRRC_kwDOABII5856Wv7N",
      "diff_hunk": "@@ -384,7 +384,7 @@ def test_wrong_conflict_cluster_size_parents_child(self):\n         # Now make conflicting packages for each coin\n         package_hex1, _package_txns1 = self.create_simple_package(coin1, DEFAULT_FEE, DEFAULT_CHILD_FEE)\n         package_result = node.submitpackage(package_hex1)\n-        assert_equal(f\"package RBF failed: {child_result['tx'].rehash()} has 2 ancestors, max 1 allowed\", package_result[\"package_msg\"])\n+        assert_equal(f\"package RBF failed: {parent1_result['tx'].rehash()} is not the only parent of child {child_result['tx'].rehash()}\", package_result[\"package_msg\"])",
      "path": "test/functional/mempool_package_rbf.py",
      "position": 5,
      "original_position": 5,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2035069481,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It's only related to the coinbase nSequence/nLockTime change insofar as those change the txid of the coinbase transactions and therefore of all transactions in the test (and all other tests, but this test is one of those tests that implicitly relied on specific txid values).\r\n\r\nThis test is exercising the error returned by `CheckConflictTopology`, which iterates through the set of conflicts: https://github.com/bitcoin/bitcoin/blob/d91a746815e4428c738f1a096a950292cbdb5469/src/txmempool.cpp#L1277\r\n\r\nAnd returns the first error encountered: https://github.com/bitcoin/bitcoin/blob/d91a746815e4428c738f1a096a950292cbdb5469/src/txmempool.cpp#L1288-L1309\r\n\r\nThe (ordered) set of conflicts is lexicographically sorted by txid: https://github.com/bitcoin/bitcoin/blob/d91a746815e4428c738f1a096a950292cbdb5469/src/txmempool.h#L396\r\n\r\nTherefore, changing nothing but the txid of the transactions involved in the test may cause the order of conflicts checked by `CheckConflictTopology` to change, and another error to be encountered first and therefore the test to fail since it asserts the specific error message.\r\n\r\nFor example, the check you are commenting on sets up the following topology: two distinct transaction `A` and `A'` are spent by a transaction `B`. `C`, which conflicts with `A`, is broadcast. Here `CheckTopology` could either bail on `C` having two parents (\"`C` has 2 ancestors, max 1 allowed\") or on `A` having a descendant which has other parents (\"`A` is not the only parent of child `C`\"). Which error message is returned depends on which is encountered first, which depends on the value of the txid of the transactions involved. :man_shrugging: ",
      "created_at": "2025-04-21T17:59:00Z",
      "updated_at": "2025-04-21T17:59:01Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052783821",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052783821"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 387,
      "original_line": 387,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052793660",
      "pull_request_review_id": 2781908084,
      "id": 2052793660,
      "node_id": "PRRC_kwDOABII5856WyU8",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2036086631,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I added the comment as you requested above (https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2018964740), hopefully this makes it clearer without having to move it.\r\n\r\nI don't think there should be a startup flag since i don't see a reason for disabling it: this should not affect miners in any way.",
      "created_at": "2025-04-21T18:06:59Z",
      "updated_at": "2025-04-21T18:07:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052793660",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052793660"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052795436",
      "pull_request_review_id": 2781911163,
      "id": 2052795436,
      "node_id": "PRRC_kwDOABII5856Wyws",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2f55cec20002f494436dd01c7410f1cbc62eba75",
      "in_reply_to_id": 2018964740,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Added a comment.",
      "created_at": "2025-04-21T18:08:02Z",
      "updated_at": "2025-04-21T18:08:02Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052795436",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052795436"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052795779",
      "pull_request_review_id": 2781911685,
      "id": 2052795779,
      "node_id": "PRRC_kwDOABII5856Wy2D",
      "diff_hunk": "@@ -63,6 +64,9 @@ def mine(self, height, prev_hash, blocks, node, fees=0):\n         block.nBits = DIFF_1_N_BITS\n         block.nNonce = blocks['nonces'][height - 1]\n         block.vtx = [create_coinbase(height=height, script_pubkey=bytes.fromhex(COINBASE_SCRIPT_PUBKEY), retarget_period=2016)]\n+        block.vtx[0].nLockTime = 0\n+        block.vtx[0].vin[0].nSequence = SEQUENCE_FINAL\n+        block.vtx[0].rehash()",
      "path": "test/functional/mining_mainnet.py",
      "position": 15,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2035025409,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Added a comment.",
      "created_at": "2025-04-21T18:08:14Z",
      "updated_at": "2025-04-21T18:08:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052795779",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052795779"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 70,
      "original_line": 70,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052796088",
      "pull_request_review_id": 2781912185,
      "id": 2052796088,
      "node_id": "PRRC_kwDOABII5856Wy64",
      "diff_hunk": "@@ -384,7 +384,7 @@ def test_wrong_conflict_cluster_size_parents_child(self):\n         # Now make conflicting packages for each coin\n         package_hex1, _package_txns1 = self.create_simple_package(coin1, DEFAULT_FEE, DEFAULT_CHILD_FEE)\n         package_result = node.submitpackage(package_hex1)\n-        assert_equal(f\"package RBF failed: {child_result['tx'].rehash()} has 2 ancestors, max 1 allowed\", package_result[\"package_msg\"])\n+        assert_equal(f\"package RBF failed: {parent1_result['tx'].rehash()} is not the only parent of child {child_result['tx'].rehash()}\", package_result[\"package_msg\"])",
      "path": "test/functional/mempool_package_rbf.py",
      "position": 5,
      "original_position": 5,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2035069481,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Leaving unresolved as it may be useful to other reviewers.",
      "created_at": "2025-04-21T18:08:30Z",
      "updated_at": "2025-04-21T18:08:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052796088",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052796088"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 387,
      "original_line": 387,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052998450",
      "pull_request_review_id": 2782249572,
      "id": 2052998450,
      "node_id": "PRRC_kwDOABII5856XkUy",
      "diff_hunk": "@@ -81,7 +81,9 @@ CBlock BuildChainTestingSetup::CreateBlock(const CBlockIndex* prev,\n     }\n     {\n         CMutableTransaction tx_coinbase{*block.vtx.at(0)};\n+        tx_coinbase.nLockTime = static_cast<uint32_t>(prev->nHeight);\n         tx_coinbase.vin.at(0).scriptSig = CScript{} << prev->nHeight + 1;\n+        tx_coinbase.vin.at(0).nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/test/blockfilter_index_tests.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2034941939,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Ah, I see. I also tried to come up with something, but did not land on anything satisfying either. Was briefly thinking of adding an optional field in the `BlockCreateOptions`, but that would defeat the point. ",
      "created_at": "2025-04-21T21:08:26Z",
      "updated_at": "2025-04-21T21:08:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2052998450",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2052998450"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 86,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053224512",
      "pull_request_review_id": 2782594487,
      "id": 2053224512,
      "node_id": "PRRC_kwDOABII5856YbhA",
      "diff_hunk": "@@ -102,7 +102,8 @@ def generate_psbt(tmpl, reward_spk, *, blocktime=None, poolid=None):\n         scriptSig = CScript(b\"\" + scriptSig + CScriptOp.encode_op_pushdata(poolid))\n \n     cbtx = CTransaction()\n-    cbtx.vin = [CTxIn(COutPoint(0, 0xffffffff), scriptSig, 0xffffffff)]\n+    cbtx.nLockTime = tmpl[\"height\"] - 1",
      "path": "contrib/signet/miner",
      "position": 14,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Should these be `(height - 1) % LOCKTIME_THRESHOLD` ? Or are we just assuming a hard fork to a new transaction format in the next 9500 years?",
      "created_at": "2025-04-22T02:18:47Z",
      "updated_at": "2025-04-22T04:32:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2053224512",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053224512"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053231954",
      "pull_request_review_id": 2782594487,
      "id": 2053231954,
      "node_id": "PRRC_kwDOABII5856YdVS",
      "diff_hunk": "@@ -36,10 +38,14 @@ std::vector<std::shared_ptr<CBlock>> CreateBlockChain(size_t total_height, const\n     auto time{params.GenesisBlock().nTime};\n     for (size_t height{0}; height < total_height; ++height) {\n         CBlock& block{*(ret.at(height) = std::make_shared<CBlock>())};\n+        uint32_t prev_height{0};\n+        if (height > 0) prev_height = static_cast<uint32_t>(height - 1);\n \n         CMutableTransaction coinbase_tx;\n+        coinbase_tx.nLockTime = prev_height;\n         coinbase_tx.vin.resize(1);\n         coinbase_tx.vin[0].prevout.SetNull();\n+        coinbase_tx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL; // Make sure timelock is enforced.",
      "path": "src/test/util/mining.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Would it be more elegant to leave the genesis block's nSequence as `MAX_SEQUENCE` to avoid the implication that the genesis block might be timelocked? ie,\r\n\r\n```c++\r\ncoinbase_tx.vin.resize(1);\r\ncoinbase_tx.vin[0].prevout.SetNull();\r\nif (height > 0) {\r\n    coinbase_tx.nLockTime = static_cast<uint32_t>(height - 1);\r\n    coinbase_tx.vin[0].nSeqeunece = CTxIn::MAX_SEQUENCE_NONFINAL;\r\n}\r\n```",
      "created_at": "2025-04-22T02:29:49Z",
      "updated_at": "2025-04-22T04:32:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2053231954",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053231954"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053297415",
      "pull_request_review_id": 2782594487,
      "id": 2053297415,
      "node_id": "PRRC_kwDOABII5856YtUH",
      "diff_hunk": "@@ -30,7 +30,8 @@\n     MAX_BLOCK_WEIGHT,\n     MINIMUM_BLOCK_RESERVED_WEIGHT,\n     ser_uint256,\n-    WITNESS_SCALE_FACTOR\n+    WITNESS_SCALE_FACTOR,\n+    MAX_SEQUENCE_NONFINAL,",
      "path": "test/functional/mining_basic.py",
      "position": null,
      "original_position": 6,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Should be sorted",
      "created_at": "2025-04-22T04:12:00Z",
      "updated_at": "2025-04-22T04:32:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2053297415",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053297415"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053298127",
      "pull_request_review_id": 2782594487,
      "id": 2053298127,
      "node_id": "PRRC_kwDOABII5856YtfP",
      "diff_hunk": "@@ -362,6 +363,12 @@ def test_block_max_weight(self):\n             expected_msg=f\"Error: Specified -blockmaxweight ({MAX_BLOCK_WEIGHT + 1}) exceeds consensus maximum block weight ({MAX_BLOCK_WEIGHT})\",\n         )\n \n+    def test_height_in_locktime(self):\n+        self.log.info(\"Sanity check generated blocks have their coinbase timelocked to their height.\")\n+        self.generate(self.nodes[0], 1, sync_fun=self.no_op)\n+        block = self.nodes[0].getblock(self.nodes[0].getbestblockhash(), 2)\n+        assert_equal(block[\"tx\"][0][\"locktime\"], block[\"height\"] - 1)\n+        assert_equal(block[\"tx\"][0][\"vin\"][0][\"sequence\"], MAX_SEQUENCE_NONFINAL)",
      "path": "test/functional/mining_basic.py",
      "position": 21,
      "original_position": 19,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": null,
      "user": {
        "login": "ajtowns",
        "id": 127186,
        "node_id": "MDQ6VXNlcjEyNzE4Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/127186?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ajtowns",
        "html_url": "https://github.com/ajtowns",
        "followers_url": "https://api.github.com/users/ajtowns/followers",
        "following_url": "https://api.github.com/users/ajtowns/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ajtowns/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ajtowns/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ajtowns/subscriptions",
        "organizations_url": "https://api.github.com/users/ajtowns/orgs",
        "repos_url": "https://api.github.com/users/ajtowns/repos",
        "events_url": "https://api.github.com/users/ajtowns/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ajtowns/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Maybe add something like\r\n\r\n```python\r\n        genblock = create_block(hashprev=int(block[\"hash\"], 16), tmpl=dict(height=block[\"height\"]+1), ntime=block[\"time\"]+1)\r\n        genblock.vtx[0].vin[0].nSequence = SEQUENCE_FINAL\r\n        genblock.vtx[0].rehash()\r\n        genblock.hashMerkleRoot = genblock.calc_merkle_root()\r\n        genblock.solve()\r\n        self.nodes[0].submitblock(genblock.serialize().hex())\r\n        assert_equal(self.nodes[0].getbestblockhash(), genblock.hash)\r\n```\r\n\r\nto ensure there's explicit test coverage for blocks with a coinbase whose nSequence is final?\r\n\r\nI believe with this PR there remains implicit test coverage via feature_taproot (`gen_test_vectors` uses `SEQUENCE_FINAL`) and via rpc_getblockstats (via the test data in data/rpc_getblockstats.json).",
      "created_at": "2025-04-22T04:13:14Z",
      "updated_at": "2025-04-22T04:32:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2053298127",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053298127"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 371,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053579424",
      "pull_request_review_id": 2783230114,
      "id": 2053579424,
      "node_id": "PRRC_kwDOABII5856ZyKg",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2036086631,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It affects any miner that uses the Mining interface, because `createNewBlock` returns a `BlockTemplate` which includes a `getBlock()` method which returns a `CBlock` that contains the coinbase transaction.",
      "created_at": "2025-04-22T08:11:05Z",
      "updated_at": "2025-04-22T08:11:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2053579424",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2053579424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054047295",
      "pull_request_review_id": 2783993908,
      "id": 2054047295,
      "node_id": "PRRC_kwDOABII5856bkY_",
      "diff_hunk": "@@ -158,10 +158,13 @@ std::unique_ptr<CBlockTemplate> BlockAssembler::CreateNewBlock()\n     CMutableTransaction coinbaseTx;\n     coinbaseTx.vin.resize(1);\n     coinbaseTx.vin[0].prevout.SetNull();\n+    coinbaseTx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL;",
      "path": "src/node/miner.cpp",
      "position": null,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "2c10f93d0bd920f20e91f1be7c82e66af2a52919",
      "in_reply_to_id": 2036086631,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Of course. My point is that it does not change anything for a miner if its coinbase transaction has `nLockTime` 0 or height-1.",
      "created_at": "2025-04-22T12:49:09Z",
      "updated_at": "2025-04-22T12:49:09Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054047295",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054047295"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 161,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054067055",
      "pull_request_review_id": 2784025839,
      "id": 2054067055,
      "node_id": "PRRC_kwDOABII5856bpNv",
      "diff_hunk": "@@ -102,7 +102,8 @@ def generate_psbt(tmpl, reward_spk, *, blocktime=None, poolid=None):\n         scriptSig = CScript(b\"\" + scriptSig + CScriptOp.encode_op_pushdata(poolid))\n \n     cbtx = CTransaction()\n-    cbtx.vin = [CTxIn(COutPoint(0, 0xffffffff), scriptSig, 0xffffffff)]\n+    cbtx.nLockTime = tmpl[\"height\"] - 1",
      "path": "contrib/signet/miner",
      "position": 14,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": 2053224512,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "These are equivalent. In both cases the coinbase transaction will still be valid, just not timelocked to the block. I think it's marginally better to not make it modulo `LOCKTIME_THRESHOLD` for simplicity and to avoid rewinding back to values already used. But really, i think anything past year 2106 shouldn't matter. :)",
      "created_at": "2025-04-22T13:00:14Z",
      "updated_at": "2025-04-22T13:00:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054067055",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054067055"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 105,
      "original_line": 105,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054112074",
      "pull_request_review_id": 2784102761,
      "id": 2054112074,
      "node_id": "PRRC_kwDOABII5856b0NK",
      "diff_hunk": "@@ -362,6 +363,12 @@ def test_block_max_weight(self):\n             expected_msg=f\"Error: Specified -blockmaxweight ({MAX_BLOCK_WEIGHT + 1}) exceeds consensus maximum block weight ({MAX_BLOCK_WEIGHT})\",\n         )\n \n+    def test_height_in_locktime(self):\n+        self.log.info(\"Sanity check generated blocks have their coinbase timelocked to their height.\")\n+        self.generate(self.nodes[0], 1, sync_fun=self.no_op)\n+        block = self.nodes[0].getblock(self.nodes[0].getbestblockhash(), 2)\n+        assert_equal(block[\"tx\"][0][\"locktime\"], block[\"height\"] - 1)\n+        assert_equal(block[\"tx\"][0][\"vin\"][0][\"sequence\"], MAX_SEQUENCE_NONFINAL)",
      "path": "test/functional/mining_basic.py",
      "position": 21,
      "original_position": 19,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": 2053298127,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "It feels out of place in mining_basic, and the PR that introduces validation checks for nSequence/nLockTime in coinbase does check various combinations in feature_block, including this one. So i think it's better left there?",
      "created_at": "2025-04-22T13:24:15Z",
      "updated_at": "2025-04-22T13:24:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054112074",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054112074"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 371,
      "original_line": 371,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054128939",
      "pull_request_review_id": 2784129059,
      "id": 2054128939,
      "node_id": "PRRC_kwDOABII5856b4Ur",
      "diff_hunk": "@@ -30,7 +30,8 @@\n     MAX_BLOCK_WEIGHT,\n     MINIMUM_BLOCK_RESERVED_WEIGHT,\n     ser_uint256,\n-    WITNESS_SCALE_FACTOR\n+    WITNESS_SCALE_FACTOR,\n+    MAX_SEQUENCE_NONFINAL,",
      "path": "test/functional/mining_basic.py",
      "position": null,
      "original_position": 6,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": 2053297415,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Done.",
      "created_at": "2025-04-22T13:31:32Z",
      "updated_at": "2025-04-22T13:31:32Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054128939",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054128939"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 34,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054129498",
      "pull_request_review_id": 2784129996,
      "id": 2054129498,
      "node_id": "PRRC_kwDOABII5856b4da",
      "diff_hunk": "@@ -36,10 +38,14 @@ std::vector<std::shared_ptr<CBlock>> CreateBlockChain(size_t total_height, const\n     auto time{params.GenesisBlock().nTime};\n     for (size_t height{0}; height < total_height; ++height) {\n         CBlock& block{*(ret.at(height) = std::make_shared<CBlock>())};\n+        uint32_t prev_height{0};\n+        if (height > 0) prev_height = static_cast<uint32_t>(height - 1);\n \n         CMutableTransaction coinbase_tx;\n+        coinbase_tx.nLockTime = prev_height;\n         coinbase_tx.vin.resize(1);\n         coinbase_tx.vin[0].prevout.SetNull();\n+        coinbase_tx.vin[0].nSequence = CTxIn::MAX_SEQUENCE_NONFINAL; // Make sure timelock is enforced.",
      "path": "src/test/util/mining.cpp",
      "position": null,
      "original_position": 20,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "895beb30b375c04804e9596ed798ab56730dcae1",
      "in_reply_to_id": 2053231954,
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Sure, done.",
      "created_at": "2025-04-22T13:31:50Z",
      "updated_at": "2025-04-22T13:31:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054129498",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054129498"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 48,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054677515",
      "pull_request_review_id": 2785039520,
      "id": 2054677515,
      "node_id": "PRRC_kwDOABII5856d-QL",
      "diff_hunk": "@@ -43,6 +43,7 @@\n \n MAX_BIP125_RBF_SEQUENCE = 0xfffffffd  # Sequence number that is rbf-opt-in (BIP 125) and csv-opt-out (BIP 68)\n SEQUENCE_FINAL = 0xffffffff  # Sequence number that disables nLockTime if set for every input of a tx\n+MAX_SEQUENCE_NONFINAL = 0xfffffffe  # Highest sequence number that does not disable nLockTime",
      "path": "test/functional/test_framework/messages.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "nit in 7f368ea62cd89e6ff4238ec49efa2eaddd0e5046: Needs rebase, as it is already included in master. I think the name already implies that this is the \"highest sequence number with the given property (non-final)\", so the comment seems redundant. The comment seems better to mention how it relates to BIPs. For reference, the existing comment is: `Sequence number that is csv-opt-out (BIP 68)`. See: https://github.com/bitcoin/bitcoin/commit/06439a14c884d7f81f331646ad361e88b3037a51#diff-1698fabd4ddd298eb28e234d97f34e744f568852b77361384c8edb38819de5e3R45",
      "created_at": "2025-04-22T18:46:20Z",
      "updated_at": "2025-04-22T18:46:21Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054677515",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054677515"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054728640",
      "pull_request_review_id": 2785125202,
      "id": 2054728640,
      "node_id": "PRRC_kwDOABII5856eKvA",
      "diff_hunk": "@@ -43,6 +43,7 @@\n \n MAX_BIP125_RBF_SEQUENCE = 0xfffffffd  # Sequence number that is rbf-opt-in (BIP 125) and csv-opt-out (BIP 68)\n SEQUENCE_FINAL = 0xffffffff  # Sequence number that disables nLockTime if set for every input of a tx\n+MAX_SEQUENCE_NONFINAL = 0xfffffffe  # Highest sequence number that does not disable nLockTime",
      "path": "test/functional/test_framework/messages.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
      "in_reply_to_id": 2054677515,
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The comment may be confusing in the context of just using nlocktime, so maybe it should be amended to describe its non-BIP68 meaning too?",
      "created_at": "2025-04-22T19:27:19Z",
      "updated_at": "2025-04-22T19:27:20Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054728640",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054728640"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054735178",
      "pull_request_review_id": 2785135934,
      "id": 2054735178,
      "node_id": "PRRC_kwDOABII5856eMVK",
      "diff_hunk": "@@ -44,6 +46,10 @@ std::vector<std::shared_ptr<CBlock>> CreateBlockChain(size_t total_height, const\n         coinbase_tx.vout[0].scriptPubKey = P2WSH_OP_TRUE;\n         coinbase_tx.vout[0].nValue = GetBlockSubsidy(height + 1, params.GetConsensus());\n         coinbase_tx.vin[0].scriptSig = CScript() << (height + 1) << OP_0;\n+        if (height > 0) {\n+            coinbase_tx.nLockTime = static_cast<uint32_t>(height - 1);",
      "path": "src/test/util/mining.cpp",
      "position": 14,
      "original_position": 14,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "e78e92f6363c4ea1cbedd6631fe56c0cd8e164d5: I don't think this is right. Why the `-1`?\r\n\r\nFor reference, I debugged this via:\r\n\r\n```diff\r\ndiff --git a/src/test/fuzz/utxo_snapshot.cpp b/src/test/fuzz/utxo_snapshot.cpp\r\nindex 13f6088192..927fcb483c 100644\r\n--- a/src/test/fuzz/utxo_snapshot.cpp\r\n+++ b/src/test/fuzz/utxo_snapshot.cpp\r\n@@ -92,6 +92,7 @@ void initialize_chain()\r\n             Assert(processed);\r\n             const auto* index{WITH_LOCK(::cs_main, return chainman.m_blockman.LookupBlockIndex(block->GetHash()))};\r\n             Assert(index);\r\n+            std::cout << index->nHeight << \": \" << block->vtx[0]->nLockTime << std::endl;\r\n         }\r\n     }\r\n     g_setup = setup.get();\r\n```\r\n\r\nand the output was:\r\n\r\n```\r\n...\r\n198: 196\r\n199: 197\r\n200: 198\r\n",
      "created_at": "2025-04-22T19:32:52Z",
      "updated_at": "2025-04-22T19:32:53Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054735178",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054735178"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 50,
      "original_line": 50,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054746098",
      "pull_request_review_id": 2785153863,
      "id": 2054746098,
      "node_id": "PRRC_kwDOABII5856eO_y",
      "diff_hunk": "@@ -43,6 +43,7 @@\n \n MAX_BIP125_RBF_SEQUENCE = 0xfffffffd  # Sequence number that is rbf-opt-in (BIP 125) and csv-opt-out (BIP 68)\n SEQUENCE_FINAL = 0xffffffff  # Sequence number that disables nLockTime if set for every input of a tx\n+MAX_SEQUENCE_NONFINAL = 0xfffffffe  # Highest sequence number that does not disable nLockTime",
      "path": "test/functional/test_framework/messages.py",
      "position": 4,
      "original_position": 4,
      "commit_id": "1b0878c5dc2ee0c84ce800f03e8c953cf31b911e",
      "original_commit_id": "7f368ea62cd89e6ff4238ec49efa2eaddd0e5046",
      "in_reply_to_id": 2054677515,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yeah, the comments here are one-line summaries of the \"real\" comments in `./src/primitives/transaction.h` only. A third alternative may be to just remove them and refer to the docs in `./src/primitives/transaction.h` to avoid having to copy paste the full docs into both places every time they are touched.",
      "created_at": "2025-04-22T19:41:36Z",
      "updated_at": "2025-04-22T19:41:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/32155#discussion_r2054746098",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/2054746098"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/32155"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 46,
      "original_line": 46,
      "side": "RIGHT"
    }
  ]
}