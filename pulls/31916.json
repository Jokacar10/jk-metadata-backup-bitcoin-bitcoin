{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916",
    "id": 2347528337,
    "node_id": "PR_kwDOABII586L7HCR",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31916",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31916.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31916.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
    "number": 31916,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": false,
    "title": "init: Handle dropped UPnP support more gracefully",
    "user": {
      "login": "laanwj",
      "id": 126646,
      "node_id": "MDQ6VXNlcjEyNjY0Ng==",
      "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/laanwj",
      "html_url": "https://github.com/laanwj",
      "followers_url": "https://api.github.com/users/laanwj/followers",
      "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
      "organizations_url": "https://api.github.com/users/laanwj/orgs",
      "repos_url": "https://api.github.com/users/laanwj/repos",
      "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/laanwj/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "Closes bitcoin-core/gui#843.\r\n\r\nIn that issue it was brought up that users likely don't care what kind of port forwarding is used, and that the setting is opportunistic anyway, so instead of showing an extensive warning, we can simply \"upgrade\" from UPNP to NAT-PMP+PCP.\r\n \r\n- Change the logic for removed runtime setting `-upnp` to set `-natpmp` instead, and log a message.\r\n\r\n- Also remove any lingering `upnp` from `settings.json` and replace it with `natpmp`, when it makes sense (this is important so that the UI shows the right values in the settings):\r\n\r\n```json\r\n{\r\n    \"upnp\": true\r\n}\r\n```\r\nbecomes\r\n```json\r\n{\r\n    \"natpmp\": true\r\n}\r\n```\r\n\r\nand\r\n\r\n```json\r\n{\r\n    \"upnp\": false\r\n}\r\n```\r\nbecomes\r\n```json\r\n{\r\n    \"natpmp\": false\r\n}\r\n```\r\n\r\nIf this solution is acceptable i will add a functional test.\r\n",
    "labels": [
      {
        "id": 135946,
        "node_id": "MDU6TGFiZWwxMzU5NDY=",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
        "name": "GUI",
        "color": "02d7e1",
        "default": false
      },
      {
        "id": 2189737281,
        "node_id": "MDU6TGFiZWwyMTg5NzM3Mjgx",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Settings",
        "name": "Settings",
        "description": "",
        "color": "e410ef",
        "default": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/69",
      "html_url": "https://github.com/bitcoin/bitcoin/milestone/69",
      "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones/69/labels",
      "id": 11324346,
      "node_id": "MI_kwDOABII584ArMu6",
      "number": 69,
      "state": "open",
      "title": "29.0",
      "description": "",
      "creator": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "open_issues": 14,
      "closed_issues": 93,
      "created_at": "2024-07-17T08:47:56Z",
      "updated_at": "2025-02-25T15:09:25Z"
    },
    "created_at": "2025-02-20T16:08:30Z",
    "updated_at": "2025-02-26T09:02:22Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merged": false,
    "merge_commit_sha": "5955afb3b7e3a75b684b961a9534b3c910704bc2",
    "assignees": [],
    "requested_reviewers": [
      {
        "login": "jarolrod",
        "id": 23396902,
        "node_id": "MDQ6VXNlcjIzMzk2OTAy",
        "avatar_url": "https://avatars.githubusercontent.com/u/23396902?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jarolrod",
        "html_url": "https://github.com/jarolrod",
        "followers_url": "https://api.github.com/users/jarolrod/followers",
        "following_url": "https://api.github.com/users/jarolrod/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jarolrod/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jarolrod/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jarolrod/subscriptions",
        "organizations_url": "https://api.github.com/users/jarolrod/orgs",
        "repos_url": "https://api.github.com/users/jarolrod/repos",
        "events_url": "https://api.github.com/users/jarolrod/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jarolrod/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    ],
    "requested_teams": [],
    "rebaseable": true,
    "head": {
      "label": "laanwj:2025-02-upnp-setting-upgrade",
      "ref": "2025-02-upnp-setting-upgrade",
      "sha": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1750308,
        "node_id": "MDEwOlJlcG9zaXRvcnkxNzUwMzA4",
        "name": "bitcoin",
        "full_name": "laanwj/bitcoin",
        "owner": {
          "login": "laanwj",
          "id": 126646,
          "node_id": "MDQ6VXNlcjEyNjY0Ng==",
          "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/laanwj",
          "html_url": "https://github.com/laanwj",
          "followers_url": "https://api.github.com/users/laanwj/followers",
          "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
          "organizations_url": "https://api.github.com/users/laanwj/orgs",
          "repos_url": "https://api.github.com/users/laanwj/repos",
          "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/laanwj/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/laanwj/bitcoin",
        "description": "Laanwj's Bitcoin Core fork - see README.md on \"readme\" branch",
        "fork": true,
        "url": "https://api.github.com/repos/laanwj/bitcoin",
        "archive_url": "https://api.github.com/repos/laanwj/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/laanwj/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/laanwj/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/laanwj/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/laanwj/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/laanwj/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/laanwj/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/laanwj/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/laanwj/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/laanwj/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/laanwj/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/laanwj/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/laanwj/bitcoin/events",
        "forks_url": "https://api.github.com/repos/laanwj/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/laanwj/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/laanwj/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/laanwj/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/laanwj/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/laanwj/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/laanwj/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/laanwj/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/laanwj/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/laanwj/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/laanwj/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/laanwj/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/laanwj/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/laanwj/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/laanwj/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/laanwj/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:laanwj/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/laanwj/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/laanwj/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/laanwj/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/laanwj/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/laanwj/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/laanwj/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/laanwj/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/laanwj/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/laanwj/bitcoin/hooks",
        "svn_url": "https://github.com/laanwj/bitcoin",
        "homepage": "",
        "forks_count": 14,
        "stargazers_count": 44,
        "watchers_count": 44,
        "size": 247414,
        "default_branch": "readme",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": true,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-02-23T09:28:41Z",
        "created_at": "2011-05-15T07:09:54Z",
        "updated_at": "2024-10-04T16:35:48Z",
        "allow_forking": true
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "e486597f9a57903600656fb5106858941885852f",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36839,
        "stargazers_count": 82193,
        "watchers_count": 82193,
        "size": 276070,
        "default_branch": "master",
        "open_issues_count": 667,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-02-25T19:12:01Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-02-26T08:26:06Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
      }
    },
    "author_association": "MEMBER",
    "draft": false,
    "additions": 26,
    "deletions": 6,
    "changed_files": 1,
    "commits": 1,
    "review_comments": 24,
    "comments": 14
  },
  "events": [
    {
      "event": "commented",
      "id": 2671958844,
      "node_id": "IC_kwDOABII586fQts8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2671958844",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-20T16:08:38Z",
      "updated_at": "2025-02-25T23:27:18Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31916.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [davidgumberg](https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2672735504), [darosior](https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2683385857), [hodlinator](https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2641238999) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31649](https://github.com/bitcoin/bitcoin/pull/31649) (consensus: Remove checkpoints (take 2) by marcofleon)\n* [#31260](https://github.com/bitcoin/bitcoin/pull/31260) (scripted-diff: Type-safe settings retrieval by ryanofsky)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2671958844",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "reviewed",
      "id": 2630453915,
      "node_id": "PRR_kwDOABII586cyYqb",
      "url": null,
      "actor": null,
      "commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2630453915",
      "submitted_at": "2025-02-20T16:19:50Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    },
    {
      "event": "milestoned",
      "id": 16385491289,
      "node_id": "MIE_lADOABII586q3SqjzwAAAAPQpsFZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16385491289",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-20T16:25:16Z",
      "milestone": {
        "title": "29.0"
      }
    },
    {
      "event": "review_requested",
      "id": 16385502058,
      "node_id": "RRE_lADOABII586q3SqjzwAAAAPQputq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16385502058",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-20T16:26:04Z",
      "requested_reviewer": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "review_requested",
      "id": 16385502078,
      "node_id": "RRE_lADOABII586q3SqjzwAAAAPQput-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16385502078",
      "actor": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-20T16:26:04Z",
      "requested_reviewer": {
        "login": "jarolrod",
        "id": 23396902,
        "node_id": "MDQ6VXNlcjIzMzk2OTAy",
        "avatar_url": "https://avatars.githubusercontent.com/u/23396902?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/jarolrod",
        "html_url": "https://github.com/jarolrod",
        "followers_url": "https://api.github.com/users/jarolrod/followers",
        "following_url": "https://api.github.com/users/jarolrod/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/jarolrod/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/jarolrod/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/jarolrod/subscriptions",
        "organizations_url": "https://api.github.com/users/jarolrod/orgs",
        "repos_url": "https://api.github.com/users/jarolrod/repos",
        "events_url": "https://api.github.com/users/jarolrod/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/jarolrod/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "achow101",
        "id": 3782274,
        "node_id": "MDQ6VXNlcjM3ODIyNzQ=",
        "avatar_url": "https://avatars.githubusercontent.com/u/3782274?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/achow101",
        "html_url": "https://github.com/achow101",
        "followers_url": "https://api.github.com/users/achow101/followers",
        "following_url": "https://api.github.com/users/achow101/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/achow101/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/achow101/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/achow101/subscriptions",
        "organizations_url": "https://api.github.com/users/achow101/orgs",
        "repos_url": "https://api.github.com/users/achow101/repos",
        "events_url": "https://api.github.com/users/achow101/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/achow101/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2631208523,
      "node_id": "PRR_kwDOABII586c1Q5L",
      "url": null,
      "actor": null,
      "commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2631208523",
      "submitted_at": "2025-02-20T21:33:35Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    },
    {
      "event": "commented",
      "id": 2672735504,
      "node_id": "IC_kwDOABII586fTrUQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2672735504",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-20T21:33:56Z",
      "updated_at": "2025-02-20T21:33:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK\r\n\r\n I agree with the motivation that most users don't \"care about what method of automatic port forwarding method is used.\" (https://github.com/bitcoin-core/gui/issues/843#issuecomment-2671668235) \r\n \r\nI think it is a little bit unfortunate that there might be some users of the GUI who don't check the release notes or debug.log whose networks did support UPnP but don't support NAT-PMP or PCP will never be warned that their port forwarding setup is broken, but I think the negatives of exposing UPnP deprecation to GUI users outweighs the benefits.[^1]\r\n\r\n\r\nSanity tested by enabling UPnP in bitcoin-qt v28.1.0 on a fresh datadir created the following `settings.json`\r\n\r\n```\r\n{\r\n    \"_warning_\": \"This file is automatically generated and updated by Bitcoin Core. Please do not edit this file while the node is running, as any changes might be ignored or overwritten.\",\r\n    \"upnp\": true\r\n}\r\n```\r\n\r\nLaunching bitcoin-qt built with https://github.com/bitcoin/bitcoin/pull/31916/commits/bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4 modified `settings.json` as described:\r\n\r\n```\r\n{\r\n    \"_warning_\": \"This file is automatically generated and updated by Bitcoin Core. Please do not edit this file while the node is running, as any changes might be ignored or overwritten.\",\r\n    \"natpmp\": true\r\n}\r\n```\r\n\r\nand the setting is displayed correctly in the settings tab.\r\n\r\n<details><summary>Screenshot</summary>\r\n\r\n![Screenshot from 2025-02-20 12-24-39](https://github.com/user-attachments/assets/e3449966-f0a6-49ed-9392-aac6fe4e4583)\r\n\r\n</details>\r\n\r\n[^1]: Maybe a better and more general solution to that class of problem that is outside the scope of this PR and the issue it resolves is to provide some kind of indication to users about whether or not their node is reachable, maybe using a heuristic like node uptime > 1 hour, outbound slots filled, 0 inbound connections.\r\n",
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2672735504",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2673844440,
      "node_id": "IC_kwDOABII586fX6DY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2673844440",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T08:00:57Z",
      "updated_at": "2025-02-21T08:00:57Z",
      "author_association": "MEMBER",
      "body": "> I think it is a little bit unfortunate that there might be some users of the GUI who don't check the release notes or debug.log whose networks did support UPnP but don't support NAT-PMP or PCP will never be warned that their port forwarding setup is broken\r\n\r\n> Maybe a better and more general solution to that class of problem that is outside the scope of this PR and the issue it resolves is to provide some kind of indication to users about whether or not their node is reachable, maybe using a heuristic like node uptime > 1 hour, outbound slots filled, 0 inbound connections. [↩](https://github.com/bitcoin/bitcoin/pull/31916#user-content-fnref-1-0f7636f2adebc69f565c474affe9da17)\r\n\r\nExactly. The point @ryanofsky made in bitcoin-core/gui#843 is that there is, overall, no feedback wheher port forwarding is working. It could be broken in many other ways without warning (that's what i meant with \"oppertunistic\"). If we had an icon in the GUI that showed the current port forwarding status (or as you say, whether there are incoming connections), this would be solved too. But that's something for a future PR.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2673844440",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "mentioned",
      "id": 16395943990,
      "node_id": "MEE_lADOABII586q3SqjzwAAAAPRRkA2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16395943990",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T08:00:59Z"
    },
    {
      "event": "subscribed",
      "id": 16395944008,
      "node_id": "SE_lADOABII586q3SqjzwAAAAPRRkBI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16395944008",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T08:00:59Z"
    },
    {
      "event": "commented",
      "id": 2673868944,
      "node_id": "IC_kwDOABII586fYACQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2673868944",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T08:14:25Z",
      "updated_at": "2025-02-21T08:14:25Z",
      "author_association": "MEMBER",
      "body": "> If we had an icon in the GUI that showed the current port forwarding status (or as you say, whether there are incoming connections), this would be solved too. But that's something for a future PR.\r\n\r\nIIRC I designed the \"connections\" icon so that it shows 3 \"arms\" when there are `8` connections, thus likely no incoming ones. Though, this probably broke with block-relay-only connections and it now shows always 4 \"arms\". One could address that, to have that approximation again, but as you say it would be a separate PR (I'd be happy to review).",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2673868944",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2673922683,
      "node_id": "IC_kwDOABII586fYNJ7",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2673922683",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T08:41:28Z",
      "updated_at": "2025-02-21T08:41:28Z",
      "author_association": "MEMBER",
      "body": "I remember the arms feature being very useful for exactly that reason, but haven't tried recently.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2673922683",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "reviewed",
      "id": 2632406060,
      "node_id": "PRR_kwDOABII586c51Qs",
      "url": null,
      "actor": null,
      "commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2632406060",
      "submitted_at": "2025-02-21T09:01:30Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    },
    {
      "event": "reviewed",
      "id": 2632449591,
      "node_id": "PRR_kwDOABII586c5_43",
      "url": null,
      "actor": null,
      "commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2632449591",
      "submitted_at": "2025-02-21T09:22:58Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    },
    {
      "event": "commented",
      "id": 2674085237,
      "node_id": "IC_kwDOABII586fY011",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2674085237",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T09:52:17Z",
      "updated_at": "2025-02-21T09:55:33Z",
      "author_association": "MEMBER",
      "body": "The following works correctly for me on macOS when either setting `upnp=1` in `bitcoin.conf` or `\"upnp\": true,` in `settings.json`.\r\n\r\n```diff\r\ndiff --git a/src/init.cpp b/src/init.cpp\r\nindex ca708085d8..5ecbd6bc20 100644\r\n--- a/src/init.cpp\r\n+++ b/src/init.cpp\r\n@@ -807,10 +807,10 @@ void InitParameterInteraction(ArgsManager& args)\r\n     if (args.GetSettingsPath(&path, /* temp= */ false)) {\r\n         common::SettingsValue value = args.GetPersistentSetting(\"upnp\");\r\n         if (!value.isNull()) {\r\n-            LogWarning(\"Option '-upnp' has a value in settings.json, replacing it with `-natpmp`\");\r\n+            LogWarning(\"Option '-upnp' has a value in bitcoin.conf or settings.json, replacing it with '-natpmp' in settings.json\");\r\n             args.LockSettings([&](common::Settings& settings) {\r\n                 settings.rw_settings.erase(\"upnp\");\r\n-                if (value.isTrue()) {\r\n+                if ((value.isBool() && value.isTrue()) || (value.isStr() && value.get_str() == \"1\")) {\r\n                     // Only set the natpmp setting if upnp was set.\r\n                     settings.rw_settings[\"natpmp\"] = UniValue(true);\r\n                 }\r\n```\r\n\r\nWe can't edit a `bitcoin.conf` file, so I don't think there's more we can do?\r\n\r\nAlso when using `noupnp=1` in `bitcoin.conf` this emits a log, but leaves natpmp off.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2674085237",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2674102561,
      "node_id": "IC_kwDOABII586fY5Eh",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2674102561",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T09:59:38Z",
      "updated_at": "2025-02-21T09:59:38Z",
      "author_association": "MEMBER",
      "body": "i'll stop repeating it now, but that second `if()` for updating the JSON is not supposed to trigger *at all* if the value is in `bitcoin.conf` only and not in the json.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2674102561",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2674288258,
      "node_id": "IC_kwDOABII586fZmaC",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2674288258",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T11:21:23Z",
      "updated_at": "2025-02-21T11:21:23Z",
      "author_association": "MEMBER",
      "body": "In https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965186614\r\n\r\n> The real problem here is that GetPersistentSetting also looks into the (non-mutable) configuration file. i'll add a flag to skip that and this should work as intended.\r\n\r\nI think that's a useful flag, if only so we can distinguish the two cases.\r\n\r\nThough I'm confused about what you intend to happen for users who have `upnp=1` in `bitcoin.conf`.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2674288258",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2674340062,
      "node_id": "IC_kwDOABII586fZzDe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2674340062",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T11:47:01Z",
      "updated_at": "2025-02-21T11:47:25Z",
      "author_association": "MEMBER",
      "body": "> Though I'm confused about what you intend to happen for users who have upnp=1 in bitcoin.conf.\r\n\r\nThe intent is to interpret `-upnp=1` as `-natpmp=1` and log a warning message. Both on the command line and in bitcoin.conf. Pretty much like the other parameter interaction. This is what the first `if(args.IsArgSet(\"-upnp\")) {...}` does, or is supposed to do.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2674340062",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2674460892,
      "node_id": "IC_kwDOABII586faQjc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2674460892",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T12:44:24Z",
      "updated_at": "2025-02-21T12:44:24Z",
      "author_association": "MEMBER",
      "body": "That makes sense.\r\n\r\nI re-tested the `bitcoin.conf` behavior by disabling the `GetPersistentSetting` bit. It prints the right log message and enables PCP. However in the GUI options dialog the check box is unchecked. And there's nothing in \"options overriden by the command line\". So this might be confusing, although it works.\r\n\r\nIn contrast, when I set `natpmp=1` in `bitcoin.conf` the checkbox _is_ marked.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2674460892",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2674492314,
      "node_id": "IC_kwDOABII586faYOa",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2674492314",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-21T12:59:22Z",
      "updated_at": "2025-02-21T12:59:22Z",
      "author_association": "MEMBER",
      "body": "> I re-tested the bitcoin.conf behavior by disabling the GetPersistentSetting bit. It prints the right log message and enables PCP. However in the GUI options dialog the check box is unchecked. And there's nothing in \"options overriden by the command line\". So this might be confusing, although it works.\r\n\r\nYes that seems wrong, i'll see if i find a way to get the checkbox correct without spurious \"write-through of bitcoin.conf settings to settings.json\" behavior.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2674492314",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "reviewed",
      "id": 2633490619,
      "node_id": "PRR_kwDOABII586c9-C7",
      "url": null,
      "actor": null,
      "commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2633490619",
      "submitted_at": "2025-02-21T15:56:33Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    },
    {
      "event": "reviewed",
      "id": 2633550698,
      "node_id": "PRR_kwDOABII586c-Mtq",
      "url": null,
      "actor": null,
      "commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2633550698",
      "submitted_at": "2025-02-21T16:09:06Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16414498787,
      "node_id": "HRFPE_lADOABII586q3SqjzwAAAAPSYV_j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414498787",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "500689e3c4425ffd7014194bf504309f89f89baf",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/500689e3c4425ffd7014194bf504309f89f89baf",
      "created_at": "2025-02-22T17:29:48Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16414502917,
      "node_id": "HRFPE_lADOABII586q3SqjzwAAAAPSYXAF",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414502917",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "96af9d759738f1b88e35009943f1deabbc1955f7",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/96af9d759738f1b88e35009943f1deabbc1955f7",
      "created_at": "2025-02-22T17:30:39Z"
    },
    {
      "event": "commented",
      "id": 2676322495,
      "node_id": "IC_kwDOABII586fhXC_",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2676322495",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:40:59Z",
      "updated_at": "2025-02-25T12:07:17Z",
      "author_association": "MEMBER",
      "body": "- Updated for @davidgumberg @maflcko @ryanofsky's comments. \r\n\r\n- The checkbox mismatch mentioned by @Sjors is still open, but this seems a more general option handling issue, which applies to the other parameter interactions as well, and not addressable in the code changed here. It may be too risky to try to fix it here in this PR.\r\n\r\n- Added parameter value to the parameter interaction log message.",
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2676322495",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "mentioned",
      "id": 16414562212,
      "node_id": "MEE_lADOABII586q3SqjzwAAAAPSYlek",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414562212",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:41:00Z"
    },
    {
      "event": "subscribed",
      "id": 16414562214,
      "node_id": "SE_lADOABII586q3SqjzwAAAAPSYlem",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414562214",
      "actor": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:41:00Z"
    },
    {
      "event": "mentioned",
      "id": 16414562219,
      "node_id": "MEE_lADOABII586q3SqjzwAAAAPSYler",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414562219",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:41:00Z"
    },
    {
      "event": "subscribed",
      "id": 16414562224,
      "node_id": "SE_lADOABII586q3SqjzwAAAAPSYlew",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414562224",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:41:00Z"
    },
    {
      "event": "mentioned",
      "id": 16414562226,
      "node_id": "MEE_lADOABII586q3SqjzwAAAAPSYley",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414562226",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:41:00Z"
    },
    {
      "event": "subscribed",
      "id": 16414562229,
      "node_id": "SE_lADOABII586q3SqjzwAAAAPSYle1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414562229",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:41:00Z"
    },
    {
      "event": "mentioned",
      "id": 16414610808,
      "node_id": "MEE_lADOABII586q3SqjzwAAAAPSYxV4",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414610808",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:49:33Z"
    },
    {
      "event": "subscribed",
      "id": 16414610810,
      "node_id": "SE_lADOABII586q3SqjzwAAAAPSYxV6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16414610810",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-22T17:49:33Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16418483092,
      "node_id": "HRFPE_lADOABII586q3SqjzwAAAAPSniuU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16418483092",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "4d598357cbd7e2f833039fd78a6bfc63e1ca8919",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/4d598357cbd7e2f833039fd78a6bfc63e1ca8919",
      "created_at": "2025-02-23T09:24:36Z"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDY0ZGUwYTIyZGJkMmViNzJmZjk2ZDZkZGRiNTlhYmIyZTIyOTM4YjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "tree": {
        "sha": "80ba2960347979beffb1e1a354ed39842bd1a02d",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/80ba2960347979beffb1e1a354ed39842bd1a02d"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/e606c577cb257d0927ca6ea939aab06cf0639aad",
          "sha": "e606c577cb257d0927ca6ea939aab06cf0639aad",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/e606c577cb257d0927ca6ea939aab06cf0639aad"
        }
      ],
      "message": "init: Handle dropped UPnP support more gracefully\n\nCloses bitcoin-core/gui#843.\n\nIn that issue it was brought up that users likely don't care what kind\nof port forwarding is used, and the setting is oppertunistic anyway, so\ninstead of showing an extensive warning, we can simply \"upgrade\" from\nUPNP to NAT-PMP+PCP.\n\n- Change the logic for removed runtime setting `-upnp` to set `-natpmp`\n  instead, and only log a message.\n\n- Also replace any lingering `upnp` in `settings.json` with `natpmp`.\n\nIf this solution is acceptable i will add a functional test.",
      "committer": {
        "name": "laanwj",
        "email": "126646+laanwj@users.noreply.github.com",
        "date": "2025-02-23T09:28:21Z"
      },
      "author": {
        "name": "laanwj",
        "email": "126646+laanwj@users.noreply.github.com",
        "date": "2025-02-20T15:51:14Z"
      },
      "sha": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16418493457,
      "node_id": "HRFPE_lADOABII586q3SqjzwAAAAPSnlQR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16418493457",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "commit_url": "https://api.github.com/repos/laanwj/bitcoin/commits/64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "created_at": "2025-02-23T09:28:42Z"
    },
    {
      "event": "labeled",
      "id": 16429381827,
      "node_id": "LE_lADOABII586q3SqjzwAAAAPTRHjD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16429381827",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T11:36:38Z",
      "label": {
        "name": "GUI",
        "color": "02d7e1"
      }
    },
    {
      "event": "labeled",
      "id": 16429386610,
      "node_id": "LE_lADOABII586q3SqjzwAAAAPTRIty",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16429386610",
      "actor": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-24T11:37:01Z",
      "label": {
        "name": "Settings",
        "color": "e410ef"
      }
    },
    {
      "event": "commented",
      "id": 2683288260,
      "node_id": "IC_kwDOABII586f77rE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2683288260",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-25T21:03:26Z",
      "updated_at": "2025-02-25T21:03:26Z",
      "author_association": "MEMBER",
      "body": "Hopefully most GUI users at this point have the setting enabled without editing `bitcoin.conf`.\r\n\r\n>  It may be too risky to try to fix it here in this PR.\r\n\r\nProbably yes. Though the following would add it to the list of overridden options:\r\n\r\n```diff\r\ndiff --git a/src/qt/optionsmodel.cpp b/src/qt/optionsmodel.cpp\r\nindex 5782a57a26..54ea8f9ee4 100644\r\n--- a/src/qt/optionsmodel.cpp\r\n+++ b/src/qt/optionsmodel.cpp\r\n@@ -229,6 +229,13 @@ bool OptionsModel::Init(bilingual_str& error)\r\n         }\r\n     }\r\n \r\n+    // UPnP support has been dropped and -upnp=1 is treated as -natpmp=1.\r\n+    // However this leaves the GUI checkbox unset. Provide a hint to the user\r\n+    // that they should check their config file.\r\n+    if (gArgs.GetBoolArg(\"-upnp\")) {\r\n+        addOverriddenOption(\"-upnp\");\r\n+    }\r\n+\r\n     // If setting doesn't exist create it with defaults.\r\n```\r\n\r\nThat seems slightly better than having this functionality enabled without indication. ",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2683288260",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "commented",
      "id": 2683385857,
      "node_id": "IC_kwDOABII586f8TgB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2683385857",
      "actor": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-02-25T21:57:02Z",
      "updated_at": "2025-02-25T21:57:02Z",
      "author_association": "MEMBER",
      "body": "Concept ACK. WIll test soon.",
      "user": {
        "login": "darosior",
        "id": 22457751,
        "node_id": "MDQ6VXNlcjIyNDU3NzUx",
        "avatar_url": "https://avatars.githubusercontent.com/u/22457751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/darosior",
        "html_url": "https://github.com/darosior",
        "followers_url": "https://api.github.com/users/darosior/followers",
        "following_url": "https://api.github.com/users/darosior/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/darosior/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/darosior/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/darosior/subscriptions",
        "organizations_url": "https://api.github.com/users/darosior/orgs",
        "repos_url": "https://api.github.com/users/darosior/repos",
        "events_url": "https://api.github.com/users/darosior/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/darosior/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2683385857",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31916"
    },
    {
      "event": "reviewed",
      "id": 2641238999,
      "node_id": "PRR_kwDOABII586dbhvX",
      "url": null,
      "actor": null,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK 64de0a22dbd2eb72ff96d6dddb59abb2e22938b2\r\n\r\n#### Concept\r\n\r\nGood to help users migrate automatically, hopefully *decreasing the number of nodes that drop off the public network* due to UPnP-support being dropped in favor of more modern port forwarding protocols.\r\n\r\n#### PR description / commit message\r\n\r\nI think the prevention of nodes dropping off the public network-aspect could be called out.\r\n\r\n> If this solution is acceptable i will add a functional test.\r\n\r\nThis should be implemented or dropped. Not having a test isn't a blocker for me, but the message without one is, and remains the only blocker for me, *all other suggestions are (un)fortunately nits*.\r\n\r\n\"oppertunistic\" typo remains in commit message.\r\n\r\n\r\n#### Testing\r\n\r\nTested running 27.0 bitcoin-qt and enabled \"Map port using UPnP\", leading to `\"upnp\": true` being written to *settings.json*. Confirmed it was replaced with `\"natpmp\": true` when running PR. (Repeated the same check successfully for `false`).\r\n\r\n#### [Sjors' suggestion](https://github.com/bitcoin/bitcoin/pull/31916#issuecomment-2683288260) to use `addOverriddenOption(\"-upnp\")`\r\n\r\nSeems good, just want to to point out that the UI claims to be showing settings from the command line, when this one could be coming from *bitcoin.conf*.\r\n\r\n![Screenshot From 2025-02-25 23-26-08](https://github.com/user-attachments/assets/fe426fbc-b0fb-4638-8ee5-4ebacbfa45f1)\r\n\r\n(In a distant future we could use partially checked [tristate-checkboxes](https://doc.qt.io/Qt-6/qml-qtquick-controls-checkbox.html#checkState-prop) to hint at *bitcoin.conf*/commandline having enabled a setting \"by default\").\r\n\r\nEdit: Added *public*-qualifier.",
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#pullrequestreview-2641238999",
      "submitted_at": "2025-02-25T23:27:14Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1963919027",
      "pull_request_review_id": 2630453915,
      "id": 1963919027,
      "node_id": "PRRC_kwDOABII5851Dwaz",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": null,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Is this the right check to turn on natpmp? IIUC `IsArgSet` will return true even when the value is negated (`-noupnp`)?\r\n\r\nA fix could be to call `args.SoftSetBoolArg(\"-natpmp\", args.GetBoolArg(\"-upnp\", false))` below?",
      "created_at": "2025-02-20T16:19:50Z",
      "updated_at": "2025-02-20T16:21:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1963919027",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1963919027"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 799,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1963948947",
      "pull_request_review_id": 2630496171,
      "id": 1963948947,
      "node_id": "PRRC_kwDOABII5851D3uT",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1963919027,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Good catch, this is the wrong check. For the settings.json case i did consider the \"is set\" and \"is set to true\" case differently but consider them the same here.",
      "created_at": "2025-02-20T16:31:54Z",
      "updated_at": "2025-02-20T16:31:54Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1963948947",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1963948947"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 799,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1963961846",
      "pull_request_review_id": 2630518677,
      "id": 1963961846,
      "node_id": "PRRC_kwDOABII5851D632",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1963919027,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I haven't tried to compile, but the modern way of my suggestion would be:\r\n\r\n```cpp\r\n    if (const auto arg{args.GetBoolArg(\"-upnp\")}) {\r\n        bool overridden = args.SoftSetBoolArg(\"-natpmp\", *arg);\r\n```",
      "created_at": "2025-02-20T16:39:21Z",
      "updated_at": "2025-02-20T16:39:22Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1963961846",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1963961846"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 799,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1964369438",
      "pull_request_review_id": 2631208523,
      "id": 1964369438,
      "node_id": "PRRC_kwDOABII5851FeYe",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": null,
      "user": {
        "login": "davidgumberg",
        "id": 2257631,
        "node_id": "MDQ6VXNlcjIyNTc2MzE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/2257631?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/davidgumberg",
        "html_url": "https://github.com/davidgumberg",
        "followers_url": "https://api.github.com/users/davidgumberg/followers",
        "following_url": "https://api.github.com/users/davidgumberg/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/davidgumberg/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/davidgumberg/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/davidgumberg/subscriptions",
        "organizations_url": "https://api.github.com/users/davidgumberg/orgs",
        "repos_url": "https://api.github.com/users/davidgumberg/repos",
        "events_url": "https://api.github.com/users/davidgumberg/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/davidgumberg/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Slightly surprisingly to me, `GetPersistentSetting()` gets values from `bitcoin.conf`, so if you set `upnp=1` in bitcoin.conf, the branch below is executed, even if there's no upnp setting in `settings.json`. Maybe this is intended, but in that case `if (value.isTrue)` below fails, so natpmp does not get enabled, despite the warning that gets logged.",
      "created_at": "2025-02-20T21:33:35Z",
      "updated_at": "2025-02-20T21:33:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1964369438",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1964369438"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965038094",
      "pull_request_review_id": 2632296843,
      "id": 1965038094,
      "node_id": "PRRC_kwDOABII5851IBoO",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1964369438,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "No, that's not intended. i'll look into a way to query the json only.",
      "created_at": "2025-02-21T08:04:24Z",
      "updated_at": "2025-02-21T08:04:24Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965038094",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965038094"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965052114",
      "pull_request_review_id": 2632320086,
      "id": 1965052114,
      "node_id": "PRRC_kwDOABII5851IFDS",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 7,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1963919027,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thank you!\r\n\r\n`-upnp=0` setting the default for `-natpmp` to false sounds like reasonable behavior.\r\n",
      "created_at": "2025-02-21T08:17:06Z",
      "updated_at": "2025-02-21T08:17:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965052114",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965052114"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 799,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965102891",
      "pull_request_review_id": 2632406060,
      "id": 1965102891,
      "node_id": "PRRC_kwDOABII5851IRcr",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "We might want to wait longer, because people can upgrade many years later (e.g. because they suddenly remember they have a wallet). Maybe just drop the TODO.",
      "created_at": "2025-02-21T08:51:26Z",
      "updated_at": "2025-02-21T09:01:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965102891",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965102891"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 813,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965115244",
      "pull_request_review_id": 2632406060,
      "id": 1965115244,
      "node_id": "PRRC_kwDOABII5851IUds",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1964369438,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Why would `value.isTrue` fail? I suspect what will happen (still have to test) is that you'll keep `upnp=1` in the config and _also_ have `natpmp: 1` in settings. If the former is ignored and the latter used, that should be fine.",
      "created_at": "2025-02-21T09:00:46Z",
      "updated_at": "2025-02-21T09:01:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965115244",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965115244"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965129113",
      "pull_request_review_id": 2632449591,
      "id": 1965129113,
      "node_id": "PRRC_kwDOABII5851IX2Z",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");\n+        if (!value.isNull()) {\n+            LogWarning(\"Option '-upnp' has a value in settings.json, replacing it with `-natpmp`\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`in bitcoin.conf or settings.json, replacing it with -natpmp in settings.json` \r\n\r\nWhen it's in `bitcoin.conf` the warning will get repeated every startup, which seems fine.",
      "created_at": "2025-02-21T09:10:27Z",
      "updated_at": "2025-02-21T09:22:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965129113",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965129113"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 810,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965146687",
      "pull_request_review_id": 2632449591,
      "id": 1965146687,
      "node_id": "PRRC_kwDOABII5851IcI_",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1964369438,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "`value.isTrue` is indeed `false` when I set `upnp=1` in `bitcoin.conf`, very strange.\r\n\r\nAnother strange thing is that this code appears to be run twice, so I'm seeing the log entries twice.",
      "created_at": "2025-02-21T09:22:52Z",
      "updated_at": "2025-02-21T09:22:58Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965146687",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965146687"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965166840",
      "pull_request_review_id": 2632510964,
      "id": 1965166840,
      "node_id": "PRRC_kwDOABII5851IhD4",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1964369438,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Aha, `!value.IsBool()` for `upnp=1`",
      "created_at": "2025-02-21T09:36:36Z",
      "updated_at": "2025-02-21T09:36:36Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965166840",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965166840"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965173605",
      "pull_request_review_id": 2632522540,
      "id": 1965173605,
      "node_id": "PRRC_kwDOABII5851Iitl",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");\n+        if (!value.isNull()) {\n+            LogWarning(\"Option '-upnp' has a value in settings.json, replacing it with `-natpmp`\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 18,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1965129113,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "~~Yup. That's intentional. The first warning can happen as many times as needed, the json manipulation should ideally only happen once.~~\r\nOh, i misread. No this one shouldn't be happening every time.",
      "created_at": "2025-02-21T09:40:58Z",
      "updated_at": "2025-02-21T09:41:30Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965173605",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965173605"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 810,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965177521",
      "pull_request_review_id": 2632529020,
      "id": 1965177521,
      "node_id": "PRRC_kwDOABII5851Ijqx",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1965102891,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Probably not a good place to have this discussion.\r\n\r\nBut i also don't think TODOs in comments make much sense in general, planning should happen on github and not in the code repository, so will remove it.",
      "created_at": "2025-02-21T09:43:38Z",
      "updated_at": "2025-02-21T09:43:39Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965177521",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965177521"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 813,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965186614",
      "pull_request_review_id": 2632543233,
      "id": 1965186614,
      "node_id": "PRRC_kwDOABII5851Il42",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1964369438,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "The real problem here is that GetPersistentSetting also looks into the (non-mutable) configuration file. i'll add a flag to skip that and this should work as intended.",
      "created_at": "2025-02-21T09:49:26Z",
      "updated_at": "2025-02-21T09:49:35Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965186614",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965186614"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965231203",
      "pull_request_review_id": 2632614286,
      "id": 1965231203,
      "node_id": "PRRC_kwDOABII5851Iwxj",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 16,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1964369438,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Alternatively it could directly check the value and if necessary manipulate `settings.rw_settings`, inside the `LockSettings` lock. This also keeps it atomic (not that we care here). But it also gives the clearest code (super clear that this should *only* affect the dynamic settings) and doesn't need API changes.",
      "created_at": "2025-02-21T10:18:53Z",
      "updated_at": "2025-02-21T10:19:50Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965231203",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965231203"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 808,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965359990",
      "pull_request_review_id": 2632838017,
      "id": 1965359990,
      "node_id": "PRRC_kwDOABII5851JQN2",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1965102891,
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "If the goal is to enable natpmp by default, then the `TODO: remove for version 30.0.` can be replaced by `This can be removed when the default value for natpmp is true.` ?",
      "created_at": "2025-02-21T11:55:14Z",
      "updated_at": "2025-02-21T11:55:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965359990",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965359990"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 813,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965736047",
      "pull_request_review_id": 2633490619,
      "id": 1965736047,
      "node_id": "PRRC_kwDOABII5851KsBv",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");\n+        if (!value.isNull()) {\n+            LogWarning(\"Option '-upnp' has a value in settings.json, replacing it with `-natpmp`\");\n+            args.LockSettings([&](common::Settings& settings) {\n+                settings.rw_settings.erase(\"upnp\");\n+                if (value.isTrue()) {\n+                    // Only set the natpmp setting if upnp was set.\n+                    settings.rw_settings[\"natpmp\"] = UniValue(true);\n+                }\n+            });\n+            args.WriteSettingsFile();\n+        }\n+    }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"init: Handle dropped UPnP support more gracefully\" (bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4)\r\n\r\nI think I might not understanding what this code is trying to do exactly, but it seems overcomplicated and maybe a little off. Like the check for GetSettingPath seems unnecessary, the LogWarning seems vague, the GetPersistentSetting calls not really checking for the right thing as mentioned in an earlier comment. Also the check for isTrue seems overly narrow and the UniValue(true) cast should be unnecessary. I would suggest following implementation:\r\n\r\n```c++\r\n    // If settings.json contains a \"upnp\" option, migrate it to use \"natpmp\" instead\r\n    bool settings_changed{false}; // Whether settings.json file needs to be rewritten\r\n    args.LockSettings([&](common::Settings& settings) {\r\n        if (auto* upnp{FindKey(settings.rw_settings, \"upnp\")}) {\r\n            if (!FindKey(settings.rw_settings, \"natpmp\")) {\r\n                LogWarning(R\"(Adding \"natpmp\": %s to settings.json to replace obsolete \"upnp\" setting)\", upnp->write());\r\n                settings.rw_settings[\"natpmp\"] = *upnp;\r\n            }\r\n            LogWarning(R\"(Removing obsolete \"upnp\" setting from settings.json)\");\r\n            settings.rw_settings.erase(\"upnp\");\r\n            settings_changed = true;\r\n        }\r\n    });\r\n    if (settings_changed) args.WriteSettingsFile();\r\n```\r\n\r\nwith `using common::FindKey` at top of the file. This seems like the most simple and direct implementation and I think comments and log messages should be a little better too.",
      "created_at": "2025-02-21T15:56:32Z",
      "updated_at": "2025-02-21T15:58:04Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965736047",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965736047"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": 805,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 821,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965781753",
      "pull_request_review_id": 2633550698,
      "id": 1965781753,
      "node_id": "PRRC_kwDOABII5851K3L5",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 11,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": null,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "In commit \"init: Handle dropped UPnP support more gracefully\" (bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4)\r\n\r\nI think it would be better to move the settings.json update code before this code doing \"if upnp then softset natpmp\". That way soft-setting natpmp only happens if -upnp is enabled in `bitcoin.conf` or on the command line, not if it is enabled in settings.json. So the separate cases will be handled independently and not interacting in a more complicated way.",
      "created_at": "2025-02-21T16:09:06Z",
      "updated_at": "2025-02-21T16:09:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965781753",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965781753"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": 799,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 821,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965808053",
      "pull_request_review_id": 2633589556,
      "id": 1965808053,
      "node_id": "PRRC_kwDOABII5851K9m1",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");\n+        if (!value.isNull()) {\n+            LogWarning(\"Option '-upnp' has a value in settings.json, replacing it with `-natpmp`\");\n+            args.LockSettings([&](common::Settings& settings) {\n+                settings.rw_settings.erase(\"upnp\");\n+                if (value.isTrue()) {\n+                    // Only set the natpmp setting if upnp was set.\n+                    settings.rw_settings[\"natpmp\"] = UniValue(true);\n+                }\n+            });\n+            args.WriteSettingsFile();\n+        }\n+    }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1965736047,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> Like the check for GetSettingPath seems unnecessar\r\n\r\n`WriteSettingsFile` will raise an exception if that check fails, it seems to make a big point of \"dynamic settings being enabled\".",
      "created_at": "2025-02-21T16:21:44Z",
      "updated_at": "2025-02-21T16:21:44Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965808053",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965808053"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": 805,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 821,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965819109",
      "pull_request_review_id": 2633607218,
      "id": 1965819109,
      "node_id": "PRRC_kwDOABII5851LATl",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.\n+    if (args.IsArgSet(\"-upnp\")) {\n+        bool overridden = args.SoftSetBoolArg(\"-natpmp\", true);\n+        LogWarning(\"Option '-upnp' is set but UPnP support was dropped in version 29.0.%s\",\n+                overridden ? \" Setting '-natpmp' instead.\" : \"\");\n+    }\n+\n+    // If dynamic settings are enabled, also replace it in settings.json.\n+    fs::path path;\n+    if (args.GetSettingsPath(&path, /* temp= */ false)) {\n+        common::SettingsValue value = args.GetPersistentSetting(\"upnp\");\n+        if (!value.isNull()) {\n+            LogWarning(\"Option '-upnp' has a value in settings.json, replacing it with `-natpmp`\");\n+            args.LockSettings([&](common::Settings& settings) {\n+                settings.rw_settings.erase(\"upnp\");\n+                if (value.isTrue()) {\n+                    // Only set the natpmp setting if upnp was set.\n+                    settings.rw_settings[\"natpmp\"] = UniValue(true);\n+                }\n+            });\n+            args.WriteSettingsFile();\n+        }\n+    }",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 28,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1965736047,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> `WriteSettingsFile` will raise an exception if that check fails, it seems to make a big point of \"dynamic settings being enabled\".\r\n\r\nI think that is ok at least with code above because settings_changed will be false in that case.\r\n",
      "created_at": "2025-02-21T16:28:16Z",
      "updated_at": "2025-02-21T16:28:16Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1965819109",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1965819109"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": 805,
      "start_side": "RIGHT",
      "line": null,
      "original_line": 821,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1966566569",
      "pull_request_review_id": 2635091014,
      "id": 1966566569,
      "node_id": "PRRC_kwDOABII5851N2yp",
      "diff_hunk": "@@ -793,6 +793,31 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp. TODO: remove for version 30.0.",
      "path": "src/init.cpp",
      "position": null,
      "original_position": 6,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "bd4679a608b2cbc206fa60a180b0fc4ce8a39ec4",
      "in_reply_to_id": 1965102891,
      "user": {
        "login": "laanwj",
        "id": 126646,
        "node_id": "MDQ6VXNlcjEyNjY0Ng==",
        "avatar_url": "https://avatars.githubusercontent.com/u/126646?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/laanwj",
        "html_url": "https://github.com/laanwj",
        "followers_url": "https://api.github.com/users/laanwj/followers",
        "following_url": "https://api.github.com/users/laanwj/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/laanwj/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/laanwj/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/laanwj/subscriptions",
        "organizations_url": "https://api.github.com/users/laanwj/orgs",
        "repos_url": "https://api.github.com/users/laanwj/repos",
        "events_url": "https://api.github.com/users/laanwj/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/laanwj/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Yes, that would be another resolution that makes sense, not 100% sure what -upnp=0 should do in that case, Should that still set the default for -natpmp to 0? \r\nThis is something to discuss seperately, i've just removed the TODO.",
      "created_at": "2025-02-22T17:40:47Z",
      "updated_at": "2025-02-22T17:40:48Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1966566569",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1966566569"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 813,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1969880047",
      "pull_request_review_id": 2641238999,
      "id": 1969880047,
      "node_id": "PRRC_kwDOABII5851afvv",
      "diff_hunk": "@@ -793,6 +793,32 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // If settings.json contains a \"upnp\" option, migrate it to use \"natpmp\" instead\n+    bool settings_changed{false}; // Whether settings.json file needs to be rewritten\n+    args.LockSettings([&](common::Settings& settings) {\n+        if (auto* upnp{common::FindKey(settings.rw_settings, \"upnp\")}) {\n+            if (!common::FindKey(settings.rw_settings, \"natpmp\")) {",
      "path": "src/init.cpp",
      "position": 9,
      "original_position": 9,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Could disambiguate between `false`/`nullptr` both for review and the compilers type check:\r\n```suggestion\r\n            if (common::FindKey(settings.rw_settings, \"natpmp\") == nullptr) {\r\n```\r\n<details><summary>(...)</summary>\r\n\r\nI know this is not performance critical, but could avoid duplicate lookups:\r\n```C++\r\nauto [_, inserted] = settings.rw_settings.try_emplace(\"natpmp\", *upnp);\r\nif (inserted) {\r\n    LogWarning(R\"(Added \"natpmp\": %s to settings.json to replace obsolete \"upnp\" setting)\", upnp->write());\r\n}\r\n```\r\n</details>",
      "created_at": "2025-02-25T14:20:17Z",
      "updated_at": "2025-02-25T23:27:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1969880047",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1969880047"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 801,
      "original_line": 801,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1969969186",
      "pull_request_review_id": 2641238999,
      "id": 1969969186,
      "node_id": "PRRC_kwDOABII5851a1gi",
      "diff_hunk": "@@ -793,6 +793,32 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // If settings.json contains a \"upnp\" option, migrate it to use \"natpmp\" instead\n+    bool settings_changed{false}; // Whether settings.json file needs to be rewritten\n+    args.LockSettings([&](common::Settings& settings) {\n+        if (auto* upnp{common::FindKey(settings.rw_settings, \"upnp\")}) {\n+            if (!common::FindKey(settings.rw_settings, \"natpmp\")) {\n+                LogWarning(R\"(Adding \"natpmp\": %s to settings.json to replace obsolete \"upnp\" setting)\", upnp->write());\n+                settings.rw_settings[\"natpmp\"] = *upnp;\n+            }\n+            LogWarning(R\"(Removing obsolete \"upnp\" setting from settings.json)\");\n+            settings.rw_settings.erase(\"upnp\");\n+            settings_changed = true;\n+        }\n+    });\n+    if (settings_changed) args.WriteSettingsFile();\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the\n+    // option in their config, and upgrade the setting to -natpmp.\n+    if (const auto arg{args.GetBoolArg(\"-upnp\")}) {\n+        std::string message;\n+        if (args.SoftSetBoolArg(\"-natpmp\", *arg)) {",
      "path": "src/init.cpp",
      "position": 24,
      "original_position": 24,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Noticed there is some parameter interaction soft setting `-natpmp` to `false` when using a `-proxy` or !`-listen`. But the soft set here will not be allowed to re-enable it. :+1: ",
      "created_at": "2025-02-25T15:04:37Z",
      "updated_at": "2025-02-25T23:27:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1969969186",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1969969186"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 816,
      "original_line": 816,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1970653732",
      "pull_request_review_id": 2641238999,
      "id": 1970653732,
      "node_id": "PRRC_kwDOABII5851dcok",
      "diff_hunk": "@@ -793,6 +793,32 @@ void InitParameterInteraction(ArgsManager& args)\n             LogInfo(\"parameter interaction: -onlynet excludes IPv4 and IPv6 -> setting -dnsseed=0\\n\");\n         }\n     }\n+\n+    // If settings.json contains a \"upnp\" option, migrate it to use \"natpmp\" instead\n+    bool settings_changed{false}; // Whether settings.json file needs to be rewritten\n+    args.LockSettings([&](common::Settings& settings) {\n+        if (auto* upnp{common::FindKey(settings.rw_settings, \"upnp\")}) {\n+            if (!common::FindKey(settings.rw_settings, \"natpmp\")) {\n+                LogWarning(R\"(Adding \"natpmp\": %s to settings.json to replace obsolete \"upnp\" setting)\", upnp->write());\n+                settings.rw_settings[\"natpmp\"] = *upnp;\n+            }\n+            LogWarning(R\"(Removing obsolete \"upnp\" setting from settings.json)\");\n+            settings.rw_settings.erase(\"upnp\");\n+            settings_changed = true;\n+        }\n+    });\n+    if (settings_changed) args.WriteSettingsFile();\n+\n+    // We drop UPnP support but kept the arg as hidden for now to display a friendlier error to user who have the",
      "path": "src/init.cpp",
      "position": 20,
      "original_position": 20,
      "commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "original_commit_id": "64de0a22dbd2eb72ff96d6dddb59abb2e22938b2",
      "in_reply_to_id": null,
      "user": {
        "login": "hodlinator",
        "id": 172445034,
        "node_id": "U_kgDOCkdNag",
        "avatar_url": "https://avatars.githubusercontent.com/u/172445034?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hodlinator",
        "html_url": "https://github.com/hodlinator",
        "followers_url": "https://api.github.com/users/hodlinator/followers",
        "following_url": "https://api.github.com/users/hodlinator/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hodlinator/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hodlinator/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hodlinator/subscriptions",
        "organizations_url": "https://api.github.com/users/hodlinator/orgs",
        "repos_url": "https://api.github.com/users/hodlinator/repos",
        "events_url": "https://api.github.com/users/hodlinator/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hodlinator/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Not sure if this comment is needed, the log message inside of the code block is enough IMO. Suggestions if kept:\r\n```suggestion\r\n    // We dropped UPnP support but kept the arg as hidden for now to display a friendlier error to user who has the\r\n```",
      "created_at": "2025-02-25T22:52:32Z",
      "updated_at": "2025-02-25T23:27:14Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31916#discussion_r1970653732",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1970653732"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31916"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 812,
      "original_line": 812,
      "side": "RIGHT"
    }
  ]
}