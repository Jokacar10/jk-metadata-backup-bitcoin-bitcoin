{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481",
    "id": 1977025044,
    "node_id": "PR_kwDOABII58511wIU",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/30481",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/30481.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/30481.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30481",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30481/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/006d835acf98ebceaaaead7aea41f512ed5023ad",
    "number": 30481,
    "state": "closed",
    "locked": true,
    "maintainer_can_modify": false,
    "title": "test: add creating/spending validity checks for rare output scripts",
    "user": {
      "login": "theStack",
      "id": 91535,
      "node_id": "MDQ6VXNlcjkxNTM1",
      "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/theStack",
      "html_url": "https://github.com/theStack",
      "followers_url": "https://api.github.com/users/theStack/followers",
      "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
      "organizations_url": "https://api.github.com/users/theStack/orgs",
      "repos_url": "https://api.github.com/users/theStack/repos",
      "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/theStack/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This PR adds a functional test with a collection of output scripts that are \"rare\"/obscure, in the sense that they wouldn't be used or make sense within a regular payment transaction, but creating them is still considered standard, which is often considered surprising and counter-intuitive. They either\r\n* use a weird pubkey encoding (-> hybrid pubkeys [in types P2PK, P2MS]),\r\n* are provably unspendable (-> not-on-curve pubkeys [in types P2PK, P2MS, P2TR]), or\r\n* are spendable by anyone with current consensus rules (-> future segwit versions)\r\n\r\nFor all of those, the creation is considered standard, whereas spending for some is only consensus-valid; for not-on-curve pubkeys, spending is obviously impossible for mathematical reasons. The behaviour for future segwit versions is already tested in `feature_segwit.py`, so there is a certain overlap, but I think it stlll makes thematically sense to collect them here as well (if this PR gets Concept ACKed in general). OP_RETURN outputs don't fall into this \"rare\" category as they are more or less widespread and it's well-known that they can be used to embed arbitrary data (we already test them in `mempool_datacarrier.py`). Happy to include other examples as well if I missed any.",
    "labels": [
      {
        "id": 62963516,
        "node_id": "MDU6TGFiZWw2Mjk2MzUxNg==",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/Tests",
        "name": "Tests",
        "color": "d4c5f9",
        "default": false
      }
    ],
    "created_at": "2024-07-19T00:57:27Z",
    "updated_at": "2025-07-25T14:15:31Z",
    "closed_at": "2024-07-25T13:47:09Z",
    "mergeable_state": "unknown",
    "merged": false,
    "merge_commit_sha": "84a27135feec3533717df3b597161ffb751f6cff",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "head": {
      "label": "theStack:202407-test-rare_output_scripts",
      "ref": "202407-test-rare_output_scripts",
      "sha": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 204970720,
        "node_id": "MDEwOlJlcG9zaXRvcnkyMDQ5NzA3MjA=",
        "name": "bitcoin",
        "full_name": "theStack/bitcoin",
        "owner": {
          "login": "theStack",
          "id": 91535,
          "node_id": "MDQ6VXNlcjkxNTM1",
          "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/theStack",
          "html_url": "https://github.com/theStack",
          "followers_url": "https://api.github.com/users/theStack/followers",
          "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
          "organizations_url": "https://api.github.com/users/theStack/orgs",
          "repos_url": "https://api.github.com/users/theStack/repos",
          "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/theStack/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/theStack/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/theStack/bitcoin",
        "archive_url": "https://api.github.com/repos/theStack/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/theStack/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/theStack/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/theStack/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/theStack/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/theStack/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/theStack/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/theStack/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/theStack/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/theStack/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/theStack/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/theStack/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/theStack/bitcoin/events",
        "forks_url": "https://api.github.com/repos/theStack/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/theStack/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/theStack/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/theStack/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/theStack/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/theStack/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/theStack/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/theStack/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/theStack/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/theStack/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/theStack/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/theStack/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/theStack/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/theStack/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/theStack/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/theStack/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:theStack/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/theStack/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/theStack/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/theStack/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/theStack/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/theStack/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/theStack/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/theStack/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/theStack/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/theStack/bitcoin/hooks",
        "svn_url": "https://github.com/theStack/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 2,
        "stargazers_count": 1,
        "watchers_count": 1,
        "size": 355150,
        "default_branch": "master",
        "open_issues_count": 0,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-18T14:42:40Z",
        "created_at": "2019-08-28T15:59:29Z",
        "updated_at": "2025-05-09T15:41:01Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ec74f457416a11938361ef4829e701cc15cfe2b2",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 37571,
        "stargazers_count": 84742,
        "watchers_count": 84742,
        "size": 289490,
        "default_branch": "master",
        "open_issues_count": 758,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-07-25T14:35:54Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-07-25T14:36:03Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 160,
    "deletions": 0,
    "changed_files": 2,
    "commits": 1,
    "review_comments": 3,
    "comments": 2
  },
  "events": [
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDAwNmQ4MzVhY2Y5OGViY2VhYWFlYWQ3YWVhNDFmNTEyZWQ1MDIzYWQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/006d835acf98ebceaaaead7aea41f512ed5023ad",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/006d835acf98ebceaaaead7aea41f512ed5023ad",
      "tree": {
        "sha": "706d3b8facd04e8009c12232a5b220acc02cdac4",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/706d3b8facd04e8009c12232a5b220acc02cdac4"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ec74f457416a11938361ef4829e701cc15cfe2b2",
          "sha": "ec74f457416a11938361ef4829e701cc15cfe2b2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ec74f457416a11938361ef4829e701cc15cfe2b2"
        }
      ],
      "message": "test: add creating/spending validity checks for rare output scripts",
      "committer": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2024-07-19T00:11:48Z"
      },
      "author": {
        "name": "Sebastian Falbesoner",
        "email": "sebastian.falbesoner@gmail.com",
        "date": "2024-07-19T00:09:06Z"
      },
      "sha": "006d835acf98ebceaaaead7aea41f512ed5023ad"
    },
    {
      "event": "commented",
      "id": 2237826987,
      "node_id": "IC_kwDOABII586FYoer",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2237826987",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-19T00:57:30Z",
      "updated_at": "2024-07-19T17:55:08Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage\nFor detailed information about the code coverage, see the [test coverage report](https://corecheck.dev/bitcoin/bitcoin/pulls/30481).\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| ACK | [tdb3](https://github.com/bitcoin/bitcoin/pull/30481#pullrequestreview-2188793231) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#issuecomment-2237826987",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30481"
    },
    {
      "event": "labeled",
      "id": 13564706422,
      "node_id": "LE_lADOABII586QGeW4zwAAAAMohP52",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13564706422",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-19T00:57:33Z",
      "label": {
        "name": "Tests",
        "color": "d4c5f9"
      }
    },
    {
      "event": "reviewed",
      "id": 2188793231,
      "node_id": "PRR_kwDOABII586CdlWP",
      "url": null,
      "actor": null,
      "commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "ACK 006d835acf98ebceaaaead7aea41f512ed5023ad\r\nSeems like a good addition.  Observed a runtime of around 1s, so minimal.\r\nLeft some thoughts.  Will also think about other potential candidate rare output scripts and comment if any come to mind.",
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#pullrequestreview-2188793231",
      "submitted_at": "2024-07-19T17:55:06Z",
      "state": "APPROVED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481"
    },
    {
      "event": "review_requested",
      "id": 13644270062,
      "node_id": "RRE_lADOABII586QGeW4zwAAAAMtQwnu",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13644270062",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-25T11:27:22Z",
      "requested_reviewer": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "review_requester": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      }
    },
    {
      "event": "reviewed",
      "id": 2199143485,
      "node_id": "PRR_kwDOABII586DFEQ9",
      "url": null,
      "actor": null,
      "commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "~0 on this file tbh\r\n\r\nit's kind of a hodgepodge of things being tested that might already have functional test coverage, like future witness spends which is an intended upgrade hook and should be well-tested?\r\n\r\nIf they already don't have functional coverage maybe there are better spots for each?",
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#pullrequestreview-2199143485",
      "submitted_at": "2024-07-25T12:24:55Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481"
    },
    {
      "event": "commented",
      "id": 2250366787,
      "node_id": "IC_kwDOABII586GId9D",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2250366787",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-25T13:47:09Z",
      "updated_at": "2024-07-25T13:47:09Z",
      "author_association": "CONTRIBUTOR",
      "body": "> ~0 on this file tbh\r\n> \r\n> it's kind of a hodgepodge of things being tested that might already have functional test coverage, like future witness spends which is an intended upgrade hook and should be well-tested?\r\n> \r\n> If they already don't have functional coverage maybe there are better spots for each?\r\n\r\nFair enough. I originally created this file a while ago being annoyed to repeatedly forget which kind of \"rare\"/weird output scripts are standard/non-standard for creating/spending, and thought it makes sense to have that nicely summarized as single file in our test suite, even with certain test overlaps like the future witness spends. But yeah, this is indeed more like a \"museum collection\" of loosely connected stuff rather than something systematic. Closing this PR for now.",
      "user": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#issuecomment-2250366787",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/30481"
    },
    {
      "event": "closed",
      "id": 13646084444,
      "node_id": "CE_lADOABII586QGeW4zwAAAAMtXrlc",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/13646084444",
      "actor": {
        "login": "theStack",
        "id": 91535,
        "node_id": "MDQ6VXNlcjkxNTM1",
        "avatar_url": "https://avatars.githubusercontent.com/u/91535?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theStack",
        "html_url": "https://github.com/theStack",
        "followers_url": "https://api.github.com/users/theStack/followers",
        "following_url": "https://api.github.com/users/theStack/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theStack/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theStack/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theStack/subscriptions",
        "organizations_url": "https://api.github.com/users/theStack/orgs",
        "repos_url": "https://api.github.com/users/theStack/repos",
        "events_url": "https://api.github.com/users/theStack/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theStack/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-07-25T13:47:09Z"
    },
    {
      "event": "locked",
      "id": 18815723146,
      "node_id": "LOE_lADOABII586QGeW4zwAAAARhgSaK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/18815723146",
      "actor": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-07-25T14:15:31Z"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1684707058",
      "pull_request_review_id": 2188793231,
      "id": 1684707058,
      "node_id": "PRRC_kwDOABII585kapby",
      "diff_hunk": "@@ -0,0 +1,159 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2024 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Check how rare output script types are treated regarding\n+   standardness and consensus-validity.\n+\"\"\"\n+import random\n+\n+from test_framework.blocktools import (\n+    NORMAL_GBT_REQUEST_PARAMS,\n+    create_block,\n+)\n+from test_framework.key import ECPubKey\n+from test_framework.messages import (\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxInWitness,\n+    CTxOut,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.script import sign_input_legacy\n+from test_framework.script_util import (\n+    key_to_p2pk_script,\n+    keys_to_multisig_script,\n+    output_key_to_p2tr_script,\n+    program_to_witness_script,\n+)\n+from test_framework.crypto.secp256k1 import GE\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+from test_framework.wallet_util import generate_keypair\n+\n+\n+class RareOutputScripts(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def generate_uncompressed_keypair(self, *, is_even):\n+        while True:\n+            privkey, pubkey_bytes = generate_keypair(compressed=False)\n+            pubkey = ECPubKey()\n+            pubkey.set(pubkey_bytes)\n+            if pubkey.p.y.is_even() == is_even:\n+                return privkey, pubkey\n+\n+    def create_p2pk_spend(self, outpoint, scriptpubkey, privkey):\n+        tx = CTransaction()\n+        tx.vin = [CTxIn(COutPoint(int(outpoint[0], 16), outpoint[1]))]\n+        tx.vout = [CTxOut(40000, self.wallet.get_scriptPubKey())]\n+        sign_input_legacy(tx, 0, scriptpubkey, privkey)\n+        return tx\n+\n+    def create_empty_witness_tx(self, outpoint):\n+        tx = CTransaction()\n+        tx.vin = [CTxIn(COutPoint(int(outpoint[0], 16), outpoint[1]))]\n+        tx.vout = [CTxOut(40000, self.wallet.get_scriptPubKey())]\n+        tx.wit.vtxinwit.append(CTxInWitness())\n+        return tx\n+\n+    def test_hybrid_pubkeys(self):\n+        self.log.info(\"Check that creating hybrid pubkey P2PK outputs is standard\")\n+        privkey_even, pubkey_even = self.generate_uncompressed_keypair(is_even=True)\n+        assert pubkey_even.p.y.is_even()\n+        pubkey_even_script = key_to_p2pk_script(b'\\x06' + pubkey_even.get_bytes()[1:])\n+\n+        privkey_odd, pubkey_odd = self.generate_uncompressed_keypair(is_even=False)\n+        assert not pubkey_odd.p.y.is_even()\n+        pubkey_odd_script = key_to_p2pk_script(b'\\x07' + pubkey_odd.get_bytes()[1:])\n+\n+        tx_even = self.wallet.send_to(from_node=self.node, scriptPubKey=pubkey_even_script, amount=50000)\n+        tx_odd = self.wallet.send_to(from_node=self.node, scriptPubKey=pubkey_odd_script, amount=50000)\n+        for tx in (tx_even, tx_odd):\n+            decode_res = self.node.decoderawtransaction(tx['hex'])\n+            assert_equal(decode_res['vout'][tx['sent_vout']]['scriptPubKey']['type'], \"pubkey\")\n+\n+        self.log.info(\"Check that spending hybrid pubkey P2PK outputs is non-standard\")\n+        spend_even_tx = self.create_p2pk_spend((tx_even['txid'], tx_even['sent_vout']), pubkey_even_script, privkey_even)\n+        spend_odd_tx = self.create_p2pk_spend((tx_odd['txid'], tx_odd['sent_vout']), pubkey_odd_script, privkey_odd)\n+        for tx in (spend_even_tx, spend_odd_tx):\n+            assert_raises_rpc_error(-26, \"non-mandatory-script-verify-flag (Public key is neither compressed or uncompressed)\",\n+                                    self.node.sendrawtransaction, tx.serialize().hex())\n+\n+        self.log.info(\"Check that spending hybrid pubkey P2PK outputs is consensus-valid\")\n+        self.generate(self.node, 1)\n+        tmpl = self.node.getblocktemplate(NORMAL_GBT_REQUEST_PARAMS)\n+        block = create_block(tmpl=tmpl, txlist=[spend_even_tx, spend_odd_tx])\n+        block.solve()\n+        self.node.submitblock(block.serialize().hex())\n+\n+        last_block_txs = self.node.getblock(self.node.getbestblockhash())['tx']\n+        assert spend_even_tx.rehash() in last_block_txs\n+        assert spend_odd_tx.rehash() in last_block_txs\n+\n+    def test_pubkeys_not_on_curve(self):\n+        while True:\n+            invalid_xonly_pub = random.randbytes(32)\n+            if not GE.is_valid_x(int.from_bytes(invalid_xonly_pub, 'big')):\n+                break\n+\n+        self.log.info(\"Check that creating P2PK outputs with not-on-curve pubkey is standard\")\n+        for compressed_prefix in [b'\\x02', b'\\x03']:\n+            invalid_compressed_pub = compressed_prefix + invalid_xonly_pub\n+            self.wallet.send_to(from_node=self.node, scriptPubKey=key_to_p2pk_script(invalid_compressed_pub), amount=21000)\n+        invalid_uncompressed_pub = b'\\x04' + invalid_xonly_pub + random.randbytes(32)\n+        self.wallet.send_to(from_node=self.node, scriptPubKey=key_to_p2pk_script(invalid_uncompressed_pub), amount=21000)\n+\n+        self.log.info(\"Check that creating P2MS outputs with not-on-curve pubkeys is standard\")\n+        for n in (1, 2, 3):\n+            p2ms_script = keys_to_multisig_script([invalid_uncompressed_pub]*n)\n+            self.wallet.send_to(from_node=self.node, scriptPubKey=p2ms_script, amount=21000)\n+\n+        self.log.info(\"Check that creating P2TR outputs with not-on-curve pubkey is standard\")\n+        self.wallet.send_to(from_node=self.node, scriptPubKey=output_key_to_p2tr_script(invalid_xonly_pub), amount=21000)\n+\n+    def test_future_segwit_versions(self):\n+        self.log.info(\"Check that creating future segwit outputs (2 <= version <= 16) is standard\")\n+        funding_txs = []\n+        for future_ver in range(2, 16+1):\n+            witness_program = random.randbytes(random.randrange(2, 40+1))",
      "path": "test/functional/feature_rare_output_scripts.py",
      "position": 124,
      "original_position": 124,
      "commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "original_commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thinking out loud:\r\nInitially thought of ensuring the edge cases (2 and 40) are explicitly added in addition to random program size selection, but this would probably be overkill.",
      "created_at": "2024-07-19T17:44:48Z",
      "updated_at": "2024-07-19T17:55:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#discussion_r1684707058",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1684707058"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481"
        }
      },
      "start_line": 121,
      "original_start_line": 121,
      "start_side": "RIGHT",
      "line": 124,
      "original_line": 124,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1684710348",
      "pull_request_review_id": 2188793231,
      "id": 1684710348,
      "node_id": "PRRC_kwDOABII585kaqPM",
      "diff_hunk": "@@ -0,0 +1,159 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2024 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Check how rare output script types are treated regarding\n+   standardness and consensus-validity.\n+\"\"\"\n+import random\n+\n+from test_framework.blocktools import (\n+    NORMAL_GBT_REQUEST_PARAMS,\n+    create_block,\n+)\n+from test_framework.key import ECPubKey\n+from test_framework.messages import (\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxInWitness,\n+    CTxOut,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.script import sign_input_legacy\n+from test_framework.script_util import (\n+    key_to_p2pk_script,\n+    keys_to_multisig_script,\n+    output_key_to_p2tr_script,\n+    program_to_witness_script,\n+)\n+from test_framework.crypto.secp256k1 import GE\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+from test_framework.wallet_util import generate_keypair\n+\n+\n+class RareOutputScripts(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def generate_uncompressed_keypair(self, *, is_even):\n+        while True:\n+            privkey, pubkey_bytes = generate_keypair(compressed=False)\n+            pubkey = ECPubKey()\n+            pubkey.set(pubkey_bytes)\n+            if pubkey.p.y.is_even() == is_even:\n+                return privkey, pubkey\n+\n+    def create_p2pk_spend(self, outpoint, scriptpubkey, privkey):\n+        tx = CTransaction()\n+        tx.vin = [CTxIn(COutPoint(int(outpoint[0], 16), outpoint[1]))]\n+        tx.vout = [CTxOut(40000, self.wallet.get_scriptPubKey())]\n+        sign_input_legacy(tx, 0, scriptpubkey, privkey)\n+        return tx\n+\n+    def create_empty_witness_tx(self, outpoint):\n+        tx = CTransaction()\n+        tx.vin = [CTxIn(COutPoint(int(outpoint[0], 16), outpoint[1]))]\n+        tx.vout = [CTxOut(40000, self.wallet.get_scriptPubKey())]\n+        tx.wit.vtxinwit.append(CTxInWitness())\n+        return tx\n+\n+    def test_hybrid_pubkeys(self):\n+        self.log.info(\"Check that creating hybrid pubkey P2PK outputs is standard\")\n+        privkey_even, pubkey_even = self.generate_uncompressed_keypair(is_even=True)\n+        assert pubkey_even.p.y.is_even()\n+        pubkey_even_script = key_to_p2pk_script(b'\\x06' + pubkey_even.get_bytes()[1:])",
      "path": "test/functional/feature_rare_output_scripts.py",
      "position": 69,
      "original_position": 69,
      "commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "original_commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "in_reply_to_id": null,
      "user": {
        "login": "tdb3",
        "id": 106488469,
        "node_id": "U_kgDOBljilQ",
        "avatar_url": "https://avatars.githubusercontent.com/u/106488469?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/tdb3",
        "html_url": "https://github.com/tdb3",
        "followers_url": "https://api.github.com/users/tdb3/followers",
        "following_url": "https://api.github.com/users/tdb3/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/tdb3/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/tdb3/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/tdb3/subscriptions",
        "organizations_url": "https://api.github.com/users/tdb3/orgs",
        "repos_url": "https://api.github.com/users/tdb3/repos",
        "events_url": "https://api.github.com/users/tdb3/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/tdb3/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "Thinking out loud:\r\nMight be nice to enhance ECPubKey to handle hybrid keys (prevents having to do byte manipulation here).  Seems outside the scope of this PR though.",
      "created_at": "2024-07-19T17:48:46Z",
      "updated_at": "2024-07-19T17:55:06Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#discussion_r1684710348",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1684710348"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 69,
      "original_line": 69,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691351307",
      "pull_request_review_id": 2199143485,
      "id": 1691351307,
      "node_id": "PRRC_kwDOABII585kz_kL",
      "diff_hunk": "@@ -0,0 +1,159 @@\n+#!/usr/bin/env python3\n+# Copyright (c) 2024 The Bitcoin Core developers\n+# Distributed under the MIT software license, see the accompanying\n+# file COPYING or http://www.opensource.org/licenses/mit-license.php.\n+\"\"\"Check how rare output script types are treated regarding\n+   standardness and consensus-validity.\n+\"\"\"\n+import random\n+\n+from test_framework.blocktools import (\n+    NORMAL_GBT_REQUEST_PARAMS,\n+    create_block,\n+)\n+from test_framework.key import ECPubKey\n+from test_framework.messages import (\n+    COutPoint,\n+    CTransaction,\n+    CTxIn,\n+    CTxInWitness,\n+    CTxOut,\n+)\n+from test_framework.test_framework import BitcoinTestFramework\n+from test_framework.script import sign_input_legacy\n+from test_framework.script_util import (\n+    key_to_p2pk_script,\n+    keys_to_multisig_script,\n+    output_key_to_p2tr_script,\n+    program_to_witness_script,\n+)\n+from test_framework.crypto.secp256k1 import GE\n+from test_framework.util import (\n+    assert_equal,\n+    assert_raises_rpc_error,\n+)\n+from test_framework.wallet import MiniWallet\n+from test_framework.wallet_util import generate_keypair\n+\n+\n+class RareOutputScripts(BitcoinTestFramework):\n+    def set_test_params(self):\n+        self.num_nodes = 1\n+\n+    def generate_uncompressed_keypair(self, *, is_even):\n+        while True:\n+            privkey, pubkey_bytes = generate_keypair(compressed=False)\n+            pubkey = ECPubKey()\n+            pubkey.set(pubkey_bytes)\n+            if pubkey.p.y.is_even() == is_even:\n+                return privkey, pubkey\n+\n+    def create_p2pk_spend(self, outpoint, scriptpubkey, privkey):\n+        tx = CTransaction()\n+        tx.vin = [CTxIn(COutPoint(int(outpoint[0], 16), outpoint[1]))]\n+        tx.vout = [CTxOut(40000, self.wallet.get_scriptPubKey())]\n+        sign_input_legacy(tx, 0, scriptpubkey, privkey)\n+        return tx\n+\n+    def create_empty_witness_tx(self, outpoint):\n+        tx = CTransaction()\n+        tx.vin = [CTxIn(COutPoint(int(outpoint[0], 16), outpoint[1]))]\n+        tx.vout = [CTxOut(40000, self.wallet.get_scriptPubKey())]\n+        tx.wit.vtxinwit.append(CTxInWitness())\n+        return tx\n+\n+    def test_hybrid_pubkeys(self):\n+        self.log.info(\"Check that creating hybrid pubkey P2PK outputs is standard\")\n+        privkey_even, pubkey_even = self.generate_uncompressed_keypair(is_even=True)\n+        assert pubkey_even.p.y.is_even()\n+        pubkey_even_script = key_to_p2pk_script(b'\\x06' + pubkey_even.get_bytes()[1:])",
      "path": "test/functional/feature_rare_output_scripts.py",
      "position": 69,
      "original_position": 69,
      "commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "original_commit_id": "006d835acf98ebceaaaead7aea41f512ed5023ad",
      "in_reply_to_id": 1684710348,
      "user": {
        "login": "instagibbs",
        "id": 5767891,
        "node_id": "MDQ6VXNlcjU3Njc4OTE=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5767891?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/instagibbs",
        "html_url": "https://github.com/instagibbs",
        "followers_url": "https://api.github.com/users/instagibbs/followers",
        "following_url": "https://api.github.com/users/instagibbs/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/instagibbs/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/instagibbs/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/instagibbs/subscriptions",
        "organizations_url": "https://api.github.com/users/instagibbs/orgs",
        "repos_url": "https://api.github.com/users/instagibbs/repos",
        "events_url": "https://api.github.com/users/instagibbs/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/instagibbs/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "not sure it's worth the effort for such a niche thing that already has unit test coverage",
      "created_at": "2024-07-25T12:22:29Z",
      "updated_at": "2024-07-25T12:24:55Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/30481#discussion_r1691351307",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1691351307"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/30481"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 69,
      "original_line": 69,
      "side": "RIGHT"
    }
  ]
}