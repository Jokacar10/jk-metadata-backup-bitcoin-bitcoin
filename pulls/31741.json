{
  "type": "pull",
  "pull": {
    "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741",
    "id": 2300361238,
    "node_id": "PR_kwDOABII586JHLoW",
    "html_url": "https://github.com/bitcoin/bitcoin/pull/31741",
    "diff_url": "https://github.com/bitcoin/bitcoin/pull/31741.diff",
    "patch_url": "https://github.com/bitcoin/bitcoin/pull/31741.patch",
    "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741",
    "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741/commits",
    "review_comments_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741/comments",
    "review_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments%7B/number%7D",
    "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741/comments",
    "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/ab041937289f4939758c1896f5cb57f556ae0615",
    "number": 31741,
    "state": "open",
    "locked": false,
    "maintainer_can_modify": true,
    "title": "multiprocess: Add libmultiprocess git subtree",
    "user": {
      "login": "ryanofsky",
      "id": 7133040,
      "node_id": "MDQ6VXNlcjcxMzMwNDA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ryanofsky",
      "html_url": "https://github.com/ryanofsky",
      "followers_url": "https://api.github.com/users/ryanofsky/followers",
      "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
      "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
      "repos_url": "https://api.github.com/users/ryanofsky/repos",
      "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
      "type": "User",
      "site_admin": false,
      "patch_url": null
    },
    "body": "This adds the [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) library as a subtree in `src/ipc/libmultiprocess` and allows it to be built with the cmake `-DBUILD_MULTIPROCESS` option, which is disabled by default.\r\n\r\nA cmake `-DWITH_LIBMULTIPROCESS` option for building with external libmultiprocess packages is also kept, because this is needed to support cross compilation. (A cross-compiling cmake build cannot easily build and run a native code generation tool.)\r\n\r\nThis PR has 5 manual commits (not created automatically with `git subtree add`) which make small updates to the build system and documentation:\r\n\r\n- [`f23c3c47ee4d` depends, moveonly: split up int_get_build_id function](https://github.com/bitcoin/bitcoin/pull/31741/commits/f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03)\r\n- [`19eef973cb4a` depends: Switch libmultiprocess packages to use local git subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/19eef973cb4ae37d202c9f584b6ed913482aab4a)\r\n- [`36db25f0bcaa` cmake: Support building with libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/36db25f0bcaab6af9358faaad9214d5b77a71cb2)\r\n- [`0b4ca5d72510` doc: Update documentation to explain BUILD_MULTIPROCESS](https://github.com/bitcoin/bitcoin/pull/31741/commits/0b4ca5d72510f46ce6c2b849332a8f70eb14c69b)\r\n- [`ab041937289f` lint: Add exclusions for libmultiprocess subtree](https://github.com/bitcoin/bitcoin/pull/31741/commits/ab041937289f4939758c1896f5cb57f556ae0615)\r\n\r\n---\r\n\r\nPrevious minisketch subtree PR #23114 may be useful for comparison\r\n\r\nInstructions for subtree verification can be found:\r\n\r\n- https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees\r\n- https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh\r\n \r\nTL&DR: \r\n\r\n```sh\r\ngit remote add --fetch libmultiprocess https://github.com/chaincodelabs/libmultiprocess.git\r\ntest/lint/git-subtree-check.sh -r src/ipc/libmultiprocess\r\n```\r\n\r\n---\r\n\r\nThis PR is part of the [process separation project](https://github.com/bitcoin/bitcoin/issues/28722).\r\n",
    "labels": [],
    "created_at": "2025-01-27T16:48:43Z",
    "updated_at": "2025-01-31T21:53:28Z",
    "mergeable": true,
    "mergeable_state": "blocked",
    "merge_commit_sha": "1b73896031b8f987c60283bc448debae5e5c4926",
    "assignees": [],
    "requested_reviewers": [],
    "requested_teams": [],
    "rebaseable": false,
    "head": {
      "label": "ryanofsky:pr/subtree",
      "ref": "pr/subtree",
      "sha": "ab041937289f4939758c1896f5cb57f556ae0615",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 69901633,
        "node_id": "MDEwOlJlcG9zaXRvcnk2OTkwMTYzMw==",
        "name": "bitcoin",
        "full_name": "ryanofsky/bitcoin",
        "owner": {
          "login": "ryanofsky",
          "id": 7133040,
          "node_id": "MDQ6VXNlcjcxMzMwNDA=",
          "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/ryanofsky",
          "html_url": "https://github.com/ryanofsky",
          "followers_url": "https://api.github.com/users/ryanofsky/followers",
          "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
          "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
          "repos_url": "https://api.github.com/users/ryanofsky/repos",
          "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
          "type": "User",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/ryanofsky/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": true,
        "url": "https://api.github.com/repos/ryanofsky/bitcoin",
        "archive_url": "https://api.github.com/repos/ryanofsky/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/ryanofsky/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/ryanofsky/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/ryanofsky/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/ryanofsky/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/ryanofsky/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/ryanofsky/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/ryanofsky/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/ryanofsky/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/ryanofsky/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/ryanofsky/bitcoin/events",
        "forks_url": "https://api.github.com/repos/ryanofsky/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/ryanofsky/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/ryanofsky/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/ryanofsky/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/ryanofsky/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/ryanofsky/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/ryanofsky/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/ryanofsky/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/ryanofsky/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/ryanofsky/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/ryanofsky/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:ryanofsky/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/ryanofsky/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/ryanofsky/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/ryanofsky/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/ryanofsky/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/ryanofsky/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/ryanofsky/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/ryanofsky/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/ryanofsky/bitcoin/hooks",
        "svn_url": "https://github.com/ryanofsky/bitcoin",
        "homepage": "https://bitcoin.org/en/download",
        "language": "C++",
        "forks_count": 9,
        "stargazers_count": 15,
        "watchers_count": 15,
        "size": 274301,
        "default_branch": "master",
        "open_issues_count": 3,
        "is_template": false,
        "topics": [],
        "has_issues": false,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-30T03:03:59Z",
        "created_at": "2016-10-03T19:05:43Z",
        "updated_at": "2024-12-03T23:24:02Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "base": {
      "label": "bitcoin:master",
      "ref": "master",
      "sha": "ad2f9324c619ae608c434ee85ad9ae1b2812877d",
      "user": {
        "login": "bitcoin",
        "id": 528860,
        "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/bitcoin",
        "html_url": "https://github.com/bitcoin",
        "followers_url": "https://api.github.com/users/bitcoin/followers",
        "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
        "organizations_url": "https://api.github.com/users/bitcoin/orgs",
        "repos_url": "https://api.github.com/users/bitcoin/repos",
        "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/bitcoin/received_events",
        "type": "Organization",
        "site_admin": false,
        "patch_url": null
      },
      "repo": {
        "id": 1181927,
        "node_id": "MDEwOlJlcG9zaXRvcnkxMTgxOTI3",
        "name": "bitcoin",
        "full_name": "bitcoin/bitcoin",
        "owner": {
          "login": "bitcoin",
          "id": 528860,
          "node_id": "MDEyOk9yZ2FuaXphdGlvbjUyODg2MA==",
          "avatar_url": "https://avatars.githubusercontent.com/u/528860?v=4",
          "gravatar_id": "",
          "url": "https://api.github.com/users/bitcoin",
          "html_url": "https://github.com/bitcoin",
          "followers_url": "https://api.github.com/users/bitcoin/followers",
          "following_url": "https://api.github.com/users/bitcoin/following%7B/other_user%7D",
          "gists_url": "https://api.github.com/users/bitcoin/gists%7B/gist_id%7D",
          "starred_url": "https://api.github.com/users/bitcoin/starred%7B/owner%7D%7B/repo%7D",
          "subscriptions_url": "https://api.github.com/users/bitcoin/subscriptions",
          "organizations_url": "https://api.github.com/users/bitcoin/orgs",
          "repos_url": "https://api.github.com/users/bitcoin/repos",
          "events_url": "https://api.github.com/users/bitcoin/events%7B/privacy%7D",
          "received_events_url": "https://api.github.com/users/bitcoin/received_events",
          "type": "Organization",
          "site_admin": false,
          "patch_url": null
        },
        "private": false,
        "html_url": "https://github.com/bitcoin/bitcoin",
        "description": "Bitcoin Core integration/staging tree",
        "fork": false,
        "url": "https://api.github.com/repos/bitcoin/bitcoin",
        "archive_url": "https://api.github.com/repos/bitcoin/bitcoin/%7Barchive_format%7D%7B/ref%7D",
        "assignees_url": "https://api.github.com/repos/bitcoin/bitcoin/assignees%7B/user%7D",
        "blobs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/blobs%7B/sha%7D",
        "branches_url": "https://api.github.com/repos/bitcoin/bitcoin/branches%7B/branch%7D",
        "collaborators_url": "https://api.github.com/repos/bitcoin/bitcoin/collaborators%7B/collaborator%7D",
        "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/comments%7B/number%7D",
        "commits_url": "https://api.github.com/repos/bitcoin/bitcoin/commits%7B/sha%7D",
        "compare_url": "https://api.github.com/repos/bitcoin/bitcoin/compare/%7Bbase%7D...%7Bhead%7D",
        "contents_url": "https://api.github.com/repos/bitcoin/bitcoin/contents/%7B+path%7D",
        "contributors_url": "https://api.github.com/repos/bitcoin/bitcoin/contributors",
        "deployments_url": "https://api.github.com/repos/bitcoin/bitcoin/deployments",
        "downloads_url": "https://api.github.com/repos/bitcoin/bitcoin/downloads",
        "events_url": "https://api.github.com/repos/bitcoin/bitcoin/events",
        "forks_url": "https://api.github.com/repos/bitcoin/bitcoin/forks",
        "git_commits_url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits%7B/sha%7D",
        "git_refs_url": "https://api.github.com/repos/bitcoin/bitcoin/git/refs%7B/sha%7D",
        "git_tags_url": "https://api.github.com/repos/bitcoin/bitcoin/git/tags%7B/sha%7D",
        "git_url": "git://github.com/bitcoin/bitcoin.git",
        "issue_comment_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments%7B/number%7D",
        "issue_events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events%7B/number%7D",
        "issues_url": "https://api.github.com/repos/bitcoin/bitcoin/issues%7B/number%7D",
        "keys_url": "https://api.github.com/repos/bitcoin/bitcoin/keys%7B/key_id%7D",
        "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/labels%7B/name%7D",
        "languages_url": "https://api.github.com/repos/bitcoin/bitcoin/languages",
        "merges_url": "https://api.github.com/repos/bitcoin/bitcoin/merges",
        "milestones_url": "https://api.github.com/repos/bitcoin/bitcoin/milestones%7B/number%7D",
        "notifications_url": "https://api.github.com/repos/bitcoin/bitcoin/notifications%7B?since,all,participating}",
        "pulls_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls%7B/number%7D",
        "releases_url": "https://api.github.com/repos/bitcoin/bitcoin/releases%7B/id%7D",
        "ssh_url": "git@github.com:bitcoin/bitcoin.git",
        "stargazers_url": "https://api.github.com/repos/bitcoin/bitcoin/stargazers",
        "statuses_url": "https://api.github.com/repos/bitcoin/bitcoin/statuses/%7Bsha%7D",
        "subscribers_url": "https://api.github.com/repos/bitcoin/bitcoin/subscribers",
        "subscription_url": "https://api.github.com/repos/bitcoin/bitcoin/subscription",
        "tags_url": "https://api.github.com/repos/bitcoin/bitcoin/tags",
        "teams_url": "https://api.github.com/repos/bitcoin/bitcoin/teams",
        "trees_url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees%7B/sha%7D",
        "clone_url": "https://github.com/bitcoin/bitcoin.git",
        "hooks_url": "https://api.github.com/repos/bitcoin/bitcoin/hooks",
        "svn_url": "https://github.com/bitcoin/bitcoin",
        "homepage": "https://bitcoincore.org/en/download",
        "language": "C++",
        "forks_count": 36646,
        "stargazers_count": 81766,
        "watchers_count": 81766,
        "size": 274981,
        "default_branch": "master",
        "open_issues_count": 694,
        "is_template": false,
        "topics": [
          "bitcoin",
          "c-plus-plus",
          "cryptocurrency",
          "cryptography",
          "p2p"
        ],
        "has_issues": true,
        "has_projects": true,
        "has_wiki": false,
        "has_pages": false,
        "has_downloads": false,
        "archived": false,
        "disabled": false,
        "visibility": "public",
        "pushed_at": "2025-01-31T20:45:20Z",
        "created_at": "2010-12-19T15:16:43Z",
        "updated_at": "2025-01-31T21:03:14Z",
        "allow_forking": true,
        "license": {
          "key": "mit",
          "name": "MIT License",
          "node_id": "MDc6TGljZW5zZTEz",
          "spdx_id": "MIT",
          "url": "https://api.github.com/licenses/mit",
          "html_url": null,
          "description": null,
          "implementation": null,
          "permissions": null,
          "conditions": null,
          "limitations": null,
          "body": null,
          "featured": null
        }
      }
    },
    "_links": {
      "self": {
        "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
      }
    },
    "author_association": "CONTRIBUTOR",
    "draft": false,
    "additions": 5889,
    "deletions": 27,
    "changed_files": 77,
    "commits": 7,
    "review_comments": 7,
    "comments": 35
  },
  "events": [
    {
      "event": "commented",
      "id": 2616341516,
      "node_id": "IC_kwDOABII586b8jQM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616341516",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T16:48:46Z",
      "updated_at": "2025-01-30T19:47:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--e57a25ab6845829454e8d69fc972939a-->\n\nThe following sections might be updated with supplementary metadata relevant to reviewers and maintainers.\n\n<!--006a51241073e994b41acfe9ec718e94-->\n### Code Coverage & Benchmarks\nFor details see: https://corecheck.dev/bitcoin/bitcoin/pulls/31741.\n<!--021abf342d371248e50ceaed478a90ca-->\n### Reviews\nSee [the guideline](https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review) for information on the review process.\n| Type | Reviewers |\n| ---- | --------- |\n| Concept ACK | [TheCharlatan](https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616720933), [Sjors](https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200), [vasild](https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2618716545), [hebasto](https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621519226), [BrandonOdiwuor](https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2581532869) |\n\nIf your review is incorrectly listed, please react with 👎 to this comment and the bot will ignore it on the next update.\n<!--174a7506f384e20aa4161008e828411d-->\n### Conflicts\nReviewers, this pull request conflicts with the following ones:\n\n* [#31765](https://github.com/bitcoin/bitcoin/pull/31765) (cmake: Install man pages for configured targets only by hebasto)\n* [#31161](https://github.com/bitcoin/bitcoin/pull/31161) (cmake: Set top-level target output locations by hebasto)\n* [#30997](https://github.com/bitcoin/bitcoin/pull/30997) (build: Switch to Qt 6 by hebasto)\n\nIf you consider this pull request important, please also help to review the conflicting pull requests. Ideally, start with the one that should be merged first.\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616341516",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "convert_to_draft",
      "id": 16080955534,
      "node_id": "CTDE_lADOABII586nsxBLzwAAAAO-f-iO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16080955534",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T16:48:56Z"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16081126326,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAO-goO2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16081126326",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "eb70c90b06f068816ba09481f1cf37f49c4d95ee",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/eb70c90b06f068816ba09481f1cf37f49c4d95ee",
      "created_at": "2025-01-27T17:01:09Z"
    },
    {
      "event": "commented",
      "id": 2616375047,
      "node_id": "IC_kwDOABII586b8rcH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616375047",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T17:01:23Z",
      "updated_at": "2025-01-27T17:01:23Z",
      "author_association": "CONTRIBUTOR",
      "body": "<!--85328a0da195eb286784d51f73fa0af9-->\n🚧 At least one of the CI tasks failed.\n<sub>Debug: https://github.com/bitcoin/bitcoin/runs/36237440607</sub>\n\n<details><summary>Hints</summary>\n\nTry to run the tests locally, according to the documentation. However, a CI failure may still\nhappen due to a number of reasons, for example:\n\n* Possibly due to a silent merge conflict (the changes in this pull request being\nincompatible with the current code in the target branch). If so, make sure to rebase on the latest\ncommit of the target branch.\n\n* A sanitizer issue, which can only be found by compiling with the sanitizer and running the\n  affected test.\n\n* An intermittent issue.\n\nLeave a comment here, if you need help tracking down a confusing failure.\n\n</details>\n",
      "user": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616375047",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "labeled",
      "id": 16081129458,
      "node_id": "LE_lADOABII586nsxBLzwAAAAO-go_y",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16081129458",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T17:01:23Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16082797264,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAO-nALQ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16082797264",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "9bb4bb9680b28b238ae5840f9de2963a81e01119",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/9bb4bb9680b28b238ae5840f9de2963a81e01119",
      "created_at": "2025-01-27T18:59:37Z"
    },
    {
      "event": "commented",
      "id": 2616653238,
      "node_id": "IC_kwDOABII586b9vW2",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616653238",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T19:01:06Z",
      "updated_at": "2025-01-27T19:08:16Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased eb70c90b06f068816ba09481f1cf37f49c4d95ee -> 9bb4bb9680b28b238ae5840f9de2963a81e01119 ([`pr/subtree.1`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.1) -> [`pr/subtree.2`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.2), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/subtree.1-rebase..pr/subtree.2)) on updated base PR to fix CI errors\r\nUpdated 9bb4bb9680b28b238ae5840f9de2963a81e01119 -> 93ba80b3d78fa1c4e7f614df6517b9cb492d05d7 ([`pr/subtree.2`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.2) -> [`pr/subtree.3`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.3), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/subtree.2..pr/subtree.3)) to fix path typo in previous push",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616653238",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16082887239,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAO-nWJH",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16082887239",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "created_at": "2025-01-27T19:07:47Z"
    },
    {
      "event": "commented",
      "id": 2616720933,
      "node_id": "IC_kwDOABII586b9_4l",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2616720933",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T19:33:56Z",
      "updated_at": "2025-01-27T19:33:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2616720933",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "unlabeled",
      "id": 16083776012,
      "node_id": "UNLE_lADOABII586nsxBLzwAAAAO-qvIM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16083776012",
      "actor": {
        "login": "DrahtBot",
        "id": 39886733,
        "node_id": "MDQ6VXNlcjM5ODg2NzMz",
        "avatar_url": "https://avatars.githubusercontent.com/u/39886733?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/DrahtBot",
        "html_url": "https://github.com/DrahtBot",
        "followers_url": "https://api.github.com/users/DrahtBot/followers",
        "following_url": "https://api.github.com/users/DrahtBot/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/DrahtBot/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/DrahtBot/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/DrahtBot/subscriptions",
        "organizations_url": "https://api.github.com/users/DrahtBot/orgs",
        "repos_url": "https://api.github.com/users/DrahtBot/repos",
        "events_url": "https://api.github.com/users/DrahtBot/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/DrahtBot/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-27T20:29:42Z",
      "label": {
        "name": "CI failed",
        "color": "cccccc"
      }
    },
    {
      "event": "commented",
      "id": 2617367421,
      "node_id": "IC_kwDOABII586cAdt9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2617367421",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T01:02:58Z",
      "updated_at": "2025-01-28T01:17:40Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky Please have a look here: https://github.com/theuni/bitcoin/commit/f2d74475433528c81c42af3232c257c443c1fc94\r\n\r\nIt's a quick hack to demonstrate the concept, please ignore the rough edges and consider the concept alone. I'll clean it up if you're interested.\r\n\r\nThat approach would simplify things for (I suspect) 99% of builders, who never need to regenerate the files. Let me know what you think?\r\n\r\nEdit: Note that if you're using depends, you'll need to overwrite `depends/$(host)/native/lib/cmake/Libmultiprocess/CopyOrGenerate.cmake` with `src/ipc/libmultiprocess/cmake/TargetCapnpSources.cmake`. If we take this approach, that file would be updated upstream accordingly.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2617367421",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16086030926,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO-zVpO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16086030926",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T01:03:00Z"
    },
    {
      "event": "subscribed",
      "id": 16086030936,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO-zVpY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16086030936",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T01:03:00Z"
    },
    {
      "event": "reviewed",
      "id": 2577588200,
      "node_id": "PRR_kwDOABII586Zot_o",
      "url": null,
      "actor": null,
      "commit_id": "93ba80b3d78fa1c4e7f614df6517b9cb492d05d7",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "body": "Concept ACK\r\n\r\nIt would be good to remind people in the PR description how one verifies a subtree: https://github.com/bitcoin/bitcoin/blob/master/doc/developer-notes.md#subtrees (you should add `ipc/multiprocess` to the list there) and https://github.com/bitcoin/bitcoin/tree/master/test/lint#git-subtree-checksh\r\n\r\nTL&DR: \r\n\r\n```sh\r\ngit remote add --fetch libmultiprocess https://github.com/chaincodelabs/libmultiprocess.git\r\ntest/lint/git-subtree-check.sh -r src/ipc/libmultiprocess\r\n```\r\n\r\nIt would be good to have an additional CI machine cover multiprocess, using the non-depends `-DBUILD_MULTIPROCESS=1` and with `BITCOIND=bitcoin-node`. For easy rebasing in #30975,  `ci/test/00_setup_env_mac_native.sh` would have my preference.\r\n\r\n@theuni I'm all for speeding up the build, though that should probably be a followup.\r\n\r\nOn (M4) macOS 15.2 I get a flood of warnings, which means I can't use ` -DWERROR=ON`:\r\n\r\n```\r\nIn file included from /opt/homebrew/include/capnp/common.h:31:\r\n/opt/homebrew/include/kj/windows-sanity.h:39:6: warning: '_WIN32' is not defined, evaluates to 0 [-Wundef]\r\n   39 | #if !_WIN32 && !__CYGWIN__\r\n      |      ^\r\n/opt/homebrew/include/kj/windows-sanity.h:39:17: warning: '__CYGWIN__' is not defined, evaluates to 0 [-Wundef]\r\n   39 | #if !_WIN32 && !__CYGWIN__\r\n      |     \r\n\r\n/opt/homebrew/include/capnp/common.h:33:5: warning: 'CAPNP_DEBUG_TYPES' is not defined, evaluates to 0 [-Wundef]\r\n\r\n/opt/homebrew/include/capnp/raw-schema.h:26:5: warning: '_MSC_VER' is not defined, evaluates to 0 [-Wundef]\r\n\r\n/opt/homebrew/include/kj/async-prelude.h:34:6: warning: 'KJ_NO_EXCEPTIONS' is not defined, evaluates to 0 [-Wundef]\r\n```\r\n\r\nBuilding `MULTIPROCESS=1` with depends now fails:\r\n\r\n```\r\n...\r\nPostprocessing native_capnp...\r\nCaching native_capnp...\r\nFetching from\r\ncurl: (3) URL rejected: No host part in the URL\r\nFetching from https://bitcoincore.org/depends-sources\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n  0  308k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r\ncurl: (22) The requested URL returned error: 403\r\nmake: *** [/Users/sjors/dev/bitcoin/depends/sources/download-stamps/.stamp_fetched-native_libmultiprocess-.hash] Error 22\r\n```\r\n\r\nBefore commit 01452f8c0da58db549bc46d0cfa7de715344efc4 depends does build (as you would expect).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200",
      "submitted_at": "2025-01-28T09:33:27Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
    },
    {
      "event": "commented",
      "id": 2618716545,
      "node_id": "IC_kwDOABII586cFnGB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2618716545",
      "actor": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T11:21:52Z",
      "updated_at": "2025-01-28T11:21:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "vasild",
        "id": 266751,
        "node_id": "MDQ6VXNlcjI2Njc1MQ==",
        "avatar_url": "https://avatars.githubusercontent.com/u/266751?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/vasild",
        "html_url": "https://github.com/vasild",
        "followers_url": "https://api.github.com/users/vasild/followers",
        "following_url": "https://api.github.com/users/vasild/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/vasild/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/vasild/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/vasild/subscriptions",
        "organizations_url": "https://api.github.com/users/vasild/orgs",
        "repos_url": "https://api.github.com/users/vasild/repos",
        "events_url": "https://api.github.com/users/vasild/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/vasild/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2618716545",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2619468899,
      "node_id": "IC_kwDOABII586cIexj",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619468899",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T16:19:28Z",
      "updated_at": "2025-01-28T16:19:28Z",
      "author_association": "CONTRIBUTOR",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200\r\n\r\nThanks @Sjors for the review. I'll make changes you suggested and I opened two issues https://github.com/chaincodelabs/libmultiprocess/issues/138 and https://github.com/chaincodelabs/libmultiprocess/issues/139 to debug the problems you are seeing, and I will post next steps there. Thanks for reporting these.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619468899",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16096046104,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_ZiwY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096046104",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T16:19:29Z"
    },
    {
      "event": "subscribed",
      "id": 16096046122,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_Ziwq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096046122",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T16:19:29Z"
    },
    {
      "event": "commented",
      "id": 2619623574,
      "node_id": "IC_kwDOABII586cJEiW",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619623574",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:04Z",
      "updated_at": "2025-01-28T17:30:52Z",
      "author_association": "CONTRIBUTOR",
      "body": "> @ryanofsky Please have a look here: [theuni@f2d7447](https://github.com/theuni/bitcoin/commit/f2d74475433528c81c42af3232c257c443c1fc94)\r\n> \r\n> It's a quick hack to demonstrate the concept, please ignore the rough edges and consider the concept alone. I'll clean it up if you're interested.\r\n\r\nI feel like I'm missing a lot of context which led up to that implemention, and also I wonder if files are missing from that commit because just shows a new `CopyOrGenerate.cmake` script that does not actually seem to be called anywhere.\r\n\r\nFrom what I can understand though, this script seems to be acting like a wrapper around the `mpgen` executable that avoids calling `mpgen` if cached outputs are present. If they are present they will be copied from one location to another (unclear what source location is since it is not specified in the script).\r\n\r\nSo I presume the idea behind this is that in cross-compiled builds, it will not be necessarily to have an `mpgen` utility built, because the `mpgen` outputs can be checked in to git, or downloaded from some external location, and they can be copied into the build instead of calling `mpgen`. And this will allow deleting the [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, which I'm speculating is your ultimate goal? It is unclear what your goal is.\r\n\r\nI don't have a problem with that approach, if that's the approach you think is better. I would point out that it will have drawbacks. For one thing if the plan is to check these files into git then we will need some kind of CI rule to ensure that they are generated correctly and not just trust authors of PRs to generate them. The generated files will also be tied to a individual releases of capnproto so everybody will have to run the same capnproto version. Capnproto does not allow mixing headers generated by one version with the library of another version, and it has an explicit preprocessor check to prevent this. The generated files could also make PR review unwieldy, because a simple change to a capnp file could lead to much bigger changes in generated files (which contain binary data in C arrays and are not very friendly to diffing. Changes to generated files could be especially make PRs hard to review if they change .capnp files in multiple commits, and lead to headaches rebasing.\r\n\r\nIf you want to go down this road it seems ok, but I think it would be very helpful if you could a little time to actually review this PR. I am happy with this PR currently and think the approach it takes is elegant. It leverages fantastic work @hebasto did in https://github.com/chaincodelabs/libmultiprocess/pull/96 and later PRs to simultaneously support cmake packaging while also simplifying the libmultiprocess build.\r\n\r\nThere are two nontrivial commits in this PR. 01452f8c0da58db549bc46d0cfa7de715344efc4 adds an obvious feature to the depends system, that I'm surprised wasn't in there from the beginning: the ability to build sources from a local directory instead of requiring them to be published to an http server. The feature is simple, ergonomic, clearly documented, and implemented in literally 12 lines of code. The second commit d70474da4d1f3bc623e3167dab63a7860f99875f is nontrivial but also pretty straightforward. It adds a `add_subdirectory(libmultiprocess)` call and updates a handful of other things in the cmake build to support that call.\r\n\r\nIf I have one takeaway from implementing this PR, it is that `find_package` is great and `add_subdirectory` is terrible. `add_subdirectory`is bad because it leaks all kinds of information you don't want to leak from the parent directory to the child directory (include paths and other options) and vice versa (child targets leak into the parent build). `find_package` has standard scoping mechanisms and ways of passing information, while `add_subdirectory` is ad-hoc and requires `PARENT_SCOPE` assignments. So in terms of robustness and dealing with breakages in the future, I think keeping depends [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, using `find_package`, and avoiding `add_subdirectory` when making releases and cross compiling will make debugging and support more straightforward. Then with `find_package` support working, additionally supporting `add_subdirectory` for local development is pretty easy and just requires a few extra lines of code (`add_subdirectory` call and some set `PARENT_SCOPE` lines).",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619623574",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16096953703,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_dAVn",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953703",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "subscribed",
      "id": 16096953753,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_dAWZ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953753",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "mentioned",
      "id": 16096953789,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_dAW9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953789",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "subscribed",
      "id": 16096953822,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_dAXe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16096953822",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T17:22:06Z"
    },
    {
      "event": "commented",
      "id": 2619837571,
      "node_id": "IC_kwDOABII586cJ4yD",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619837571",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:32Z",
      "updated_at": "2025-01-28T19:04:32Z",
      "author_association": "MEMBER",
      "body": "> > @ryanofsky Please have a look here: [theuni@f2d7447](https://github.com/theuni/bitcoin/commit/f2d74475433528c81c42af3232c257c443c1fc94)\r\n> > It's a quick hack to demonstrate the concept, please ignore the rough edges and consider the concept alone. I'll clean it up if you're interested.\r\n> \r\n> I feel like I'm missing a lot of context which led up to that implemention, and also I wonder if files are missing from that commit because just shows a new `CopyOrGenerate.cmake` script that does not actually seem to be called anywhere.\r\n> \r\n\r\nYes, sorry, I missed the chunk that actually turns it on. Pushed again, see https://github.com/theuni/bitcoin/commit/274cc5598db09af687e7383979b377460a59ef94.\r\n\r\n> From what I can understand though, this script seems to be acting like a wrapper around the `mpgen` executable that avoids calling `mpgen` if cached outputs are present. If they are present they will be copied from one location to another (unclear what source location is since it is not specified in the script).\r\n> \r\n\r\nCorrect\r\n\r\n> So I presume the idea behind this is that in cross-compiled builds, it will not be necessarily to have an `mpgen` utility built, because the `mpgen` outputs can be checked in to git, or downloaded from some external location, and they can be copied into the build instead of calling `mpgen`. And this will allow deleting the [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, which I'm speculating is your ultimate goal? It is unclear what your goal is.\r\n> \r\n\r\nCorrect. Even if it's not desirable to check these into master, it would be _very_ useful to have them in release branches so that they end up in release tarballs. It's very common for source packages to be pre-bootstrapped, and that's exactly what this would do.\r\n\r\nConsider how much simpler this would be for builders/packagers (who don't use depends) to build cross packages. \r\n\r\n> I don't have a problem with that approach, if that's the approach you think is better. I would point out that it will have drawbacks. For one thing if the plan is to check these files into git then we will need some kind of CI rule to ensure that they are generated correctly and not just trust authors of PRs to generate them.\r\n\r\nIndeed.\r\n\r\n> The generated files will also be tied to a individual releases of capnproto so everybody will have to run the same capnproto version. Capnproto does not allow mixing headers generated by one version with the library of another version, and it has an explicit preprocessor check to prevent this.\r\n\r\nI think we would want to enforce this anyway? One of the rules we decided on for CMake is \"newer build-side tools should never lead to different/better code\". For example, A newer version of CMake should produce the same code as an older one. If newer versions of capnproto produce materially different code, I think we'd want force a pinning (for everyone) to whatever we're using in guix, no?\r\n\r\n> The generated files could also make PR review unwieldy, because a simple change to a capnp file could lead to much bigger changes in generated files (which contain binary data in C arrays and are not very friendly to diffing. Changes to generated files could be especially make PRs hard to review if they change .capnp files in multiple commits, and lead to headaches rebasing.\r\n\r\nAgreed, that does sound like it could be painful.\r\n\r\n> \r\n> If you want to go down this road it seems ok, but I think it would be very helpful if you could a little time to actually review this PR. I am happy with this PR currently and think the approach it takes is elegant. It leverages fantastic work @hebasto did in [chaincodelabs/libmultiprocess#96](https://github.com/chaincodelabs/libmultiprocess/pull/96) and later PRs to simultaneously support cmake packaging while also simplifying the libmultiprocess build.\r\n> \r\n\r\nThis is my process for review :) Please don't think that just because I'm proposing a procedural change, that I'm somehow ignoring the work that has gone in. It also doesn't mean that I plan on being pushy about this approach. This is a significant change for us and I want to make sure that I understand it and its drawbacks. Maybe the pre-bootstrapped-files idea is terrible, but I wanted to see what it would take to make it happen.\r\n\r\nTo my knowledge, we've never (as part of our release builds) required any native tooling (beyond the toolchain) for pre-processing of our code. [edit: Er.. ok, that's not true. QT requires pre-processing, but its native tools are widely available]. Adding to that, CMake doesn't understand the concept of build/host split tools. So for something that is going to be a hard requirement for future builds, I'm doing my due diligence to understand how we can make this as painless for devs/packagers as possible.\r\n\r\nIt's easiest for me to review something like this by basically implementing a solution myself and seeing where we diverge. So far, I'm mostly arriving at the same conclusions as you. I wouldn't have come up with the depends-source-tarball thing though. That one's clever :)\r\n\r\n\r\n> There are two nontrivial commits in this PR. [01452f8](https://github.com/bitcoin/bitcoin/commit/01452f8c0da58db549bc46d0cfa7de715344efc4) adds an obvious feature to the depends system, that I'm surprised wasn't in there from the beginning: the ability to build sources from a local directory instead of requiring them to be published to an http server. The feature is simple, ergonomic, clearly documented, and implemented in literally 12 lines of code. The second commit [d70474d](https://github.com/bitcoin/bitcoin/commit/d70474da4d1f3bc623e3167dab63a7860f99875f) is nontrivial but also pretty straightforward. It adds a `add_subdirectory(libmultiprocess)` call and updates a handful of other things in the cmake build to support that call.\r\n> \r\n\r\nI think the depends source-package thing is elegant and neat. But in the cross-compiled case, it effectively nullifies the effect of vendoring the code. Changes to the local libmultiprocess won't be picked up without rebuilding depends. I think this could be improved by always using our internal target libmultiprocess, but selectively with an internel/external native one? In that case, I don't think the non-native libmultiprocess in depends needs to exist? Maybe that's nonsense... I'm still trying to understand how it all glues together, I'm nowhere near done yet. Again, hacking around is how I understand/review, please don't take it as a criticism.\r\n\r\n> If I have one takeaway from implementing this PR, it is that `find_package` is great and `add_subdirectory` is terrible. `add_subdirectory`is bad because it leaks all kinds of information you don't want to leak from the parent directory to the child directory (include paths and other options) and vice versa (child targets leak into the parent build). `find_package` has standard scoping mechanisms and ways of passing information, while `add_subdirectory` is ad-hoc and requires `PARENT_SCOPE` assignments. So in terms of robustness and dealing with breakages in the future, I think keeping depends [`native_capnp.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/native_libmultiprocess.mk) and [`libmultiprocess.mk`](https://github.com/ryanofsky/bitcoin/blob/pr/subtree/depends/packages/libmultiprocess.mk) packages, using `find_package`, and avoiding `add_subdirectory` when making releases and cross compiling will make debugging and support more straightforward.\r\n\r\nThis negates many of the benefits of vendoring, though. Namely hardening/optimizations. A libmultiprocess built in depends wouldn't get the same build flags as it would if it were building from our project. So yes, while the leakiness of the subdirectory approach is annoying (see leveldb/crc32c for example, we completely ignore their CMake files), it also has its benefits.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619837571",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16098158963,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_hmlz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098158963",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "subscribed",
      "id": 16098158974,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_hml-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098158974",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "mentioned",
      "id": 16098158993,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAO_hmmR",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098158993",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "subscribed",
      "id": 16098159008,
      "node_id": "SE_lADOABII586nsxBLzwAAAAO_hmmg",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16098159008",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:04:34Z"
    },
    {
      "event": "commented",
      "id": 2619854239,
      "node_id": "IC_kwDOABII586cJ82f",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2619854239",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T19:13:29Z",
      "updated_at": "2025-01-28T19:55:35Z",
      "author_association": "MEMBER",
      "body": "> I think the depends source-package thing is elegant and neat. But in the cross-compiled case, it effectively nullifies the effect of vendoring the code. Changes to the local libmultiprocess won't be picked up without rebuilding depends. I think this could be improved by always using our internal target libmultiprocess, but selectively with an internel/external native one? In that case, I don't think the non-native libmultiprocess in depends needs to exist?\r\n\r\nBasically (unless I'm missing something?) I think libmultiprocess needs an `EXTERNAL_MPGEN` option, same as capnproto has: https://github.com/capnproto/capnproto/blob/v2/c%2B%2B/CMakeLists.txt#L29. That would allow what I proposed above to work.\r\n\r\nI'm working on a POC for that now.\r\n\r\nEdit: wait, is mpgen not required to build libmultiprocess itself? See, this is a helpful exercise :)  ",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619854239",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2620013263,
      "node_id": "IC_kwDOABII586cKjrP",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2620013263",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T20:40:51Z",
      "updated_at": "2025-01-28T20:40:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "Thanks for the feedback and clearing things up. Will be interested to see the EXTERNAL_MPGEN option and maybe eliminate one of the depends packages.\r\n\r\n> I think the depends source-package thing is elegant and neat. But in the cross-compiled case, it effectively nullifies the effect of vendoring the code. Changes to the local libmultiprocess won't be picked up without rebuilding depends.\r\n\r\nI don't think \"effectively nullifies the effect of vendoring\" is true at all, unless you have some different goals in mind that I'm not aware of. My main goal here is to make it trivial for developers to build multiprocess binaries by running \"apt install libcapnp-dev capnproto` and `-DBUILD_MULTIPROCESS=ON` and not having to do anything else. (At some point in a followup I would also like to change default to ON so even the latter is not necessary.) I also want the depends system to use the git subtree, so I am tweaking the depends system minimally to do that.\r\n\r\nThe use-case you seem to be referencing is a more particular one where someone is using the depends system and also modifying the libmultiprocess library. The PR helps a lot with that use-case, and supports it by only requiring the developer to touch `libmultiprocess` directory and rerun their depends make command after changes to libmultiprocess code. This is much easier than what you have to do now, which is commit the changes to git, push them to github, update the version_hash and sha256_hash in the package file, and then run depends again.\r\n\r\nThis build steps in this use-case are also basically the same steps I've been using to develop libmultiprocess up to this point for years now, where after I make a change, I run \"make install\" in the libmultiprocess build and then run \"make\" in the bitcoin build. I can tell you from experience it is not too onerous.\r\n\r\n> I think this could be improved by always using our internal target libmultiprocess, but selectively with an internel/external native one?\r\n\r\nYes we could support building with an internal libmultiprocess for the library an external libmultiprocess for the code generator. This is your `EXTERNAL_MPGEN` suggestion. It would just require defining a new option and adding a few `if()` statements to the build. It could help avoid the need to rerun depends in the use-case above if only the library not code generator is being modified. It would also allow bitcoin flags to automatically propagate to the libmultiprocess library.\r\n\r\n> In that case, I don't think the non-native libmultiprocess in depends needs to exist?\r\n\r\nThat's right. Overall `EXTERNAL_MPGEN` or an equivalent is a reasonable idea that may be worth doing as a followup. The implementation would be be a superset of this change, not replace or eliminate changes already here. One drawback of using this option and eliminating the cross-compiled `libmultiprocess.mk` package would be that the library and code generator would no longer be built together in lockstep. So you could make changes to the code generator and they might not be picked up while changes to the library are, which couldn't happen with the current PR. I don't think it is a big concern though.\r\n\r\n>Maybe that's nonsense... I'm still trying to understand how it all glues together, I'm nowhere near done yet. Again, hacking around is how I understand/review, please don't take it as a criticism.\r\n\r\nNo problem at all. An `EXTERNAL_MPGEN` is potentially useful idea I didn't really think about. Just more of an add-on than a replacement for the changes here.\r\n\r\n> This negates many of the benefits of vendoring, though. Namely hardening/optimizations. A libmultiprocess built in depends wouldn't get the same build flags as it would if it were building from our project. So yes, while the leakiness of the subdirectory approach is annoying (see leveldb/crc32c for example, we completely ignore their CMake files), it also has its benefits.\r\n\r\nI can see this both ways. My inclination was that if you want flags to apply to a library you should just pass them to the library because, this broke the libmultiprocess build earlier and forced me to add [a workaround](https://github.com/chaincodelabs/libmultiprocess/blob/07c917f7ca910d66abc6d3873162fc9061704074/CMakeLists.txt#L34-L37). But I could imagine other cases where leaking flags are more helpful.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2620013263",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2620090133,
      "node_id": "IC_kwDOABII586cK2cV",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2620090133",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-28T21:27:19Z",
      "updated_at": "2025-01-29T02:38:30Z",
      "author_association": "CONTRIBUTOR",
      "body": "Few other things I wanted to reply to.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2619837571\r\n\r\n> Correct. Even if it's not desirable to check these into master, it would be _very_ useful to have them in release branches so that they end up in release tarballs. It's very common for source packages to be pre-bootstrapped, and that's exactly what this would do.\r\n\r\nThis is just a gut reaction, but as a long-time gentoo and nixos user, this sounds pretty bad to me. I'd want my package manager to build from human readable source code, not from pregenerated files that require a bespoke process to verify and won't be verified in practice. Maybe human readable source isn't enough either, and there are no good solutions, but if you are relying \"pre-bootstrapped\" files for convenience, it seems like you just asking for another xz backdoor to happen. (I don't remember the details there but the wikipedia [article](https://en.wikipedia.org/wiki/XZ_Utils_backdoor) says \"A modified version of build-to-host.m4 was included in the release tar file uploaded on GitHub\" which sounds exactly the the type of build cruft I would like my package manager to not trust and not use.)\r\n\r\n> Consider how much simpler this would be for builders/packagers (who don't use depends) to build cross packages.\r\n\r\nI don't have much experience with cross compiling package managers other than working a little with nix, the depends system, and buildroot a long time ago, but I don't think having pregenerated headers would simplify any of these systems. \r\n\r\nGenerated code from protobufs, flex, bison, and many other tools are commonly used, it is common to not check generated sources into git repositories, which all of these systems support in some fashion. Even in our own depends system, running native packages is not anything special and at the time I started working with it there were actually [7 other native packages](https://github.com/bitcoin/bitcoin/blob/d6306466626635e6fee44385e6a688c8dc118eb5/depends/packages) besides the two I added.\r\n\r\nI could be wrong on this point. Maybe there really are cross compiled packages that could be simplified by using pregenerated sources. But I'd want to see some actual example of that before accepting this was the case.\r\n\r\n> Capnproto does not allow mixing headers generated by one version with the library of another version, and it has an explicit preprocessor check to prevent this.\r\n> \r\n> I think we would want to enforce this anyway?\r\n\r\nWe might be saying different things here. I am saying if we check generated headers into the git development branch and they are used by default, then every revision in our git repository is hardcoded to a particular version of capnproto. You couldn't for example check out code from 3 months ago while having capnproto 1.1 installed your system, you would have to downgrade to 1.02.\r\n\r\n> One of the rules we decided on for CMake is \"newer build-side tools should never lead to different/better code\". For example, A newer version of CMake should produce the same code as an older one. If newer versions of capnproto produce materially different code, I think we'd want force a pinning (for everyone) to whatever we're using in guix, no?\r\n\r\nI can't think of what benefits that may provide. Capnproto is very backwards compatible, it just doesn't want you to use old generated headers and new library headers together or vice versa because the static code and generated code work together internally and there is not some public interface between them. If you just build from source, everything works perfectly well, but if you check pregenerated headers into git and try to use them you will have headaches. Maybe the headaches could be worth it. I don't have the answer to that.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2620090133",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "reviewed",
      "id": 2580677561,
      "node_id": "PRR_kwDOABII586Z0gO5",
      "url": null,
      "actor": null,
      "commit_id": "01452f8c0da58db549bc46d0cfa7de715344efc4",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2580677561",
      "submitted_at": "2025-01-29T10:58:25Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
    },
    {
      "event": "commented",
      "id": 2621465199,
      "node_id": "IC_kwDOABII586cQGJv",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621465199",
      "actor": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T12:07:57Z",
      "updated_at": "2025-01-29T12:07:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "As an alternative to reaching into depends or committing generated files, could it be feasible to set native compilers in the toolchain file instead for compiling the code generators?",
      "user": {
        "login": "TheCharlatan",
        "id": 8421793,
        "node_id": "MDQ6VXNlcjg0MjE3OTM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/8421793?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/TheCharlatan",
        "html_url": "https://github.com/TheCharlatan",
        "followers_url": "https://api.github.com/users/TheCharlatan/followers",
        "following_url": "https://api.github.com/users/TheCharlatan/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/TheCharlatan/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/TheCharlatan/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/TheCharlatan/subscriptions",
        "organizations_url": "https://api.github.com/users/TheCharlatan/orgs",
        "repos_url": "https://api.github.com/users/TheCharlatan/repos",
        "events_url": "https://api.github.com/users/TheCharlatan/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/TheCharlatan/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621465199",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDVhNmQxZmViMmQyMzAzMTIzOTczOWQzNzE0MmRjZWIyMGY1OGE2MTY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a6d1feb2d23031239739d37142dceb20f58a616",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/5a6d1feb2d23031239739d37142dceb20f58a616",
      "tree": {
        "sha": "3078791ddd6e5081852a5fe581f90b3a505de0f2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/3078791ddd6e5081852a5fe581f90b3a505de0f2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [],
      "message": "Squashed 'src/ipc/libmultiprocess/' content from commit 07c917f7ca91\n\ngit-subtree-dir: src/ipc/libmultiprocess\ngit-subtree-split: 07c917f7ca910d66abc6d3873162fc9061704074",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "sha": "5a6d1feb2d23031239739d37142dceb20f58a616"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGNkYmMzNmZjNjVjNmVlODYyNDVkMDY2ZGRlZmJiNWJmODY0M2NhYTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdbc36fc65c6ee86245d066ddefbb5bf8643caa5",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/cdbc36fc65c6ee86245d066ddefbb5bf8643caa5",
      "tree": {
        "sha": "0d9a28fbcc56198a57aac7a043a1e28d241f7fc1",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/0d9a28fbcc56198a57aac7a043a1e28d241f7fc1"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ad2f9324c619ae608c434ee85ad9ae1b2812877d",
          "sha": "ad2f9324c619ae608c434ee85ad9ae1b2812877d",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/ad2f9324c619ae608c434ee85ad9ae1b2812877d"
        },
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/5a6d1feb2d23031239739d37142dceb20f58a616",
          "sha": "5a6d1feb2d23031239739d37142dceb20f58a616",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/5a6d1feb2d23031239739d37142dceb20f58a616"
        }
      ],
      "message": "Merge commit '5a6d1feb2d23031239739d37142dceb20f58a616' as 'src/ipc/libmultiprocess'",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "sha": "cdbc36fc65c6ee86245d066ddefbb5bf8643caa5"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGYyM2MzYzQ3ZWU0ZGI2ZmIwZWU2YTRiNDM3OGEyNzM0ZmQ5NWZiMDM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03",
      "tree": {
        "sha": "2de361214964b7313e399b80f507f3da738da223",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/2de361214964b7313e399b80f507f3da738da223"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/cdbc36fc65c6ee86245d066ddefbb5bf8643caa5",
          "sha": "cdbc36fc65c6ee86245d066ddefbb5bf8643caa5",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/cdbc36fc65c6ee86245d066ddefbb5bf8643caa5"
        }
      ],
      "message": "depends, moveonly: split up int_get_build_id function\n\nMove parts of the int_get_build_id into a new int_get_build_properties\nfunction. There is no change in behavior. This just organizes assignments\nbetter so some build properties can be used to help compute build ids in the\nnext commit.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-25T18:29:42Z"
      },
      "sha": "f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDE5ZWVmOTczY2I0YWUzN2QyMDJjOWY1ODRiNmVkOTEzNDgyYWFiNGE",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19eef973cb4ae37d202c9f584b6ed913482aab4a",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/19eef973cb4ae37d202c9f584b6ed913482aab4a",
      "tree": {
        "sha": "34d71de8791b53071616ffc848f9aca7f7eadf6b",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/34d71de8791b53071616ffc848f9aca7f7eadf6b"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03",
          "sha": "f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03"
        }
      ],
      "message": "depends: Switch libmultiprocess packages to use local git subtree\n\nWith newly introduced libmultiprocess subtree, there's no need for depends\nsystem to download and track changes to the upstream repository.\n\nNote that adding the libmultiprocess subtree does not allow dropping\nlibmultiprocess packages from the depends build, because libmultiprocess\nincludes a code generation tool called mpgen, and in cross-compiled builds,\nbitcoin core's cmake build system doesn't have access to a native toolchain and\ncan't build mpgen itself, so the depends system (or the native environment if\nnot using depends) needs to supply it.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-25T18:33:44Z"
      },
      "sha": "19eef973cb4ae37d202c9f584b6ed913482aab4a"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDM2ZGIyNWYwYmNhYWI2YWY5MzU4ZmFhYWQ5MjE0ZDViNzdhNzFjYjI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/36db25f0bcaab6af9358faaad9214d5b77a71cb2",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/36db25f0bcaab6af9358faaad9214d5b77a71cb2",
      "tree": {
        "sha": "ba30d4b2a5cb59346f54ae3f137be54221da9b46",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/ba30d4b2a5cb59346f54ae3f137be54221da9b46"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/19eef973cb4ae37d202c9f584b6ed913482aab4a",
          "sha": "19eef973cb4ae37d202c9f584b6ed913482aab4a",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/19eef973cb4ae37d202c9f584b6ed913482aab4a"
        }
      ],
      "message": "cmake: Support building with libmultiprocess subtree\n\nReplace existing WITH_MULTIPROCESS build option which searches for an external\nlibmultiprocess installation and enables building multiprocess binaries option\nwith new, separate BUILD_MULTIPROCESS and WITH_LIBMULTIPROCESS options.\n\nThe BUILD_MULTIPROCESS option controls whether new multiprocess binaries\nbitcoin-node and bitcoin-gui will be built.\n\nThe WITH_LIBMULTIPROCESS option controls whether to search for an external\nlibmultiprocess install. If it is true, the external install will be used,\notherwise the local git subtree src/ipc/libmultiprocess subtree will be used.\nThis option does not usually need to be used except when cross-compiling.",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T18:12:23Z"
      },
      "sha": "36db25f0bcaab6af9358faaad9214d5b77a71cb2"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKDBiNGNhNWQ3MjUxMGY0NmNlNmMyYjg0OTMzMmE4ZjcwZWIxNGM2OWI",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b4ca5d72510f46ce6c2b849332a8f70eb14c69b",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/0b4ca5d72510f46ce6c2b849332a8f70eb14c69b",
      "tree": {
        "sha": "dc24a28537524de88ef9468cd54305560823a4a2",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/dc24a28537524de88ef9468cd54305560823a4a2"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/36db25f0bcaab6af9358faaad9214d5b77a71cb2",
          "sha": "36db25f0bcaab6af9358faaad9214d5b77a71cb2",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/36db25f0bcaab6af9358faaad9214d5b77a71cb2"
        }
      ],
      "message": "doc: Update documentation to explain BUILD_MULTIPROCESS",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-26T18:12:23Z"
      },
      "sha": "0b4ca5d72510f46ce6c2b849332a8f70eb14c69b"
    },
    {
      "event": "committed",
      "id": null,
      "node_id": "C_kwDOABII59oAKGFiMDQxOTM3Mjg5ZjQ5Mzk3NThjMTg5NmY1Y2I1N2Y1NTZhZTA2MTU",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/ab041937289f4939758c1896f5cb57f556ae0615",
      "actor": null,
      "commit_id": null,
      "commit_url": null,
      "created_at": null,
      "html_url": "https://github.com/bitcoin/bitcoin/commit/ab041937289f4939758c1896f5cb57f556ae0615",
      "tree": {
        "sha": "106171c373e8c01a6b24bcb7bc5a5ed21ef56604",
        "url": "https://api.github.com/repos/bitcoin/bitcoin/git/trees/106171c373e8c01a6b24bcb7bc5a5ed21ef56604"
      },
      "verification": {
        "verified": false,
        "reason": "unsigned",
        "payload": null,
        "signature": null
      },
      "parents": [
        {
          "url": "https://api.github.com/repos/bitcoin/bitcoin/git/commits/0b4ca5d72510f46ce6c2b849332a8f70eb14c69b",
          "sha": "0b4ca5d72510f46ce6c2b849332a8f70eb14c69b",
          "html_url": "https://github.com/bitcoin/bitcoin/commit/0b4ca5d72510f46ce6c2b849332a8f70eb14c69b"
        }
      ],
      "message": "lint: Add exclusions for libmultiprocess subtree\n\nWithout this change linter produces errors about:\n\n- Use of std::filesystem the libmultiprocess example program.\n- Use of locale-dependent functions in example program, in the build time code\n  generator, and in the runtime library for debug logging.\n- Include guards not beginning with BITCOIN_",
      "committer": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-29T12:10:23Z"
      },
      "author": {
        "name": "Ryan Ofsky",
        "email": "ryan@ofsky.org",
        "date": "2025-01-27T18:34:49Z"
      },
      "sha": "ab041937289f4939758c1896f5cb57f556ae0615"
    },
    {
      "event": "referenced",
      "id": 16107003798,
      "node_id": "REFE_lADOABII586nsxBLzwAAAAPADV-W",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16107003798",
      "actor": {
        "login": "fanquake",
        "id": 863730,
        "node_id": "MDQ6VXNlcjg2MzczMA==",
        "avatar_url": "https://avatars.githubusercontent.com/u/863730?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/fanquake",
        "html_url": "https://github.com/fanquake",
        "followers_url": "https://api.github.com/users/fanquake/followers",
        "following_url": "https://api.github.com/users/fanquake/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/fanquake/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/fanquake/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/fanquake/subscriptions",
        "organizations_url": "https://api.github.com/users/fanquake/orgs",
        "repos_url": "https://api.github.com/users/fanquake/repos",
        "events_url": "https://api.github.com/users/fanquake/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/fanquake/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ad2f9324c619ae608c434ee85ad9ae1b2812877d",
      "commit_url": "https://api.github.com/repos/bitcoin/bitcoin/commits/ad2f9324c619ae608c434ee85ad9ae1b2812877d",
      "created_at": "2025-01-29T12:10:32Z"
    },
    {
      "event": "commented",
      "id": 2621519226,
      "node_id": "IC_kwDOABII586cQTV6",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621519226",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T12:33:44Z",
      "updated_at": "2025-01-29T12:33:44Z",
      "author_association": "MEMBER",
      "body": "Concept ACK.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621519226",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "head_ref_force_pushed",
      "id": 16108365154,
      "node_id": "HRFPE_lADOABII586nsxBLzwAAAAPAIiVi",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16108365154",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "commit_url": "https://api.github.com/repos/ryanofsky/bitcoin/commits/ab041937289f4939758c1896f5cb57f556ae0615",
      "created_at": "2025-01-29T13:48:35Z"
    },
    {
      "event": "ready_for_review",
      "id": 16108398397,
      "node_id": "RFRE_lADOABII586nsxBLzwAAAAPAIqc9",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16108398397",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T13:50:34Z"
    },
    {
      "event": "commented",
      "id": 2621793644,
      "node_id": "IC_kwDOABII586cRWVs",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621793644",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T14:21:43Z",
      "updated_at": "2025-01-29T14:21:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "Rebased 93ba80b3d78fa1c4e7f614df6517b9cb492d05d7 -> ab041937289f4939758c1896f5cb57f556ae0615 ([`pr/subtree.3`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.3) -> [`pr/subtree.4`](https://github.com/ryanofsky/bitcoin/commits/pr/subtree.4), [compare](https://github.com/ryanofsky/bitcoin/compare/pr/subtree.3-rebase..pr/subtree.4)) after base pr was merged, also updated documentation as suggested, and fixed compatibility with gnu make 3.81 and bsd tar.\r\n\r\n---\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2577588200\r\n\r\n> It would be good to remind people in the PR description how one verifies a subtree\r\n\r\nThanks! Added your notes about this.\r\n\r\n> It would be good to have an additional CI machine cover multiprocess, using the non-depends `-DBUILD_MULTIPROCESS=1` and with `BITCOIND=bitcoin-node`. For easy rebasing in #30975, `ci/test/00_setup_env_mac_native.sh` would have my preference.\r\n\r\nI feel like CI change should be a separate PR because there is already a lot to review and discuss here, but let me know if you think this would be important to include.\r\n\r\nThe other followup change I hope we can make soon is turning the cmake option on by default\r\n\r\n```diff\r\n-option(BUILD_MULTIPROCESS \"Build multiprocess bitcoin-node and bitcoin-gui executables in addition to monolithic bitcoind and bitcoin-qt executables. Requires libmultiprocess library. Experimental.\" OFF)\r\n+cmake_dependent_option(BUILD_MULTIPROCESS \"Build multiprocess bitcoin-node and bitcoin-gui executables in addition to monolithic bitcoind and bitcoin-qt executables.\" ON \"NOT WIN32\" OFF)\r\n```\r\n\r\n---\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621465199\r\n\r\n> As an alternative to reaching into depends or committing generated files, could it be feasible to set native compilers in the toolchain file instead for compiling the code generators?\r\n\r\nIt might be technically possible. When I was looking to implement this I read a bunch of things about people using [`ExternalProject_Add`](https://cmake.org/cmake/help/latest/module/ExternalProject.html) to juggle multiple toolchains in cmake. But it looked very messy and seemed like cmake wasn't designed to handle multiple toolchains. Luckily, we have system that is great at handling multiple toolchains called depends (and other package managers also support this). So with a simple, clean change to depends to support local directories, cross compiling the subtree is easy and works well. \r\n\r\nWith some additional work implementing Cory's EXTERNAL_MPGEN option, add_subdirectory could be used instead of depends to build the library (not the code generator). This way cmake could be used to control libmultiprocess compile flags even in depends builds, if we want that.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621793644",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2621866270,
      "node_id": "IC_kwDOABII586cRoEe",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621866270",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T14:49:44Z",
      "updated_at": "2025-01-29T14:49:44Z",
      "author_association": "MEMBER",
      "body": "> With some additional work implementing Cory's EXTERNAL_MPGEN option, add_subdirectory could be used instead of depends to build the library (not the code generator). This way cmake could be used to control libmultiprocess compile flags even in depends builds, if we want that.\r\n\r\nI have this hacked up to work, though I'm still investigating some subdirectory leakage (ugh) that I don't quite understand. I pretty strongly prefer this approach as it means everyone's compiling in-tree. I'll try to get a minimal POC pushed up today.\r\n\r\nAs I mentioned above, that means we get all of our hardening/warning flags. My current hacked-up branch is full of warnings that would've gone unnoticed otherwise. They appear harmless, but still..",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621866270",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2621909172,
      "node_id": "IC_kwDOABII586cRyi0",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621909172",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T15:04:42Z",
      "updated_at": "2025-01-29T15:04:42Z",
      "author_association": "MEMBER",
      "body": "> I feel like CI change should be a separate PR because there is already a lot to review and discuss here, but let me know if you think this would be important to include.\r\n\r\nI'll be testing this with #30975 so we'll get some CI runs regardless.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621909172",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2621916864,
      "node_id": "IC_kwDOABII586cR0bA",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621916864",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T15:07:06Z",
      "updated_at": "2025-01-29T15:07:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621866270\r\n\r\n@theuni can the change your are working on be a followup? It doesn't seem like this change will have any effect for developers unless they are using depends for development which I think few do normally. And even then the main effect is that the library is built with cmake flags instead of depends flags. The change would also increase complexity (would only increase not decrease changes in this PR) and would be easier to review and discuss separately.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621916864",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16109625368,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAPANWAY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16109625368",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T15:07:09Z"
    },
    {
      "event": "subscribed",
      "id": 16109625420,
      "node_id": "SE_lADOABII586nsxBLzwAAAAPANWBM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16109625420",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T15:07:09Z"
    },
    {
      "event": "commented",
      "id": 2621965610,
      "node_id": "IC_kwDOABII586cSAUq",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2621965610",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T15:26:29Z",
      "updated_at": "2025-01-29T15:26:29Z",
      "author_association": "MEMBER",
      "body": "I'm now able to build depends with `make MULTIPROCES=1` on macOS without using the gnu versions.\r\n\r\nHowever when using the result cmake complains about OpenSSL missing:\r\n\r\n```\r\n% cmake -B build --toolchain /Users/sjors/dev/bitcoin/depends/aarch64-apple-darwin24.3.0/toolchain.cmake \r\n-- The CXX compiler identification is AppleClang 16.0.0.16000026\r\n-- Detecting CXX compiler ABI info\r\n-- Detecting CXX compiler ABI info - done\r\n-- Check for working CXX compiler: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang++ - skipped\r\n-- Detecting CXX compile features\r\n-- Detecting CXX compile features - done\r\nCMake Error at /opt/homebrew/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:233 (message):\r\n  Could NOT find OpenSSL, try to set the path to OpenSSL root folder in the\r\n  system variable OPENSSL_ROOT_DIR (missing: OPENSSL_CRYPTO_LIBRARY\r\n  OPENSSL_INCLUDE_DIR Crypto SSL)\r\nCall Stack (most recent call first):\r\n  /opt/homebrew/share/cmake/Modules/FindPackageHandleStandardArgs.cmake:603 (_FPHSA_FAILURE_MESSAGE)\r\n  /opt/homebrew/share/cmake/Modules/FindOpenSSL.cmake:691 (find_package_handle_standard_args)\r\n  /opt/homebrew/share/cmake/Modules/CMakeFindDependencyMacro.cmake:76 (find_package)\r\n  depends/aarch64-apple-darwin24.3.0/lib/cmake/CapnProto/CapnProtoConfig.cmake:85 (find_dependency)\r\n  /opt/homebrew/share/cmake/Modules/CMakeFindDependencyMacro.cmake:76 (find_package)\r\n  depends/aarch64-apple-darwin24.3.0/lib/cmake/Libmultiprocess/LibmultiprocessConfig.cmake:41 (find_dependency)\r\n  CMakeLists.txt:147 (find_package)\r\n\r\n\r\n-- Configuring incomplete, errors occurred!\r\n```\r\n\r\nIt does work when I build depends with GNU Make 4.4.1 (via homebrew), so there's some other subtle detail left to chase...\r\n\r\nVerbose log with Apple GNU Make 3.81: https://gist.githubusercontent.com/Sjors/29733993ac2ef470611911d69f842095/raw/7a8d653562e34f90af0285ec858d028e1f479b1c/gistfile1.txt\r\n\r\nAnd cmake --trace: https://gist.github.com/Sjors/e9c7e7e45e0bb2a627c9c52fc4a9caf8",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2621965610",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "reviewed",
      "id": 2581532869,
      "node_id": "PRR_kwDOABII586Z3xDF",
      "url": null,
      "actor": null,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "commit_url": null,
      "created_at": null,
      "author_association": "CONTRIBUTOR",
      "body": "Concept ACK",
      "user": {
        "login": "BrandonOdiwuor",
        "id": 15610188,
        "node_id": "MDQ6VXNlcjE1NjEwMTg4",
        "avatar_url": "https://avatars.githubusercontent.com/u/15610188?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/BrandonOdiwuor",
        "html_url": "https://github.com/BrandonOdiwuor",
        "followers_url": "https://api.github.com/users/BrandonOdiwuor/followers",
        "following_url": "https://api.github.com/users/BrandonOdiwuor/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/BrandonOdiwuor/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/BrandonOdiwuor/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/BrandonOdiwuor/subscriptions",
        "organizations_url": "https://api.github.com/users/BrandonOdiwuor/orgs",
        "repos_url": "https://api.github.com/users/BrandonOdiwuor/repos",
        "events_url": "https://api.github.com/users/BrandonOdiwuor/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/BrandonOdiwuor/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2581532869",
      "submitted_at": "2025-01-29T16:07:42Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
    },
    {
      "event": "commented",
      "id": 2622111651,
      "node_id": "IC_kwDOABII586cSj-j",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2622111651",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T16:23:29Z",
      "updated_at": "2025-01-29T16:23:29Z",
      "author_association": "CONTRIBUTOR",
      "body": "> However when using the result cmake complains about OpenSSL missing:\r\n\r\nOpenssh issue you are seeing is puzzling because I don't know what change here could cause it, and I wonder if you see the same error without this PR? When you are building with depends capnproto is built without ssl support should should not be looking for ssl at all.\r\n\r\nIf you are not seeing this issue happen before this PR, but are seeing this issue happen after this PR, I think it would probably most likely be the changes in commit 36db25f0bcaab6af9358faaad9214d5b77a71cb2 and you could try to revert that commit. I don't think any of the other commits could cause it because they don't touch the cmake build.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2622111651",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2622173341,
      "node_id": "IC_kwDOABII586cSzCd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2622173341",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-29T16:46:49Z",
      "updated_at": "2025-01-29T16:46:49Z",
      "author_association": "MEMBER",
      "body": "> wonder if you see the same error without this PR?\r\n\r\nI tried with master @ ad2f9324c619ae608c434ee85ad9ae1b2812877d and indeed got the same error. So it seems unrelated.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2622173341",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2623803509,
      "node_id": "IC_kwDOABII586cZBB1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2623803509",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T08:11:07Z",
      "updated_at": "2025-01-30T08:11:24Z",
      "author_association": "MEMBER",
      "body": "I found several (build) issues while unleashing the CI on these changes: https://github.com/bitcoin/bitcoin/pull/30975#issuecomment-2623801480\r\n\r\nLet me know which ones you want to address here, and which can be dealt with later.",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2623803509",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2624277683,
      "node_id": "IC_kwDOABII586ca0yz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2624277683",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-30T11:50:14Z",
      "updated_at": "2025-01-30T11:50:59Z",
      "author_association": "MEMBER",
      "body": "If I cherry-pick #31763 on top of this, I'm unable to make a Guix build with multiprocess, at least not with the hosts I tried (`x86_64-linux-gnu`, `aarch64-linux-gnu` and `arm64-apple-darwin`).\r\n\r\n```\r\n% DEP_OPTS=\"MULTIPROCESS=1\" HOSTS=\"x86_64-linux-gnu\" contrib/guix/guix-build\r\nChecking that we can connect to the guix-daemon...\r\n\r\nHint: If this hangs, you may want to try turning your guix-daemon off and on\r\n      again.\r\n\r\nmake: Entering directory '/home/sjors/bitcoin/depends'\r\nmake[1]: Entering directory '/home/sjors/bitcoin/depends'\r\nChecksum missing or mismatched for native_libmultiprocess source. Forcing re-download.\r\nFetching from\r\ncurl: (3) URL rejected: No host part in the URL\r\nFetching from https://bitcoincore.org/depends-sources\r\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\r\n                                 Dload  Upload   Total   Spent    Left  Speed\r\n  0  308k    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\r\ncurl: (22) The requested URL returned error: 403\r\nmake[1]: *** [funcs.mk:320: /home/sjors/bitcoin/depends/sources/download-stamps/.stamp_fetched-native_libmultiprocess-.hash] Error 22\r\nmake[1]: Leaving directory '/home/sjors/bitcoin/depends'\r\nmake: *** [Makefile:282: download-linux] Error 2\r\nmake: Leaving directory '/home/sjors/bitcoin/depends'\r\n````\r\n\r\n(it does work on master)",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2624277683",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2627790028,
      "node_id": "IC_kwDOABII586coOTM",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2627790028",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T16:47:41Z",
      "updated_at": "2025-01-31T18:29:23Z",
      "author_association": "MEMBER",
      "body": "#30975 now passes, using a bunch of patches that will make their way here.\r\n\r\nOne of those patches fixes the above guix build issue too (no, it doesn't, will try again later).",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2627790028",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2627938830,
      "node_id": "IC_kwDOABII586coyoO",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2627938830",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T17:50:18Z",
      "updated_at": "2025-01-31T17:50:53Z",
      "author_association": "MEMBER",
      "body": "> @theuni can the change your are working on be a followup? It doesn't seem like this change will have any effect for developers unless they are using depends for development which I think few do normally. And even then the main effect is that the library is built with cmake flags instead of depends flags. The change would also increase complexity (would only increase not decrease changes in this PR) and would be easier to review and discuss separately.\r\n\r\nSorry, I just don't think this makes sense. The PR here is to include a vendored multiprocess, but it includes a circuitous and unnecessary way of building it for cross/depends that is unnecessary after a few upstream changes. https://github.com/chaincodelabs/libmultiprocess/pull/142 and https://github.com/chaincodelabs/libmultiprocess/pull/140 are enough to enable a _much_ simpler and unified approach for us.\r\n\r\nDevs use depends (I use nothing BUT depends), ci uses depends, and guix uses depends. So I don't know why we'd work on an approach here that we plan to change significantly later, as opposed to just fixing it up and using the simpler approach to begin with.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2627938830",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16143833973,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAPCP1t1",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16143833973",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T17:50:19Z"
    },
    {
      "event": "subscribed",
      "id": 16143833993,
      "node_id": "SE_lADOABII586nsxBLzwAAAAPCP1uJ",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16143833993",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T17:50:19Z"
    },
    {
      "event": "commented",
      "id": 2628025117,
      "node_id": "IC_kwDOABII586cpHsd",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628025117",
      "actor": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T18:18:57Z",
      "updated_at": "2025-01-31T18:18:57Z",
      "author_association": "MEMBER",
      "body": "> enable a much simpler and unified approach\r\n\r\nThis sounds appealing...",
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628025117",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628029322,
      "node_id": "IC_kwDOABII586cpIuK",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628029322",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T18:21:33Z",
      "updated_at": "2025-01-31T18:22:24Z",
      "author_association": "CONTRIBUTOR",
      "body": "> So I don't know why we'd work on an approach here that we plan to change significantly later, as opposed to just fixing it up and using the simpler approach to begin with.\r\n\r\nI might be misunderstanding but from everything I've seen, the change you are implementing is a superset of this change. That is why I am suggesting it could be a followup. No part of this change would be reverted or simplified by the additional work you are doing so it is a natural follow-up.\r\n\r\nI don't think devs are typically using depends when building locally, but if they are, this PR supports that perfectly well. The only significant differences with your additional change is that flags will be shared between the Bitcoin and libmultiprocess cmake builds, instead of being specified separately for each build. But separate flags are perfectly fine (obviously) because the flags have been separate since the libmultiprocess was originally added to depends in 2019. Again, as I understand it, your change is a superset of my change. It is builds on top of this change. It does not undo things being done in this change.\r\n\r\nSpecifically, my changes (f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03, f23c3c47ee4db6fb0ee6a4b4378a2734fd95fb03, 19eef973cb4ae37d202c9f584b6ed913482aab4a, 36db25f0bcaab6af9358faaad9214d5b77a71cb2, ab041937289f4939758c1896f5cb57f556ae0615) are all pretty small. If your changes are also small, **I am happy to add them here when they are ready**. Otherwise, I think they should be a followup. Either way they definitely could be a followup.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628029322",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628041793,
      "node_id": "IC_kwDOABII586cpLxB",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628041793",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T18:29:43Z",
      "updated_at": "2025-01-31T18:29:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > enable a much simpler and unified approach\r\n> \r\n> This sounds appealing...\r\n\r\nTo be sure, it is good change, and should be adopted. But unless you are using depends locally it will not affect you at all, and even if you are using depends locally it's just gives some minor quality-of-life improvements, such as you only have to run one make command instead of two if you modify the libmultiprocess subtree locally, and you only have to change flags one place instead of two places if you are changing flags and care whether the flags are apply to libmultiprocess runtime library.\r\n\r\nI don't these things are worth holding up this PR significantly or making this PR significantly more complicated, but assuming the proposed changes work well and are reasonably small, we should totally add them here.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628041793",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628042227,
      "node_id": "IC_kwDOABII586cpL3z",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628042227",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T18:30:00Z",
      "updated_at": "2025-01-31T18:30:31Z",
      "author_association": "MEMBER",
      "body": "I think we do have some miscommunication going on, because yes, I don't think we're understanding each other.\r\n\r\nI'm suggesting that the `WITH_LIBMULTIPROCESS` option can go away entirely. That means that there are no longer 2 ways to build the multiprocess code. Meaning that everyone gets the same build, same flags, etc. No need to pass tsan for tsan builds, for example. It will just work.\r\n\r\n> The only significant differences with your additional change is that flags will be shared between the Bitcoin and libmultiprocess cmake builds, instead of being specified separately for each build. But separate flags are perfectly fine (obviously) because the flags have been separate since the libmultiprocess was originally added to depends in 2019.\r\n\r\nThis is _the point_ of vendoring the code heh. I don't want to review what tidy/ci thinks of this until I'm comfortable knowing that we're all (including CI and guix) building the same way.\r\n\r\n> Again, as I understand it, your change is a superset of my change. It is builds on top of this change. It does not undo things being done in this change.\r\n\r\nAgain, I'm suggesting that we would get rid of one of the weird build mechanisms here.. never add it in the first place because it's unnecessary. I don't see how that could be described as a superset, so I think we must be talking past each other :(",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628042227",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628060836,
      "node_id": "IC_kwDOABII586cpQak",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628060836",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T18:41:55Z",
      "updated_at": "2025-01-31T18:54:28Z",
      "author_association": "MEMBER",
      "body": "> To be sure, it is good change, and should be adopted. But unless you are using depends locally it will not affect you at all, and even if you are using depends locally it's just gives some minor quality-of-life improvements, such as you only have to run one make command instead of two if you modify the libmultiprocess subtree locally, and you only have to change flags one place instead of two places if you are changing flags and care whether the flags are apply to libmultiprocess runtime library.\r\n\r\nAmong other things, libmultiprocess as-built here is not hardened. When we (the build nerds) asked to have it vendored, we're asking for it to get the same treatment as the rest of our code. This PR was opened to do the logistical code movement, but it doesn't demonstrate the _benefits_ of living within our source tree. And further, it gets built differently depending on whether you're a dev doing local hacking, or ci, or doing a release.\r\n\r\nSo I'm sorry, but I don't want to spend time reviewing that approach. Especially when it's so easily avoidable. I don't consider this to be in a state to be merged until those benefits can be demonstrated. I'm really trying to help with that though! :)\r\n\r\nEdit: See https://github.com/chaincodelabs/libmultiprocess/pull/143 as an example of a benefit of building like the rest of our code. In that case it's dumb and trivial, but we're likely to find (or guard against) _actual_ issues by building this way across the board.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628060836",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628139870,
      "node_id": "IC_kwDOABII586cpjte",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628139870",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T19:27:51Z",
      "updated_at": "2025-01-31T19:27:51Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I'm suggesting that the `WITH_LIBMULTIPROCESS` option can go away entirely.\r\n\r\nIf you look at the PR, you can see that `WITH_LIBMULTIPROCESS` option adds 5 lines of code and 2 of them are `endif()`. So I wouldn't consider that a real coup. Also I don't think `WITH_LIBMULTIPROCESS` should be dropped just because depends will not use it, because having it makes it easier to develop and submit changes to the upstream repository, and makes sense to support other packaging systems (see https://github.com/NixOS/nixpkgs/issues/359902) that are more flexible and less monolithic than the depends system.\r\n\r\n> This is the point of vendoring the code heh.\r\n\r\nNo offense (really), but this strikes me as a crazy thing to say. I didn't open this PR and spend the last entire week fixing CI bugs because I was concerned setting compiler flags in the Bitcoin cmake build didn't automatically set the same flags in the libmultiprocess cmake build. Libmultiprocess has been using cmake since 2019, bitcoin just started using cmake last year, so the approach you are favoring literally only became possible a few months ago. I understand sharing compiler flags is a very important thing to you, and I think it is a nice idea, and I am happy to review or accept additional changes in this PR to support it. But libmultiprocess has had separate compiler flags for as long as it existed and since it was added as a depends package in 2019.\r\n\r\nI can't remember it ever happening to me, but probably, sometime over the last 5 years I did have to set some compiler flags in two builds instead of one. So it's great I may no longer have to do this. But this is a small quality of life issue in a corner case that will never affect developers unless they are trying to build in an unusual way, and requires a fairly obvious extra step if they are. It is a strange thing to fixate on. But again, I think it's great to share flags and would like to do that.\r\n\r\nThe **actual point of vendoring this code** as I wrote earlier in https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2620013263 is:\r\n\r\n> My main goal here is to make it trivial for developers to build multiprocess binaries by running \"apt install libcapnp-dev capnproto`and`-DBUILD_MULTIPROCESS=ON` and not having to do anything else. (At some point in a followup I would also like to change default to ON so even the latter is not necessary.) I also want the depends system to use the git subtree, so I am tweaking the depends system minimally to do that.\r\n\r\nThat is why this PR exists. That is why I've been working on it the past week.\r\n\r\nre: https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628060836\r\n\r\n> When we (the build nerds) asked to have it vendored, we're asking for it to get the same treatment as the rest of our code.\r\n\r\nThe phrasing here is ambiguous, but if you just wanted libmultiprocess to be compiled with the same flags, we could pass the same flags to depends, or specify the same flags in depends. Either of these approaches would be easier than adding a subtree.\r\n\r\n> https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628060836\r\n\r\n> Again, I'm suggesting that we would get rid of one of the weird build mechanisms here.. never add it in the first place because it's unnecessary.\r\n\r\nWhich one? We are definitely talking past each each other. I think the problem might be (1) your changes might be incomplete, so you think there are parts of this PR that are unnecessary when they are not (2) you haven't reviewed this PR so you think it is doing unnecessary things it is not doing or (3) which is very possible, that this PR is actually doing something unnecessary and your changes will simplify it. \r\n\r\nIn any case, I am looking forward to see your changes, and appreciate all the feedback and improvements you've made so far, which have been very helpful.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628139870",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628373528,
      "node_id": "IC_kwDOABII586cqcwY",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628373528",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T20:48:18Z",
      "updated_at": "2025-01-31T20:58:27Z",
      "author_association": "MEMBER",
      "body": "> Also I don't think `WITH_LIBMULTIPROCESS` should be dropped just because depends will not use it, because having it makes it easier to develop and submit changes to the upstream repository, and makes sense to support other packaging systems (see [NixOS/nixpkgs#359902](https://github.com/NixOS/nixpkgs/issues/359902)) that are more flexible and less monolithic than the depends system.\r\n\r\nPerhaps this is the source of our breakdown. I would consider this an anti-feature. Or AT LEAST, as you've been saying, one that can be added on top of the changes here once it's been discussed. We don't provide this option for secp or leveldb or crc32 or univalue or minisketch.\r\n\r\nAnyway, I've pushed a demo of my changes here: https://github.com/theuni/bitcoin/commits/libmultiprocess-vendor/\r\n\r\nThe internal libmultiprocess is now the only the option, and the non-native version has been removed from depends. \r\n\r\nIt contains https://github.com/chaincodelabs/libmultiprocess/pull/141, https://github.com/chaincodelabs/libmultiprocess/pull/142, and https://github.com/chaincodelabs/libmultiprocess/pull/143. I understand that 141 probably has a better solution and 142 hasn't been reviewed or acked yet.",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628373528",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "reviewed",
      "id": 2587869785,
      "node_id": "PRR_kwDOABII586aP8JZ",
      "url": null,
      "actor": null,
      "commit_id": "19eef973cb4ae37d202c9f584b6ed913482aab4a",
      "commit_url": null,
      "created_at": null,
      "author_association": "MEMBER",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#pullrequestreview-2587869785",
      "submitted_at": "2025-01-31T21:03:15Z",
      "state": "COMMENTED",
      "pull_request_url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
    },
    {
      "event": "commented",
      "id": 2628408316,
      "node_id": "IC_kwDOABII586cqlP8",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628408316",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T21:13:36Z",
      "updated_at": "2025-01-31T21:13:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I would consider this an anti-feature. Or AT LEAST, as you've been saying, one that can be added on top of the changes here once it's been discussed.\r\n\r\nWell, if it is an anti-feature, it is a 5 line anti-feature and I am happy to drop it here. If I do this though I will probably make a separate PR to add it later, because I think it will be painful to develop and test upstream libmultiprocess changes without it.\r\n\r\n> Anyway, I've pushed a demo of my changes here: https://github.com/theuni/bitcoin/commits/libmultiprocess-vendor/\r\n\r\nThanks, will take a look and incorporate it here.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628408316",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "commented",
      "id": 2628435688,
      "node_id": "IC_kwDOABII586cqr7o",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628435688",
      "actor": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T21:32:31Z",
      "updated_at": "2025-01-31T21:32:31Z",
      "author_association": "MEMBER",
      "body": "@ryanofsky Thanks.\r\n\r\nI think we might just have been disagreeing on the importance of a unified build for everyone for something that will presumably (in the future) become mission-critical. I can see how from your POV it might seems like I'm just being persnickety about flags, but to me it's about making sure we're being clear (internally and externally) about ownership/canon/etc... the flags were just illustrative (to me) of the lack of clarity there.\r\n\r\nThanks for your patience with me on this :)",
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628435688",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    },
    {
      "event": "mentioned",
      "id": 16145980403,
      "node_id": "MEE_lADOABII586nsxBLzwAAAAPCYBvz",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16145980403",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T21:32:32Z"
    },
    {
      "event": "subscribed",
      "id": 16145980414,
      "node_id": "SE_lADOABII586nsxBLzwAAAAPCYBv-",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/events/16145980414",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T21:32:32Z"
    },
    {
      "event": "commented",
      "id": 2628463063,
      "node_id": "IC_kwDOABII586cqynX",
      "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/comments/2628463063",
      "actor": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-01-31T21:53:27Z",
      "updated_at": "2025-01-31T21:53:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "> disagreeing on the importance of a unified build for everyone for something that will presumably (in the future) become mission-critical.\r\n\r\nI really don't think this is true. I think you have made number a lot of claims that sound great, don't stand up to scrutiny. I probably have too. These issues can be hard to reason about, so it's good that we are going through this exercise.\r\n\r\nBut I don't take security or hardening less seriously than anyone else, and I believe this approach has been 100% compatible with both.\r\n\r\nI was balking at the idea that the *main reason* for adding a subtree would to be add some hardening flags. There are much easier ways to add hardening flags, and much more important benefits to having a subtree.",
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#issuecomment-2628463063",
      "issue_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/31741"
    }
  ],
  "comments": [
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931807802",
      "pull_request_review_id": 2577588200,
      "id": 1931807802,
      "node_id": "PRRC_kwDOABII585zJQw6",
      "diff_hunk": "@@ -25,9 +27,9 @@ build/src/bitcoin-node -regtest -printtoconsole -debug=ipc\n BITCOIND=$(pwd)/build/src/bitcoin-node build/test/functional/test_runner.py\n ```\n \n-The `cmake` build will pick up settings and library locations from the depends directory, so there is no need to pass `-DWITH_MULTIPROCESS=ON` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n+The `cmake` build will pick up settings and library locations from the depends directory, so there is no need to pass `-DBUILD_MULTIPROCESS=ON` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n \n-Alternately, you can install [Cap'n Proto](https://capnproto.org/) and [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) packages on your system, and just run `cmake -B build -DWITH_MULTIPROCESS=ON` without using the depends system. The `cmake` build will be able to locate the installed packages via [pkg-config](https://www.freedesktop.org/wiki/Software/pkg-config/). See [Installation](https://github.com/chaincodelabs/libmultiprocess/blob/master/doc/install.md) section of the libmultiprocess readme for install steps. See [build-unix.md](build-unix.md) and [build-osx.md](build-osx.md) for information about installing dependencies in general.\n+When not using depends, the [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) library can optionally be installed as an external dependency and enabled with the `-DWITH_LIBMULTIPROCESS=ON` option. If this is disabled, a local git submodule will be used instead. See [Installation](https://github.com/chaincodelabs/libmultiprocess/blob/master/doc/install.md) section of the libmultiprocess documentation for install steps. Installing libmultiprocess externally is only necessary when cross-compiling (to provide a code generation binary that can run on the native system). It can also be useful when developing changes meant to be submitted upstream.",
      "path": "doc/multiprocess.md",
      "position": null,
      "original_position": 28,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "b8289e77aaa2478828caf7c91a59fc15c96fb187",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "b8289e77aaa2478828caf7c91a59fc15c96fb187: \"local git subtree\"\r\n\r\nI would first explain the default behavior, and then point out that `-DWITH_LIBMULTIPROCESS=ON` can be used to use a locally installed library instead.",
      "created_at": "2025-01-28T09:26:42Z",
      "updated_at": "2025-01-28T09:33:27Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1931807802",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1931807802"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933669516",
      "pull_request_review_id": 2580677561,
      "id": 1933669516,
      "node_id": "PRRC_kwDOABII585zQXSM",
      "diff_hunk": "@@ -39,8 +39,20 @@ define fetch_file\n       $(call fetch_file_inner,$(1),$(FALLBACK_DOWNLOAD_PATH),$(3),$(4),$(5))))\n endef\n \n+define int_get_local_dir\n+$(eval $(1)_sha256_hash:=$(shell\n+    if ! [ -f $($(1)_fetched) ] || [ $($(1)_fetched) -ot $($(1)_local_dir) ]; then \\\n+        mkdir -p $(dir $($(1)_fetched)); \\\n+        $(build_TAR) -c --sort=name --mtime=0 --owner=0 --group=0 --numeric-owner -f $($(1)_source) -C $($(1)_local_dir) . && \\",
      "path": "depends/funcs.mk",
      "position": null,
      "original_position": 8,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "01452f8c0da58db549bc46d0cfa7de715344efc4",
      "in_reply_to_id": null,
      "user": {
        "login": "Sjors",
        "id": 10217,
        "node_id": "MDQ6VXNlcjEwMjE3",
        "avatar_url": "https://avatars.githubusercontent.com/u/10217?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Sjors",
        "html_url": "https://github.com/Sjors",
        "followers_url": "https://api.github.com/users/Sjors/followers",
        "following_url": "https://api.github.com/users/Sjors/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/Sjors/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/Sjors/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/Sjors/subscriptions",
        "organizations_url": "https://api.github.com/users/Sjors/orgs",
        "repos_url": "https://api.github.com/users/Sjors/repos",
        "events_url": "https://api.github.com/users/Sjors/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/Sjors/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "01452f8c0da58db549bc46d0cfa7de715344efc4: the Apple version of tar doesn't have `--sort`, see https://github.com/chaincodelabs/libmultiprocess/issues/139#issuecomment-2621080394",
      "created_at": "2025-01-29T10:58:24Z",
      "updated_at": "2025-01-29T10:58:25Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1933669516",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933669516"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933926424",
      "pull_request_review_id": 2581114485,
      "id": 1933926424,
      "node_id": "PRRC_kwDOABII585zRWAY",
      "diff_hunk": "@@ -25,9 +27,9 @@ build/src/bitcoin-node -regtest -printtoconsole -debug=ipc\n BITCOIND=$(pwd)/build/src/bitcoin-node build/test/functional/test_runner.py\n ```\n \n-The `cmake` build will pick up settings and library locations from the depends directory, so there is no need to pass `-DWITH_MULTIPROCESS=ON` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n+The `cmake` build will pick up settings and library locations from the depends directory, so there is no need to pass `-DBUILD_MULTIPROCESS=ON` as a separate flag when using the depends system (it's controlled by the `MULTIPROCESS=1` option).\n \n-Alternately, you can install [Cap'n Proto](https://capnproto.org/) and [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) packages on your system, and just run `cmake -B build -DWITH_MULTIPROCESS=ON` without using the depends system. The `cmake` build will be able to locate the installed packages via [pkg-config](https://www.freedesktop.org/wiki/Software/pkg-config/). See [Installation](https://github.com/chaincodelabs/libmultiprocess/blob/master/doc/install.md) section of the libmultiprocess readme for install steps. See [build-unix.md](build-unix.md) and [build-osx.md](build-osx.md) for information about installing dependencies in general.\n+When not using depends, the [libmultiprocess](https://github.com/chaincodelabs/libmultiprocess) library can optionally be installed as an external dependency and enabled with the `-DWITH_LIBMULTIPROCESS=ON` option. If this is disabled, a local git submodule will be used instead. See [Installation](https://github.com/chaincodelabs/libmultiprocess/blob/master/doc/install.md) section of the libmultiprocess documentation for install steps. Installing libmultiprocess externally is only necessary when cross-compiling (to provide a code generation binary that can run on the native system). It can also be useful when developing changes meant to be submitted upstream.",
      "path": "doc/multiprocess.md",
      "position": null,
      "original_position": 28,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "b8289e77aaa2478828caf7c91a59fc15c96fb187",
      "in_reply_to_id": 1931807802,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1931807802\r\n\r\nThanks I reworked this and adding headings to separate the cases. I think base case here is that capnproto is the only external dependency and you install it with package manager on your system. A second comon option may be to use depends, so that is described second. The third option of installing libmultiprocess externally is last because I was thinking that might be less commonly done, but I'm not sure.",
      "created_at": "2025-01-29T13:54:57Z",
      "updated_at": "2025-01-31T21:22:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1933926424",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933926424"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 32,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933929575",
      "pull_request_review_id": 2581114485,
      "id": 1933929575,
      "node_id": "PRRC_kwDOABII585zRWxn",
      "diff_hunk": "@@ -39,8 +39,20 @@ define fetch_file\n       $(call fetch_file_inner,$(1),$(FALLBACK_DOWNLOAD_PATH),$(3),$(4),$(5))))\n endef\n \n+define int_get_local_dir\n+$(eval $(1)_sha256_hash:=$(shell\n+    if ! [ -f $($(1)_fetched) ] || [ $($(1)_fetched) -ot $($(1)_local_dir) ]; then \\\n+        mkdir -p $(dir $($(1)_fetched)); \\\n+        $(build_TAR) -c --sort=name --mtime=0 --owner=0 --group=0 --numeric-owner -f $($(1)_source) -C $($(1)_local_dir) . && \\",
      "path": "depends/funcs.mk",
      "position": null,
      "original_position": 8,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "01452f8c0da58db549bc46d0cfa7de715344efc4",
      "in_reply_to_id": 1933669516,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "re: https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1933669516\r\n\r\n> [01452f8](https://github.com/bitcoin/bitcoin/commit/01452f8c0da58db549bc46d0cfa7de715344efc4): the Apple version of tar doesn't have `--sort`, see [chaincodelabs/libmultiprocess#139 (comment)](https://github.com/chaincodelabs/libmultiprocess/issues/139#issuecomment-2621080394)\r\n\r\nThanks, this is dropped\r\n",
      "created_at": "2025-01-29T13:56:52Z",
      "updated_at": "2025-01-31T21:22:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1933929575",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1933929575"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": null,
      "original_line": 46,
      "side": "RIGHT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1937978920",
      "pull_request_review_id": 2587869785,
      "id": 1937978920,
      "node_id": "PRRC_kwDOABII585zgzYo",
      "diff_hunk": "@@ -1,8 +1,5 @@\n package=native_libmultiprocess\n-$(package)_version=07c917f7ca910d66abc6d3873162fc9061704074\n-$(package)_download_path=https://github.com/chaincodelabs/libmultiprocess/archive\n-$(package)_file_name=$($(package)_version).tar.gz\n-$(package)_sha256_hash=ac9db311e3b22aac3c7b7b7b3f6b7fee5cf3043ebb3c3bf412049e8b17166de8",
      "path": "depends/packages/native_libmultiprocess.mk",
      "position": 5,
      "original_position": 5,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "19eef973cb4ae37d202c9f584b6ed913482aab4a",
      "in_reply_to_id": null,
      "user": {
        "login": "theuni",
        "id": 417043,
        "node_id": "MDQ6VXNlcjQxNzA0Mw==",
        "avatar_url": "https://avatars.githubusercontent.com/u/417043?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/theuni",
        "html_url": "https://github.com/theuni",
        "followers_url": "https://api.github.com/users/theuni/followers",
        "following_url": "https://api.github.com/users/theuni/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/theuni/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/theuni/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/theuni/subscriptions",
        "organizations_url": "https://api.github.com/users/theuni/orgs",
        "repos_url": "https://api.github.com/users/theuni/repos",
        "events_url": "https://api.github.com/users/theuni/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/theuni/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "This unfortunately leaves us open to a supply-chain attack as it depends on the contents of the builders's environment. We'll need to commit to the hash of a deterministic tarball.",
      "created_at": "2025-01-31T21:03:15Z",
      "updated_at": "2025-01-31T21:03:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1937978920",
      "author_association": "MEMBER",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1937978920"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1937988473",
      "pull_request_review_id": 2581114485,
      "id": 1937988473,
      "node_id": "PRRC_kwDOABII585zg1t5",
      "diff_hunk": "@@ -1,8 +1,5 @@\n package=native_libmultiprocess\n-$(package)_version=07c917f7ca910d66abc6d3873162fc9061704074\n-$(package)_download_path=https://github.com/chaincodelabs/libmultiprocess/archive\n-$(package)_file_name=$($(package)_version).tar.gz\n-$(package)_sha256_hash=ac9db311e3b22aac3c7b7b7b3f6b7fee5cf3043ebb3c3bf412049e8b17166de8",
      "path": "depends/packages/native_libmultiprocess.mk",
      "position": 5,
      "original_position": 5,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "19eef973cb4ae37d202c9f584b6ed913482aab4a",
      "in_reply_to_id": 1937978920,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "I am not following. Can you describe the concern?",
      "created_at": "2025-01-31T21:14:25Z",
      "updated_at": "2025-01-31T21:22:03Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1937988473",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1937988473"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "LEFT"
    },
    {
      "url": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938013882",
      "pull_request_review_id": 2587930598,
      "id": 1938013882,
      "node_id": "PRRC_kwDOABII585zg766",
      "diff_hunk": "@@ -1,8 +1,5 @@\n package=native_libmultiprocess\n-$(package)_version=07c917f7ca910d66abc6d3873162fc9061704074\n-$(package)_download_path=https://github.com/chaincodelabs/libmultiprocess/archive\n-$(package)_file_name=$($(package)_version).tar.gz\n-$(package)_sha256_hash=ac9db311e3b22aac3c7b7b7b3f6b7fee5cf3043ebb3c3bf412049e8b17166de8",
      "path": "depends/packages/native_libmultiprocess.mk",
      "position": 5,
      "original_position": 5,
      "commit_id": "ab041937289f4939758c1896f5cb57f556ae0615",
      "original_commit_id": "19eef973cb4ae37d202c9f584b6ed913482aab4a",
      "in_reply_to_id": 1937978920,
      "user": {
        "login": "ryanofsky",
        "id": 7133040,
        "node_id": "MDQ6VXNlcjcxMzMwNDA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/7133040?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/ryanofsky",
        "html_url": "https://github.com/ryanofsky",
        "followers_url": "https://api.github.com/users/ryanofsky/followers",
        "following_url": "https://api.github.com/users/ryanofsky/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/ryanofsky/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/ryanofsky/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/ryanofsky/subscriptions",
        "organizations_url": "https://api.github.com/users/ryanofsky/orgs",
        "repos_url": "https://api.github.com/users/ryanofsky/repos",
        "events_url": "https://api.github.com/users/ryanofsky/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/ryanofsky/received_events",
        "type": "User",
        "site_admin": false,
        "patch_url": null
      },
      "body": "> I am not following. Can you describe the concern?\r\n\r\nI would think if anything we are more vulnerable to supply-chain attack **without** this change, because, for example if a few bitcoin core developers conspired and made a version of libmultiprocess with a backdoor and pushed it to github, it wouldn't be obvious to other developers that the hashes pointed to a backdoor version. It also wouldn't be obvious to external observers diffing one version of bitcoin to the next to check for introduction of malicious code.\r\n\r\nBy contrast, **with** this change depends system would no longer be downloading a second copy of sources already sit in the local git repository. With this change, in order to introduce a backdoor into libmultiprocess, that backdoor would have be visible in src/ipc/libmultiprocess, show up in normal diffs, and sitting in plain sight.",
      "created_at": "2025-01-31T21:43:14Z",
      "updated_at": "2025-01-31T21:43:15Z",
      "html_url": "https://github.com/bitcoin/bitcoin/pull/31741#discussion_r1938013882",
      "author_association": "CONTRIBUTOR",
      "_links": {
        "self": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/comments/1938013882"
        },
        "pull_request": {
          "href": "https://api.github.com/repos/bitcoin/bitcoin/pulls/31741"
        }
      },
      "start_line": null,
      "original_start_line": null,
      "start_side": null,
      "line": 5,
      "original_line": 5,
      "side": "LEFT"
    }
  ]
}